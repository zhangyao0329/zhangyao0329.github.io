<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>pythonå¤§æ¨¡å‹demo1</title>
      <link href="/2025/11/13/python-da-mo-xing-demo1/"/>
      <url>/2025/11/13/python-da-mo-xing-demo1/</url>
      
        <content type="html"><![CDATA[<h1 id="å¤§æ¨¡å‹è°ƒç”¨"><a href="#å¤§æ¨¡å‹è°ƒç”¨" class="headerlink" title="å¤§æ¨¡å‹è°ƒç”¨"></a>å¤§æ¨¡å‹è°ƒç”¨</h1><h2 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h2><h3 id="anacondaç¯å¢ƒé…ç½®"><a href="#anacondaç¯å¢ƒé…ç½®" class="headerlink" title="anacondaç¯å¢ƒé…ç½®"></a>anacondaç¯å¢ƒé…ç½®</h3><p>åº”ç”¨è™šæ‹Ÿç¯å¢ƒ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒ</span>conda <span class="token function">env</span> list<span class="token comment"># æˆ–</span>conda info <span class="token parameter variable">--envs</span><span class="token comment"># æŸ¥çœ‹å½“å‰æ‰€åœ¨ç¯å¢ƒ</span>conda infoconda activate heimaAIconda deactivate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>jupyteræ±‰åŒ–</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip <span class="token function">install</span> jupyterlab-language-pack-zh-CN<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>jupyterè”æƒ³</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda <span class="token function">install</span> <span class="token parameter variable">-c</span> conda-forge jupyter_nbextensions_configurator<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><a href="http://localhost:8888/tree">http://localhost:8888/tree</a></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251109135155467.png"></p><h2 id="WSL-Ubuntuå®‰è£…Ollamaå®Œæ•´æ•™ç¨‹"><a href="#WSL-Ubuntuå®‰è£…Ollamaå®Œæ•´æ•™ç¨‹" class="headerlink" title="WSL Ubuntuå®‰è£…Ollamaå®Œæ•´æ•™ç¨‹"></a>WSL Ubuntuå®‰è£…Ollamaå®Œæ•´æ•™ç¨‹</h2><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251111135423665.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251111135540037.png"></p><p>å‹¾é€‰ä¹‹åä¼šé‡å¯ã€‚ç„¶ååœ¨windowsçš„ç³»ç»Ÿå•†åº—ä¸­å®‰è£…Ubuntuå’Œwindows terminal</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251111135753340.png"><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251111135924457.png"></p><p>è®¾ç½®ç”¨æˆ·åï¼šzhangyao å¯†ç ï¼š123456<img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251111140019565.png"></p><p>æ§åˆ¶å°è®¾ç½®é»˜è®¤ç³»ç»ŸUbuntu<img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251111140535277.png"></p><p>æ£€æŸ¥wslç‰ˆæœ¬ï¼Œç¡®å®šä¸ºwsl2</p><pre class="line-numbers language-none"><code class="language-none">wsl --list --verbose<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœä¸ä¸º2ç‰ˆæœ¬ï¼Œåˆ™ä¿®æ”¹ä¸ºwsl2</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wsl --set-version Ubuntu <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ›´æ–°å†…æ ¸åŒ…</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wsl <span class="token parameter variable">--update</span> --web-download<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å®‰è£…å®Œæ¯•ä¹‹åï¼Œå†æ‰§è¡Œ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wsl --set-version Ubuntu <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>éªŒè¯ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wsl <span class="token parameter variable">--list</span> <span class="token parameter variable">--verbose</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251111164640032.png"></p><p>wslé…ç½®ï¼š</p><pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">wsl2</span><span class="token punctuation">]</span></span><span class="token key attr-name">memory</span><span class="token punctuation">=</span><span class="token value attr-value">8GB</span><span class="token key attr-name">processors</span><span class="token punctuation">=</span><span class="token value attr-value">4</span><span class="token comment"># å¢åŠ äº¤æ¢ç©ºé—´</span><span class="token key attr-name">swap</span><span class="token punctuation">=</span><span class="token value attr-value">4GB</span>  <span class="token key attr-name">localhostForwarding</span><span class="token punctuation">=</span><span class="token value attr-value">true</span><span class="token comment"># æ·»åŠ è¿™äº›ä¼˜åŒ–è®¾ç½®</span><span class="token key attr-name">kernelCommandLine</span> <span class="token punctuation">=</span> <span class="token value attr-value">sysctl.vm.swappiness=10</span><span class="token comment"># ç¡®ä¿ç£ç›˜ç©ºé—´å……è¶³</span><span class="token key attr-name">diskSpace</span><span class="token punctuation">=</span><span class="token value attr-value">40GB</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>wslå…³æœºï¼š</p><pre class="line-numbers language-ini" data-language="ini"><code class="language-ini">wsl --shutdown<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸‹è½½ollama:</p><p>curl -fsSL <a href="https://ollama.com/install.sh">https://ollama.com/install.sh</a> | sh</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251111140722184.png"></p><p>ç›´æ¥ä¸‹è½½ç½‘é€Ÿå¾ˆæ…¢ï¼Œå»ºè®®æ‰‹åŠ¨ä¸‹è½½ã€‚</p><p><a href="https://docs.ollama.com/linux">https://docs.ollama.com/linux</a></p><p><a href="https://ollama.com/download/ollama-linux-amd64-rocm.tgz">https://ollama.com/download/ollama-linux-amd64-rocm.tgz</a></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251111141910199.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">tar</span> <span class="token parameter variable">-xvf</span> ollama-linux-amd64.tgz <span class="token parameter variable">-C</span> /usr<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Start-Ollama"><a href="#Start-Ollama" class="headerlink" title="Start Ollama"></a>Start Ollama</h3><p>æ— æ³•ä½¿ç”¨systemdï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿è¡ŒOllamaï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åå°è¿è¡Œ</span><span class="token function">nohup</span> /usr/bin/ollama serve <span class="token operator">&gt;</span> /tmp/ollama.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span><span class="token comment"># æŸ¥çœ‹è¿›ç¨‹</span><span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> ollama<span class="token comment"># æŸ¥çœ‹æ—¥å¿—</span><span class="token function">tail</span> <span class="token parameter variable">-f</span> /tmp/ollama.log<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¼šå¯åŠ¨OllamaæœåŠ¡ï¼Œä½†ä¼šå ç”¨å½“å‰ç»ˆç«¯ã€‚å¦‚æœè¦åå°è¿è¡Œï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åå°è¿è¡Œ</span><span class="token function">nohup</span> /usr/bin/ollama serve <span class="token operator">&gt;</span> /tmp/ollama.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span><span class="token comment"># æŸ¥çœ‹è¿›ç¨‹</span><span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> ollama<span class="token comment"># æŸ¥çœ‹æ—¥å¿—</span><span class="token function">tail</span> <span class="token parameter variable">-f</span> /tmp/ollama.log<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä½¿ç”¨WSLçš„æ›¿ä»£æœåŠ¡ç®¡ç†-æ¨è"><a href="#ä½¿ç”¨WSLçš„æ›¿ä»£æœåŠ¡ç®¡ç†-æ¨è" class="headerlink" title="ä½¿ç”¨WSLçš„æ›¿ä»£æœåŠ¡ç®¡ç†(æ¨è)"></a>ä½¿ç”¨WSLçš„æ›¿ä»£æœåŠ¡ç®¡ç†(æ¨è)</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ›å»ºå¯åŠ¨è„šæœ¬</span><span class="token function">sudo</span> <span class="token function">vi</span> /etc/init.d/ollama<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åœ¨æ–‡ä»¶ä¸­æ·»åŠ ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token keyword">case</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token keyword">in</span>    start<span class="token punctuation">)</span>        <span class="token function">nohup</span> /usr/bin/ollama serve <span class="token operator">&gt;</span> /tmp/ollama.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>        <span class="token punctuation">;</span><span class="token punctuation">;</span>    stop<span class="token punctuation">)</span>        <span class="token function">pkill</span> <span class="token parameter variable">-f</span> <span class="token string">"ollama serve"</span>        <span class="token punctuation">;</span><span class="token punctuation">;</span>    status<span class="token punctuation">)</span>        pgrep <span class="token parameter variable">-f</span> <span class="token string">"ollama serve"</span> <span class="token operator">&gt;</span> /dev/null <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token string">"Running"</span> <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">"Stopped"</span>        <span class="token punctuation">;</span><span class="token punctuation">;</span>    *<span class="token punctuation">)</span>        <span class="token builtin class-name">echo</span> <span class="token string">"Usage: <span class="token variable">$0</span> {start|stop|status}"</span>        <span class="token builtin class-name">exit</span> <span class="token number">1</span>        <span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token keyword">esac</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ç»™è„šæœ¬æ‰§è¡Œæƒé™</span><span class="token function">sudo</span> <span class="token function">chmod</span> +x /etc/init.d/ollama<span class="token comment"># ä½¿ç”¨æ–¹å¼</span><span class="token function">sudo</span> /etc/init.d/ollama start<span class="token function">sudo</span> /etc/init.d/ollama status<span class="token function">sudo</span> /etc/init.d/ollama stop<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Adding-Ollama-as-a-startup-service-æ¨è"><a href="#Adding-Ollama-as-a-startup-service-æ¨è" class="headerlink" title="Adding Ollama as a startup service (æ¨è)"></a>Adding Ollama as a startup service (æ¨è)</h3><p>ï¼ˆwsl1ç‰ˆæœ¬æ— æ³•ä½¿ç”¨ï¼Œä¼šæœ‰ä¸‹å›¾bugï¼‰:<img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251112142430029.png"></p><p>Create a user and group for Ollama:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">useradd</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">-s</span> /bin/false <span class="token parameter variable">-U</span> <span class="token parameter variable">-m</span> <span class="token parameter variable">-d</span> /usr/share/ollama ollama<span class="token function">sudo</span> <span class="token function">usermod</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-G</span> ollama <span class="token variable"><span class="token variable">$(</span><span class="token function">whoami</span><span class="token variable">)</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>Create a service file in <code>/etc/systemd/system/ollama.service</code>:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">vi</span> /etc/systemd/system/ollama.service<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span><span class="token assign-left variable">Description</span><span class="token operator">=</span>Ollama Service<span class="token assign-left variable">After</span><span class="token operator">=</span>network-online.target<span class="token punctuation">[</span>Service<span class="token punctuation">]</span><span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/ollama serve<span class="token assign-left variable">User</span><span class="token operator">=</span>ollama<span class="token assign-left variable">Group</span><span class="token operator">=</span>ollama<span class="token assign-left variable">Restart</span><span class="token operator">=</span>always<span class="token assign-left variable">RestartSec</span><span class="token operator">=</span><span class="token number">3</span><span class="token assign-left variable">Environment</span><span class="token operator">=</span><span class="token string">"PATH=<span class="token environment constant">$PATH</span>"</span><span class="token punctuation">[</span>Install<span class="token punctuation">]</span><span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Then start the service:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> systemctl daemon-reload<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> ollama<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># é‡æ–°åŠ è½½systemdé…ç½®</span><span class="token function">sudo</span> systemctl daemon-reload<span class="token comment"># å¼€å¯å¼€æœºè‡ªå¯</span><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> ollama<span class="token comment"># å¯åŠ¨ollamaæœåŠ¡</span><span class="token function">sudo</span> systemctl start ollama<span class="token comment"># æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</span><span class="token function">sudo</span> systemctl status ollama<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¯åŠ¨æœåŠ¡</span><span class="token function">sudo</span> systemctl start ollama<span class="token comment"># åœæ­¢æœåŠ¡</span><span class="token function">sudo</span> systemctl stop ollama<span class="token comment"># æŸ¥çœ‹çŠ¶æ€</span><span class="token function">sudo</span> systemctl status ollama<span class="token comment"># å¼€å¯/å…³é—­å¼€æœºè‡ªå¯</span><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> ollama<span class="token function">sudo</span> systemctl disable ollama<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ä¸‹è½½æ¨¡å‹ï¼ˆé¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨ä¸‹è½½ï¼‰</span>ollama pull deepseek-r1:1.5b<span class="token comment"># è¿è¡Œæ¨¡å‹</span>ollama run deepseek-r1:1.5b<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Install-CUDA-drivers-optional"><a href="#Install-CUDA-drivers-optional" class="headerlink" title="Install CUDA drivers (optional)"></a>Install CUDA drivers (optional)</h3><p><a href="https://developer.nvidia.com/cuda-downloads">Download and install</a> CUDA.Verify that the drivers are installed by running the following command, which should print details about your GPU:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nvidia-smi<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Install-AMD-ROCm-drivers-optional"><a href="#Install-AMD-ROCm-drivers-optional" class="headerlink" title="Install AMD ROCm drivers (optional)"></a>Install AMD ROCm drivers (optional)</h3><p><a href="https://rocm.docs.amd.com/projects/install-on-linux/en/latest/tutorial/quick-start.html">Download and Install</a> ROCm v6.</p><h2 id="å®‰è£…åŒ…"><a href="#å®‰è£…åŒ…" class="headerlink" title="å®‰è£…åŒ…"></a>å®‰è£…åŒ…</h2><p>æ–°ç‰ˆæœ¬çš„Ubuntuï¼ˆç‰¹åˆ«æ˜¯22.04+ï¼‰é»˜è®¤é˜»æ­¢ç›´æ¥ä½¿ç”¨<code>pip</code>å®‰è£…ç³»ç»Ÿçº§çš„PythonåŒ…ï¼Œä»¥é˜²æ­¢ç ´åç³»ç»Ÿä¾èµ–ã€‚</p><h3 id="ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰"><a href="#ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰" class="headerlink" title="ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰"></a>ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å®‰è£…venvæ¨¡å—</span><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> python3-venv <span class="token parameter variable">-y</span><span class="token comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>python3 <span class="token parameter variable">-m</span> venv ollama-env<span class="token comment"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span><span class="token builtin class-name">source</span> ollama-env/bin/activate<span class="token comment"># åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…ollama</span>pip <span class="token function">install</span> ollama<span class="token comment"># ä½¿ç”¨ollama</span>python3 <span class="token parameter variable">-c</span> <span class="token string">"import ollama; print('å®‰è£…æˆåŠŸ\!')"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é…ç½®æ¸…åé•œåƒæº"><a href="#é…ç½®æ¸…åé•œåƒæº" class="headerlink" title="é…ç½®æ¸…åé•œåƒæº"></a>é…ç½®æ¸…åé•œåƒæº</h2><h3 id="æ–¹æ³•1ï¼šä¸´æ—¶ä½¿ç”¨é•œåƒæº"><a href="#æ–¹æ³•1ï¼šä¸´æ—¶ä½¿ç”¨é•œåƒæº" class="headerlink" title="æ–¹æ³•1ï¼šä¸´æ—¶ä½¿ç”¨é•œåƒæº"></a>æ–¹æ³•1ï¼šä¸´æ—¶ä½¿ç”¨é•œåƒæº</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åœ¨å®‰è£…æ—¶ç›´æ¥æŒ‡å®šæ¸…åé•œåƒæº</span>pip <span class="token function">install</span> ollama <span class="token parameter variable">-i</span> https://pypi.tuna.tsinghua.edu.cn/simple --trusted-host pypi.tuna.tsinghua.edu.cn<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æ–¹æ³•2ï¼šé…ç½®ä¸ºé»˜è®¤é•œåƒæº"><a href="#æ–¹æ³•2ï¼šé…ç½®ä¸ºé»˜è®¤é•œåƒæº" class="headerlink" title="æ–¹æ³•2ï¼šé…ç½®ä¸ºé»˜è®¤é•œåƒæº"></a>æ–¹æ³•2ï¼šé…ç½®ä¸ºé»˜è®¤é•œåƒæº</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ›å»ºpipé…ç½®æ–‡ä»¶</span><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/.pip<span class="token comment"># ç¼–è¾‘pipé…ç½®æ–‡ä»¶ï¼š</span><span class="token function">vi</span> ~/.pip/pip.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">global</span><span class="token punctuation">]</span></span><span class="token key attr-name">index-url</span> <span class="token punctuation">=</span> <span class="token value attr-value">https://pypi.tuna.tsinghua.edu.cn/simple</span><span class="token key attr-name">trusted-host</span> <span class="token punctuation">=</span> <span class="token value attr-value">pypi.tuna.tsinghua.edu.cn</span><span class="token key attr-name">timeout</span> <span class="token punctuation">=</span> <span class="token value attr-value">120</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ–¹æ³•3ï¼šåœ¨å½“å‰è™šæ‹Ÿç¯å¢ƒä¸­é…ç½®ï¼ˆæ¨èï¼‰"><a href="#æ–¹æ³•3ï¼šåœ¨å½“å‰è™šæ‹Ÿç¯å¢ƒä¸­é…ç½®ï¼ˆæ¨èï¼‰" class="headerlink" title="æ–¹æ³•3ï¼šåœ¨å½“å‰è™šæ‹Ÿç¯å¢ƒä¸­é…ç½®ï¼ˆæ¨èï¼‰"></a>æ–¹æ³•3ï¼šåœ¨å½“å‰è™šæ‹Ÿç¯å¢ƒä¸­é…ç½®ï¼ˆæ¨èï¼‰</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span><span class="token builtin class-name">source</span> ollama-env/bin/activate<span class="token comment"># åœ¨è™šæ‹Ÿç¯å¢ƒä¸­åˆ›å»ºpipé…ç½®æ–‡ä»¶</span><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ollama-env/pip<span class="token function">vi</span> ollama-env/pip/pip.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ·»åŠ åŒæ ·çš„å†…å®¹ï¼š</p><pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">global</span><span class="token punctuation">]</span></span><span class="token key attr-name">index-url</span> <span class="token punctuation">=</span> <span class="token value attr-value">https://pypi.tuna.tsinghua.edu.cn/simple</span><span class="token key attr-name">trusted-host</span> <span class="token punctuation">=</span> <span class="token value attr-value">pypi.tuna.tsinghua.edu.cn</span><span class="token key attr-name">timeout</span> <span class="token punctuation">=</span> <span class="token value attr-value">120</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ"><a href="#ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ"></a>ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip freeze <span class="token operator">&gt;</span> requirements.txt<span class="token builtin class-name">source</span> ollama-env/bin/activatepip <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none"># wsl2å­ç³»ç»ŸUbuntuè™šæ‹Ÿç¯å¢ƒ ollama-env é…ç½®è§£é‡Šè·¯å¾„/home/zhangyao/python_code/ollama-env/bin/python3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251112073426576.png"></p><h1 id="ollamaå’Œstramlit"><a href="#ollamaå’Œstramlit" class="headerlink" title="ollamaå’Œstramlit"></a>ollamaå’Œstramlit</h1><h2 id="main-py"><a href="#main-py" class="headerlink" title="main.py"></a>main.py</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> ollama<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    client <span class="token operator">=</span> ollama<span class="token punctuation">.</span>Client<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token comment"># åˆ—å‡ºå¯ç”¨æ¨¡å‹</span>        models <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å¯ç”¨æ¨¡å‹:"</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> model <span class="token keyword">in</span> models<span class="token punctuation">.</span>models<span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"  - </span><span class="token interpolation"><span class="token punctuation">{</span>model<span class="token punctuation">.</span>model<span class="token punctuation">}</span></span><span class="token string"> (å‚æ•°å¤§å°: </span><span class="token interpolation"><span class="token punctuation">{</span>model<span class="token punctuation">.</span>details<span class="token punctuation">.</span>parameter_size<span class="token punctuation">}</span></span><span class="token string">)"</span></span><span class="token punctuation">)</span>        <span class="token comment"># ä½¿ç”¨ç¬¬ä¸€ä¸ªæ¨¡å‹è¿›è¡Œå¯¹è¯</span>        <span class="token keyword">if</span> models<span class="token punctuation">.</span>models<span class="token punctuation">:</span>            model_name <span class="token operator">=</span> models<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>model            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"\nä½¿ç”¨æ¨¡å‹: </span><span class="token interpolation"><span class="token punctuation">{</span>model_name<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>            <span class="token comment"># è¿›è¡Œå¯¹è¯</span>            response <span class="token operator">=</span> client<span class="token punctuation">.</span>generate<span class="token punctuation">(</span>                model<span class="token operator">=</span>model_name<span class="token punctuation">,</span>                prompt<span class="token operator">=</span><span class="token string">"Hello, how are you? Please respond briefly."</span>            <span class="token punctuation">)</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"\nAI å“åº”: </span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">.</span>response<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>            <span class="token comment"># å¦‚æœæœ‰æ€è€ƒè¿‡ç¨‹ï¼Œä¹Ÿæ˜¾ç¤ºå‡ºæ¥</span>            <span class="token keyword">if</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> <span class="token string">'thinking'</span><span class="token punctuation">)</span> <span class="token keyword">and</span> response<span class="token punctuation">.</span>thinking<span class="token punctuation">:</span>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"\næ€è€ƒè¿‡ç¨‹: </span><span class="token interpolation"><span class="token punctuation">{</span>response<span class="token punctuation">.</span>thinking<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æ“ä½œå‡ºé”™: </span><span class="token interpolation"><span class="token punctuation">{</span>e<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    main<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ollama-test-py"><a href="#ollama-test-py" class="headerlink" title="ollama_test.py"></a>ollama_test.py</h2><table><thead><tr><th align="left">æ–¹æ³•å</th><th align="left">æ–¹æ³•ä»‹ç»</th><th align="left">ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left"><strong><code>Client()</code></strong></td><td align="left">åˆ›å»ºOllamaå®¢æˆ·ç«¯å®ä¾‹</td><td align="left"><code>client = ollama.Client()</code></td></tr><tr><td align="left"><strong><code>client.list()</code></strong></td><td align="left">åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„æ¨¡å‹</td><td align="left"><code>models = client.list()</code></td></tr><tr><td align="left"><strong><code>client.generate()</code></strong></td><td align="left">ä½¿ç”¨æŒ‡å®šæ¨¡å‹ç”Ÿæˆæ–‡æœ¬å“åº”</td><td align="left"><code>response = client.generate(model='name', prompt='text')</code></td></tr><tr><td align="left"><strong><code>client.show()</code></strong></td><td align="left">æ˜¾ç¤ºæŒ‡å®šæ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯</td><td align="left"><code>model_info = client.show('model-name')</code></td></tr><tr><td align="left"><strong><code>client.ps()</code></strong></td><td align="left">æ˜¾ç¤ºå½“å‰æ­£åœ¨è¿è¡Œçš„æ¨¡å‹</td><td align="left"><code>running_models = client.ps()</code></td></tr><tr><td align="left"><strong><code>client.pull()</code></strong></td><td align="left">ä»ä»“åº“æ‹‰å–æ¨¡å‹</td><td align="left"><code>client.pull('model-name')</code></td></tr><tr><td align="left"><strong><code>client.push()</code></strong></td><td align="left">æ¨é€æ¨¡å‹åˆ°ä»“åº“</td><td align="left"><code>client.push('model-name')</code></td></tr><tr><td align="left"><strong><code>client.create()</code></strong></td><td align="left">åˆ›å»ºè‡ªå®šä¹‰æ¨¡å‹</td><td align="left"><code>client.create(model='name', modelfile='content')</code></td></tr><tr><td align="left"><strong><code>client.delete()</code></strong></td><td align="left">åˆ é™¤æŒ‡å®šæ¨¡å‹</td><td align="left"><code>client.delete('model-name')</code></td></tr></tbody></table><table><thead><tr><th align="left">æ–¹æ³•</th><th align="left">è¿”å›å¯¹è±¡/å±æ€§</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><strong><code>client.list()</code></strong></td><td align="left"><code>ListResponse</code></td><td align="left">åŒ…å«æ¨¡å‹åˆ—è¡¨çš„å“åº”å¯¹è±¡</td></tr><tr><td align="left"></td><td align="left"><code>models.models</code></td><td align="left">æ¨¡å‹å¯¹è±¡åˆ—è¡¨</td></tr><tr><td align="left"></td><td align="left"><code>model.model</code></td><td align="left">æ¨¡å‹åç§°</td></tr><tr><td align="left"></td><td align="left"><code>model.details.parameter_size</code></td><td align="left">æ¨¡å‹å‚æ•°é‡</td></tr><tr><td align="left"><strong><code>client.generate()</code></strong></td><td align="left"><code>GenerateResponse</code></td><td align="left">ç”Ÿæˆå“åº”çš„ç»“æœå¯¹è±¡</td></tr><tr><td align="left"></td><td align="left"><code>response.response</code></td><td align="left">AIç”Ÿæˆçš„æ–‡æœ¬å†…å®¹</td></tr><tr><td align="left"></td><td align="left"><code>response.thinking</code></td><td align="left">æ€è€ƒè¿‡ç¨‹ï¼ˆå¦‚æœæ¨¡å‹æ”¯æŒï¼‰</td></tr><tr><td align="left"><strong><code>client.show()</code></strong></td><td align="left"><code>ModelInfo</code></td><td align="left">æ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯å¯¹è±¡</td></tr><tr><td align="left"><strong><code>client.ps()</code></strong></td><td align="left"><code>List[Process]</code></td><td align="left">æ­£åœ¨è¿è¡Œçš„æ¨¡å‹è¿›ç¨‹åˆ—è¡¨</td></tr></tbody></table><h3 id="demo1"><a href="#demo1" class="headerlink" title="demo1:"></a>demo1:</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> ollama<span class="token comment"># åˆ›å»ºå®¢æˆ·ç«¯ - ä½¿ç”¨é»˜è®¤è®¾ç½®</span>client <span class="token operator">=</span> ollama<span class="token punctuation">.</span>Client<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å®¢æˆ·ç«¯åˆ›å»ºæˆåŠŸ:"</span><span class="token punctuation">,</span> client<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å±•ç¤ºæ¨¡å‹è¯¦ç»†ä¿¡æ¯: "</span><span class="token punctuation">,</span> client<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token string">"deepseek-r1:1.5b"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ­£åœ¨è¿è¡Œçš„æ¨¡å‹: "</span><span class="token punctuation">,</span> client<span class="token punctuation">.</span>ps<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># æµ‹è¯•åˆ—å‡ºæ¨¡å‹</span><span class="token keyword">try</span><span class="token punctuation">:</span>    models <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å¯ç”¨çš„æ¨¡å‹:"</span><span class="token punctuation">,</span> models<span class="token punctuation">)</span><span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"åˆ—å‡ºæ¨¡å‹æ—¶å‡ºé”™:"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token comment"># æµ‹è¯•ç”Ÿæˆå“åº”</span><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        prompt <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"è¯·ç”¨æˆ·è¾“å…¥: "</span><span class="token punctuation">)</span>        response <span class="token operator">=</span> client<span class="token punctuation">.</span>generate<span class="token punctuation">(</span>model<span class="token operator">=</span><span class="token string">'deepseek-r1:1.5b'</span><span class="token punctuation">,</span> prompt<span class="token operator">=</span>prompt<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æ¨¡å‹å“åº”: '</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ç”Ÿæˆå“åº”æ—¶å‡ºé”™:"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="streamlit-test-py"><a href="#streamlit-test-py" class="headerlink" title="streamlit_test.py"></a>streamlit_test.py</h2><table><thead><tr><th align="left">æ–¹æ³•å</th><th align="left">æ–¹æ³•ä»‹ç»</th><th align="left">ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left"><strong><code>st.title()</code></strong></td><td align="left">è®¾ç½®é¡µé¢ä¸»æ ‡é¢˜</td><td align="left"><code>st.title('AIèŠå¤©åŠ©æ‰‹')</code></td></tr><tr><td align="left"><strong><code>st.write()</code></strong></td><td align="left">åˆ›å»ºæ®µè½æ–‡æœ¬ï¼Œæ”¯æŒå¤šç§æ•°æ®ç±»å‹</td><td align="left"><code>st.write('Hello, World!')</code></td></tr><tr><td align="left"><strong><code>st.divider()</code></strong></td><td align="left">æ·»åŠ æ°´å¹³åˆ†å‰²çº¿</td><td align="left"><code>st.divider()</code></td></tr><tr><td align="left"><strong><code>st.chat_input()</code></strong></td><td align="left">åˆ›å»ºèŠå¤©è¾“å…¥æ¡†ï¼Œè¿”å›ç”¨æˆ·è¾“å…¥å†…å®¹</td><td align="left"><code>input = st.chat_input("è¯·è¾“å…¥...")</code></td></tr><tr><td align="left"><strong><code>st.chat_message()</code></strong></td><td align="left">åˆ›å»ºæ¶ˆæ¯å®¹å™¨ï¼Œæ”¯æŒä¸åŒè§’è‰²æ ·å¼:userã€assistantã€aiã€human</td><td align="left"><code>with st.chat_message("user"):</code></td></tr><tr><td align="left"><strong><code>st.spinner()</code></strong></td><td align="left">æ˜¾ç¤ºç­‰å¾…æç¤ºæ¡†å’ŒåŠ è½½åŠ¨ç”»</td><td align="left"><code>with st.spinner("æ€è€ƒä¸­..."):</code></td></tr><tr><td align="left"><strong><code>st.markdown()</code></strong></td><td align="left">ä»¥Markdownæ ¼å¼æ¸²æŸ“æ–‡æœ¬</td><td align="left"><code>st.markdown('**ç²—ä½“** æ–‡æœ¬')</code></td></tr><tr><td align="left"><strong><code>st.set_page_config()</code></strong></td><td align="left">è®¾ç½®é¡µé¢é…ç½®ï¼ˆæ ‡é¢˜ã€å›¾æ ‡ç­‰ï¼‰</td><td align="left"><code>st.set_page_config(page_title="èŠå¤©")</code></td></tr><tr><td align="left"><strong><code>st.session_state</code></strong></td><td align="left">ç®¡ç†ä¼šè¯çŠ¶æ€ï¼Œä¿å­˜èŠå¤©è®°å½•ç­‰æ•°æ®</td><td align="left"><code>st.session_state.messages = []</code></td></tr></tbody></table><h3 id="demo1-1"><a href="#demo1-1" class="headerlink" title="demo1:"></a>demo1:</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">import</span> streamlit <span class="token keyword">as</span> st<span class="token comment"># æ ‡é¢˜</span>st<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"æµ‹è¯•æ ‡é¢˜"</span><span class="token punctuation">)</span><span class="token comment"># writeæ–¹æ³•</span>st<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"ä½ å¥½~"</span><span class="token punctuation">)</span><span class="token comment"># åˆ†éš”ç¬¦</span>st<span class="token punctuation">.</span>divider<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># èŠå¤©è¾“å…¥æ¡†</span>name <span class="token operator">=</span> st<span class="token punctuation">.</span>chat_input<span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥ä½ çš„åå­—: "</span><span class="token punctuation">)</span><span class="token keyword">if</span> name<span class="token punctuation">:</span>    st<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"ä½ å¥½~,</span><span class="token interpolation"><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token comment"># ç­‰å¾…æç¤ºæ¡†</span><span class="token keyword">with</span> st<span class="token punctuation">.</span>spinner<span class="token punctuation">(</span><span class="token string">"æ€è€ƒä¸­Â·Â·Â·"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>    st<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"æ€è€ƒå®Œæˆ"</span><span class="token punctuation">)</span><span class="token comment"># æ¶ˆæ¯å®¹å™¨ userã€assistantã€aiã€human</span>st<span class="token punctuation">.</span>chat_message<span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>markdown<span class="token punctuation">(</span><span class="token string">"ä½ æ„å•¥ï¼Ÿ"</span><span class="token punctuation">)</span>st<span class="token punctuation">.</span>chat_message<span class="token punctuation">(</span><span class="token string">"assistant"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>markdown<span class="token punctuation">(</span><span class="token string">"ç…ä½ å’‹åœ°ï¼Ÿ"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="demo2"><a href="#demo2" class="headerlink" title="demo2:"></a>demo2:</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> streamlit <span class="token keyword">as</span> st<span class="token keyword">import</span> ollama<span class="token keyword">import</span> time<span class="token comment"># åˆå§‹åŒ–Ollamaå®¢æˆ·ç«¯</span>client <span class="token operator">=</span> ollama<span class="token punctuation">.</span>Client<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># è®¾ç½®é¡µé¢æ ‡é¢˜å’Œå›¾æ ‡</span>st<span class="token punctuation">.</span>set_page_config<span class="token punctuation">(</span>    page_title<span class="token operator">=</span><span class="token string">"AIèŠå¤©åŠ©æ‰‹"</span><span class="token punctuation">,</span>    page_icon<span class="token operator">=</span><span class="token string">"ğŸ¤–"</span><span class="token punctuation">,</span>    layout<span class="token operator">=</span><span class="token string">"wide"</span><span class="token punctuation">)</span><span class="token comment"># æ ‡é¢˜</span>st<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"ğŸ¤– AIèŠå¤©åŠ©æ‰‹"</span><span class="token punctuation">)</span>st<span class="token punctuation">.</span>divider<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># åˆå§‹åŒ–èŠå¤©å†å²</span><span class="token keyword">if</span> <span class="token string">"messages"</span> <span class="token keyword">not</span> <span class="token keyword">in</span> st<span class="token punctuation">.</span>session_state<span class="token punctuation">:</span>    st<span class="token punctuation">.</span>session_state<span class="token punctuation">.</span>messages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment"># æ˜¾ç¤ºèŠå¤©å†å²</span><span class="token keyword">for</span> message <span class="token keyword">in</span> st<span class="token punctuation">.</span>session_state<span class="token punctuation">.</span>messages<span class="token punctuation">:</span>    <span class="token keyword">with</span> st<span class="token punctuation">.</span>chat_message<span class="token punctuation">(</span>message<span class="token punctuation">[</span><span class="token string">"role"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        st<span class="token punctuation">.</span>markdown<span class="token punctuation">(</span>message<span class="token punctuation">[</span><span class="token string">"content"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># ç”¨æˆ·è¾“å…¥</span><span class="token keyword">if</span> prompt <span class="token operator">:=</span> st<span class="token punctuation">.</span>chat_input<span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥æ‚¨çš„é—®é¢˜..."</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># æ·»åŠ ç”¨æˆ·æ¶ˆæ¯åˆ°å†å²</span>    st<span class="token punctuation">.</span>session_state<span class="token punctuation">.</span>messages<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"content"</span><span class="token punctuation">:</span> prompt<span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token comment"># æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯</span>    <span class="token keyword">with</span> st<span class="token punctuation">.</span>chat_message<span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        st<span class="token punctuation">.</span>markdown<span class="token punctuation">(</span>prompt<span class="token punctuation">)</span>    <span class="token comment"># æ˜¾ç¤ºAIå›å¤ï¼ˆå¸¦åŠ è½½æ•ˆæœï¼‰</span>    <span class="token keyword">with</span> st<span class="token punctuation">.</span>chat_message<span class="token punctuation">(</span><span class="token string">"assistant"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        message_placeholder <span class="token operator">=</span> st<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">try</span><span class="token punctuation">:</span>            <span class="token comment"># è°ƒç”¨Ollamaç”Ÿæˆå›å¤</span>            response <span class="token operator">=</span> client<span class="token punctuation">.</span>generate<span class="token punctuation">(</span>                model<span class="token operator">=</span><span class="token string">'deepseek-r1:1.5b'</span><span class="token punctuation">,</span>                prompt<span class="token operator">=</span>prompt<span class="token punctuation">,</span>                stream<span class="token operator">=</span><span class="token boolean">False</span>            <span class="token punctuation">)</span>            <span class="token comment"># è·å–å›å¤å†…å®¹</span>            full_response <span class="token operator">=</span> response<span class="token punctuation">[</span><span class="token string">'response'</span><span class="token punctuation">]</span>            <span class="token comment"># æ¨¡æ‹Ÿæµå¼è¾“å‡ºæ•ˆæœ</span>            simulated_response <span class="token operator">=</span> <span class="token string">""</span>            <span class="token keyword">for</span> chunk <span class="token keyword">in</span> full_response<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                simulated_response <span class="token operator">+=</span> chunk <span class="token operator">+</span> <span class="token string">" "</span>                message_placeholder<span class="token punctuation">.</span>markdown<span class="token punctuation">(</span>simulated_response <span class="token operator">+</span> <span class="token string">"â–Œ"</span><span class="token punctuation">)</span>                time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.05</span><span class="token punctuation">)</span>            message_placeholder<span class="token punctuation">.</span>markdown<span class="token punctuation">(</span>simulated_response<span class="token punctuation">)</span>            <span class="token comment"># æ·»åŠ AIå›å¤åˆ°å†å²</span>            st<span class="token punctuation">.</span>session_state<span class="token punctuation">.</span>messages<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span> <span class="token string">"content"</span><span class="token punctuation">:</span> full_response<span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>            error_message <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"æŠ±æ­‰ï¼Œå‡ºç°é”™è¯¯ï¼š</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span>            message_placeholder<span class="token punctuation">.</span>markdown<span class="token punctuation">(</span>error_message<span class="token punctuation">)</span>            st<span class="token punctuation">.</span>session_state<span class="token punctuation">.</span>messages<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"role"</span><span class="token punctuation">:</span> <span class="token string">"assistant"</span><span class="token punctuation">,</span> <span class="token string">"content"</span><span class="token punctuation">:</span> error_message<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment"># ä¾§è¾¹æ  - æ¸…ç©ºèŠå¤©è®°å½•</span><span class="token keyword">with</span> st<span class="token punctuation">.</span>sidebar<span class="token punctuation">:</span>    st<span class="token punctuation">.</span>header<span class="token punctuation">(</span><span class="token string">"è®¾ç½®"</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> st<span class="token punctuation">.</span>button<span class="token punctuation">(</span><span class="token string">"æ¸…ç©ºèŠå¤©è®°å½•"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        st<span class="token punctuation">.</span>session_state<span class="token punctuation">.</span>messages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        st<span class="token punctuation">.</span>rerun<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æ˜¾ç¤ºå½“å‰æ¨¡å‹ä¿¡æ¯</span>    st<span class="token punctuation">.</span>divider<span class="token punctuation">(</span><span class="token punctuation">)</span>    st<span class="token punctuation">.</span>subheader<span class="token punctuation">(</span><span class="token string">"æ¨¡å‹ä¿¡æ¯"</span><span class="token punctuation">)</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        models <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> models<span class="token punctuation">.</span>models<span class="token punctuation">:</span>            current_model <span class="token operator">=</span> models<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>            st<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"**æ¨¡å‹åç§°**: </span><span class="token interpolation"><span class="token punctuation">{</span>current_model<span class="token punctuation">.</span>model<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>            st<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"**å‚æ•°é‡**: </span><span class="token interpolation"><span class="token punctuation">{</span>current_model<span class="token punctuation">.</span>details<span class="token punctuation">.</span>parameter_size<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>            st<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"**é‡åŒ–çº§åˆ«**: </span><span class="token interpolation"><span class="token punctuation">{</span>current_model<span class="token punctuation">.</span>details<span class="token punctuation">.</span>quantization_level<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>    <span class="token keyword">except</span><span class="token punctuation">:</span>        st<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"æ— æ³•è·å–æ¨¡å‹ä¿¡æ¯"</span><span class="token punctuation">)</span><span class="token comment"># é¡µè„š</span>st<span class="token punctuation">.</span>divider<span class="token punctuation">(</span><span class="token punctuation">)</span>st<span class="token punctuation">.</span>caption<span class="token punctuation">(</span><span class="token string">"åŸºäºOllamaå’ŒStreamlitæ„å»ºçš„AIèŠå¤©åŠ©æ‰‹"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251112173723277.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251112174008040.png"></p><p>LangChain</p><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251112180712322.png"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">pip install langchain langchain<span class="token operator">-</span>community dashscope<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/../Pictures/typora%E6%8F%92%E5%9B%BE/image-20251112181143455.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251112181240633.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251112181257028.png"></p><h2 id="é˜¿é‡Œç™¾ç‚¼å¹³å°"><a href="#é˜¿é‡Œç™¾ç‚¼å¹³å°" class="headerlink" title="é˜¿é‡Œç™¾ç‚¼å¹³å°"></a>é˜¿é‡Œç™¾ç‚¼å¹³å°</h2><p><a href="https://bailian.console.aliyun.com/?tab=model#/model-market">https://bailian.console.aliyun.com/?tab=model#/model-market</a></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251112181714020.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/20251112182335153.png"></p><pre class="line-numbers language-none"><code class="language-none"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¯å¢ƒé…ç½® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pythonå¤§æ¨¡å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSMé¢è¯•</title>
      <link href="/2025/07/18/ssm-mian-shi/"/>
      <url>/2025/07/18/ssm-mian-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ"><a href="#Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ" class="headerlink" title="Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ"></a>Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</h2><p>ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>å½“å¤šç”¨æˆ·åŒæ—¶è¯·æ±‚ä¸€ä¸ªæœåŠ¡æ—¶ï¼Œå®¹å™¨ä¼šç»™æ¯ä¸ªè¯·æ±‚åˆ†é…ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹ä¼šå¹¶å‘æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚</p><p>å¦‚æœå¤„ç†é€»è¾‘ä¸­åŒ…å«å¯¹å•ä¾‹çŠ¶æ€çš„ä¿®æ”¹ï¼Œæ¯”å¦‚ä¿®æ”¹å•ä¾‹çš„æˆå‘˜å±æ€§ï¼Œå°±å¿…é¡»<strong>è€ƒè™‘çº¿ç¨‹åŒæ­¥é—®é¢˜</strong>ã€‚</p><p>Springæ¡†æ¶æœ¬èº«å¹¶ä¸å¯¹å•ä¾‹beanè¿›è¡Œçº¿ç¨‹å®‰å…¨å°è£…ï¼Œ<strong>çº¿ç¨‹å®‰å…¨å’Œå¹¶å‘é—®é¢˜éœ€è¦å¼€å‘è€…è‡ªè¡Œå¤„ç†ã€‚</strong></p><p>é€šå¸¸åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„Spring beanæ˜¯ä¸å¯å˜çŠ¶æ€ï¼ˆå¦‚Serviceç±»å’ŒDAOç±»ï¼‰ï¼Œå› æ­¤åœ¨æŸç§ç¨‹åº¦ä¸Šå¯ä»¥è¯´Springçš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>å¦‚æœbeanæœ‰å¤šç§çŠ¶æ€ï¼ˆå¦‚ViewModelå¯¹è±¡ï¼‰ï¼Œå°±éœ€è¦è‡ªè¡Œä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæœ€ç®€å•çš„è§£å†³åŠæ³•æ˜¯å°†å•ä¾‹beançš„ä½œç”¨åŸŸç”±â€œ<strong>singleton</strong>â€å˜æ›´ä¸ºâ€œ<strong>prototype</strong>â€ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯AOPï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯AOPï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯AOPï¼Ÿ"></a>ä»€ä¹ˆæ˜¯AOPï¼Ÿ</h2><p>AOPï¼Œå³é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œåœ¨Springä¸­ç”¨äºå°†é‚£äº›ä¸<strong>ä¸šåŠ¡æ— å…³ä½†å¯¹å¤šä¸ªå¯¹è±¡äº§ç”Ÿå½±å“çš„å…¬å…±è¡Œä¸ºå’Œé€»è¾‘</strong>æŠ½å–å‡ºæ¥ï¼Œå®ç°å…¬å…±æ¨¡å—å¤ç”¨ï¼Œé™ä½è€¦åˆã€‚</p><p>å¸¸è§çš„åº”ç”¨åœºæ™¯åŒ…æ‹¬å…¬å…±æ—¥å¿—ä¿å­˜å’Œäº‹åŠ¡å¤„ç†ã€‚</p><h3 id="ä½ ä»¬é¡¹ç›®ä¸­æœ‰æ²¡æœ‰ä½¿ç”¨åˆ°AOPï¼Ÿ"><a href="#ä½ ä»¬é¡¹ç›®ä¸­æœ‰æ²¡æœ‰ä½¿ç”¨åˆ°AOPï¼Ÿ" class="headerlink" title="ä½ ä»¬é¡¹ç›®ä¸­æœ‰æ²¡æœ‰ä½¿ç”¨åˆ°AOPï¼Ÿ"></a>ä½ ä»¬é¡¹ç›®ä¸­æœ‰æ²¡æœ‰ä½¿ç”¨åˆ°AOPï¼Ÿ</h3><p>æˆ‘ä»¬ä¹‹å‰åœ¨åå°ç®¡ç†ç³»ç»Ÿä¸­ä½¿ç”¨AOPæ¥è®°å½•ç³»ç»Ÿæ“ä½œæ—¥å¿—ã€‚ä¸»è¦æ€è·¯æ˜¯ä½¿ç”¨AOPçš„ç¯ç»•é€šçŸ¥å’Œåˆ‡ç‚¹è¡¨è¾¾å¼ï¼Œæ‰¾åˆ°éœ€è¦è®°å½•æ—¥å¿—çš„æ–¹æ³•ï¼Œç„¶åé€šè¿‡ç¯ç»•é€šçŸ¥çš„å‚æ•°è·å–è¯·æ±‚æ–¹æ³•çš„å‚æ•°ï¼Œä¾‹å¦‚ç±»ä¿¡æ¯ã€æ–¹æ³•ä¿¡æ¯ã€æ³¨è§£ã€è¯·æ±‚æ–¹å¼ç­‰ï¼Œå¹¶å°†è¿™äº›å‚æ•°ä¿å­˜åˆ°æ•°æ®åº“ã€‚</p><h3 id="Springä¸­çš„äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"><a href="#Springä¸­çš„äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ" class="headerlink" title="Springä¸­çš„äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"></a>Springä¸­çš„äº‹åŠ¡æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h3><p>Springå®ç°äº‹åŠ¡çš„æœ¬è´¨æ˜¯åˆ©ç”¨AOPå®Œæˆçš„ã€‚</p><p>å®ƒå¯¹æ–¹æ³•å‰åè¿›è¡Œæ‹¦æˆªï¼Œåœ¨æ‰§è¡Œæ–¹æ³•å‰å¼€å¯äº‹åŠ¡ï¼Œåœ¨æ‰§è¡Œå®Œç›®æ ‡æ–¹æ³•åæ ¹æ®æ‰§è¡Œæƒ…å†µæäº¤æˆ–å›æ»šäº‹åŠ¡ã€‚</p><h2 id="Springä¸­äº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯æœ‰å“ªäº›ï¼Ÿ"><a href="#Springä¸­äº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Springä¸­äº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯æœ‰å“ªäº›ï¼Ÿ"></a>Springä¸­äº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</h2><p>åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘é‡åˆ°è¿‡å‡ ç§å¯¼è‡´äº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯ï¼š</p><ol><li>å¦‚æœæ–¹æ³•å†…éƒ¨<strong>æ•è·å¹¶å¤„ç†äº†å¼‚å¸¸ï¼Œæ²¡æœ‰å°†å¼‚å¸¸æŠ›å‡º</strong>ï¼Œä¼šå¯¼è‡´äº‹åŠ¡å¤±æ•ˆã€‚å› æ­¤ï¼Œå¤„ç†å¼‚å¸¸ååº”è¯¥ç¡®ä¿å¼‚å¸¸èƒ½å¤Ÿè¢«æŠ›å‡ºã€‚</li><li>å¦‚æœæ–¹æ³•æŠ›å‡ºæ£€æŸ¥å‹å¼‚å¸¸ï¼ˆchecked exceptionï¼‰ï¼Œå¹¶ä¸”æ²¡æœ‰åœ¨<code>@Transactional</code>æ³¨è§£ä¸Šé…ç½®<code>rollbackFor</code>å±æ€§ä¸º<code>Exception</code>ï¼Œé‚£ä¹ˆå¼‚å¸¸å‘ç”Ÿæ—¶äº‹åŠ¡å¯èƒ½ä¸ä¼šå›æ»šã€‚</li><li>å¦‚æœäº‹åŠ¡æ³¨è§£çš„æ–¹æ³•ä¸æ˜¯å…¬å¼€ï¼ˆpublicï¼‰ä¿®é¥°çš„ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´äº‹åŠ¡å¤±æ•ˆã€‚</li></ol><h2 id="Springçš„beançš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ"><a href="#Springçš„beançš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ" class="headerlink" title="Springçš„beançš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ"></a>Springçš„beançš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ</h2><p>Springä¸­beançš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>é€šè¿‡<code>BeanDefinition</code>è·å–beançš„å®šä¹‰ä¿¡æ¯ã€‚</li><li>è°ƒç”¨æ„é€ å‡½æ•°å®ä¾‹åŒ–beanã€‚</li><li>è¿›è¡Œbeançš„ä¾èµ–æ³¨å…¥ï¼Œä¾‹å¦‚é€šè¿‡setteræ–¹æ³•æˆ–<code>@Autowired</code>æ³¨è§£ã€‚</li><li>å¤„ç†å®ç°äº†<code>Aware</code>æ¥å£çš„beanã€‚</li><li>æ‰§è¡Œ<code>BeanPostProcessor</code>çš„å‰ç½®å¤„ç†å™¨ã€‚</li><li>è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•ï¼Œå¦‚å®ç°äº†<code>InitializingBean</code>æ¥å£æˆ–è‡ªå®šä¹‰çš„<code>init-method</code>ã€‚</li><li>æ‰§è¡Œ<code>BeanPostProcessor</code>çš„åç½®å¤„ç†å™¨ï¼Œå¯èƒ½åœ¨è¿™é‡Œäº§ç”Ÿä»£ç†å¯¹è±¡ã€‚</li><li>æœ€åæ˜¯é”€æ¯beanã€‚</li></ol><h3 id="Springä¸­çš„å¾ªç¯å¼•ç”¨ï¼Ÿ"><a href="#Springä¸­çš„å¾ªç¯å¼•ç”¨ï¼Ÿ" class="headerlink" title="Springä¸­çš„å¾ªç¯å¼•ç”¨ï¼Ÿ"></a>Springä¸­çš„å¾ªç¯å¼•ç”¨ï¼Ÿ</h3><p>å¾ªç¯ä¾èµ–å‘ç”Ÿåœ¨ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„beanäº’ç›¸æŒæœ‰å¯¹æ–¹ï¼Œå½¢æˆé—­ç¯ã€‚</p><p>Springæ¡†æ¶å…è®¸å¾ªç¯ä¾èµ–å­˜åœ¨ï¼Œå¹¶é€šè¿‡ä¸‰çº§ç¼“å­˜è§£å†³å¤§éƒ¨åˆ†å¾ªç¯ä¾èµ–é—®é¢˜ï¼š</p><ol><li>ä¸€çº§ç¼“å­˜ï¼šå•ä¾‹æ± ï¼Œç¼“å­˜å·²å®Œæˆåˆå§‹åŒ–çš„beanå¯¹è±¡ã€‚</li><li>äºŒçº§ç¼“å­˜ï¼šç¼“å­˜å°šæœªå®Œæˆç”Ÿå‘½å‘¨æœŸçš„æ—©æœŸbeanå¯¹è±¡ã€‚</li><li>ä¸‰çº§ç¼“å­˜ï¼šç¼“å­˜<code>ObjectFactory</code>ï¼Œç”¨äºåˆ›å»ºbeanå¯¹è±¡ã€‚</li></ol><h4 id="é‚£å…·ä½“è§£å†³æµç¨‹æ¸…æ¥šå—ï¼Ÿ"><a href="#é‚£å…·ä½“è§£å†³æµç¨‹æ¸…æ¥šå—ï¼Ÿ" class="headerlink" title="é‚£å…·ä½“è§£å†³æµç¨‹æ¸…æ¥šå—ï¼Ÿ"></a>é‚£å…·ä½“è§£å†³æµç¨‹æ¸…æ¥šå—ï¼Ÿ</h4><ol><li>å®ä¾‹åŒ–Aå¯¹è±¡ï¼Œå¹¶åˆ›å»º<code>ObjectFactory</code>å­˜å…¥ä¸‰çº§ç¼“å­˜ã€‚</li><li>Aåœ¨åˆå§‹åŒ–æ—¶éœ€è¦Bå¯¹è±¡ï¼Œå¼€å§‹Bçš„åˆ›å»ºé€»è¾‘ã€‚</li><li>Bå®ä¾‹åŒ–å®Œæˆï¼Œä¹Ÿåˆ›å»º<code>ObjectFactory</code>å­˜å…¥ä¸‰çº§ç¼“å­˜ã€‚</li><li>Béœ€è¦æ³¨å…¥Aï¼Œé€šè¿‡ä¸‰çº§ç¼“å­˜è·å–<code>ObjectFactory</code>ç”ŸæˆAå¯¹è±¡ï¼Œå­˜å…¥äºŒçº§ç¼“å­˜ã€‚</li><li>Bé€šè¿‡äºŒçº§ç¼“å­˜è·å¾—Aå¯¹è±¡åï¼ŒBåˆ›å»ºæˆåŠŸï¼Œå­˜å…¥ä¸€çº§ç¼“å­˜ã€‚</li><li>Aå¯¹è±¡åˆå§‹åŒ–æ—¶ï¼Œç”±äºBå·²åˆ›å»ºå®Œæˆï¼Œå¯ä»¥ç›´æ¥æ³¨å…¥Bï¼ŒAåˆ›å»ºæˆåŠŸå­˜å…¥ä¸€çº§ç¼“å­˜ã€‚</li><li>æ¸…é™¤äºŒçº§ç¼“å­˜ä¸­çš„ä¸´æ—¶å¯¹è±¡Aã€‚</li></ol><h2 id="æ„é€ æ–¹æ³•å‡ºç°äº†å¾ªç¯ä¾èµ–æ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#æ„é€ æ–¹æ³•å‡ºç°äº†å¾ªç¯ä¾èµ–æ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="æ„é€ æ–¹æ³•å‡ºç°äº†å¾ªç¯ä¾èµ–æ€ä¹ˆè§£å†³ï¼Ÿ"></a>æ„é€ æ–¹æ³•å‡ºç°äº†å¾ªç¯ä¾èµ–æ€ä¹ˆè§£å†³ï¼Ÿ</h2><p>ç”±äºæ„é€ å‡½æ•°æ˜¯beanç”Ÿå‘½å‘¨æœŸä¸­æœ€å…ˆæ‰§è¡Œçš„ï¼ŒSpringæ¡†æ¶æ— æ³•è§£å†³æ„é€ æ–¹æ³•çš„å¾ªç¯ä¾èµ–é—®é¢˜ã€‚</p><p>å¯ä»¥ä½¿ç”¨<code>@Lazy</code>æ‡’åŠ è½½æ³¨è§£ï¼Œå»¶è¿Ÿbeançš„åˆ›å»ºç›´åˆ°å®é™…éœ€è¦æ—¶ã€‚</p><h2 id="SpringMVCçš„æ‰§è¡Œæµç¨‹ï¼Ÿ"><a href="#SpringMVCçš„æ‰§è¡Œæµç¨‹ï¼Ÿ" class="headerlink" title="SpringMVCçš„æ‰§è¡Œæµç¨‹ï¼Ÿ"></a>SpringMVCçš„æ‰§è¡Œæµç¨‹ï¼Ÿ</h2><ol><li>ç”¨æˆ·å‘é€è¯·æ±‚åˆ°å‰ç«¯æ§åˆ¶å™¨<code>DispatcherServlet</code>ã€‚</li><li><code>Dispatcher``Servlet</code>è°ƒç”¨<code>HandlerMapping</code>æ‰¾åˆ°å…·ä½“å¤„ç†å™¨ã€‚</li><li><code>HandlerMapping</code>è¿”å›å¤„ç†å™¨å¯¹è±¡åŠæ‹¦æˆªå™¨ï¼ˆå¦‚æœæœ‰ï¼‰ç»™<code>DispatcherServlet</code>ã€‚</li><li><code>DispatcherServlet</code>è°ƒç”¨<code>HandlerAdapter</code>ã€‚</li><li><code>HandlerAdapter</code>é€‚é…å¹¶è°ƒç”¨å…·ä½“å¤„ç†å™¨ï¼ˆControllerï¼‰ã€‚</li><li>Controlleræ‰§è¡Œå¹¶è¿”å›<code>ModelAndView</code>å¯¹è±¡ã€‚</li><li><code>HandlerAdapter</code>å°†<code>ModelAndView</code>è¿”å›ç»™<code>DispatcherServlet</code>ã€‚</li><li><code>DispatcherServlet</code>ä¼ ç»™<code>ViewResolver</code>è¿›è¡Œè§†å›¾è§£æã€‚</li><li><code>ViewResolver</code>è¿”å›å…·ä½“è§†å›¾ç»™<code>DispatcherServlet</code>ã€‚</li><li><code>DispatcherServlet</code>æ¸²æŸ“è§†å›¾å¹¶å“åº”ç”¨æˆ·ã€‚</li></ol><h2 id="Springbootè‡ªåŠ¨é…ç½®åŸç†ï¼Ÿ"><a href="#Springbootè‡ªåŠ¨é…ç½®åŸç†ï¼Ÿ" class="headerlink" title="Springbootè‡ªåŠ¨é…ç½®åŸç†ï¼Ÿ"></a>Springbootè‡ªåŠ¨é…ç½®åŸç†ï¼Ÿ</h2><p>Spring Bootçš„è‡ªåŠ¨é…ç½®åŸç†åŸºäº<code>@SpringBootApplication</code>æ³¨è§£ï¼Œå®ƒå°è£…äº†<code>@SpringBootConfiguration</code>ã€<code>@EnableAutoConfiguration</code>å’Œ<code>@ComponentScan</code>ã€‚</p><p><code>@EnableAutoConfiguration</code>æ˜¯æ ¸å¿ƒï¼Œå®ƒé€šè¿‡<code>@Import</code>å¯¼å…¥é…ç½®é€‰æ‹©å™¨ï¼Œè¯»å–<code>META-INF/spring.factories</code>æ–‡ä»¶ä¸­çš„ç±»åï¼Œæ ¹æ®æ¡ä»¶æ³¨è§£å†³å®šæ˜¯å¦å°†é…ç½®ç±»ä¸­çš„Beanå¯¼å…¥åˆ°Springå®¹å™¨ä¸­ã€‚</p><h3 id="Spring-çš„å¸¸è§æ³¨è§£æœ‰å“ªäº›ï¼Ÿ"><a href="#Spring-çš„å¸¸è§æ³¨è§£æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Spring çš„å¸¸è§æ³¨è§£æœ‰å“ªäº›ï¼Ÿ"></a>Spring çš„å¸¸è§æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</h3><ol><li>å£°æ˜Beançš„æ³¨è§£ï¼š<code>@Component</code>ã€<code>@Service</code>ã€<code>@Repository</code>ã€<code>@Controller</code>ã€‚</li><li>ä¾èµ–æ³¨å…¥ç›¸å…³æ³¨è§£ï¼š<code>@Autowired</code>ã€<code>@Qualifier</code>ã€<code>@Resource</code>ã€‚</li><li>è®¾ç½®ä½œç”¨åŸŸçš„æ³¨è§£ï¼š<code>@Scope</code>ã€‚</li><li>é…ç½®ç›¸å…³æ³¨è§£ï¼š<code>@Configuration</code>ã€<code>@ComponentScan</code>ã€<code>@Bean</code>ã€‚</li><li>AOPç›¸å…³æ³¨è§£ï¼š<code>@Aspect</code>ã€<code>@Before</code>ã€<code>@After</code>ã€<code>@Around</code>ã€<code>@Pointcut</code>ã€‚</li></ol><h3 id="SpringMVCå¸¸è§çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ"><a href="#SpringMVCå¸¸è§çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="SpringMVCå¸¸è§çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ"></a>SpringMVCå¸¸è§çš„æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</h3><ul><li><code>@RequestMapping</code>ï¼šæ˜ å°„è¯·æ±‚è·¯å¾„ã€‚</li><li><code>@RequestBody</code>ï¼šæ¥æ”¶HTTPè¯·æ±‚çš„JSONæ•°æ®ã€‚</li><li><code>@RequestParam</code>ï¼šæŒ‡å®šè¯·æ±‚å‚æ•°åç§°ã€‚</li><li><code>@PathVariable</code>ï¼šä»è¯·æ±‚è·¯å¾„ä¸­è·å–å‚æ•°ã€‚</li><li><code>@ResponseBody</code>ï¼šå°†Controlleræ–¹æ³•è¿”å›çš„å¯¹è±¡è½¬åŒ–ä¸ºJSONã€‚</li><li><code>@RequestHeader</code>ï¼šè·å–è¯·æ±‚å¤´æ•°æ®ã€‚</li><li><code>@PostMapping</code>ã€<code>@GetMapping</code>ç­‰ã€‚</li></ul><h3 id="Springbootå¸¸è§æ³¨è§£æœ‰å“ªäº›ï¼Ÿ"><a href="#Springbootå¸¸è§æ³¨è§£æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Springbootå¸¸è§æ³¨è§£æœ‰å“ªäº›ï¼Ÿ"></a>Springbootå¸¸è§æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</h3><p>Spring Bootçš„å¸¸è§æ³¨è§£åŒ…æ‹¬ï¼š</p><ul><li><code>@SpringBootApplication</code>ï¼šç”±<code>@``SpringBootConfiguration</code>ã€<code>@``EnableAutoConfiguration</code>å’Œ<code>@``ComponentScan</code>ç»„æˆã€‚</li><li>å…¶ä»–æ³¨è§£å¦‚<code>@RestController</code>ã€<code>@GetMapping</code>ã€<code>@PostMapping</code>ç­‰ï¼Œç”¨äºç®€åŒ–Spring MVCçš„é…ç½®ã€‚</li></ul><h2 id="MyBatisæ‰§è¡Œæµç¨‹ï¼Ÿ"><a href="#MyBatisæ‰§è¡Œæµç¨‹ï¼Ÿ" class="headerlink" title="MyBatisæ‰§è¡Œæµç¨‹ï¼Ÿ"></a>MyBatisæ‰§è¡Œæµç¨‹ï¼Ÿ</h2><ol><li>è¯»å–MyBatisé…ç½®æ–‡ä»¶<code>mybatis-config.xml</code>ã€‚</li><li>æ„é€ ä¼šè¯å·¥å‚<code>SqlSessionFactory</code>ã€‚</li><li>ä¼šè¯å·¥å‚åˆ›å»º<code>SqlSession</code>å¯¹è±¡ã€‚</li><li>æ“ä½œæ•°æ®åº“çš„æ¥å£ï¼Œ<code>Executor</code>æ‰§è¡Œå™¨ã€‚</li><li><code>Executor</code>æ‰§è¡Œæ–¹æ³•ä¸­çš„<code>MappedStatement</code>å‚æ•°ã€‚</li><li>è¾“å…¥å‚æ•°æ˜ å°„ã€‚</li><li>è¾“å‡ºç»“æœæ˜ å°„ã€‚</li></ol><h3 id="Mybatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿ"><a href="#Mybatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿ" class="headerlink" title="Mybatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿ"></a>Mybatisæ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿ</h3><p>MyBatisæ”¯æŒå»¶è¿ŸåŠ è½½ï¼Œå³åœ¨éœ€è¦ç”¨åˆ°æ•°æ®æ—¶æ‰åŠ è½½ã€‚</p><p>å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ä¸­çš„<code>lazyLoadingEnabled</code>é…ç½®å¯ç”¨æˆ–ç¦ç”¨å»¶è¿ŸåŠ è½½ã€‚</p><h3 id="å»¶è¿ŸåŠ è½½çš„åº•å±‚åŸç†çŸ¥é“å—ï¼Ÿ"><a href="#å»¶è¿ŸåŠ è½½çš„åº•å±‚åŸç†çŸ¥é“å—ï¼Ÿ" class="headerlink" title="å»¶è¿ŸåŠ è½½çš„åº•å±‚åŸç†çŸ¥é“å—ï¼Ÿ"></a>å»¶è¿ŸåŠ è½½çš„åº•å±‚åŸç†çŸ¥é“å—ï¼Ÿ</h3><p>å»¶è¿ŸåŠ è½½çš„åº•å±‚åŸç†ä¸»è¦ä½¿ç”¨CGLIBåŠ¨æ€ä»£ç†å®ç°ï¼š</p><ol><li>ä½¿ç”¨CGLIBåˆ›å»ºç›®æ ‡å¯¹è±¡çš„ä»£ç†å¯¹è±¡ã€‚</li><li>è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ï¼Œå¦‚æœå‘ç°æ˜¯nullå€¼ï¼Œåˆ™æ‰§è¡ŒSQLæŸ¥è¯¢ã€‚</li><li>è·å–æ•°æ®åï¼Œè®¾ç½®å±æ€§å€¼å¹¶ç»§ç»­æŸ¥è¯¢ç›®æ ‡æ–¹æ³•ã€‚</li></ol><h3 id="Mybatisçš„ä¸€çº§ã€äºŒçº§ç¼“å­˜ç”¨è¿‡å—ï¼Ÿ"><a href="#Mybatisçš„ä¸€çº§ã€äºŒçº§ç¼“å­˜ç”¨è¿‡å—ï¼Ÿ" class="headerlink" title="Mybatisçš„ä¸€çº§ã€äºŒçº§ç¼“å­˜ç”¨è¿‡å—ï¼Ÿ"></a>Mybatisçš„ä¸€çº§ã€äºŒçº§ç¼“å­˜ç”¨è¿‡å—ï¼Ÿ</h3><p>MyBatisçš„ä¸€çº§ç¼“å­˜æ˜¯åŸºäº<code>Perpetual</code> <code>Cache</code>çš„HashMapæœ¬åœ°ç¼“å­˜ï¼Œä½œç”¨åŸŸä¸ºSessionï¼Œé»˜è®¤å¼€å¯ã€‚</p><p>äºŒçº§ç¼“å­˜éœ€è¦å•ç‹¬å¼€å¯ï¼Œä½œç”¨åŸŸä¸ºNamespaceæˆ–mapperï¼Œé»˜è®¤ä¹Ÿæ˜¯é‡‡ç”¨<code>PerpetualCache</code>ï¼ŒHashMapå­˜å‚¨ã€‚</p><h3 id="Mybatisçš„äºŒçº§ç¼“å­˜ä»€ä¹ˆæ—¶å€™ä¼šæ¸…ç†ç¼“å­˜ä¸­çš„æ•°æ®ï¼Ÿ"><a href="#Mybatisçš„äºŒçº§ç¼“å­˜ä»€ä¹ˆæ—¶å€™ä¼šæ¸…ç†ç¼“å­˜ä¸­çš„æ•°æ®ï¼Ÿ" class="headerlink" title="Mybatisçš„äºŒçº§ç¼“å­˜ä»€ä¹ˆæ—¶å€™ä¼šæ¸…ç†ç¼“å­˜ä¸­çš„æ•°æ®ï¼Ÿ"></a>Mybatisçš„äºŒçº§ç¼“å­˜ä»€ä¹ˆæ—¶å€™ä¼šæ¸…ç†ç¼“å­˜ä¸­çš„æ•°æ®ï¼Ÿ</h3><p>å½“ä½œç”¨åŸŸï¼ˆä¸€çº§ç¼“å­˜Session/äºŒçº§ç¼“å­˜Namespacesï¼‰è¿›è¡Œäº†æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤æ“ä½œåï¼Œé»˜è®¤è¯¥ä½œç”¨åŸŸä¸‹æ‰€æœ‰selectä¸­çš„ç¼“å­˜å°†è¢«æ¸…ç©ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AOP </tag>
            
            <tag> MVC </tag>
            
            <tag> mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢è¯•å…«è‚¡</title>
      <link href="/2025/07/18/shu-ju-ku-mian-shi/"/>
      <url>/2025/07/18/shu-ju-ku-mian-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®åº“ç›¸å…³çš„é¢è¯•å…«è‚¡é¢˜ç›®"><a href="#æ•°æ®åº“ç›¸å…³çš„é¢è¯•å…«è‚¡é¢˜ç›®" class="headerlink" title="æ•°æ®åº“ç›¸å…³çš„é¢è¯•å…«è‚¡é¢˜ç›®"></a>æ•°æ®åº“ç›¸å…³çš„é¢è¯•å…«è‚¡é¢˜ç›®</h1><h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><h3 id="ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ</h3><p><strong>å€™é€‰äºº</strong>ï¼šç¼“å­˜ç©¿é€æ˜¯æŒ‡æŸ¥è¯¢ä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ï¼Œ</p><p>ç”±äºå­˜å‚¨å±‚æŸ¥ä¸åˆ°æ•°æ®å› æ­¤ä¸å†™å…¥ç¼“å­˜ï¼Œè¿™å°†å¯¼è‡´è¿™ä¸ªä¸å­˜åœ¨çš„æ•°æ®æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ° DB å»æŸ¥è¯¢ï¼Œ</p><p>å¯èƒ½å¯¼è‡´ DB æŒ‚æ‰ã€‚è¿™ç§æƒ…å†µå¤§æ¦‚ç‡æ˜¯é­åˆ°äº†æ”»å‡»ã€‚è§£å†³æ–¹æ¡ˆçš„è¯ï¼Œæˆ‘ä»¬é€šå¸¸éƒ½ä¼šç”¨å¸ƒéš†è¿‡æ»¤å™¨æ¥è§£å†³å®ƒã€‚</p><h3 id="ä»‹ç»ä¸‹å¸ƒéš†è¿‡æ»¤å™¨"><a href="#ä»‹ç»ä¸‹å¸ƒéš†è¿‡æ»¤å™¨" class="headerlink" title="ä»‹ç»ä¸‹å¸ƒéš†è¿‡æ»¤å™¨"></a>ä»‹ç»ä¸‹å¸ƒéš†è¿‡æ»¤å™¨</h3><p>å¸ƒéš†è¿‡æ»¤å™¨ä¸»è¦ç”¨äºæ£€ç´¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºä¸€ä¸ª<strong>é›†åˆ</strong>ä¸­ï¼Œæˆ‘ä»¬å½“æ—¶æ˜¯ä½¿ç”¨<strong>redisson</strong>å®ç°çš„ï¼Œå®ƒçš„åº•å±‚åŸç†æ˜¯ï¼Œ</p><p><strong>å…ˆåˆå§‹åŒ–ä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ•°ç»„</strong>ï¼Œé‡Œé¢å­˜æ”¾çš„æ˜¯äºŒè¿›åˆ¶0æˆ–1ã€‚ä¸€å¼€å§‹éƒ½æ˜¯0ï¼Œå½“ä¸€ä¸ªkeyæ¥äº†ä¹‹åï¼Œ<strong>ç»è¿‡3æ¬¡hashè®¡ç®—</strong>ï¼Œ<strong>æ¨¡æ•°ç»„é•¿åº¦æ‰¾åˆ°æ•°æ®çš„ä¸‹æ ‡</strong>ï¼Œç„¶åæŠŠæ•°ç»„ä¸­åŸæ¥çš„0æ”¹ä¸º1ã€‚</p><p>è¿™æ ·ï¼Œ<strong>ä¸‰ä¸ªæ•°ç»„çš„ä½ç½®å°±èƒ½æ ‡æ˜ä¸€ä¸ªkeyçš„å­˜åœ¨</strong>ã€‚æŸ¥æ‰¾çš„è¿‡ç¨‹ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p><p>å½“ç„¶ï¼Œå¸ƒéš†è¿‡æ»¤å™¨æœ‰å¯èƒ½ä¼šäº§ç”Ÿä¸€å®šçš„è¯¯åˆ¤ï¼Œæˆ‘ä»¬ä¸€èˆ¬å¯ä»¥è®¾ç½®è¿™ä¸ªè¯¯åˆ¤ç‡ï¼Œå¤§æ¦‚ä¸ä¼šè¶…è¿‡5%ã€‚å…¶å®è¿™ä¸ªè¯¯åˆ¤æ˜¯å¿…ç„¶å­˜åœ¨çš„ï¼Œè¦ä¸å°±å¾—å¢åŠ æ•°ç»„çš„é•¿åº¦ã€‚5%ä»¥å†…çš„è¯¯åˆ¤ç‡ä¸€èˆ¬çš„é¡¹ç›®ä¹Ÿèƒ½æ¥å—ï¼Œä¸è‡³äºé«˜å¹¶å‘ä¸‹å‹å€’æ•°æ®åº“ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç¼“å­˜å‡»ç©¿ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ</h3><p>ç¼“å­˜å‡»ç©¿çš„æ„æ€æ˜¯ï¼Œå¯¹äº<strong>è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„key</strong>ï¼Œ<strong>ç¼“å­˜åœ¨æŸä¸ªæ—¶é—´ç‚¹è¿‡æœŸçš„æ—¶å€™ï¼Œæ°å¥½è¿™ä¸ªæ—¶é—´ç‚¹å¯¹è¿™ä¸ªKeyæœ‰å¤§é‡çš„å¹¶å‘è¯·æ±‚è¿‡æ¥</strong>ã€‚</p><p><strong>è¿™äº›è¯·æ±‚å‘ç°ç¼“å­˜è¿‡æœŸï¼Œä¸€èˆ¬éƒ½ä¼šä»åç«¯ DB åŠ è½½æ•°æ®å¹¶å›è®¾åˆ°ç¼“å­˜ï¼Œè¿™ä¸ªæ—¶å€™å¤§å¹¶å‘çš„è¯·æ±‚å¯èƒ½ä¼šç¬é—´æŠŠ DB å‹å®ã€‚</strong></p><p>è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><p>ç¬¬ä¸€ï¼Œå¯ä»¥<strong>ä½¿ç”¨äº’æ–¥é”</strong>ï¼šå½“ç¼“å­˜å¤±æ•ˆæ—¶ï¼Œä¸ç«‹å³å»load dbï¼Œå…ˆä½¿ç”¨å¦‚ Redis çš„ <code>SETNX</code> å»è®¾ç½®ä¸€ä¸ªäº’æ–¥é”ã€‚</p><p>å½“æ“ä½œæˆåŠŸè¿”å›æ—¶ï¼Œå†è¿›è¡Œ load dbçš„æ“ä½œå¹¶å›è®¾ç¼“å­˜ï¼Œ</p><p>å¦åˆ™é‡è¯•getç¼“å­˜çš„æ–¹æ³•ã€‚</p><p>ç¬¬äºŒç§æ–¹æ¡ˆæ˜¯è®¾ç½®å½“å‰<strong>keyé€»è¾‘è¿‡æœŸ</strong>ï¼Œå¤§æ¦‚æ€è·¯å¦‚ä¸‹ï¼š</p><ol><li><p>åœ¨è®¾ç½®keyçš„æ—¶å€™ï¼Œ<strong>è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´å­—æ®µä¸€å—å­˜å…¥ç¼“å­˜ä¸­</strong>ï¼Œ<strong>ä¸ç»™å½“å‰keyè®¾ç½®è¿‡æœŸæ—¶é—´</strong>ï¼›</p></li><li><p>å½“æŸ¥è¯¢çš„æ—¶å€™ï¼Œä»rediså–å‡ºæ•°æ®å<strong>åˆ¤æ–­æ—¶é—´æ˜¯å¦è¿‡æœŸ</strong>ï¼›</p></li><li><p>å¦‚æœè¿‡æœŸï¼Œ<strong>åˆ™å¼€é€šå¦å¤–ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œå½“å‰çº¿ç¨‹æ­£å¸¸è¿”å›æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ã€‚</strong></p></li></ol><p>å½“ç„¶ï¼Œä¸¤ç§æ–¹æ¡ˆå„æœ‰åˆ©å¼Šï¼šå¦‚æœé€‰æ‹©æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œå»ºè®®ä½¿ç”¨åˆ†å¸ƒå¼é”çš„æ–¹æ¡ˆï¼Œä½†æ€§èƒ½ä¸Šå¯èƒ½æ²¡é‚£ä¹ˆé«˜ï¼Œä¸”æœ‰å¯èƒ½äº§ç”Ÿæ­»é”çš„é—®é¢˜ã€‚å¦‚æœé€‰æ‹©keyçš„é€»è¾‘åˆ é™¤ï¼Œåˆ™ä¼˜å…ˆè€ƒè™‘é«˜å¯ç”¨æ€§ï¼Œæ€§èƒ½æ¯”è¾ƒé«˜ï¼Œä½†æ•°æ®åŒæ­¥è¿™å—åšä¸åˆ°å¼ºä¸€è‡´ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ</h3><p>ç¼“å­˜é›ªå´©æ„æ€æ˜¯ï¼Œè®¾ç½®<strong>ç¼“å­˜æ—¶é‡‡ç”¨äº†ç›¸åŒçš„è¿‡æœŸæ—¶é—´</strong>ï¼Œå¯¼è‡´ç¼“å­˜åœ¨<strong>æŸä¸€æ—¶åˆ»åŒæ—¶å¤±æ•ˆ</strong>ï¼Œè¯·æ±‚å…¨éƒ¨è½¬å‘åˆ°DBï¼ŒDBç¬æ—¶å‹åŠ›è¿‡é‡è€Œé›ªå´©ã€‚</p><p>ä¸ç¼“å­˜å‡»ç©¿çš„åŒºåˆ«æ˜¯ï¼š<strong>é›ªå´©æ˜¯å¾ˆå¤škeyï¼Œè€Œå‡»ç©¿æ˜¯æŸä¸€ä¸ªkeyç¼“å­˜</strong>ã€‚</p><p>è§£å†³æ–¹æ¡ˆä¸»è¦æ˜¯ï¼Œå¯ä»¥å°†ç¼“å­˜å¤±æ•ˆæ—¶é—´åˆ†æ•£å¼€ã€‚æ¯”å¦‚ï¼Œå¯ä»¥åœ¨åŸæœ‰çš„<strong>å¤±æ•ˆæ—¶é—´åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªéšæœºå€¼</strong>ï¼Œæ¯”å¦‚1-5åˆ†é’Ÿéšæœºã€‚è¿™æ ·ï¼Œæ¯ä¸€ä¸ªç¼“å­˜çš„è¿‡æœŸæ—¶é—´çš„é‡å¤ç‡å°±ä¼šé™ä½ï¼Œå°±å¾ˆéš¾å¼•å‘é›†ä½“å¤±æ•ˆçš„äº‹ä»¶ã€‚</p><h3 id="redisåšä¸ºç¼“å­˜ï¼Œmysqlçš„æ•°æ®å¦‚ä½•ä¸redisè¿›è¡ŒåŒæ­¥å‘¢ï¼Ÿï¼ˆåŒå†™ä¸€è‡´æ€§ï¼‰"><a href="#redisåšä¸ºç¼“å­˜ï¼Œmysqlçš„æ•°æ®å¦‚ä½•ä¸redisè¿›è¡ŒåŒæ­¥å‘¢ï¼Ÿï¼ˆåŒå†™ä¸€è‡´æ€§ï¼‰" class="headerlink" title="redisåšä¸ºç¼“å­˜ï¼Œmysqlçš„æ•°æ®å¦‚ä½•ä¸redisè¿›è¡ŒåŒæ­¥å‘¢ï¼Ÿï¼ˆåŒå†™ä¸€è‡´æ€§ï¼‰"></a>redisåšä¸ºç¼“å­˜ï¼Œmysqlçš„æ•°æ®å¦‚ä½•ä¸redisè¿›è¡ŒåŒæ­¥å‘¢ï¼Ÿï¼ˆåŒå†™ä¸€è‡´æ€§ï¼‰</h3><p>å—¯ï¼å°±è¯´æˆ‘æœ€è¿‘åšçš„è¿™ä¸ªé¡¹ç›®ï¼Œé‡Œé¢æœ‰xxxxï¼ˆæ ¹æ®è‡ªå·±çš„ç®€å†ä¸Šå†™ï¼‰çš„åŠŸèƒ½ï¼Œéœ€è¦è®©æ•°æ®åº“ä¸redisé«˜åº¦ä¿æŒä¸€è‡´ï¼Œ<strong>å› ä¸ºè¦æ±‚æ—¶æ•ˆæ€§æ¯”è¾ƒé«˜</strong>ã€‚æˆ‘ä»¬å½“æ—¶é‡‡ç”¨çš„<strong>è¯»å†™é”ä¿è¯çš„å¼ºä¸€è‡´æ€§</strong>ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯<strong>Redisson</strong>å®ç°çš„è¯»å†™é”ã€‚</p><p>åœ¨<strong>è¯»çš„æ—¶å€™</strong>æ·»åŠ <strong>å…±äº«é”</strong>ï¼Œå¯ä»¥ä¿è¯<strong>è¯»è¯»ä¸äº’æ–¥ã€è¯»å†™äº’æ–¥</strong>ã€‚</p><p>å½“æˆ‘ä»¬<strong>æ›´æ–°æ•°æ®</strong>çš„æ—¶å€™ï¼Œæ·»åŠ <strong>æ’ä»–é”</strong>ã€‚å®ƒæ˜¯<strong>è¯»å†™ã€è¯»è¯»éƒ½äº’æ–¥</strong>ï¼Œè¿™æ ·å°±èƒ½ä¿è¯åœ¨å†™æ•°æ®çš„åŒæ—¶ï¼Œæ˜¯ä¸ä¼šè®©å…¶ä»–çº¿ç¨‹è¯»æ•°æ®çš„ï¼Œé¿å…äº†è„æ•°æ®ã€‚</p><p>è¿™é‡Œé¢éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>è¯»æ–¹æ³•å’Œå†™æ–¹æ³•ä¸Šéœ€è¦ä½¿ç”¨åŒä¸€æŠŠé”æ‰è¡Œã€‚</strong></p><h3 id="redisåšä¸ºç¼“å­˜ï¼Œmysqlçš„æ•°æ®å¦‚ä½•ä¸redisè¿›è¡ŒåŒæ­¥å‘¢ï¼Ÿï¼ˆåŒå†™ä¸€è‡´æ€§ï¼‰-1"><a href="#redisåšä¸ºç¼“å­˜ï¼Œmysqlçš„æ•°æ®å¦‚ä½•ä¸redisè¿›è¡ŒåŒæ­¥å‘¢ï¼Ÿï¼ˆåŒå†™ä¸€è‡´æ€§ï¼‰-1" class="headerlink" title="redisåšä¸ºç¼“å­˜ï¼Œmysqlçš„æ•°æ®å¦‚ä½•ä¸redisè¿›è¡ŒåŒæ­¥å‘¢ï¼Ÿï¼ˆåŒå†™ä¸€è‡´æ€§ï¼‰"></a>redisåšä¸ºç¼“å­˜ï¼Œmysqlçš„æ•°æ®å¦‚ä½•ä¸redisè¿›è¡ŒåŒæ­¥å‘¢ï¼Ÿï¼ˆåŒå†™ä¸€è‡´æ€§ï¼‰</h3><p>å°±è¯´æˆ‘æœ€è¿‘åšçš„è¿™ä¸ªé¡¹ç›®ï¼Œé‡Œé¢æœ‰xxxxï¼ˆæ ¹æ®è‡ªå·±çš„ç®€å†ä¸Šå†™ï¼‰çš„åŠŸèƒ½ã€‚æ•°æ®åŒæ­¥å¯ä»¥æœ‰ä¸€å®šçš„å»¶æ—¶ï¼ˆè¿™ç¬¦åˆå¤§éƒ¨åˆ†ä¸šåŠ¡éœ€æ±‚ï¼‰ã€‚</p><p>æˆ‘ä»¬å½“æ—¶é‡‡ç”¨çš„<strong>é˜¿é‡Œçš„Canalç»„ä»¶</strong>å®ç°æ•°æ®åŒæ­¥ï¼š</p><p><strong>ä¸éœ€è¦æ›´æ”¹ä¸šåŠ¡ä»£ç ï¼Œåªéœ€éƒ¨ç½²ä¸€ä¸ªCanalæœåŠ¡</strong>ã€‚CanalæœåŠ¡æŠŠè‡ªå·±ä¼ªè£…æˆmysqlçš„ä¸€ä¸ªä»èŠ‚ç‚¹ã€‚å½“mysqlæ•°æ®æ›´æ–°ä»¥åï¼ŒCanalä¼šè¯»å–binlogæ•°æ®ï¼Œç„¶åå†é€šè¿‡Canalçš„å®¢æˆ·ç«¯è·å–åˆ°æ•°æ®ï¼Œå¹¶æ›´æ–°ç¼“å­˜å³å¯ã€‚</p><h3 id="é‚£è¿™ä¸ªæ’ä»–é”æ˜¯å¦‚ä½•ä¿è¯è¯»å†™ã€è¯»è¯»äº’æ–¥çš„å‘¢ï¼Ÿ"><a href="#é‚£è¿™ä¸ªæ’ä»–é”æ˜¯å¦‚ä½•ä¿è¯è¯»å†™ã€è¯»è¯»äº’æ–¥çš„å‘¢ï¼Ÿ" class="headerlink" title="é‚£è¿™ä¸ªæ’ä»–é”æ˜¯å¦‚ä½•ä¿è¯è¯»å†™ã€è¯»è¯»äº’æ–¥çš„å‘¢ï¼Ÿ"></a>é‚£è¿™ä¸ªæ’ä»–é”æ˜¯å¦‚ä½•ä¿è¯è¯»å†™ã€è¯»è¯»äº’æ–¥çš„å‘¢ï¼Ÿ</h3><p>å…¶å®æ’ä»–é”åº•å±‚ä½¿ç”¨çš„ä¹Ÿæ˜¯<code>SETNX</code>ï¼Œå®ƒä¿è¯äº†<strong>åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹</strong>ï¼Œ<strong>æ“ä½œé”ä½çš„æ–¹æ³•</strong>ã€‚</p><h3 id="ä½ å¬è¯´è¿‡å»¶æ—¶åŒåˆ å—ï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨å®ƒå‘¢ï¼Ÿ"><a href="#ä½ å¬è¯´è¿‡å»¶æ—¶åŒåˆ å—ï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨å®ƒå‘¢ï¼Ÿ" class="headerlink" title="ä½ å¬è¯´è¿‡å»¶æ—¶åŒåˆ å—ï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨å®ƒå‘¢ï¼Ÿ"></a>ä½ å¬è¯´è¿‡<strong>å»¶æ—¶åŒåˆ </strong>å—ï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨å®ƒå‘¢ï¼Ÿ</h3><p>å»¶è¿ŸåŒåˆ ï¼Œå¦‚æœæ˜¯å†™æ“ä½œï¼Œæˆ‘ä»¬å…ˆæŠŠ<strong>ç¼“å­˜</strong>ä¸­çš„æ•°æ®åˆ é™¤ï¼Œç„¶å<strong>æ›´æ–°æ•°æ®åº“</strong>ï¼Œæœ€åå†<strong>å»¶æ—¶åˆ é™¤ç¼“</strong>å­˜ä¸­çš„æ•°æ®ã€‚</p><p>å…¶ä¸­ï¼Œè¿™ä¸ªå»¶æ—¶å¤šä¹…ä¸å¤ªå¥½ç¡®å®šã€‚åœ¨å»¶æ—¶çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°è„æ•°æ®ï¼Œå¹¶ä¸èƒ½ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œæ‰€ä»¥æ²¡æœ‰é‡‡ç”¨å®ƒã€‚</p><h3 id="redisåšä¸ºç¼“å­˜ï¼Œæ•°æ®çš„æŒä¹…åŒ–æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ"><a href="#redisåšä¸ºç¼“å­˜ï¼Œæ•°æ®çš„æŒä¹…åŒ–æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ" class="headerlink" title="redisåšä¸ºç¼“å­˜ï¼Œæ•°æ®çš„æŒä¹…åŒ–æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ"></a>redisåšä¸ºç¼“å­˜ï¼Œ<strong>æ•°æ®çš„æŒä¹…åŒ–</strong>æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ</h3><p>åœ¨Redisä¸­æä¾›äº†ä¸¤ç§æ•°æ®æŒä¹…åŒ–çš„æ–¹å¼ï¼š</p><ol><li><p>RDBï¼›</p></li><li><p>AOFã€‚</p></li></ol><h3 id="è¿™ä¸¤ç§æŒä¹…åŒ–æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ"><a href="#è¿™ä¸¤ç§æŒä¹…åŒ–æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ" class="headerlink" title="è¿™ä¸¤ç§æŒä¹…åŒ–æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ"></a>è¿™ä¸¤ç§æŒä¹…åŒ–æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</h3><p>RDBæ˜¯ä¸€ä¸ª<strong>å¿«ç…§æ–‡ä»¶</strong>ã€‚å®ƒæ˜¯æŠŠrediså†…å­˜å­˜å‚¨çš„æ•°æ®å†™åˆ°ç£ç›˜ä¸Šã€‚å½“rediså®ä¾‹å®•æœºæ¢å¤æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥ä»RDBçš„å¿«ç…§æ–‡ä»¶ä¸­æ¢å¤æ•°æ®ã€‚</p><p>AOFçš„å«ä¹‰æ˜¯<strong>è¿½åŠ æ–‡ä»¶</strong>ã€‚å½“redis<strong>æ‰§è¡Œå†™å‘½ä»¤çš„æ—¶å€™</strong>ï¼Œéƒ½ä¼šå­˜å‚¨åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚å½“rediså®ä¾‹å®•æœºæ¢å¤æ•°æ®çš„æ—¶å€™ï¼Œä¼šä»è¿™ä¸ªæ–‡ä»¶ä¸­å†æ¬¡æ‰§è¡Œä¸€éå‘½ä»¤æ¥æ¢å¤æ•°æ®ã€‚</p><h3 id="è¿™ä¸¤ç§æ–¹å¼ï¼Œå“ªç§æ¢å¤çš„æ¯”è¾ƒå¿«å‘¢ï¼Ÿ"><a href="#è¿™ä¸¤ç§æ–¹å¼ï¼Œå“ªç§æ¢å¤çš„æ¯”è¾ƒå¿«å‘¢ï¼Ÿ" class="headerlink" title="è¿™ä¸¤ç§æ–¹å¼ï¼Œå“ªç§æ¢å¤çš„æ¯”è¾ƒå¿«å‘¢ï¼Ÿ"></a>è¿™ä¸¤ç§æ–¹å¼ï¼Œå“ªç§æ¢å¤çš„æ¯”è¾ƒå¿«å‘¢ï¼Ÿ</h3><p>RDBå› ä¸ºæ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¿å­˜æ—¶ä½“ç§¯ä¹Ÿæ¯”è¾ƒå°ï¼Œæ‰€ä»¥å®ƒæ¢å¤å¾—æ¯”è¾ƒå¿«ã€‚ä½†å®ƒæœ‰å¯èƒ½ä¼šä¸¢æ•°æ®ã€‚</p><p>æˆ‘ä»¬é€šå¸¸åœ¨é¡¹ç›®ä¸­ä¹Ÿä¼šä½¿ç”¨AOFæ¥æ¢å¤æ•°æ®ã€‚è™½ç„¶AOFæ¢å¤çš„é€Ÿåº¦æ…¢ä¸€äº›ï¼Œä½†å®ƒä¸¢æ•°æ®çš„é£é™©è¦å°å¾ˆå¤šã€‚</p><p>åœ¨AOFæ–‡ä»¶ä¸­å¯ä»¥<strong>è®¾ç½®åˆ·ç›˜ç­–ç•¥ã€‚æˆ‘ä»¬å½“æ—¶è®¾ç½®çš„å°±æ˜¯æ¯ç§’æ‰¹é‡å†™å…¥ä¸€æ¬¡å‘½ä»¤ã€‚</strong></p><h3 id="Redisçš„æ•°æ®è¿‡æœŸç­–ç•¥æœ‰å“ªäº›ï¼Ÿ"><a href="#Redisçš„æ•°æ®è¿‡æœŸç­–ç•¥æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Redisçš„æ•°æ®è¿‡æœŸç­–ç•¥æœ‰å“ªäº›ï¼Ÿ"></a>Redisçš„æ•°æ®è¿‡æœŸç­–ç•¥æœ‰å“ªäº›ï¼Ÿ</h3><p>å—¯~ï¼Œåœ¨redisä¸­æä¾›äº†ä¸¤ç§æ•°æ®è¿‡æœŸåˆ é™¤ç­–ç•¥ã€‚</p><p>ç¬¬ä¸€ç§æ˜¯æƒ°æ€§åˆ é™¤ã€‚åœ¨è®¾ç½®è¯¥keyè¿‡æœŸæ—¶é—´åï¼Œæˆ‘ä»¬ä¸å»ç®¡å®ƒã€‚å½“éœ€è¦è¯¥keyæ—¶ï¼Œæˆ‘ä»¬æ£€æŸ¥å…¶æ˜¯å¦è¿‡æœŸã€‚å¦‚æœè¿‡æœŸï¼Œæˆ‘ä»¬å°±åˆ æ‰å®ƒï¼›åä¹‹ï¼Œè¿”å›è¯¥keyã€‚</p><p>ç¬¬äºŒç§æ˜¯å®šæœŸåˆ é™¤ã€‚å°±æ˜¯è¯´ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä»¬å°±å¯¹ä¸€äº›keyè¿›è¡Œæ£€æŸ¥ï¼Œå¹¶åˆ é™¤é‡Œé¢è¿‡æœŸçš„keyã€‚</p><p>å®šæœŸæ¸…ç†çš„ä¸¤ç§æ¨¡å¼æ˜¯ï¼š</p><ol><li><p>SLOWæ¨¡å¼ï¼Œæ˜¯å®šæ—¶ä»»åŠ¡ï¼Œæ‰§è¡Œé¢‘ç‡é»˜è®¤ä¸º10hzï¼Œæ¯æ¬¡ä¸è¶…è¿‡25msï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶redis.confçš„hzé€‰é¡¹æ¥è°ƒæ•´è¿™ä¸ªæ¬¡æ•°ï¼›</p></li><li><p>FASTæ¨¡å¼ï¼Œæ‰§è¡Œé¢‘ç‡ä¸å›ºå®šï¼Œæ¯æ¬¡äº‹ä»¶å¾ªç¯ä¼šå°è¯•æ‰§è¡Œï¼Œä½†ä¸¤æ¬¡é—´éš”ä¸ä½äº2msï¼Œæ¯æ¬¡è€—æ—¶ä¸è¶…è¿‡1msã€‚</p></li></ol><p>Redisçš„è¿‡æœŸåˆ é™¤ç­–ç•¥æ˜¯ï¼š<strong>æƒ°æ€§åˆ é™¤ + å®šæœŸåˆ é™¤ä¸¤ç§ç­–ç•¥é…åˆä½¿ç”¨ã€‚</strong></p><h3 id="Redisçš„æ•°æ®æ·˜æ±°ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ"><a href="#Redisçš„æ•°æ®æ·˜æ±°ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Redisçš„æ•°æ®æ·˜æ±°ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ"></a>Redisçš„æ•°æ®æ·˜æ±°ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ</h3><p>è¿™ä¸ªåœ¨redisä¸­æä¾›äº†å¾ˆå¤šç§ï¼Œé»˜è®¤æ˜¯<strong>noeviction</strong>ï¼Œä¸åˆ é™¤ä»»ä½•æ•°æ®ï¼Œå†…éƒ¨ä¸è¶³æ—¶ç›´æ¥æŠ¥é”™ã€‚è¿™ä¸ªå¯ä»¥åœ¨redisçš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œè®¾ç½®ã€‚</p><p>é‡Œé¢æœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼š<strong>ä¸€ä¸ªæ˜¯LRUï¼Œå¦å¤–ä¸€ä¸ªæ˜¯LFU</strong>ã€‚</p><p>LRUçš„æ„æ€å°±æ˜¯æœ€å°‘æœ€è¿‘ä½¿ç”¨ã€‚å®ƒä¼šç”¨<strong>å½“å‰æ—¶é—´å‡å»æœ€åä¸€æ¬¡è®¿é—®æ—¶é—´</strong>ã€‚è¿™ä¸ªå€¼è¶Šå¤§ï¼Œåˆ™æ·˜æ±°ä¼˜å…ˆçº§è¶Šé«˜ã€‚</p><p>LFUçš„æ„æ€æ˜¯æœ€å°‘é¢‘ç‡ä½¿ç”¨ã€‚å®ƒä¼š<strong>ç»Ÿè®¡æ¯ä¸ªkeyçš„è®¿é—®é¢‘ç‡</strong>ã€‚å€¼è¶Šå°ï¼Œæ·˜æ±°ä¼˜å…ˆçº§è¶Šé«˜ã€‚</p><p>æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­è®¾ç½®çš„æ˜¯allkeys-lruï¼Œå®ƒä¼šæŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®è¿›è¡Œæ·˜æ±°ï¼ŒæŠŠä¸€äº›ç»å¸¸è®¿é—®çš„keyç•™åœ¨redisä¸­ã€‚</p><h3 id="æ•°æ®åº“æœ‰1000ä¸‡æ•°æ®ï¼ŒRedisåªèƒ½ç¼“å­˜20wæ•°æ®ã€‚å¦‚ä½•ä¿è¯Redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®ï¼Ÿ"><a href="#æ•°æ®åº“æœ‰1000ä¸‡æ•°æ®ï¼ŒRedisåªèƒ½ç¼“å­˜20wæ•°æ®ã€‚å¦‚ä½•ä¿è¯Redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®ï¼Ÿ" class="headerlink" title="æ•°æ®åº“æœ‰1000ä¸‡æ•°æ®ï¼ŒRedisåªèƒ½ç¼“å­˜20wæ•°æ®ã€‚å¦‚ä½•ä¿è¯Redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®ï¼Ÿ"></a>æ•°æ®åº“æœ‰1000ä¸‡æ•°æ®ï¼ŒRedisåªèƒ½ç¼“å­˜20wæ•°æ®ã€‚å¦‚ä½•ä¿è¯Redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®ï¼Ÿ</h3><p>å¯ä»¥ä½¿ç”¨allkeys-lruï¼ˆæŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°ï¼‰æ·˜æ±°ç­–ç•¥ã€‚é‚£ç•™ä¸‹æ¥çš„éƒ½æ˜¯ç»å¸¸è®¿é—®çš„çƒ­ç‚¹æ•°æ®ã€‚</p><h3 id="Redisçš„å†…å­˜ç”¨å®Œäº†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"><a href="#Redisçš„å†…å­˜ç”¨å®Œäº†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ" class="headerlink" title="Redisçš„å†…å­˜ç”¨å®Œäº†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"></a>Redisçš„å†…å­˜ç”¨å®Œäº†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h3><p>è¿™ä¸ªè¦çœ‹redisçš„æ•°æ®<strong>æ·˜æ±°ç­–ç•¥æ˜¯ä»€ä¹ˆ</strong>ã€‚å¦‚æœæ˜¯é»˜è®¤çš„é…ç½®ï¼Œrediså†…å­˜ç”¨å®Œä»¥ååˆ™ç›´æ¥æŠ¥é”™ã€‚</p><p>æˆ‘ä»¬å½“æ—¶è®¾ç½®çš„æ˜¯allkeys-lruç­–ç•¥ï¼ŒæŠŠæœ€è¿‘æœ€å¸¸è®¿é—®çš„æ•°æ®ç•™åœ¨ç¼“å­˜ä¸­ã€‚</p><h3 id="Redisåˆ†å¸ƒå¼é”å¦‚ä½•å®ç°ï¼Ÿ"><a href="#Redisåˆ†å¸ƒå¼é”å¦‚ä½•å®ç°ï¼Ÿ" class="headerlink" title="Redisåˆ†å¸ƒå¼é”å¦‚ä½•å®ç°ï¼Ÿ"></a>Redisåˆ†å¸ƒå¼é”å¦‚ä½•å®ç°ï¼Ÿ</h3><p>å—¯ï¼Œåœ¨redisä¸­æä¾›äº†ä¸€ä¸ªå‘½ä»¤<code>SETNX</code>(SET if not exists)ã€‚</p><p>redisè®¾ç½®äº†ä¸€ä¸ªå‘½ä»¤ï¼Œsetnxï¼Œç”±äºredisæ˜¯å•çº¿ç¨‹çš„ï¼Œç”¨äº†è¿™ä¸ªå‘½ä»¤ä¹‹åï¼Œåªèƒ½æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯å¯¹æŸä¸ªkeyè®¾ç½®å€¼ï¼Œæ²¡æœ‰è¿‡æœŸæˆ–è€…åˆ é™¤ï¼Œå…¶ä»–å®¢æˆ·æ˜¯æ— æ³•è®¾ç½®è¿™ä¸ªkeyçš„ã€‚</p><h3 id="é‚£ä½ å¦‚ä½•æ§åˆ¶Rediså®ç°åˆ†å¸ƒå¼é”çš„æœ‰æ•ˆæ—¶é•¿å‘¢ï¼Ÿ"><a href="#é‚£ä½ å¦‚ä½•æ§åˆ¶Rediså®ç°åˆ†å¸ƒå¼é”çš„æœ‰æ•ˆæ—¶é•¿å‘¢ï¼Ÿ" class="headerlink" title="é‚£ä½ å¦‚ä½•æ§åˆ¶Rediså®ç°åˆ†å¸ƒå¼é”çš„æœ‰æ•ˆæ—¶é•¿å‘¢ï¼Ÿ"></a>é‚£ä½ å¦‚ä½•æ§åˆ¶Rediså®ç°åˆ†å¸ƒå¼é”çš„æœ‰æ•ˆæ—¶é•¿å‘¢ï¼Ÿ</h3><p>redisçš„<code>SETNX</code>æŒ‡ä»¤ä¸å¥½æ§åˆ¶è¿™ä¸ªé—®é¢˜ã€‚</p><p>æˆ‘ä»¬å½“æ—¶é‡‡ç”¨çš„æ˜¯redisçš„ä¸€ä¸ªæ¡†æ¶Redissonå®ç°çš„ã€‚</p><p>åœ¨Redissonä¸­éœ€è¦<strong>æ‰‹åŠ¨åŠ é”</strong>ï¼Œå¹¶ä¸”<strong>å¯ä»¥æ§åˆ¶é”çš„å¤±æ•ˆæ—¶é—´å’Œç­‰å¾…æ—¶é—´</strong>ã€‚</p><p>å½“é”ä½çš„ä¸€ä¸ªä¸šåŠ¡è¿˜æ²¡æœ‰æ‰§è¡Œå®Œæˆçš„æ—¶å€™ï¼ŒRedissonä¼šå¼•å…¥ä¸€ä¸ª<strong>çœ‹é—¨ç‹—æœºåˆ¶</strong>ã€‚å°±æ˜¯è¯´ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å°±æ£€æŸ¥å½“å‰ä¸šåŠ¡æ˜¯å¦è¿˜æŒæœ‰é”ã€‚å¦‚æœæŒæœ‰ï¼Œå°±å¢åŠ åŠ é”çš„æŒæœ‰æ—¶é—´ã€‚å½“ä¸šåŠ¡æ‰§è¡Œå®Œæˆä¹‹åï¼Œéœ€è¦ä½¿ç”¨é‡Šæ”¾é”å°±å¯ä»¥äº†ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œåœ¨é«˜å¹¶å‘ä¸‹ï¼Œä¸€ä¸ªä¸šåŠ¡æœ‰å¯èƒ½ä¼šæ‰§è¡Œå¾ˆå¿«ã€‚</p><p>å®¢æˆ·1æŒæœ‰é”çš„æ—¶å€™ï¼Œå®¢æˆ·2æ¥äº†ä»¥åå¹¶ä¸ä¼šé©¬ä¸Šè¢«æ‹’ç»ã€‚å®ƒä¼šè‡ªæ—‹ä¸æ–­å°è¯•è·å–é”ã€‚</p><p>å¦‚æœå®¢æˆ·1é‡Šæ”¾ä¹‹åï¼Œå®¢æˆ·2å°±å¯ä»¥é©¬ä¸ŠæŒæœ‰é”ï¼Œæ€§èƒ½ä¹Ÿå¾—åˆ°äº†æå‡ã€‚</p><h3 id="Redissonå®ç°çš„åˆ†å¸ƒå¼é”æ˜¯å¯é‡å…¥çš„å—ï¼Ÿ"><a href="#Redissonå®ç°çš„åˆ†å¸ƒå¼é”æ˜¯å¯é‡å…¥çš„å—ï¼Ÿ" class="headerlink" title="Redissonå®ç°çš„åˆ†å¸ƒå¼é”æ˜¯å¯é‡å…¥çš„å—ï¼Ÿ"></a>Redissonå®ç°çš„åˆ†å¸ƒå¼é”æ˜¯å¯é‡å…¥çš„å—ï¼Ÿ</h3><p>æ˜¯å¯ä»¥é‡å…¥çš„ã€‚</p><p>è¿™æ ·åšæ˜¯<strong>ä¸ºäº†é¿å…æ­»é”</strong>çš„äº§ç”Ÿã€‚</p><p>è¿™ä¸ªé‡å…¥å…¶å®åœ¨å†…éƒ¨å°±æ˜¯<strong>åˆ¤æ–­æ˜¯å¦æ˜¯å½“å‰çº¿ç¨‹æŒæœ‰çš„é”</strong>ï¼Œå¦‚æœæ˜¯å½“å‰çº¿ç¨‹æŒæœ‰çš„é”å°±ä¼šè®¡æ•°ï¼Œå¦‚æœé‡Šæ”¾é”å°±ä¼šåœ¨è®¡æ•°ä¸Šå‡ä¸€ã€‚</p><p>åœ¨å­˜å‚¨æ•°æ®çš„æ—¶å€™é‡‡ç”¨çš„hashç»“æ„ï¼Œå¤§keyå¯ä»¥æŒ‰ç…§è‡ªå·±çš„ä¸šåŠ¡è¿›è¡Œå®šåˆ¶ï¼Œå…¶ä¸­å°keyæ˜¯å½“å‰çº¿ç¨‹çš„å”¯ä¸€æ ‡è¯†ï¼Œvalueæ˜¯å½“å‰çº¿ç¨‹é‡å…¥çš„æ¬¡æ•°ã€‚</p><h3 id="Redissonå®ç°çš„åˆ†å¸ƒå¼é”èƒ½è§£å†³ä¸»ä»ä¸€è‡´æ€§çš„é—®é¢˜å—ï¼Ÿ"><a href="#Redissonå®ç°çš„åˆ†å¸ƒå¼é”èƒ½è§£å†³ä¸»ä»ä¸€è‡´æ€§çš„é—®é¢˜å—ï¼Ÿ" class="headerlink" title="Redissonå®ç°çš„åˆ†å¸ƒå¼é”èƒ½è§£å†³ä¸»ä»ä¸€è‡´æ€§çš„é—®é¢˜å—ï¼Ÿ"></a>Redissonå®ç°çš„åˆ†å¸ƒå¼é”èƒ½è§£å†³ä¸»ä»ä¸€è‡´æ€§çš„é—®é¢˜å—ï¼Ÿ</h3><p>è¿™ä¸ªæ˜¯<strong>ä¸èƒ½</strong>çš„ã€‚</p><p>æ¯”å¦‚ï¼Œå½“çº¿ç¨‹1åŠ é”æˆåŠŸåï¼ŒmasterèŠ‚ç‚¹æ•°æ®ä¼šå¼‚æ­¥å¤åˆ¶åˆ°slaveèŠ‚ç‚¹ï¼Œæ­¤æ—¶å¦‚æœå½“å‰æŒæœ‰Redisé”çš„masterèŠ‚ç‚¹å®•æœºï¼ŒslaveèŠ‚ç‚¹è¢«æå‡ä¸ºæ–°çš„masterèŠ‚ç‚¹ï¼Œ</p><p>å‡å¦‚ç°åœ¨æ¥äº†ä¸€ä¸ªçº¿ç¨‹2ï¼Œå†æ¬¡åŠ é”ï¼Œä¼šåœ¨æ–°çš„masterèŠ‚ç‚¹ä¸ŠåŠ é”æˆåŠŸï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå‡ºç°ä¸¤ä¸ªèŠ‚ç‚¹åŒæ—¶æŒæœ‰ä¸€æŠŠé”çš„é—®é¢˜ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<strong>Redissonæä¾›çš„çº¢é”</strong>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ï¼Œ</p><p>ä¸èƒ½åªåœ¨ä¸€ä¸ªRediså®ä¾‹ä¸Šåˆ›å»ºé”ï¼Œåº”è¯¥æ˜¯åœ¨å¤šä¸ªRediså®ä¾‹ä¸Šåˆ›å»ºé”ï¼Œå¹¶ä¸”è¦æ±‚åœ¨å¤§å¤šæ•°RedisèŠ‚ç‚¹ä¸Šéƒ½æˆåŠŸåˆ›å»ºé”ï¼Œçº¢é”ä¸­è¦æ±‚æ˜¯Redisçš„èŠ‚ç‚¹æ•°é‡è¦è¿‡åŠã€‚</p><p>è¿™æ ·å°±èƒ½é¿å…<strong>çº¿ç¨‹1åŠ é”æˆåŠŸåmasterèŠ‚ç‚¹å®•æœºï¼Œå¯¼è‡´çº¿ç¨‹2æˆåŠŸåŠ é”åˆ°æ–°çš„masterèŠ‚ç‚¹ä¸Š</strong>çš„é—®é¢˜äº†ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨äº†çº¢é”ï¼Œå› ä¸ºéœ€è¦åŒæ—¶åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šéƒ½æ·»åŠ é”ï¼Œæ€§èƒ½å°±å˜å¾—éå¸¸ä½ï¼Œå¹¶ä¸”è¿ç»´ç»´æŠ¤æˆæœ¬ä¹Ÿéå¸¸é«˜ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸€èˆ¬åœ¨é¡¹ç›®ä¸­ä¹Ÿä¸ä¼šç›´æ¥ä½¿ç”¨çº¢é”ï¼Œå¹¶ä¸”å®˜æ–¹ä¹Ÿæš‚æ—¶åºŸå¼ƒäº†è¿™ä¸ªçº¢é”ã€‚</p><h3 id="å¦‚æœä¸šåŠ¡éè¦ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œè¿™ä¸ªè¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ"><a href="#å¦‚æœä¸šåŠ¡éè¦ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œè¿™ä¸ªè¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ" class="headerlink" title="å¦‚æœä¸šåŠ¡éè¦ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œè¿™ä¸ªè¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ"></a><strong>å¦‚æœä¸šåŠ¡éè¦ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œè¿™ä¸ªè¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</strong></h3><p>Redisæœ¬èº«å°±æ˜¯æ”¯æŒé«˜å¯ç”¨çš„ï¼Œè¦åšåˆ°å¼ºä¸€è‡´æ€§ï¼Œå°±éå¸¸å½±å“æ€§èƒ½ï¼Œæ‰€ä»¥ï¼Œå¦‚æœæœ‰å¼ºä¸€è‡´æ€§è¦æ±‚é«˜çš„ä¸šåŠ¡ï¼Œ</p><p>å»ºè®®ä½¿ç”¨<strong>ZooKeeper</strong>å®ç°çš„åˆ†å¸ƒå¼é”ï¼Œå®ƒæ˜¯å¯ä»¥ä¿è¯å¼ºä¸€è‡´æ€§çš„ã€‚</p><h3 id="Redisé›†ç¾¤æœ‰å“ªäº›æ–¹æ¡ˆï¼ŒçŸ¥é“å—ï¼Ÿ"><a href="#Redisé›†ç¾¤æœ‰å“ªäº›æ–¹æ¡ˆï¼ŒçŸ¥é“å—ï¼Ÿ" class="headerlink" title="Redisé›†ç¾¤æœ‰å“ªäº›æ–¹æ¡ˆï¼ŒçŸ¥é“å—ï¼Ÿ"></a>Redisé›†ç¾¤æœ‰å“ªäº›æ–¹æ¡ˆï¼ŒçŸ¥é“å—ï¼Ÿ</h3><p>åœ¨Redisä¸­æä¾›çš„é›†ç¾¤æ–¹æ¡ˆæ€»å…±æœ‰ä¸‰ç§ï¼šä¸»ä»å¤åˆ¶ã€å“¨å…µæ¨¡å¼ã€Redisåˆ†ç‰‡é›†ç¾¤ã€‚</p><h3 id="é‚£ä½ æ¥ä»‹ç»ä¸€ä¸‹ä¸»ä»åŒæ­¥ã€‚"><a href="#é‚£ä½ æ¥ä»‹ç»ä¸€ä¸‹ä¸»ä»åŒæ­¥ã€‚" class="headerlink" title="é‚£ä½ æ¥ä»‹ç»ä¸€ä¸‹ä¸»ä»åŒæ­¥ã€‚"></a>é‚£ä½ æ¥ä»‹ç»ä¸€ä¸‹ä¸»ä»åŒæ­¥ã€‚</h3><p>å•èŠ‚ç‚¹Redisçš„å¹¶å‘èƒ½åŠ›æ˜¯æœ‰ä¸Šé™çš„ï¼Œè¦è¿›ä¸€æ­¥æé«˜Redisçš„å¹¶å‘èƒ½åŠ›ï¼Œå¯ä»¥æ­å»ºä¸»ä»é›†ç¾¤ï¼Œå®ç°è¯»å†™åˆ†ç¦»ã€‚</p><p>ä¸€èˆ¬éƒ½æ˜¯ä¸€ä¸»å¤šä»ï¼Œä¸»èŠ‚ç‚¹è´Ÿè´£å†™æ•°æ®ï¼Œä»èŠ‚ç‚¹è´Ÿè´£è¯»æ•°æ®ï¼Œä¸»èŠ‚ç‚¹å†™å…¥æ•°æ®ä¹‹åï¼Œéœ€è¦æŠŠæ•°æ®åŒæ­¥åˆ°ä»èŠ‚ç‚¹ä¸­ã€‚</p><h3 id="èƒ½è¯´ä¸€ä¸‹ï¼Œä¸»ä»åŒæ­¥æ•°æ®çš„æµç¨‹å—ï¼Ÿ"><a href="#èƒ½è¯´ä¸€ä¸‹ï¼Œä¸»ä»åŒæ­¥æ•°æ®çš„æµç¨‹å—ï¼Ÿ" class="headerlink" title="èƒ½è¯´ä¸€ä¸‹ï¼Œä¸»ä»åŒæ­¥æ•°æ®çš„æµç¨‹å—ï¼Ÿ"></a><strong>èƒ½è¯´ä¸€ä¸‹ï¼Œä¸»ä»åŒæ­¥æ•°æ®çš„æµç¨‹å—ï¼Ÿ</strong></h3><p>ä¸»ä»åŒæ­¥åˆ†ä¸ºäº†ä¸¤ä¸ªé˜¶æ®µï¼Œä¸€ä¸ªæ˜¯<strong>å…¨é‡åŒæ­¥</strong>ï¼Œä¸€ä¸ªæ˜¯<strong>å¢é‡åŒæ­¥</strong>ã€‚</p><p>å…¨é‡åŒæ­¥æ˜¯æŒ‡<strong>ä»èŠ‚ç‚¹ç¬¬ä¸€æ¬¡ä¸ä¸»èŠ‚ç‚¹å»ºç«‹è¿æ¥</strong>çš„æ—¶å€™ä½¿ç”¨å…¨é‡åŒæ­¥ï¼Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><p>ç¬¬ä¸€ï¼šä»èŠ‚ç‚¹è¯·æ±‚ä¸»èŠ‚ç‚¹åŒæ­¥æ•°æ®ï¼Œå…¶ä¸­<strong>ä»èŠ‚ç‚¹ä¼šæºå¸¦è‡ªå·±çš„replication idå’Œoffsetåç§»é‡ã€‚</strong></p><p>ç¬¬äºŒï¼šä¸»èŠ‚ç‚¹åˆ¤æ–­æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼Œä¸»è¦åˆ¤æ–­çš„ä¾æ®å°±æ˜¯ï¼Œä¸»èŠ‚ç‚¹ä¸ä»èŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€ä¸ªreplication idï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±è¯´æ˜æ˜¯ç¬¬ä¸€æ¬¡åŒæ­¥ï¼Œé‚£ä¸»èŠ‚ç‚¹å°±ä¼šæŠŠè‡ªå·±çš„replication idå’Œoffsetå‘é€ç»™ä»èŠ‚ç‚¹ï¼Œè®©ä»èŠ‚ç‚¹ä¸ä¸»èŠ‚ç‚¹çš„ä¿¡æ¯ä¿æŒä¸€è‡´ã€‚</p><p>ç¬¬ä¸‰ï¼šåœ¨åŒæ—¶ä¸»èŠ‚ç‚¹ä¼šæ‰§è¡Œ<code>BGSAVE</code>ï¼Œç”ŸæˆRDBæ–‡ä»¶åï¼Œå‘é€ç»™ä»èŠ‚ç‚¹å»æ‰§è¡Œï¼Œä»èŠ‚ç‚¹å…ˆæŠŠè‡ªå·±çš„æ•°æ®æ¸…ç©ºï¼Œç„¶åæ‰§è¡Œä¸»èŠ‚ç‚¹å‘é€è¿‡æ¥çš„RDBæ–‡ä»¶ï¼Œè¿™æ ·å°±ä¿æŒäº†ä¸€è‡´ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœåœ¨RDBç”Ÿæˆæ‰§è¡ŒæœŸé—´ï¼Œä¾ç„¶æœ‰è¯·æ±‚åˆ°äº†ä¸»èŠ‚ç‚¹ï¼Œè€Œä¸»èŠ‚ç‚¹ä¼šä»¥å‘½ä»¤çš„æ–¹å¼è®°å½•åˆ°ç¼“å†²åŒºï¼Œç¼“å†²åŒºæ˜¯ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œæœ€åæŠŠè¿™ä¸ªæ—¥å¿—æ–‡ä»¶å‘é€ç»™ä»èŠ‚ç‚¹ï¼Œè¿™æ ·å°±èƒ½ä¿è¯ä¸»èŠ‚ç‚¹ä¸ä»èŠ‚ç‚¹å®Œå…¨ä¸€è‡´äº†ï¼ŒåæœŸå†åŒæ­¥æ•°æ®çš„æ—¶å€™ï¼Œéƒ½æ˜¯ä¾èµ–äºè¿™ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯å…¨é‡åŒæ­¥ã€‚</p><p>å¢é‡åŒæ­¥æŒ‡çš„æ˜¯ï¼Œå½“ä»èŠ‚ç‚¹æœåŠ¡é‡å¯ä¹‹åï¼Œæ•°æ®å°±ä¸ä¸€è‡´äº†ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œä»èŠ‚ç‚¹ä¼šè¯·æ±‚ä¸»èŠ‚ç‚¹åŒæ­¥æ•°æ®ï¼Œä¸»èŠ‚ç‚¹è¿˜æ˜¯åˆ¤æ–­ä¸æ˜¯ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼Œä¸æ˜¯ç¬¬ä¸€æ¬¡å°±è·å–ä»èŠ‚ç‚¹çš„offsetå€¼ï¼Œç„¶åä¸»èŠ‚ç‚¹ä»å‘½ä»¤æ—¥å¿—ä¸­è·å–offsetå€¼ä¹‹åçš„æ•°æ®ï¼Œå‘é€ç»™ä»èŠ‚ç‚¹è¿›è¡Œæ•°æ®åŒæ­¥ã€‚</p><h3 id="æ€ä¹ˆä¿è¯Redisçš„é«˜å¹¶å‘é«˜å¯ç”¨ï¼Ÿ"><a href="#æ€ä¹ˆä¿è¯Redisçš„é«˜å¹¶å‘é«˜å¯ç”¨ï¼Ÿ" class="headerlink" title="æ€ä¹ˆä¿è¯Redisçš„é«˜å¹¶å‘é«˜å¯ç”¨ï¼Ÿ"></a><strong>æ€ä¹ˆä¿è¯Redisçš„é«˜å¹¶å‘é«˜å¯ç”¨ï¼Ÿ</strong></h3><p><strong>å€™é€‰äºº</strong>ï¼šé¦–å…ˆå¯ä»¥æ­å»ºä¸»ä»é›†ç¾¤ï¼Œå†åŠ ä¸Šä½¿ç”¨Redisä¸­çš„å“¨å…µæ¨¡å¼ï¼Œå“¨å…µæ¨¡å¼å¯ä»¥å®ç°ä¸»ä»é›†ç¾¤çš„è‡ªåŠ¨æ•…éšœæ¢å¤ï¼Œé‡Œé¢å°±åŒ…å«äº†å¯¹ä¸»ä»æœåŠ¡çš„ç›‘æ§ã€è‡ªåŠ¨æ•…éšœæ¢å¤ã€é€šçŸ¥ï¼›</p><p>å¦‚æœmasteræ•…éšœï¼ŒSentinelä¼šå°†ä¸€ä¸ªslaveæå‡ä¸ºmasterã€‚å½“æ•…éšœå®ä¾‹æ¢å¤åä¹Ÿä»¥æ–°çš„masterä¸ºä¸»ï¼›</p><p>åŒæ—¶Sentinelä¹Ÿå……å½“Rediså®¢æˆ·ç«¯çš„æœåŠ¡å‘ç°æ¥æºï¼Œå½“é›†ç¾¤å‘ç”Ÿæ•…éšœè½¬ç§»æ—¶ï¼Œä¼šå°†æœ€æ–°ä¿¡æ¯æ¨é€ç»™Redisçš„å®¢æˆ·ç«¯ï¼Œæ‰€ä»¥ä¸€èˆ¬é¡¹ç›®éƒ½ä¼šé‡‡ç”¨å“¨å…µçš„æ¨¡å¼æ¥ä¿è¯Redisçš„é«˜å¹¶å‘é«˜å¯ç”¨ã€‚</p><h3 id="ä½ ä»¬ä½¿ç”¨Redisæ˜¯å•ç‚¹è¿˜æ˜¯é›†ç¾¤ï¼Œå“ªç§é›†ç¾¤ï¼Ÿ"><a href="#ä½ ä»¬ä½¿ç”¨Redisæ˜¯å•ç‚¹è¿˜æ˜¯é›†ç¾¤ï¼Œå“ªç§é›†ç¾¤ï¼Ÿ" class="headerlink" title="ä½ ä»¬ä½¿ç”¨Redisæ˜¯å•ç‚¹è¿˜æ˜¯é›†ç¾¤ï¼Œå“ªç§é›†ç¾¤ï¼Ÿ"></a>ä½ ä»¬ä½¿ç”¨Redisæ˜¯å•ç‚¹è¿˜æ˜¯é›†ç¾¤ï¼Œå“ªç§é›†ç¾¤ï¼Ÿ</h3><p><strong>å€™é€‰äºº</strong>ï¼šå—¯ï¼æˆ‘ä»¬å½“æ—¶ä½¿ç”¨çš„æ˜¯ä¸»ä»ï¼ˆ1ä¸»1ä»ï¼‰åŠ å“¨å…µã€‚</p><p>ä¸€èˆ¬å•èŠ‚ç‚¹ä¸è¶…è¿‡10Gå†…å­˜ï¼Œå¦‚æœRediså†…å­˜ä¸è¶³åˆ™å¯ä»¥ç»™ä¸åŒæœåŠ¡åˆ†é…ç‹¬ç«‹çš„Redisä¸»ä»èŠ‚ç‚¹ã€‚å°½é‡ä¸åšåˆ†ç‰‡é›†ç¾¤ã€‚</p><p>å› ä¸ºé›†ç¾¤ç»´æŠ¤èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œå¹¶ä¸”é›†ç¾¤ä¹‹é—´çš„å¿ƒè·³æ£€æµ‹å’Œæ•°æ®é€šä¿¡ä¼šæ¶ˆè€—å¤§é‡çš„ç½‘ç»œå¸¦å®½ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•ä½¿ç”¨Luaè„šæœ¬å’Œäº‹åŠ¡ã€‚</p><h3 id="Redisé›†ç¾¤è„‘è£‚-ï¼Œè¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ"><a href="#Redisé›†ç¾¤è„‘è£‚-ï¼Œè¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ" class="headerlink" title="Redisé›†ç¾¤è„‘è£‚ ï¼Œè¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ"></a>Redisé›†ç¾¤<strong>è„‘è£‚</strong> ï¼Œè¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</h3><p><strong>å€™é€‰äºº</strong>ï¼šå—¯ï¼è¿™ä¸ªåœ¨é¡¹ç›®ä¸­å¾ˆå°‘è§ï¼Œä¸è¿‡è„‘è£‚çš„é—®é¢˜æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬ç°åœ¨ç”¨çš„æ˜¯Redisçš„å“¨å…µæ¨¡å¼é›†ç¾¤çš„ã€‚</p><p>æœ‰çš„æ—¶å€™ç”±äºç½‘ç»œç­‰åŸå› å¯èƒ½ä¼šå‡ºç°è„‘è£‚çš„æƒ…å†µï¼Œå°±æ˜¯è¯´ï¼Œç”±äºRedis masterèŠ‚ç‚¹å’ŒRedis slaveèŠ‚ç‚¹å’ŒSentinelå¤„äºä¸åŒçš„ç½‘ç»œåˆ†åŒºï¼Œä½¿å¾—Sentinelæ²¡æœ‰èƒ½å¤Ÿå¿ƒè·³æ„ŸçŸ¥åˆ°masterï¼Œæ‰€ä»¥é€šè¿‡é€‰ä¸¾çš„æ–¹å¼æå‡äº†ä¸€ä¸ªslaveä¸ºmasterï¼Œè¿™æ ·å°±å­˜åœ¨äº†ä¸¤ä¸ªmasterï¼Œå°±åƒå¤§è„‘åˆ†è£‚äº†ä¸€æ ·ï¼Œè¿™æ ·ä¼šå¯¼è‡´å®¢æˆ·ç«¯è¿˜åœ¨old masteré‚£é‡Œå†™å…¥æ•°æ®ï¼Œæ–°èŠ‚ç‚¹æ— æ³•åŒæ­¥æ•°æ®ï¼Œå½“ç½‘ç»œæ¢å¤åï¼ŒSentinelä¼šå°†old masteré™ä¸ºslaveï¼Œè¿™æ—¶å†ä»æ–°masteråŒæ­¥æ•°æ®ï¼Œè¿™ä¼šå¯¼è‡´old masterä¸­çš„å¤§é‡æ•°æ®ä¸¢å¤±ã€‚</p><p>å…³äºè§£å†³çš„è¯ï¼Œæˆ‘è®°å¾—åœ¨Redisçš„é…ç½®ä¸­å¯ä»¥è®¾ç½®ï¼š</p><p>ç¬¬ä¸€å¯ä»¥è®¾ç½®æœ€å°‘çš„slaveèŠ‚ç‚¹ä¸ªæ•°ï¼Œæ¯”å¦‚è®¾ç½®è‡³å°‘è¦æœ‰ä¸€ä¸ªä»èŠ‚ç‚¹æ‰èƒ½åŒæ­¥æ•°æ®ï¼Œ</p><p>ç¬¬äºŒä¸ªå¯ä»¥è®¾ç½®<strong>ä¸»ä»æ•°æ®å¤åˆ¶å’ŒåŒæ­¥çš„å»¶è¿Ÿæ—¶é—´</strong>ï¼Œè¾¾ä¸åˆ°è¦æ±‚å°±æ‹’ç»è¯·æ±‚ï¼Œå°±å¯ä»¥é¿å…å¤§é‡çš„æ•°æ®ä¸¢å¤±ã€‚</p><h3 id="Redisçš„åˆ†ç‰‡é›†ç¾¤æœ‰ä»€ä¹ˆä½œç”¨"><a href="#Redisçš„åˆ†ç‰‡é›†ç¾¤æœ‰ä»€ä¹ˆä½œç”¨" class="headerlink" title="Redisçš„åˆ†ç‰‡é›†ç¾¤æœ‰ä»€ä¹ˆä½œç”¨"></a>Redisçš„<strong>åˆ†ç‰‡é›†ç¾¤</strong>æœ‰ä»€ä¹ˆä½œç”¨</h3><p><strong>å€™é€‰äºº</strong>ï¼šåˆ†ç‰‡é›†ç¾¤ä¸»è¦è§£å†³çš„æ˜¯<strong>æµ·é‡æ•°æ®å­˜å‚¨çš„é—®é¢˜</strong>ï¼Œé›†ç¾¤ä¸­æœ‰å¤šä¸ªmasterï¼Œæ¯ä¸ªmasterä¿å­˜ä¸åŒæ•°æ®ï¼Œå¹¶ä¸”è¿˜å¯ä»¥ç»™æ¯ä¸ªmasterè®¾ç½®å¤šä¸ªslaveèŠ‚ç‚¹ï¼Œå°±å¯ä»¥<strong>ç»§ç»­å¢å¤§é›†ç¾¤çš„é«˜å¹¶å‘èƒ½åŠ›</strong>ã€‚</p><p>åŒæ—¶æ¯ä¸ªmasterä¹‹é—´é€šè¿‡pingç›‘æµ‹å½¼æ­¤å¥åº·çŠ¶æ€ï¼Œå°±ç±»ä¼¼äºå“¨å…µæ¨¡å¼äº†ã€‚å½“å®¢æˆ·ç«¯è¯·æ±‚å¯ä»¥è®¿é—®é›†ç¾¤ä»»æ„èŠ‚ç‚¹ï¼Œæœ€ç»ˆéƒ½ä¼šè¢«è½¬å‘åˆ°æ­£ç¡®èŠ‚ç‚¹ã€‚</p><h3 id="Redis-åˆ†ç‰‡é›†ç¾¤-ä¸­æ•°æ®æ˜¯æ€ä¹ˆå­˜å‚¨å’Œè¯»å–çš„ï¼Ÿ"><a href="#Redis-åˆ†ç‰‡é›†ç¾¤-ä¸­æ•°æ®æ˜¯æ€ä¹ˆå­˜å‚¨å’Œè¯»å–çš„ï¼Ÿ" class="headerlink" title="Redis åˆ†ç‰‡é›†ç¾¤ ä¸­æ•°æ®æ˜¯æ€ä¹ˆå­˜å‚¨å’Œè¯»å–çš„ï¼Ÿ"></a>Redis <strong>åˆ†ç‰‡é›†ç¾¤</strong> <strong>ä¸­æ•°æ®æ˜¯æ€ä¹ˆå­˜å‚¨å’Œè¯»å–çš„ï¼Ÿ</strong></h3><p><strong>å€™é€‰äºº</strong>ï¼š</p><p>å—¯~ï¼Œåœ¨Redisé›†ç¾¤ä¸­æ˜¯è¿™æ ·çš„ï¼š</p><p>Redis é›†ç¾¤å¼•å…¥äº†å“ˆå¸Œæ§½çš„æ¦‚å¿µï¼Œæœ‰ 16384 ä¸ªå“ˆå¸Œæ§½ï¼Œé›†ç¾¤ä¸­æ¯ä¸ªä¸»èŠ‚ç‚¹ç»‘å®šäº†ä¸€å®šèŒƒå›´çš„å“ˆå¸Œæ§½èŒƒå›´ï¼Œkeyé€šè¿‡CRC16æ ¡éªŒåå¯¹16384å–æ¨¡æ¥å†³å®šæ”¾ç½®å“ªä¸ªæ§½ï¼Œé€šè¿‡æ§½æ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹è¿›è¡Œå­˜å‚¨ã€‚</p><p>å–å€¼çš„é€»è¾‘æ˜¯ä¸€æ ·çš„ã€‚</p><h3 id="Redisæ˜¯å•çº¿ç¨‹çš„ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¿˜é‚£ä¹ˆå¿«-ï¼Ÿ"><a href="#Redisæ˜¯å•çº¿ç¨‹çš„ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¿˜é‚£ä¹ˆå¿«-ï¼Ÿ" class="headerlink" title="Redisæ˜¯å•çº¿ç¨‹çš„ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¿˜é‚£ä¹ˆå¿« ï¼Ÿ"></a><strong>Redisæ˜¯å•çº¿ç¨‹çš„ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¿˜é‚£ä¹ˆå¿«</strong> <strong>ï¼Ÿ</strong></h3><p>å—¯ï¼Œè¿™ä¸ªæœ‰å‡ ä¸ªåŸå› å§~~~</p><ol><li>å®Œå…¨åŸºäºå†…å­˜çš„ï¼ŒCè¯­è¨€ç¼–å†™ã€‚</li><li>é‡‡ç”¨å•çº¿ç¨‹ï¼Œé¿å…ä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œç«äº‰æ¡ä»¶ã€‚</li><li>ä½¿ç”¨å¤šè·¯I/Oå¤ç”¨æ¨¡å‹ï¼Œéé˜»å¡IOã€‚</li></ol><p>ä¾‹å¦‚ï¼š<code>BGSAVE</code>å’Œ<code>BGREWRITEAOF</code>éƒ½æ˜¯åœ¨åå°æ‰§è¡Œæ“ä½œï¼Œä¸å½±å“ä¸»çº¿ç¨‹çš„æ­£å¸¸ä½¿ç”¨ï¼Œä¸ä¼šäº§ç”Ÿé˜»å¡ã€‚</p><h3 id="èƒ½è§£é‡Šä¸€ä¸‹I-Oå¤šè·¯å¤ç”¨æ¨¡å‹ï¼Ÿ"><a href="#èƒ½è§£é‡Šä¸€ä¸‹I-Oå¤šè·¯å¤ç”¨æ¨¡å‹ï¼Ÿ" class="headerlink" title="èƒ½è§£é‡Šä¸€ä¸‹I/Oå¤šè·¯å¤ç”¨æ¨¡å‹ï¼Ÿ"></a><strong>èƒ½è§£é‡Šä¸€ä¸‹I/Oå¤šè·¯å¤ç”¨æ¨¡å‹ï¼Ÿ</strong></h3><p><strong>å€™é€‰äºº</strong>ï¼šå—¯~~ï¼ŒI/Oå¤šè·¯å¤ç”¨æ˜¯æŒ‡åˆ©ç”¨å•ä¸ªçº¿ç¨‹æ¥åŒæ—¶ç›‘å¬å¤šä¸ªSocketï¼Œå¹¶ä¸”åœ¨æŸä¸ªSocketå¯è¯»ã€å¯å†™æ—¶å¾—åˆ°é€šçŸ¥ï¼Œä»è€Œé¿å…æ— æ•ˆçš„ç­‰å¾…ï¼Œå……åˆ†åˆ©ç”¨CPUèµ„æºã€‚ç›®å‰çš„I/Oå¤šè·¯å¤ç”¨éƒ½æ˜¯é‡‡ç”¨çš„epollæ¨¡å¼å®ç°ï¼Œå®ƒä¼šåœ¨é€šçŸ¥ç”¨æˆ·è¿›ç¨‹Socketå°±ç»ªçš„åŒæ—¶ï¼ŒæŠŠå·²å°±ç»ªçš„Socketå†™å…¥ç”¨æˆ·ç©ºé—´ï¼Œä¸éœ€è¦æŒ¨ä¸ªéå†Socketæ¥åˆ¤æ–­æ˜¯å¦å°±ç»ªï¼Œæå‡äº†æ€§èƒ½ã€‚</p><p>å…¶ä¸­Redisçš„ç½‘ç»œæ¨¡å‹å°±æ˜¯ä½¿ç”¨I/Oå¤šè·¯å¤ç”¨ç»“åˆäº‹ä»¶çš„å¤„ç†å™¨æ¥åº”å¯¹å¤šä¸ªSocketè¯·æ±‚ï¼Œæ¯”å¦‚ï¼Œæä¾›äº†è¿æ¥åº”ç­”å¤„ç†å™¨ã€å‘½ä»¤å›å¤å¤„ç†å™¨ï¼Œå‘½ä»¤è¯·æ±‚å¤„ç†å™¨ï¼›</p><p>åœ¨Redis6.0ä¹‹åï¼Œä¸ºäº†æå‡æ›´å¥½çš„æ€§èƒ½ï¼Œåœ¨å‘½ä»¤å›å¤å¤„ç†å™¨ä½¿ç”¨äº†å¤šçº¿ç¨‹æ¥å¤„ç†å›å¤äº‹ä»¶ï¼Œåœ¨å‘½ä»¤è¯·æ±‚å¤„ç†å™¨ä¸­ï¼Œå°†å‘½ä»¤çš„è½¬æ¢ä½¿ç”¨äº†å¤šçº¿ç¨‹ï¼Œå¢åŠ å‘½ä»¤è½¬æ¢é€Ÿåº¦ï¼Œåœ¨å‘½ä»¤æ‰§è¡Œçš„æ—¶å€™ï¼Œä¾ç„¶æ˜¯å•çº¿ç¨‹</p><h2 id="Mysql"><a href="#Mysql" class="headerlink" title="Mysql"></a>Mysql</h2><h3 id="MySQLä¸­ï¼Œå¦‚ä½•å®šä½-æ…¢æŸ¥è¯¢-ï¼Ÿ"><a href="#MySQLä¸­ï¼Œå¦‚ä½•å®šä½-æ…¢æŸ¥è¯¢-ï¼Ÿ" class="headerlink" title="MySQLä¸­ï¼Œå¦‚ä½•å®šä½  æ…¢æŸ¥è¯¢ ï¼Ÿ"></a>MySQLä¸­ï¼Œå¦‚ä½•å®šä½  <strong>æ…¢æŸ¥è¯¢</strong> <strong>ï¼Ÿ</strong></h3><p>MySQLæœ¬èº«æä¾›äº†æ…¢æŸ¥è¯¢æ—¥å¿—åŠŸèƒ½ã€‚</p><p>å¯ä»¥åœ¨MySQLçš„ç³»ç»Ÿé…ç½®æ–‡ä»¶ä¸­å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œå¹¶è®¾ç½®SQLæ‰§è¡Œæ—¶é—´è¶…è¿‡å¤šå°‘å°±è®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¹‹å‰é¡¹ç›®è®¾ç½®çš„æ˜¯2ç§’ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´çš„SQLå°±ä¼šè®°å½•åœ¨æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨é‚£é‡Œæ‰¾åˆ°æ‰§è¡Œæ…¢çš„SQLã€‚</p><h3 id="é‚£è¿™ä¸ªSQLè¯­å¥æ‰§è¡Œå¾ˆ-æ…¢ï¼Œå¦‚ä½•åˆ†æå‘¢-ï¼Ÿ"><a href="#é‚£è¿™ä¸ªSQLè¯­å¥æ‰§è¡Œå¾ˆ-æ…¢ï¼Œå¦‚ä½•åˆ†æå‘¢-ï¼Ÿ" class="headerlink" title="é‚£è¿™ä¸ªSQLè¯­å¥æ‰§è¡Œå¾ˆ æ…¢ï¼Œå¦‚ä½•åˆ†æå‘¢ ï¼Ÿ"></a>é‚£è¿™ä¸ªSQLè¯­å¥æ‰§è¡Œå¾ˆ <strong>æ…¢ï¼Œå¦‚ä½•åˆ†æå‘¢</strong> <strong>ï¼Ÿ</strong></h3><p>ä½¿ç”¨MySQLçš„<code>EXPLAIN</code>å‘½ä»¤æ¥åˆ†æè¿™æ¡SQLçš„æ‰§è¡Œæƒ…å†µã€‚</p><p>é€šè¿‡<code>key</code>å’Œ<code>key_len</code>å¯ä»¥æ£€æŸ¥æ˜¯å¦å‘½ä¸­äº†ç´¢å¼•ï¼Œå¦‚æœå·²ç»æ·»åŠ äº†ç´¢å¼•ï¼Œä¹Ÿå¯ä»¥åˆ¤æ–­ç´¢å¼•æ˜¯å¦æœ‰æ•ˆã€‚</p><p>é€šè¿‡<code>type</code>å­—æ®µå¯ä»¥æŸ¥çœ‹SQLæ˜¯å¦æœ‰ä¼˜åŒ–ç©ºé—´ï¼Œæ¯”å¦‚æ˜¯å¦å­˜åœ¨å…¨ç´¢å¼•æ‰«ææˆ–å…¨è¡¨æ‰«æã€‚</p><p>é€šè¿‡<code>extra</code>å»ºè®®å¯ä»¥åˆ¤æ–­æ˜¯å¦å‡ºç°å›è¡¨æƒ…å†µï¼Œå¦‚æœå‡ºç°ï¼Œå¯ä»¥å°è¯•<strong>æ·»åŠ ç´¢å¼•æˆ–ä¿®æ”¹è¿”å›å­—æ®µ</strong>æ¥ä¼˜åŒ–ã€‚</p><h3 id="äº†è§£è¿‡ç´¢å¼•å—ï¼Ÿï¼ˆä»€ä¹ˆæ˜¯ç´¢å¼•ï¼‰"><a href="#äº†è§£è¿‡ç´¢å¼•å—ï¼Ÿï¼ˆä»€ä¹ˆæ˜¯ç´¢å¼•ï¼‰" class="headerlink" title="äº†è§£è¿‡ç´¢å¼•å—ï¼Ÿï¼ˆä»€ä¹ˆæ˜¯ç´¢å¼•ï¼‰"></a><strong>äº†è§£è¿‡ç´¢å¼•å—ï¼Ÿï¼ˆ</strong>ä»€ä¹ˆæ˜¯ç´¢å¼•ï¼‰</h3><p>å®ƒæ˜¯ä¸€ç§å¸®åŠ©MySQL<strong>é«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„</strong>ï¼Œä¸»è¦ç”¨æ¥æé«˜æ•°æ®æ£€ç´¢æ•ˆç‡ï¼Œé™ä½æ•°æ®åº“çš„I/Oæˆæœ¬ã€‚</p><p>åŒæ—¶ï¼Œç´¢å¼•åˆ—å¯ä»¥å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œé™ä½æ•°æ®æ’åºçš„æˆæœ¬ï¼Œä¹Ÿèƒ½å‡å°‘CPUçš„æ¶ˆè€—ã€‚</p><h3 id="ç´¢å¼•çš„åº•å±‚æ•°æ®ç»“æ„äº†è§£è¿‡å—ï¼Ÿ"><a href="#ç´¢å¼•çš„åº•å±‚æ•°æ®ç»“æ„äº†è§£è¿‡å—ï¼Ÿ" class="headerlink" title="ç´¢å¼•çš„åº•å±‚æ•°æ®ç»“æ„äº†è§£è¿‡å—ï¼Ÿ"></a><strong>ç´¢å¼•çš„åº•å±‚æ•°æ®ç»“æ„äº†è§£è¿‡å—</strong>ï¼Ÿ</h3><p>MySQLçš„é»˜è®¤å­˜å‚¨å¼•æ“InnoDBä½¿ç”¨çš„æ˜¯B+æ ‘ä½œä¸ºç´¢å¼•çš„å­˜å‚¨ç»“æ„ã€‚</p><p>é€‰æ‹©B+æ ‘çš„åŸå› åŒ…æ‹¬ï¼š</p><p>èŠ‚ç‚¹å¯ä»¥æœ‰æ›´å¤šå­èŠ‚ç‚¹ï¼Œè·¯å¾„æ›´çŸ­ï¼›ç£ç›˜è¯»å†™ä»£ä»·æ›´ä½ï¼Œéå¶å­èŠ‚ç‚¹åªå­˜å‚¨é”®å€¼å’ŒæŒ‡é’ˆï¼Œå¶å­èŠ‚ç‚¹å­˜å‚¨æ•°æ®ï¼›</p><p>B+æ ‘<strong>é€‚åˆèŒƒå›´æŸ¥è¯¢å’Œæ‰«æ</strong>ï¼Œå› ä¸ºå¶å­èŠ‚ç‚¹å½¢æˆäº†ä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚</p><h3 id="Bæ ‘å’ŒB-æ ‘çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ"><a href="#Bæ ‘å’ŒB-æ ‘çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ" class="headerlink" title="Bæ ‘å’ŒB+æ ‘çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ"></a><strong>Bæ ‘å’ŒB+æ ‘çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</strong></h3><ol><li><strong>Bæ ‘çš„éå¶å­èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹éƒ½å­˜æ”¾æ•°æ®</strong>ï¼Œè€Œ<strong>B+æ ‘çš„æ‰€æœ‰æ•°æ®åªå‡ºç°åœ¨å¶å­èŠ‚ç‚¹</strong>ï¼Œè¿™ä½¿å¾—B+æ ‘åœ¨æŸ¥è¯¢æ—¶æ•ˆç‡æ›´ç¨³å®šã€‚</li><li>B+æ ‘åœ¨è¿›è¡ŒèŒƒå›´æŸ¥è¯¢æ—¶æ•ˆç‡æ›´é«˜ï¼Œå› ä¸ºæ‰€æœ‰æ•°æ®éƒ½åœ¨å¶å­èŠ‚ç‚¹ï¼Œå¹¶ä¸”å¶å­èŠ‚ç‚¹ä¹‹é—´å½¢æˆäº†åŒå‘é“¾è¡¨ã€‚</li></ol><h3 id="ä»€ä¹ˆæ˜¯èšç°‡ç´¢å¼•ä»€ä¹ˆæ˜¯éèšç°‡ç´¢å¼•-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯èšç°‡ç´¢å¼•ä»€ä¹ˆæ˜¯éèšç°‡ç´¢å¼•-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯èšç°‡ç´¢å¼•ä»€ä¹ˆæ˜¯éèšç°‡ç´¢å¼• ï¼Ÿ"></a><strong>ä»€ä¹ˆæ˜¯èšç°‡ç´¢å¼•ä»€ä¹ˆæ˜¯éèšç°‡ç´¢å¼•</strong> <strong>ï¼Ÿ</strong></h3><p>èšç°‡ç´¢å¼•æ˜¯æŒ‡<strong>æ•°æ®ä¸ç´¢å¼•æ”¾åœ¨ä¸€èµ·</strong>ï¼Œ<strong>B+æ ‘çš„å¶å­èŠ‚ç‚¹ä¿å­˜äº†æ•´è¡Œæ•°æ®</strong>ï¼Œé€šå¸¸åªæœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œä¸€èˆ¬æ˜¯ç”±ä¸»é”®æ„æˆã€‚</p><p>éèšç°‡ç´¢å¼•åˆ™æ˜¯<strong>æ•°æ®ä¸ç´¢å¼•åˆ†å¼€å­˜å‚¨ï¼ŒB+æ ‘çš„å¶å­èŠ‚ç‚¹ä¿å­˜çš„æ˜¯ä¸»é”®å€¼</strong>ï¼Œå¯ä»¥æœ‰å¤šä¸ªéèšç°‡ç´¢å¼•ï¼Œé€šå¸¸æˆ‘ä»¬è‡ªå®šä¹‰çš„ç´¢å¼•éƒ½æ˜¯éèšç°‡ç´¢å¼•ã€‚</p><h3 id="çŸ¥é“ä»€ä¹ˆæ˜¯å›è¡¨æŸ¥è¯¢å—ï¼Ÿ"><a href="#çŸ¥é“ä»€ä¹ˆæ˜¯å›è¡¨æŸ¥è¯¢å—ï¼Ÿ" class="headerlink" title="çŸ¥é“ä»€ä¹ˆæ˜¯å›è¡¨æŸ¥è¯¢å—ï¼Ÿ"></a><strong>çŸ¥é“ä»€ä¹ˆæ˜¯å›è¡¨æŸ¥è¯¢å—ï¼Ÿ</strong></h3><p>é€šè¿‡<strong>äºŒçº§ç´¢å¼•</strong>æ‰¾åˆ°å¯¹åº”çš„<strong>ä¸»é”®å€¼</strong>ï¼Œç„¶åå†é€šè¿‡<strong>ä¸»é”®å€¼</strong>æŸ¥è¯¢<strong>èšç°‡ç´¢å¼•ä¸­å¯¹åº”çš„æ•´è¡Œæ•°æ®çš„è¿‡ç¨‹</strong>ã€‚</p><h3 id="çŸ¥é“ä»€ä¹ˆå«-è¦†ç›–ç´¢å¼•-å—-ï¼Ÿ"><a href="#çŸ¥é“ä»€ä¹ˆå«-è¦†ç›–ç´¢å¼•-å—-ï¼Ÿ" class="headerlink" title="çŸ¥é“ä»€ä¹ˆå« è¦†ç›–ç´¢å¼• å— ï¼Ÿ"></a><strong>çŸ¥é“ä»€ä¹ˆå«</strong> <strong>è¦†ç›–ç´¢å¼•</strong> <strong>å—</strong> <strong>ï¼Ÿ</strong></h3><p>æ˜¯æŒ‡åœ¨<code>SELECT</code>æŸ¥è¯¢ä¸­ï¼Œè¿”å›çš„<strong>åˆ—å…¨éƒ¨èƒ½åœ¨ç´¢å¼•ä¸­æ‰¾åˆ°</strong>ï¼Œé¿å…äº†å›è¡¨æŸ¥è¯¢ï¼Œæé«˜äº†æ€§èƒ½ã€‚</p><p>ä½¿ç”¨è¦†ç›–ç´¢å¼•å¯ä»¥<strong>å‡å°‘å¯¹ä¸»é”®ç´¢å¼•çš„æŸ¥è¯¢æ¬¡æ•°</strong>ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p><h3 id="MySQLè¶…å¤§åˆ†é¡µæ€ä¹ˆå¤„ç†-ï¼Ÿ"><a href="#MySQLè¶…å¤§åˆ†é¡µæ€ä¹ˆå¤„ç†-ï¼Ÿ" class="headerlink" title="MySQLè¶…å¤§åˆ†é¡µæ€ä¹ˆå¤„ç† ï¼Ÿ"></a><strong>MySQLè¶…å¤§åˆ†é¡µæ€ä¹ˆå¤„ç†</strong> <strong>ï¼Ÿ</strong></h3><p>è¶…å¤§åˆ†é¡µé€šå¸¸å‘ç”Ÿåœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨<code>LIMIT</code>åˆ†é¡µæŸ¥è¯¢ä¸”éœ€è¦æ’åºæ—¶ï¼Œæ•ˆç‡è¾ƒä½ã€‚</p><p>å¯ä»¥é€šè¿‡<strong>è¦†ç›–ç´¢å¼•å’Œå­æŸ¥è¯¢</strong>æ¥è§£å†³ã€‚</p><p>é¦–å…ˆ<strong>æŸ¥è¯¢æ•°æ®çš„IDå­—æ®µï¼Œè¿›è¡Œåˆ†é¡µ</strong>ï¼Œç„¶å<strong>æ ¹æ®IDåˆ—è¡¨ï¼Œç”¨å­æŸ¥è¯¢</strong>æ¥è¿‡æ»¤åªæŸ¥è¯¢è¿™äº›IDçš„æ•°æ®ï¼Œ</p><p>å› ä¸ºæŸ¥è¯¢IDæ—¶ä½¿ç”¨çš„æ˜¯è¦†ç›–ç´¢å¼•ï¼Œæ‰€ä»¥æ•ˆç‡å¯ä»¥æå‡ã€‚</p><h3 id="ç´¢å¼•åˆ›å»ºåŸåˆ™æœ‰å“ªäº›ï¼Ÿ"><a href="#ç´¢å¼•åˆ›å»ºåŸåˆ™æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="ç´¢å¼•åˆ›å»ºåŸåˆ™æœ‰å“ªäº›ï¼Ÿ"></a><strong>ç´¢å¼•åˆ›å»ºåŸåˆ™æœ‰å“ªäº›ï¼Ÿ</strong></h3><ul><li><p>è¡¨ä¸­çš„<strong>æ•°æ®é‡è¶…è¿‡10ä¸‡ä»¥ä¸Š</strong>æ—¶è€ƒè™‘åˆ›å»ºç´¢å¼•ã€‚</p></li><li><p>é€‰æ‹©<strong>æŸ¥è¯¢é¢‘ç¹çš„å­—æ®µä½œä¸ºç´¢å¼•</strong>ï¼Œå¦‚æŸ¥è¯¢æ¡ä»¶ã€æ’åºå­—æ®µæˆ–åˆ†ç»„å­—æ®µã€‚</p></li><li><p>å¯¹äºå†…å®¹è¾ƒé•¿çš„å­—æ®µï¼Œè€ƒè™‘ä½¿ç”¨<strong>å‰ç¼€ç´¢å¼•</strong>ã€‚</p></li><li><p><strong>æ§åˆ¶ç´¢å¼•æ•°é‡</strong>ï¼Œå› ä¸ºç´¢å¼•è™½ç„¶å¯ä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼Œä½†ä¹Ÿä¼šå½±å“æ’å…¥ã€æ›´æ–°çš„é€Ÿåº¦ã€‚</p></li><li><p>å°½é‡ä½¿ç”¨å¤åˆç´¢å¼•ï¼Œè¦†ç›–SQLçš„è¿”å›å€¼ã€‚</p></li><li><p>å¦‚æœå­—æ®µåŒºåˆ†åº¦ä¸é«˜ï¼Œå¯ä»¥å°†å…¶æ”¾åœ¨ç»„åˆç´¢å¼•çš„åé¢ã€‚</p></li></ul><h3 id="ä»€ä¹ˆæƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ"></a><strong>ä»€ä¹ˆæƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ</strong></h3><ul><li>æ²¡æœ‰éµå¾ª<strong>æœ€å·¦åŒ¹é…åŸåˆ™</strong>ã€‚</li><li>ä½¿ç”¨äº†æ¨¡ç³ŠæŸ¥è¯¢ä¸”<code>%</code>å·åœ¨å‰é¢ã€‚</li><li>åœ¨ç´¢å¼•å­—æ®µä¸Šè¿›è¡Œäº†è¿ç®—æˆ–ç±»å‹è½¬æ¢ã€‚</li><li><strong>ä½¿ç”¨äº†å¤åˆç´¢å¼•ä½†åœ¨ä¸­é—´ä½¿ç”¨äº†èŒƒå›´æŸ¥è¯¢</strong>ï¼Œå¯¼è‡´å³è¾¹çš„æ¡ä»¶ç´¢å¼•å¤±æ•ˆã€‚</li></ul><h3 id="SQLçš„ä¼˜åŒ–ç»éªŒæœ‰å“ªäº›ï¼Ÿ"><a href="#SQLçš„ä¼˜åŒ–ç»éªŒæœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="SQLçš„ä¼˜åŒ–ç»éªŒæœ‰å“ªäº›ï¼Ÿ"></a><strong>SQLçš„ä¼˜åŒ–ç»éªŒæœ‰å“ªäº›ï¼Ÿ</strong></h3><ul><li>å»ºè¡¨æ—¶é€‰æ‹©<strong>åˆé€‚çš„å­—æ®µç±»å‹</strong>ã€‚</li><li><strong>ä½¿ç”¨ç´¢å¼•ï¼Œéµå¾ªåˆ›å»ºç´¢å¼•çš„åŸåˆ™</strong>ã€‚</li><li>ç¼–å†™é«˜æ•ˆçš„SQLè¯­å¥ï¼Œæ¯”å¦‚é¿å…ä½¿ç”¨<code>SELECT *</code>ï¼Œå°½é‡ä½¿ç”¨<code>UNION ALL</code>ä»£æ›¿<code>UNION</code>ï¼Œä»¥åŠåœ¨è¡¨å…³è”æ—¶ä½¿ç”¨<code>INNER JOIN</code>ã€‚</li><li>é‡‡ç”¨<strong>ä¸»ä»å¤åˆ¶å’Œè¯»å†™åˆ†ç¦»</strong>æé«˜æ€§èƒ½ã€‚</li><li>åœ¨æ•°æ®é‡å¤§æ—¶<strong>è€ƒè™‘åˆ†åº“åˆ†è¡¨</strong>ã€‚</li></ul><h3 id="åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œä½ ä»¬æ˜¯å¦‚ä½•ä¼˜åŒ–çš„å‘¢ï¼Ÿ"><a href="#åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œä½ ä»¬æ˜¯å¦‚ä½•ä¼˜åŒ–çš„å‘¢ï¼Ÿ" class="headerlink" title="åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œä½ ä»¬æ˜¯å¦‚ä½•ä¼˜åŒ–çš„å‘¢ï¼Ÿ"></a><strong>åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œä½ ä»¬æ˜¯å¦‚ä½•ä¼˜åŒ–çš„å‘¢ï¼Ÿ</strong></h3><p>é€‰æ‹©å­—æ®µç±»å‹æ—¶ç»“åˆå­—æ®µå†…å®¹ï¼Œæ¯”å¦‚æ•°å€¼ç±»å‹é€‰æ‹©<code>TINYINT</code>ã€<code>INT</code>ã€<code>BIGINT</code>ç­‰ï¼Œå­—ç¬¦ä¸²ç±»å‹é€‰æ‹©<code>CHAR</code>ã€<code>VARCHAR</code>æˆ–<code>TEXT</code>ã€‚</p><h3 id="åœ¨ä½¿ç”¨ç´¢å¼•çš„æ—¶å€™ï¼Œæ˜¯å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ"><a href="#åœ¨ä½¿ç”¨ç´¢å¼•çš„æ—¶å€™ï¼Œæ˜¯å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ" class="headerlink" title="åœ¨ä½¿ç”¨ç´¢å¼•çš„æ—¶å€™ï¼Œæ˜¯å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ"></a><strong>åœ¨ä½¿ç”¨ç´¢å¼•çš„æ—¶å€™ï¼Œæ˜¯å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ</strong></h3><p>åœ¨ä½¿ç”¨ç´¢å¼•æ—¶ï¼Œæˆ‘ä»¬éµå¾ªç´¢å¼•åˆ›å»ºåŸåˆ™ï¼Œ</p><p><strong>ç¡®ä¿ç´¢å¼•å­—æ®µæ˜¯æŸ¥è¯¢é¢‘ç¹çš„</strong>ï¼Œä½¿ç”¨<strong>å¤åˆç´¢å¼•è¦†ç›–SQLè¿”å›å€¼</strong>ï¼Œ</p><p>é¿å…åœ¨ç´¢å¼•å­—æ®µä¸Šè¿›è¡Œè¿ç®—æˆ–ç±»å‹è½¬æ¢ï¼Œä»¥åŠæ§åˆ¶ç´¢å¼•æ•°é‡ã€‚</p><h3 id="ä½ å¹³æ—¶å¯¹SQLè¯­å¥åšäº†å“ªäº›ä¼˜åŒ–å‘¢ï¼Ÿ"><a href="#ä½ å¹³æ—¶å¯¹SQLè¯­å¥åšäº†å“ªäº›ä¼˜åŒ–å‘¢ï¼Ÿ" class="headerlink" title="ä½ å¹³æ—¶å¯¹SQLè¯­å¥åšäº†å“ªäº›ä¼˜åŒ–å‘¢ï¼Ÿ"></a><strong>ä½ å¹³æ—¶å¯¹SQLè¯­å¥åšäº†å“ªäº›ä¼˜åŒ–å‘¢ï¼Ÿ</strong></h3><p>æŒ‡æ˜å­—æ®µåç§°è€Œä¸æ˜¯ä½¿ç”¨<code>SELECT *</code>ï¼Œé¿å…é€ æˆç´¢å¼•å¤±æ•ˆçš„å†™æ³•ï¼ŒèšåˆæŸ¥è¯¢æ—¶ä½¿ç”¨<code>UNION ALL</code>ä»£æ›¿<code>UNION</code>ï¼Œè¡¨å…³è”æ—¶ä¼˜å…ˆä½¿ç”¨<code>INNER JOIN</code>ï¼Œä»¥åŠåœ¨å¿…é¡»ä½¿ç”¨<code>LEFT JOIN</code>æˆ–<code>RIGHT JOIN</code>æ—¶ï¼Œç¡®ä¿å°è¡¨ä½œä¸ºé©±åŠ¨è¡¨ã€‚</p><h3 id="äº‹åŠ¡çš„ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿå¯ä»¥è¯¦ç»†è¯´ä¸€ä¸‹å—ï¼Ÿ"><a href="#äº‹åŠ¡çš„ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿå¯ä»¥è¯¦ç»†è¯´ä¸€ä¸‹å—ï¼Ÿ" class="headerlink" title="äº‹åŠ¡çš„ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿå¯ä»¥è¯¦ç»†è¯´ä¸€ä¸‹å—ï¼Ÿ"></a><strong>äº‹åŠ¡çš„ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿå¯ä»¥è¯¦ç»†è¯´ä¸€ä¸‹å—ï¼Ÿ</strong></h3><p>äº‹åŠ¡çš„ç‰¹æ€§æ˜¯ACIDï¼Œå³åŸå­æ€§ï¼ˆAtomicityï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼‰ã€æŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚</p><p>ä¾‹å¦‚ï¼ŒAå‘Bè½¬è´¦500å…ƒï¼Œè¿™ä¸ªæ“ä½œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼Œä½“ç°äº†åŸå­æ€§ã€‚</p><p>è½¬è´¦è¿‡ç¨‹ä¸­æ•°æ®è¦ä¿æŒä¸€è‡´ï¼ŒAæ‰£é™¤äº†500å…ƒï¼ŒBå¿…é¡»å¢åŠ 500å…ƒã€‚</p><p>éš”ç¦»æ€§ä½“ç°åœ¨Aå‘Bè½¬è´¦æ—¶ï¼Œä¸å—å…¶ä»–äº‹åŠ¡å¹²æ‰°ã€‚</p><p>æŒä¹…æ€§ä½“ç°åœ¨äº‹åŠ¡æäº¤åï¼Œæ•°æ®è¦è¢«æŒä¹…åŒ–å­˜å‚¨ã€‚</p><h3 id="å¹¶å‘äº‹åŠ¡å¸¦æ¥å“ªäº›é—®é¢˜-ï¼Ÿ"><a href="#å¹¶å‘äº‹åŠ¡å¸¦æ¥å“ªäº›é—®é¢˜-ï¼Ÿ" class="headerlink" title="å¹¶å‘äº‹åŠ¡å¸¦æ¥å“ªäº›é—®é¢˜ ï¼Ÿ"></a><strong>å¹¶å‘äº‹åŠ¡å¸¦æ¥å“ªäº›é—®é¢˜</strong> <strong>ï¼Ÿ</strong></h3><p>å¹¶å‘äº‹åŠ¡å¯èƒ½å¯¼è‡´<strong>è„è¯»</strong>ã€<strong>ä¸å¯é‡å¤è¯»</strong>å’Œ<strong>å¹»è¯»</strong>ã€‚</p><p>è„è¯»æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„â€œè„æ•°æ®â€ã€‚</p><p>ä¸å¯é‡å¤è¯»æ˜¯æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œç”±äºå…¶ä»–äº‹åŠ¡çš„ä¿®æ”¹å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</p><p>å¹»è¯»æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°äº†å…¶ä»–äº‹åŠ¡æ’å…¥çš„â€œå¹»è¡Œâ€ã€‚</p><h3 id="æ€ä¹ˆè§£å†³è¿™äº›é—®é¢˜å‘¢-ï¼ŸMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯-ï¼Ÿ"><a href="#æ€ä¹ˆè§£å†³è¿™äº›é—®é¢˜å‘¢-ï¼ŸMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯-ï¼Ÿ" class="headerlink" title="æ€ä¹ˆè§£å†³è¿™äº›é—®é¢˜å‘¢ ï¼ŸMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ ï¼Ÿ"></a><strong>æ€ä¹ˆè§£å†³è¿™äº›é—®é¢˜å‘¢</strong> <strong>ï¼ŸMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ ï¼Ÿ</strong></h3><p>è§£å†³è¿™äº›é—®é¢˜çš„æ–¹æ³•æ˜¯<strong>ä½¿ç”¨äº‹åŠ¡éš”ç¦»</strong>ã€‚MySQLæ”¯æŒå››ç§éš”ç¦»çº§åˆ«ï¼š</p><ol><li>æœªæäº¤è¯»ï¼ˆREAD UNCOMMITTEDï¼‰ï¼šè§£å†³ä¸äº†æ‰€æœ‰é—®é¢˜ã€‚</li><li>è¯»å·²æäº¤ï¼ˆREAD COMMITTEDï¼‰ï¼šèƒ½è§£å†³è„è¯»ï¼Œä½†ä¸èƒ½è§£å†³ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ã€‚</li><li>å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰ï¼šèƒ½è§£å†³è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†ä¸èƒ½è§£å†³å¹»è¯»ï¼Œè¿™ä¹Ÿæ˜¯MySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«ã€‚</li><li>ä¸²è¡ŒåŒ–ï¼ˆSERIALIZABLEï¼‰ï¼šå¯ä»¥è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œä½†æ€§èƒ½è¾ƒä½ã€‚</li></ol><h3 id="undo-log-å’Œ-redo-log-çš„åŒºåˆ«-æ˜¯-ä»€ä¹ˆ-ï¼Ÿ"><a href="#undo-log-å’Œ-redo-log-çš„åŒºåˆ«-æ˜¯-ä»€ä¹ˆ-ï¼Ÿ" class="headerlink" title="undo log å’Œ redo log çš„åŒºåˆ« æ˜¯ ä»€ä¹ˆ ï¼Ÿ"></a><strong><code>undo log</code></strong> <strong>å’Œ</strong> <strong><code>redo log</code></strong> <strong>çš„åŒºåˆ«</strong> <strong>æ˜¯</strong> <strong>ä»€ä¹ˆ</strong> <strong>ï¼Ÿ</strong></h3><p><code>redo log</code>è®°å½•çš„æ˜¯æ•°æ®é¡µçš„ç‰©ç†å˜åŒ–ï¼Œç”¨äºæœåŠ¡å®•æœºåçš„æ¢å¤ï¼Œä¿è¯äº‹åŠ¡çš„æŒä¹…æ€§ã€‚</p><p>è€Œ<code>undo log</code>è®°å½•çš„æ˜¯é€»è¾‘æ—¥å¿—ï¼Œç”¨äºäº‹åŠ¡å›æ»šæ—¶æ¢å¤åŸå§‹æ•°æ®ï¼Œä¿è¯äº‹åŠ¡çš„åŸå­æ€§å’Œä¸€è‡´æ€§ã€‚</p><h3 id="äº‹åŠ¡ä¸­çš„éš”ç¦»æ€§æ˜¯å¦‚ä½•ä¿è¯çš„å‘¢-ï¼Ÿ-ä½ è§£é‡Šä¸€ä¸‹-MVCC"><a href="#äº‹åŠ¡ä¸­çš„éš”ç¦»æ€§æ˜¯å¦‚ä½•ä¿è¯çš„å‘¢-ï¼Ÿ-ä½ è§£é‡Šä¸€ä¸‹-MVCC" class="headerlink" title="äº‹åŠ¡ä¸­çš„éš”ç¦»æ€§æ˜¯å¦‚ä½•ä¿è¯çš„å‘¢ ï¼Ÿ ä½ è§£é‡Šä¸€ä¸‹ MVCC"></a><strong>äº‹åŠ¡ä¸­çš„éš”ç¦»æ€§</strong>æ˜¯å¦‚ä½•ä¿è¯çš„å‘¢ <strong>ï¼Ÿ</strong> ä½ è§£é‡Šä¸€ä¸‹ <strong>MVCC</strong></h3><p>äº‹åŠ¡çš„éš”ç¦»æ€§é€šè¿‡<strong>é”å’Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶</strong>ï¼ˆMVCCï¼‰æ¥ä¿è¯ã€‚MVCCé€šè¿‡<strong>ç»´æŠ¤æ•°æ®çš„å¤šä¸ªç‰ˆæœ¬</strong>æ¥é¿å…è¯»å†™å†²çªã€‚</p><p>åº•å±‚å®ç°åŒ…æ‹¬éšè—å­—æ®µã€<code>undo log</code>å’Œ<code>read view</code>ã€‚éšè—å­—æ®µåŒ…æ‹¬<code>trx_id</code>å’Œ<code>roll_pointer</code>ã€‚</p><p><code>undo log</code>è®°å½•äº†ä¸åŒç‰ˆæœ¬çš„æ•°æ®ï¼Œé€šè¿‡<code>roll_pointer</code>å½¢æˆç‰ˆæœ¬é“¾ã€‚<code>read view</code>å®šä¹‰äº†ä¸åŒéš”ç¦»çº§åˆ«ä¸‹çš„å¿«ç…§è¯»ï¼Œå†³å®šäº†äº‹åŠ¡è®¿é—®å“ªä¸ªç‰ˆæœ¬çš„æ•°æ®ã€‚</p><h3 id="MySQL-ä¸»ä»åŒæ­¥-åŸç†æ˜¯ä»€ä¹ˆ-ï¼Ÿ"><a href="#MySQL-ä¸»ä»åŒæ­¥-åŸç†æ˜¯ä»€ä¹ˆ-ï¼Ÿ" class="headerlink" title="MySQL ä¸»ä»åŒæ­¥ åŸç†æ˜¯ä»€ä¹ˆ ï¼Ÿ"></a><strong>MySQL</strong> <strong>ä¸»ä»åŒæ­¥</strong> <strong>åŸç†æ˜¯ä»€ä¹ˆ</strong> <strong>ï¼Ÿ</strong></h3><p>MySQLä¸»ä»å¤åˆ¶çš„æ ¸å¿ƒæ˜¯äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆBinlogï¼‰ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>ä¸»åº“åœ¨äº‹åŠ¡æäº¤æ—¶è®°å½•æ•°æ®å˜æ›´åˆ°Binlogã€‚</li><li>ä»åº“è¯»å–ä¸»åº“çš„Binlogå¹¶å†™å…¥ä¸­ç»§æ—¥å¿—ï¼ˆRelay Logã€‚</li><li>ä»åº“é‡åšä¸­ç»§æ—¥å¿—ä¸­çš„äº‹ä»¶ï¼Œåæ˜ åˆ°è‡ªå·±çš„æ•°æ®ä¸­ã€‚</li></ol><h3 id="ä½ ä»¬é¡¹ç›®ç”¨è¿‡MySQLçš„-åˆ†åº“åˆ†è¡¨-å—ï¼Ÿ"><a href="#ä½ ä»¬é¡¹ç›®ç”¨è¿‡MySQLçš„-åˆ†åº“åˆ†è¡¨-å—ï¼Ÿ" class="headerlink" title="ä½ ä»¬é¡¹ç›®ç”¨è¿‡MySQLçš„ åˆ†åº“åˆ†è¡¨ å—ï¼Ÿ"></a><strong>ä½ ä»¬é¡¹ç›®ç”¨è¿‡MySQLçš„</strong> <strong>åˆ†åº“åˆ†è¡¨</strong> <strong>å—ï¼Ÿ</strong></h3><p>æˆ‘ä»¬é‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œæ¯ä¸ªå¾®æœåŠ¡å¯¹åº”ä¸€ä¸ªæ•°æ®åº“ï¼Œæ˜¯æ ¹æ®ä¸šåŠ¡è¿›è¡Œæ‹†åˆ†çš„ï¼Œè¿™ä¸ªå…¶å®å°±æ˜¯å‚ç›´æ‹†åˆ†ã€‚</p><h3 id="é‚£ä½ ä¹‹å‰ä½¿ç”¨è¿‡-æ°´å¹³åˆ†åº“-å—ï¼Ÿ"><a href="#é‚£ä½ ä¹‹å‰ä½¿ç”¨è¿‡-æ°´å¹³åˆ†åº“-å—ï¼Ÿ" class="headerlink" title="é‚£ä½ ä¹‹å‰ä½¿ç”¨è¿‡ æ°´å¹³åˆ†åº“ å—ï¼Ÿ"></a><strong>é‚£ä½ ä¹‹å‰ä½¿ç”¨è¿‡</strong> <strong>æ°´å¹³åˆ†åº“</strong> <strong>å—ï¼Ÿ</strong></h3><p>ä½¿ç”¨è¿‡ã€‚å½“æ—¶ä¸šåŠ¡å‘å±•è¿…é€Ÿï¼ŒæŸä¸ªè¡¨æ•°æ®é‡è¶…è¿‡1000ä¸‡ï¼Œå•åº“ä¼˜åŒ–åæ€§èƒ½ä»ç„¶å¾ˆæ…¢ï¼Œå› æ­¤é‡‡ç”¨äº†æ°´å¹³åˆ†åº“ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆéƒ¨ç½²äº†3å°æœåŠ¡å™¨å’Œ3ä¸ªæ•°æ®åº“ï¼Œä½¿ç”¨<code>mycat</code>è¿›è¡Œæ•°æ®åˆ†ç‰‡ã€‚</p><p>æ—§æ•°æ®ä¹ŸæŒ‰ç…§IDå–æ¨¡è§„åˆ™è¿ç§»åˆ°äº†å„ä¸ªæ•°æ®åº“ä¸­ï¼Œè¿™æ ·å„ä¸ªæ•°æ®åº“å¯ä»¥åˆ†æ‘Šå­˜å‚¨å’Œè¯»å–å‹åŠ›ï¼Œè§£å†³äº†æ€§èƒ½é—®é¢˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ffmpegåˆå¹¶è§†é¢‘å’ŒéŸ³é¢‘</title>
      <link href="/2025/07/08/ffmpeg-he-bing-shi-pin-he-yin-pin/"/>
      <url>/2025/07/08/ffmpeg-he-bing-shi-pin-he-yin-pin/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨ffmpegåˆå¹¶è§†é¢‘å’ŒéŸ³é¢‘"><a href="#ä½¿ç”¨ffmpegåˆå¹¶è§†é¢‘å’ŒéŸ³é¢‘" class="headerlink" title="ä½¿ç”¨ffmpegåˆå¹¶è§†é¢‘å’ŒéŸ³é¢‘"></a><strong>ä½¿ç”¨ffmpegåˆå¹¶è§†é¢‘å’ŒéŸ³é¢‘</strong></h1><h2 id="1ã€å®‰è£…å·¥å…·å¹¶é…ç½®ç¯å¢ƒ"><a href="#1ã€å®‰è£…å·¥å…·å¹¶é…ç½®ç¯å¢ƒ" class="headerlink" title="1ã€å®‰è£…å·¥å…·å¹¶é…ç½®ç¯å¢ƒ"></a>1ã€å®‰è£…å·¥å…·å¹¶é…ç½®ç¯å¢ƒ</h2><p>FFmpegæ˜¯ä¸€å¥—å¯ä»¥ç”¨æ¥è®°å½•ã€è½¬æ¢æ•°å­—éŸ³é¢‘ã€è§†é¢‘ï¼Œå¹¶èƒ½å°†å…¶è½¬åŒ–ä¸ºæµçš„å¼€æºè®¡ç®—æœºç¨‹åºã€‚é‡‡ç”¨LGPLæˆ–GPLè®¸å¯è¯ã€‚å®ƒæä¾›äº†å½•åˆ¶ã€è½¬æ¢ä»¥åŠæµåŒ–éŸ³è§†é¢‘çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚å®ƒåŒ…å«äº†éå¸¸å…ˆè¿›çš„éŸ³é¢‘/è§†é¢‘ç¼–è§£ç åº“libavcodecï¼Œä¸ºäº†ä¿è¯é«˜å¯ç§»æ¤æ€§å’Œç¼–è§£ç è´¨é‡ï¼Œlibavcodecé‡Œå¾ˆå¤šcodeéƒ½æ˜¯ä»å¤´å¼€å‘çš„ã€‚â€”â€”æ‘˜è‡ªç™¾åº¦ç™¾ç§‘ï¼šffmpeg</p><h3 id="å®‰è£…ffmpeg"><a href="#å®‰è£…ffmpeg" class="headerlink" title="å®‰è£…ffmpeg"></a><strong>å®‰è£…ffmpeg</strong></h3><p>æ‰“å¼€ffmpegçš„å®˜ç½‘ <a href="https://ffmpeg.org/">https://ffmpeg.org/</a> ï¼Œç‚¹å‡»Downloadè·³è½¬åˆ°ä¸‹è½½é¡µ</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-73f1ad5a4d1d6d7ed04fa099b2fe89bb-ebf9619725e439f5e85ab9c66f0f74e236849048.png"></p><p>é€‰æ‹©Windowså¹¶ç‚¹å‡»Windows builds by BtbN è·³è½¬åˆ°Github</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/08-9e4d72650a08736a0eb4f49b44af7f2f-78bbeff9c5b7b8a68c30d593f9429f8136849048.png"></p><p>åœ¨GitHubé¡µé¢ç‚¹å‡»ffmpeg-master-latest-win64-gpl-shared.zip å¼€å§‹ä¸‹è½½ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/08-ec9fbc4c7dbe1f15f6c4f407278968e2-32f98292a7a2e1d33328826596b192b736849048.png"></p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a><strong>å®‰è£…</strong></h3><p>å°†ä¸‹è½½çš„å‹ç¼©åŒ…è§£å‹åˆ°æ–‡ä»¶å¤¹ä¸­ï¼Œæ­¤å¤„ä»¥D:\ffmpegä¸ºä¾‹ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/08-d6a3561369e437fd06bcd9d294591b03-228ef93c76ba6380b3c1d49db31773e136849048.png"></p><h3 id="è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="è®¾ç½®ç¯å¢ƒå˜é‡"></a>è®¾ç½®ç¯å¢ƒå˜é‡</h3><p>åœ¨å¼¹å‡ºçš„é¡µé¢é‡Œä¾æ¬¡ç‚¹å‡»ç¯å¢ƒå˜é‡â†’ç³»ç»Ÿå˜é‡/Pathâ†’æ–°å»ºï¼Œåœ¨æ–°å»ºé¡¹ä¸­å¡«å…¥D:\ffmpeg\bin ï¼ˆæ­¤å¤„ä¸ºä¸Šæ–‡ä¸­æ”¾ç½®ffmpegæ–‡ä»¶çš„ä½ç½®ï¼‰ï¼Œç„¶åä¾æ¬¡ç‚¹å‡»ç¡®è®¤ä»¥ä¿å­˜ä¿®æ”¹ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/08-135fe0d548fac63adb22e23abbccd1d0-fd23b5f15775bb4cac3ef49631a6c66536849048.png"></p><h3 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><p>æŒ‰ä¸‹Winé”®+Rå¹¶è¾“å…¥cmdï¼Œè°ƒå‡ºå‘½ä»¤è¡Œçª—å£</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/08-206ea86c1d1de3733fa365a6df324a7e-553f7f2e4f5cdb5bc252e4d7d7b2c76736849048.png-804w.webp"></p><p>è¾“å…¥ ffmpeg -versionï¼Œå¦‚æœæ˜¾ç¤ºå¦‚ä¸‹ç•Œé¢è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/08-1695f61cc1cd493f0b5e2b9112cbcd9a-a46dc5849e5897a05a53c90cb197265236849048.png-1192w.webp"></p><p>æ˜¾ç¤ºå¦‚ä¸‹å†…å®¹åˆ™ä¸ºå®‰è£…å¤±è´¥ã€‚è¯·é‡å¯cmdæˆ–æ£€æŸ¥ä¸Šè¿°æ­¥éª¤æ˜¯å¦å…¨éƒ¨æ­£ç¡®è¿›è¡Œã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/08-3bcb42cb662b906485562c5a366ba8aa-86abba4ab8c6f8281d90181a88574a5d36849048.png-1192w.webp"></p><h2 id="2ã€åˆå¹¶"><a href="#2ã€åˆå¹¶" class="headerlink" title="2ã€åˆå¹¶"></a>2ã€åˆå¹¶</h2><p>å°†éœ€è¦åˆå¹¶çš„éŸ³è§†é¢‘æ–‡ä»¶æ”¾å…¥åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶é‡å‘½åä¸º1.mp4å’Œ2.mp4ï¼ˆ1ä¸ºè§†é¢‘ï¼Œ2ä¸ºéŸ³é¢‘ï¼‰</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/08-f034d4387044a2d4d29590d73c246772-9a563bdf10e625b81631ea99beaaaa2836849048.png-1192w.webp"></p><p>åœ¨æ–‡ä»¶å¤¹ä¸­æ–°å»ºbatæ–‡ä»¶ï¼Œå¹¶è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">@echo offffmpeg <span class="token parameter variable">-i</span> <span class="token number">1</span>.mp4 <span class="token parameter variable">-i</span> <span class="token number">2</span>.mp4  <span class="token parameter variable">-vcodec</span> copy <span class="token parameter variable">-acodec</span> copy output.mp4pause <span class="token operator">&amp;</span> <span class="token builtin class-name">exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="å¼€å§‹å¤„ç†"><a href="#å¼€å§‹å¤„ç†" class="headerlink" title="å¼€å§‹å¤„ç†"></a><strong>å¼€å§‹å¤„ç†</strong></h3><p>åŒå‡»è¿è¡Œ.batæ–‡ä»¶ï¼Œå°†å¼¹å‡ºå‘½ä»¤è¡Œçª—å£å¹¶è‡ªåŠ¨åˆå¹¶éŸ³è§†é¢‘æ–‡ä»¶ã€‚å¾…å¤„ç†å®Œæˆåå°†ç”Ÿæˆåä¸ºoutput.mp4çš„æ–‡ä»¶</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/08-afff57315e1c325b35d732d923770bbf-b035c815ffec0fbc49debc088a84108936849048.png-1192w.webp"></p><h2 id="3ã€ç½‘ç›˜ä¸‹è½½"><a href="#3ã€ç½‘ç›˜ä¸‹è½½" class="headerlink" title="3ã€ç½‘ç›˜ä¸‹è½½"></a><strong>3ã€ç½‘ç›˜ä¸‹è½½</strong></h2><p>é€šè¿‡ç½‘ç›˜åˆ†äº«çš„æ–‡ä»¶ï¼šffmpeg-master-latest-win64-gpl-shared.zip<br>é“¾æ¥: <a href="https://pan.baidu.com/s/1J8MbsHps8emeua0oF1B3pw?pwd=6666">https://pan.baidu.com/s/1J8MbsHps8emeua0oF1B3pw?pwd=6666</a> æå–ç : 6666</p>]]></content>
      
      
      
        <tags>
            
            <tag> ffmpeg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jmeterå¿«é€Ÿå…¥é—¨</title>
      <link href="/2025/07/07/jmeter-kuai-su-ru-men/"/>
      <url>/2025/07/07/jmeter-kuai-su-ru-men/</url>
      
        <content type="html"><![CDATA[<h1 id="Jmeterå¿«é€Ÿå…¥é—¨"><a href="#Jmeterå¿«é€Ÿå…¥é—¨" class="headerlink" title="Jmeterå¿«é€Ÿå…¥é—¨"></a>Jmeterå¿«é€Ÿå…¥é—¨</h1><h2 id="1-å®‰è£…Jmeter"><a href="#1-å®‰è£…Jmeter" class="headerlink" title="1.å®‰è£…Jmeter"></a>1.å®‰è£…Jmeter</h2><p>Jmeterä¾èµ–äºJDKï¼Œæ‰€ä»¥å¿…é¡»ç¡®ä¿å½“å‰è®¡ç®—æœºä¸Šå·²ç»å®‰è£…äº†JDKï¼Œå¹¶ä¸”é…ç½®äº†ç¯å¢ƒå˜é‡ã€‚</p><h3 id="1-1-ä¸‹è½½"><a href="#1-1-ä¸‹è½½" class="headerlink" title="1.1.ä¸‹è½½"></a>1.1.ä¸‹è½½</h3><p>å¯ä»¥Apache Jmeterå®˜ç½‘ä¸‹è½½ï¼Œåœ°å€ï¼š<a href="http://jmeter.apache.org/download_jmeter.cgi">http://jmeter.apache.org/download_jmeter.cgi</a></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-522e6b0f1907d8b356461fd038e4b820-image-20210715193149837.png"></p><p>å®‰è£…åŒ…ï¼š<br>é€šè¿‡ç½‘ç›˜åˆ†äº«çš„æ–‡ä»¶ï¼šapache-jmeter-5.4.1.zip<br>é“¾æ¥: <a href="https://pan.baidu.com/s/1pMDDR-dEGTa6l3oDTkNiug?pwd=6666">https://pan.baidu.com/s/1pMDDR-dEGTa6l3oDTkNiug?pwd=6666</a> æå–ç : 6666</p><h3 id="1-2-è§£å‹"><a href="#1-2-è§£å‹" class="headerlink" title="1.2.è§£å‹"></a>1.2.è§£å‹</h3><p>å› ä¸ºä¸‹è½½çš„æ˜¯zipåŒ…ï¼Œè§£å‹ç¼©å³å¯ä½¿ç”¨ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-2162365c43750fbf9f6d03ebc205379e-image-20210715193334367.png"></p><p>å…¶ä¸­çš„binç›®å½•å°±æ˜¯æ‰§è¡Œçš„è„šæœ¬ï¼Œå…¶ä¸­åŒ…å«å¯åŠ¨è„šæœ¬ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-b0ff6e5ae43b539e3c3bd8276b78da14-image-20210715193414601.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-3e5c49067b2d651e1786d7e21fb035a0-image-20250707224200368.png"></p><h3 id="1-3-è¿è¡Œ"><a href="#1-3-è¿è¡Œ" class="headerlink" title="1.3.è¿è¡Œ"></a>1.3.è¿è¡Œ</h3><p>åŒå‡»å³å¯è¿è¡Œï¼Œä½†æ˜¯æœ‰ä¸¤ç‚¹æ³¨æ„ï¼š</p><ul><li>å¯åŠ¨é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œè¦è€å¿ƒç­‰å¾…</li><li>å¯åŠ¨åé»‘çª—å£ä¸èƒ½å…³é—­ï¼Œå¦åˆ™Jmeterä¹Ÿè·Ÿç€å…³é—­äº†</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-fdd5c16512a598723ddd483914cfffec-image-20210715193730096.png"></p><h2 id="2-å¿«é€Ÿå…¥é—¨"><a href="#2-å¿«é€Ÿå…¥é—¨" class="headerlink" title="2.å¿«é€Ÿå…¥é—¨"></a>2.å¿«é€Ÿå…¥é—¨</h2><h3 id="2-1-è®¾ç½®ä¸­æ–‡è¯­è¨€"><a href="#2-1-è®¾ç½®ä¸­æ–‡è¯­è¨€" class="headerlink" title="2.1.è®¾ç½®ä¸­æ–‡è¯­è¨€"></a>2.1.è®¾ç½®ä¸­æ–‡è¯­è¨€</h3><p>é»˜è®¤Jmeterçš„è¯­è¨€æ˜¯è‹±æ–‡ï¼Œéœ€è¦è®¾ç½®ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-eeb336668e13843084326a5d6686fa89-image-20210715193838719.png"></p><p>æ•ˆæœï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-7bded5c35f5cce85ffdc8c8ed5e4dab4-image-20210715193914039.png"></p><blockquote><p><strong>æ³¨æ„</strong>ï¼šä¸Šé¢çš„é…ç½®åªèƒ½ä¿è¯æœ¬æ¬¡è¿è¡Œæ˜¯ä¸­æ–‡ï¼Œå¦‚æœè¦æ°¸ä¹…ä¸­æ–‡ï¼Œéœ€è¦ä¿®æ”¹Jmeterçš„é…ç½®æ–‡ä»¶</p></blockquote><p>æ‰“å¼€jmeteræ–‡ä»¶å¤¹ï¼Œåœ¨binç›®å½•ä¸­æ‰¾åˆ° <strong>jmeter.properties</strong>ï¼Œæ·»åŠ ä¸‹é¢é…ç½®ï¼š</p><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">language</span><span class="token punctuation">=</span><span class="token value attr-value">zh_CN</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-f0653c641c8e646d7ee738f6fb2c64f0-image-20210715194137982.png"></p><blockquote><p>æ³¨æ„ï¼šå‰é¢ä¸è¦å‡ºç°#ï¼Œ#ä»£è¡¨æ³¨é‡Šï¼Œå¦å¤–è¿™é‡Œæ˜¯ä¸‹åˆ’çº¿ï¼Œä¸æ˜¯ä¸­åˆ’çº¿</p></blockquote><h3 id="2-2-åŸºæœ¬ç”¨æ³•"><a href="#2-2-åŸºæœ¬ç”¨æ³•" class="headerlink" title="2.2.åŸºæœ¬ç”¨æ³•"></a>2.2.åŸºæœ¬ç”¨æ³•</h3><p>åœ¨æµ‹è¯•è®¡åˆ’ä¸Šç‚¹é¼ æ ‡å³é”®ï¼Œé€‰æ‹©æ·»åŠ  &gt; çº¿ç¨‹ï¼ˆç”¨æˆ·ï¼‰ &gt; çº¿ç¨‹ç»„ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-185db03012b7760ddc3ac74d90295867-image-20210715194413178.png"></p><p>åœ¨æ–°å¢çš„çº¿ç¨‹ç»„ä¸­ï¼Œå¡«å†™çº¿ç¨‹ä¿¡æ¯ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-a2ebbc031f5311bfd568d29027cb9864-image-20210715195053807.png"></p><p>ç»™çº¿ç¨‹ç»„ç‚¹é¼ æ ‡å³é”®ï¼Œæ·»åŠ httpå–æ ·å™¨ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-1d44c1629856cc80256892f4515d8944-image-20210715195144130.png"></p><p>ç¼–å†™å–æ ·å™¨å†…å®¹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-02ff244758204928dd1b242bb8eaad91-image-20210715195410764.png"></p><p>æ·»åŠ ç›‘å¬æŠ¥å‘Šï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-bdddd1b3f741d095c33156ce493724fc-image-20210715195844978.png"></p><p>æ·»åŠ ç›‘å¬ç»“æœæ ‘ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-4402009c7857a0e6c0ce374fea624368-image-20210715200155537.png"></p><p>æ±‡æ€»æŠ¥å‘Šç»“æœï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-bbd51dc0b633c78b98122676b70e2a51-image-20210715200243194.png"></p><p>ç»“æœæ ‘ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/07/07-e0d9335381825edf88301d051f5b1e2b-image-20210715200336526.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‹æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¼“å­˜SpringCatch</title>
      <link href="/2025/03/27/huan-cun-springcatch/"/>
      <url>/2025/03/27/huan-cun-springcatch/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¼“å­˜SpringCatch"><a href="#ç¼“å­˜SpringCatch" class="headerlink" title="ç¼“å­˜SpringCatch"></a>ç¼“å­˜SpringCatch</h1><h2 id="2-1-Spring-Cache"><a href="#2-1-Spring-Cache" class="headerlink" title="2.1 Spring Cache"></a>2.1 Spring Cache</h2><h3 id="2-1-1-ä»‹ç»"><a href="#2-1-1-ä»‹ç»" class="headerlink" title="2.1.1 ä»‹ç»"></a>2.1.1 ä»‹ç»</h3><p>Spring Cache æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå®ç°äº†åŸºäºæ³¨è§£çš„ç¼“å­˜åŠŸèƒ½ï¼Œåªéœ€è¦ç®€å•åœ°åŠ ä¸€ä¸ªæ³¨è§£ï¼Œå°±èƒ½å®ç°ç¼“å­˜åŠŸèƒ½ã€‚</p><p>Spring Cache æä¾›äº†ä¸€å±‚æŠ½è±¡ï¼Œåº•å±‚å¯ä»¥åˆ‡æ¢ä¸åŒçš„ç¼“å­˜å®ç°ï¼Œä¾‹å¦‚ï¼š</p><ul><li>EHCache</li><li>Caffeine</li><li>Redis(å¸¸ç”¨)</li></ul><p><strong>èµ·æ­¥ä¾èµ–ï¼š</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-cache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>                      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-1-2-å¸¸ç”¨æ³¨è§£"><a href="#2-1-2-å¸¸ç”¨æ³¨è§£" class="headerlink" title="2.1.2 å¸¸ç”¨æ³¨è§£"></a>2.1.2 å¸¸ç”¨æ³¨è§£</h3><p>åœ¨SpringCacheä¸­æä¾›äº†å¾ˆå¤šç¼“å­˜æ“ä½œçš„æ³¨è§£ï¼Œå¸¸è§çš„æ˜¯ä»¥ä¸‹çš„å‡ ä¸ªï¼š</p><table><thead><tr><th><strong>æ³¨è§£</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>@EnableCaching</td><td>å¼€å¯ç¼“å­˜æ³¨è§£åŠŸèƒ½ï¼Œé€šå¸¸åŠ åœ¨å¯åŠ¨ç±»ä¸Š</td></tr><tr><td>@Cacheable</td><td>åœ¨æ–¹æ³•æ‰§è¡Œå‰å…ˆæŸ¥è¯¢ç¼“å­˜ä¸­æ˜¯å¦æœ‰æ•°æ®ï¼Œå¦‚æœæœ‰æ•°æ®ï¼Œåˆ™ç›´æ¥è¿”å›ç¼“å­˜æ•°æ®ï¼›å¦‚æœæ²¡æœ‰ç¼“å­˜æ•°æ®ï¼Œè°ƒç”¨æ–¹æ³•å¹¶å°†æ–¹æ³•è¿”å›å€¼æ”¾åˆ°ç¼“å­˜ä¸­</td></tr><tr><td>@CachePut</td><td>å°†æ–¹æ³•çš„è¿”å›å€¼æ”¾åˆ°ç¼“å­˜ä¸­</td></tr><tr><td>@CacheEvict</td><td>å°†ä¸€æ¡æˆ–å¤šæ¡æ•°æ®ä»ç¼“å­˜ä¸­åˆ é™¤</td></tr></tbody></table><p>åœ¨spring booté¡¹ç›®ä¸­ï¼Œä½¿ç”¨ç¼“å­˜æŠ€æœ¯åªéœ€åœ¨é¡¹ç›®ä¸­å¯¼å…¥ç›¸å…³ç¼“å­˜æŠ€æœ¯çš„ä¾èµ–åŒ…ï¼Œå¹¶åœ¨å¯åŠ¨ç±»ä¸Šä½¿ç”¨@EnableCachingå¼€å¯ç¼“å­˜æ”¯æŒå³å¯ã€‚</p><p>ä¾‹å¦‚ï¼Œä½¿ç”¨Redisä½œä¸ºç¼“å­˜æŠ€æœ¯ï¼Œåªéœ€è¦å¯¼å…¥Spring data Redisçš„mavenåæ ‡å³å¯ã€‚</p><h3 id="2-1-3-å…¥é—¨æ¡ˆä¾‹"><a href="#2-1-3-å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="2.1.3 å…¥é—¨æ¡ˆä¾‹"></a>2.1.3 å…¥é—¨æ¡ˆä¾‹</h3><p><strong>1). ç¯å¢ƒå‡†å¤‡</strong></p><p>**å¯¼å…¥åŸºç¡€å·¥ç¨‹:**åº•å±‚å·²ä½¿ç”¨Redisç¼“å­˜å®ç°</p><p>åŸºç¡€ç¯å¢ƒçš„ä»£ç ï¼Œåœ¨æˆ‘ä»¬ä»Šå¤©çš„èµ„æ–™ä¸­å·²ç»å‡†å¤‡å¥½äº†ï¼Œ å¤§å®¶åªéœ€è¦å°†è¿™ä¸ªå·¥ç¨‹å¯¼å…¥è¿›æ¥å°±å¯ä»¥äº†ã€‚å¯¼å…¥è¿›æ¥çš„å·¥ç¨‹ç»“æ„å¦‚ä¸‹ï¼š </p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/25-5892ce7b466eb03c32301896978d5b9a-image-20221210183942040.png" alt="image-20221210183942040" style="zoom:50%;"> <p><strong>æ•°æ®åº“å‡†å¤‡:</strong></p><p>åˆ›å»ºåä¸ºspring_cache_demoæ•°æ®åº“ï¼Œå°†springcachedemo.sqlè„šæœ¬ç›´æ¥å¯¼å…¥æ•°æ®åº“ä¸­ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/25-f5824b97fb9605220cee5daa3e0eebe8-image-20221210184346304.png" alt="image-20221210184346304" style="zoom:80%;"> <p><strong>å¼•å¯¼ç±»ä¸ŠåŠ @EnableCaching:</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableCaching</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token annotation punctuation">@EnableCaching</span><span class="token comment">//å¼€å¯ç¼“å­˜æ³¨è§£åŠŸèƒ½</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CacheDemoApplication</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">CacheDemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"é¡¹ç›®å¯åŠ¨æˆåŠŸ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>2). @CachePutæ³¨è§£</strong></p><p><strong>@CachePut è¯´æ˜ï¼š</strong> </p><p>â€‹ä½œç”¨: å°†æ–¹æ³•è¿”å›å€¼ï¼Œæ”¾å…¥ç¼“å­˜</p><p>â€‹value: ç¼“å­˜çš„åç§°, æ¯ä¸ªç¼“å­˜åç§°ä¸‹é¢å¯ä»¥æœ‰å¾ˆå¤škey</p><p>â€‹key: ç¼“å­˜çš„key  â€”â€”â€”-&gt; æ”¯æŒSpringçš„è¡¨è¾¾å¼è¯­è¨€SPELè¯­æ³•</p><p><strong>åœ¨saveæ–¹æ³•ä¸ŠåŠ æ³¨è§£@CachePut</strong></p><p>å½“å‰UserControllerçš„saveæ–¹æ³•æ˜¯ç”¨æ¥ä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨è¯¥ç”¨æˆ·ä¿¡æ¯ä¿å­˜åˆ°æ•°æ®åº“çš„åŒæ—¶ï¼Œä¹Ÿå¾€ç¼“å­˜ä¸­ç¼“å­˜ä¸€ä»½æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨saveæ–¹æ³•ä¸ŠåŠ ä¸Šæ³¨è§£ @CachePutï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*** CachePutï¼šå°†æ–¹æ³•è¿”å›å€¼æ”¾å…¥ç¼“å­˜* valueï¼šç¼“å­˜çš„åç§°ï¼Œæ¯ä¸ªç¼“å­˜åç§°ä¸‹é¢å¯ä»¥æœ‰å¤šä¸ªkey* keyï¼šç¼“å­˜çš„key*/</span><span class="token annotation punctuation">@PostMapping</span>   <span class="token annotation punctuation">@CachePut</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"userCache"</span><span class="token punctuation">,</span> key <span class="token operator">=</span> <span class="token string">"#user.id"</span><span class="token punctuation">)</span><span class="token comment">//keyçš„ç”Ÿæˆï¼šuserCache::1</span>   <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{</span>       userMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> user<span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è¯´æ˜ï¼š</strong>keyçš„å†™æ³•å¦‚ä¸‹</p><p>#user.id : #useræŒ‡çš„æ˜¯æ–¹æ³•å½¢å‚çš„åç§°, idæŒ‡çš„æ˜¯userçš„idå±æ€§ , ä¹Ÿå°±æ˜¯ä½¿ç”¨userçš„idå±æ€§ä½œä¸ºkey ;</p><p>#result.id : #resultä»£è¡¨æ–¹æ³•è¿”å›å€¼ï¼Œè¯¥è¡¨è¾¾å¼ ä»£è¡¨ä»¥è¿”å›å¯¹è±¡çš„idå±æ€§ä½œä¸ºkey ï¼›</p><p>#p0.idï¼š#p0æŒ‡çš„æ˜¯æ–¹æ³•ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒidæŒ‡çš„æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°çš„idå±æ€§,ä¹Ÿå°±æ˜¯ä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°çš„idå±æ€§ä½œä¸ºkey ;</p><p>#a0.idï¼š#a0æŒ‡çš„æ˜¯æ–¹æ³•ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒidæŒ‡çš„æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°çš„idå±æ€§,ä¹Ÿå°±æ˜¯ä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°çš„idå±æ€§ä½œä¸ºkey ;</p><p>#root.args[0].id:#root.args[0]æŒ‡çš„æ˜¯æ–¹æ³•ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒidæŒ‡çš„æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°çš„idå±æ€§,ä¹Ÿå°±æ˜¯ä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°</p><p>çš„idå±æ€§ä½œä¸ºkey ;</p><p><strong>å¯åŠ¨æœåŠ¡,é€šè¿‡swaggeræ¥å£æ–‡æ¡£æµ‹è¯•ï¼Œè®¿é—®UserControllerçš„save()æ–¹æ³•</strong></p><p>å› ä¸ºidæ˜¯è‡ªå¢ï¼Œæ‰€ä»¥ä¸éœ€è¦è®¾ç½®idå±æ€§</p> <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/25-a19fa1cd929b6b7a59e23df14ef121e1-image-20221210191702887.png" alt="image-20221210191702887" style="zoom:50%;"> <p><strong>æŸ¥çœ‹userè¡¨ä¸­çš„æ•°æ®</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/25-b2bd19c3c9cdcfd9757c0e7cc13f55b8-image-20221210192325931.png" alt="image-20221210192325931" style="zoom: 67%;"> <p><strong>æŸ¥çœ‹Redisä¸­çš„æ•°æ®</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/25-3a5d452a962684899c7e5f1ba89cdb2d-image-20221210192418204.png" alt="image-20221210192418204" style="zoom:50%;"> <p><strong>3). @Cacheableæ³¨è§£</strong></p><p><strong>@Cacheable è¯´æ˜:</strong></p><p>â€‹ä½œç”¨: åœ¨æ–¹æ³•æ‰§è¡Œå‰ï¼Œspringå…ˆæŸ¥çœ‹ç¼“å­˜ä¸­æ˜¯å¦æœ‰æ•°æ®ï¼Œå¦‚æœæœ‰æ•°æ®ï¼Œåˆ™ç›´æ¥è¿”å›ç¼“å­˜æ•°æ®ï¼›è‹¥æ²¡æœ‰æ•°æ®ï¼Œè°ƒç”¨æ–¹æ³•å¹¶å°†æ–¹æ³•è¿”å›å€¼æ”¾åˆ°ç¼“å­˜ä¸­</p><p>â€‹value: ç¼“å­˜çš„åç§°ï¼Œæ¯ä¸ªç¼“å­˜åç§°ä¸‹é¢å¯ä»¥æœ‰å¤šä¸ªkey</p><p>â€‹key: ç¼“å­˜çš„key  â€”â€”â€”-&gt; æ”¯æŒSpringçš„è¡¨è¾¾å¼è¯­è¨€SPELè¯­æ³•</p><p> <strong>åœ¨getByIdä¸ŠåŠ æ³¨è§£@Cacheable</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*** Cacheableï¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰springå…ˆæŸ¥çœ‹ç¼“å­˜ä¸­æ˜¯å¦æœ‰æ•°æ®ï¼Œå¦‚æœæœ‰æ•°æ®ï¼Œåˆ™ç›´æ¥è¿”å›ç¼“å­˜æ•°æ®ï¼›è‹¥æ²¡æœ‰æ•°æ®ï¼Œ  *è°ƒç”¨æ–¹æ³•å¹¶å°†æ–¹æ³•è¿”å›å€¼æ”¾åˆ°ç¼“å­˜ä¸­* valueï¼šç¼“å­˜çš„åç§°ï¼Œæ¯ä¸ªç¼“å­˜åç§°ä¸‹é¢å¯ä»¥æœ‰å¤šä¸ªkey* keyï¼šç¼“å­˜çš„key*/</span><span class="token annotation punctuation">@GetMapping</span>   <span class="token annotation punctuation">@Cacheable</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token string">"userCache"</span><span class="token punctuation">,</span>key<span class="token operator">=</span><span class="token string">"#id"</span><span class="token punctuation">)</span>   <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token class-name">User</span> user <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> user<span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>é‡å¯æœåŠ¡,é€šè¿‡swaggeræ¥å£æ–‡æ¡£æµ‹è¯•ï¼Œè®¿é—®UserControllerçš„getById()æ–¹æ³•</strong></p><p>ç¬¬ä¸€æ¬¡è®¿é—®ï¼Œä¼šè¯·æ±‚æˆ‘ä»¬controllerçš„æ–¹æ³•ï¼ŒæŸ¥è¯¢æ•°æ®åº“ã€‚åé¢å†æŸ¥è¯¢ç›¸åŒçš„idï¼Œå°±ç›´æ¥ä»Redisä¸­æŸ¥è¯¢æ•°æ®ï¼Œä¸ç”¨å†æŸ¥è¯¢æ•°æ®åº“äº†ï¼Œå°±è¯´æ˜ç¼“å­˜ç”Ÿæ•ˆäº†ã€‚</p><p>æå‰åœ¨redisä¸­æ‰‹åŠ¨åˆ é™¤æ‰id=1çš„ç”¨æˆ·æ•°æ®</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/25-a394c5bb46b22004bfd007106c63e4e1-image-20221210193834150.png" alt="image-20221210193834150" style="zoom:50%;"> <p><strong>æŸ¥çœ‹æ§åˆ¶å°sqlè¯­å¥ï¼š</strong>è¯´æ˜ä»æ•°æ®åº“æŸ¥è¯¢çš„ç”¨æˆ·æ•°æ®</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/25-fee9ae65f127656efa601ca90c63fdc4-image-20221210193948896.png" alt="image-20221210193948896" style="zoom: 67%;"> <p><strong>æŸ¥çœ‹Redisä¸­çš„ç¼“å­˜æ•°æ®ï¼š</strong>è¯´æ˜å·²æˆåŠŸç¼“å­˜</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/25-dc66e78f4ffad7d25cdd2ac243a67e33-image-20221210194112334.png" alt="image-20221210194112334" style="zoom:50%;"> <p>å†æ¬¡æŸ¥è¯¢ç›¸åŒidçš„æ•°æ®æ—¶ï¼Œç›´æ¥ä»redisä¸­ç›´æ¥è·å–ï¼Œä¸å†æŸ¥è¯¢æ•°æ®åº“ã€‚</p><p><strong>4). @CacheEvictæ³¨è§£</strong></p><p><strong>@CacheEvict è¯´æ˜ï¼š</strong> </p><p>â€‹ä½œç”¨: æ¸…ç†æŒ‡å®šç¼“å­˜</p><p>â€‹value: ç¼“å­˜çš„åç§°ï¼Œæ¯ä¸ªç¼“å­˜åç§°ä¸‹é¢å¯ä»¥æœ‰å¤šä¸ªkey</p><p>â€‹key: ç¼“å­˜çš„key  â€”â€”â€”-&gt; æ”¯æŒSpringçš„è¡¨è¾¾å¼è¯­è¨€SPELè¯­æ³•</p><p><strong>åœ¨ delete æ–¹æ³•ä¸ŠåŠ æ³¨è§£@CacheEvict</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@DeleteMapping</span>   <span class="token annotation punctuation">@CacheEvict</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token string">"userCache"</span><span class="token punctuation">,</span>key <span class="token operator">=</span> <span class="token string">"#id"</span><span class="token punctuation">)</span><span class="token comment">//åˆ é™¤æŸä¸ªkeyå¯¹åº”çš„ç¼“å­˜æ•°æ®</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>       userMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">"/delAll"</span><span class="token punctuation">)</span>   <span class="token annotation punctuation">@CacheEvict</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token string">"userCache"</span><span class="token punctuation">,</span>allEntries <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token comment">//åˆ é™¤userCacheä¸‹æ‰€æœ‰çš„ç¼“å­˜æ•°æ®</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       userMapper<span class="token punctuation">.</span><span class="token function">deleteAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>é‡å¯æœåŠ¡,é€šè¿‡swaggeræ¥å£æ–‡æ¡£æµ‹è¯•ï¼Œè®¿é—®UserControllerçš„deleteAll()æ–¹æ³•</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/25-a81a0f15ddf3ad1324ff540567de3e21-image-20221210195254874.png" alt="image-20221210195254874" style="zoom:50%;"> <p><strong>æŸ¥çœ‹userè¡¨ï¼š</strong>æ•°æ®æ¸…ç©º</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/25-b579e853e46ff504bc8c7ab6ef7da785-image-20221210195332101.png" alt="image-20221210195332101" style="zoom:80%;"> <p><strong>æŸ¥è¯¢Redisç¼“å­˜æ•°æ®</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/25-5b2e84d63e7c2695a803a9c963fcb8ec-image-20221210195500014.png" alt="image-20221210195500014" style="zoom:50%;"> <h2 id="2-2-å®ç°æ€è·¯"><a href="#2-2-å®ç°æ€è·¯" class="headerlink" title="2.2 å®ç°æ€è·¯"></a>2.2 å®ç°æ€è·¯</h2><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><p>1). å¯¼å…¥Spring Cacheå’ŒRedisç›¸å…³mavenåæ ‡</p><p>2). åœ¨å¯åŠ¨ç±»ä¸ŠåŠ å…¥@EnableCachingæ³¨è§£ï¼Œå¼€å¯ç¼“å­˜æ³¨è§£åŠŸèƒ½</p><p>3). åœ¨ç”¨æˆ·ç«¯æ¥å£SetmealControllerçš„ list æ–¹æ³•ä¸ŠåŠ å…¥@Cacheableæ³¨è§£</p><p>4). åœ¨ç®¡ç†ç«¯æ¥å£SetmealControllerçš„ saveã€deleteã€updateã€startOrStopç­‰æ–¹æ³•ä¸ŠåŠ å…¥CacheEvictæ³¨è§£</p><h2 id="2-3-ä»£ç å¼€å‘"><a href="#2-3-ä»£ç å¼€å‘" class="headerlink" title="2.3 ä»£ç å¼€å‘"></a>2.3 ä»£ç å¼€å‘</h2><p>æŒ‰ç…§ä¸Šè¿°å®ç°æ­¥éª¤ï¼š</p><p><strong>1). å¯¼å…¥Spring Cacheå’ŒRedisç›¸å…³mavenåæ ‡(å·²å®ç°)</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-cache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>2). åœ¨å¯åŠ¨ç±»ä¸ŠåŠ å…¥@EnableCachingæ³¨è§£ï¼Œå¼€å¯ç¼“å­˜æ³¨è§£åŠŸèƒ½</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableCaching</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableTransactionManagement</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token annotation punctuation">@EnableTransactionManagement</span> <span class="token comment">//å¼€å¯æ³¨è§£æ–¹å¼çš„äº‹åŠ¡ç®¡ç†</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@EnableCaching</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SkyApplication</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SkyApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"server started"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>3). åœ¨ç”¨æˆ·ç«¯æ¥å£SetmealControllerçš„ list æ–¹æ³•ä¸ŠåŠ å…¥@Cacheableæ³¨è§£</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**    * æ¡ä»¶æŸ¥è¯¢    *    * @param categoryId    * @return    */</span>   <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/list"</span><span class="token punctuation">)</span>   <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"æ ¹æ®åˆ†ç±»idæŸ¥è¯¢å¥—é¤"</span><span class="token punctuation">)</span>   <span class="token annotation punctuation">@Cacheable</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token string">"setmealCache"</span><span class="token punctuation">,</span>key <span class="token operator">=</span> <span class="token string">"#categoryId"</span><span class="token punctuation">)</span> <span class="token comment">//key: setmealCache::100</span>   <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Setmeal</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token class-name">Long</span> categoryId<span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token class-name">Setmeal</span> setmeal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Setmeal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       setmeal<span class="token punctuation">.</span><span class="token function">setCategoryId</span><span class="token punctuation">(</span>categoryId<span class="token punctuation">)</span><span class="token punctuation">;</span>       setmeal<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token class-name">StatusConstant</span><span class="token punctuation">.</span><span class="token constant">ENABLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Setmeal</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> setmealService<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>setmeal<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>4). åœ¨ç®¡ç†ç«¯æ¥å£SetmealControllerçš„ saveã€deleteã€updateã€startOrStopç­‰æ–¹æ³•ä¸ŠåŠ å…¥CacheEvictæ³¨è§£</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**    * æ–°å¢å¥—é¤    *    * @param setmealDTO    * @return    */</span>   <span class="token annotation punctuation">@PostMapping</span>   <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"æ–°å¢å¥—é¤"</span><span class="token punctuation">)</span>   <span class="token annotation punctuation">@CacheEvict</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token string">"setmealCache"</span><span class="token punctuation">,</span>key <span class="token operator">=</span> <span class="token string">"#setmealDTO.categoryId"</span><span class="token punctuation">)</span><span class="token comment">//key: setmealCache::100</span>   <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">SetmealDTO</span> setmealDTO<span class="token punctuation">)</span> <span class="token punctuation">{</span>       setmealService<span class="token punctuation">.</span><span class="token function">saveWithDish</span><span class="token punctuation">(</span>setmealDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token comment">/**    * æ‰¹é‡åˆ é™¤å¥—é¤    *    * @param ids    * @return    */</span>   <span class="token annotation punctuation">@DeleteMapping</span>   <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"æ‰¹é‡åˆ é™¤å¥—é¤"</span><span class="token punctuation">)</span>   <span class="token annotation punctuation">@CacheEvict</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token string">"setmealCache"</span><span class="token punctuation">,</span>allEntries <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>   <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span> <span class="token punctuation">{</span>       setmealService<span class="token punctuation">.</span><span class="token function">deleteBatch</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token comment">/**    * ä¿®æ”¹å¥—é¤    *    * @param setmealDTO    * @return    */</span>   <span class="token annotation punctuation">@PutMapping</span>   <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"ä¿®æ”¹å¥—é¤"</span><span class="token punctuation">)</span>   <span class="token annotation punctuation">@CacheEvict</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token string">"setmealCache"</span><span class="token punctuation">,</span>allEntries <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>   <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">SetmealDTO</span> setmealDTO<span class="token punctuation">)</span> <span class="token punctuation">{</span>       setmealService<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>setmealDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token comment">/**    * å¥—é¤èµ·å”®åœå”®    *    * @param status    * @param id    * @return    */</span>   <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/status/{status}"</span><span class="token punctuation">)</span>   <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"å¥—é¤èµ·å”®åœå”®"</span><span class="token punctuation">)</span>   <span class="token annotation punctuation">@CacheEvict</span><span class="token punctuation">(</span>cacheNames <span class="token operator">=</span> <span class="token string">"setmealCache"</span><span class="token punctuation">,</span>allEntries <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>   <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">startOrStop</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> status<span class="token punctuation">,</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>       setmealService<span class="token punctuation">.</span><span class="token function">startOrStop</span><span class="token punctuation">(</span>status<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-4-åŠŸèƒ½æµ‹è¯•"><a href="#2-4-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="2.4 åŠŸèƒ½æµ‹è¯•"></a>2.4 åŠŸèƒ½æµ‹è¯•</h2><p>é€šè¿‡å‰åç«¯è”è°ƒæ–¹å¼æ¥è¿›è¡Œæµ‹è¯•ï¼ŒåŒæ—¶è§‚å¯Ÿredisä¸­ç¼“å­˜çš„å¥—é¤æ•°æ®ã€‚å’Œ<strong>ç¼“å­˜èœå“</strong>åŠŸèƒ½æµ‹è¯•åŸºæœ¬ä¸€è‡´ï¼Œä¸å†èµ˜è¿°ã€‚</p><h2 id="2-5-ä»£ç æäº¤"><a href="#2-5-ä»£ç æäº¤" class="headerlink" title="2.5 ä»£ç æäº¤"></a>2.5 ä»£ç æäº¤</h2><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/25-3c30b8ec8e71cdb27db4b19678d1c5ba-image-20221210203035708.png" alt="image-20221210203035708" style="zoom:50%;"> <p>åç»­æ­¥éª¤å’Œå…¶å®ƒåŠŸèƒ½ä»£ç æäº¤ä¸€è‡´ï¼Œä¸å†èµ˜è¿°</p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCatch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HttpClietä¸å¾®ä¿¡å°ç¨‹åº</title>
      <link href="/2025/03/22/httpcliet-yu-wei-xin-xiao-cheng-xu/"/>
      <url>/2025/03/22/httpcliet-yu-wei-xin-xiao-cheng-xu/</url>
      
        <content type="html"><![CDATA[<h2 id="è¯¾ç¨‹å†…å®¹"><a href="#è¯¾ç¨‹å†…å®¹" class="headerlink" title="è¯¾ç¨‹å†…å®¹"></a>è¯¾ç¨‹å†…å®¹</h2><ul><li>HttpClient</li><li>å¾®ä¿¡å°ç¨‹åºå¼€å‘</li><li>å¾®ä¿¡ç™»å½•</li><li>å¯¼å…¥å•†å“æµè§ˆåŠŸèƒ½ä»£ç </li></ul><p>åŠŸèƒ½å®ç°ï¼š<strong>å¾®ä¿¡ç™»å½•</strong>ã€<strong>å•†å“æµè§ˆ</strong></p><p><strong>å¾®ä¿¡ç™»å½•æ•ˆæœå›¾ï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-e7c17081b331def976e82c0326a1130c-image-20221203184545847.png" alt="image-20221203184545847" style="zoom:50%;"> <p><strong>å•†å“æµè§ˆæ•ˆæœå›¾ï¼š</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-eb5eb2f5f7a2c87dfca085901cd26714-image-20221203184623026.png" alt="image-20221203184623026" style="zoom:50%;"> <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-6575acc6aa344457048dc1e6d4759add-image-20221203184638043.png" alt="image-20221203184638043" style="zoom:50%;"> </p><h2 id="1-HttpClient"><a href="#1-HttpClient" class="headerlink" title="1. HttpClient"></a>1. HttpClient</h2><h3 id="1-1-ä»‹ç»"><a href="#1-1-ä»‹ç»" class="headerlink" title="1.1 ä»‹ç»"></a>1.1 ä»‹ç»</h3><p>HttpClient æ˜¯Apache Jakarta Common ä¸‹çš„å­é¡¹ç›®ï¼Œå¯ä»¥ç”¨æ¥æä¾›é«˜æ•ˆçš„ã€æœ€æ–°çš„ã€åŠŸèƒ½ä¸°å¯Œçš„æ”¯æŒ HTTP åè®®çš„å®¢æˆ·ç«¯ç¼–ç¨‹å·¥å…·åŒ…ï¼Œå¹¶ä¸”å®ƒæ”¯æŒ HTTP åè®®æœ€æ–°çš„ç‰ˆæœ¬å’Œå»ºè®®ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-78595d73bc3c0edcb85f431c3fca3b6e-image-20221203185003231.png" alt="image-20221203185003231" style="zoom:50%;"> <p><strong>HttpClientä½œç”¨ï¼š</strong></p><ul><li>å‘é€HTTPè¯·æ±‚</li><li>æ¥æ”¶å“åº”æ•°æ®</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-65178109770989783fe8fc450ff1eeef-image-20221203185149985.png" alt="image-20221203185149985" style="zoom:33%;">  ä¸ºä»€ä¹ˆè¦åœ¨Javaç¨‹åºä¸­å‘é€Httpè¯·æ±‚ï¼Ÿæœ‰å“ªäº›åº”ç”¨åœºæ™¯å‘¢ï¼Ÿ</p><p><strong>HttpClientåº”ç”¨åœºæ™¯ï¼š</strong></p><p>å½“æˆ‘ä»¬åœ¨ä½¿ç”¨æ‰«ææ”¯ä»˜ã€æŸ¥çœ‹åœ°å›¾ã€è·å–éªŒè¯ç ã€æŸ¥çœ‹å¤©æ°”ç­‰åŠŸèƒ½æ—¶</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-cbcf506da5299613bc0b1e2a6a0d52c4-image-20221203185536013.png" alt="image-20221203185536013" style="zoom: 50%;">  <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-980cb8a9a114c85631ba377e21f82ddb-image-20221203185557674.png" alt="image-20221203185557674" style="zoom:50%;">   <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-f8c2fd7563fc20df0632cdfb6e501473-image-20221203185614509.png" alt="image-20221203185614509" style="zoom:50%;">   <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-76e99c1f70d85326c5cc8f844e8c2344-image-20221203185632934.png" alt="image-20221203185632934" style="zoom:50%;"> </p><p>å…¶å®ï¼Œåº”ç”¨ç¨‹åºæœ¬èº«å¹¶æœªå®ç°è¿™äº›åŠŸèƒ½ï¼Œéƒ½æ˜¯åœ¨åº”ç”¨ç¨‹åºé‡Œè®¿é—®æä¾›è¿™äº›åŠŸèƒ½çš„æœåŠ¡ï¼Œè®¿é—®è¿™äº›æœåŠ¡éœ€è¦å‘é€HTTPè¯·æ±‚ï¼Œå¹¶ä¸”æ¥æ”¶å“åº”æ•°æ®ï¼Œå¯é€šè¿‡HttpClientæ¥å®ç°ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-7682b9e62a46da195fe66908a7c0c260-image-20221203185427462.png" alt="image-20221203185427462" style="zoom:50%;"> <p><strong>HttpClientçš„mavenåæ ‡ï¼š</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.httpcomponents<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>httpclient<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.5.13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>HttpClientçš„æ ¸å¿ƒAPIï¼š</strong></p><ul><li>HttpClientï¼šHttpå®¢æˆ·ç«¯å¯¹è±¡ç±»å‹ï¼Œä½¿ç”¨è¯¥ç±»å‹å¯¹è±¡å¯å‘èµ·Httpè¯·æ±‚ã€‚</li><li>HttpClientsï¼šå¯è®¤ä¸ºæ˜¯æ„å»ºå™¨ï¼Œå¯åˆ›å»ºHttpClientå¯¹è±¡ã€‚</li><li>CloseableHttpClientï¼šå®ç°ç±»ï¼Œå®ç°äº†HttpClientæ¥å£ã€‚</li><li>HttpGetï¼šGetæ–¹å¼è¯·æ±‚ç±»å‹ã€‚</li><li>HttpPostï¼šPostæ–¹å¼è¯·æ±‚ç±»å‹ã€‚</li></ul><p><strong>HttpClientå‘é€è¯·æ±‚æ­¥éª¤ï¼š</strong></p><ul><li>åˆ›å»ºHttpClientå¯¹è±¡</li><li>åˆ›å»ºHttpè¯·æ±‚å¯¹è±¡</li><li>è°ƒç”¨HttpClientçš„executeæ–¹æ³•å‘é€è¯·æ±‚</li></ul><h3 id="1-2-å…¥é—¨æ¡ˆä¾‹"><a href="#1-2-å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="1.2 å…¥é—¨æ¡ˆä¾‹"></a>1.2 å…¥é—¨æ¡ˆä¾‹</h3><p>å¯¹HttpClientç¼–ç¨‹å·¥å…·åŒ…æœ‰äº†ä¸€å®šäº†è§£åï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬ä½¿ç”¨HttpClientåœ¨Javaç¨‹åºå½“ä¸­æ¥æ„é€ Httpçš„è¯·æ±‚ï¼Œå¹¶ä¸”æŠŠè¯·æ±‚å‘é€å‡ºå»ï¼Œæ¥ä¸‹æ¥ï¼Œå°±é€šè¿‡å…¥é—¨æ¡ˆä¾‹åˆ†åˆ«å‘é€<strong>GETè¯·æ±‚</strong>å’Œ<strong>POSTè¯·æ±‚</strong>ï¼Œå…·ä½“æ¥å­¦ä¹ ä¸€ä¸‹å®ƒçš„ä½¿ç”¨æ–¹æ³•ã€‚</p><h4 id="1-2-1-GETæ–¹å¼è¯·æ±‚"><a href="#1-2-1-GETæ–¹å¼è¯·æ±‚" class="headerlink" title="1.2.1 GETæ–¹å¼è¯·æ±‚"></a>1.2.1 GETæ–¹å¼è¯·æ±‚</h4><p>æ­£å¸¸æ¥è¯´ï¼Œé¦–å…ˆï¼Œåº”è¯¥å¯¼å…¥HttpClientç›¸å…³çš„åæ ‡ï¼Œä½†åœ¨é¡¹ç›®ä¸­ï¼Œå°±ç®—ä¸å¯¼å…¥ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç›¸å…³çš„APIã€‚</p><p>å› ä¸ºåœ¨é¡¹ç›®ä¸­å·²ç»å¼•å…¥äº†aliyun-sdk-ossåæ ‡ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-sdk-oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šè¿°ä¾èµ–çš„åº•å±‚å·²ç»åŒ…å«äº†HttpClientç›¸å…³ä¾èµ–ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-bc9e2593c899300c5f8a84f4d78ea2ec-image-20221203194852825.png" alt="image-20221203194852825" style="zoom:50%;"> <p>æ•…é€‰æ‹©å¯¼å…¥æˆ–è€…ä¸å¯¼å…¥å‡å¯ã€‚</p><p>è¿›å…¥åˆ°sky-serveræ¨¡å—ï¼Œç¼–å†™æµ‹è¯•ä»£ç ï¼Œå‘é€GETè¯·æ±‚ã€‚</p><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><ol><li>åˆ›å»ºHttpClientå¯¹è±¡</li><li>åˆ›å»ºè¯·æ±‚å¯¹è±¡</li><li>å‘é€è¯·æ±‚ï¼Œæ¥å—å“åº”ç»“æœ</li><li>è§£æç»“æœ</li><li>å…³é—­èµ„æº</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpEntity</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>client<span class="token punctuation">.</span>methods<span class="token punctuation">.</span></span><span class="token class-name">CloseableHttpResponse</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>client<span class="token punctuation">.</span>methods<span class="token punctuation">.</span></span><span class="token class-name">HttpGet</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">CloseableHttpClient</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>impl<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">HttpClients</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">EntityUtils</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpClientTest</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æµ‹è¯•é€šè¿‡httpclientå‘é€GETæ–¹å¼çš„è¯·æ±‚     */</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGET</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>        <span class="token comment">//åˆ›å»ºhttpclientå¯¹è±¡</span>        <span class="token class-name">CloseableHttpClient</span> httpClient <span class="token operator">=</span> <span class="token class-name">HttpClients</span><span class="token punctuation">.</span><span class="token function">createDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//åˆ›å»ºè¯·æ±‚å¯¹è±¡</span>        <span class="token class-name">HttpGet</span> httpGet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpGet</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/user/shop/status"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å‘é€è¯·æ±‚ï¼Œæ¥å—å“åº”ç»“æœ</span>        <span class="token class-name">CloseableHttpResponse</span> response <span class="token operator">=</span> httpClient<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>httpGet<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è·å–æœåŠ¡ç«¯è¿”å›çš„çŠ¶æ€ç </span>        <span class="token keyword">int</span> statusCode <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getStatusLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœåŠ¡ç«¯è¿”å›çš„çŠ¶æ€ç ä¸ºï¼š"</span> <span class="token operator">+</span> statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">HttpEntity</span> entity <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> body <span class="token operator">=</span> <span class="token class-name">EntityUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœåŠ¡ç«¯è¿”å›çš„æ•°æ®ä¸ºï¼š"</span> <span class="token operator">+</span> body<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å…³é—­èµ„æº</span>        response<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        httpClient<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨è®¿é—®<a href="http://localhost:8080/user/shop/status%E8%AF%B7%E6%B1%82%E6%97%B6%EF%BC%8C%E9%9C%80%E8%A6%81%E6%8F%90%E5%89%8D%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE%E3%80%82">http://localhost:8080/user/shop/statusè¯·æ±‚æ—¶ï¼Œéœ€è¦æå‰å¯åŠ¨é¡¹ç›®ã€‚</a></p><p><strong>æµ‹è¯•ç»“æœï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-0713388e5a2d1610a441f1f117e06ae1-image-20221203195917572.png" alt="image-20221203195917572" style="zoom:50%;"> <h4 id="1-2-2-POSTæ–¹å¼è¯·æ±‚"><a href="#1-2-2-POSTæ–¹å¼è¯·æ±‚" class="headerlink" title="1.2.2 POSTæ–¹å¼è¯·æ±‚"></a>1.2.2 POSTæ–¹å¼è¯·æ±‚</h4><p>åœ¨HttpClientTestä¸­æ·»åŠ POSTæ–¹å¼è¯·æ±‚æ–¹æ³•ï¼Œç›¸æ¯”GETè¯·æ±‚æ¥è¯´ï¼ŒPOSTè¯·æ±‚è‹¥æºå¸¦å‚æ•°éœ€è¦å°è£…è¯·æ±‚ä½“å¯¹è±¡ï¼Œå¹¶å°†è¯¥å¯¹è±¡è®¾ç½®åœ¨è¯·æ±‚å¯¹è±¡ä¸­ã€‚</p><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><ol><li>åˆ›å»ºHttpClientå¯¹è±¡</li><li>åˆ›å»ºè¯·æ±‚å¯¹è±¡</li><li>å‘é€è¯·æ±‚ï¼Œæ¥æ”¶å“åº”ç»“æœ</li><li>è§£æå“åº”ç»“æœ</li><li>å…³é—­èµ„æº</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**    * æµ‹è¯•é€šè¿‡httpclientå‘é€POSTæ–¹å¼çš„è¯·æ±‚    */</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testPOST</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>       <span class="token comment">// åˆ›å»ºhttpclientå¯¹è±¡</span>       <span class="token class-name">CloseableHttpClient</span> httpClient <span class="token operator">=</span> <span class="token class-name">HttpClients</span><span class="token punctuation">.</span><span class="token function">createDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//åˆ›å»ºè¯·æ±‚å¯¹è±¡</span>       <span class="token class-name">HttpPost</span> httpPost <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpPost</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/admin/employee/login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       jsonObject<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       jsonObject<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">StringEntity</span> entity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringEntity</span><span class="token punctuation">(</span>jsonObject<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//æŒ‡å®šè¯·æ±‚ç¼–ç æ–¹å¼</span>       entity<span class="token punctuation">.</span><span class="token function">setContentEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//æ•°æ®æ ¼å¼</span>       entity<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       httpPost<span class="token punctuation">.</span><span class="token function">setEntity</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//å‘é€è¯·æ±‚</span>       <span class="token class-name">CloseableHttpResponse</span> response <span class="token operator">=</span> httpClient<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>httpPost<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//è§£æè¿”å›ç»“æœ</span>       <span class="token keyword">int</span> statusCode <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getStatusLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å“åº”ç ä¸ºï¼š"</span> <span class="token operator">+</span> statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">HttpEntity</span> entity1 <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">String</span> body <span class="token operator">=</span> <span class="token class-name">EntityUtils</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>entity1<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å“åº”æ•°æ®ä¸ºï¼š"</span> <span class="token operator">+</span> body<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//å…³é—­èµ„æº</span>       response<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       httpClient<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æµ‹è¯•ç»“æœï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-e6680b26098fc864641fd861b1b4344b-image-20221203201023925.png" alt="image-20221203201023925" style="zoom:50%;"> <h2 id="2-å¾®ä¿¡å°ç¨‹åºå¼€å‘"><a href="#2-å¾®ä¿¡å°ç¨‹åºå¼€å‘" class="headerlink" title="2. å¾®ä¿¡å°ç¨‹åºå¼€å‘"></a>2. å¾®ä¿¡å°ç¨‹åºå¼€å‘</h2><h3 id="2-1-ä»‹ç»"><a href="#2-1-ä»‹ç»" class="headerlink" title="2.1 ä»‹ç»"></a>2.1 ä»‹ç»</h3><p>å°ç¨‹åºæ˜¯ä¸€ç§æ–°çš„å¼€æ”¾èƒ½åŠ›ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿåœ°å¼€å‘ä¸€ä¸ªå°ç¨‹åºã€‚å¯ä»¥åœ¨å¾®ä¿¡å†…è¢«ä¾¿æ·åœ°è·å–å’Œä¼ æ’­ï¼ŒåŒæ—¶å…·æœ‰å‡ºè‰²çš„ä½¿ç”¨ä½“éªŒã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-5a177a8997c620b0e76491bcc27d933a-image-20221203204712437.png" alt="image-20221203204712437" style="zoom:50%;"> <p><strong>å®˜æ–¹ç½‘å€ï¼š</strong><a href="https://mp.weixin.qq.com/cgi-bin/wx?token=&amp;lang=zh_CN">https://mp.weixin.qq.com/cgi-bin/wx?token=&amp;lang=zh_CN</a></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-a96c2d67ecd9bd6a96927aeeac0ab83f-image-20221203205305487.png" alt="image-20221203205305487" style="zoom:50%;"> <p>å°ç¨‹åºä¸»è¦è¿è¡Œå¾®ä¿¡å†…éƒ¨ï¼Œå¯é€šè¿‡ä¸Šè¿°ç½‘ç«™æ¥æ•´ä½“äº†è§£å¾®ä¿¡å°ç¨‹åºçš„å¼€å‘ã€‚</p><p><strong>é¦–å…ˆï¼Œ</strong>åœ¨è¿›è¡Œå°ç¨‹åºå¼€å‘æ—¶ï¼Œéœ€è¦å…ˆå»æ³¨å†Œä¸€ä¸ªå°ç¨‹åºï¼Œåœ¨æ³¨å†Œçš„æ—¶å€™ï¼Œå®ƒå®é™…ä¸Šåˆåˆ†æˆäº†ä¸åŒçš„æ³¨å†Œçš„ä¸»ä½“ã€‚æˆ‘ä»¬å¯ä»¥ä»¥ä¸ªäººçš„èº«ä»½æ¥æ³¨å†Œä¸€ä¸ªå°ç¨‹åºï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä»¥ä¼ä¸šæ”¿åºœã€åª’ä½“æˆ–è€…å…¶ä»–ç»„ç»‡çš„æ–¹å¼æ¥æ³¨å†Œå°ç¨‹åºã€‚é‚£ä¹ˆï¼Œä¸åŒçš„ä¸»ä½“æ³¨å†Œå°ç¨‹åºï¼Œæœ€ç»ˆå¼€æ”¾çš„æƒé™ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚æ¯”å¦‚ä»¥ä¸ªäººèº«ä»½æ¥æ³¨å†Œå°ç¨‹åºï¼Œæ˜¯æ— æ³•å¼€é€šæ”¯ä»˜æƒé™çš„ã€‚è‹¥è¦æä¾›æ”¯ä»˜åŠŸèƒ½ï¼Œå¿…é¡»æ˜¯ä¼ä¸šã€æ”¿åºœæˆ–è€…å…¶å®ƒç»„ç»‡ç­‰ã€‚æ‰€ä»¥ï¼Œä¸åŒçš„ä¸»ä½“æ³¨å†Œå°ç¨‹åºåï¼Œå¯å¼€å‘çš„åŠŸèƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-394177e2aa7c39ca1df5148d789b50bc-image-20221203210640473.png" alt="image-20221203210640473" style="zoom:50%;"> <p><strong>ç„¶åï¼Œ</strong>å¾®ä¿¡å°ç¨‹åºæˆ‘ä»¬æä¾›çš„ä¸€äº›å¼€å‘çš„æ”¯æŒï¼Œå®é™…ä¸Šå¾®ä¿¡çš„å®˜æ–¹æ˜¯æä¾›äº†ä¸€ç³»åˆ—çš„å·¥å…·æ¥å¸®åŠ©å¼€å‘è€…å¿«é€Ÿçš„æ¥å…¥<br>å¹¶ä¸”å®Œæˆå°ç¨‹åºçš„å¼€å‘ï¼Œæä¾›äº†å®Œå–„çš„å¼€å‘æ–‡æ¡£ï¼Œå¹¶ä¸”ä¸“é—¨æä¾›äº†ä¸€ä¸ªå¼€å‘è€…å·¥å…·ï¼Œè¿˜æä¾›äº†ç›¸åº”çš„è®¾è®¡æŒ‡å—ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†ä¸€äº›å°ç¨‹åºä½“éªŒDEMOï¼Œå¯ä»¥å¿«é€Ÿçš„ä½“éªŒå°ç¨‹åºå®ç°çš„åŠŸèƒ½ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-6fbcddaa7c761e425c30839e22ce358e-image-20221203211226920.png" alt="image-20221203211226920" style="zoom:50%;"> <p><strong>æœ€åï¼Œ</strong>å¼€å‘å®Œä¸€ä¸ªå°ç¨‹åºè¦ä¸Šçº¿ï¼Œä¹Ÿç»™æˆ‘ä»¬æä¾›äº†è¯¦ç»†åœ°æ¥å…¥æµç¨‹ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-7c1c496a57fc994ad75fe01fc77f3d04-image-20221203211535565.png" alt="image-20221203211535565" style="zoom:50%;"> <h3 id="2-2-å‡†å¤‡å·¥ä½œ"><a href="#2-2-å‡†å¤‡å·¥ä½œ" class="headerlink" title="2.2 å‡†å¤‡å·¥ä½œ"></a>2.2 å‡†å¤‡å·¥ä½œ</h3><p>å¼€å‘å¾®ä¿¡å°ç¨‹åºä¹‹å‰éœ€è¦åšå¦‚ä¸‹å‡†å¤‡å·¥ä½œï¼š</p><ul><li>æ³¨å†Œå°ç¨‹åº</li><li>å®Œå–„å°ç¨‹åºä¿¡æ¯</li><li>ä¸‹è½½å¼€å‘è€…å·¥å…·</li></ul><p><strong>1). æ³¨å†Œå°ç¨‹åº</strong></p><p>æ³¨å†Œåœ°å€ï¼š<a href="https://mp.weixin.qq.com/wxopen/waregister?action=step1">https://mp.weixin.qq.com/wxopen/waregister?action=step1</a></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-3ac0922f20e3e58429179a6e0e9ce6ad-image-20221203212348111.png" alt="image-20221203212348111" style="zoom: 50%;"> <p><strong>2). å®Œå–„å°ç¨‹åºä¿¡æ¯</strong></p><p>ç™»å½•å°ç¨‹åºåå°ï¼š<a href="https://mp.weixin.qq.com/">https://mp.weixin.qq.com/</a></p><p>ä¸¤ç§ç™»å½•æ–¹å¼é€‰å…¶ä¸€å³å¯</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-17da05924975ad76e77c3ce0a9df59ae-image-20221203212454040.png" alt="image-20221203212454040" style="zoom:50%;"> <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-c3ff09cc17dd8782e9a0355644c0f075-image-20221203212508081.png" alt="image-20221203212508081" style="zoom:50%;"> </p><p>å®Œå–„å°ç¨‹åºä¿¡æ¯ã€å°ç¨‹åºç±»ç›®</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-24c2b136186590b8037b9e998057c922-image-20221203212615981.png" alt="image-20221203212615981" style="zoom:50%;"> <p>æŸ¥çœ‹å°ç¨‹åºçš„ AppID</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-e99eae3d0be5ce76702b73f234ead954-image-20221203212702993.png" alt="image-20221203212702993" style="zoom:50%;"> <p><strong>3). ä¸‹è½½å¼€å‘è€…å·¥å…·</strong></p><p>èµ„æ–™ä¸­å·²æä¾›ï¼Œæ— éœ€ä¸‹è½½ï¼Œç†Ÿæ‚‰ä¸‹è½½æ­¥éª¤å³å¯ã€‚</p><p>ä¸‹è½½åœ°å€ï¼š <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html">https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html</a></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-2412148b72d361db7a3db62c5e43a7bb-image-20221203212836364.png" alt="image-20221203212836364" style="zoom:50%;"> <p>æ‰«æç™»å½•å¼€å‘è€…å·¥å…·</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-226105aa7034ff2efd08a5c75f14886e-image-20221203212954956.png" alt="image-20221203212954956" style="zoom:50%;"> <p>åˆ›å»ºå°ç¨‹åºé¡¹ç›®</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-262c8cf8a1e41588a445887a358cdffa-image-20221203213042020.png" alt="image-20221203213042020" style="zoom:50%;"> <p>ç†Ÿæ‚‰å¼€å‘è€…å·¥å…·å¸ƒå±€</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-4379b0386449a07d695d5f41fb7881aa-image-20221203213108317.png" alt="image-20221203213108317" style="zoom:50%;"> <p>è®¾ç½®ä¸æ ¡éªŒåˆæ³•åŸŸå</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-3ad18d1c4c679d2fcf7eca06917adaed-image-20221203213212370.png" alt="image-20221203213212370" style="zoom:50%;"> <p><strong>æ³¨ï¼š</strong>å¼€å‘é˜¶æ®µï¼Œå°ç¨‹åºå‘å‡ºè¯·æ±‚åˆ°åç«¯çš„TomcatæœåŠ¡å™¨ï¼Œè‹¥ä¸å‹¾é€‰ï¼Œè¯·æ±‚å‘é€å¤±è´¥ã€‚</p><h3 id="2-3-å…¥é—¨æ¡ˆä¾‹"><a href="#2-3-å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="2.3 å…¥é—¨æ¡ˆä¾‹"></a>2.3 å…¥é—¨æ¡ˆä¾‹</h3><p>å®é™…ä¸Šï¼Œå°ç¨‹åºçš„å¼€å‘æœ¬è´¨ä¸Šå±äºå‰ç«¯å¼€å‘ï¼Œä¸»è¦ä½¿ç”¨JavaScriptå¼€å‘ï¼Œå’±ä»¬ç°åœ¨çš„å®šä½ä¸»è¦è¿˜æ˜¯åœ¨åç«¯ï¼Œæ‰€ä»¥ï¼Œå¯¹äºå°ç¨‹åºå¼€å‘ç®€å•äº†è§£å³å¯ã€‚</p><h4 id="2-3-1-å°ç¨‹åºç›®å½•ç»“æ„"><a href="#2-3-1-å°ç¨‹åºç›®å½•ç»“æ„" class="headerlink" title="2.3.1 å°ç¨‹åºç›®å½•ç»“æ„"></a>2.3.1 å°ç¨‹åºç›®å½•ç»“æ„</h4><p>å°ç¨‹åºåŒ…å«ä¸€ä¸ªæè¿°æ•´ä½“ç¨‹åºçš„ app å’Œå¤šä¸ªæè¿°å„è‡ªé¡µé¢çš„ pageã€‚ä¸€ä¸ªå°ç¨‹åºä¸»ä½“éƒ¨åˆ†ç”±ä¸‰ä¸ªæ–‡ä»¶ç»„æˆï¼Œå¿…é¡»æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œå¦‚ä¸‹ï¼š</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-918a242b0aafca6c0cd5fdf661e47592-image-20221203220557676.png" alt="image-20221203220557676" style="zoom:50%;"> <p><strong>æ–‡ä»¶è¯´æ˜ï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-ffc73eb1d96d926b0dd7ee66d9048908-image-20221203220635867.png" alt="image-20221203220635867" style="zoom:50%;"> <p><strong>app.jsï¼š</strong>å¿…é¡»å­˜åœ¨ï¼Œä¸»è¦å­˜æ”¾å°ç¨‹åºçš„é€»è¾‘ä»£ç </p><p><strong>app.jsonï¼š</strong>å¿…é¡»å­˜åœ¨ï¼Œå°ç¨‹åºé…ç½®æ–‡ä»¶ï¼Œä¸»è¦å­˜æ”¾å°ç¨‹åºçš„å…¬å…±é…ç½®</p><p><strong>app.wxss:</strong>  éå¿…é¡»å­˜åœ¨ï¼Œä¸»è¦å­˜æ”¾å°ç¨‹åºå…¬å…±æ ·å¼è¡¨ï¼Œç±»ä¼¼äºå‰ç«¯çš„CSSæ ·å¼</p><p>å¯¹å°ç¨‹åºä¸»ä½“ä¸‰ä¸ªæ–‡ä»¶äº†è§£åï¼Œå…¶å®ä¸€ä¸ªå°ç¨‹åºåˆæœ‰å¤šä¸ªé¡µé¢ã€‚æ¯”å¦‚è¯´ï¼Œæœ‰å•†å“æµè§ˆé¡µé¢ã€è´­ç‰©è½¦çš„é¡µé¢ã€è®¢å•æ”¯ä»˜çš„é¡µé¢ã€å•†å“çš„è¯¦æƒ…é¡µé¢ç­‰ç­‰ã€‚é‚£è¿™äº›é¡µé¢ä¼šæ”¾åœ¨å“ªå‘¢ï¼Ÿ<br>ä¼šå­˜æ”¾åœ¨pagesç›®å½•ã€‚</p><p>æ¯ä¸ªå°ç¨‹åºé¡µé¢ä¸»è¦ç”±å››ä¸ªæ–‡ä»¶ç»„æˆï¼š</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-e5867ca6b6752cc40731eff77ee88eba-image-20221203220826893.png" alt="image-20221203220826893" style="zoom:50%;"> <p><strong>æ–‡ä»¶è¯´æ˜ï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-9fbe2a27d099c6456d17e1b8aaa2a4f6-image-20221203220839187.png" alt="image-20221203220839187" style="zoom:50%;"> <p><strong>jsæ–‡ä»¶ï¼š</strong>å¿…é¡»å­˜åœ¨ï¼Œå­˜æ”¾é¡µé¢ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œç¼–å†™çš„jsä»£ç ã€‚</p><p><strong>wxmlæ–‡ä»¶ï¼š</strong>å¿…é¡»å­˜åœ¨ï¼Œå­˜æ”¾é¡µé¢ç»“æ„ï¼Œä¸»è¦æ˜¯åšé¡µé¢å¸ƒå±€ï¼Œé¡µé¢æ•ˆæœå±•ç¤ºçš„ï¼Œç±»ä¼¼äºHTMLé¡µé¢ã€‚</p><p><strong>jsonæ–‡ä»¶ï¼š</strong>éå¿…é¡»ï¼Œå­˜æ”¾é¡µé¢ç›¸å…³çš„é…ç½®ã€‚</p><p><strong>wxssæ–‡ä»¶ï¼š</strong>éå¿…é¡»ï¼Œå­˜æ”¾é¡µé¢æ ·å¼è¡¨ï¼Œç›¸å½“äºCSSæ–‡ä»¶ã€‚</p><h4 id="2-3-2-ç¼–å†™å’Œç¼–è¯‘å°ç¨‹åº"><a href="#2-3-2-ç¼–å†™å’Œç¼–è¯‘å°ç¨‹åº" class="headerlink" title="2.3.2 ç¼–å†™å’Œç¼–è¯‘å°ç¨‹åº"></a>2.3.2 ç¼–å†™å’Œç¼–è¯‘å°ç¨‹åº</h4><p><strong>1). ç¼–å†™</strong></p><p>è¿›å…¥åˆ°index.wxmlï¼Œç¼–å†™é¡µé¢å¸ƒå±€</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{msg}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>default<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getUserInfo<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>è·å–ç”¨æˆ·ä¿¡æ¯<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{avatarUrl}}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>    {{nickName}}  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wxlogin<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>å¾®ä¿¡ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>    æˆæƒç ï¼š{{code}}  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>warn<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sendRequest<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>å‘é€è¯·æ±‚<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>    å“åº”ç»“æœï¼š{{result}}  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿›å…¥åˆ°index.jsï¼Œç¼–å†™ä¸šåŠ¡é€»è¾‘ä»£ç </p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  data<span class="token operator">:</span><span class="token punctuation">{</span>    msg<span class="token operator">:</span><span class="token string">'hello world'</span><span class="token punctuation">,</span>    avatarUrl<span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span>    nickName<span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span>    code<span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span>    result<span class="token operator">:</span><span class="token string">''</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function-variable function">getUserInfo</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    wx<span class="token punctuation">.</span><span class="token function">getUserProfile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      desc<span class="token operator">:</span> <span class="token string">'è·å–ç”¨æˆ·ä¿¡æ¯'</span><span class="token punctuation">,</span>      <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>          avatarUrl<span class="token operator">:</span>res<span class="token punctuation">.</span>userInfo<span class="token punctuation">.</span>avatarUrl<span class="token punctuation">,</span>          nickName<span class="token operator">:</span>res<span class="token punctuation">.</span>userInfo<span class="token punctuation">.</span>nickName        <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function-variable function">wxlogin</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    wx<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"æˆæƒç ï¼š"</span><span class="token operator">+</span>res<span class="token punctuation">.</span>code<span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>          code<span class="token operator">:</span>res<span class="token punctuation">.</span>code        <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function-variable function">sendRequest</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      url<span class="token operator">:</span> <span class="token string">'http://localhost:8080/user/shop/status'</span><span class="token punctuation">,</span>      method<span class="token operator">:</span><span class="token string">'GET'</span><span class="token punctuation">,</span>      <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"å“åº”ç»“æœï¼š"</span> <span class="token operator">+</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>          result<span class="token operator">:</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data        <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>2). ç¼–è¯‘</strong></p><p>ç‚¹å‡»ç¼–è¯‘æŒ‰é’®</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-cd3be72ea72a00e80709238144184e26-image-20221204181233015.png" alt="image-20221204181233015" style="zoom:50%;"> <p><strong>3). è¿è¡Œæ•ˆæœ</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-630c58787ffd8ee785d105dfea330a2a-image-20221204181606927.png" alt="image-20221204181606927" style="zoom:50%;"> <p>ç‚¹å‡»<strong>è·å–ç”¨æˆ·ä¿¡æ¯</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-6ad34fbe89e63e72e9f1fb15198fc057-image-20221204182056440.png" alt="image-20221204182056440" style="zoom: 67%;"> <p>ç‚¹å‡»<strong>å¾®ä¿¡ç™»å½•</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-1d2b33c30a45f8198fa46338fdcf6a61-image-20221204182238762.png" alt="image-20221204182238762" style="zoom: 67%;"> <p>ç‚¹å‡»<strong>å‘é€è¯·æ±‚</strong></p><p>å› ä¸ºè¯·æ±‚<a href="http://localhost:8080/user/shop/status%EF%BC%8C%E5%85%88%E8%A6%81%E5%90%AF%E5%8A%A8%E5%90%8E%E5%8F%B0%E9%A1%B9%E7%9B%AE%E3%80%82">http://localhost:8080/user/shop/statusï¼Œå…ˆè¦å¯åŠ¨åå°é¡¹ç›®ã€‚</a></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-183437aacb6073b0d9729b7782ee965b-image-20221204192519728.png" alt="image-20221204192519728" style="zoom: 67%;"> <p><strong>æ³¨ï¼š</strong>è®¾ç½®ä¸æ ¡éªŒåˆæ³•åŸŸåï¼Œè‹¥ä¸å‹¾é€‰ï¼Œè¯·æ±‚å‘é€å¤±è´¥ã€‚</p><h4 id="2-3-3-å‘å¸ƒå°ç¨‹åº"><a href="#2-3-3-å‘å¸ƒå°ç¨‹åº" class="headerlink" title="2.3.3 å‘å¸ƒå°ç¨‹åº"></a>2.3.3 å‘å¸ƒå°ç¨‹åº</h4><p>å°ç¨‹åºçš„ä»£ç éƒ½å·²ç»å¼€å‘å®Œæ¯•ï¼Œè¦å°†å°ç¨‹åºå‘å¸ƒä¸Šçº¿ï¼Œè®©æ‰€æœ‰çš„ç”¨æˆ·éƒ½èƒ½ä½¿ç”¨åˆ°è¿™ä¸ªå°ç¨‹åºã€‚</p><p>ç‚¹å‡»ä¸Šä¼ æŒ‰é’®ï¼š</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-251abcff599a7d8c93c5675575353813-image-20221204225355015.png" alt="image-20221204225355015" style="zoom:50%;"> <p>æŒ‡å®šç‰ˆæœ¬å·ï¼š</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-636fd259bbdc6bc16789dbd996796d4f-image-20221204225502698.png" alt="image-20221204225502698" style="zoom:50%;"> <p>ä¸Šä¼ æˆåŠŸï¼š</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-203e0ddd91f97bf95b84fa5fcc2be4f6-image-20221204225557820.png" alt="image-20221204225557820" style="zoom:50%;"> <p>æŠŠä»£ç ä¸Šä¼ åˆ°å¾®ä¿¡æœåŠ¡å™¨å°±è¡¨ç¤ºå°ç¨‹åºå·²ç»å‘å¸ƒäº†å—ï¼Ÿ<br><strong>å…¶å®å¹¶ä¸æ˜¯ã€‚</strong>å½“å‰å°ç¨‹åºç‰ˆæœ¬åªæ˜¯ä¸€ä¸ªå¼€å‘ç‰ˆæœ¬ã€‚</p><p>è¿›åˆ°å¾®ä¿¡å…¬ä¼—å¹³å°ï¼Œæ‰“å¼€ç‰ˆæœ¬ç®¡ç†é¡µé¢ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-7b9d6cfca94fb2f46d566692b4228e27-image-20221204230231476.png" alt="image-20221204230231476" style="zoom:50%;"> <p>éœ€æäº¤å®¡æ ¸ï¼Œå˜æˆå®¡æ ¸ç‰ˆæœ¬ï¼Œå®¡æ ¸é€šè¿‡åï¼Œè¿›è¡Œå‘å¸ƒï¼Œå˜æˆçº¿ä¸Šç‰ˆæœ¬ã€‚</p><p>ä¸€æ—¦æˆä¸ºçº¿ä¸Šç‰ˆæœ¬ï¼Œè¿™å°±è¯´æ˜å°ç¨‹åºå°±å·²ç»å‘å¸ƒä¸Šçº¿äº†ï¼Œå¾®ä¿¡ç”¨æˆ·å°±å¯ä»¥åœ¨å¾®ä¿¡é‡Œé¢å»æœç´¢å’Œä½¿ç”¨è¿™ä¸ªå°ç¨‹åºäº†ã€‚</p><h2 id="3-å¾®ä¿¡ç™»å½•"><a href="#3-å¾®ä¿¡ç™»å½•" class="headerlink" title="3. å¾®ä¿¡ç™»å½•"></a>3. å¾®ä¿¡ç™»å½•</h2><h3 id="3-1-å¯¼å…¥å°ç¨‹åºä»£ç "><a href="#3-1-å¯¼å…¥å°ç¨‹åºä»£ç " class="headerlink" title="3.1 å¯¼å…¥å°ç¨‹åºä»£ç "></a>3.1 å¯¼å…¥å°ç¨‹åºä»£ç </h3><p>å¼€å‘å¾®ä¿¡å°ç¨‹åºï¼Œæœ¬è´¨ä¸Šæ˜¯å±äºå‰ç«¯çš„å¼€å‘ï¼Œæˆ‘ä»¬çš„é‡ç‚¹å…¶å®è¿˜æ˜¯åç«¯ä»£ç å¼€å‘ã€‚æ‰€ä»¥ï¼Œå°ç¨‹åºçš„ä»£ç å·²ç»æä¾›å¥½äº†ï¼Œç›´æ¥å¯¼å…¥åˆ°å¾®ä¿¡å¼€å‘è€…å·¥å…·å½“ä¸­ï¼Œç›´æ¥æ¥ä½¿ç”¨å°±å¯ä»¥äº†ã€‚</p><p><strong>1). æ‰¾åˆ°èµ„æ–™</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-60b6060a09f94b5a25baaffc0a48fb2c-image-20221204205429798.png" alt="image-20221204205429798" style="zoom: 67%;"> <p><strong>2). å¯¼å…¥ä»£ç </strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-b4a15fab5a425c5cf317c96c8ff0b309-image-20221204205631809.png" alt="image-20221204205631809" style="zoom:50%;"> <p>AppIDï¼šä½¿ç”¨è‡ªå·±çš„AppID</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-f5507b4fd45a39d166e75a044fa1475d-image-20221204210011364.png" alt="image-20221204210011364" style="zoom:50%;"> <p><strong>3). æŸ¥çœ‹é¡¹ç›®ç»“æ„</strong></p><p>ä¸»ä½“çš„æ–‡ä»¶:app.js app.json app.wxss<br>é¡¹ç›®çš„é¡µé¢æ¯”è¾ƒå¤šï¼Œä¸»è¦å­˜æ”¾åœ¨pagesç›®å½•ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-da484baf88c5ee6cdd4e11cdf00be476-image-20221204210739195.png" alt="image-20221204210739195" style="zoom:50%;"> <p><strong>4). ä¿®æ”¹é…ç½®</strong></p><p>å› ä¸ºå°ç¨‹åºè¦è¯·æ±‚åç«¯æœåŠ¡ï¼Œéœ€è¦ä¿®æ”¹ä¸ºè‡ªå·±åç«¯æœåŠ¡çš„ipåœ°å€å’Œç«¯å£å·(é»˜è®¤ä¸éœ€è¦ä¿®æ”¹)</p><p>commonâ€“&gt;vendor.jsâ€“&gt;æœç´¢(ctrl+f)â€“&gt;baseUri</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-e696a4a373717c4729d1ccebb613d646-image-20221204211239035.png" alt="image-20221204211239035" style="zoom:50%;"> <h3 id="3-2-å¾®ä¿¡ç™»å½•æµç¨‹"><a href="#3-2-å¾®ä¿¡ç™»å½•æµç¨‹" class="headerlink" title="3.2 å¾®ä¿¡ç™»å½•æµç¨‹"></a>3.2 å¾®ä¿¡ç™»å½•æµç¨‹</h3><p>å¾®ä¿¡ç™»å½•ï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html">https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html</a></p><p><strong>æµç¨‹å›¾ï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-8971a7e702c6f95bd590ced342e225dd-image-20221204211800753.png" alt="image-20221204211800753" style="zoom:50%;"> <p><strong>æ­¥éª¤åˆ†æï¼š</strong></p><ol><li>å°ç¨‹åºç«¯ï¼Œè°ƒç”¨wx.login()è·å–codeï¼Œå°±æ˜¯æˆæƒç ã€‚</li><li>å°ç¨‹åºç«¯ï¼Œè°ƒç”¨wx.request()å‘é€è¯·æ±‚å¹¶æºå¸¦codeï¼Œè¯·æ±‚å¼€å‘è€…æœåŠ¡å™¨(è‡ªå·±ç¼–å†™çš„åç«¯æœåŠ¡)ã€‚</li><li>å¼€å‘è€…æœåŠ¡ç«¯ï¼Œé€šè¿‡HttpClientå‘å¾®ä¿¡æ¥å£æœåŠ¡å‘é€è¯·æ±‚ï¼Œå¹¶æºå¸¦appId+appsecret+codeä¸‰ä¸ªå‚æ•°ã€‚</li><li>å¼€å‘è€…æœåŠ¡ç«¯ï¼Œæ¥æ”¶å¾®ä¿¡æ¥å£æœåŠ¡è¿”å›çš„æ•°æ®ï¼Œsession_key+opendIdç­‰ã€‚opendIdæ˜¯å¾®ä¿¡ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ã€‚</li><li>å¼€å‘è€…æœåŠ¡ç«¯ï¼Œè‡ªå®šä¹‰ç™»å½•æ€ï¼Œç”Ÿæˆä»¤ç‰Œ(token)å’Œopenidç­‰æ•°æ®è¿”å›ç»™å°ç¨‹åºç«¯ï¼Œæ–¹ä¾¿åç»ªè¯·æ±‚èº«ä»½æ ¡éªŒã€‚</li><li>å°ç¨‹åºç«¯ï¼Œæ”¶åˆ°è‡ªå®šä¹‰ç™»å½•æ€ï¼Œå­˜å‚¨storageã€‚</li><li>å°ç¨‹åºç«¯ï¼Œåç»ªé€šè¿‡wx.request()å‘èµ·ä¸šåŠ¡è¯·æ±‚æ—¶ï¼Œæºå¸¦tokenã€‚</li><li>å¼€å‘è€…æœåŠ¡ç«¯ï¼Œæ”¶åˆ°è¯·æ±‚åï¼Œé€šè¿‡æºå¸¦çš„tokenï¼Œè§£æå½“å‰ç™»å½•ç”¨æˆ·çš„idã€‚</li><li>å¼€å‘è€…æœåŠ¡ç«¯ï¼Œèº«ä»½æ ¡éªŒé€šè¿‡åï¼Œç»§ç»­ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œæœ€ç»ˆè¿”å›ä¸šåŠ¡æ•°æ®ã€‚</li></ol><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨Postmanè¿›è¡Œæµ‹è¯•ã€‚</p><p><strong>è¯´æ˜ï¼š</strong></p><ol><li>è°ƒç”¨ <a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html">wx.login()</a> è·å– <strong>ä¸´æ—¶ç™»å½•å‡­è¯code</strong> ï¼Œå¹¶å›ä¼ åˆ°å¼€å‘è€…æœåŠ¡å™¨ã€‚</li><li>è°ƒç”¨ <a href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/login/auth.code2Session.html">auth.code2Session</a> æ¥å£ï¼Œæ¢å– <strong>ç”¨æˆ·å”¯ä¸€æ ‡è¯† OpenID</strong> ã€ ç”¨æˆ·åœ¨å¾®ä¿¡å¼€æ”¾å¹³å°å¸å·ä¸‹çš„<strong>å”¯ä¸€æ ‡è¯†UnionID</strong>ï¼ˆè‹¥å½“å‰å°ç¨‹åºå·²ç»‘å®šåˆ°å¾®ä¿¡å¼€æ”¾å¹³å°å¸å·ï¼‰ å’Œ <strong>ä¼šè¯å¯†é’¥ session_key</strong>ã€‚</li></ol><p>ä¹‹åå¼€å‘è€…æœåŠ¡å™¨å¯ä»¥æ ¹æ®ç”¨æˆ·æ ‡è¯†æ¥ç”Ÿæˆè‡ªå®šä¹‰ç™»å½•æ€ï¼Œç”¨äºåç»­ä¸šåŠ¡é€»è¾‘ä¸­å‰åç«¯äº¤äº’æ—¶è¯†åˆ«ç”¨æˆ·èº«ä»½ã€‚</p><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><p><strong>1). è·å–æˆæƒç </strong></p><p>ç‚¹å‡»ç¡®å®šæŒ‰é’®ï¼Œè·å–æˆæƒç ï¼Œæ¯ä¸ªæˆæƒç åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œæ¯æ¬¡æµ‹è¯•ï¼Œéœ€é‡æ–°è·å–ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-fc1a0e5d8010ad253a894c0d125d3cc2-image-20221204222008130.png" alt="image-20221204222008130" style="zoom:50%;"> <p><strong>2). æ˜ç¡®è¯·æ±‚æ¥å£</strong></p><p>è¯·æ±‚æ–¹å¼ã€è¯·æ±‚è·¯å¾„ã€è¯·æ±‚å‚æ•°</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-b377faacc2a1a6fca60aea45c0ef2098-image-20221204222434054.png" alt="image-20221204222434054" style="zoom:50%;"> <p><strong>3). å‘é€è¯·æ±‚</strong></p><p>è·å–session_keyå’Œopenid</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-0d1dce003c82ef05e40914a9483c5dae-image-20221204223956568.png" alt="image-20221204223956568" style="zoom:50%;"> <p>è‹¥å‡ºç°code been usedé”™è¯¯æç¤ºï¼Œè¯´æ˜æˆæƒç å·²è¢«ä½¿ç”¨è¿‡ï¼Œè¯·é‡æ–°è·å–</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-2bf7b42d2b552dfb5b23789388fd904e-image-20221204224130409.png" alt="image-20221204224130409" style="zoom:50%;">  <h3 id="3-3-éœ€æ±‚åˆ†æå’Œè®¾è®¡"><a href="#3-3-éœ€æ±‚åˆ†æå’Œè®¾è®¡" class="headerlink" title="3.3 éœ€æ±‚åˆ†æå’Œè®¾è®¡"></a>3.3 éœ€æ±‚åˆ†æå’Œè®¾è®¡</h3><h4 id="3-3-1-äº§å“åŸå‹"><a href="#3-3-1-äº§å“åŸå‹" class="headerlink" title="3.3.1 äº§å“åŸå‹"></a>3.3.1 äº§å“åŸå‹</h4><p>ç”¨æˆ·è¿›å…¥åˆ°å°ç¨‹åºçš„æ—¶å€™ï¼Œå¾®ä¿¡æˆæƒç™»å½•ä¹‹åæ‰èƒ½ç‚¹é¤ã€‚éœ€è¦è·å–å½“å‰å¾®ä¿¡ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯ï¼Œæ¯”å¦‚æ˜µç§°ã€å¤´åƒç­‰ï¼Œè¿™æ ·æ‰èƒ½å¤Ÿè¿›å…¥åˆ°å°ç¨‹åºè¿›è¡Œä¸‹å•æ“ä½œã€‚æ˜¯åŸºäºå¾®ä¿¡ç™»å½•æ¥å®ç°å°ç¨‹åºçš„ç™»å½•åŠŸèƒ½ï¼Œæ²¡æœ‰é‡‡ç”¨ä¼ ç»Ÿè´¦æˆ·å¯†ç ç™»å½•çš„æ–¹å¼ã€‚è‹¥ç¬¬ä¸€æ¬¡ä½¿ç”¨å°ç¨‹åºæ¥ç‚¹é¤ï¼Œå°±æ˜¯ä¸€ä¸ªæ–°ç”¨æˆ·ï¼Œéœ€è¦æŠŠè¿™ä¸ªæ–°çš„ç”¨æˆ·ä¿å­˜åˆ°æ•°æ®åº“å½“ä¸­å®Œæˆè‡ªåŠ¨æ³¨å†Œã€‚</p><p><strong>ç™»å½•åŠŸèƒ½åŸå‹å›¾ï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-41fa7ec7810c19f8fbb92415241920d2-image-20221205173711304.png" alt="image-20221205173711304" style="zoom:50%;"> <p><strong>ä¸šåŠ¡è§„åˆ™ï¼š</strong></p><ul><li>åŸºäºå¾®ä¿¡ç™»å½•å®ç°å°ç¨‹åºçš„ç™»å½•åŠŸèƒ½</li><li>å¦‚æœæ˜¯æ–°ç”¨æˆ·éœ€è¦è‡ªåŠ¨å®Œæˆæ³¨å†Œ</li></ul><h4 id="3-3-2-æ¥å£è®¾è®¡"><a href="#3-3-2-æ¥å£è®¾è®¡" class="headerlink" title="3.3.2 æ¥å£è®¾è®¡"></a>3.3.2 æ¥å£è®¾è®¡</h4><p>é€šè¿‡å¾®ä¿¡ç™»å½•çš„æµç¨‹ï¼Œå¦‚æœè¦å®Œæˆå¾®ä¿¡ç™»å½•çš„è¯ï¼Œæœ€ç»ˆå°±è¦è·å¾—å¾®ä¿¡ç”¨æˆ·çš„openidã€‚åœ¨å°ç¨‹åºç«¯è·å–æˆæƒç åï¼Œå‘åç«¯æœåŠ¡å‘é€è¯·æ±‚ï¼Œå¹¶æºå¸¦æˆæƒç ï¼Œè¿™æ ·åç«¯æœåŠ¡åœ¨æ”¶åˆ°æˆæƒç åï¼Œå°±å¯ä»¥å»è¯·æ±‚å¾®ä¿¡æ¥å£æœåŠ¡ã€‚æœ€ç»ˆï¼Œåç«¯å‘å°ç¨‹åºè¿”å›openidå’Œtokenç­‰æ•°æ®ã€‚</p><p>åŸºäºä¸Šè¿°çš„ç™»å½•æµç¨‹ï¼Œå°±å¯ä»¥è®¾è®¡å‡ºè¯¥æ¥å£çš„<strong>è¯·æ±‚å‚æ•°</strong>å’Œ<strong>è¿”å›æ•°æ®</strong>ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-0d38fb35b8f23e85f2947224a51ea72e-image-20221205175429394.png" alt="image-20221205175429394" style="zoom:50%;"> <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-a1a33b8bfd1780019d1d6c736fe17bae-image-20221205175441256.png" alt="image-20221205175441256" style="zoom:50%;"></p><p><strong>è¯´æ˜ï¼š</strong>è¯·æ±‚è·¯å¾„/user/user/login,ç¬¬ä¸€ä¸ªuserä»£è¡¨ç”¨æˆ·ç«¯ï¼Œç¬¬äºŒä¸ªuserä»£è¡¨ç”¨æˆ·æ¨¡å—ã€‚</p><h4 id="3-3-3-è¡¨è®¾è®¡"><a href="#3-3-3-è¡¨è®¾è®¡" class="headerlink" title="3.3.3 è¡¨è®¾è®¡"></a>3.3.3 è¡¨è®¾è®¡</h4><p>å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ä½¿ç”¨å°ç¨‹åºæ—¶ï¼Œä¼šå®Œæˆè‡ªåŠ¨æ³¨å†Œï¼ŒæŠŠç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°<strong>user</strong>è¡¨ä¸­ã€‚</p><table><thead><tr><th><strong>å­—æ®µå</strong></th><th><strong>æ•°æ®ç±»å‹</strong></th><th><strong>è¯´æ˜</strong></th><th><strong>å¤‡æ³¨</strong></th></tr></thead><tbody><tr><td>id</td><td>bigint</td><td>ä¸»é”®</td><td>è‡ªå¢</td></tr><tr><td>openid</td><td>varchar(45)</td><td>å¾®ä¿¡ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†</td><td></td></tr><tr><td>name</td><td>varchar(32)</td><td>ç”¨æˆ·å§“å</td><td></td></tr><tr><td>phone</td><td>varchar(11)</td><td>æ‰‹æœºå·</td><td></td></tr><tr><td>sex</td><td>varchar(2)</td><td>æ€§åˆ«</td><td></td></tr><tr><td>id_number</td><td>varchar(18)</td><td>èº«ä»½è¯å·</td><td></td></tr><tr><td>avatar</td><td>varchar(500)</td><td>å¾®ä¿¡ç”¨æˆ·å¤´åƒè·¯å¾„</td><td></td></tr><tr><td>create_time</td><td>datetime</td><td>æ³¨å†Œæ—¶é—´</td><td></td></tr></tbody></table><p><strong>è¯´æ˜ï¼š</strong>æ‰‹æœºå·å­—æ®µæ¯”è¾ƒç‰¹æ®Šï¼Œä¸ªäººèº«ä»½æ³¨å†Œçš„å°ç¨‹åºæ²¡æœ‰æƒé™è·å–åˆ°å¾®ä¿¡ç”¨æˆ·çš„æ‰‹æœºå·ã€‚å¦‚æœæ˜¯ä»¥ä¼ä¸šçš„èµ„è´¨<br>æ³¨å†Œçš„å°ç¨‹åºå°±èƒ½å¤Ÿæ‹¿åˆ°å¾®ä¿¡ç”¨æˆ·çš„æ‰‹æœºå·ã€‚</p><h3 id="3-4-ä»£ç å¼€å‘"><a href="#3-4-ä»£ç å¼€å‘" class="headerlink" title="3.4 ä»£ç å¼€å‘"></a>3.4 ä»£ç å¼€å‘</h3><h4 id="3-4-1-å®šä¹‰ç›¸å…³é…ç½®"><a href="#3-4-1-å®šä¹‰ç›¸å…³é…ç½®" class="headerlink" title="3.4.1 å®šä¹‰ç›¸å…³é…ç½®"></a>3.4.1 å®šä¹‰ç›¸å…³é…ç½®</h4><p><strong>é…ç½®å¾®ä¿¡ç™»å½•æ‰€éœ€é…ç½®é¡¹ï¼š</strong></p><p>application-dev.yml</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">sky</span><span class="token punctuation">:</span>  <span class="token key atrule">wechat</span><span class="token punctuation">:</span>    <span class="token key atrule">appid</span><span class="token punctuation">:</span> wxffb3637a228223b8    <span class="token key atrule">secret</span><span class="token punctuation">:</span> 84311df9199ecacdf4f12d27b6b9522d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>application.yml</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">sky</span><span class="token punctuation">:</span>  <span class="token key atrule">wechat</span><span class="token punctuation">:</span>    <span class="token key atrule">appid</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>sky.wechat.appid<span class="token punctuation">}</span>    <span class="token key atrule">secret</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>sky.wechat.secret<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>é…ç½®ä¸ºå¾®ä¿¡ç”¨æˆ·ç”Ÿæˆjwtä»¤ç‰Œæ—¶ä½¿ç”¨çš„é…ç½®é¡¹ï¼š</strong></p><p>application.yml</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">sky</span><span class="token punctuation">:</span>  <span class="token key atrule">jwt</span><span class="token punctuation">:</span>    <span class="token comment"># è®¾ç½®jwtç­¾ååŠ å¯†æ—¶ä½¿ç”¨çš„ç§˜é’¥</span>    <span class="token key atrule">admin-secret-key</span><span class="token punctuation">:</span> itcast    <span class="token comment"># è®¾ç½®jwtè¿‡æœŸæ—¶é—´</span>    <span class="token key atrule">admin-ttl</span><span class="token punctuation">:</span> <span class="token number">7200000</span>    <span class="token comment"># è®¾ç½®å‰ç«¯ä¼ é€’è¿‡æ¥çš„ä»¤ç‰Œåç§°</span>    <span class="token key atrule">admin-token-name</span><span class="token punctuation">:</span> token    <span class="token key atrule">user-secret-key</span><span class="token punctuation">:</span> itheima    <span class="token key atrule">user-ttl</span><span class="token punctuation">:</span> <span class="token number">7200000</span>    <span class="token key atrule">user-token-name</span><span class="token punctuation">:</span> authentication<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-4-2-DTOè®¾è®¡"><a href="#3-4-2-DTOè®¾è®¡" class="headerlink" title="3.4.2 DTOè®¾è®¡"></a>3.4.2 DTOè®¾è®¡</h4><p><strong>æ ¹æ®ä¼ å…¥å‚æ•°è®¾è®¡DTOç±»ï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-89ffa5bffd4063e5454a4d5cf61626b1-image-20221205183625049.png" alt="image-20221205183625049" style="zoom:50%;"> <p>åœ¨sky-pojoæ¨¡å—ï¼ŒUserLoginDTO.javaå·²å®šä¹‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>dto</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span></span><span class="token punctuation">;</span><span class="token comment">/** * Cç«¯ç”¨æˆ·ç™»å½• */</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserLoginDTO</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> code<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-4-3-VOè®¾è®¡"><a href="#3-4-3-VOè®¾è®¡" class="headerlink" title="3.4.3 VOè®¾è®¡"></a>3.4.3 VOè®¾è®¡</h4><p><strong>æ ¹æ®è¿”å›æ•°æ®è®¾è®¡VOç±»ï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-c480c0d7e972c9fd4638e92aa7399e9b-image-20221205183923272.png" alt="image-20221205183923272" style="zoom:50%;"> <p>åœ¨sky-pojoæ¨¡å—ï¼ŒUserLoginVO.javaå·²å®šä¹‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>vo</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Builder</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">NoArgsConstructor</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@Builder</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserLoginVO</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> openid<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> token<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-4-4-Controllerå±‚"><a href="#3-4-4-Controllerå±‚" class="headerlink" title="3.4.4 Controllerå±‚"></a>3.4.4 Controllerå±‚</h4><p><strong>æ ¹æ®æ¥å£å®šä¹‰åˆ›å»ºUserControllerçš„loginæ–¹æ³•ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>user</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>constant<span class="token punctuation">.</span></span><span class="token class-name">JwtClaimsConstant</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">UserLoginDTO</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">JwtProperties</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>result<span class="token punctuation">.</span></span><span class="token class-name">Result</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">UserService</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">JwtUtil</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>vo<span class="token punctuation">.</span></span><span class="token class-name">UserLoginVO</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Api</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiOperation</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestBody</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/user/user"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">"Cç«¯ç”¨æˆ·ç›¸å…³æ¥å£"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">JwtProperties</span> jwtProperties<span class="token punctuation">;</span>    <span class="token comment">/**     * å¾®ä¿¡ç™»å½•     * @param userLoginDTO     * @return     */</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"å¾®ä¿¡ç™»å½•"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserLoginVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">UserLoginDTO</span> userLoginDTO<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"å¾®ä¿¡ç”¨æˆ·ç™»å½•ï¼š{}"</span><span class="token punctuation">,</span>userLoginDTO<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å¾®ä¿¡ç™»å½•</span>        <span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">wxLogin</span><span class="token punctuation">(</span>userLoginDTO<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åç»ªæ­¥éª¤å®ç°</span>        <span class="token comment">//ä¸ºå¾®ä¿¡ç”¨æˆ·ç”Ÿæˆjwtä»¤ç‰Œ</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> claims <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        claims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">JwtClaimsConstant</span><span class="token punctuation">.</span><span class="token constant">USER_ID</span><span class="token punctuation">,</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> token <span class="token operator">=</span> <span class="token class-name">JwtUtil</span><span class="token punctuation">.</span><span class="token function">createJWT</span><span class="token punctuation">(</span>jwtProperties<span class="token punctuation">.</span><span class="token function">getUserSecretKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> jwtProperties<span class="token punctuation">.</span><span class="token function">getUserTtl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> claims<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">UserLoginVO</span> userLoginVO <span class="token operator">=</span> <span class="token class-name">UserLoginVO</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">openid</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getOpenid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">token</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>userLoginVO<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ï¼ŒJwtClaimsConstant.USER_IDå¸¸é‡å·²å®šä¹‰ã€‚</p><h4 id="3-4-5-Serviceå±‚æ¥å£"><a href="#3-4-5-Serviceå±‚æ¥å£" class="headerlink" title="3.4.5 Serviceå±‚æ¥å£"></a>3.4.5 Serviceå±‚æ¥å£</h4><p><strong>åˆ›å»ºUserServiceæ¥å£ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">UserLoginDTO</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * å¾®ä¿¡ç™»å½•     * @param userLoginDTO     * @return     */</span>    <span class="token class-name">User</span> <span class="token function">wxLogin</span><span class="token punctuation">(</span><span class="token class-name">UserLoginDTO</span> userLoginDTO<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-4-6-Serviceå±‚å®ç°ç±»"><a href="#3-4-6-Serviceå±‚å®ç°ç±»" class="headerlink" title="3.4.6 Serviceå±‚å®ç°ç±»"></a>3.4.6 Serviceå±‚å®ç°ç±»</h4><p><strong>åˆ›å»ºUserServiceImplå®ç°ç±»ï¼š</strong>å®ç°è·å–å¾®ä¿¡ç”¨æˆ·çš„openidå’Œå¾®ä¿¡ç™»å½•åŠŸèƒ½</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span></span><span class="token class-name">JSON</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span></span><span class="token class-name">JSONObject</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>constant<span class="token punctuation">.</span></span><span class="token class-name">MessageConstant</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">UserLoginDTO</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>exception<span class="token punctuation">.</span></span><span class="token class-name">LoginFailedException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">UserMapper</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">WeChatProperties</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">UserService</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">HttpClientUtil</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Service</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token comment">//å¾®ä¿¡æœåŠ¡æ¥å£åœ°å€</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">WX_LOGIN</span> <span class="token operator">=</span> <span class="token string">"https://api.weixin.qq.com/sns/jscode2session"</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">WeChatProperties</span> weChatProperties<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">UserMapper</span> userMapper<span class="token punctuation">;</span>    <span class="token comment">/**     * å¾®ä¿¡ç™»å½•     * @param userLoginDTO     * @return     */</span>    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">wxLogin</span><span class="token punctuation">(</span><span class="token class-name">UserLoginDTO</span> userLoginDTO<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">String</span> openid <span class="token operator">=</span> <span class="token function">getOpenid</span><span class="token punctuation">(</span>userLoginDTO<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//åˆ¤æ–­openidæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºè¡¨ç¤ºç™»å½•å¤±è´¥ï¼ŒæŠ›å‡ºä¸šåŠ¡å¼‚å¸¸</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>openid <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">LoginFailedException</span><span class="token punctuation">(</span><span class="token class-name">MessageConstant</span><span class="token punctuation">.</span><span class="token constant">LOGIN_FAILED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">//åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦ä¸ºæ–°ç”¨æˆ·</span>        <span class="token class-name">User</span> user <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getByOpenid</span><span class="token punctuation">(</span>openid<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å¦‚æœæ˜¯æ–°ç”¨æˆ·ï¼Œè‡ªåŠ¨å®Œæˆæ³¨å†Œ</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            user <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">openid</span><span class="token punctuation">(</span>openid<span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">createTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            userMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åç»ªæ­¥éª¤å®ç°</span>        <span class="token punctuation">}</span>        <span class="token comment">//è¿”å›è¿™ä¸ªç”¨æˆ·å¯¹è±¡</span>        <span class="token keyword">return</span> user<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**     * è°ƒç”¨å¾®ä¿¡æ¥å£æœåŠ¡ï¼Œè·å–å¾®ä¿¡ç”¨æˆ·çš„openid     * @param code     * @return     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getOpenid</span><span class="token punctuation">(</span><span class="token class-name">String</span> code<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//è°ƒç”¨å¾®ä¿¡æ¥å£æœåŠ¡ï¼Œè·å¾—å½“å‰å¾®ä¿¡ç”¨æˆ·çš„openid</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"appid"</span><span class="token punctuation">,</span>weChatProperties<span class="token punctuation">.</span><span class="token function">getAppid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"secret"</span><span class="token punctuation">,</span>weChatProperties<span class="token punctuation">.</span><span class="token function">getSecret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"js_code"</span><span class="token punctuation">,</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"grant_type"</span><span class="token punctuation">,</span><span class="token string">"authorization_code"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token class-name">HttpClientUtil</span><span class="token punctuation">.</span><span class="token function">doGet</span><span class="token punctuation">(</span><span class="token constant">WX_LOGIN</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> openid <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"openid"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> openid<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-4-7-Mapperå±‚"><a href="#3-4-7-Mapperå±‚" class="headerlink" title="3.4.7 Mapperå±‚"></a>3.4.7 Mapperå±‚</h4><p><strong>åˆ›å»ºUserMapperæ¥å£ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Select</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æ ¹æ®openidæŸ¥è¯¢ç”¨æˆ·     * @param openid     * @return     */</span>    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from user where openid = #{openid}"</span><span class="token punctuation">)</span>    <span class="token class-name">User</span> <span class="token function">getByOpenid</span><span class="token punctuation">(</span><span class="token class-name">String</span> openid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * æ’å…¥æ•°æ®     * @param user     */</span>    <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åˆ›å»ºUserMapper.xmlæ˜ å°„æ–‡ä»¶ï¼š</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.sky.mapper.UserMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>insert<span class="token punctuation">"</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        insert into user (openid, name, phone, sex, id_number, avatar, create_time)        values (#{openid}, #{name}, #{phone}, #{sex}, #{idNumber}, #{avatar}, #{createTime})    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-4-8-ç¼–å†™æ‹¦æˆªå™¨"><a href="#3-4-8-ç¼–å†™æ‹¦æˆªå™¨" class="headerlink" title="3.4.8 ç¼–å†™æ‹¦æˆªå™¨"></a>3.4.8 ç¼–å†™æ‹¦æˆªå™¨</h4><p><strong>ç¼–å†™æ‹¦æˆªå™¨JwtTokenUserInterceptorï¼š</strong>ç»Ÿä¸€æ‹¦æˆªç”¨æˆ·ç«¯å‘é€çš„è¯·æ±‚å¹¶è¿›è¡Œjwtæ ¡éªŒ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>interceptor</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>constant<span class="token punctuation">.</span></span><span class="token class-name">JwtClaimsConstant</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">BaseContext</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">JwtProperties</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">JwtUtil</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>jsonwebtoken<span class="token punctuation">.</span></span><span class="token class-name">Claims</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>method<span class="token punctuation">.</span></span><span class="token class-name">HandlerMethod</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">HandlerInterceptor</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span><span class="token comment">/** * jwtä»¤ç‰Œæ ¡éªŒçš„æ‹¦æˆªå™¨ */</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtTokenUserInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">JwtProperties</span> jwtProperties<span class="token punctuation">;</span>    <span class="token comment">/**     * æ ¡éªŒjwt     *     * @param request     * @param response     * @param handler     * @return     * @throws Exception     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">//åˆ¤æ–­å½“å‰æ‹¦æˆªåˆ°çš„æ˜¯Controllerçš„æ–¹æ³•è¿˜æ˜¯å…¶ä»–èµ„æº</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>handler <span class="token keyword">instanceof</span> <span class="token class-name">HandlerMethod</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">//å½“å‰æ‹¦æˆªåˆ°çš„ä¸æ˜¯åŠ¨æ€æ–¹æ³•ï¼Œç›´æ¥æ”¾è¡Œ</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">//1ã€ä»è¯·æ±‚å¤´ä¸­è·å–ä»¤ç‰Œ</span>        <span class="token class-name">String</span> token <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span>jwtProperties<span class="token punctuation">.</span><span class="token function">getUserTokenName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2ã€æ ¡éªŒä»¤ç‰Œ</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"jwtæ ¡éªŒ:{}"</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Claims</span> claims <span class="token operator">=</span> <span class="token class-name">JwtUtil</span><span class="token punctuation">.</span><span class="token function">parseJWT</span><span class="token punctuation">(</span>jwtProperties<span class="token punctuation">.</span><span class="token function">getUserSecretKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Long</span> userId <span class="token operator">=</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>claims<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">JwtClaimsConstant</span><span class="token punctuation">.</span><span class="token constant">USER_ID</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"å½“å‰ç”¨æˆ·çš„idï¼š"</span><span class="token punctuation">,</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">BaseContext</span><span class="token punctuation">.</span><span class="token function">setCurrentId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//3ã€é€šè¿‡ï¼Œæ”¾è¡Œ</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">//4ã€ä¸é€šè¿‡ï¼Œå“åº”401çŠ¶æ€ç </span>            response<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">401</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åœ¨WebMvcConfigurationé…ç½®ç±»ä¸­æ³¨å†Œæ‹¦æˆªå™¨ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Autowired</span>   <span class="token keyword">private</span> <span class="token class-name">JwtTokenUserInterceptor</span> jwtTokenUserInterceptor<span class="token punctuation">;</span><span class="token comment">/**    * æ³¨å†Œè‡ªå®šä¹‰æ‹¦æˆªå™¨    * @param registry    */</span>   <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>       log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"å¼€å§‹æ³¨å†Œè‡ªå®šä¹‰æ‹¦æˆªå™¨..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//.........</span>       registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>jwtTokenUserInterceptor<span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/user/**"</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/user/user/login"</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/user/shop/status"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-5-åŠŸèƒ½æµ‹è¯•"><a href="#3-5-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="3.5 åŠŸèƒ½æµ‹è¯•"></a>3.5 åŠŸèƒ½æµ‹è¯•</h3><p>é‡æ–°ç¼–è¯‘å°ç¨‹åºï¼Œè¿›è¡Œç™»å½•ï¼Œè·å–åˆ°openidå’Œtokenæ•°æ®</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-4f40161f26ee2a595c3a1ded566470ca-image-20221205192506490.png" alt="image-20221205192506490" style="zoom:50%;"> <p>æŸ¥çœ‹åå°æ—¥å¿—</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-c35adf98eae1fb333088f6c2410e20b4-image-20221205192943394.png" alt="image-20221205192943394" style="zoom:67%;">  <p>æŸ¥çœ‹æ•°æ®åº“userè¡¨ï¼Œç¬¬ä¸€æ¬¡ç™»å½•ï¼Œä¼šè‡ªåŠ¨æ³¨å†Œ</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-8c93e132f9d39f77474f648ebace51fa-image-20221205193018421.png" alt="image-20221205193018421" style="zoom: 67%;">  <h2 id="4-å¯¼å…¥å•†å“æµè§ˆåŠŸèƒ½ä»£ç "><a href="#4-å¯¼å…¥å•†å“æµè§ˆåŠŸèƒ½ä»£ç " class="headerlink" title="4. å¯¼å…¥å•†å“æµè§ˆåŠŸèƒ½ä»£ç "></a>4. å¯¼å…¥å•†å“æµè§ˆåŠŸèƒ½ä»£ç </h2><h3 id="4-1-éœ€æ±‚åˆ†æå’Œè®¾è®¡"><a href="#4-1-éœ€æ±‚åˆ†æå’Œè®¾è®¡" class="headerlink" title="4.1 éœ€æ±‚åˆ†æå’Œè®¾è®¡"></a>4.1 éœ€æ±‚åˆ†æå’Œè®¾è®¡</h3><h4 id="4-1-1-äº§å“åŸå‹"><a href="#4-1-1-äº§å“åŸå‹" class="headerlink" title="4.1.1 äº§å“åŸå‹"></a>4.1.1 äº§å“åŸå‹</h4><p>ç”¨æˆ·ç™»å½•æˆåŠŸåè·³è½¬åˆ°ç³»ç»Ÿé¦–é¡µï¼Œåœ¨é¦–é¡µéœ€è¦æ ¹æ®åˆ†ç±»æ¥å±•ç¤ºèœå“å’Œå¥—é¤ã€‚å¦‚æœèœå“è®¾ç½®äº†å£å‘³ä¿¡æ¯ï¼Œéœ€è¦å±•ç¤º<img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-b953848c00dca88786db6757fd4911de-image-20210812205330291.png" alt="image-20210812205330291" style="zoom: 80%;">æŒ‰é’®ï¼Œå¦åˆ™æ˜¾ç¤º<img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-93bd20c5dd411747729a34a25234486b-image-20210812205346846.png" alt="image-20210812205346846" style="zoom:80%;">æŒ‰é’®ã€‚</p><p>â€‹         <strong>èœå“åˆ—è¡¨æ•ˆæœå›¾</strong>                                                   <strong>èœå“å£å‘³æ•ˆæœå›¾</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-656c8327f275a0600fbbd9c708d2e972-image-20221205193821129.png" alt="image-20221205193821129" style="zoom: 50%;">                               <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-bb7179de80a17628475b58a26e93476a-image-20221205193846867.png" alt="image-20221205193846867" style="zoom:50%;"> </p><p>â€‹         <strong>å¥—é¤åˆ—è¡¨æ•ˆæœå›¾</strong>                                                   <strong>å¥—é¤è¯¦æƒ…æ•ˆæœå›¾</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-fbc7e6d7f2f2839cd72094ab81c86eb3-image-20221205193859016.png" alt="image-20221205193859016" style="zoom:50%;">                               <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-90f0c43e0eca59e79379ae69db1fd8e3-image-20221205193911476.png" alt="image-20221205193911476" style="zoom:50%;"> </p><h4 id="4-1-2-æ¥å£è®¾è®¡"><a href="#4-1-2-æ¥å£è®¾è®¡" class="headerlink" title="4.1.2 æ¥å£è®¾è®¡"></a>4.1.2 æ¥å£è®¾è®¡</h4><p>æ ¹æ®ä¸Šè¿°åŸå‹å›¾å…ˆ<strong>ç²—ç²’åº¦</strong>è®¾è®¡æ¥å£ï¼Œå…±åŒ…å«4ä¸ªæ¥å£ã€‚</p><p><strong>æ¥å£è®¾è®¡ï¼š</strong></p><ul><li>æŸ¥è¯¢åˆ†ç±»</li><li>æ ¹æ®åˆ†ç±»idæŸ¥è¯¢èœå“</li><li>æ ¹æ®åˆ†ç±»idæŸ¥è¯¢å¥—é¤</li><li>æ ¹æ®å¥—é¤idæŸ¥è¯¢åŒ…å«çš„èœå“</li></ul><p>æ¥ä¸‹æ¥<strong>ç»†ç²’åº¦</strong>åˆ†ææ¯ä¸ªæ¥å£ï¼Œæ˜ç¡®æ¯ä¸ªæ¥å£çš„è¯·æ±‚æ–¹å¼ã€è¯·æ±‚è·¯å¾„ã€ä¼ å…¥å‚æ•°å’Œè¿”å›å€¼ã€‚</p><p><strong>1). æŸ¥è¯¢åˆ†ç±»</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-ed924eb7f2e5ffdd714c80f35f0a70ce-image-20221205200235328.png" alt="image-20221205200235328" style="zoom:50%;"> <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-a983392838668f9fbca5913fbe206250-image-20221205200246588.png" alt="image-20221205200246588" style="zoom:50%;"></p><p><strong>2). æ ¹æ®åˆ†ç±»idæŸ¥è¯¢èœå“</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-47b17fe3ba42a63fc3cdc2b16b85e020-image-20221205200319686.png" alt="image-20221205200319686" style="zoom:50%;"> <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-7a169c7d432e5639b2f7cf8246956a11-image-20221205200335214.png" alt="image-20221205200335214" style="zoom:50%;"></p><p><strong>3). æ ¹æ®åˆ†ç±»idæŸ¥è¯¢å¥—é¤</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-448d585f541895b2c9ea271f9b74b0ca-image-20221205200415135.png" alt="image-20221205200415135" style="zoom:50%;"> <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-11efad18499b29dba44629f8fe0ca785-image-20221205200425607.png" alt="image-20221205200425607" style="zoom:50%;"></p><p><strong>4). æ ¹æ®å¥—é¤idæŸ¥è¯¢åŒ…å«çš„èœå“</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-7cdf321d36e648d6586bcf267715d706-image-20221205200537591.png" alt="image-20221205200537591" style="zoom:50%;"> <h3 id="4-2-ä»£ç å¯¼å…¥"><a href="#4-2-ä»£ç å¯¼å…¥" class="headerlink" title="4.2 ä»£ç å¯¼å…¥"></a>4.2 ä»£ç å¯¼å…¥</h3><p>å¯¼å…¥èµ„æ–™ä¸­çš„å•†å“æµè§ˆåŠŸèƒ½ä»£ç å³å¯</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-e521d079ee6fdc5b5b4a5667ec8c6ed4-image-20221205201043358.png" alt="image-20221205201043358" style="zoom:50%;"> <p>å¯æŒ‰ç…§mapperâ€“&gt;serviceâ€“&gt;controllerä¾æ¬¡å¯¼å…¥ï¼Œè¿™æ ·ä»£ç ä¸ä¼šæ˜¾ç¤ºç›¸åº”çš„æŠ¥é”™ã€‚</p><p>è¿›å…¥åˆ°sky-serveræ¨¡å—ä¸­</p><h4 id="4-2-1-Mapperå±‚"><a href="#4-2-1-Mapperå±‚" class="headerlink" title="4.2.1 Mapperå±‚"></a>4.2.1 Mapperå±‚</h4><p><strong>åœ¨SetmealMapper.javaä¸­æ·»åŠ listå’ŒgetDishItemBySetmealIdä¸¤ä¸ªæ–¹æ³•</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**    * åŠ¨æ€æ¡ä»¶æŸ¥è¯¢å¥—é¤    * @param setmeal    * @return    */</span>   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Setmeal</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token class-name">Setmeal</span> setmeal<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">/**    * æ ¹æ®å¥—é¤idæŸ¥è¯¢èœå“é€‰é¡¹    * @param setmealId    * @return    */</span>   <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select sd.name, sd.copies, d.image, d.description "</span> <span class="token operator">+</span>           <span class="token string">"from setmeal_dish sd left join dish d on sd.dish_id = d.id "</span> <span class="token operator">+</span>           <span class="token string">"where sd.setmeal_id = #{setmealId}"</span><span class="token punctuation">)</span>   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DishItemVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">getDishItemBySetmealId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> setmealId<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åˆ›å»ºSetmealMapper.xmlæ–‡ä»¶</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.sky.mapper.SetmealMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Setmeal<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Setmeal<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        select * from setmeal        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                and name like concat('%',#{name},'%')            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>categoryId != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                and category_id = #{categoryId}            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>status != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                and status = #{status}            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-2-2-Serviceå±‚"><a href="#4-2-2-Serviceå±‚" class="headerlink" title="4.2.2 Serviceå±‚"></a>4.2.2 Serviceå±‚</h4><p><strong>åˆ›å»ºSetmealService.java</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">SetmealDTO</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">SetmealPageQueryDTO</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Setmeal</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>result<span class="token punctuation">.</span></span><span class="token class-name">PageResult</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>vo<span class="token punctuation">.</span></span><span class="token class-name">DishItemVO</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>vo<span class="token punctuation">.</span></span><span class="token class-name">SetmealVO</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SetmealService</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æ¡ä»¶æŸ¥è¯¢     * @param setmeal     * @return     */</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Setmeal</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token class-name">Setmeal</span> setmeal<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * æ ¹æ®idæŸ¥è¯¢èœå“é€‰é¡¹     * @param id     * @return     */</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DishItemVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">getDishItemById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åˆ›å»ºSetmealServiceImpl.java</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Setmeal</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">DishMapper</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">SetmealDishMapper</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">SetmealMapper</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">SetmealService</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>vo<span class="token punctuation">.</span></span><span class="token class-name">DishItemVO</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span><span class="token comment">/** * å¥—é¤ä¸šåŠ¡å®ç° */</span><span class="token annotation punctuation">@Service</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SetmealServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SetmealService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">SetmealMapper</span> setmealMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">SetmealDishMapper</span> setmealDishMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DishMapper</span> dishMapper<span class="token punctuation">;</span>    <span class="token comment">/**     * æ¡ä»¶æŸ¥è¯¢     * @param setmeal     * @return     */</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Setmeal</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token class-name">Setmeal</span> setmeal<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Setmeal</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> setmealMapper<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>setmeal<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**     * æ ¹æ®idæŸ¥è¯¢èœå“é€‰é¡¹     * @param id     * @return     */</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DishItemVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">getDishItemById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> setmealMapper<span class="token punctuation">.</span><span class="token function">getDishItemBySetmealId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åœ¨DishService.javaä¸­æ·»åŠ listWithFlavoræ–¹æ³•å®šä¹‰</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**    * æ¡ä»¶æŸ¥è¯¢èœå“å’Œå£å‘³    * @param dish    * @return    */</span>   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DishVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">listWithFlavor</span><span class="token punctuation">(</span><span class="token class-name">Dish</span> dish<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åœ¨DishServiceImpl.javaä¸­å®ç°listWithFlavoræ–¹æ³•</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**    * æ¡ä»¶æŸ¥è¯¢èœå“å’Œå£å‘³    * @param dish    * @return    */</span>   <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DishVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">listWithFlavor</span><span class="token punctuation">(</span><span class="token class-name">Dish</span> dish<span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dish</span><span class="token punctuation">&gt;</span></span> dishList <span class="token operator">=</span> dishMapper<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>dish<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DishVO</span><span class="token punctuation">&gt;</span></span> dishVOList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Dish</span> d <span class="token operator">:</span> dishList<span class="token punctuation">)</span> <span class="token punctuation">{</span>           <span class="token class-name">DishVO</span> dishVO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DishVO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span>dishVO<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">//æ ¹æ®èœå“idæŸ¥è¯¢å¯¹åº”çš„å£å‘³</span>           <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DishFlavor</span><span class="token punctuation">&gt;</span></span> flavors <span class="token operator">=</span> dishFlavorMapper<span class="token punctuation">.</span><span class="token function">getByDishId</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           dishVO<span class="token punctuation">.</span><span class="token function">setFlavors</span><span class="token punctuation">(</span>flavors<span class="token punctuation">)</span><span class="token punctuation">;</span>           dishVOList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>dishVO<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> dishVOList<span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-2-3-Controllerå±‚"><a href="#4-2-3-Controllerå±‚" class="headerlink" title="4.2.3 Controllerå±‚"></a>4.2.3 Controllerå±‚</h4><p><strong>åˆ›å»ºDishController.java</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>user</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>constant<span class="token punctuation">.</span></span><span class="token class-name">StatusConstant</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Dish</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>result<span class="token punctuation">.</span></span><span class="token class-name">Result</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">DishService</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>vo<span class="token punctuation">.</span></span><span class="token class-name">DishVO</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Api</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiOperation</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token punctuation">(</span><span class="token string">"userDishController"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/user/dish"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">"Cç«¯-èœå“æµè§ˆæ¥å£"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DishController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DishService</span> dishService<span class="token punctuation">;</span>    <span class="token comment">/**     * æ ¹æ®åˆ†ç±»idæŸ¥è¯¢èœå“     *     * @param categoryId     * @return     */</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/list"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"æ ¹æ®åˆ†ç±»idæŸ¥è¯¢èœå“"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">DishVO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token class-name">Long</span> categoryId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Dish</span> dish <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        dish<span class="token punctuation">.</span><span class="token function">setCategoryId</span><span class="token punctuation">(</span>categoryId<span class="token punctuation">)</span><span class="token punctuation">;</span>        dish<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token class-name">StatusConstant</span><span class="token punctuation">.</span><span class="token constant">ENABLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æŸ¥è¯¢èµ·å”®ä¸­çš„èœå“</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DishVO</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> dishService<span class="token punctuation">.</span><span class="token function">listWithFlavor</span><span class="token punctuation">(</span>dish<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åˆ›å»ºCategoryController.java</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>user</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Category</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>result<span class="token punctuation">.</span></span><span class="token class-name">Result</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">CategoryService</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Api</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiOperation</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token punctuation">(</span><span class="token string">"userCategoryController"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/user/category"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">"Cç«¯-åˆ†ç±»æ¥å£"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CategoryController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">CategoryService</span> categoryService<span class="token punctuation">;</span>    <span class="token comment">/**     * æŸ¥è¯¢åˆ†ç±»     * @param type     * @return     */</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/list"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"æŸ¥è¯¢åˆ†ç±»"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Category</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Category</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> categoryService<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åˆ›å»ºSetmealController.java</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>user</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>constant<span class="token punctuation">.</span></span><span class="token class-name">StatusConstant</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Setmeal</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>result<span class="token punctuation">.</span></span><span class="token class-name">Result</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">SetmealService</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>vo<span class="token punctuation">.</span></span><span class="token class-name">DishItemVO</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Api</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiOperation</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token punctuation">(</span><span class="token string">"userSetmealController"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/user/setmeal"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">"Cç«¯-å¥—é¤æµè§ˆæ¥å£"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SetmealController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">SetmealService</span> setmealService<span class="token punctuation">;</span>    <span class="token comment">/**     * æ¡ä»¶æŸ¥è¯¢     *     * @param categoryId     * @return     */</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/list"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"æ ¹æ®åˆ†ç±»idæŸ¥è¯¢å¥—é¤"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Setmeal</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token class-name">Long</span> categoryId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Setmeal</span> setmeal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Setmeal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        setmeal<span class="token punctuation">.</span><span class="token function">setCategoryId</span><span class="token punctuation">(</span>categoryId<span class="token punctuation">)</span><span class="token punctuation">;</span>        setmeal<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token class-name">StatusConstant</span><span class="token punctuation">.</span><span class="token constant">ENABLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Setmeal</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> setmealService<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>setmeal<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**     * æ ¹æ®å¥—é¤idæŸ¥è¯¢åŒ…å«çš„èœå“åˆ—è¡¨     *     * @param id     * @return     */</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/dish/{id}"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"æ ¹æ®å¥—é¤idæŸ¥è¯¢åŒ…å«çš„èœå“åˆ—è¡¨"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">DishItemVO</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">dishList</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DishItemVO</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> setmealService<span class="token punctuation">.</span><span class="token function">getDishItemById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-3-åŠŸèƒ½æµ‹è¯•"><a href="#4-3-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="4.3 åŠŸèƒ½æµ‹è¯•"></a>4.3 åŠŸèƒ½æµ‹è¯•</h3><p>é‡å¯æœåŠ¡å™¨ã€é‡æ–°ç¼–è¯‘å°ç¨‹åº</p><p>å¾®ä¿¡ç™»å½•è¿›å…¥é¦–é¡µ</p><p><strong>èœå“å’Œå¥—é¤åˆ†ç±»æŸ¥è¯¢ï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-c8384f78d5b916ed9108e08dd44f648e-image-20221205205634465.png" alt="image-20221205205634465" style="zoom:50%;"> <p><strong>å…·ä½“åˆ†ç±»ä¸‹çš„èœå“æŸ¥è¯¢ï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-0aa73235878fa691d519d097b9e9f9e4-image-20221205205935019.png" alt="image-20221205205935019" style="zoom:50%;"> <p><strong>èœå“å£å‘³æŸ¥è¯¢ï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-70aff823b2c716b6d5ac953cdcfbb8a8-image-20221205210121546.png" alt="image-20221205210121546" style="zoom:50%;"> <h3 id="4-4-ä»£ç æäº¤"><a href="#4-4-ä»£ç æäº¤" class="headerlink" title="4.4 ä»£ç æäº¤"></a>4.4 ä»£ç æäº¤</h3><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/22-d0d0797d03f0ce840b90b9db832fa176-image-20221205210421016.png" alt="image-20221205210421016" style="zoom:50%;"> <p>åç»­æ­¥éª¤å’Œå…¶å®ƒåŠŸèƒ½ä»£ç æäº¤ä¸€è‡´ï¼Œä¸å†èµ˜è¿°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HttpClient </tag>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
            <tag> å¾®ä¿¡ç™»å½• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rediså…¥é—¨</title>
      <link href="/2025/03/18/redis-ru-men/"/>
      <url>/2025/03/18/redis-ru-men/</url>
      
        <content type="html"><![CDATA[<h1 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h1><h2 id="è¯¾ç¨‹å†…å®¹"><a href="#è¯¾ç¨‹å†…å®¹" class="headerlink" title="è¯¾ç¨‹å†…å®¹"></a>è¯¾ç¨‹å†…å®¹</h2><ul><li>Rediså…¥é—¨</li><li>Redisæ•°æ®ç±»å‹</li><li>Rediså¸¸ç”¨å‘½ä»¤</li><li>åœ¨Javaä¸­æ“ä½œRedis</li><li>åº—é“ºè¥ä¸šçŠ¶æ€è®¾ç½®</li></ul><h2 id="1-Rediså…¥é—¨"><a href="#1-Rediså…¥é—¨" class="headerlink" title="1. Rediså…¥é—¨"></a>1. Rediså…¥é—¨</h2><h3 id="1-1-Redisç®€ä»‹"><a href="#1-1-Redisç®€ä»‹" class="headerlink" title="1.1 Redisç®€ä»‹"></a>1.1 Redisç®€ä»‹</h3><p>Redisæ˜¯ä¸€ä¸ªåŸºäº<strong>å†…å­˜</strong>çš„key-valueç»“æ„æ•°æ®åº“ã€‚Redis æ˜¯äº’è”ç½‘æŠ€æœ¯é¢†åŸŸä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„<strong>å­˜å‚¨ä¸­é—´ä»¶</strong>ã€‚</p><p><strong>å®˜ç½‘ï¼š</strong><a href="https://redis.io/">https://redis.io</a><br><strong>ä¸­æ–‡ç½‘ï¼š</strong><a href="https://www.redis.net.cn/">https://www.redis.net.cn/</a></p><p><strong>key-valueç»“æ„å­˜å‚¨ï¼š</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-52d776d91b80fe51b7fcebdee2da51c8-image-20221130173459174.png"> </p><p><strong>ä¸»è¦ç‰¹ç‚¹ï¼š</strong></p><ul><li>åŸºäºå†…å­˜å­˜å‚¨ï¼Œè¯»å†™æ€§èƒ½é«˜  </li><li>é€‚åˆå­˜å‚¨çƒ­ç‚¹æ•°æ®ï¼ˆçƒ­ç‚¹å•†å“ã€èµ„è®¯ã€æ–°é—»ï¼‰</li><li>ä¼ä¸šåº”ç”¨å¹¿æ³›</li></ul><p>Redisæ˜¯ç”¨Cè¯­è¨€å¼€å‘çš„ä¸€ä¸ªå¼€æºçš„é«˜æ€§èƒ½é”®å€¼å¯¹(key-value)æ•°æ®åº“ï¼Œå®˜æ–¹æä¾›çš„æ•°æ®æ˜¯å¯ä»¥è¾¾åˆ°100000+çš„QPSï¼ˆæ¯ç§’å†…æŸ¥è¯¢æ¬¡æ•°ï¼‰ã€‚å®ƒå­˜å‚¨çš„valueç±»å‹æ¯”è¾ƒä¸°å¯Œï¼Œä¹Ÿè¢«ç§°ä¸ºç»“æ„åŒ–çš„NoSqlæ•°æ®åº“ã€‚</p><p>NoSqlï¼ˆNot Only SQLï¼‰ï¼Œä¸ä»…ä»…æ˜¯SQLï¼Œæ³›æŒ‡<strong>éå…³ç³»å‹æ•°æ®åº“</strong>ã€‚NoSqlæ•°æ®åº“å¹¶ä¸æ˜¯è¦å–ä»£å…³ç³»å‹æ•°æ®åº“ï¼Œè€Œæ˜¯å…³ç³»å‹æ•°æ®åº“çš„è¡¥å……ã€‚</p><p><strong>å…³ç³»å‹æ•°æ®åº“(RDBMS)ï¼š</strong></p><ul><li>Mysql</li><li>Oracle</li><li>DB2</li><li>SQLServer</li></ul><p><strong>éå…³ç³»å‹æ•°æ®åº“(NoSql)ï¼š</strong></p><ul><li>Redis</li><li>Mongo db</li><li>MemCached</li></ul><h3 id="1-2-Redisä¸‹è½½ä¸å®‰è£…"><a href="#1-2-Redisä¸‹è½½ä¸å®‰è£…" class="headerlink" title="1.2 Redisä¸‹è½½ä¸å®‰è£…"></a>1.2 Redisä¸‹è½½ä¸å®‰è£…</h3><h4 id="1-2-1-Redisä¸‹è½½"><a href="#1-2-1-Redisä¸‹è½½" class="headerlink" title="1.2.1 Redisä¸‹è½½"></a>1.2.1 Redisä¸‹è½½</h4><p>Rediså®‰è£…åŒ…åˆ†ä¸ºwindowsç‰ˆå’ŒLinuxç‰ˆï¼š</p><ul><li>Windowsç‰ˆä¸‹è½½åœ°å€ï¼š<a href="https://github.com/microsoftarchive/redis/releases">https://github.com/microsoftarchive/redis/releases</a></li><li>Linuxç‰ˆä¸‹è½½åœ°å€ï¼š <a href="https://download.redis.io/releases/">https://download.redis.io/releases/</a></li></ul><p>èµ„æ–™ä¸­å·²æä¾›å¥½çš„å®‰è£…åŒ…ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-e97b2ee70e38f971b075b2741c551926-image-20210927092053283.png"> </p><p>é€šè¿‡ç½‘ç›˜åˆ†äº«çš„æ–‡ä»¶ï¼šRedis<br>       é“¾æ¥: <a href="https://pan.baidu.com/s/1dtkee2dKBbJ2opa8ohp8uw?pwd=6666">https://pan.baidu.com/s/1dtkee2dKBbJ2opa8ohp8uw?pwd=6666</a> æå–ç : 6666</p><h4 id="1-2-2-Rediså®‰è£…"><a href="#1-2-2-Rediså®‰è£…" class="headerlink" title="1.2.2 Rediså®‰è£…"></a>1.2.2 Rediså®‰è£…</h4><p><strong>1ï¼‰åœ¨Windowsä¸­å®‰è£…Redis(é¡¹ç›®ä¸­ä½¿ç”¨)</strong></p><p>Redisçš„Windowsç‰ˆå±äºç»¿è‰²è½¯ä»¶ï¼Œç›´æ¥è§£å‹å³å¯ä½¿ç”¨ï¼Œè§£å‹åç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-8f91d50d8480ab4a5c089b5e0a143fdf-image-20221130180657152.png" alt="image-20221130180657152" style="zoom:50%;"> <p><strong>2ï¼‰åœ¨Linuxä¸­å®‰è£…Redis(ç®€å•äº†è§£)</strong></p><p>åœ¨Linuxç³»ç»Ÿå®‰è£…Redisæ­¥éª¤ï¼š</p><ol><li>å°†Rediså®‰è£…åŒ…ä¸Šä¼ åˆ°Linux</li><li>è§£å‹å®‰è£…åŒ…ï¼Œå‘½ä»¤ï¼štar -zxvf redis-4.0.0.tar.gz -C /usr/local</li><li>å®‰è£…Redisçš„ä¾èµ–ç¯å¢ƒgccï¼Œå‘½ä»¤ï¼šyum install gcc-c++</li><li>è¿›å…¥/usr/local/redis-4.0.0ï¼Œè¿›è¡Œç¼–è¯‘ï¼Œå‘½ä»¤ï¼šmake</li><li>è¿›å…¥redisçš„srcç›®å½•è¿›è¡Œå®‰è£…ï¼Œå‘½ä»¤ï¼šmake install</li></ol><p>å®‰è£…åé‡ç‚¹æ–‡ä»¶è¯´æ˜ï¼š</p><ul><li>/usr/local/redis-4.0.0/src/redis-serverï¼šRedisæœåŠ¡å¯åŠ¨è„šæœ¬</li><li>/usr/local/redis-4.0.0/src/redis-cliï¼šRediså®¢æˆ·ç«¯è„šæœ¬</li><li>/usr/local/redis-4.0.0/redis.confï¼šRedisé…ç½®æ–‡ä»¶</li></ul><h3 id="1-3-RedisæœåŠ¡å¯åŠ¨ä¸åœæ­¢"><a href="#1-3-RedisæœåŠ¡å¯åŠ¨ä¸åœæ­¢" class="headerlink" title="1.3 RedisæœåŠ¡å¯åŠ¨ä¸åœæ­¢"></a>1.3 RedisæœåŠ¡å¯åŠ¨ä¸åœæ­¢</h3><p>ä»¥windowç‰ˆRedisè¿›è¡Œæ¼”ç¤ºï¼š</p><h4 id="1-3-1-æœåŠ¡å¯åŠ¨å‘½ä»¤"><a href="#1-3-1-æœåŠ¡å¯åŠ¨å‘½ä»¤" class="headerlink" title="1.3.1 æœåŠ¡å¯åŠ¨å‘½ä»¤"></a>1.3.1 æœåŠ¡å¯åŠ¨å‘½ä»¤</h4><p><strong>redis-server.exe redis.windows.conf</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-39036a8dca15d626b5afd761a9b72c4f-image-20221130181950351.png" alt="image-20221130181950351" style="zoom:50%;"> <p>RedisæœåŠ¡é»˜è®¤ç«¯å£å·ä¸º <strong>6379</strong> ï¼Œé€šè¿‡å¿«æ·é”®<strong>Ctrl + C</strong> å³å¯åœæ­¢RedisæœåŠ¡</p><p>å½“RedisæœåŠ¡å¯åŠ¨æˆåŠŸåï¼Œå¯é€šè¿‡å®¢æˆ·ç«¯è¿›è¡Œè¿æ¥ã€‚</p><h4 id="1-3-2-å®¢æˆ·ç«¯è¿æ¥å‘½ä»¤"><a href="#1-3-2-å®¢æˆ·ç«¯è¿æ¥å‘½ä»¤" class="headerlink" title="1.3.2 å®¢æˆ·ç«¯è¿æ¥å‘½ä»¤"></a>1.3.2 å®¢æˆ·ç«¯è¿æ¥å‘½ä»¤</h4><p><strong>redis-cli.exe</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-9ca8e4249871b404186b5e4ae22ddf0d-image-20221130182207020.png" alt="image-20221130182207020" style="zoom:50%;"> <p>é€šè¿‡redis-cli.exeå‘½ä»¤é»˜è®¤è¿æ¥çš„æ˜¯æœ¬åœ°çš„redisæœåŠ¡ï¼Œå¹¶ä¸”ä½¿ç”¨é»˜è®¤6379ç«¯å£ã€‚ä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®šå¦‚ä¸‹å‚æ•°è¿æ¥ï¼š</p><ul><li>-h ipåœ°å€</li><li>-p ç«¯å£å·</li><li>-a å¯†ç ï¼ˆå¦‚æœéœ€è¦ï¼‰</li></ul><h4 id="1-3-3-ä¿®æ”¹Redisé…ç½®æ–‡ä»¶"><a href="#1-3-3-ä¿®æ”¹Redisé…ç½®æ–‡ä»¶" class="headerlink" title="1.3.3 ä¿®æ”¹Redisé…ç½®æ–‡ä»¶"></a>1.3.3 ä¿®æ”¹Redisé…ç½®æ–‡ä»¶</h4><p>è®¾ç½®RedisæœåŠ¡å¯†ç ï¼Œä¿®æ”¹redis.windows.conf</p><pre class="line-numbers language-none"><code class="language-none">requirepass 123456<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>ä¿®æ”¹å¯†ç åéœ€è¦é‡å¯RedisæœåŠ¡æ‰èƒ½ç”Ÿæ•ˆ</li><li>Redisé…ç½®æ–‡ä»¶ä¸­ # è¡¨ç¤ºæ³¨é‡Š</li></ul><p>é‡å¯Redisåï¼Œå†æ¬¡è¿æ¥Redisæ—¶ï¼Œéœ€åŠ ä¸Šå¯†ç ï¼Œå¦åˆ™è¿æ¥å¤±è´¥ã€‚</p><pre class="line-numbers language-none"><code class="language-none">redis-cli.exe -h localhost -p 6379 -a 123456<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-cf36c83193fc15c6e5710dfeccbf1023-image-20221130183253539.png" alt="image-20221130183253539" style="zoom:50%;"> <p>æ­¤æ—¶ï¼Œ-h å’Œ -p å‚æ•°å¯çœç•¥ä¸å†™ã€‚</p><h4 id="1-3-4-Rediså®¢æˆ·ç«¯å›¾å½¢å·¥å…·"><a href="#1-3-4-Rediså®¢æˆ·ç«¯å›¾å½¢å·¥å…·" class="headerlink" title="1.3.4 Rediså®¢æˆ·ç«¯å›¾å½¢å·¥å…·"></a>1.3.4 Rediså®¢æˆ·ç«¯å›¾å½¢å·¥å…·</h4><p>é»˜è®¤æä¾›çš„å®¢æˆ·ç«¯è¿æ¥å·¥å…·ç•Œé¢ä¸å¤ªå‹å¥½ï¼ŒåŒæ—¶æ“ä½œä¹Ÿè¾ƒä¸ºéº»çƒ¦ï¼Œæ¥ä¸‹æ¥ï¼Œå¼•å…¥ä¸€ä¸ªRediså®¢æˆ·ç«¯å›¾å½¢å·¥å…·ã€‚</p><p>åœ¨å½“å¤©èµ„æ–™ä¸­å·²æä¾›å®‰è£…åŒ…ï¼Œç›´æ¥å®‰è£…å³å¯ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-6c28905cf369735039292a6c58375b71-image-20221130183746355.png" alt="image-20221130183746355" style="zoom:50%;"> <p>å®‰è£…å®Œæ¯•åï¼Œç›´æ¥åŒå‡»å¯åŠ¨</p><p><strong>æ–°å»ºè¿æ¥</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-db7e814f8589afc27dab6265c0fae7b5-image-20221130192210418.png" alt="image-20221130192210418" style="zoom: 33%;">  <p><strong>è¿æ¥æˆåŠŸ</strong> </p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-98e28aed57b5614a197ad667d5ef0854-image-20221130192310916.png" alt="image-20221130192310916" style="zoom: 33%;">  <h2 id="2-Redisæ•°æ®ç±»å‹"><a href="#2-Redisæ•°æ®ç±»å‹" class="headerlink" title="2. Redisæ•°æ®ç±»å‹"></a>2. Redisæ•°æ®ç±»å‹</h2><h3 id="2-1-äº”ç§å¸¸ç”¨æ•°æ®ç±»å‹ä»‹ç»"><a href="#2-1-äº”ç§å¸¸ç”¨æ•°æ®ç±»å‹ä»‹ç»" class="headerlink" title="2.1 äº”ç§å¸¸ç”¨æ•°æ®ç±»å‹ä»‹ç»"></a>2.1 äº”ç§å¸¸ç”¨æ•°æ®ç±»å‹ä»‹ç»</h3><p>Rediså­˜å‚¨çš„æ˜¯key-valueç»“æ„çš„æ•°æ®ï¼Œå…¶ä¸­keyæ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œvalueæœ‰5ç§å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼š</p><ul><li>å­—ç¬¦ä¸² string</li><li>å“ˆå¸Œ hash</li><li>åˆ—è¡¨ list</li><li>é›†åˆ set</li><li>æœ‰åºé›†åˆ sorted set / zset</li></ul><h3 id="2-2-å„ç§æ•°æ®ç±»å‹ç‰¹ç‚¹"><a href="#2-2-å„ç§æ•°æ®ç±»å‹ç‰¹ç‚¹" class="headerlink" title="2.2 å„ç§æ•°æ®ç±»å‹ç‰¹ç‚¹"></a>2.2 å„ç§æ•°æ®ç±»å‹ç‰¹ç‚¹</h3><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-2fa38f28d32145bbc01951b1d1193638-image-20221130190150749.png" alt="image-20221130190150749" style="zoom:50%;"> <p><strong>è§£é‡Šè¯´æ˜ï¼š</strong></p><ul><li>å­—ç¬¦ä¸²(string)ï¼šæ™®é€šå­—ç¬¦ä¸²ï¼ŒRedisä¸­æœ€ç®€å•çš„æ•°æ®ç±»å‹</li><li>å“ˆå¸Œ(hash)ï¼šä¹Ÿå«æ•£åˆ—ï¼Œç±»ä¼¼äºJavaä¸­çš„HashMapç»“æ„</li><li>åˆ—è¡¨(list)ï¼šæŒ‰ç…§æ’å…¥é¡ºåºæ’åºï¼Œå¯ä»¥æœ‰é‡å¤å…ƒç´ ï¼Œç±»ä¼¼äºJavaä¸­çš„LinkedList</li><li>é›†åˆ(set)ï¼šæ— åºé›†åˆï¼Œæ²¡æœ‰é‡å¤å…ƒç´ ï¼Œç±»ä¼¼äºJavaä¸­çš„HashSet</li><li>æœ‰åºé›†åˆ(sorted set/zset)ï¼šé›†åˆä¸­æ¯ä¸ªå…ƒç´ å…³è”ä¸€ä¸ªåˆ†æ•°(score)ï¼Œæ ¹æ®åˆ†æ•°å‡åºæ’åºï¼Œæ²¡æœ‰é‡å¤å…ƒç´ </li></ul><h2 id="3-Rediså¸¸ç”¨å‘½ä»¤"><a href="#3-Rediså¸¸ç”¨å‘½ä»¤" class="headerlink" title="3. Rediså¸¸ç”¨å‘½ä»¤"></a>3. Rediså¸¸ç”¨å‘½ä»¤</h2><h3 id="3-1-å­—ç¬¦ä¸²æ“ä½œå‘½ä»¤"><a href="#3-1-å­—ç¬¦ä¸²æ“ä½œå‘½ä»¤" class="headerlink" title="3.1 å­—ç¬¦ä¸²æ“ä½œå‘½ä»¤"></a>3.1 å­—ç¬¦ä¸²æ“ä½œå‘½ä»¤</h3><p>Redis ä¸­å­—ç¬¦ä¸²ç±»å‹å¸¸ç”¨å‘½ä»¤ï¼š</p><ul><li><strong>SET</strong> key value          è®¾ç½®æŒ‡å®škeyçš„å€¼</li><li><strong>GET</strong> key                                        è·å–æŒ‡å®škeyçš„å€¼</li><li><strong>SETEX</strong> key seconds value         è®¾ç½®æŒ‡å®škeyçš„å€¼ï¼Œå¹¶å°† key çš„è¿‡æœŸæ—¶é—´è®¾ä¸º seconds ç§’</li><li><strong>SETNX</strong> key value                        åªæœ‰åœ¨ key    ä¸å­˜åœ¨æ—¶è®¾ç½® key çš„å€¼</li></ul><p>æ›´å¤šå‘½ä»¤å¯ä»¥å‚è€ƒRedisä¸­æ–‡ç½‘ï¼š<a href="https://www.redis.net.cn/">https://www.redis.net.cn</a></p><h3 id="3-2-å“ˆå¸Œæ“ä½œå‘½ä»¤"><a href="#3-2-å“ˆå¸Œæ“ä½œå‘½ä»¤" class="headerlink" title="3.2 å“ˆå¸Œæ“ä½œå‘½ä»¤"></a>3.2 å“ˆå¸Œæ“ä½œå‘½ä»¤</h3><p>Redis hash æ˜¯ä¸€ä¸ªstringç±»å‹çš„ field å’Œ value çš„æ˜ å°„è¡¨ï¼Œhashç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ï¼Œå¸¸ç”¨å‘½ä»¤ï¼š</p><ul><li><strong>HSET</strong> key field value             å°†å“ˆå¸Œè¡¨ key ä¸­çš„å­—æ®µ field çš„å€¼è®¾ä¸º value</li><li><strong>HGET</strong> key field                       è·å–å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­æŒ‡å®šå­—æ®µçš„å€¼</li><li><strong>HDEL</strong> key field                       åˆ é™¤å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­çš„æŒ‡å®šå­—æ®µ</li><li><strong>HKEYS</strong> key                              è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰å­—æ®µ</li><li><strong>HVALS</strong> key                              è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰å€¼</li></ul><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-ea8e89f28869b2d10f641080a9aaae48-image-20221130193121969.png" alt="image-20221130193121969" style="zoom: 67%;"> <h3 id="3-3-åˆ—è¡¨æ“ä½œå‘½ä»¤"><a href="#3-3-åˆ—è¡¨æ“ä½œå‘½ä»¤" class="headerlink" title="3.3 åˆ—è¡¨æ“ä½œå‘½ä»¤"></a>3.3 åˆ—è¡¨æ“ä½œå‘½ä»¤</h3><p>Redis åˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºï¼Œå¸¸ç”¨å‘½ä»¤ï¼š</p><ul><li><strong>LPUSH</strong> key value1 [value2]         å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨</li><li><strong>LRANGE</strong> key start stop                è·å–åˆ—è¡¨æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ </li><li><strong>RPOP</strong> key                                       ç§»é™¤å¹¶è·å–åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´ </li><li><strong>LLEN</strong> key                                        è·å–åˆ—è¡¨é•¿åº¦</li><li><strong>BRPOP</strong> key1 [key2 ] timeout       ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œ å¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…    æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢</li></ul><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-d7150d6d14fe735160bc994a3a71c27d-image-20221130193332666.png" alt="image-20221130193332666" style="zoom: 67%;"> <h3 id="3-4-é›†åˆæ“ä½œå‘½ä»¤"><a href="#3-4-é›†åˆæ“ä½œå‘½ä»¤" class="headerlink" title="3.4 é›†åˆæ“ä½œå‘½ä»¤"></a>3.4 é›†åˆæ“ä½œå‘½ä»¤</h3><p>Redis set æ˜¯stringç±»å‹çš„æ— åºé›†åˆã€‚é›†åˆæˆå‘˜æ˜¯å”¯ä¸€çš„ï¼Œè¿™å°±æ„å‘³ç€é›†åˆä¸­ä¸èƒ½å‡ºç°é‡å¤çš„æ•°æ®ï¼Œå¸¸ç”¨å‘½ä»¤ï¼š</p><ul><li><strong>SADD</strong> key member1 [member2]            å‘é›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</li><li><strong>SMEMBERS</strong> key                                         è¿”å›é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜</li><li><strong>SCARD</strong> key                                                  è·å–é›†åˆçš„æˆå‘˜æ•°</li><li><strong>SINTER</strong> key1 [key2]                                   è¿”å›ç»™å®šæ‰€æœ‰é›†åˆçš„äº¤é›†</li><li><strong>SUNION</strong> key1 [key2]                                 è¿”å›æ‰€æœ‰ç»™å®šé›†åˆçš„å¹¶é›†</li><li><strong>SREM</strong> key member1 [member2]            ç§»é™¤é›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</li></ul><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-f26e5f9a4a33803939ecd10ed3c82132-image-20221130193532735.png" alt="image-20221130193532735" style="zoom: 67%;"> <h3 id="3-5-æœ‰åºé›†åˆæ“ä½œå‘½ä»¤"><a href="#3-5-æœ‰åºé›†åˆæ“ä½œå‘½ä»¤" class="headerlink" title="3.5 æœ‰åºé›†åˆæ“ä½œå‘½ä»¤"></a>3.5 æœ‰åºé›†åˆæ“ä½œå‘½ä»¤</h3><p>Redisæœ‰åºé›†åˆæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆï¼Œä¸”ä¸å…è®¸æœ‰é‡å¤æˆå‘˜ã€‚æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ã€‚å¸¸ç”¨å‘½ä»¤ï¼š</p><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><ul><li><strong>ZADD</strong> key score1 member1 [score2 member2]     å‘æœ‰åºé›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</li><li><strong>ZRANGE</strong> key start stop [WITHSCORES]                     é€šè¿‡ç´¢å¼•åŒºé—´è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šåŒºé—´å†…çš„æˆå‘˜</li><li><strong>ZINCRBY</strong> key increment member                              æœ‰åºé›†åˆä¸­å¯¹æŒ‡å®šæˆå‘˜çš„åˆ†æ•°åŠ ä¸Šå¢é‡ increment</li><li><strong>ZREM</strong> key member [member â€¦]                                ç§»é™¤æœ‰åºé›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</li></ul><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-49c9ae350f032421a0067fc89653199b-image-20221130193951036.png" alt="image-20221130193951036" style="zoom: 67%;"> <h3 id="3-6-é€šç”¨å‘½ä»¤"><a href="#3-6-é€šç”¨å‘½ä»¤" class="headerlink" title="3.6 é€šç”¨å‘½ä»¤"></a>3.6 é€šç”¨å‘½ä»¤</h3><p>Redisçš„é€šç”¨å‘½ä»¤æ˜¯ä¸åˆ†æ•°æ®ç±»å‹çš„ï¼Œéƒ½å¯ä»¥ä½¿ç”¨çš„å‘½ä»¤ï¼š</p><ul><li>KEYS pattern æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼( pattern)çš„ key </li><li>EXISTS key æ£€æŸ¥ç»™å®š key æ˜¯å¦å­˜åœ¨</li><li>TYPE key è¿”å› key æ‰€å‚¨å­˜çš„å€¼çš„ç±»å‹</li><li>DEL key è¯¥å‘½ä»¤ç”¨äºåœ¨ key å­˜åœ¨æ˜¯åˆ é™¤ key</li></ul><h2 id="4-åœ¨Javaä¸­æ“ä½œRedis"><a href="#4-åœ¨Javaä¸­æ“ä½œRedis" class="headerlink" title="4.åœ¨Javaä¸­æ“ä½œRedis"></a>4.åœ¨Javaä¸­æ“ä½œRedis</h2><h3 id="4-1-Redisçš„Javaå®¢æˆ·ç«¯"><a href="#4-1-Redisçš„Javaå®¢æˆ·ç«¯" class="headerlink" title="4.1 Redisçš„Javaå®¢æˆ·ç«¯"></a>4.1 Redisçš„Javaå®¢æˆ·ç«¯</h3><p>å‰é¢æˆ‘ä»¬è®²è§£äº†Redisçš„å¸¸ç”¨å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤æ˜¯æˆ‘ä»¬æ“ä½œRedisçš„åŸºç¡€ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨javaç¨‹åºä¸­åº”è¯¥å¦‚ä½•æ“ä½œRediså‘¢ï¼Ÿè¿™å°±éœ€è¦ä½¿ç”¨Redisçš„Javaå®¢æˆ·ç«¯ï¼Œå°±å¦‚åŒæˆ‘ä»¬ä½¿ç”¨JDBCæ“ä½œMySQLæ•°æ®åº“ä¸€æ ·ã€‚</p><p>Redis çš„ Java å®¢æˆ·ç«¯å¾ˆå¤šï¼Œå¸¸ç”¨çš„å‡ ç§ï¼š</p><ul><li>Jedis</li><li>Lettuce</li><li>Spring Data Redis</li></ul><p>Spring å¯¹ Redis å®¢æˆ·ç«¯è¿›è¡Œäº†æ•´åˆï¼Œæä¾›äº† Spring Data Redisï¼Œåœ¨Spring Booté¡¹ç›®ä¸­è¿˜æä¾›äº†å¯¹åº”çš„Starterï¼Œå³ spring-boot-starter-data-redisã€‚</p><p>æˆ‘ä»¬é‡ç‚¹å­¦ä¹ <strong>Spring Data Redis</strong>ã€‚</p><h3 id="4-2-Spring-Data-Redisä½¿ç”¨æ–¹å¼"><a href="#4-2-Spring-Data-Redisä½¿ç”¨æ–¹å¼" class="headerlink" title="4.2 Spring Data Redisä½¿ç”¨æ–¹å¼"></a>4.2 Spring Data Redisä½¿ç”¨æ–¹å¼</h3><h4 id="4-2-1-ä»‹ç»"><a href="#4-2-1-ä»‹ç»" class="headerlink" title="4.2.1 ä»‹ç»"></a>4.2.1 ä»‹ç»</h4><p>Spring Data Redis æ˜¯ Spring çš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†åœ¨ Spring åº”ç”¨ä¸­é€šè¿‡ç®€å•çš„é…ç½®å°±å¯ä»¥è®¿é—® Redis æœåŠ¡ï¼Œå¯¹ Redis åº•å±‚å¼€å‘åŒ…è¿›è¡Œäº†é«˜åº¦å°è£…ã€‚åœ¨ Spring é¡¹ç›®ä¸­ï¼Œå¯ä»¥ä½¿ç”¨Spring Data Redisæ¥ç®€åŒ– Redis æ“ä½œã€‚</p><p>ç½‘å€ï¼š<a href="https://spring.io/projects/spring-data-redis">https://spring.io/projects/spring-data-redis</a></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-d53a53516f459d0d7fc7367e165d8c44-image-20210927143741458.png" alt="image-20210927143741458" style="zoom: 33%;"> <p>Spring Bootæä¾›äº†å¯¹åº”çš„Starterï¼Œmavenåæ ‡ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>Spring Data Redisä¸­æä¾›äº†ä¸€ä¸ªé«˜åº¦å°è£…çš„ç±»ï¼š<strong>RedisTemplate</strong>ï¼Œå¯¹ç›¸å…³apiè¿›è¡Œäº†å½’ç±»å°è£…,å°†åŒä¸€ç±»å‹æ“ä½œå°è£…ä¸ºoperationæ¥å£ï¼Œå…·ä½“åˆ†ç±»å¦‚ä¸‹ï¼š</p><ul><li>ValueOperationsï¼šstringæ•°æ®æ“ä½œ</li><li>SetOperationsï¼šsetç±»å‹æ•°æ®æ“ä½œ</li><li>ZSetOperationsï¼šzsetç±»å‹æ•°æ®æ“ä½œ</li><li>HashOperationsï¼šhashç±»å‹çš„æ•°æ®æ“ä½œ</li><li>ListOperationsï¼šlistç±»å‹çš„æ•°æ®æ“ä½œ</li></ul><h4 id="4-2-2-ç¯å¢ƒæ­å»º"><a href="#4-2-2-ç¯å¢ƒæ­å»º" class="headerlink" title="4.2.2 ç¯å¢ƒæ­å»º"></a>4.2.2 ç¯å¢ƒæ­å»º</h4><p>è¿›å…¥åˆ°sky-serveræ¨¡å—</p><p><strong>1). å¯¼å…¥Spring Data Redisçš„mavenåæ ‡(å·²å®Œæˆ)</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>2). é…ç½®Redisæ•°æ®æº</strong></p><p>åœ¨application-dev.ymlä¸­æ·»åŠ </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">sky</span><span class="token punctuation">:</span>  <span class="token key atrule">redis</span><span class="token punctuation">:</span>    <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>    <span class="token key atrule">database</span><span class="token punctuation">:</span> <span class="token number">10</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è§£é‡Šè¯´æ˜ï¼š</strong></p><p>database:æŒ‡å®šä½¿ç”¨Redisçš„å“ªä¸ªæ•°æ®åº“ï¼ŒRedisæœåŠ¡å¯åŠ¨åé»˜è®¤æœ‰16ä¸ªæ•°æ®åº“ï¼Œç¼–å·åˆ†åˆ«æ˜¯ä»0åˆ°15ã€‚</p><p>å¯ä»¥é€šè¿‡ä¿®æ”¹Redisé…ç½®æ–‡ä»¶æ¥æŒ‡å®šæ•°æ®åº“çš„æ•°é‡ã€‚</p><p>åœ¨application.ymlä¸­æ·»åŠ è¯»å–application-dev.ymlä¸­çš„ç›¸å…³Redisé…ç½®</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev  <span class="token key atrule">redis</span><span class="token punctuation">:</span>    <span class="token key atrule">host</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>sky.redis.host<span class="token punctuation">}</span>    <span class="token key atrule">port</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>sky.redis.port<span class="token punctuation">}</span>    <span class="token key atrule">password</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>sky.redis.password<span class="token punctuation">}</span>    <span class="token key atrule">database</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>sky.redis.database<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>3). ç¼–å†™é…ç½®ç±»ï¼Œåˆ›å»ºRedisTemplateå¯¹è±¡</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>connection<span class="token punctuation">.</span></span><span class="token class-name">RedisConnectionFactory</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RedisTemplate</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>serializer<span class="token punctuation">.</span></span><span class="token class-name">StringRedisSerializer</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisConfiguration</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">RedisTemplate</span> <span class="token function">redisTemplate</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> redisConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"å¼€å§‹åˆ›å»ºredisæ¨¡æ¿å¯¹è±¡..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">RedisTemplate</span> redisTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è®¾ç½®redisçš„è¿æ¥å·¥å‚å¯¹è±¡</span>        redisTemplate<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>redisConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è®¾ç½®redis keyçš„åºåˆ—åŒ–å™¨</span>        redisTemplate<span class="token punctuation">.</span><span class="token function">setKeySerializer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è§£é‡Šè¯´æ˜ï¼š</strong></p><p>å½“å‰é…ç½®ç±»ä¸æ˜¯å¿…é¡»çš„ï¼Œå› ä¸º Spring Boot æ¡†æ¶ä¼šè‡ªåŠ¨è£…é… RedisTemplate å¯¹è±¡ï¼Œä½†æ˜¯é»˜è®¤çš„keyåºåˆ—åŒ–å™¨ä¸º</p><p>JdkSerializationRedisSerializerï¼Œå¯¼è‡´æˆ‘ä»¬å­˜åˆ°Redisä¸­åçš„æ•°æ®å’ŒåŸå§‹æ•°æ®æœ‰å·®åˆ«ï¼Œæ•…è®¾ç½®ä¸º</p><p>StringRedisSerializeråºåˆ—åŒ–å™¨ã€‚</p><p><strong>4). é€šè¿‡RedisTemplateå¯¹è±¡æ“ä½œRedis</strong></p><p>åœ¨testä¸‹æ–°å»ºæµ‹è¯•ç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringDataRedisTest</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">RedisTemplate</span> redisTemplate<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testRedisTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//stringæ•°æ®æ“ä½œ</span>        <span class="token class-name">ValueOperations</span> valueOperations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//hashç±»å‹çš„æ•°æ®æ“ä½œ</span>        <span class="token class-name">HashOperations</span> hashOperations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//listç±»å‹çš„æ•°æ®æ“ä½œ</span>        <span class="token class-name">ListOperations</span> listOperations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//setç±»å‹æ•°æ®æ“ä½œ</span>        <span class="token class-name">SetOperations</span> setOperations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//zsetç±»å‹æ•°æ®æ“ä½œ</span>        <span class="token class-name">ZSetOperations</span> zSetOperations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForZSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•ï¼š</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-20096e3cb9c7eb6f57e6ec7e9b7d50d8-image-20221130205351403.png" alt="image-20221130205351403" style="zoom:50%;"> <p>è¯´æ˜RedisTemplateå¯¹è±¡æ³¨å…¥æˆåŠŸï¼Œå¹¶ä¸”é€šè¿‡è¯¥RedisTemplateå¯¹è±¡è·å–æ“ä½œ5ç§æ•°æ®ç±»å‹ç›¸å…³å¯¹è±¡ã€‚</p><p>ä¸Šè¿°ç¯å¢ƒæ­å»ºå®Œæ¯•åï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥å…·ä½“å¯¹å¸¸è§5ç§æ•°æ®ç±»å‹è¿›è¡Œæ“ä½œã€‚</p><h4 id="4-2-3-æ“ä½œå¸¸è§ç±»å‹æ•°æ®"><a href="#4-2-3-æ“ä½œå¸¸è§ç±»å‹æ•°æ®" class="headerlink" title="4.2.3 æ“ä½œå¸¸è§ç±»å‹æ•°æ®"></a>4.2.3 æ“ä½œå¸¸è§ç±»å‹æ•°æ®</h4><p><strong>1). æ“ä½œå­—ç¬¦ä¸²ç±»å‹æ•°æ®</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**    * æ“ä½œå­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®    */</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token comment">// set get setex setnx</span>       redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"å°æ˜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">String</span> city <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span>       redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">,</span><span class="token string">"1234"</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MINUTES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setIfAbsent</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">,</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setIfAbsent</span><span class="token punctuation">(</span><span class="token string">"lock"</span><span class="token punctuation">,</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>2). æ“ä½œå“ˆå¸Œç±»å‹æ•°æ®</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**    * æ“ä½œå“ˆå¸Œç±»å‹çš„æ•°æ®    */</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token comment">//hset hget hdel hkeys hvals</span>       <span class="token class-name">HashOperations</span> hashOperations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       hashOperations<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"100"</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       hashOperations<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"100"</span><span class="token punctuation">,</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token string">"20"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> hashOperations<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"100"</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">Set</span> keys <span class="token operator">=</span> hashOperations<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">"100"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">List</span> values <span class="token operator">=</span> hashOperations<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token string">"100"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span>       hashOperations<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">"100"</span><span class="token punctuation">,</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>3). æ“ä½œåˆ—è¡¨ç±»å‹æ•°æ®</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**    * æ“ä½œåˆ—è¡¨ç±»å‹çš„æ•°æ®    */</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token comment">//lpush lrange rpop llen</span>       <span class="token class-name">ListOperations</span> listOperations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       listOperations<span class="token punctuation">.</span><span class="token function">leftPushAll</span><span class="token punctuation">(</span><span class="token string">"mylist"</span><span class="token punctuation">,</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token string">"b"</span><span class="token punctuation">,</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       listOperations<span class="token punctuation">.</span><span class="token function">leftPush</span><span class="token punctuation">(</span><span class="token string">"mylist"</span><span class="token punctuation">,</span><span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">List</span> mylist <span class="token operator">=</span> listOperations<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token string">"mylist"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mylist<span class="token punctuation">)</span><span class="token punctuation">;</span>       listOperations<span class="token punctuation">.</span><span class="token function">rightPop</span><span class="token punctuation">(</span><span class="token string">"mylist"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">Long</span> size <span class="token operator">=</span> listOperations<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token string">"mylist"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>4). æ“ä½œé›†åˆç±»å‹æ•°æ®</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**    * æ“ä½œé›†åˆç±»å‹çš„æ•°æ®    */</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token comment">//sadd smembers scard sinter sunion srem</span>       <span class="token class-name">SetOperations</span> setOperations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       setOperations<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"set1"</span><span class="token punctuation">,</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token string">"b"</span><span class="token punctuation">,</span><span class="token string">"c"</span><span class="token punctuation">,</span><span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       setOperations<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"set2"</span><span class="token punctuation">,</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token string">"b"</span><span class="token punctuation">,</span><span class="token string">"x"</span><span class="token punctuation">,</span><span class="token string">"y"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">Set</span> members <span class="token operator">=</span> setOperations<span class="token punctuation">.</span><span class="token function">members</span><span class="token punctuation">(</span><span class="token string">"set1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>members<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">Long</span> size <span class="token operator">=</span> setOperations<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token string">"set1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">Set</span> intersect <span class="token operator">=</span> setOperations<span class="token punctuation">.</span><span class="token function">intersect</span><span class="token punctuation">(</span><span class="token string">"set1"</span><span class="token punctuation">,</span> <span class="token string">"set2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>intersect<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">Set</span> union <span class="token operator">=</span> setOperations<span class="token punctuation">.</span><span class="token function">union</span><span class="token punctuation">(</span><span class="token string">"set1"</span><span class="token punctuation">,</span> <span class="token string">"set2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>union<span class="token punctuation">)</span><span class="token punctuation">;</span>       setOperations<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"set1"</span><span class="token punctuation">,</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>5). æ“ä½œæœ‰åºé›†åˆç±»å‹æ•°æ®</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**    * æ“ä½œæœ‰åºé›†åˆç±»å‹çš„æ•°æ®    */</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testZset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token comment">//zadd zrange zincrby zrem</span>       <span class="token class-name">ZSetOperations</span> zSetOperations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForZSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       zSetOperations<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"zset1"</span><span class="token punctuation">,</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       zSetOperations<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"zset1"</span><span class="token punctuation">,</span><span class="token string">"b"</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       zSetOperations<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"zset1"</span><span class="token punctuation">,</span><span class="token string">"c"</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">Set</span> zset1 <span class="token operator">=</span> zSetOperations<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token string">"zset1"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>zset1<span class="token punctuation">)</span><span class="token punctuation">;</span>       zSetOperations<span class="token punctuation">.</span><span class="token function">incrementScore</span><span class="token punctuation">(</span><span class="token string">"zset1"</span><span class="token punctuation">,</span><span class="token string">"c"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       zSetOperations<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"zset1"</span><span class="token punctuation">,</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>6). é€šç”¨å‘½ä»¤æ“ä½œ</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**    * é€šç”¨å‘½ä»¤æ“ä½œ    */</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCommon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token comment">//keys exists type del</span>       <span class="token class-name">Set</span> keys <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">Boolean</span> name <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">hasKey</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">Boolean</span> set1 <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">hasKey</span><span class="token punctuation">(</span><span class="token string">"set1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>           <span class="token class-name">DataType</span> type <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>       redisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">"mylist"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-åº—é“ºè¥ä¸šçŠ¶æ€è®¾ç½®"><a href="#5-åº—é“ºè¥ä¸šçŠ¶æ€è®¾ç½®" class="headerlink" title="5. åº—é“ºè¥ä¸šçŠ¶æ€è®¾ç½®"></a>5. åº—é“ºè¥ä¸šçŠ¶æ€è®¾ç½®</h2><h3 id="5-1-éœ€æ±‚åˆ†æå’Œè®¾è®¡"><a href="#5-1-éœ€æ±‚åˆ†æå’Œè®¾è®¡" class="headerlink" title="5.1 éœ€æ±‚åˆ†æå’Œè®¾è®¡"></a>5.1 éœ€æ±‚åˆ†æå’Œè®¾è®¡</h3><h4 id="5-1-1-äº§å“åŸå‹"><a href="#5-1-1-äº§å“åŸå‹" class="headerlink" title="5.1.1 äº§å“åŸå‹"></a>5.1.1 äº§å“åŸå‹</h4><p>è¿›åˆ°è‹ç©¹å¤–å–åå°ï¼Œæ˜¾ç¤ºé¤å…çš„è¥ä¸šçŠ¶æ€ï¼Œè¥ä¸šçŠ¶æ€åˆ†ä¸º<strong>è¥ä¸šä¸­</strong>å’Œ<strong>æ‰“çƒŠä¸­</strong>ï¼Œè‹¥å½“å‰é¤å…å¤„äºè¥ä¸šçŠ¶æ€ï¼Œè‡ªåŠ¨æ¥æ”¶ä»»ä½•è®¢å•ï¼Œå®¢æˆ·å¯åœ¨å°ç¨‹åºè¿›è¡Œä¸‹å•æ“ä½œï¼›è‹¥å½“å‰é¤å…å¤„äºæ‰“çƒŠçŠ¶æ€ï¼Œä¸æ¥å—ä»»ä½•è®¢å•ï¼Œå®¢æˆ·ä¾¿æ— æ³•åœ¨å°ç¨‹åºè¿›è¡Œä¸‹å•æ“ä½œã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-4d09628456f7f95bd609f6dde9411ed8-image-20221130212134915.png" alt="image-20221130212134915" style="zoom:50%;"> <p>ç‚¹å‡»<strong>è¥ä¸šçŠ¶æ€</strong>æŒ‰é’®æ—¶ï¼Œå¼¹å‡ºæ›´æ”¹è¥ä¸šçŠ¶æ€</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-2bcc0dd1d62fb4ab7002aa9626079966-image-20221130213550300.png" alt="image-20221130213550300" style="zoom:50%;"> <p>é€‰æ‹©è¥ä¸šï¼Œè®¾ç½®é¤å…ä¸º<strong>è¥ä¸šä¸­</strong>çŠ¶æ€</p><p>é€‰æ‹©æ‰“çƒŠï¼Œè®¾ç½®é¤å…ä¸º<strong>æ‰“çƒŠä¸­</strong>çŠ¶æ€</p><p><strong>çŠ¶æ€è¯´æ˜ï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-3f73d44c846cd3266ecd39b3823e15f6-image-20221130213947179.png" alt="image-20221130213947179" style="zoom: 67%;"> <h4 id="5-1-2-æ¥å£è®¾è®¡"><a href="#5-1-2-æ¥å£è®¾è®¡" class="headerlink" title="5.1.2 æ¥å£è®¾è®¡"></a>5.1.2 æ¥å£è®¾è®¡</h4><p>æ ¹æ®ä¸Šè¿°åŸå‹å›¾è®¾è®¡æ¥å£ï¼Œå…±åŒ…å«3ä¸ªæ¥å£ã€‚</p><p><strong>æ¥å£è®¾è®¡ï¼š</strong></p><ul><li>è®¾ç½®è¥ä¸šçŠ¶æ€</li><li>ç®¡ç†ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€</li><li>ç”¨æˆ·ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€</li></ul><p><strong>æ³¨ï¼š</strong>ä»æŠ€æœ¯å±‚é¢åˆ†æï¼Œå…¶å®ç®¡ç†ç«¯å’Œç”¨æˆ·ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€æ—¶ï¼Œå¯é€šè¿‡ä¸€ä¸ªæ¥å£å»å®ç°å³å¯ã€‚å› ä¸ºè¥ä¸šçŠ¶æ€æ˜¯ä¸€è‡´çš„ã€‚ä½†æ˜¯ï¼Œæœ¬é¡¹ç›®çº¦å®šï¼š</p><ul><li><strong>ç®¡ç†ç«¯</strong>å‘å‡ºçš„è¯·æ±‚ï¼Œç»Ÿä¸€ä½¿ç”¨/adminä½œä¸ºå‰ç¼€ã€‚</li><li><strong>ç”¨æˆ·ç«¯</strong>å‘å‡ºçš„è¯·æ±‚ï¼Œç»Ÿä¸€ä½¿ç”¨/userä½œä¸ºå‰ç¼€ã€‚</li></ul><p>å› ä¸ºè®¿é—®è·¯å¾„ä¸ä¸€è‡´ï¼Œæ•…åˆ†ä¸ºä¸¤ä¸ªæ¥å£å®ç°ã€‚</p><p><strong>1). è®¾ç½®è¥ä¸šçŠ¶æ€</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-b7541aea20c45f1b0bccd7ac5a5e47b8-image-20221130215725802.png" alt="image-20221130215725802" style="zoom:50%;"> <p><strong>2). ç®¡ç†ç«¯è¥ä¸šçŠ¶æ€</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-d561e1e15d0b161eb4c01b7c7324525f-image-20221130215814021.png" alt="image-20221130215814021" style="zoom:50%;"> <p><strong>3). ç”¨æˆ·ç«¯è¥ä¸šçŠ¶æ€</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-aaf790ffc398beb2e1c3771d951b39df-image-20221130215836785.png" alt="image-20221130215836785" style="zoom:50%;"> <h4 id="5-1-3-è¥ä¸šçŠ¶æ€å­˜å‚¨æ–¹å¼"><a href="#5-1-3-è¥ä¸šçŠ¶æ€å­˜å‚¨æ–¹å¼" class="headerlink" title="5.1.3 è¥ä¸šçŠ¶æ€å­˜å‚¨æ–¹å¼"></a>5.1.3 è¥ä¸šçŠ¶æ€å­˜å‚¨æ–¹å¼</h4><p>è™½ç„¶ï¼Œå¯ä»¥é€šè¿‡ä¸€å¼ è¡¨æ¥å­˜å‚¨è¥ä¸šçŠ¶æ€æ•°æ®ï¼Œä½†æ•´ä¸ªè¡¨ä¸­åªæœ‰ä¸€ä¸ªå­—æ®µï¼Œæ‰€ä»¥æ„ä¹‰ä¸å¤§ã€‚</p><p>è¥ä¸šçŠ¶æ€æ•°æ®å­˜å‚¨æ–¹å¼ï¼šåŸºäºRedisçš„å­—ç¬¦ä¸²æ¥è¿›è¡Œå­˜å‚¨</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-cfefc6252ace17503280ca80cfdc0f13-image-20221130220037713.png" alt="image-20221130220037713" style="zoom:50%;"> <p><strong>çº¦å®šï¼š</strong>1è¡¨ç¤ºè¥ä¸š 0è¡¨ç¤ºæ‰“çƒŠ</p><h3 id="5-2-ä»£ç å¼€å‘"><a href="#5-2-ä»£ç å¼€å‘" class="headerlink" title="5.2 ä»£ç å¼€å‘"></a>5.2 ä»£ç å¼€å‘</h3><h4 id="5-2-1-è®¾ç½®è¥ä¸šçŠ¶æ€"><a href="#5-2-1-è®¾ç½®è¥ä¸šçŠ¶æ€" class="headerlink" title="5.2.1 è®¾ç½®è¥ä¸šçŠ¶æ€"></a>5.2.1 è®¾ç½®è¥ä¸šçŠ¶æ€</h4><p>åœ¨sky-serveræ¨¡å—ä¸­ï¼Œåˆ›å»ºShopController.java</p><p><strong>æ ¹æ®æ¥å£å®šä¹‰åˆ›å»ºShopControllerçš„setStatusè®¾ç½®è¥ä¸šçŠ¶æ€æ–¹æ³•ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>admin</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>result<span class="token punctuation">.</span></span><span class="token class-name">Result</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Api</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiOperation</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RedisTemplate</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PutMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token punctuation">(</span><span class="token string">"adminShopController"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/admin/shop"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">"åº—é“ºç›¸å…³æ¥å£"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShopController</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">KEY</span> <span class="token operator">=</span> <span class="token string">"SHOP_STATUS"</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">RedisTemplate</span> redisTemplate<span class="token punctuation">;</span>    <span class="token comment">/**     * è®¾ç½®åº—é“ºçš„è¥ä¸šçŠ¶æ€     * @param status     * @return     */</span>    <span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">"/{status}"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"è®¾ç½®åº—é“ºçš„è¥ä¸šçŠ¶æ€"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> status<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"è®¾ç½®åº—é“ºçš„è¥ä¸šçŠ¶æ€ä¸ºï¼š{}"</span><span class="token punctuation">,</span>status <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">"è¥ä¸šä¸­"</span> <span class="token operator">:</span> <span class="token string">"æ‰“çƒŠä¸­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token constant">KEY</span><span class="token punctuation">,</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="5-2-2-ç®¡ç†ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€"><a href="#5-2-2-ç®¡ç†ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€" class="headerlink" title="5.2.2 ç®¡ç†ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€"></a>5.2.2 ç®¡ç†ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€</h4><p><strong>æ ¹æ®æ¥å£å®šä¹‰åˆ›å»ºShopControllerçš„getStatusæŸ¥è¯¢è¥ä¸šçŠ¶æ€æ–¹æ³•ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**    * è·å–åº—é“ºçš„è¥ä¸šçŠ¶æ€    * @return    */</span>   <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/status"</span><span class="token punctuation">)</span>   <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"è·å–åº—é“ºçš„è¥ä¸šçŠ¶æ€"</span><span class="token punctuation">)</span>   <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token class-name">Integer</span> status <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token constant">KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"è·å–åˆ°åº—é“ºçš„è¥ä¸šçŠ¶æ€ä¸ºï¼š{}"</span><span class="token punctuation">,</span>status <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">"è¥ä¸šä¸­"</span> <span class="token operator">:</span> <span class="token string">"æ‰“çƒŠä¸­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="5-2-3-ç”¨æˆ·ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€"><a href="#5-2-3-ç”¨æˆ·ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€" class="headerlink" title="5.2.3 ç”¨æˆ·ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€"></a>5.2.3 ç”¨æˆ·ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€</h4><p>åˆ›å»ºcom.sky.controller.useråŒ…ï¼Œåœ¨è¯¥åŒ…ä¸‹åˆ›å»ºShopController.java</p><p><strong>æ ¹æ®æ¥å£å®šä¹‰åˆ›å»ºShopControllerçš„getStatusæŸ¥è¯¢è¥ä¸šçŠ¶æ€æ–¹æ³•ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>user</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>result<span class="token punctuation">.</span></span><span class="token class-name">Result</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Api</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiOperation</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RedisTemplate</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token punctuation">(</span><span class="token string">"userShopController"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/user/shop"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">"åº—é“ºç›¸å…³æ¥å£"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShopController</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">KEY</span> <span class="token operator">=</span> <span class="token string">"SHOP_STATUS"</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">RedisTemplate</span> redisTemplate<span class="token punctuation">;</span>    <span class="token comment">/**     * è·å–åº—é“ºçš„è¥ä¸šçŠ¶æ€     * @return     */</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/status"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"è·å–åº—é“ºçš„è¥ä¸šçŠ¶æ€"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">Integer</span> status <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token constant">KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"è·å–åˆ°åº—é“ºçš„è¥ä¸šçŠ¶æ€ä¸ºï¼š{}"</span><span class="token punctuation">,</span>status <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">"è¥ä¸šä¸­"</span> <span class="token operator">:</span> <span class="token string">"æ‰“çƒŠä¸­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-3-åŠŸèƒ½æµ‹è¯•"><a href="#5-3-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="5.3 åŠŸèƒ½æµ‹è¯•"></a>5.3 åŠŸèƒ½æµ‹è¯•</h3><h4 id="5-3-1-æ¥å£æ–‡æ¡£æµ‹è¯•"><a href="#5-3-1-æ¥å£æ–‡æ¡£æµ‹è¯•" class="headerlink" title="5.3.1 æ¥å£æ–‡æ¡£æµ‹è¯•"></a>5.3.1 æ¥å£æ–‡æ¡£æµ‹è¯•</h4><p><strong>å¯åŠ¨æœåŠ¡ï¼š</strong>è®¿é—®<a href="http://localhost:8080/doc.html%EF%BC%8C%E6%89%93%E5%BC%80%E5%BA%97%E9%93%BA%E7%9B%B8%E5%85%B3%E6%8E%A5%E5%8F%A3">http://localhost:8080/doc.htmlï¼Œæ‰“å¼€åº—é“ºç›¸å…³æ¥å£</a></p><p><strong>æ³¨æ„ï¼š</strong>ä½¿ç”¨adminç”¨æˆ·ç™»å½•é‡æ–°è·å–tokenï¼Œé˜²æ­¢tokenå¤±æ•ˆã€‚</p><p><strong>è®¾ç½®è¥ä¸šçŠ¶æ€ï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-b3423e1048e1a35657be3b2b8a98b44f-image-20221201175251351.png" alt="image-20221201175251351" style="zoom:50%;"> <p>ç‚¹å‡»å‘é€</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-7e2268fc604f60266181e0010d24ea3c-image-20221201175428279.png" alt="image-20221201175428279" style="zoom:50%;"> <p>æŸ¥çœ‹Ideaæ§åˆ¶å°æ—¥å¿—</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-07c25c54a85e69702193992272522b94-image-20221201175511626.png" alt="image-20221201175511626" style="zoom:50%;"> <p>æŸ¥çœ‹Redisä¸­æ•°æ®</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-2239267f789a0f021b7c8e4b70e115b4-image-20221201175634896.png" alt="image-20221201175634896" style="zoom:50%;"> <p><strong>ç®¡ç†ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€ï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-73dc465c378e39541a64922ec4d0a132-image-20221201175807978.png" alt="image-20221201175807978" style="zoom:50%;"> <p><strong>ç”¨æˆ·ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€ï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-085f540e6d6b33d7b6906a9c757a855c-image-20221201175917397.png" alt="image-20221201175917397" style="zoom:50%;"> <h4 id="5-3-2-æ¥å£åˆ†ç»„å±•ç¤º"><a href="#5-3-2-æ¥å£åˆ†ç»„å±•ç¤º" class="headerlink" title="5.3.2 æ¥å£åˆ†ç»„å±•ç¤º"></a>5.3.2 æ¥å£åˆ†ç»„å±•ç¤º</h4><p>åœ¨ä¸Šè¿°æ¥å£æ–‡æ¡£æµ‹è¯•ä¸­ï¼Œç®¡ç†ç«¯å’Œç”¨æˆ·ç«¯çš„æ¥å£æ”¾åœ¨ä¸€èµ·ï¼Œä¸æ–¹ä¾¿åŒºåˆ†ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-62995f1ea624935842c9698bdb307fd0-image-20221201181927458.png" alt="image-20221201181927458" style="zoom:50%;"> <p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦å®ç°ç®¡ç†ç«¯å’Œç”¨æˆ·ç«¯æ¥å£è¿›è¡ŒåŒºåˆ†ã€‚</p><p>åœ¨WebMvcConfiguration.javaä¸­ï¼Œåˆ†åˆ«æ‰«æâ€com.sky.controller.adminâ€å’Œâ€com.sky.controller.userâ€è¿™ä¸¤ä¸ªåŒ…ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>   <span class="token keyword">public</span> <span class="token class-name">Docket</span> <span class="token function">docket1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"å‡†å¤‡ç”Ÿæˆæ¥å£æ–‡æ¡£..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">ApiInfo</span> apiInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApiInfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"è‹ç©¹å¤–å–é¡¹ç›®æ¥å£æ–‡æ¡£"</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">"2.0"</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"è‹ç©¹å¤–å–é¡¹ç›®æ¥å£æ–‡æ¡£"</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">Docket</span> docket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span><span class="token class-name">DocumentationType</span><span class="token punctuation">.</span><span class="token constant">SWAGGER_2</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span><span class="token string">"ç®¡ç†ç«¯æ¥å£"</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span>apiInfo<span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token comment">//æŒ‡å®šç”Ÿæˆæ¥å£éœ€è¦æ‰«æçš„åŒ…</span>               <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span><span class="token class-name">RequestHandlerSelectors</span><span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span><span class="token string">"com.sky.controller.admin"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">paths</span><span class="token punctuation">(</span><span class="token class-name">PathSelectors</span><span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> docket<span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token annotation punctuation">@Bean</span>   <span class="token keyword">public</span> <span class="token class-name">Docket</span> <span class="token function">docket2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"å‡†å¤‡ç”Ÿæˆæ¥å£æ–‡æ¡£..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">ApiInfo</span> apiInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApiInfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"è‹ç©¹å¤–å–é¡¹ç›®æ¥å£æ–‡æ¡£"</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">"2.0"</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"è‹ç©¹å¤–å–é¡¹ç›®æ¥å£æ–‡æ¡£"</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">Docket</span> docket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span><span class="token class-name">DocumentationType</span><span class="token punctuation">.</span><span class="token constant">SWAGGER_2</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·ç«¯æ¥å£"</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span>apiInfo<span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token comment">//æŒ‡å®šç”Ÿæˆæ¥å£éœ€è¦æ‰«æçš„åŒ…</span>               <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span><span class="token class-name">RequestHandlerSelectors</span><span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span><span class="token string">"com.sky.controller.user"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">paths</span><span class="token punctuation">(</span><span class="token class-name">PathSelectors</span><span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>               <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> docket<span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡å¯æœåŠ¡å™¨ï¼Œå†æ¬¡è®¿é—®æ¥å£æ–‡æ¡£ï¼Œå¯è¿›è¡Œé€‰æ‹©<strong>ç”¨æˆ·ç«¯æ¥å£</strong>æˆ–è€…<strong>ç®¡ç†ç«¯æ¥å£</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-cb2a0d04503636b43f84ed03f1290946-image-20221201182658244.png" alt="image-20221201182658244" style="zoom:50%;"> <h4 id="5-3-3-å‰åç«¯è”è°ƒæµ‹è¯•"><a href="#5-3-3-å‰åç«¯è”è°ƒæµ‹è¯•" class="headerlink" title="5.3.3 å‰åç«¯è”è°ƒæµ‹è¯•"></a>5.3.3 å‰åç«¯è”è°ƒæµ‹è¯•</h4><p>å¯åŠ¨nginx,è®¿é—® <a href="http://localhost/">http://localhost</a></p><p>è¿›å…¥åå°ï¼ŒçŠ¶æ€ä¸º<strong>è¥ä¸šä¸­</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-b2f1bc426333697ed4b1c5dd4e562087-image-20221201180353062.png" alt="image-20221201180353062" style="zoom:50%;"> <p>ç‚¹å‡»<strong>è¥ä¸šçŠ¶æ€è®¾ç½®</strong>ï¼Œä¿®æ”¹çŠ¶æ€ä¸º<strong>æ‰“çƒŠä¸­</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-9e879d5d5041305b63175a75f69abb1d-image-20221201180529842.png" alt="image-20221201180529842" style="zoom:50%;"> <p>å†æ¬¡æŸ¥çœ‹çŠ¶æ€ï¼ŒçŠ¶æ€å·²ä¸º<strong>æ‰“çƒŠä¸­</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-49a59d6764d2126944a864b0e75c36c3-image-20221201180639063.png" alt="image-20221201180639063" style="zoom:50%;"> <h3 id="5-4-ä»£ç æäº¤"><a href="#5-4-ä»£ç æäº¤" class="headerlink" title="5.4 ä»£ç æäº¤"></a>5.4 ä»£ç æäº¤</h3><p><strong>ç‚¹å‡»æäº¤ï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-16f50d54920ec3650c3a623eee166d65-image-20221201183950557.png" alt="image-20221201183950557" style="zoom:50%;"> <p><strong>æäº¤è¿‡ç¨‹ä¸­</strong>ï¼Œå‡ºç°æç¤ºï¼š</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-624c55d221f4622104fc438495122d37-image-20221201190245361.png" alt="image-20221201190245361" style="zoom:50%;">  <p><strong>ç»§ç»­push:</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-e4b9feb96fe5c72d8598a6499dc7c6b0-image-20221201190329431.png" alt="image-20221201190329431" style="zoom:50%;"> <p><strong>æ¨é€æˆåŠŸï¼š</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/03/18-e481163efb377a7cce634e9b85659773-image-20221201190404588.png" alt="image-20221201190404588" style="zoom: 67%;"> ]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªæˆ‘</title>
      <link href="/2025/03/13/zi-wo/"/>
      <url>/2025/03/13/zi-wo/</url>
      
        <content type="html"><![CDATA[<h1 id="è®°å½•ä¸€äº›PV"><a href="#è®°å½•ä¸€äº›PV" class="headerlink" title="è®°å½•ä¸€äº›PV"></a>è®°å½•ä¸€äº›PV</h1><h2 id="é•‡é­‚è¡—ï¼š"><a href="#é•‡é­‚è¡—ï¼š" class="headerlink" title="é•‡é­‚è¡—ï¼š"></a>é•‡é­‚è¡—ï¼š</h2><h3 id="å”ç¬‘ç¬‘"><a href="#å”ç¬‘ç¬‘" class="headerlink" title="å”ç¬‘ç¬‘"></a>å”ç¬‘ç¬‘</h3><p>å”ç¬‘ç¬‘ï¼š<br>æ— å¿ƒï¼Œä½ å¯çŸ¥é“ï¼Œæœ‰ä¸€ç§ç¦è¯ï¼Œå«å›å¤©ã€‚</p><p>æˆ‘ä¸€ç›´æ˜¯ä¸€ä¸ªå¤©ä¸æ€•åœ°ä¸æ€•çš„äººï¼Œç›´åˆ°æ€€ä¸Šè¿™ä¸ªå°æ··è›‹ï¼Œæˆ‘å¼€å§‹å®³æ€•äº†ï¼Œ<br>å®³æ€•ä»–è¢«è¿™ä¸ªä¸–ç•Œçš„é»‘æš—åå™¬ï¼Œ<br>æˆ‘å®³æ€•ä»–å¯¹æˆ‘è¯´ä»–è®¨åŒæ¥åˆ°è¿™ä¸ªä¸–ç•Œä¸Š<br>å®³æ€•ä»–åœ¨å›°å¢ƒä¸­æ— äººç›¸å¸®<br>å®³æ€•ä»–å¿ƒä¸­æ»¡æ˜¯ç»æœ›</p><p>æˆ‘å¸Œæœ›ä»–æ´»å¾—æ£æ„å¦è¡<br>å¸Œæœ›ä»–çš„äººç”Ÿå³ä½¿æœ‰åå·<br>å´ç»ˆæ˜¯å¦é€”<br>æˆ‘æƒ³ä¸ºä»–å®ˆæŠ¤å…‰æ˜å’Œå¸Œæœ›</p><p>å¦‚æœæœ‰é‚£ä¹ˆä¸€å¤©<br>æˆ‘å–ä¸‹äº†è¿™æ¯’è¯<br>æˆ‘ä¹Ÿç®—ä¸ªç§°èŒçš„æ¯äº²äº†ï¼Œå¯¹å§ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> åšå®¢æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è‡ªæˆ‘ </tag>
            
            <tag> é¡¿æ‚Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶ä¸Šä¼ </title>
      <link href="/2025/03/09/wen-jian-shang-chuan/"/>
      <url>/2025/03/09/wen-jian-shang-chuan/</url>
      
        <content type="html"><![CDATA[<h1 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h1><h2 id="CommonController"><a href="#CommonController" class="headerlink" title="CommonController:"></a>CommonController:</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>admin</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>constant<span class="token punctuation">.</span></span><span class="token class-name">MessageConstant</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>result<span class="token punctuation">.</span></span><span class="token class-name">Result</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">AliOssUtil</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Api</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiOperation</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestParam</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>multipart<span class="token punctuation">.</span></span><span class="token class-name">MultipartFile</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">UUID</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">"é€šç”¨æ¥å£"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/admin/common"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CommonController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">AliOssUtil</span> aliOssUtil<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"æ–‡ä»¶ä¸Šä¼ "</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> file<span class="token punctuation">)</span> <span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"æ–‡ä»¶ä¸Šä¼ ï¼š{}"</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span><span class="token comment">//            åŸå§‹æ–‡ä»¶å</span>            <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//            æˆªå–åŸå§‹æ–‡ä»¶åçš„åç¼€</span>            <span class="token class-name">String</span> extension <span class="token operator">=</span> originalFilename<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>originalFilename<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//            æ„å»ºæ–‡ä»¶çš„åç§°,å³åœ¨ossä¸­çš„åå­—</span>            <span class="token class-name">String</span> objectName <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> extension<span class="token punctuation">;</span><span class="token comment">//            è¿”å›è®¿é—®çš„ç½‘å€</span>            <span class="token class-name">String</span> filePath <span class="token operator">=</span> aliOssUtil<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> objectName<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"æ–‡ä»¶ä¸Šä¼ å¤±è´¥: {}"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">MessageConstant</span><span class="token punctuation">.</span><span class="token constant">UPLOAD_FAILED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="AliOssUtil"><a href="#AliOssUtil" class="headerlink" title="AliOssUtil:"></a>AliOssUtil:</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>utils</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">ClientException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSS</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSSClientBuilder</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSSException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ByteArrayInputStream</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliOssUtil</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> endpoint<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeyId<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeySecret<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> bucketName<span class="token punctuation">;</span>    <span class="token comment">/**     * æ–‡ä»¶ä¸Šä¼      *     * @param bytes     * @param objectName     * @return     */</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes<span class="token punctuation">,</span> <span class="token class-name">String</span> objectName<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆ›å»ºOSSClientå®ä¾‹ã€‚</span>        <span class="token class-name">OSS</span> ossClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSSClientBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>endpoint<span class="token punctuation">,</span> accessKeyId<span class="token punctuation">,</span> accessKeySecret<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment">// åˆ›å»ºPutObjectè¯·æ±‚ã€‚</span>            ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span>bucketName<span class="token punctuation">,</span> objectName<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">OSSException</span> oe<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Caught an OSSException, which means your request made it to OSS, "</span>                    <span class="token operator">+</span> <span class="token string">"but was rejected with an error response for some reason."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Error Message:"</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getErrorMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Error Code:"</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getErrorCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Request ID:"</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getRequestId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Host ID:"</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getHostId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClientException</span> ce<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Caught an ClientException, which means the client encountered "</span>                    <span class="token operator">+</span> <span class="token string">"a serious internal problem while trying to communicate with OSS, "</span>                    <span class="token operator">+</span> <span class="token string">"such as not being able to access the network."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Error Message:"</span> <span class="token operator">+</span> ce<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>ossClient <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment">//æ–‡ä»¶è®¿é—®è·¯å¾„è§„åˆ™ https://BucketName.Endpoint/ObjectName</span>        <span class="token class-name">StringBuilder</span> stringBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token string">"https://"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        stringBuilder                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>bucketName<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>endpoint<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>objectName<span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"æ–‡ä»¶ä¸Šä¼ åˆ°:{}"</span><span class="token punctuation">,</span> stringBuilder<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> stringBuilder<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="OssConfigurationï¼š"><a href="#OssConfigurationï¼š" class="headerlink" title="OssConfigurationï¼š"></a>OssConfigurationï¼š</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">AliOssProperties</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">AliOssUtil</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnMissingBean</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span><span class="token comment">/** * é…ç½®ç±»ï¼Œç”¨äºåˆ›å»ºAliOssUtilå¯¹è±¡ */</span><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OssConfiguration</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token annotation punctuation">@ConditionalOnMissingBean</span>    <span class="token keyword">public</span> <span class="token class-name">AliOssUtil</span> <span class="token function">aliOssUtil</span><span class="token punctuation">(</span><span class="token class-name">AliOssProperties</span> aliOssProperties<span class="token punctuation">)</span> <span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"å¼€å§‹åˆ›å»ºé˜¿é‡Œäº‘æ–‡ä»¶ä¸Šä¼ å¯¹è±¡ï¼š{}"</span><span class="token punctuation">,</span> aliOssProperties<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AliOssUtil</span><span class="token punctuation">(</span>aliOssProperties<span class="token punctuation">.</span><span class="token function">getEndpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                aliOssProperties<span class="token punctuation">.</span><span class="token function">getAccessKeyId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                aliOssProperties<span class="token punctuation">.</span><span class="token function">getAccessKeySecret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                aliOssProperties<span class="token punctuation">.</span><span class="token function">getBucketName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="AliOssProperties"><a href="#AliOssProperties" class="headerlink" title="AliOssProperties:"></a>AliOssProperties:</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>properties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">ConfigurationProperties</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"sky.alioss"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliOssProperties</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> endpoint<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeyId<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeySecret<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> bucketName<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="application-yml-é…ç½®æ–‡ä»¶"><a href="#application-yml-é…ç½®æ–‡ä»¶" class="headerlink" title="application.yml é…ç½®æ–‡ä»¶"></a>application.yml é…ç½®æ–‡ä»¶</h2><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">server</span><span class="token punctuation">:</span><span class="token key attr-name">  port</span><span class="token punctuation">:</span> <span class="token value attr-value">8080</span><span class="token key attr-name">spring</span><span class="token punctuation">:</span><span class="token key attr-name">  profiles</span><span class="token punctuation">:</span><span class="token key attr-name">    active</span><span class="token punctuation">:</span> <span class="token value attr-value">dev</span><span class="token key attr-name">  main</span><span class="token punctuation">:</span><span class="token key attr-name">    allow-circular-references</span><span class="token punctuation">:</span> <span class="token value attr-value">true</span><span class="token key attr-name">  datasource</span><span class="token punctuation">:</span><span class="token key attr-name">    druid</span><span class="token punctuation">:</span><span class="token key attr-name">      driver-class-name</span><span class="token punctuation">:</span> <span class="token value attr-value">${sky.datasource.driver-class-name}</span><span class="token key attr-name">      url</span><span class="token punctuation">:</span> <span class="token value attr-value">jdbc:mysql://${sky.datasource.host}:${sky.datasource.port}/${sky.datasource.database}?serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=false&amp;allowPublicKeyRetrieval=true</span><span class="token key attr-name">      username</span><span class="token punctuation">:</span> <span class="token value attr-value">${sky.datasource.username}</span><span class="token key attr-name">      password</span><span class="token punctuation">:</span> <span class="token value attr-value">${sky.datasource.password}</span><span class="token comment">      # è®¾ç½®æœ€å¤§ç©ºé—²æ—¶é—´ï¼Œå•ä½æ¯«ç§’ï¼Œé»˜è®¤8å°æ—¶</span><span class="token key attr-name">      max-evictable-idle-time-millis</span><span class="token punctuation">:</span> <span class="token value attr-value">300000</span><span class="token comment">      # è®¾ç½®æœ€å°ç©ºé—²æ—¶é—´ï¼Œå•ä½æ¯«ç§’ï¼Œé»˜è®¤3åˆ†é’Ÿ</span><span class="token key attr-name">      min-evictable-idle-time-millis</span><span class="token punctuation">:</span> <span class="token value attr-value">180000</span><span class="token comment">      # è®¾ç½®å¿ƒè·³æ£€æµ‹SQLï¼Œç¡®ä¿è¿æ¥æœ‰æ•ˆ</span><span class="token key attr-name">      validation-query</span><span class="token punctuation">:</span> <span class="token value attr-value">SELECT 1</span><span class="token comment">      # æµ‹è¯•è¿æ¥æ˜¯å¦å¯ç”¨</span><span class="token key attr-name">      test-on-borrow</span><span class="token punctuation">:</span> <span class="token value attr-value">true</span><span class="token key attr-name">mybatis</span><span class="token punctuation">:</span><span class="token comment">  #mapperé…ç½®æ–‡ä»¶</span><span class="token key attr-name">  mapper-locations</span><span class="token punctuation">:</span> <span class="token value attr-value">classpath:mapper/*.xml</span><span class="token key attr-name">  type-aliases-package</span><span class="token punctuation">:</span> <span class="token value attr-value">com.sky.entity</span><span class="token key attr-name">  configuration</span><span class="token punctuation">:</span><span class="token comment">    #å¼€å¯é©¼å³°å‘½å</span><span class="token key attr-name">    map-underscore-to-camel-case</span><span class="token punctuation">:</span> <span class="token value attr-value">true</span><span class="token key attr-name">logging</span><span class="token punctuation">:</span><span class="token key attr-name">  level</span><span class="token punctuation">:</span><span class="token key attr-name">    com</span><span class="token punctuation">:</span><span class="token key attr-name">      sky</span><span class="token punctuation">:</span><span class="token key attr-name">        mapper</span><span class="token punctuation">:</span> <span class="token value attr-value">debug</span><span class="token key attr-name">        service</span><span class="token punctuation">:</span> <span class="token value attr-value">info</span><span class="token key attr-name">        controller</span><span class="token punctuation">:</span> <span class="token value attr-value">info</span><span class="token key attr-name">sky</span><span class="token punctuation">:</span><span class="token key attr-name">  jwt</span><span class="token punctuation">:</span><span class="token comment">    # è®¾ç½®jwtç­¾ååŠ å¯†æ—¶ä½¿ç”¨çš„ç§˜é’¥</span><span class="token key attr-name">    admin-secret-key</span><span class="token punctuation">:</span> <span class="token value attr-value">itcast</span><span class="token comment">    # è®¾ç½®jwtè¿‡æœŸæ—¶é—´</span><span class="token key attr-name">    admin-ttl</span><span class="token punctuation">:</span> <span class="token value attr-value">997200000</span><span class="token comment">    # è®¾ç½®å‰ç«¯ä¼ é€’è¿‡æ¥çš„ä»¤ç‰Œåç§°</span><span class="token key attr-name">    admin-token-name</span><span class="token punctuation">:</span> <span class="token value attr-value">token</span><span class="token key attr-name">  alioss</span><span class="token punctuation">:</span><span class="token key attr-name">    endpoint</span><span class="token punctuation">:</span> <span class="token value attr-value">${sky.alioss.endpoint}</span><span class="token key attr-name">    access-key-id</span><span class="token punctuation">:</span> <span class="token value attr-value">${sky.alioss.access-key-id}</span><span class="token key attr-name">    access-key-secret</span><span class="token punctuation">:</span> <span class="token value attr-value">${sky.alioss.access-key-secret}</span><span class="token key attr-name">    bucket-name</span><span class="token punctuation">:</span> <span class="token value attr-value">${sky.alioss.bucket-name}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">sky</span><span class="token punctuation">:</span><span class="token key attr-name">  datasource</span><span class="token punctuation">:</span><span class="token key attr-name">    driver-class-name</span><span class="token punctuation">:</span> <span class="token value attr-value">com.mysql.cj.jdbc.Driver</span><span class="token key attr-name">    host</span><span class="token punctuation">:</span> <span class="token value attr-value">localhost</span><span class="token key attr-name">    port</span><span class="token punctuation">:</span> <span class="token value attr-value">3306</span><span class="token key attr-name">    database</span><span class="token punctuation">:</span> <span class="token value attr-value">sky_take_out</span><span class="token key attr-name">    username</span><span class="token punctuation">:</span> <span class="token value attr-value">root</span><span class="token key attr-name">    password</span><span class="token punctuation">:</span> <span class="token value attr-value">123456</span><span class="token key attr-name">  alioss</span><span class="token punctuation">:</span><span class="token key attr-name">    endpoint</span><span class="token punctuation">:</span> <span class="token value attr-value">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span><span class="token key attr-name">    access-key-id</span><span class="token punctuation">:</span> <span class="token value attr-value">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span><span class="token key attr-name">    access-key-secret</span><span class="token punctuation">:</span> <span class="token value attr-value">3ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span><span class="token key attr-name">    bucket-name</span><span class="token punctuation">:</span> <span class="token value attr-value">ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®åŠŸèƒ½ä»£ç  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡ä»¶ä¸Šä¼  </tag>
            
            <tag> å¯¹è±¡å­˜å‚¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¬å…±å­—æ®µçš„è‡ªåŠ¨å¡«å……</title>
      <link href="/2025/01/10/gong-gong-zi-duan-de-zi-dong-tian-chong/"/>
      <url>/2025/01/10/gong-gong-zi-duan-de-zi-dong-tian-chong/</url>
      
        <content type="html"><![CDATA[<h1 id="å…¬å…±å­—æ®µçš„å¡«å……"><a href="#å…¬å…±å­—æ®µçš„å¡«å……" class="headerlink" title="å…¬å…±å­—æ®µçš„å¡«å……"></a>å…¬å…±å­—æ®µçš„å¡«å……</h1><h1 id="é‡‡ç”¨AOPå¢å¼ºå®ç°å…¬å…±å­—æ®µçš„å¡«å……"><a href="#é‡‡ç”¨AOPå¢å¼ºå®ç°å…¬å…±å­—æ®µçš„å¡«å……" class="headerlink" title="é‡‡ç”¨AOPå¢å¼ºå®ç°å…¬å…±å­—æ®µçš„å¡«å……"></a>é‡‡ç”¨AOPå¢å¼ºå®ç°å…¬å…±å­—æ®µçš„å¡«å……</h1><h2 id="1ã€èƒŒæ™¯"><a href="#1ã€èƒŒæ™¯" class="headerlink" title="1ã€èƒŒæ™¯"></a>1ã€èƒŒæ™¯</h2><p>é€šç”¨å­—æ®µï¼Œæ— æ³•ç»Ÿä¸€ç®¡ç†ï¼Œåœ¨åæœŸç»´æŠ¤çš„æ—¶å€™å°±å¾ˆéº»çƒ¦ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/01/09-0825e20ce27a3c9b96bb7829c350663b-image-20250109225427761.png" alt="AOP"></p><h2 id="2ã€å‰ç½®å‡†å¤‡"><a href="#2ã€å‰ç½®å‡†å¤‡" class="headerlink" title="2ã€å‰ç½®å‡†å¤‡"></a>2ã€å‰ç½®å‡†å¤‡</h2><ol><li>æšä¸¾ç±»</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>enumeration</span><span class="token punctuation">;</span><span class="token comment">/** * æ•°æ®åº“æ“ä½œç±»å‹ */</span><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">OperationType</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æ›´æ–°æ“ä½œ     */</span>    <span class="token constant">UPDATE</span><span class="token punctuation">,</span>    <span class="token comment">/**     * æ’å…¥æ“ä½œ     */</span>    <span class="token constant">INSERT</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>å…¬å…±å­—æ®µè‡ªåŠ¨å¡«å……å¸¸é‡</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>constant</span><span class="token punctuation">;</span><span class="token comment">/** * å…¬å…±å­—æ®µè‡ªåŠ¨å¡«å……ç›¸å…³å¸¸é‡ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutoFillConstant</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * å®ä½“ç±»ä¸­çš„æ–¹æ³•åç§°     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">SET_CREATE_TIME</span> <span class="token operator">=</span> <span class="token string">"setCreateTime"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">SET_UPDATE_TIME</span> <span class="token operator">=</span> <span class="token string">"setUpdateTime"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">SET_CREATE_USER</span> <span class="token operator">=</span> <span class="token string">"setCreateUser"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">SET_UPDATE_USER</span> <span class="token operator">=</span> <span class="token string">"setUpdateUser"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>ThreadLocal</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>context</span><span class="token punctuation">;</span><span class="token comment">/** * BaseContextç±»æä¾›äº†çº¿ç¨‹å®‰å…¨çš„ä¸Šä¸‹æ–‡ç®¡ç†ï¼Œä¸»è¦ç”¨äºåœ¨è·¨ä¸åŒæ“ä½œæˆ–æœåŠ¡è°ƒç”¨çš„ç¯å¢ƒä¸­ * ä¼ é€’å’Œå­˜å–ç‰¹å®šäºçº¿ç¨‹çš„æ•°æ®ã€‚è¿™å¯¹äºéœ€è¦åœ¨ä¸åŒæ“ä½œä¹‹é—´ä¿æŒæ•°æ®éš”ç¦»çš„åœºåˆç‰¹åˆ«æœ‰ç”¨ï¼Œ * æ¯”å¦‚åœ¨å¤šç”¨æˆ·ç¯å¢ƒä¸­ä¿æŒç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BaseContext</span> <span class="token punctuation">{</span>    <span class="token comment">// ä½¿ç”¨ThreadLocalæ¥å­˜å‚¨æ¯ä¸ªçº¿ç¨‹ç‹¬æœ‰çš„æ•°æ®å‰¯æœ¬ï¼Œé¿å…æ•°æ®å…±äº«å¸¦æ¥çš„çº¿ç¨‹å®‰å…¨é—®é¢˜</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> threadLocal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * è®¾ç½®å½“å‰çº¿ç¨‹çš„IDã€‚     * è¿™ä¸ªIDå¯ä»¥æ˜¯ä»»ä½•éœ€è¦åœ¨çº¿ç¨‹ä¹‹é—´ä¿æŒå’Œä¼ é€’çš„æ ‡è¯†ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·IDã€äº‹åŠ¡IDç­‰ã€‚     *     * @param id éœ€è¦è®¾ç½®çš„å½“å‰çº¿ç¨‹çš„IDã€‚     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">setCurrentId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        threadLocal<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**     * è·å–å½“å‰çº¿ç¨‹çš„IDã€‚     * è¿™ä¸ªæ–¹æ³•ç”¨äºè·å–ä¹‹å‰é€šè¿‡setCurrentIdæ–¹æ³•è®¾ç½®çš„IDï¼Œä»¥ä¾¿åœ¨åç»­çš„æ“ä½œä¸­ä½¿ç”¨ã€‚     *     * @return å½“å‰çº¿ç¨‹çš„IDï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰è®¾ç½®ï¼Œåˆ™è¿”å›nullã€‚     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Long</span> <span class="token function">getCurrentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> threadLocal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**     * ç§»é™¤å½“å‰çº¿ç¨‹çš„IDã€‚     * è¿™ä¸ªæ–¹æ³•ç”¨äºæ¸…ç†çº¿ç¨‹çš„IDä¿¡æ¯ï¼Œä»¥é‡Šæ”¾èµ„æºï¼Œç‰¹åˆ«æ˜¯åœ¨çº¿ç¨‹å¯èƒ½è¢«é‡ç”¨çš„ç¯å¢ƒä¸­ã€‚     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">removeCurrentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        threadLocal<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3ã€è‡ªå®šä¹‰æ³¨è§£"><a href="#3ã€è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="3ã€è‡ªå®šä¹‰æ³¨è§£"></a>3ã€è‡ªå®šä¹‰æ³¨è§£</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>annotation</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>enumeration<span class="token punctuation">.</span></span><span class="token class-name">OperationType</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ElementType</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Retention</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RetentionPolicy</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Target</span></span><span class="token punctuation">;</span><span class="token comment">/** * è‡ªå®šä¹‰æ³¨è§£ï¼Œç”¨äºè¡¨ç¤ºæŸä¸ªæ–¹æ³•éœ€è¦è¿›è¡Œå…¬å…±å­—æ®µçš„è‡ªåŠ¨å¡«å……ã€‚ */</span><span class="token comment">// å®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼Œç”¨äºè‡ªåŠ¨å¡«å……æ•°æ®åº“æ“ä½œçš„ç±»å‹</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">AutoFill</span> <span class="token punctuation">{</span>    <span class="token comment">//    æŒ‡å®šå½“å‰æ•°æ®åº“æ“ä½œæ•°æ®åº“çš„ç±»å‹(update insert)ï¼Œé€šè¿‡æšä¸¾çš„æ–¹å¼æ¥æŒ‡å®š</span>    <span class="token class-name">OperationType</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4ã€è‡ªå®šä¹‰åˆ‡é¢ç±»"><a href="#4ã€è‡ªå®šä¹‰åˆ‡é¢ç±»" class="headerlink" title="4ã€è‡ªå®šä¹‰åˆ‡é¢ç±»"></a>4ã€è‡ªå®šä¹‰åˆ‡é¢ç±»</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>aspect</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">AutoFill</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>constant<span class="token punctuation">.</span></span><span class="token class-name">AutoFillConstant</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">BaseContext</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>sky<span class="token punctuation">.</span>enumeration<span class="token punctuation">.</span></span><span class="token class-name">OperationType</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">JoinPoint</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Aspect</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Before</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Pointcut</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">MethodSignature</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span></span><span class="token punctuation">;</span><span class="token comment">/** * è‡ªå®šä¹‰åˆ‡é¢ç±»ï¼Œå®ç°å…¬å…±å­—æ®µè‡ªåŠ¨å¡«å……çš„é€»è¾‘ï¼Œç»Ÿä¸€æ‹¦æˆªåŠ å…¥äº†AutoFillæ³¨è§£çš„æ–¹æ³•ã€‚ */</span><span class="token annotation punctuation">@Aspect</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutoFillAspect</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æŒ‡å®šåˆ‡å…¥ç‚¹ï¼Œå¯¹é‚£äº›ç±»çš„é‚£äº›æ–¹æ³•è¿›è¡Œæ‹¦æˆªã€‚     */</span>    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(* com.sky.mapper.*.*(..)) &amp;&amp; @annotation(com.sky.annotation.AutoFill)"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">autoFillPointcut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token comment">/**     * å‰ç½®é€šçŸ¥ï¼Œåœ¨é€šçŸ¥ä¸­è¿›è¡Œå…¬å…±å­—æ®µçš„èµ‹å€¼ã€‚     */</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"autoFillPointcut()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">autoFill</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"å¼€å§‹è¿›è¡Œå…¬å…±å­—æ®µçš„å¡«å……: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1.è·å–å½“å‰è¢«æ‹¦æˆªçš„æ–¹æ³•ä¸Šçš„æ•°æ®åº“æ“ä½œç±»å‹</span>        <span class="token class-name">MethodSignature</span> signature <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MethodSignature</span><span class="token punctuation">)</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ–¹æ³•ç­¾åå¯¹è±¡</span>        <span class="token class-name">AutoFill</span> autoFill <span class="token operator">=</span> signature<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">AutoFill</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–æ–¹æ³•çš„æ³¨è§£å¯¹è±¡</span>        <span class="token class-name">OperationType</span> operationType <span class="token operator">=</span> autoFill<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è·å¾—æ•°æ®åº“çš„æ“ä½œç±»å‹</span><span class="token comment">//2.è·å–å½“å‰è¢«æ‹¦æˆªçš„æ–¹æ³•çš„å‚æ•°--å®ä½“æ•°æ®</span>        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>args <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> args<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span> entity <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// é»˜è®¤é€‰å–mapperç±»ä¸­è¢«æ³¨è§£çš„æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå®ä½“ä½œä¸ºå‚æ•°</span><span class="token comment">//3.å‡†å¤‡èµ‹å€¼çš„æ•°æ®</span>        <span class="token class-name">LocalDateTime</span> now <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Long</span> currentId <span class="token operator">=</span> <span class="token class-name">BaseContext</span><span class="token punctuation">.</span><span class="token function">getCurrentId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4.æ ¹æ®ä¸åŒçš„æ“ä½œç±»å‹ï¼Œä¸ºå¯¹åº”çš„å±æ€§é€šè¿‡åå°„æ¥èµ‹å€¼</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>operationType <span class="token operator">==</span> <span class="token class-name">OperationType</span><span class="token punctuation">.</span><span class="token constant">INSERT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//            ä¸º4ä¸ªå…¬å…±å­—æ®µè¿›è¡Œèµ‹å€¼</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span><span class="token comment">//                è·å¾—æ–¹æ³•</span>                <span class="token class-name">Method</span> setCreateTime <span class="token operator">=</span> entity<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token class-name">AutoFillConstant</span><span class="token punctuation">.</span><span class="token constant">SET_CREATE_TIME</span><span class="token punctuation">,</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Method</span> setCreateUser <span class="token operator">=</span> entity<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token class-name">AutoFillConstant</span><span class="token punctuation">.</span><span class="token constant">SET_CREATE_USER</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Method</span> setUpdateTime <span class="token operator">=</span> entity<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token class-name">AutoFillConstant</span><span class="token punctuation">.</span><span class="token constant">SET_UPDATE_TIME</span><span class="token punctuation">,</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Method</span> setUpdateUser <span class="token operator">=</span> entity<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token class-name">AutoFillConstant</span><span class="token punctuation">.</span><span class="token constant">SET_UPDATE_USER</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//                é€šè¿‡åå°„ä¸ºå¯¹è±¡å±æ€§èµ‹å€¼</span>                setCreateTime<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> now<span class="token punctuation">)</span><span class="token punctuation">;</span>                setCreateUser<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> currentId<span class="token punctuation">)</span><span class="token punctuation">;</span>                setUpdateTime<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> now<span class="token punctuation">)</span><span class="token punctuation">;</span>                setUpdateUser<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> currentId<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>operationType <span class="token operator">==</span> <span class="token class-name">OperationType</span><span class="token punctuation">.</span><span class="token constant">UPDATE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//            ä¸º2ä¸ªå…¬å…±å­—æ®µè¿›è¡Œèµ‹å€¼</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span><span class="token comment">//                è·å¾—æ–¹æ³•</span>                <span class="token class-name">Method</span> setCreateTime <span class="token operator">=</span> entity<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token class-name">AutoFillConstant</span><span class="token punctuation">.</span><span class="token constant">SET_CREATE_TIME</span><span class="token punctuation">,</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Method</span> setCreateUser <span class="token operator">=</span> entity<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token class-name">AutoFillConstant</span><span class="token punctuation">.</span><span class="token constant">SET_CREATE_USER</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//                é€šè¿‡åå°„ä¸ºå¯¹è±¡å±æ€§èµ‹å€¼</span>                setCreateTime<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> now<span class="token punctuation">)</span><span class="token punctuation">;</span>                setCreateUser<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> currentId<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5ã€åº”ç”¨"><a href="#5ã€åº”ç”¨" class="headerlink" title="5ã€åº”ç”¨"></a>5ã€åº”ç”¨</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æ’å…¥æ•°æ® * @param category * ä½¿ç”¨AutoFillæ³¨è§£æ¥è‡ªåŠ¨å¡«å……æ“ä½œç±»å‹ * è¿™ä¸ªæ³¨è§£ç”¨äºåœ¨æ‰§è¡Œç‰¹å®šæ“ä½œæ—¶è‡ªåŠ¨å¡«å……å­—æ®µ * å½“æ“ä½œç±»å‹ä¸ºINSERTæ—¶ï¼Œä¼šè‡ªåŠ¨å¡«å……æ ‡è®°äº†è¿™ä¸ªæ³¨è§£çš„å­—æ®µ */</span><span class="token annotation punctuation">@AutoFill</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">OperationType</span><span class="token punctuation">.</span><span class="token constant">INSERT</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">"insert into category(type, name, sort, status, create_time, update_time, create_user, update_user)"</span> <span class="token operator">+</span>        <span class="token string">" VALUES"</span> <span class="token operator">+</span>        <span class="token string">" (#{type}, #{name}, #{sort}, #{status}, #{createTime}, #{updateTime}, #{createUser}, #{updateUser})"</span><span class="token punctuation">)</span><span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Category</span> category<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="6ã€serviceImplä¸­é‡å¤çš„æ“ä½œæ³¨é‡Šæ‰"><a href="#6ã€serviceImplä¸­é‡å¤çš„æ“ä½œæ³¨é‡Šæ‰" class="headerlink" title="6ã€serviceImplä¸­é‡å¤çš„æ“ä½œæ³¨é‡Šæ‰"></a>6ã€serviceImplä¸­é‡å¤çš„æ“ä½œæ³¨é‡Šæ‰</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java">    <span class="token comment">/**     * ç¼–è¾‘å‘˜å·¥ä¿¡æ¯     *     * @param employeeDTO     * @return     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">EmployeeDTO</span> employeeDTO<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Employee</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">BeanUtils</span><span class="token punctuation">.</span><span class="token function">copyProperties</span><span class="token punctuation">(</span>employeeDTO<span class="token punctuation">,</span> employee<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        employee.setUpdateTime(LocalDateTime.now());</span><span class="token comment">//        employee.setUpdateUser(BaseContext.getCurrentId());</span>        employeeMapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é¡¹ç›®æ–‡ä»¶ç›®å½•"><a href="#é¡¹ç›®æ–‡ä»¶ç›®å½•" class="headerlink" title="é¡¹ç›®æ–‡ä»¶ç›®å½•"></a>é¡¹ç›®æ–‡ä»¶ç›®å½•</h2><p>â”œâ”€.idea<br>â”‚  â””â”€dataSources<br>â”‚      â””â”€11294c90-6f5c-45cc-85db-56a489e6218d<br>â”‚          â””â”€storage_v2<br>â”‚              â””â”€<em>src</em><br>â”‚                  â””â”€schema<br>â”œâ”€sky-common<br>â”‚  â”œâ”€src<br>â”‚  â”‚  â”œâ”€main<br>â”‚  â”‚  â”‚  â”œâ”€java<br>â”‚  â”‚  â”‚  â”‚  â””â”€com<br>â”‚  â”‚  â”‚  â”‚      â””â”€sky<br>â”‚  â”‚  â”‚  â”‚          â”œâ”€constant<br>â”‚  â”‚  â”‚  â”‚          â”œâ”€context<br>â”‚  â”‚  â”‚  â”‚          â”œâ”€enumeration<br>â”‚  â”‚  â”‚  â”‚          â”œâ”€exception<br>â”‚  â”‚  â”‚  â”‚          â”œâ”€json<br>â”‚  â”‚  â”‚  â”‚          â”œâ”€properties<br>â”‚  â”‚  â”‚  â”‚          â”œâ”€result<br>â”‚  â”‚  â”‚  â”‚          â””â”€utils<br>â”‚  â”‚  â”‚  â””â”€resources<br>â”‚  â”‚  â””â”€test<br>â”‚  â”‚      â””â”€java<br>â”‚  â””â”€target<br>â”‚      â”œâ”€classes<br>â”‚      â”‚  â”œâ”€com<br>â”‚      â”‚  â”‚  â””â”€sky<br>â”‚      â”‚  â”‚      â”œâ”€constant<br>â”‚      â”‚  â”‚      â”œâ”€context<br>â”‚      â”‚  â”‚      â”œâ”€enumeration<br>â”‚      â”‚  â”‚      â”œâ”€exception<br>â”‚      â”‚  â”‚      â”œâ”€json<br>â”‚      â”‚  â”‚      â”œâ”€properties<br>â”‚      â”‚  â”‚      â”œâ”€result<br>â”‚      â”‚  â”‚      â””â”€utils<br>â”‚      â”‚  â””â”€META-INF<br>â”‚      â”œâ”€generated-sources<br>â”‚      â”‚  â””â”€annotations<br>â”‚      â”œâ”€generated-test-sources<br>â”‚      â”‚  â””â”€test-annotations<br>â”‚      â”œâ”€maven-status<br>â”‚      â”‚  â””â”€maven-compiler-plugin<br>â”‚      â”‚      â”œâ”€compile<br>â”‚      â”‚      â”‚  â””â”€default-compile<br>â”‚      â”‚      â””â”€testCompile<br>â”‚      â”‚          â””â”€default-testCompile<br>â”‚      â””â”€test-classes<br>â”œâ”€sky-pojo<br>â”‚  â”œâ”€src<br>â”‚  â”‚  â”œâ”€main<br>â”‚  â”‚  â”‚  â”œâ”€java<br>â”‚  â”‚  â”‚  â”‚  â””â”€com<br>â”‚  â”‚  â”‚  â”‚      â””â”€sky<br>â”‚  â”‚  â”‚  â”‚          â”œâ”€dto<br>â”‚  â”‚  â”‚  â”‚          â”œâ”€entity<br>â”‚  â”‚  â”‚  â”‚          â””â”€vo<br>â”‚  â”‚  â”‚  â””â”€resources<br>â”‚  â”‚  â””â”€test<br>â”‚  â”‚      â””â”€java<br>â”‚  â””â”€target<br>â”‚      â”œâ”€classes<br>â”‚      â”‚  â””â”€com<br>â”‚      â”‚      â””â”€sky<br>â”‚      â”‚          â”œâ”€dto<br>â”‚      â”‚          â”œâ”€entity<br>â”‚      â”‚          â””â”€vo<br>â”‚      â”œâ”€generated-sources<br>â”‚      â”‚  â””â”€annotations<br>â”‚      â”œâ”€generated-test-sources<br>â”‚      â”‚  â””â”€test-annotations<br>â”‚      â”œâ”€maven-archiver<br>â”‚      â”œâ”€maven-status<br>â”‚      â”‚  â””â”€maven-compiler-plugin<br>â”‚      â”‚      â”œâ”€compile<br>â”‚      â”‚      â”‚  â””â”€default-compile<br>â”‚      â”‚      â””â”€testCompile<br>â”‚      â”‚          â””â”€default-testCompile<br>â”‚      â””â”€test-classes<br>â””â”€sky-server<br>    â”œâ”€src<br>    â”‚  â”œâ”€main<br>    â”‚  â”‚  â”œâ”€java<br>    â”‚  â”‚  â”‚  â””â”€com<br>    â”‚  â”‚  â”‚      â””â”€sky<br>    â”‚  â”‚  â”‚          â”œâ”€annotation<br>    â”‚  â”‚  â”‚          â”œâ”€aspect<br>    â”‚  â”‚  â”‚          â”œâ”€config<br>    â”‚  â”‚  â”‚          â”œâ”€controller<br>    â”‚  â”‚  â”‚          â”‚  â”œâ”€admin<br>    â”‚  â”‚  â”‚          â”‚  â””â”€user<br>    â”‚  â”‚  â”‚          â”œâ”€handler<br>    â”‚  â”‚  â”‚          â”œâ”€interceptor<br>    â”‚  â”‚  â”‚          â”œâ”€mapper<br>    â”‚  â”‚  â”‚          â””â”€service<br>    â”‚  â”‚  â”‚              â””â”€impl<br>    â”‚  â”‚  â””â”€resources<br>    â”‚  â”‚      â””â”€mapper<br>    â”‚  â””â”€test<br>    â”‚      â””â”€java<br>    â””â”€target<br>        â”œâ”€classes<br>        â”‚  â”œâ”€com<br>        â”‚  â”‚  â””â”€sky<br>        â”‚  â”‚      â”œâ”€annotation<br>        â”‚  â”‚      â”œâ”€aspect<br>        â”‚  â”‚      â”œâ”€config<br>        â”‚  â”‚      â”œâ”€controller<br>        â”‚  â”‚      â”‚  â””â”€admin<br>        â”‚  â”‚      â”œâ”€handler<br>        â”‚  â”‚      â”œâ”€interceptor<br>        â”‚  â”‚      â”œâ”€mapper<br>        â”‚  â”‚      â””â”€service<br>        â”‚  â”‚          â””â”€impl<br>        â”‚  â””â”€mapper<br>        â”œâ”€generated-sources<br>        â”‚  â””â”€annotations<br>        â”œâ”€generated-test-sources<br>        â”‚  â””â”€test-annotations<br>        â”œâ”€maven-status<br>        â”‚  â””â”€maven-compiler-plugin<br>        â”‚      â”œâ”€compile<br>        â”‚      â”‚  â””â”€default-compile<br>        â”‚      â””â”€testCompile<br>        â”‚          â””â”€default-testCompile<br>        â””â”€test-classes</p>]]></content>
      
      
      <categories>
          
          <category> JavaEEé«˜çº§ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AOP </tag>
            
            <tag> ThreadLocal </tag>
            
            <tag> æ³¨è§£ã€åå°„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Githubæ— æ³•ä¸Šä¼ å’Œæ‹‰å–</title>
      <link href="/2025/01/04/github-wu-fa-shang-chuan-he-la-qu/"/>
      <url>/2025/01/04/github-wu-fa-shang-chuan-he-la-qu/</url>
      
        <content type="html"><![CDATA[<p>å…ˆè¯•è¯•ä½ èƒ½ç›´æ¥è®¿é—®<a href="https://github.com/" title="GitHub: Letâ€™s build from here Â· GitHub">GitHub: Letâ€™s build from here Â· GitHub</a>å—ï¼Ÿ</p><p>ä½ æ˜¯ç›´æ¥å°±å¯ä»¥è®¿é—®æˆåŠŸè¿˜æ˜¯æŒ‚æ¢¯å­ä¹‹åè®¿é—®æˆåŠŸçš„å‘¢ï¼Ÿ</p><p>ä¸€ã€å¦‚æœæ˜¯åœ¨æŒ‚ç€æ¢¯å­çš„æƒ…å†µä¸‹æ‹‰å–æˆ–è€…æ¨é€ä»£ç çš„æ—¶å€™æ˜¯å¦é‡åˆ°äº†æŠ¥é”™ï¼Ÿ</p><blockquote><p>fatal: unable to access â€˜<a href="https://github.com/xxx//*/*/*/*/*/*.git/">https://github.com/xxx/\*\*\*\*\*\*.git/</a>â€˜: Failed to connect to github.com port 443 after 21090 ms: Couldnâ€™t connect to server</p></blockquote><p>ä¸€èˆ¬å‡ºç°è¿™ç§é—®é¢˜éƒ½æ˜¯å¼€è¿‡VPNå¯¼è‡´çš„æœ¬æœºç³»ç»Ÿç«¯å£å·å’Œgitçš„ç«¯å£å·ä¸ä¸€è‡´å¯¼è‡´çš„ã€‚</p><p>è§£å†³åŠæ³•ï¼š</p><p>1.æŸ¥çœ‹æœ¬æœºç³»ç»Ÿç«¯å£å·ï¼š</p><blockquote><p>è®¾ç½®-&gt;ç½‘ç»œå’ŒInternet-&gt;ä»£ç†</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/01/10-74969f8b7349cc1f988dfa6a3f59ea08-edfde9b94f1a9d05ee2329ecf6b1b888.png"></p><p>2.è®¾ç½®gitç«¯å£å·å’Œä¸Šé¢çš„ç«¯å£å·ä¿æŒä¸€è‡´ï¼ˆæˆ‘çš„æ˜¯10809ï¼‰ï¼š</p><blockquote><p>git config â€“global http.proxy 127.0.0.1:10809</p><p>git config â€“global https.proxy 127.0.0.1:10809</p></blockquote><p>&nbsp;3.æŸ¥çœ‹gitè®¾ç½®ï¼ˆå¯ä»¥çœç•¥ï¼‰ï¼š</p><blockquote><p>PS D:\demo&gt; &nbsp;git config â€“global -l</p><p>user.email=<a href="mailto:xxx@qq.com">xxx@qq.com</a><br>user.name=xxx<br>http.proxy=127.0.0.1:10809<br>https.proxy=127.0.0.1:10809</p></blockquote><p>4.å†æ¬¡push æˆ–è€… pull å³å¯ï¼ˆä¿é™©èµ·è§å¯ä»¥å…ˆåœ¨cmdçª—å£ä¸­ä½¿ç”¨ ipconfig/flushdns&nbsp;åˆ·æ–°dnsç¼“å­˜ï¼‰ã€‚&nbsp;</p><p>äºŒã€å¦‚æœæ²¡æœ‰æŒ‚ç€æ¢¯å­ä½†æ˜¯è¿˜æ˜¯é‡åˆ°äº†ä»¥ä¸ŠæŠ¥é”™</p><p>&nbsp;è¿˜æ˜¯ä¸€æ ·çš„åŸå› ï¼Œä¸¤è¾¹ç«¯å£ä¸ä¸€è‡´å¯¼è‡´çš„ï¼Œé‚£ä¹ˆç›´æ¥å»æ‰gitä»£ç†å³å¯ï¼š</p><blockquote><p>git config â€“global â€“unset&nbsp;http.proxy</p><p>git config â€“global â€“unset&nbsp;https.proxy</p></blockquote><p>&nbsp;å†æ¬¡push æˆ–è€… pull å³å¯ï¼ˆä¿é™©èµ·è§å¯ä»¥å…ˆåœ¨cmdçª—å£ä¸­ä½¿ç”¨ ipconfig/flushdns&nbsp;åˆ·æ–°dnsç¼“å­˜ï¼‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–°ideaå¦‚ä½•åˆ›å»ºjava8é¡¹ç›®</title>
      <link href="/2024/12/17/xin-idea-ru-he-chuang-jian-java8-xiang-mu/"/>
      <url>/2024/12/17/xin-idea-ru-he-chuang-jian-java8-xiang-mu/</url>
      
        <content type="html"><![CDATA[<h1 id="è§£å†³ideaè‡³å°‘åˆ›å»ºjdk17é¡¹ç›®"><a href="#è§£å†³ideaè‡³å°‘åˆ›å»ºjdk17é¡¹ç›®" class="headerlink" title="è§£å†³ideaè‡³å°‘åˆ›å»ºjdk17é¡¹ç›®"></a>è§£å†³ideaè‡³å°‘åˆ›å»ºjdk17é¡¹ç›®</h1><h2 id="1ã€é—®é¢˜æè¿°"><a href="#1ã€é—®é¢˜æè¿°" class="headerlink" title="1ã€é—®é¢˜æè¿°"></a>1ã€é—®é¢˜æè¿°</h2><p>å…·ä½“ä¸€ç‚¹ï¼Œåº”è¯¥æ˜¯ä½¿ç”¨ IDEA å†…ç½®çš„ Spring Initializr åˆ›å»º Spring Boot æ–°é¡¹ç›®æ—¶ï¼Œåªå‰©ä¸‹äº† &gt;= 17 çš„ç‰ˆæœ¬</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412172127002.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>å»ç½‘ä¸Šæœäº†ä¸€åœˆï¼ŒåŸæ¥è¿™æ˜¯å› ä¸º Spring Boot å®˜æ–¹ä¸å†æ”¯æŒ Spring Boot çš„ 2.x ç‰ˆæœ¬äº†ï¼Œä¹‹åå…¨åŠ›ç»´æŠ¤ 3.xï¼›è€Œ Spring Boot 3.x å¯¹ JDK ç‰ˆæœ¬çš„æœ€ä½è¦æ±‚æ˜¯ 17ï¼<br><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412172127470.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>é‚£å°±æ˜¯ä¸è¦ç”¨å®˜æ–¹æä¾›çš„ Spring Initializr æ¥åˆå§‹åŒ–é¡¹ç›®äº†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘æä¾›çš„<a href="https://so.csdn.net/so/search?q=%E8%84%9A%E6%89%8B%E6%9E%B6&amp;spm=1001.2101.3001.7020">è„šæ‰‹æ¶</a>é•œåƒï¼ˆ<a href="https://start.aliyun.com/%EF%BC%89%EF%BC%8C%E4%B8%80%E6%A0%B7%E6%84%89%E5%BF%AB%E5%9C%B0%E4%BD%BF%E7%94%A8">https://start.aliyun.com/ï¼‰ï¼Œä¸€æ ·æ„‰å¿«åœ°ä½¿ç”¨</a> Java 8~</p><h2 id="2ã€-é—®é¢˜è§£å†³"><a href="#2ã€-é—®é¢˜è§£å†³" class="headerlink" title="2ã€ é—®é¢˜è§£å†³"></a>2ã€ é—®é¢˜è§£å†³</h2><p>åœ¨ IDEA é‡Œæ›´æ”¹ Server URL å³å¯ï¼š<code>https://start.aliyun.com/</code><br><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412172127765.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="3ã€åˆå§‹åŒ–æ–‡ä»¶"><a href="#3ã€åˆå§‹åŒ–æ–‡ä»¶" class="headerlink" title="3ã€åˆå§‹åŒ–æ–‡ä»¶"></a>3ã€åˆå§‹åŒ–æ–‡ä»¶</h2><p>åŸæ¥çš„url: <code>https://start.spring.io</code></p><p>ä¿®æ”¹åURL: <code>https://start.aliyun.com/</code></p><p>github: <code>https://github.com/zhangyao0329/InitializrJ2ee.git</code></p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
            <tag> è„šæ‰‹æ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mavené«˜çº§-ç§æœ</title>
      <link href="/2024/12/14/maven-gao-ji-si-fu/"/>
      <url>/2024/12/14/maven-gao-ji-si-fu/</url>
      
        <content type="html"><![CDATA[<h1 id="Mavenç§æœ"><a href="#Mavenç§æœ" class="headerlink" title="Mavenç§æœ"></a>Mavenç§æœ</h1><h2 id="1ã€ç§æœé…ç½®è¯´æ˜"><a href="#1ã€ç§æœé…ç½®è¯´æ˜" class="headerlink" title="1ã€ç§æœé…ç½®è¯´æ˜"></a>1ã€ç§æœé…ç½®è¯´æ˜</h2><p>è®¿é—®ç§æœï¼š<a href="http://192.168.150.101:8081/">http://192.168.150.101:8081</a></p><p>è®¿é—®å¯†ç ï¼šadmin/admin</p><p>é€šè¿‡ç½‘ç›˜åˆ†äº«çš„æ–‡ä»¶ï¼šapache-maven-nexus.zip<br>é“¾æ¥: <a href="https://pan.baidu.com/s/1b-E1NUb2S5aTHXGM3kU32w?pwd=6666">https://pan.baidu.com/s/1b-E1NUb2S5aTHXGM3kU32w?pwd=6666</a> æå–ç : 6666</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/14-b9030e34682c1e22596b7c465235afb0-image-20241214211640781.png"></p><p>ä½¿ç”¨ç§æœï¼Œéœ€è¦åœ¨mavençš„settings.xmlé…ç½®æ–‡ä»¶ä¸­ï¼Œåšå¦‚ä¸‹é…ç½®ï¼š</p><ol><li><p>éœ€è¦åœ¨ <strong>servers</strong> æ ‡ç­¾ä¸­ï¼Œé…ç½®è®¿é—®ç§æœçš„ä¸ªäººå‡­è¯(è®¿é—®çš„ç”¨æˆ·åå’Œå¯†ç )</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>maven-releases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>username</span><span class="token punctuation">&gt;</span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>username</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>server</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>maven-snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>username</span><span class="token punctuation">&gt;</span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>username</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>server</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>åœ¨ <strong>mirrors</strong> ä¸­åªé…ç½®æˆ‘ä»¬è‡ªå·±ç§æœçš„è¿æ¥åœ°å€(å¦‚æœä¹‹å‰é…ç½®è¿‡é˜¿é‡Œäº‘ï¼Œéœ€è¦ç›´æ¥æ›¿æ¢æ‰)</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>maven-public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://192.168.150.101:8081/repository/maven-public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>éœ€è¦åœ¨ <strong>profiles</strong> ä¸­ï¼Œå¢åŠ å¦‚ä¸‹é…ç½®ï¼Œæ¥æŒ‡å®šsnapshotå¿«ç…§ç‰ˆæœ¬çš„ä¾èµ–ï¼Œä¾ç„¶å…è®¸ä½¿ç”¨</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>allow-snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activation</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activation</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>maven-public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://192.168.150.101:8081/repository/maven-public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å¦‚æœéœ€è¦ä¸Šä¼ è‡ªå·±çš„é¡¹ç›®åˆ°ç§æœä¸Šï¼Œéœ€è¦åœ¨é¡¹ç›®çš„pom.xmlæ–‡ä»¶ä¸­ï¼Œå¢åŠ å¦‚ä¸‹é…ç½®ï¼Œæ¥é…ç½®é¡¹ç›®å‘å¸ƒçš„åœ°å€(ä¹Ÿå°±æ˜¯ç§æœçš„åœ°å€)</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>distributionManagement</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- releaseç‰ˆæœ¬çš„å‘å¸ƒåœ°å€ --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>maven-releases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://192.168.150.101:8081/repository/maven-releases/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- snapshotç‰ˆæœ¬çš„å‘å¸ƒåœ°å€ --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshotRepository</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>maven-snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://192.168.150.101:8081/repository/maven-snapshots/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshotRepository</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>distributionManagement</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å‘å¸ƒé¡¹ç›®ï¼Œç›´æ¥è¿è¡Œ deploy ç”Ÿå‘½å‘¨æœŸå³å¯ (å‘å¸ƒæ—¶ï¼Œå»ºè®®è·³è¿‡å•å…ƒæµ‹è¯•)</p></li></ol><p>â€‹</p><h2 id="2ã€å¯åŠ¨æœ¬åœ°ç§æœ"><a href="#2ã€å¯åŠ¨æœ¬åœ°ç§æœ" class="headerlink" title="2ã€å¯åŠ¨æœ¬åœ°ç§æœ"></a>2ã€å¯åŠ¨æœ¬åœ°ç§æœ</h2><ol><li><p>è§£å‹ï¼š apache-maven-nexus.zip</p></li><li><p>è¿›å…¥ç›®å½•ï¼š apache-maven-nexus\nexus-3.39.0-01\bin</p></li><li><p>å¯åŠ¨æœåŠ¡ï¼šåŒå‡» start.bat </p></li><li><p>è®¿é—®æœåŠ¡ï¼šlocalhost:8081</p></li><li><p>ç§æœé…ç½®è¯´æ˜ï¼šå°†ä¸Šè¿°é…ç½®ç§æœä¿¡æ¯çš„ 192.168.150.101 æ”¹ä¸º localhost</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mavené«˜çº§</title>
      <link href="/2024/12/11/maven-gao-ji/"/>
      <url>/2024/12/11/maven-gao-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="Mavené«˜çº§"><a href="#Mavené«˜çº§" class="headerlink" title="Mavené«˜çº§"></a>Mavené«˜çº§</h1><p>Webå¼€å‘è®²è§£å®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬å†æ¥å­¦ä¹ Mavené«˜çº§ã€‚å…¶å®åœ¨å‰é¢çš„è¯¾ç¨‹å½“ä¸­ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¹ äº†Mavenã€‚</p><p>æˆ‘ä»¬è®²åˆ° <strong>Maven æ˜¯ä¸€æ¬¾æ„å»ºå’Œç®¡ç† Java é¡¹ç›®çš„å·¥å…·</strong>ã€‚ç»è¿‡å‰é¢ 10 å¤šå¤© web å¼€å‘çš„å­¦ä¹ ï¼Œç›¸ä¿¡å¤§å®¶å¯¹äº Maven è¿™æ¬¾å·¥å…·çš„åŸºæœ¬ä½¿ç”¨åº”è¯¥æ²¡ä»€ä¹ˆé—®é¢˜äº†ã€‚æˆ‘ä»¬æŒæ¡äº† Maven å·¥å…·çš„åŸºæœ¬ä½¿ç”¨ä¹‹åï¼Œå…¶å®å¯¹äºä¸€äº›ç®€å•çš„é¡¹ç›®çš„æ„å»ºåŠç®¡ç†åŸºæœ¬ä¸Šå°±æ²¡ä»€ä¹ˆé—®é¢˜äº†ã€‚</p><p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦å¼€å‘ä¸€äº›ä¸­å¤§å‹çš„é¡¹ç›®ï¼Œæ­¤æ—¶ä»…å‡­æˆ‘ä»¬å‰é¢æ‰€å­¦ä¹ çš„ Maven çš„åŸºç¡€çŸ¥è¯†å°±æ¯”è¾ƒéš¾ä»¥åº”å¯¹äº†ã€‚æ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥è¿˜éœ€è¦å­¦ä¹  Maven æä¾›çš„ä¸€äº›é«˜çº§çš„åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½åœ¨æ„å»ºå’Œç®¡ç† Java é¡¹ç›®çš„æ—¶å€™ç”¨çš„ä¹Ÿæ˜¯éå¸¸å¤šçš„ã€‚</p><p>Mavené«˜çº§å†…å®¹åŒ…æ‹¬:</p><ul><li>åˆ†æ¨¡å—è®¾è®¡ä¸å¼€å‘</li><li>ç»§æ‰¿ä¸èšåˆ</li><li>ç§æœ</li></ul><h2 id="1ã€-åˆ†æ¨¡å—è®¾è®¡ä¸å¼€å‘"><a href="#1ã€-åˆ†æ¨¡å—è®¾è®¡ä¸å¼€å‘" class="headerlink" title="1ã€ åˆ†æ¨¡å—è®¾è®¡ä¸å¼€å‘"></a>1ã€ åˆ†æ¨¡å—è®¾è®¡ä¸å¼€å‘</h2><h3 id="1-1-ä»‹ç»"><a href="#1-1-ä»‹ç»" class="headerlink" title="1.1 ä»‹ç»"></a>1.1 ä»‹ç»</h3><p>æ‰€è°“åˆ†æ¨¡å—è®¾è®¡ï¼Œé¡¾åæ€ä¹‰æŒ‡çš„å°±æ˜¯æˆ‘ä»¬åœ¨è®¾è®¡ä¸€ä¸ª Java é¡¹ç›®çš„æ—¶å€™ï¼Œå°†ä¸€ä¸ª Java é¡¹ç›®æ‹†åˆ†æˆå¤šä¸ªæ¨¡å—è¿›è¡Œå¼€å‘ã€‚</p><p><strong>1). æœªåˆ†æ¨¡å—è®¾è®¡çš„é—®é¢˜</strong></p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112104950.png" alt="image-202412112104950" style="zoom:67%;"> <p>å¦‚æœé¡¹ç›®ä¸åˆ†æ¨¡å—ï¼Œä¹Ÿå°±æ„å‘³ç€æ‰€æœ‰çš„ä¸šåŠ¡ä»£ç æ˜¯ä¸æ˜¯éƒ½å†™åœ¨è¿™ä¸€ä¸ª Java é¡¹ç›®å½“ä¸­ã€‚éšç€è¿™ä¸ªé¡¹ç›®çš„ä¸šåŠ¡æ‰©å¼ ï¼Œé¡¹ç›®å½“ä¸­çš„ä¸šåŠ¡åŠŸèƒ½å¯èƒ½ä¼šè¶Šæ¥è¶Šå¤šã€‚</p><p>å‡å¦‚æˆ‘ä»¬å¼€å‘çš„æ˜¯ä¸€ä¸ªå¤§å‹çš„ç”µå•†é¡¹ç›®ï¼Œé‡Œé¢å¯èƒ½å°±åŒ…æ‹¬äº†å•†å“æ¨¡å—çš„åŠŸèƒ½ã€æœç´¢æ¨¡å—çš„åŠŸèƒ½ã€è´­ç‰©è½¦æ¨¡å—ã€è®¢å•æ¨¡å—ã€ç”¨æˆ·ä¸­å¿ƒç­‰ç­‰ã€‚è¿™äº›æ‰€æœ‰çš„ä¸šåŠ¡ä»£ç æˆ‘ä»¬éƒ½åœ¨ä¸€ä¸ª Java é¡¹ç›®å½“ä¸­ç¼–å†™ã€‚</p><p>æ­¤æ—¶å¤§å®¶å¯ä»¥è¯•æƒ³ä¸€ä¸‹ï¼Œå‡å¦‚æˆ‘ä»¬å¼€å‘çš„æ˜¯ä¸€ä¸ªå¤§å‹çš„ç”µå•†ç½‘ç«™ï¼Œè¿™ä¸ªé¡¹ç›®ç»„è‡³å°‘å‡ åå·ç”šè‡³å‡ ç™¾å·å¼€å‘äººå‘˜ï¼Œè¿™äº›å¼€å‘äººå‘˜å…¨éƒ¨æ“ä½œè¿™ä¸€ä¸ª Java é¡¹ç›®ã€‚æ­¤æ—¶å¤§å®¶å°±ä¼šå‘ç°æˆ‘ä»¬é¡¹ç›®ç®¡ç†å’Œç»´æŠ¤èµ·æ¥å°†ä¼šéå¸¸çš„å›°éš¾ã€‚è€Œä¸”å¤§å®¶å†æ¥çœ‹ï¼Œå‡å¦‚åœ¨æˆ‘ä»¬çš„é¡¹ç›®å½“ä¸­ï¼Œæˆ‘ä»¬è‡ªå·±å®šä¹‰äº†ä¸€äº›é€šç”¨çš„å·¥å…·ç±»ä»¥åŠé€šç”¨çš„ç»„ä»¶ï¼Œè€Œå…¬å¸è¿˜æœ‰å…¶ä»–çš„é¡¹ç›®ç»„ï¼Œå…¶ä»–é¡¹ç›®ç»„ä¹Ÿæƒ³ä½¿ç”¨æˆ‘ä»¬æ‰€å°è£…çš„è¿™äº›ç»„ä»¶å’Œå·¥å…·ç±»ï¼Œå…¶å®æ˜¯éå¸¸ä¸æ–¹ä¾¿çš„ã€‚å› ä¸º Java é¡¹ç›®å½“ä¸­åŒ…å«äº†å½“å‰é¡¹ç›®çš„æ‰€æœ‰ä¸šåŠ¡ä»£ç ï¼Œæ‰€ä»¥å°±é€ æˆäº†è¿™é‡Œé¢æ‰€å°è£…çš„ä¸€äº›ç»„ä»¶ä¼šéš¾ä»¥å¤ç”¨ã€‚</p><p><strong>æ€»ç»“èµ·æ¥ï¼Œä¸»è¦ä¸¤ç‚¹é—®é¢˜ï¼šä¸æ–¹ä¾¿é¡¹ç›®çš„ç»´æŠ¤å’Œç®¡ç†ã€é¡¹ç›®ä¸­çš„é€šç”¨ç»„ä»¶éš¾ä»¥å¤ç”¨ã€‚</strong></p><p><strong>2). åˆ†æ¨¡å—è®¾è®¡</strong></p><p>åˆ†æ¨¡å—è®¾è®¡æˆ‘ä»¬åœ¨è¿›è¡Œé¡¹ç›®è®¾è®¡é˜¶æ®µï¼Œå°±å¯ä»¥å°†ä¸€ä¸ªå¤§çš„é¡¹ç›®æ‹†åˆ†æˆè‹¥å¹²ä¸ªæ¨¡å—ï¼Œæ¯ä¸€ä¸ªæ¨¡å—éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112106931.png"> </p><p>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å°†å•†å“çš„ç›¸å…³åŠŸèƒ½æ”¾åœ¨å•†å“æ¨¡å—å½“ä¸­ï¼Œæœç´¢çš„ç›¸å…³ä¸šåŠ¡åŠŸèƒ½æˆ‘éƒ½å°è£…åœ¨æœç´¢æ¨¡å—å½“ä¸­ï¼Œè¿˜æœ‰åƒè´­ç‰©è½¦æ¨¡å—ã€è®¢å•æ¨¡å—ã€‚è€Œä¸ºäº†ç»„ä»¶çš„å¤ç”¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†é¡¹ç›®å½“ä¸­çš„å®ä½“ç±»ã€å·¥å…·ç±»ä»¥åŠæˆ‘ä»¬å®šä¹‰çš„é€šç”¨çš„ç»„ä»¶éƒ½å•ç‹¬çš„æŠ½å–åˆ°ä¸€ä¸ªæ¨¡å—å½“ä¸­ã€‚</p><p>å¦‚æœå½“å‰è¿™ä¸ªæ¨¡å—ï¼Œæ¯”å¦‚è®¢å•æ¨¡å—éœ€è¦ç”¨åˆ°è¿™äº›å®ä½“ç±»ä»¥åŠå·¥å…·ç±»æˆ–è€…è¿™äº›é€šç”¨ç»„ä»¶ï¼Œæ­¤æ—¶ç›´æ¥åœ¨è®¢å•æ¨¡å—å½“ä¸­å¼•å…¥å·¥å…·ç±»çš„åæ ‡å°±å¯ä»¥äº†ã€‚è¿™æ ·æˆ‘ä»¬å°±å°†ä¸€ä¸ªé¡¹ç›®æ‹†åˆ†æˆäº†è‹¥å¹²ä¸ªæ¨¡å—å„¿ï¼Œè¿™å°±æ˜¯åˆ†æ¨¡å—å„¿è®¾è®¡ã€‚</p><p>åˆ†æ¨¡å—å„¿è®¾è®¡ä¹‹åï¼Œå¤§å®¶å†æ¥çœ‹ã€‚æˆ‘ä»¬åœ¨è¿›è¡Œé¡¹ç›®ç®¡ç†çš„æ—¶å€™ï¼Œæˆ‘å°±å¯ä»¥å‡ ä¸ªäººä¸€ç»„ï¼Œå‡ ä¸ªäººæ¥è´Ÿè´£è®¢å•æ¨¡å—å„¿ï¼Œå¦å¤–å‡ ä¸ªäººæ¥è´Ÿè´£è´­ç‰©è½¦æ¨¡å—å„¿ï¼Œè¿™æ ·æ›´åŠ ä¾¿äºé¡¹ç›®çš„ç®¡ç†ä»¥åŠé¡¹ç›®çš„åæœŸç»´æŠ¤ã€‚</p><p>è€Œä¸”åˆ†æ¨¡å—è®¾è®¡ä¹‹åï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ç”¨åˆ°å¦å¤–ä¸€ä¸ªæ¨¡å—çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬ç›´æ¥ä¾èµ–æ¨¡å—å°±å¯ä»¥äº†ã€‚æ¯”å¦‚å•†å“æ¨¡å—ã€æœç´¢æ¨¡å—ã€è´­ç‰©è½¦è®¢å•æ¨¡å—éƒ½éœ€è¦ä¾èµ–äºé€šç”¨ç»„ä»¶å½“ä¸­å°è£…çš„ä¸€äº›å·¥å…·ç±»ï¼Œæˆ‘åªéœ€è¦å¼•å…¥é€šç”¨ç»„ä»¶çš„åæ ‡å°±å¯ä»¥äº†ã€‚</p><p><strong>åˆ†æ¨¡å—è®¾è®¡å°±æ˜¯å°†é¡¹ç›®æŒ‰ç…§åŠŸèƒ½/ç»“æ„æ‹†åˆ†æˆè‹¥å¹²ä¸ªå­æ¨¡å—ï¼Œæ–¹ä¾¿é¡¹ç›®çš„ç®¡ç†ç»´æŠ¤ã€æ‹“å±•ï¼Œä¹Ÿæ–¹ä¾¿æ¨¡å—é”®çš„ç›¸äº’è°ƒç”¨ã€èµ„æºå…±äº«ã€‚</strong></p><h3 id="1-2-å®è·µ"><a href="#1-2-å®è·µ" class="headerlink" title="1.2 å®è·µ"></a>1.2 å®è·µ</h3><h4 id="1-2-1-åˆ†æ"><a href="#1-2-1-åˆ†æ" class="headerlink" title="1.2.1 åˆ†æ"></a>1.2.1 åˆ†æ</h4><p>å¥½ï¼Œæˆ‘ä»¬æ˜ç™½äº†ä»€ä¹ˆæ˜¯åˆ†æ¨¡å—è®¾è®¡ä»¥åŠåˆ†æ¨¡å—è®¾è®¡çš„ä¼˜åŠ¿ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰æ‰€å¼€å‘çš„æ¡ˆä¾‹å·¥ç¨‹ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨è¿™ä¸ªé¡¹ç›®å½“ä¸­ï¼Œé™¤äº†æˆ‘ä»¬æ‰€å¼€å‘çš„éƒ¨é—¨ç®¡ç†ä»¥åŠå‘˜å·¥ç®¡ç†ã€ç™»å½•è®¤è¯ç­‰ç›¸å…³ä¸šåŠ¡åŠŸèƒ½ä»¥å¤–ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯ä¹Ÿå®šä¹‰äº†ä¸€äº›å®ä½“ç±»ï¼Œä¹Ÿå°±æ˜¯pojoåŒ…ä¸‹å­˜æ”¾çš„ä¸€äº›ç±»ï¼Œåƒåˆ†é¡µç»“æœçš„å°è£…ç±»PageBeanã€ ç»Ÿä¸€å“åº”ç»“æœResultï¼Œæˆ‘ä»¬è¿˜å®šä¹‰äº†ä¸€äº›é€šç”¨çš„å·¥å…·ç±»ï¼ŒåƒJwtsã€é˜¿é‡Œäº‘OSSæ“ä½œçš„å·¥å…·ç±»ç­‰ç­‰ã€‚</p><p>å¦‚æœåœ¨å½“å‰å…¬å¸çš„å…¶ä»–é¡¹ç›®ç»„å½“ä¸­ï¼Œä¹Ÿæƒ³ä½¿ç”¨æˆ‘ä»¬æ‰€å°è£…çš„è¿™äº›å…¬å…±çš„ç»„ä»¶ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿå¤§å®¶å¯ä»¥æ€è€ƒä¸€ä¸‹ã€‚</p><ul><li><p>æ–¹æ¡ˆä¸€ï¼šç›´æ¥ä¾èµ–æˆ‘ä»¬å½“å‰é¡¹ç›® tlias-web-management ï¼Œä½†æ˜¯å­˜åœ¨ä¸¤å¤§ç¼ºç‚¹ï¼š</p><ul><li>è¿™ä¸ªé¡¹ç›®å½“ä¸­åŒ…å«æ‰€æœ‰çš„ä¸šåŠ¡åŠŸèƒ½ä»£ç ï¼Œè€Œæƒ³å…±äº«çš„èµ„æºï¼Œä»…ä»…æ˜¯pojoä¸‹çš„å®ä½“ç±»ï¼Œä»¥åŠ utils ä¸‹çš„å·¥å…·ç±»ã€‚å¦‚æœå…¨éƒ¨éƒ½ä¾èµ–è¿›æ¥ï¼Œé¡¹ç›®åœ¨å¯åŠ¨æ—¶å°†ä¼šæŠŠæ‰€æœ‰çš„ç±»éƒ½åŠ è½½è¿›æ¥ï¼Œä¼š<strong>å½±å“æ€§èƒ½</strong>ã€‚</li><li>å¦‚æœç›´æ¥æŠŠè¿™ä¸ªé¡¹ç›®éƒ½ä¾èµ–è¿›æ¥äº†ï¼Œé‚£ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬æ‰€æœ‰çš„ä¸šåŠ¡ä»£ç éƒ½å¯¹å¤–å…¬å¼€äº†ï¼Œè¿™ä¸ªæ˜¯éå¸¸<strong>ä¸å®‰å…¨</strong>çš„ã€‚</li></ul></li><li><p>æ–¹æ¡ˆäºŒï¼šåˆ†æ¨¡å—è®¾è®¡</p><ul><li>å°†pojoåŒ…ä¸‹çš„å®ä½“ç±»ï¼ŒæŠ½å–åˆ°ä¸€ä¸ªmavenæ¨¡å—ä¸­ tlias-pojo</li><li>å°†utilsåŒ…ä¸‹çš„å·¥å…·ç±»ï¼ŒæŠ½å–åˆ°ä¸€ä¸ªmavenæ¨¡å—ä¸­ tlias-utils</li><li>å…¶ä»–çš„ä¸šåŠ¡ä»£ç ï¼Œæ”¾åœ¨tlias-web-managementè¿™ä¸ªæ¨¡å—ä¸­ï¼Œåœ¨è¯¥æ¨¡å—ä¸­éœ€è¦ç”¨åˆ°å®ä½“ç±»pojoã€å·¥å…·ç±»utilsï¼Œç›´æ¥å¼•å…¥å¯¹åº”çš„ä¾èµ–å³å¯ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112106997.png"></p></li></ul><p>â€‹</p><blockquote><p>â€‹<strong>æ³¨æ„ï¼šåˆ†æ¨¡å—å¼€å‘éœ€è¦å…ˆé’ˆå¯¹æ¨¡å—åŠŸèƒ½è¿›è¡Œè®¾è®¡ï¼Œå†è¿›è¡Œç¼–ç ã€‚ä¸ä¼šå…ˆå°†å·¥ç¨‹å¼€å‘å®Œæ¯•ï¼Œç„¶åè¿›è¡Œæ‹†åˆ†ã€‚</strong></p><p>â€‹PSï¼šå½“å‰æˆ‘ä»¬æ˜¯ä¸ºäº†æ¼”ç¤ºåˆ†æ¨¡å—å¼€å‘ï¼Œæ‰€ä»¥æ˜¯åŸºäºæˆ‘ä»¬å‰é¢å¼€å‘çš„æ¡ˆä¾‹é¡¹ç›®è¿›è¡Œæ‹†åˆ†çš„ï¼Œå®é™…ä¸­éƒ½æ˜¯åˆ†æ¨¡å—è®¾è®¡ï¼Œç„¶åå†å¼€å‘çš„ã€‚</p></blockquote><h4 id="1-2-2-å®ç°"><a href="#1-2-2-å®ç°" class="headerlink" title="1.2.2 å®ç°"></a>1.2.2 å®ç°</h4><p>æ€è·¯æˆ‘ä»¬åˆ†æå®Œæ¯•ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ ¹æ®æˆ‘ä»¬åˆ†æçš„æ€è·¯ï¼ŒæŒ‰ç…§å¦‚ä¸‹æ¨¡å—è¿›è¡Œæ‹†åˆ†ï¼š</p><p><strong>1. åˆ›å»ºmavenæ¨¡å— tlias-pojoï¼Œå­˜æ”¾å®ä½“ç±»</strong></p><p>A. åˆ›å»ºä¸€ä¸ªæ­£å¸¸çš„Mavenæ¨¡å—ï¼Œæ¨¡å—åtlias-pojo</p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112106122.png" alt="image-20230113100500382" style="zoom: 60%;"> <img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112106053.png" alt="image-20230113100756843" style="zoom: 60%;"> <p>B. ç„¶ååœ¨tlias-pojoä¸­åˆ›å»ºä¸€ä¸ªåŒ… com.itheima.pojo (å’ŒåŸæ¥æ¡ˆä¾‹é¡¹ç›®ä¸­çš„pojoåŒ…åä¸€è‡´)</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112106519.png"> </p><p>C. å°†åŸæ¥æ¡ˆä¾‹é¡¹ç›® tlias-web-management ä¸­çš„pojoåŒ…ä¸‹çš„å®ä½“ç±»ï¼Œå¤åˆ¶åˆ°tlias-pojoæ¨¡å—ä¸­</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112107186.png"> </p><p>D. åœ¨ tlias-pojo æ¨¡å—çš„pom.xmlæ–‡ä»¶ä¸­å¼•å…¥ä¾èµ–</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.18.24<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>E. åˆ é™¤åŸæœ‰æ¡ˆä¾‹é¡¹ç›®tlias-web-managementçš„pojoåŒ…ã€ç›´æ¥åˆ é™¤ä¸è¦çŠ¹è±«ï¼Œæˆ‘ä»¬å·²ç»å°†è¯¥æ¨¡å—æ‹†åˆ†å‡ºå»äº†ã€‘ï¼Œç„¶ååœ¨pom.xmlä¸­å¼•å…¥ tlias-pojoçš„ä¾èµ–</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>tlias-pojo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>2. åˆ›å»ºMavenæ¨¡å— tlias-utilsï¼Œå­˜æ”¾ç›¸å…³å·¥å…·ç±»</strong></p><p>A. åˆ›å»ºä¸€ä¸ªæ­£å¸¸çš„Mavenæ¨¡å—ï¼Œæ¨¡å—åtlias-utils</p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112107984.png" alt="image-20230113100500382" style="zoom: 60%;">  <img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112107909.png" alt="image-20230113101816151" style="zoom:67%;"> <p>B. ç„¶ååœ¨ tlias-utils ä¸­åˆ›å»ºä¸€ä¸ªåŒ… com.itheima.utils (å’ŒåŸæ¥æ¡ˆä¾‹é¡¹ç›®ä¸­çš„utilsåŒ…åä¸€è‡´)</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112107395.png"> </p><p>C. å°†åŸæ¥æ¡ˆä¾‹é¡¹ç›® tlias-web-management ä¸­çš„utilsåŒ…ä¸‹çš„å®ä½“ç±»ï¼Œå¤åˆ¶åˆ°tlias-utilsæ¨¡å—ä¸­</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112108698.png"> </p><p>D. åœ¨ tlias-utils æ¨¡å—çš„pom.xmlæ–‡ä»¶ä¸­å¼•å…¥ä¾èµ–</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--JWTä»¤ç‰Œ--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jjwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.9.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--é˜¿é‡Œäº‘OSS--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-sdk-oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.15.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.xml.bind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jaxb-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- no more than 2.3.3--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.glassfish.jaxb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jaxb-runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--WEBå¼€å‘--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.18.24<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>E. åˆ é™¤åŸæœ‰æ¡ˆä¾‹é¡¹ç›®tlias-web-managementçš„utilsåŒ…ã€ç›´æ¥åˆ é™¤ä¸è¦çŠ¹è±«ï¼Œæˆ‘ä»¬å·²ç»å°†è¯¥æ¨¡å—æ‹†åˆ†å‡ºå»äº†ã€‘ï¼Œç„¶ååœ¨pom.xmlä¸­å¼•å…¥ tlias-utilsçš„ä¾èµ–</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>tlias-utils<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åˆ°æ­¤å‘¢ï¼Œå°±å·²ç»å®Œæˆäº†æ¨¡å—çš„æ‹†åˆ†ï¼Œæ‹†åˆ†å‡ºäº† tlias-pojoã€tlias-utilsã€tlias-web-management ï¼Œå¦‚æœå…¶ä»–é¡¹ç›®ä¸­éœ€è¦ç”¨åˆ° pojoï¼Œæˆ–è€… utilså·¥å…·ç±»ï¼Œå°±å¯ä»¥ç›´æ¥å¼•å…¥ä¾èµ–ã€‚</strong> </p><h3 id="1-3-æ€»ç»“"><a href="#1-3-æ€»ç»“" class="headerlink" title="1.3 æ€»ç»“"></a>1.3 æ€»ç»“</h3><blockquote><p>1). ä»€ä¹ˆæ˜¯åˆ†æ¨¡å—è®¾è®¡ï¼šå°†é¡¹ç›®æŒ‰ç…§åŠŸèƒ½æ‹†åˆ†æˆè‹¥å¹²ä¸ªå­æ¨¡å—</p></blockquote><blockquote><p>2). ä¸ºä»€ä¹ˆè¦åˆ†æ¨¡å—è®¾è®¡ï¼šæ–¹ä¾¿é¡¹ç›®çš„ç®¡ç†ç»´æŠ¤ã€æ‰©å±•ï¼Œä¹Ÿæ–¹ä¾¿æ¨¡å—é—´çš„ç›¸äº’è°ƒç”¨ï¼Œèµ„æºå…±äº«</p></blockquote><blockquote><p>3). æ³¨æ„äº‹é¡¹ï¼šåˆ†æ¨¡å—è®¾è®¡éœ€è¦å…ˆé’ˆå¯¹æ¨¡å—åŠŸèƒ½è¿›è¡Œè®¾è®¡ï¼Œå†è¿›è¡Œç¼–ç ã€‚ä¸ä¼šå…ˆå°†å·¥ç¨‹å¼€å‘å®Œæ¯•ï¼Œç„¶åè¿›è¡Œæ‹†åˆ†</p></blockquote><h2 id="2ã€-ç»§æ‰¿ä¸èšåˆ"><a href="#2ã€-ç»§æ‰¿ä¸èšåˆ" class="headerlink" title="2ã€ ç»§æ‰¿ä¸èšåˆ"></a>2ã€ ç»§æ‰¿ä¸èšåˆ</h2><p>åœ¨æ¡ˆä¾‹é¡¹ç›®åˆ†æ¨¡å—å¼€å‘ä¹‹åå•Šï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°tlias-pojoã€tlias-utilsã€tlias-web-managementä¸­éƒ½å¼•å…¥äº†ä¸€ä¸ªä¾èµ– lombok çš„ä¾èµ–ã€‚æˆ‘ä»¬åœ¨ä¸‰ä¸ªæ¨¡å—ä¸­åˆ†åˆ«é…ç½®äº†ä¸€æ¬¡ã€‚</p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112108453.png" alt="image-20230113103714055" style="zoom:80%;"> <p>å¦‚æœæ˜¯åšä¸€ä¸ªå¤§å‹çš„é¡¹ç›®ï¼Œè¿™ä¸‰ä¸ªæ¨¡å—å½“ä¸­é‡å¤çš„ä¾èµ–å¯èƒ½ä¼šå¾ˆå¤šå¾ˆå¤šã€‚å¦‚æœæ¯ä¸€ä¸ª Maven æ¨¡å—é‡Œé¢ï¼Œæˆ‘ä»¬éƒ½æ¥å•ç‹¬çš„é…ç½®ä¸€æ¬¡ï¼ŒåŠŸèƒ½è™½ç„¶èƒ½å®ç°ï¼Œä½†æ˜¯é…ç½®æ˜¯æ¯”è¾ƒ<strong>ç¹ç</strong>çš„ã€‚</p><p>è€Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦è®²è§£çš„ Maven çš„ç»§æ‰¿ç”¨æ¥è§£å†³è¿™é—®é¢˜çš„ã€‚</p><h3 id="2-1-ç»§æ‰¿"><a href="#2-1-ç»§æ‰¿" class="headerlink" title="2.1 ç»§æ‰¿"></a>2.1 ç»§æ‰¿</h3><p>æˆ‘ä»¬å¯ä»¥å†åˆ›å»ºä¸€ä¸ªçˆ¶å·¥ç¨‹ tlias-parent ï¼Œç„¶åè®©ä¸Šè¿°çš„ä¸‰ä¸ªæ¨¡å— tlias-pojoã€tlias-utilsã€tlias-web-management éƒ½æ¥ç»§æ‰¿è¿™ä¸ªçˆ¶å·¥ç¨‹ ã€‚ ç„¶åå†å°†å„ä¸ªæ¨¡å—ä¸­éƒ½å…±æœ‰çš„ä¾èµ–ï¼Œéƒ½æå–åˆ°çˆ¶å·¥ç¨‹ tlias-parentä¸­è¿›è¡Œé…ç½®ï¼Œåªè¦å­å·¥ç¨‹ç»§æ‰¿äº†çˆ¶å·¥ç¨‹ï¼Œä¾èµ–å®ƒä¹Ÿä¼šç»§æ‰¿ä¸‹æ¥ï¼Œè¿™æ ·å°±æ— éœ€åœ¨å„ä¸ªå­å·¥ç¨‹ä¸­è¿›è¡Œé…ç½®äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112108206.png"> </p><ul><li><p>æ¦‚å¿µï¼šç»§æ‰¿æè¿°çš„æ˜¯ä¸¤ä¸ªå·¥ç¨‹é—´çš„å…³ç³»ï¼Œä¸javaä¸­çš„ç»§æ‰¿ç›¸ä¼¼ï¼Œå­å·¥ç¨‹å¯ä»¥ç»§æ‰¿çˆ¶å·¥ç¨‹ä¸­çš„é…ç½®ä¿¡æ¯ï¼Œå¸¸è§äºä¾èµ–å…³ç³»çš„ç»§æ‰¿ã€‚</p></li><li><p>ä½œç”¨ï¼šç®€åŒ–ä¾èµ–é…ç½®ã€ç»Ÿä¸€ç®¡ç†ä¾èµ–</p></li><li><p>å®ç°ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">&gt;</span></span>....<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>relativePath</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>è¿™æ˜¯æˆ‘ä»¬åœ¨è¿™é‡Œå…ˆä»‹ç»ä¸€ä¸‹ä»€ä¹ˆæ˜¯ç»§æ‰¿ä»¥åŠç»§æ‰¿çš„ä½œç”¨ï¼Œä»¥åŠåœ¨ maven å½“ä¸­å¦‚ä½•æ¥å®ç°è¿™å±‚ç»§æ‰¿å…³ç³»ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥åˆ›å»ºè¿™æ ·ä¸€ä¸ª parent çˆ¶å·¥ç¨‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å„ä¸ªå­å·¥ç¨‹å½“ä¸­å…±æœ‰çš„è¿™éƒ¨åˆ†ä¾èµ–ç»Ÿä¸€çš„å®šä¹‰åœ¨çˆ¶å·¥ç¨‹ parent å½“ä¸­ï¼Œä»è€Œæ¥ç®€åŒ–å­å·¥ç¨‹çš„ä¾èµ–é…ç½®ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…·ä½“çš„æ“ä½œæ­¥éª¤ã€‚</p><p>æˆ‘ä»¬åœ¨è¿™é‡Œå…ˆä»‹ç»ä¸€ä¸‹ä»€ä¹ˆæ˜¯ç»§æ‰¿ä»¥åŠç»§æ‰¿çš„ä½œç”¨ï¼Œä»¥åŠåœ¨ maven å½“ä¸­å¦‚ä½•æ¥å®ç°è¿™å±‚ç»§æ‰¿å…³ç³»ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥åˆ›å»ºè¿™æ ·ä¸€ä¸ª parent çˆ¶å·¥ç¨‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å„ä¸ªå­å·¥ç¨‹å½“ä¸­å…±æœ‰çš„è¿™éƒ¨åˆ†ä¾èµ–ï¼Œç»Ÿä¸€çš„å®šä¹‰åœ¨çˆ¶å·¥ç¨‹ parent å½“ä¸­ï¼Œä»è€Œæ¥ç®€åŒ–å­å·¥ç¨‹çš„ä¾èµ–é…ç½®ã€‚</p><h4 id="2-1-1-ç»§æ‰¿å…³ç³»"><a href="#2-1-1-ç»§æ‰¿å…³ç³»" class="headerlink" title="2.1.1 ç»§æ‰¿å…³ç³»"></a>2.1.1 ç»§æ‰¿å…³ç³»</h4><h5 id="2-1-1-1-æ€è·¯åˆ†æ"><a href="#2-1-1-1-æ€è·¯åˆ†æ" class="headerlink" title="2.1.1.1 æ€è·¯åˆ†æ"></a>2.1.1.1 æ€è·¯åˆ†æ</h5><p>æˆ‘ä»¬å½“å‰çš„é¡¹ç›® tlias-web-managementï¼Œè¿˜ç¨å¾®æœ‰ä¸€ç‚¹ç‰¹æ®Šï¼Œå› ä¸ºæ˜¯ä¸€ä¸ªspringbooté¡¹ç›®ï¼Œè€Œæ‰€æœ‰çš„springbooté¡¹ç›®éƒ½æœ‰ä¸€ä¸ªç»Ÿä¸€çš„çˆ¶å·¥ç¨‹ï¼Œå°±æ˜¯spring-boot-starter-parentã€‚ ä¸javaè¯­è¨€ç±»ä¼¼ï¼ŒMavenä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œä¸€ä¸ªmavené¡¹ç›®åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶å·¥ç¨‹ï¼Œå¦‚æœç»§æ‰¿äº†spring-boot-starter-parentï¼Œå°±æ²¡æ³•ç»§æ‰¿æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„çˆ¶å·¥ç¨‹ tlias-parentäº†ã€‚</p><p>é‚£æˆ‘ä»¬æ€ä¹ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><p>é‚£æ­¤æ—¶ï¼Œå¤§å®¶å¯ä»¥æƒ³ä¸€ä¸‹ï¼ŒJavaè™½ç„¶ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œä½†æ˜¯å¯ä»¥æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œæ¯”å¦‚ï¼šA ç»§æ‰¿ Bï¼Œ B ç»§æ‰¿Cã€‚ é‚£åœ¨Mavenä¸­ä¹Ÿæ˜¯æ”¯æŒå¤šé‡ç»§æ‰¿çš„ï¼Œæ‰€ä»¥å‘¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®© æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„ä¸‰ä¸ªæ¨¡å—ï¼Œéƒ½ç»§æ‰¿tlias-parentï¼Œè€Œtlias-parent å†ç»§æ‰¿ spring-boot-starter-parentï¼Œå°±å¯ä»¥äº†ã€‚ å…·ä½“ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112108005.png"> </p><h5 id="2-1-1-2-å®ç°"><a href="#2-1-1-2-å®ç°" class="headerlink" title="2.1.1.2 å®ç°"></a>2.1.1.2 å®ç°</h5><p>1). åˆ›å»ºmavenæ¨¡å— tlias-parent ï¼Œè¯¥å·¥ç¨‹ä¸ºçˆ¶å·¥ç¨‹ï¼Œè®¾ç½®æ‰“åŒ…æ–¹å¼pom(é»˜è®¤jar)ã€‚</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112108259.png" alt="image-20230113112712232" style="zoom:67%;"> </p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112109381.png" alt="image-20230113112810295" style="zoom:67%;"> <p>å·¥ç¨‹ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112109332.png"> </p><p>çˆ¶å·¥ç¨‹tlias-parentçš„pom.xmlæ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>tlias-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>Mavenæ‰“åŒ…æ–¹å¼ï¼š</p><ul><li>jarï¼šæ™®é€šæ¨¡å—æ‰“åŒ…ï¼Œspringbooté¡¹ç›®åŸºæœ¬éƒ½æ˜¯jaråŒ…ï¼ˆå†…åµŒtomcatè¿è¡Œï¼‰</li><li>warï¼šæ™®é€šwebç¨‹åºæ‰“åŒ…ï¼Œéœ€è¦éƒ¨ç½²åœ¨å¤–éƒ¨çš„tomcatæœåŠ¡å™¨ä¸­è¿è¡Œ</li><li>pomï¼šçˆ¶å·¥ç¨‹æˆ–èšåˆå·¥ç¨‹ï¼Œè¯¥æ¨¡å—ä¸å†™ä»£ç ï¼Œä»…è¿›è¡Œä¾èµ–ç®¡ç†</li></ul></blockquote><p>2). åœ¨å­å·¥ç¨‹çš„pom.xmlæ–‡ä»¶ä¸­ï¼Œé…ç½®ç»§æ‰¿å…³ç³»ã€‚</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>tlias-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">&gt;</span></span>../tlias-parent/pom.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>relativePath</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>tlias-utils<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæ˜¯ä»¥ tlias-utils ä¸ºä¾‹ï¼ŒæŒ‡å®šäº†å…¶çˆ¶å·¥ç¨‹ã€‚å…¶ä»–çš„æ¨¡å—ï¼Œéƒ½æ˜¯ç›¸åŒçš„é…ç½®æ–¹å¼ã€‚</p><blockquote><p>æ³¨æ„ï¼š</p><ul><li>åœ¨å­å·¥ç¨‹ä¸­ï¼Œé…ç½®äº†ç»§æ‰¿å…³ç³»ä¹‹åï¼Œåæ ‡ä¸­çš„groupIdæ˜¯å¯ä»¥çœç•¥çš„ï¼Œå› ä¸ºä¼šè‡ªåŠ¨ç»§æ‰¿çˆ¶å·¥ç¨‹çš„ ã€‚</li><li>relativePathæŒ‡å®šçˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶çš„ç›¸å¯¹ä½ç½®ï¼ˆå¦‚æœä¸æŒ‡å®šï¼Œå°†ä»æœ¬åœ°ä»“åº“/è¿œç¨‹ä»“åº“æŸ¥æ‰¾è¯¥å·¥ç¨‹ï¼‰ã€‚<ul><li>../ ä»£è¡¨çš„ä¸Šä¸€çº§ç›®å½•</li></ul></li></ul></blockquote><p>3). åœ¨çˆ¶å·¥ç¨‹ä¸­é…ç½®å„ä¸ªå·¥ç¨‹å…±æœ‰çš„ä¾èµ–ï¼ˆå­å·¥ç¨‹ä¼šè‡ªåŠ¨ç»§æ‰¿çˆ¶å·¥ç¨‹çš„ä¾èµ–ï¼‰ã€‚</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.18.24<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å·²ç»å°†å„ä¸ªå­å·¥ç¨‹ä¸­å…±æœ‰çš„ä¾èµ–ï¼ˆlombokï¼‰ï¼Œéƒ½å®šä¹‰åœ¨äº†çˆ¶å·¥ç¨‹ä¸­ï¼Œå­å·¥ç¨‹ä¸­çš„è¿™ä¸€é¡¹ä¾èµ–ï¼Œå°±å¯ä»¥ç›´æ¥åˆ é™¤äº†ã€‚åˆ é™¤ä¹‹åï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°çˆ¶å·¥ç¨‹ä¸­é…ç½®çš„ä¾èµ– lombokï¼Œå­å·¥ç¨‹ç›´æ¥ç»§æ‰¿ä¸‹æ¥äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112109150.png"> </p><blockquote><p><strong>å·¥ç¨‹ç»“æ„è¯´æ˜ï¼š</strong></p><ul><li><p>æˆ‘ä»¬å½“å‰çš„é¡¹ç›®ç»“æ„ä¸ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112109614.png"> </p><p>å› ä¸ºæˆ‘ä»¬æ˜¯é¡¹ç›®å¼€å‘å®Œæ¯•ä¹‹åï¼Œç»™å¤§å®¶åŸºäºç°æœ‰é¡¹ç›®æ‹†åˆ†çš„å„ä¸ªæ¨¡å—ï¼Œtlias-web-managementå·²ç»å­˜åœ¨äº†ï¼Œç„¶åå†åˆ›å»ºå„ä¸ªæ¨¡å—ä¸çˆ¶å·¥ç¨‹ï¼Œæ‰€ä»¥çˆ¶å·¥ç¨‹ä¸æ¨¡å—ä¹‹é—´æ˜¯å¹³çº§çš„ã€‚</p></li><li><p>è€Œå®é™…é¡¹ç›®ä¸­ï¼Œå¯èƒ½è¿˜ä¼šè§åˆ°ä¸‹é¢çš„å·¥ç¨‹ç»“æ„ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112109431.png"> </p><p>è€Œåœ¨çœŸå®çš„ä¼ä¸šå¼€å‘ä¸­ï¼Œéƒ½æ˜¯å…ˆè®¾è®¡å¥½æ¨¡å—ä¹‹åï¼Œå†å¼€å§‹åˆ›å»ºæ¨¡å—ï¼Œå¼€å‘é¡¹ç›®ã€‚ é‚£æ­¤æ—¶å‘¢ï¼Œä¸€èˆ¬éƒ½ä¼šå…ˆåˆ›å»ºçˆ¶å·¥ç¨‹ tlias-parentï¼Œç„¶åå°†åˆ›å»ºçš„å„ä¸ªå­æ¨¡å—ï¼Œéƒ½æ”¾åœ¨çˆ¶å·¥ç¨‹parentä¸‹é¢ã€‚ è¿™æ ·å±‚çº§ç»“æ„ä¼šæ›´åŠ æ¸…æ™°ä¸€äº›ã€‚ </p><p>â€‹</p><p><strong>PSï¼šä¸Šé¢ä¸¤ç§å·¥ç¨‹ç»“æ„ï¼Œéƒ½æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„ï¼Œæ²¡æœ‰ä¸€ç‚¹é—®é¢˜ã€‚ åªä¸è¿‡ï¼Œç¬¬äºŒç§ç»“æ„ï¼Œçœ‹èµ·æ¥ï¼Œçˆ¶å­å·¥ç¨‹ç»“æ„æ›´åŠ æ¸…æ™°ã€æ›´åŠ ç›´è§‚ã€‚</strong></p></li></ul></blockquote><h4 id="2-1-2-ç‰ˆæœ¬é”å®š"><a href="#2-1-2-ç‰ˆæœ¬é”å®š" class="headerlink" title="2.1.2 ç‰ˆæœ¬é”å®š"></a>2.1.2 ç‰ˆæœ¬é”å®š</h4><h5 id="2-1-2-1-åœºæ™¯"><a href="#2-1-2-1-åœºæ™¯" class="headerlink" title="2.1.2.1 åœºæ™¯"></a>2.1.2.1 åœºæ™¯</h5><p>å¦‚æœé¡¹ç›®ä¸­å„ä¸ªæ¨¡å—ä¸­éƒ½å…¬å…±çš„è¿™éƒ¨åˆ†ä¾èµ–ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å®šä¹‰åœ¨çˆ¶å·¥ç¨‹ä¸­ï¼Œä»è€Œç®€åŒ–å­å·¥ç¨‹çš„é…ç½®ã€‚ ç„¶è€Œåœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†ä¾èµ–ï¼Œå¹¶ä¸æ˜¯å„ä¸ªæ¨¡å—éƒ½å…±æœ‰çš„ï¼Œå¯èƒ½åªæ˜¯å…¶ä¸­çš„ä¸€å°éƒ¨åˆ†æ¨¡å—ä¸­ä½¿ç”¨åˆ°äº†è¿™ä¸ªä¾èµ–ã€‚</p><p>æ¯”å¦‚ï¼šåœ¨tlias-web-managementã€tlias-web-systemã€tlias-web-reportè¿™ä¸‰ä¸ªå­å·¥ç¨‹ä¸­ï¼Œéƒ½ä½¿ç”¨åˆ°äº†jwtçš„ä¾èµ–ã€‚ ä½†æ˜¯ tlias-pojoã€tlias-utilsä¸­å¹¶ä¸éœ€è¦è¿™ä¸ªä¾èµ–ï¼Œé‚£æ­¤æ—¶ï¼Œè¿™ä¸ªä¾èµ–ï¼Œæˆ‘ä»¬ä¸ä¼šç›´æ¥é…ç½®åœ¨çˆ¶å·¥ç¨‹ tlias-parentä¸­ï¼Œè€Œæ˜¯å“ªä¸ªæ¨¡å—éœ€è¦ï¼Œå°±åœ¨å“ªä¸ªæ¨¡å—ä¸­é…ç½®ã€‚</p><p>è€Œç”±äºæ˜¯ä¸€ä¸ªé¡¹ç›®ä¸­çš„å¤šä¸ªæ¨¡å—ï¼Œé‚£å¤šä¸ªæ¨¡å—ä¸­ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨çš„åŒä¸€ä¸ªä¾èµ–çš„ç‰ˆæœ¬è¦ä¸€è‡´ï¼Œè¿™æ ·ä¾¿äºé¡¹ç›®ä¾èµ–çš„ç»Ÿä¸€ç®¡ç†ã€‚æ¯”å¦‚ï¼šè¿™ä¸ªjwtä¾èµ–ï¼Œæˆ‘ä»¬éƒ½ä½¿ç”¨çš„æ˜¯ 0.9.1 è¿™ä¸ªç‰ˆæœ¬ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112111365.png"> </p><p>é‚£å‡å¦‚è¯´ï¼Œæˆ‘ä»¬é¡¹ç›®è¦å‡çº§ï¼Œè¦ä½¿ç”¨åˆ°jwtæœ€æ–°ç‰ˆæœ¬ 0.9.2 ä¸­çš„ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œé‚£æ­¤æ—¶éœ€è¦å°†ä¾èµ–çš„ç‰ˆæœ¬å‡çº§åˆ°0.9.2ï¼Œé‚£æ­¤æ—¶è¯¥æ€ä¹ˆåšå‘¢ ï¼Ÿ</p><p>ç¬¬ä¸€æ­¥ï¼šå»æ‰¾å½“å‰é¡¹ç›®ä¸­æ‰€æœ‰çš„æ¨¡å—çš„pom.xmlé…ç½®æ–‡ä»¶ï¼Œçœ‹å“ªäº›æ¨¡å—ç”¨åˆ°äº†jwtçš„ä¾èµ–ã€‚</p><p>ç¬¬äºŒæ­¥ï¼šæ‰¾åˆ°è¿™ä¸ªä¾èµ–ä¹‹åï¼Œå°†å…¶ç‰ˆæœ¬versionï¼Œæ›´æ¢ä¸º 0.9.2ã€‚</p><p><strong>é—®é¢˜ï¼šå¦‚æœé¡¹ç›®æ‹†åˆ†çš„æ¨¡å—æ¯”è¾ƒå¤šï¼Œæ¯ä¸€æ¬¡æ›´æ¢ç‰ˆæœ¬ï¼Œæˆ‘ä»¬éƒ½å¾—æ‰¾åˆ°è¿™ä¸ªé¡¹ç›®ä¸­çš„æ¯ä¸€ä¸ªæ¨¡å—ï¼Œä¸€ä¸ªä¸€ä¸ªçš„æ›´æ”¹ã€‚ å¾ˆå®¹æ˜“å°±ä¼šå‡ºç°ï¼Œé—æ¼æ‰ä¸€ä¸ªæ¨¡å—ï¼Œå¿˜è®°æ›´æ¢ç‰ˆæœ¬çš„æƒ…å†µã€‚</strong></p><p>é‚£æˆ‘ä»¬åˆè¯¥å¦‚ä½•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¦‚ä½•æ¥ç»Ÿä¸€ç®¡ç†å„ä¸ªä¾èµ–çš„ç‰ˆæœ¬å‘¢ï¼Ÿ </p><p>ç­”æ¡ˆï¼šMavençš„ç‰ˆæœ¬é”å®šåŠŸèƒ½ã€‚</p><h5 id="2-1-2-2-ä»‹ç»"><a href="#2-1-2-2-ä»‹ç»" class="headerlink" title="2.1.2.2 ä»‹ç»"></a>2.1.2.2 ä»‹ç»</h5><p>åœ¨mavenä¸­ï¼Œå¯ä»¥åœ¨çˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶ä¸­é€šè¿‡ <code>&lt;dependencyManagement&gt;</code> æ¥ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬ã€‚</p><p>çˆ¶å·¥ç¨‹ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--JWTä»¤ç‰Œ--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jjwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.9.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å­å·¥ç¨‹ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--JWTä»¤ç‰Œ--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jjwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ³¨æ„ï¼š</p><ul><li><p>åœ¨çˆ¶å·¥ç¨‹ä¸­æ‰€é…ç½®çš„ <code>&lt;dependencyManagement&gt;</code> åªèƒ½ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬ï¼Œå¹¶ä¸ä¼šå°†è¿™ä¸ªä¾èµ–ç›´æ¥å¼•å…¥è¿›æ¥ã€‚ è¿™ç‚¹å’Œ <code>&lt;dependencies&gt;</code> æ˜¯ä¸åŒçš„ã€‚</p></li><li><p>å­å·¥ç¨‹è¦ä½¿ç”¨è¿™ä¸ªä¾èµ–ï¼Œè¿˜æ˜¯éœ€è¦å¼•å…¥çš„ï¼Œåªæ˜¯æ­¤æ—¶å°±æ— éœ€æŒ‡å®š <code>&lt;version&gt;</code> ç‰ˆæœ¬å·äº†ï¼Œçˆ¶å·¥ç¨‹ç»Ÿä¸€ç®¡ç†ã€‚å˜æ›´ä¾èµ–ç‰ˆæœ¬ï¼Œåªéœ€åœ¨çˆ¶å·¥ç¨‹ä¸­ç»Ÿä¸€å˜æ›´ã€‚</p></li></ul></blockquote><h5 id="2-1-2-3-å®ç°"><a href="#2-1-2-3-å®ç°" class="headerlink" title="2.1.2.3 å®ç°"></a>2.1.2.3 å®ç°</h5><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†tlias-utilsæ¨¡å—ä¸­å•ç‹¬é…ç½®çš„ä¾èµ–ï¼Œå°†å…¶ç‰ˆæœ¬ç»Ÿä¸€äº¤ç»™ tlias-parent è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚</p><p>å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>1). tlias-parent ä¸­çš„é…ç½®</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--JWTä»¤ç‰Œ--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jjwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.9.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--é˜¿é‡Œäº‘OSS--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-sdk-oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.15.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.xml.bind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jaxb-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- no more than 2.3.3--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.glassfish.jaxb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jaxb-runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2). tlias-utilsä¸­çš„pom.xmlé…ç½®</p><p>å¦‚æœä¾èµ–çš„ç‰ˆæœ¬å·²ç»åœ¨çˆ¶å·¥ç¨‹è¿›è¡Œäº†ç»Ÿä¸€ç®¡ç†ï¼Œæ‰€ä»¥åœ¨å­å·¥ç¨‹ä¸­å°±æ— éœ€å†é…ç½®ä¾èµ–çš„ç‰ˆæœ¬äº†ã€‚</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--JWTä»¤ç‰Œ--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jjwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--é˜¿é‡Œäº‘OSS--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-sdk-oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.xml.bind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jaxb-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- no more than 2.3.3--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.glassfish.jaxb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jaxb-runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--WEBå¼€å‘--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æˆ‘ä»¬ä¹‹æ‰€ä»¥ï¼Œåœ¨springbooté¡¹ç›®ä¸­å¾ˆå¤šæ—¶å€™ï¼Œå¼•å…¥ä¾èµ–åæ ‡ï¼Œéƒ½ä¸éœ€è¦æŒ‡å®šä¾èµ–çš„ç‰ˆæœ¬ <code>&lt;version&gt;</code> ï¼Œæ˜¯å› ä¸ºåœ¨çˆ¶å·¥ç¨‹ spring-boot-starter-parentä¸­å·²ç»é€šè¿‡ <code>&lt;dependencyManagement&gt;</code>å¯¹ä¾èµ–çš„ç‰ˆæœ¬è¿›è¡Œäº†ç»Ÿä¸€çš„ç®¡ç†ç»´æŠ¤ã€‚</p></blockquote><h5 id="2-1-2-4-å±æ€§é…ç½®"><a href="#2-1-2-4-å±æ€§é…ç½®" class="headerlink" title="2.1.2.4 å±æ€§é…ç½®"></a>2.1.2.4 å±æ€§é…ç½®</h5><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è‡ªå®šä¹‰å±æ€§åŠå±æ€§å¼•ç”¨çš„å½¢å¼ï¼Œåœ¨çˆ¶å·¥ç¨‹ä¸­å°†ä¾èµ–çš„ç‰ˆæœ¬å·è¿›è¡Œé›†ä¸­ç®¡ç†ç»´æŠ¤ã€‚ å…·ä½“è¯­æ³•ä¸ºï¼š</p><p>1). è‡ªå®šä¹‰å±æ€§</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lombok.version</span><span class="token punctuation">&gt;</span></span>1.18.24<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lombok.version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>2). å¼•ç”¨å±æ€§</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${lombok.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨çˆ¶å·¥ç¨‹ä¸­ï¼Œå°†æ‰€æœ‰çš„ç‰ˆæœ¬å·ï¼Œéƒ½é›†ä¸­ç®¡ç†ç»´æŠ¤èµ·æ¥ã€‚</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lombok.version</span><span class="token punctuation">&gt;</span></span>1.18.24<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lombok.version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jjwt.version</span><span class="token punctuation">&gt;</span></span>0.9.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jjwt.version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aliyun.oss.version</span><span class="token punctuation">&gt;</span></span>3.15.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aliyun.oss.version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jaxb.version</span><span class="token punctuation">&gt;</span></span>2.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jaxb.version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activation.version</span><span class="token punctuation">&gt;</span></span>1.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activation.version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jaxb.runtime.version</span><span class="token punctuation">&gt;</span></span>2.3.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jaxb.runtime.version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${lombok.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--JWTä»¤ç‰Œ--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jjwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${jjwt.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--é˜¿é‡Œäº‘OSS--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-sdk-oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${aliyun.oss.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.xml.bind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jaxb-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${jaxb.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${activation.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- no more than 2.3.3--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.glassfish.jaxb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jaxb-runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${jaxb.runtime.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç‰ˆæœ¬é›†ä¸­ç®¡ç†ä¹‹åï¼Œæˆ‘ä»¬è¦æƒ³ä¿®æ”¹ä¾èµ–çš„ç‰ˆæœ¬ï¼Œå°±åªéœ€è¦åœ¨çˆ¶å·¥ç¨‹ä¸­è‡ªå®šä¹‰å±æ€§çš„ä½ç½®ï¼Œä¿®æ”¹å¯¹åº”çš„å±æ€§å€¼å³å¯ã€‚</p><blockquote><p><strong>é¢è¯•é¢˜ï¼š<code>&lt;dependencyManagement&gt;</code> ä¸ <code>&lt;dependencies&gt;</code> çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ?</strong></p><ul><li><code>&lt;dependencies&gt;</code> æ˜¯ç›´æ¥ä¾èµ–ï¼Œåœ¨çˆ¶å·¥ç¨‹é…ç½®äº†ä¾èµ–ï¼Œå­å·¥ç¨‹ä¼šç›´æ¥ç»§æ‰¿ä¸‹æ¥ã€‚ </li><li><code>&lt;dependencyManagement&gt;</code> æ˜¯ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬ï¼Œä¸ä¼šç›´æ¥ä¾èµ–ï¼Œè¿˜éœ€è¦åœ¨å­å·¥ç¨‹ä¸­å¼•å…¥æ‰€éœ€ä¾èµ–(æ— éœ€æŒ‡å®šç‰ˆæœ¬)</li></ul></blockquote><h3 id="2-2-èšåˆ"><a href="#2-2-èšåˆ" class="headerlink" title="2.2 èšåˆ"></a>2.2 èšåˆ</h3><p>åˆ†æ¨¡å—è®¾è®¡ä¸å¼€å‘ä¹‹åå•Šï¼Œæˆ‘ä»¬çš„é¡¹ç›®è¢«æ‹†åˆ†ä¸ºå¤šä¸ªæ¨¡å—ï¼Œè€Œæ¨¡å—ä¹‹é—´çš„å…³ç³»ï¼Œå¯èƒ½é”™ç»¼å¤æ‚ã€‚ é‚£å°±æ¯”å¦‚æˆ‘ä»¬å½“å‰çš„æ¡ˆä¾‹é¡¹ç›®ï¼Œç»“æ„å¦‚ä¸‹ï¼ˆç›¸å¯¹è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼‰ï¼š</p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112111308.png" alt="image-20230113142520463" style="zoom:67%;"> <p>æ­¤æ—¶ï¼Œtlias-web-management æ¨¡å—çš„çˆ¶å·¥ç¨‹æ˜¯ tlias-parentï¼Œè¯¥æ¨¡å—åˆä¾èµ–äº†tlias-pojoã€tlias-utilsæ¨¡å—ã€‚ é‚£æ­¤æ—¶ï¼Œæˆ‘ä»¬è¦æƒ³å°† tlias-web-management æ¨¡å—æ‰“åŒ…ï¼Œæ˜¯æ¯”è¾ƒç¹ççš„ã€‚å› ä¸ºåœ¨è¿›è¡Œé¡¹ç›®æ‰“åŒ…æ—¶ï¼Œmavenä¼šä»æœ¬åœ°ä»“åº“ä¸­æ¥æŸ¥æ‰¾tlias-parentçˆ¶å·¥ç¨‹ï¼Œä»¥åŠå®ƒæ‰€ä¾èµ–çš„æ¨¡å—tlias-pojoã€tlias-utilsï¼Œè€Œæœ¬åœ°ä»“åº“ç›®å‰æ˜¯æ²¡æœ‰è¿™å‡ ä¸ªä¾èµ–çš„ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å†æ‰“åŒ…tlias-web-management æ¨¡å—å‰ï¼Œéœ€è¦å°† tlias-parentã€tlias-pojoã€tlias-utilsåˆ†åˆ«æ‰§è¡Œinstallç”Ÿå‘½å‘¨æœŸå®‰è£…åˆ°mavençš„æœ¬åœ°ä»“åº“ï¼Œç„¶åå†é’ˆå¯¹äº tlias-web-management æ¨¡å—æ‰§è¡Œpackageè¿›è¡Œæ‰“åŒ…æ“ä½œã€‚</p><p>é‚£æ­¤æ—¶ï¼Œå¤§å®¶è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå¼€å‘ä¸€ä¸ªå¤§å‹é¡¹ç›®ï¼Œæ‹†åˆ†çš„æ¨¡å—å¾ˆå¤šï¼Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»é”™ç»¼å¤æ‚ï¼Œé‚£æ­¤æ—¶è¦è¿›è¡Œé¡¹ç›®çš„æ‰“åŒ…ã€å®‰è£…æ“ä½œï¼Œæ˜¯éå¸¸ç¹ççš„ã€‚ è€Œæˆ‘ä»¬æ¥ä¸‹æ¥ï¼Œè¦è®²è§£çš„mavençš„èšåˆå°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œé€šè¿‡mavençš„èšåˆå°±å¯ä»¥è½»æ¾å®ç°é¡¹ç›®çš„ä¸€é”®æ„å»ºï¼ˆæ¸…ç†ã€ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€å®‰è£…ç­‰ï¼‰ã€‚</p><h4 id="2-2-1-ä»‹ç»"><a href="#2-2-1-ä»‹ç»" class="headerlink" title="2.2.1 ä»‹ç»"></a>2.2.1 ä»‹ç»</h4><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112111390.png" alt="image-20230113151533948" style="zoom:80%;"> <ul><li><strong>èšåˆï¼š</strong>å°†å¤šä¸ªæ¨¡å—ç»„ç»‡æˆä¸€ä¸ªæ•´ä½“ï¼ŒåŒæ—¶è¿›è¡Œé¡¹ç›®çš„æ„å»ºã€‚</li><li><strong>èšåˆå·¥ç¨‹ï¼š</strong>ä¸€ä¸ªä¸å…·æœ‰ä¸šåŠ¡åŠŸèƒ½çš„â€œç©ºâ€å·¥ç¨‹ï¼ˆæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªpomæ–‡ä»¶ï¼‰ ã€PSï¼šä¸€èˆ¬æ¥è¯´ï¼Œç»§æ‰¿å…³ç³»ä¸­çš„çˆ¶å·¥ç¨‹ä¸èšåˆå…³ç³»ä¸­çš„èšåˆå·¥ç¨‹æ˜¯åŒä¸€ä¸ªã€‘</li><li><strong>ä½œç”¨ï¼š</strong>å¿«é€Ÿæ„å»ºé¡¹ç›®ï¼ˆæ— éœ€æ ¹æ®ä¾èµ–å…³ç³»æ‰‹åŠ¨æ„å»ºï¼Œç›´æ¥åœ¨èšåˆå·¥ç¨‹ä¸Šæ„å»ºå³å¯ï¼‰</li></ul><h4 id="2-2-2-å®ç°"><a href="#2-2-2-å®ç°" class="headerlink" title="2.2.2 å®ç°"></a>2.2.2 å®ç°</h4><p>åœ¨mavenä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨èšåˆå·¥ç¨‹ä¸­é€šè¿‡ <code>&lt;moudules&gt;</code> è®¾ç½®å½“å‰èšåˆå·¥ç¨‹æ‰€åŒ…å«çš„å­æ¨¡å—çš„åç§°ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ tlias-parentä¸­ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œæ¥æŒ‡å®šå½“å‰èšåˆå·¥ç¨‹ï¼Œéœ€è¦èšåˆçš„æ¨¡å—ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>èšåˆå…¶ä»–æ¨¡å—<span class="token operator">--</span><span class="token operator">&gt;</span><span class="token generics"><span class="token punctuation">&lt;</span>modules<span class="token punctuation">&gt;</span></span>    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">module</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span>/tlias<span class="token operator">-</span>pojo<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">module</span><span class="token operator">&gt;</span>    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">module</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span>/tlias<span class="token operator">-</span>utils<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">module</span><span class="token operator">&gt;</span>    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">module</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span>/tlias<span class="token operator">-</span>web<span class="token operator">-</span>management<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">module</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>modules<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‚£æ­¤æ—¶ï¼Œæˆ‘ä»¬è¦è¿›è¡Œç¼–è¯‘ã€æ‰“åŒ…ã€å®‰è£…æ“ä½œï¼Œå°±æ— éœ€åœ¨æ¯ä¸€ä¸ªæ¨¡å—ä¸Šæ“ä½œäº†ã€‚åªéœ€è¦åœ¨èšåˆå·¥ç¨‹ä¸Šï¼Œç»Ÿä¸€è¿›è¡Œæ“ä½œå°±å¯ä»¥äº†ã€‚</p><p><strong>æµ‹è¯•ï¼š</strong>æ‰§è¡Œåœ¨èšåˆå·¥ç¨‹ tlias-parent ä¸­æ‰§è¡Œ package æ‰“åŒ…æŒ‡ä»¤</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112111242.png"> </p><p>é‚£ tlias-parent ä¸­æ‰€èšåˆçš„å…¶ä»–æ¨¡å—å…¨éƒ¨éƒ½ä¼šæ‰§è¡Œ package æŒ‡ä»¤ï¼Œè¿™å°±æ˜¯é€šè¿‡èšåˆå®ç°é¡¹ç›®çš„ä¸€é”®æ„å»ºï¼ˆä¸€é”®æ¸…ç†cleanã€ä¸€é”®ç¼–è¯‘compileã€ä¸€é”®æµ‹è¯•testã€ä¸€é”®æ‰“åŒ…packageã€ä¸€é”®å®‰è£…installç­‰ï¼‰ã€‚</p><h3 id="2-3-ç»§æ‰¿ä¸èšåˆå¯¹æ¯”"><a href="#2-3-ç»§æ‰¿ä¸èšåˆå¯¹æ¯”" class="headerlink" title="2.3 ç»§æ‰¿ä¸èšåˆå¯¹æ¯”"></a>2.3 ç»§æ‰¿ä¸èšåˆå¯¹æ¯”</h3><ul><li><p><strong>ä½œç”¨</strong></p><ul><li><p>èšåˆç”¨äºå¿«é€Ÿæ„å»ºé¡¹ç›®</p></li><li><p>ç»§æ‰¿ç”¨äºç®€åŒ–ä¾èµ–é…ç½®ã€ç»Ÿä¸€ç®¡ç†ä¾èµ–</p></li></ul></li><li><p><strong>ç›¸åŒç‚¹ï¼š</strong></p><ul><li><p>èšåˆä¸ç»§æ‰¿çš„pom.xmlæ–‡ä»¶æ‰“åŒ…æ–¹å¼å‡ä¸ºpomï¼Œé€šå¸¸å°†ä¸¤ç§å…³ç³»åˆ¶ä½œåˆ°åŒä¸€ä¸ªpomæ–‡ä»¶ä¸­</p></li><li><p>èšåˆä¸ç»§æ‰¿å‡å±äºè®¾è®¡å‹æ¨¡å—ï¼Œå¹¶æ— å®é™…çš„æ¨¡å—å†…å®¹</p></li></ul></li><li><p><strong>ä¸åŒç‚¹ï¼š</strong></p><ul><li><p>èšåˆæ˜¯åœ¨èšåˆå·¥ç¨‹ä¸­é…ç½®å…³ç³»ï¼Œèšåˆå¯ä»¥æ„ŸçŸ¥åˆ°å‚ä¸èšåˆçš„æ¨¡å—æœ‰å“ªäº›</p></li><li><p>ç»§æ‰¿æ˜¯åœ¨å­æ¨¡å—ä¸­é…ç½®å…³ç³»ï¼Œçˆ¶æ¨¡å—æ— æ³•æ„ŸçŸ¥å“ªäº›å­æ¨¡å—ç»§æ‰¿äº†è‡ªå·±</p></li></ul></li></ul><h2 id="3ã€-ç§æœ"><a href="#3ã€-ç§æœ" class="headerlink" title="3ã€ ç§æœ"></a>3ã€ ç§æœ</h2><p>å‰é¢æˆ‘ä»¬åœ¨è®²è§£å¤šæ¨¡å—å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®²åˆ°æˆ‘ä»¬æ‰€æ‹†åˆ†çš„æ¨¡å—æ˜¯å¯ä»¥åœ¨åŒä¸€ä¸ªå…¬å¸å„ä¸ªé¡¹ç›®ç»„ä¹‹é—´è¿›è¡Œèµ„æºå…±äº«çš„ã€‚è¿™ä¸ªæ¨¡å—çš„èµ„æºå…±äº«ï¼Œå°±éœ€è¦é€šè¿‡æˆ‘ä»¬æ¥ä¸‹æ¥æ‰€è®²è§£çš„ Maven çš„ç§æœæ¥å®ç°ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬å…ˆä»‹ç»ä¸€ä¸‹ä»€ä¹ˆæ˜¯ç§æœï¼Œä»¥åŠå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆã€‚å†æ¥ä»‹ç»ä¸€ä¸‹æˆ‘ä»¬å¦‚ä½•å°†æ¯ä½æ¨¡å—æ‰“åŒ…ä¸Šä¼ åˆ°ç§æœï¼Œä»¥åŠä»ç§æœå½“ä¸­æ¥ä¸‹è½½ã€‚</p><h3 id="3-1-åœºæ™¯"><a href="#3-1-åœºæ™¯" class="headerlink" title="3.1 åœºæ™¯"></a>3.1 åœºæ™¯</h3><p>åœ¨ä»‹ç»ä»€ä¹ˆæ˜¯ç§æœä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹åŒä¸€ä¸ªå…¬å¸ï¼Œä¸¤ä¸ªé¡¹ç›®ç»„ä¹‹é—´å¦‚ä½•åŸºäºç§æœè¿›è¡Œèµ„æºçš„å…±äº«ã€‚</p><p>å‡è®¾ç°åœ¨æœ‰ä¸¤ä¸ªå›¢é˜Ÿï¼ŒA å’Œ Bã€‚ A å¼€å‘äº†ä¸€ä¸ªæ¨¡å— tlias-utilsï¼Œæ¨¡å—å¼€å‘å®Œæ¯•ä¹‹åï¼Œå°†æ¨¡å—æ‰“æˆjaråŒ…ï¼Œå¹¶å®‰è£…åˆ°äº†Açš„æœ¬åœ°ä»“åº“ã€‚</p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112112228.png" alt="image-20230113155325805" style="zoom:80%;"> <p>é‚£æ­¤æ—¶ï¼Œè¯¥å…¬å¸çš„Bå›¢é˜Ÿå¼€å‘é¡¹ç›®æ—¶ï¼Œè¦æƒ³ä½¿ç”¨ tlias-utils ä¸­æä¾›çš„å·¥å…·ç±»ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ å¯¹äºmavené¡¹ç›®æ¥è¯´ï¼Œæ˜¯ä¸æ˜¯åœ¨pom.xmlæ–‡ä»¶ä¸­å¼•å…¥ tlias-utilsçš„åæ ‡å°±å¯ä»¥äº†å‘¢ï¼Ÿ</p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112112571.png" alt="image-20230113155657972" style="zoom:80%;">  <p>å¤§å®¶å¯ä»¥æ€è€ƒä¸€ä¸‹ï¼Œå½“Bå›¢é˜Ÿåœ¨mavené¡¹ç›®çš„pom.xmlé…ç½®æ–‡ä»¶ä¸­å¼•å…¥äº†ä¾èµ–çš„åæ ‡ä¹‹åï¼Œmavenæ˜¯å¦‚ä½•æŸ¥æ‰¾è¿™ä¸ªä¾èµ–çš„ï¼Ÿ æŸ¥æ‰¾é¡ºåºä¸ºï¼š</p><p>1). æœ¬åœ°ä»“åº“ï¼šæœ¬åœ°ä»“åº“ä¸­æ˜¯æ²¡æœ‰è¿™ä¸ªä¾èµ–jaråŒ…çš„ã€‚</p><p>2). è¿œç¨‹ä¸­å¤®ä»“åº“ï¼šç”±äºè¯¥æ¨¡å—æ—¶è‡ªå·±å…¬å¸å¼€å‘çš„ï¼Œè¿œç¨‹ä»“åº“ä¸­ä¹Ÿæ²¡æœ‰è¿™ä¸ªä¾èµ–ã€‚</p><p>å› ä¸ºç›®å‰tlias-utilsè¿™ä¸ªä¾èµ–ï¼Œè¿˜åœ¨Açš„æœ¬åœ°ä»“åº“ä¸­çš„ã€‚ Bç”µè„‘ä¸Šçš„mavené¡¹ç›®ï¼Œæ˜¯ä¸å¯èƒ½æ‰¾å¾—åˆ°Aç”µè„‘ä¸Šmavenæœ¬åœ°ä»“åº“çš„jaråŒ…çš„ã€‚  é‚£æ­¤æ—¶ï¼Œå¤§å®¶å¯èƒ½ä¼šæœ‰ä¸€ä¸ªæƒ³æ³•ï¼šå› ä¸ºAå’ŒBéƒ½ä¼šè¿æ¥ä¸­å¤®ä»“åº“ï¼Œæˆ‘ä»¬å¯ä»¥å°†Aæœ¬åœ°ä»“åº“çš„jaråŒ…ï¼Œç›´æ¥ä¸Šä¼ åˆ°ä¸­å¤®ä»“åº“ï¼Œç„¶åBä»ä¸­å¤®ä»“åº“ä¸­ä¸‹è½½tlias-utilsè¿™ä¸ªä¾èµ–ã€‚</p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112112072.png" alt="image-20230113160351850" style="zoom:67%;"> <p>è¿™ä¸ªæƒ³æ³•å¾ˆç¾å¥½ï¼Œä½†æ˜¯ç°å®å¾ˆæ®‹é…·ã€‚è¿™ä¸ªæ–¹æ¡ˆæ˜¯è¡Œä¸é€šçš„ï¼Œå› ä¸ºä¸­å¤®ä»“åº“å…¨çƒåªæœ‰ä¸€ä¸ªï¼Œä¸æ˜¯ä»€ä¹ˆäººéƒ½å¯ä»¥å¾€ä¸­å¤®ä»“åº“ä¸­æ¥ä¸Šä¼ jaråŒ…çš„ï¼Œæˆ‘ä»¬æ˜¯æ²¡æœ‰æƒé™æ“ä½œçš„ã€‚</p><p>é‚£æ­¤æ—¶ï¼Œmavençš„ç§æœå°±å‡ºåœºäº†ï¼Œç§æœå…¶å®å°±æ˜¯æ¶è®¾åœ¨å…¬å¸å±€åŸŸç½‘å†…éƒ¨çš„ä¸€å°æœåŠ¡å™¨ï¼Œå°±æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿œç¨‹ä»“åº“ã€‚</p><p>æœ‰äº†ç§æœä¹‹åï¼Œå„ä¸ªå›¢é˜Ÿå°±å¯ä»¥ç›´æ¥æ¥è¿æ¥ç§æœäº†ã€‚ A è¿æ¥ä¸Šç§æœä¹‹åï¼Œä»–å°±å¯ä»¥æŠŠjaråŒ…ç›´æ¥ä¸Šä¼ åˆ°ç§æœå½“ä¸­ã€‚æˆ‘å…¬å¸è‡ªå·±å†…éƒ¨æ­å»ºçš„æœåŠ¡å™¨ï¼Œæˆ‘æ˜¯ä¸æ˜¯æœ‰æƒé™æ“ä½œå‘€ï¼ŒæŠŠjaråŒ…ä¸Šä¼ åˆ°ç§æœä¹‹åï¼Œæˆ‘è®© B å›¢é˜Ÿçš„æ‰€æœ‰å¼€å‘äººå‘˜ä¹Ÿè¿æ¥åŒä¸€å°ç§æœã€‚è¿æ¥ä¸Šè¿™ä¸€å°ç§æœä¹‹åï¼Œä»–å°±ä¼šæ ¹æ®åæ ‡çš„ä¿¡æ¯ï¼Œç›´æ¥ä»ç§æœå½“ä¸­å°†å¯¹åº”çš„jaråŒ…ä¸‹è½½åˆ°è‡ªå·±çš„æœ¬åœ°ä»“åº“ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨åˆ°ä¾èµ–å½“ä¸­æ‰€æä¾›çš„ä¸€äº›å·¥å…·ç±»äº†ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç§æœæ¥å®Œæˆèµ„æºçš„å…±äº«ã€‚</p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112112377.png" alt="image-20230113160713806" style="zoom:80%;"> <p>è€Œå¦‚æœæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­éœ€è¦ä½¿ç”¨å…¶ä»–ç¬¬ä¸‰æ–¹æä¾›çš„ä¾èµ–ï¼Œå¦‚æœæœ¬åœ°ä»“åº“æ²¡æœ‰ï¼Œä¹Ÿä¼šè‡ªåŠ¨è¿æ¥ç§æœä¸‹è½½ï¼Œå¦‚æœç§æœæ²¡æœ‰ï¼Œç§æœæ­¤æ—¶ä¼šè‡ªåŠ¨è¿æ¥ä¸­å¤®ä»“åº“ï¼Œå»ä¸­å¤®ä»“åº“ä¸­ä¸‹è½½ä¾èµ–ï¼Œç„¶åå°†ä¸‹è½½çš„ä¾èµ–å­˜å‚¨åœ¨ç§æœä»“åº“åŠæœ¬åœ°ä»“åº“ä¸­ã€‚</p><h3 id="3-2-ä»‹ç»"><a href="#3-2-ä»‹ç»" class="headerlink" title="3.2 ä»‹ç»"></a>3.2 ä»‹ç»</h3><ul><li><strong>ç§æœï¼š</strong>æ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿œç¨‹ä»“åº“ï¼Œå®ƒæ˜¯æ¶è®¾åœ¨å±€åŸŸç½‘å†…çš„ä»“åº“æœåŠ¡ï¼Œç”¨æ¥ä»£ç†ä½äºå¤–éƒ¨çš„ä¸­å¤®ä»“åº“ï¼Œç”¨äºè§£å†³å›¢é˜Ÿå†…éƒ¨çš„èµ„æºå…±äº«ä¸èµ„æºåŒæ­¥é—®é¢˜ã€‚</li><li><strong>ä¾èµ–æŸ¥æ‰¾é¡ºåºï¼š</strong><ul><li>æœ¬åœ°ä»“åº“</li><li>ç§æœä»“åº“</li><li>ä¸­å¤®ä»“åº“</li></ul></li><li><strong>æ³¨æ„äº‹é¡¹ï¼š</strong>ç§æœåœ¨ä¼ä¸šé¡¹ç›®å¼€å‘ä¸­ï¼Œä¸€ä¸ªé¡¹ç›®/å…¬å¸ï¼Œåªéœ€è¦ä¸€å°å³å¯ï¼ˆæ— éœ€æˆ‘ä»¬è‡ªå·±æ­å»ºï¼Œä¼šä½¿ç”¨å³å¯ï¼‰ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112112344.png"> </p><h3 id="3-3-èµ„æºä¸Šä¼ ä¸ä¸‹è½½"><a href="#3-3-èµ„æºä¸Šä¼ ä¸ä¸‹è½½" class="headerlink" title="3.3 èµ„æºä¸Šä¼ ä¸ä¸‹è½½"></a>3.3 èµ„æºä¸Šä¼ ä¸ä¸‹è½½</h3><h4 id="3-3-1-æ­¥éª¤åˆ†æ"><a href="#3-3-1-æ­¥éª¤åˆ†æ" class="headerlink" title="3.3.1 æ­¥éª¤åˆ†æ"></a>3.3.1 æ­¥éª¤åˆ†æ</h4><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112117482.png" alt="image-20230113163307239" style="zoom:80%;"> <p>èµ„æºä¸Šä¼ ä¸ä¸‹è½½ï¼Œæˆ‘ä»¬éœ€è¦åšä¸‰æ­¥é…ç½®ï¼Œæ‰§è¡Œä¸€æ¡æŒ‡ä»¤ã€‚</p><p>ç¬¬ä¸€æ­¥é…ç½®ï¼šåœ¨mavençš„é…ç½®æ–‡ä»¶ä¸­é…ç½®è®¿é—®ç§æœçš„ç”¨æˆ·åã€å¯†ç ã€‚</p><p>ç¬¬äºŒæ­¥é…ç½®ï¼šåœ¨mavençš„é…ç½®æ–‡ä»¶ä¸­é…ç½®è¿æ¥ç§æœçš„åœ°å€(urlåœ°å€)ã€‚</p><p>ç¬¬ä¸‰æ­¥é…ç½®ï¼šåœ¨é¡¹ç›®çš„pom.xmlæ–‡ä»¶ä¸­é…ç½®ä¸Šä¼ èµ„æºçš„ä½ç½®(urlåœ°å€)ã€‚</p><p>é…ç½®å¥½äº†ä¸Šè¿°ä¸‰æ­¥ä¹‹åï¼Œè¦ä¸Šä¼ èµ„æºåˆ°ç§æœä»“åº“ï¼Œå°±æ‰§è¡Œæ‰§è¡Œmavenç”Ÿå‘½å‘¨æœŸï¼šdeployã€‚</p><blockquote><p>ç§æœä»“åº“è¯´æ˜ï¼š</p><ul><li>RELEASEï¼šå­˜å‚¨è‡ªå·±å¼€å‘çš„RELEASEå‘å¸ƒç‰ˆæœ¬çš„èµ„æºã€‚</li><li>SNAPSHOTï¼šå­˜å‚¨è‡ªå·±å¼€å‘çš„SNAPSHOTå‘å¸ƒç‰ˆæœ¬çš„èµ„æºã€‚</li><li>Centralï¼šå­˜å‚¨çš„æ˜¯ä»ä¸­å¤®ä»“åº“ä¸‹è½½ä¸‹æ¥çš„ä¾èµ–ã€‚</li></ul></blockquote><blockquote><p>é¡¹ç›®ç‰ˆæœ¬è¯´æ˜ï¼š</p><ul><li>RELEASE(å‘å¸ƒç‰ˆæœ¬)ï¼šåŠŸèƒ½è¶‹äºç¨³å®šã€å½“å‰æ›´æ–°åœæ­¢ï¼Œå¯ä»¥ç”¨äºå‘è¡Œçš„ç‰ˆæœ¬ï¼Œå­˜å‚¨åœ¨ç§æœä¸­çš„RELEASEä»“åº“ä¸­ã€‚</li><li>SNAPSHOT(å¿«ç…§ç‰ˆæœ¬)ï¼šåŠŸèƒ½ä¸ç¨³å®šã€å°šå¤„äºå¼€å‘ä¸­çš„ç‰ˆæœ¬ï¼Œå³å¿«ç…§ç‰ˆæœ¬ï¼Œå­˜å‚¨åœ¨ç§æœçš„SNAPSHOTä»“åº“ä¸­ã€‚</li></ul></blockquote><h4 id="3-3-2-å…·ä½“æ“ä½œ"><a href="#3-3-2-å…·ä½“æ“ä½œ" class="headerlink" title="3.3.2 å…·ä½“æ“ä½œ"></a>3.3.2 å…·ä½“æ“ä½œ</h4><p>ä¸ºäº†æ¨¡æ‹Ÿä¼ä¸šå¼€å‘ï¼Œè¿™é‡Œæˆ‘å‡†å¤‡å¥½äº†ä¸€å°æœåŠ¡å™¨ï¼ˆ192.168.150.101ï¼‰ï¼Œç§æœå·²ç»æ­å»ºå¥½äº†ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®ç§æœæµ‹è¯•ï¼š<a href="http://192.168.150.101:8081/">http://192.168.150.101:8081</a></p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112117365.png" alt="image-20230113164217830" style="zoom:80%;"> <p>ç§æœå‡†å¤‡å¥½äº†ä¹‹åï¼Œæˆ‘ä»¬è¦åšå¦‚ä¸‹å‡ æ­¥é…ç½®ï¼š</p><p><strong>1.è®¾ç½®ç§æœçš„è®¿é—®ç”¨æˆ·å/å¯†ç ï¼ˆåœ¨è‡ªå·±mavenå®‰è£…ç›®å½•ä¸‹çš„conf/settings.xmlä¸­çš„serversä¸­é…ç½®ï¼‰</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>maven-releases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>username</span><span class="token punctuation">&gt;</span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>username</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>server</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>maven-snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>username</span><span class="token punctuation">&gt;</span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>username</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>server</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>2.è®¾ç½®ç§æœä¾èµ–ä¸‹è½½çš„ä»“åº“ç»„åœ°å€ï¼ˆåœ¨è‡ªå·±mavenå®‰è£…ç›®å½•ä¸‹çš„conf/settings.xmlä¸­çš„mirrorsã€profilesä¸­é…ç½®ï¼‰</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>maven-public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://192.168.150.101:8081/repository/maven-public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>allow-snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activation</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activation</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>maven-public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://192.168.150.101:8081/repository/maven-public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>3.IDEAçš„mavenå·¥ç¨‹çš„pomæ–‡ä»¶ä¸­é…ç½®ä¸Šä¼ ï¼ˆå‘å¸ƒï¼‰åœ°å€(ç›´æ¥åœ¨tlias-parentä¸­é…ç½®å‘å¸ƒåœ°å€)</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>distributionManagement</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- releaseç‰ˆæœ¬çš„å‘å¸ƒåœ°å€ --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>maven-releases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://192.168.150.101:8081/repository/maven-releases/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- snapshotç‰ˆæœ¬çš„å‘å¸ƒåœ°å€ --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshotRepository</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>maven-snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://192.168.150.101:8081/repository/maven-snapshots/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshotRepository</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>distributionManagement</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é…ç½®å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨tlias-parentä¸­æ‰§è¡Œ<strong>deploy</strong>ç”Ÿå‘½å‘¨æœŸï¼Œå°†é¡¹ç›®å‘å¸ƒåˆ°ç§æœä»“åº“ä¸­ã€‚ </p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112118896.png"></p><p>é€šè¿‡æ—¥å¿—ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™å‡ ä¸ªæ¨¡å—æ‰“çš„jaråŒ…ç¡®å®å·²ç»ä¸Šä¼ åˆ°äº†ç§æœä»“åº“ä¸­ï¼ˆç”±äºå½“å‰æˆ‘ä»¬çš„é¡¹ç›®æ˜¯SNAPSHOTç‰ˆæœ¬ï¼Œæ‰€ä»¥jaråŒ…æ˜¯ä¸Šä¼ åˆ°äº†snapshotä»“åº“ä¸­ï¼‰ã€‚</p><p>é‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥æ‰“å¼€ç§æœæ¥çœ‹ä¸€ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412112118029.png"> </p><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­çš„è¿™å‡ ä¸ªæ¨¡å—ï¼Œåœ¨ç§æœä¸­éƒ½æœ‰äº†ã€‚ é‚£æ¥ä¸‹æ¥ï¼Œå½“å…¶ä»–é¡¹ç›®ç»„çš„å¼€å‘äººå‘˜åœ¨é¡¹ç›®ä¸­ï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡ä¾èµ–çš„åæ ‡ï¼Œå°±å¯ä»¥å®Œæˆå¼•å…¥å¯¹åº”çš„ä¾èµ–ï¼Œæ­¤æ—¶æœ¬åœ°ä»“åº“æ²¡æœ‰ï¼Œå°±ä¼šè‡ªåŠ¨ä»ç§æœä»“åº“ä¸­ä¸‹è½½ã€‚</p><blockquote><p>å¤‡æ³¨è¯´æ˜ï¼š</p><ul><li><p>è¯¾ä¸Šæ¼”ç¤ºçš„æ—¶å€™ï¼Œä¸ºäº†æ¨¡æ‹ŸçœŸå®çš„çº¿ä¸Šç¯å¢ƒï¼Œè€å¸ˆä½¿ç”¨äº†ä¸€å°æœåŠ¡å™¨192.168.150.101ï¼Œå¹¶åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…äº†mavençš„ç§æœã€‚ è€Œè¿™å°æœåŠ¡å™¨å¤§å®¶å¹¶ä¸èƒ½ç›´æ¥è®¿é—®ã€‚</p></li><li><p>åŒå­¦ä»¬å¦‚æœè¦æµ‹è¯•ä½¿ç”¨ç§æœè¿›è¡Œèµ„æºçš„ä¸Šä¼ å’Œä¸‹è½½ã€‚å¯ä»¥å‚ç…§å¦‚ä¸‹æ­¥éª¤ï¼Œå¯åŠ¨ç»™å¤§å®¶å‡†å¤‡çš„æœ¬åœ°ç§æœæ“ä½œï¼š</p><ul><li><p>è§£å‹ï¼š èµ„æ–™ä¸­æä¾›çš„å‹ç¼©åŒ…  apache-maven-nexus.zip</p></li><li><p>è¿›å…¥ç›®å½•ï¼š apache-maven-nexus\nexus-3.39.0-01\bin</p></li><li><p>å¯åŠ¨æœåŠ¡ï¼šåŒå‡» start.bat </p></li><li><p>è®¿é—®æœåŠ¡ï¼šlocalhost:8081</p></li><li><p>ç§æœé…ç½®è¯´æ˜ï¼šå°†ä¸Šè¿°é…ç½®ç§æœä¿¡æ¯çš„ 192.168.150.101 æ”¹ä¸º localhost</p></li></ul></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootåŸç†</title>
      <link href="/2024/12/10/springboot-yuan-li/"/>
      <url>/2024/12/10/springboot-yuan-li/</url>
      
        <content type="html"><![CDATA[<h1 id="SpingBootåŸç†"><a href="#SpingBootåŸç†" class="headerlink" title="SpingBootåŸç†"></a>SpingBootåŸç†</h1><p>åœ¨å‰é¢åå¤šå¤©çš„è¯¾ç¨‹å½“ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ çš„éƒ½æ˜¯webå¼€å‘çš„æŠ€æœ¯ä½¿ç”¨ï¼Œéƒ½æ˜¯é¢å‘åº”ç”¨å±‚é¢çš„ï¼Œæˆ‘ä»¬å­¦ä¼šäº†æ€ä¹ˆæ ·å»ç”¨ã€‚è€Œæˆ‘ä»¬ä»Šå¤©æ‰€è¦å­¦ä¹ çš„æ˜¯webåç«¯å¼€å‘çš„æœ€åä¸€ä¸ªç¯‡ç« springbootåŸç†ç¯‡ï¼Œä¸»è¦åå‘äºåº•å±‚åŸç†ã€‚</p><p>æˆ‘ä»¬ä»Šå¤©çš„è¯¾ç¨‹å®‰æ’åŒ…æ‹¬è¿™ä¹ˆä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>é…ç½®ä¼˜å…ˆçº§ï¼šSpringbooté¡¹ç›®å½“ä¸­å±æ€§é…ç½®çš„å¸¸è§æ–¹å¼ä»¥åŠé…ç½®çš„ä¼˜å…ˆçº§</li><li>Beançš„ç®¡ç†</li><li>å‰–æSpringbootçš„åº•å±‚åŸç†</li></ol><h2 id="1-é…ç½®ä¼˜å…ˆçº§"><a href="#1-é…ç½®ä¼˜å…ˆçº§" class="headerlink" title="1. é…ç½®ä¼˜å…ˆçº§"></a>1. é…ç½®ä¼˜å…ˆçº§</h2><p>åœ¨æˆ‘ä»¬å‰é¢çš„è¯¾ç¨‹å½“ä¸­ï¼Œæˆ‘ä»¬å·²ç»è®²è§£äº†SpringBooté¡¹ç›®å½“ä¸­æ”¯æŒçš„ä¸‰ç±»é…ç½®æ–‡ä»¶ï¼š</p><ul><li>application.properties</li><li>application.yml</li><li>application.yaml</li></ul><p>åœ¨SpringBooté¡¹ç›®å½“ä¸­ï¼Œæˆ‘ä»¬è¦æƒ³é…ç½®ä¸€ä¸ªå±æ€§ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸‰ç§æ–¹å¼å½“ä¸­çš„ä»»æ„ä¸€ç§æ¥é…ç½®éƒ½å¯ä»¥ï¼Œé‚£ä¹ˆå¦‚æœé¡¹ç›®ä¸­åŒæ—¶å­˜åœ¨è¿™ä¸‰ç§é…ç½®æ–‡ä»¶ï¼Œä¸”éƒ½é…ç½®äº†åŒä¸€ä¸ªå±æ€§ï¼Œå¦‚ï¼šTomcatç«¯å£å·ï¼Œåˆ°åº•å“ªä¸€ä»½é…ç½®æ–‡ä»¶ç”Ÿæ•ˆå‘¢ï¼Ÿ</p><ul><li>application.properties</li></ul><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">8081</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>application.yml</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>   <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8082</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>application.yaml</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>   <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8082</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æˆ‘ä»¬å¯åŠ¨SpringBootç¨‹åºï¼Œæµ‹è¯•ä¸‹ä¸‰ä¸ªé…ç½®æ–‡ä»¶ä¸­å“ªä¸ªTomcatç«¯å£å·ç”Ÿæ•ˆï¼š</p><ul><li>propertiesã€yamlã€ymlä¸‰ç§é…ç½®æ–‡ä»¶åŒæ—¶å­˜åœ¨</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/10-f24e7bc45ce048b936df0a1e10a0ba51-image-20230113144757856.png"></p><blockquote><p>propertiesã€yamlã€ymlä¸‰ç§é…ç½®æ–‡ä»¶ï¼Œä¼˜å…ˆçº§æœ€é«˜çš„æ˜¯properties</p></blockquote><ul><li>yamlã€ymlä¸¤ç§é…ç½®æ–‡ä»¶åŒæ—¶å­˜åœ¨</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/10-97609dce9e4d4b5719fac432bf8637a1-image-20230113145158771.png"></p><blockquote><p>é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§æ’åï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š</p><ol><li>propertiesé…ç½®æ–‡ä»¶</li><li>ymlé…ç½®æ–‡ä»¶</li><li>yamlé…ç½®æ–‡ä»¶</li></ol></blockquote><p>æ³¨æ„äº‹é¡¹ï¼šè™½ç„¶springbootæ”¯æŒå¤šç§æ ¼å¼é…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯åœ¨é¡¹ç›®å¼€å‘æ—¶ï¼Œæ¨èç»Ÿä¸€ä½¿ç”¨ä¸€ç§æ ¼å¼çš„é…ç½®ã€‚ï¼ˆymlæ˜¯ä¸»æµï¼‰</p><p>åœ¨SpringBooté¡¹ç›®å½“ä¸­é™¤äº†ä»¥ä¸Š3ç§é…ç½®æ–‡ä»¶å¤–ï¼ŒSpringBootä¸ºäº†å¢å¼ºç¨‹åºçš„æ‰©å±•æ€§ï¼Œé™¤äº†æ”¯æŒé…ç½®æ–‡ä»¶çš„é…ç½®æ–¹å¼ä»¥å¤–ï¼Œè¿˜æ”¯æŒå¦å¤–ä¸¤ç§å¸¸è§çš„é…ç½®æ–¹å¼ï¼š</p><ol><li><p>Javaç³»ç»Ÿå±æ€§é…ç½® ï¼ˆæ ¼å¼ï¼š -Dkey=valueï¼‰</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token parameter variable">-Dserver.port</span><span class="token operator">=</span><span class="token number">9000</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>å‘½ä»¤è¡Œå‚æ•° ï¼ˆæ ¼å¼ï¼šâ€“key=valueï¼‰</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token parameter variable">--server.port</span><span class="token operator">=</span><span class="token number">10010</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><p>é‚£åœ¨ideaå½“ä¸­è¿è¡Œç¨‹åºæ—¶ï¼Œå¦‚ä½•æ¥æŒ‡å®šJavaç³»ç»Ÿå±æ€§å’Œå‘½ä»¤è¡Œå‚æ•°å‘¢ï¼Ÿ</p><ul><li>ç¼–è¾‘å¯åŠ¨ç¨‹åºçš„é…ç½®ä¿¡æ¯</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/10-74088dcbb150845112b60250e28c0946-image-20230113162746634.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/10-e6c5a37b3763d88c1ac9f93261cdab1c-image-20230113162639630.png"></p><p>é‡å¯æœåŠ¡ï¼ŒåŒæ—¶é…ç½®Tomcatç«¯å£(ä¸‰ç§é…ç½®æ–‡ä»¶ã€ç³»ç»Ÿå±æ€§ã€å‘½ä»¤è¡Œå‚æ•°)ï¼Œæµ‹è¯•å“ªä¸ªTomcatç«¯å£å·ç”Ÿæ•ˆï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/10-50e003a40e3d373ecf076f547c898fd4-image-20230113165006550.png"></p><p>åˆ é™¤å‘½ä»¤è¡Œå‚æ•°é…ç½®ï¼Œé‡å¯SpringBootæœåŠ¡ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/10-04befd642eeda2aa1becf8d585f07214-image-20230113170841253.png"></p><blockquote><p>ä¼˜å…ˆçº§ï¼š å‘½ä»¤è¡Œå‚æ•° &gt;  ç³»ç»Ÿå±æ€§å‚æ•° &gt; propertieså‚æ•° &gt; ymlå‚æ•° &gt; yamlå‚æ•°</p></blockquote><p>æ€è€ƒï¼šå¦‚æœé¡¹ç›®å·²ç»æ‰“åŒ…ä¸Šçº¿äº†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åˆå¦‚ä½•æ¥è®¾ç½®Javaç³»ç»Ÿå±æ€§å’Œå‘½ä»¤è¡Œå‚æ•°å‘¢ï¼Ÿ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">java</span> <span class="token parameter variable">-Dserver.port</span><span class="token operator">=</span><span class="token number">9000</span> <span class="token parameter variable">-jar</span> XXXXX.jar <span class="token parameter variable">--server.port</span><span class="token operator">=</span><span class="token number">10010</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸‹é¢æˆ‘ä»¬æ¥æ¼”ç¤ºä¸‹æ‰“åŒ…ç¨‹åºè¿è¡Œæ—¶æŒ‡å®šJavaç³»ç»Ÿå±æ€§å’Œå‘½ä»¤è¡Œå‚æ•°ï¼š</p><ol><li>æ‰§è¡Œmavenæ‰“åŒ…æŒ‡ä»¤packageï¼ŒæŠŠé¡¹ç›®æ‰“æˆjaræ–‡ä»¶</li><li>ä½¿ç”¨å‘½ä»¤ï¼šjava -jar æ–¹å¼è¿è¡Œjaræ–‡ä»¶ç¨‹åº</li></ol><p>é¡¹ç›®æ‰“åŒ…ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/10-2ef6f979d1492b7c1b889eb1eb6194d2-image-20230113172313655.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101926433.png"></p><p>è¿è¡Œjarç¨‹åºï¼š</p><ul><li>åŒæ—¶è®¾ç½®Javaç³»ç»Ÿå±æ€§å’Œå‘½ä»¤è¡Œå‚æ•°</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101926345.png"></p><ul><li>ä»…è®¾ç½®Javaç³»ç»Ÿå±æ€§</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101926412.png"></p><blockquote><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>Springbooté¡¹ç›®è¿›è¡Œæ‰“åŒ…æ—¶ï¼Œéœ€è¦å¼•å…¥æ’ä»¶ spring-boot-maven-plugin (åŸºäºå®˜ç½‘éª¨æ¶åˆ›å»ºé¡¹ç›®ï¼Œä¼šè‡ªåŠ¨æ·»åŠ è¯¥æ’ä»¶)</li></ul></blockquote><p>åœ¨SpringBooté¡¹ç›®å½“ä¸­ï¼Œå¸¸è§çš„å±æ€§é…ç½®æ–¹å¼æœ‰5ç§ï¼Œ 3ç§é…ç½®æ–‡ä»¶ï¼ŒåŠ ä¸Š2ç§å¤–éƒ¨å±æ€§çš„é…ç½®(Javaç³»ç»Ÿå±æ€§ã€å‘½ä»¤è¡Œå‚æ•°)ã€‚é€šè¿‡ä»¥ä¸Šçš„æµ‹è¯•ï¼Œæˆ‘ä»¬ä¹Ÿå¾—å‡ºäº†ä¼˜å…ˆçº§(ä»ä½åˆ°é«˜)ï¼š</p><ul><li>application.yamlï¼ˆå¿½ç•¥ï¼‰</li><li>application.yml</li><li>application.properties</li><li>javaç³»ç»Ÿå±æ€§ï¼ˆ-Dxxx=xxxï¼‰</li><li>å‘½ä»¤è¡Œå‚æ•°ï¼ˆâ€“xxx=xxxï¼‰</li></ul><h2 id="2-Beanç®¡ç†"><a href="#2-Beanç®¡ç†" class="headerlink" title="2. Beanç®¡ç†"></a>2. Beanç®¡ç†</h2><p>åœ¨å‰é¢çš„è¯¾ç¨‹å½“ä¸­ï¼Œæˆ‘ä»¬å·²ç»è®²è¿‡äº†æˆ‘ä»¬å¯ä»¥é€šè¿‡Springå½“ä¸­æä¾›çš„æ³¨è§£@Componentä»¥åŠå®ƒçš„ä¸‰ä¸ªè¡ç”Ÿæ³¨è§£ï¼ˆ@Controllerã€@Serviceã€@Repositoryï¼‰æ¥å£°æ˜IOCå®¹å™¨ä¸­çš„beanå¯¹è±¡ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿå­¦ä¹ äº†å¦‚ä½•ä¸ºåº”ç”¨ç¨‹åºæ³¨å…¥è¿è¡Œæ—¶æ‰€éœ€è¦ä¾èµ–çš„beanå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¾èµ–æ³¨å…¥DIã€‚</p><p>æˆ‘ä»¬ä»Šå¤©ä¸»è¦å­¦ä¹ IOCå®¹å™¨ä¸­Beançš„å…¶ä»–ä½¿ç”¨ç»†èŠ‚ï¼Œä¸»è¦å­¦ä¹ ä»¥ä¸‹ä¸‰æ–¹é¢ï¼š</p><ol><li>å¦‚ä½•ä»IOCå®¹å™¨ä¸­æ‰‹åŠ¨çš„è·å–åˆ°beanå¯¹è±¡</li><li>beançš„ä½œç”¨åŸŸé…ç½®</li><li>ç®¡ç†ç¬¬ä¸‰æ–¹çš„beanå¯¹è±¡</li></ol><p>æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆæ¥å­¦ä¹ ç¬¬ä¸€æ–¹é¢ï¼Œä»IOCå®¹å™¨ä¸­è·å–beanå¯¹è±¡ã€‚</p><h3 id="2-1-è·å–Bean"><a href="#2-1-è·å–Bean" class="headerlink" title="2.1 è·å–Bean"></a>2.1 è·å–Bean</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpringBooté¡¹ç›®åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨çš„åˆ›å»ºIOCå®¹å™¨(ä¹Ÿç§°ä¸ºSpringå®¹å™¨)ï¼Œå¹¶ä¸”åœ¨å¯åŠ¨çš„è¿‡ç¨‹å½“ä¸­ä¼šè‡ªåŠ¨çš„å°†beanå¯¹è±¡éƒ½åˆ›å»ºå¥½ï¼Œå­˜æ”¾åœ¨IOCå®¹å™¨å½“ä¸­ã€‚åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶éœ€è¦ä¾èµ–ä»€ä¹ˆbeanå¯¹è±¡ï¼Œå°±ç›´æ¥è¿›è¡Œä¾èµ–æ³¨å…¥å°±å¯ä»¥äº†ã€‚</p><p>è€Œåœ¨Springå®¹å™¨ä¸­æä¾›äº†ä¸€äº›æ–¹æ³•ï¼Œå¯ä»¥ä¸»åŠ¨ä»IOCå®¹å™¨ä¸­è·å–åˆ°beanå¯¹è±¡ï¼Œä¸‹é¢ä»‹ç»3ç§å¸¸ç”¨æ–¹å¼ï¼š</p><ol><li><p>æ ¹æ®nameè·å–bean</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>æ ¹æ®ç±»å‹è·å–bean</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> requiredType<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>æ ¹æ®nameè·å–beanï¼ˆå¸¦ç±»å‹è½¬æ¢ï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> requiredType<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><p>æ€è€ƒï¼šè¦ä»IOCå®¹å™¨å½“ä¸­æ¥è·å–åˆ°beanå¯¹è±¡ï¼Œéœ€è¦å…ˆæ‹¿åˆ°IOCå®¹å™¨å¯¹è±¡ï¼Œæ€ä¹ˆæ ·æ‰èƒ½æ‹¿åˆ°IOCå®¹å™¨å‘¢ï¼Ÿ</p><ul><li>æƒ³è·å–åˆ°IOCå®¹å™¨ï¼Œç›´æ¥å°†IOCå®¹å™¨å¯¹è±¡æ³¨å…¥è¿›æ¥å°±å¯ä»¥äº†</li></ul><p>æ§åˆ¶å™¨ï¼šDeptController</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/depts"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptService</span> deptService<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">DeptController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"DeptController constructor ...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">&gt;</span></span> deptList <span class="token operator">=</span> deptService<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>deptList<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">"/{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span>  <span class="token punctuation">{</span>        deptService<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@PostMapping</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Dept</span> dept<span class="token punctuation">)</span><span class="token punctuation">{</span>        deptService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>dept<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸šåŠ¡å®ç°ç±»ï¼šDeptServiceImpl</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptMapper</span> deptMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">&gt;</span></span> deptList <span class="token operator">=</span> deptMapper<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> deptList<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        deptMapper<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span> <span class="token punctuation">{</span>        dept<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        dept<span class="token punctuation">.</span><span class="token function">setUpdateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        deptMapper<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>dept<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Mapperæ¥å£ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptMapper</span> <span class="token punctuation">{</span>    <span class="token comment">//æŸ¥è¯¢å…¨éƒ¨éƒ¨é—¨æ•°æ®</span>    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from dept"</span><span class="token punctuation">)</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//åˆ é™¤éƒ¨é—¨</span>    <span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">"delete from dept where id = #{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//æ–°å¢éƒ¨é—¨</span>    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">"insert into dept(name, create_time, update_time) values (#{name},#{createTime},#{updateTime})"</span><span class="token punctuation">)</span>    <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">SpringbootWebConfig2ApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">;</span> <span class="token comment">//IOCå®¹å™¨å¯¹è±¡</span>    <span class="token comment">//è·å–beanå¯¹è±¡</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGetBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//æ ¹æ®beançš„åç§°è·å–</span>        <span class="token class-name">DeptController</span> bean1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">DeptController</span><span class="token punctuation">)</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"deptController"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bean1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ ¹æ®beançš„ç±»å‹è·å–</span>        <span class="token class-name">DeptController</span> bean2 <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">DeptController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bean2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ ¹æ®beançš„åç§° åŠ ç±»å‹è·å–</span>        <span class="token class-name">DeptController</span> bean3 <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"deptController"</span><span class="token punctuation">,</span> <span class="token class-name">DeptController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bean3<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¨‹åºè¿è¡Œåæ§åˆ¶å°æ—¥å¿—ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101927447.png"></p><blockquote><p>é—®é¢˜ï¼šè¾“å‡ºçš„beanå¯¹è±¡åœ°å€å€¼æ˜¯ä¸€æ ·çš„ï¼Œè¯´æ˜IOCå®¹å™¨å½“ä¸­çš„beanå¯¹è±¡æœ‰å‡ ä¸ªï¼Ÿ</p><p>ç­”æ¡ˆï¼šåªæœ‰ä¸€ä¸ªã€‚        ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼ŒIOCä¸­çš„beanå¯¹è±¡æ˜¯å•ä¾‹ï¼‰</p><p>é‚£ä¹ˆèƒ½ä¸èƒ½å°†beanå¯¹è±¡è®¾ç½®ä¸ºéå•ä¾‹çš„(æ¯æ¬¡è·å–çš„beanéƒ½æ˜¯ä¸€ä¸ªæ–°å¯¹è±¡)ï¼Ÿ</p><p>å¯ä»¥ï¼Œåœ¨ä¸‹ä¸€ä¸ªçŸ¥è¯†ç‚¹(beanä½œç”¨åŸŸ)ä¸­è®²è§£ã€‚</p></blockquote><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>ä¸Šè¿°æ‰€è¯´çš„ ã€Springé¡¹ç›®å¯åŠ¨æ—¶ï¼Œä¼šæŠŠå…¶ä¸­çš„beanéƒ½åˆ›å»ºå¥½ã€‘è¿˜ä¼šå—åˆ°ä½œç”¨åŸŸåŠå»¶è¿Ÿåˆå§‹åŒ–å½±å“ï¼Œè¿™é‡Œä¸»è¦é’ˆå¯¹äºé»˜è®¤çš„å•ä¾‹éå»¶è¿ŸåŠ è½½çš„beanè€Œè¨€ã€‚</li></ul><h3 id="2-2-Beanä½œç”¨åŸŸ"><a href="#2-2-Beanä½œç”¨åŸŸ" class="headerlink" title="2.2 Beanä½œç”¨åŸŸ"></a>2.2 Beanä½œç”¨åŸŸ</h3><p>åœ¨å‰é¢æˆ‘ä»¬æåˆ°çš„IOCå®¹å™¨å½“ä¸­ï¼Œé»˜è®¤beanå¯¹è±¡æ˜¯å•ä¾‹æ¨¡å¼(åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡)ã€‚é‚£ä¹ˆå¦‚ä½•è®¾ç½®beanå¯¹è±¡ä¸ºéå•ä¾‹å‘¢ï¼Ÿéœ€è¦è®¾ç½®beançš„ä½œç”¨åŸŸã€‚</p><p>åœ¨Springä¸­æ”¯æŒäº”ç§ä½œç”¨åŸŸï¼Œåä¸‰ç§åœ¨webç¯å¢ƒæ‰ç”Ÿæ•ˆï¼š</p><table><thead><tr><th><strong>ä½œç”¨åŸŸ</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>singleton</td><td>å®¹å™¨å†…åŒåç§°çš„beanåªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆå•ä¾‹ï¼‰ï¼ˆé»˜è®¤ï¼‰</td></tr><tr><td>prototype</td><td>æ¯æ¬¡ä½¿ç”¨è¯¥beanæ—¶ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆéå•ä¾‹ï¼‰</td></tr><tr><td>request</td><td>æ¯ä¸ªè¯·æ±‚èŒƒå›´å†…ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆwebç¯å¢ƒä¸­ï¼Œäº†è§£ï¼‰</td></tr><tr><td>session</td><td>æ¯ä¸ªä¼šè¯èŒƒå›´å†…ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆwebç¯å¢ƒä¸­ï¼Œäº†è§£ï¼‰</td></tr><tr><td>application</td><td>æ¯ä¸ªåº”ç”¨èŒƒå›´å†…ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼ˆwebç¯å¢ƒä¸­ï¼Œäº†è§£ï¼‰</td></tr></tbody></table><p>çŸ¥é“äº†beançš„5ç§ä½œç”¨åŸŸäº†ï¼Œæˆ‘ä»¬è¦æ€ä¹ˆå»è®¾ç½®ä¸€ä¸ªbeançš„ä½œç”¨åŸŸå‘¢ï¼Ÿ</p><ul><li>å¯ä»¥å€ŸåŠ©Springä¸­çš„@Scopeæ³¨è§£æ¥è¿›è¡Œé…ç½®ä½œç”¨åŸŸ</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101927650.png"></p><p><strong>1). æµ‹è¯•ä¸€</strong></p><ul><li>æ§åˆ¶å™¨</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//é»˜è®¤beançš„ä½œç”¨åŸŸä¸ºï¼šsingleton (å•ä¾‹)</span><span class="token annotation punctuation">@Lazy</span> <span class="token comment">//å»¶è¿ŸåŠ è½½ï¼ˆç¬¬ä¸€æ¬¡ä½¿ç”¨beanå¯¹è±¡æ—¶ï¼Œæ‰ä¼šåˆ›å»ºbeanå¯¹è±¡å¹¶äº¤ç»™iocå®¹å™¨ç®¡ç†ï¼‰</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/depts"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptService</span> deptService<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">DeptController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"DeptController constructor ...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æµ‹è¯•ç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">SpringbootWebConfig2ApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">;</span> <span class="token comment">//IOCå®¹å™¨å¯¹è±¡</span>    <span class="token comment">//beançš„ä½œç”¨åŸŸ</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">DeptController</span> deptController <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">DeptController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>deptController<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡å¯SpringBootæœåŠ¡ï¼Œè¿è¡Œæµ‹è¯•æ–¹æ³•ï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ‰“å°çš„æ—¥å¿—ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101927546.png"></p><blockquote><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><p>IOCå®¹å™¨ä¸­çš„beané»˜è®¤ä½¿ç”¨çš„ä½œç”¨åŸŸï¼šsingleton (å•ä¾‹)</p></li><li><p>é»˜è®¤singletonçš„beanï¼Œåœ¨å®¹å™¨å¯åŠ¨æ—¶è¢«åˆ›å»ºï¼Œå¯ä»¥ä½¿ç”¨@Lazyæ³¨è§£æ¥å»¶è¿Ÿåˆå§‹åŒ–(å»¶è¿Ÿåˆ°ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶)</p></li></ul></blockquote><p><strong>2). æµ‹è¯•äºŒ</strong></p><p>ä¿®æ”¹æ§åˆ¶å™¨DeptControllerä»£ç ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"prototype"</span><span class="token punctuation">)</span> <span class="token comment">//beanä½œç”¨åŸŸä¸ºéå•ä¾‹</span><span class="token annotation punctuation">@Lazy</span> <span class="token comment">//å»¶è¿ŸåŠ è½½</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/depts"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptService</span> deptService<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">DeptController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"DeptController constructor ...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡å¯SpringBootæœåŠ¡ï¼Œå†æ¬¡æ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼ŒæŸ¥çœ‹æ§åˆ¶å§æ‰“å°çš„æ—¥å¿—ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101927090.png"></p><blockquote><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>prototypeçš„beanï¼Œæ¯ä¸€æ¬¡ä½¿ç”¨è¯¥beançš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹</li><li>å®é™…å¼€å‘å½“ä¸­ï¼Œç»å¤§éƒ¨åˆ†çš„Beanæ˜¯å•ä¾‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç»å¤§éƒ¨åˆ†Beanä¸éœ€è¦é…ç½®scopeå±æ€§</li></ul></blockquote><h3 id="2-3-ç¬¬ä¸‰æ–¹Bean"><a href="#2-3-ç¬¬ä¸‰æ–¹Bean" class="headerlink" title="2.3 ç¬¬ä¸‰æ–¹Bean"></a>2.3 ç¬¬ä¸‰æ–¹Bean</h3><p>å­¦ä¹ å®Œbeançš„è·å–ã€beançš„ä½œç”¨åŸŸä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥å­¦ä¹ ç¬¬ä¸‰æ–¹beançš„é…ç½®ã€‚</p><p>ä¹‹å‰æˆ‘ä»¬æ‰€é…ç½®çš„beanï¼Œåƒcontrollerã€serviceï¼Œdaoä¸‰å±‚ä½“ç³»ä¸‹ç¼–å†™çš„ç±»ï¼Œè¿™äº›ç±»éƒ½æ˜¯æˆ‘ä»¬åœ¨é¡¹ç›®å½“ä¸­è‡ªå·±å®šä¹‰çš„ç±»(è‡ªå®šä¹‰ç±»)ã€‚å½“æˆ‘ä»¬è¦å£°æ˜è¿™äº›beanï¼Œä¹Ÿéå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ç±»ä¸ŠåŠ ä¸Š@Componentä»¥åŠå®ƒçš„è¿™ä¸‰ä¸ªè¡ç”Ÿæ³¨è§£ï¼ˆ@Controllerã€@Serviceã€@Repositoryï¼‰ï¼Œå°±å¯ä»¥æ¥å£°æ˜è¿™ä¸ªbeanå¯¹è±¡äº†ã€‚<br>ä½†æ˜¯åœ¨æˆ‘ä»¬é¡¹ç›®å¼€å‘å½“ä¸­ï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µå°±æ˜¯è¿™ä¸ªç±»å®ƒä¸æ˜¯æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ï¼Œè€Œæ˜¯æˆ‘ä»¬å¼•å…¥çš„ç¬¬ä¸‰æ–¹ä¾èµ–å½“ä¸­æä¾›çš„ã€‚</p><p>åœ¨pom.xmlæ–‡ä»¶ä¸­ï¼Œå¼•å…¥dom4jï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--Dom4j--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.dom4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dom4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>dom4jå°±æ˜¯ç¬¬ä¸‰æ–¹ç»„ç»‡æä¾›çš„ã€‚ dom4jä¸­çš„SAXReaderç±»å°±æ˜¯ç¬¬ä¸‰æ–¹ç¼–å†™çš„ã€‚</p></blockquote><p>å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°SAXReaderå¯¹è±¡æ—¶ï¼Œç›´æ¥è¿›è¡Œä¾èµ–æ³¨å…¥æ˜¯ä¸æ˜¯å°±å¯ä»¥äº†å‘¢ï¼Ÿ</p><ul><li>æŒ‰ç…§æˆ‘ä»¬ä¹‹å‰çš„åšæ³•ï¼Œéœ€è¦åœ¨SAXReaderç±»ä¸Šæ·»åŠ ä¸€ä¸ªæ³¨è§£@Componentï¼ˆå°†å½“å‰ç±»äº¤ç»™IOCå®¹å™¨ç®¡ç†ï¼‰</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101927260.png"></p><blockquote><p>ç»“è®ºï¼šç¬¬ä¸‰æ–¹æä¾›çš„ç±»æ˜¯åªè¯»çš„ã€‚æ— æ³•åœ¨ç¬¬ä¸‰æ–¹ç±»ä¸Šæ·»åŠ @Componentæ³¨è§£æˆ–è¡ç”Ÿæ³¨è§£ã€‚</p></blockquote><p>é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ€æ ·ä½¿ç”¨å¹¶å®šä¹‰ç¬¬ä¸‰æ–¹çš„beanå‘¢ï¼Ÿ</p><ul><li>å¦‚æœè¦ç®¡ç†çš„beanå¯¹è±¡æ¥è‡ªäºç¬¬ä¸‰æ–¹ï¼ˆä¸æ˜¯è‡ªå®šä¹‰çš„ï¼‰ï¼Œæ˜¯æ— æ³•ç”¨@Component åŠè¡ç”Ÿæ³¨è§£å£°æ˜beançš„ï¼Œå°±éœ€è¦ç”¨åˆ°**@Bean**æ³¨è§£ã€‚</li></ul><p><strong>è§£å†³æ–¹æ¡ˆ1ï¼šåœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ @Beanæ ‡è¯†çš„æ–¹æ³•</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootWebConfig2Application</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootWebConfig2Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//å£°æ˜ç¬¬ä¸‰æ–¹bean</span>    <span class="token annotation punctuation">@Bean</span> <span class="token comment">//å°†å½“å‰æ–¹æ³•çš„è¿”å›å€¼å¯¹è±¡äº¤ç»™IOCå®¹å™¨ç®¡ç†, æˆä¸ºIOCå®¹å™¨bean</span>    <span class="token keyword">public</span> <span class="token class-name">SAXReader</span> <span class="token function">saxReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SAXReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>xmlæ–‡ä»¶ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>emp</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Tom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>age</span><span class="token punctuation">&gt;</span></span>18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>age</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>emp</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">SpringbootWebConfig2ApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">SAXReader</span> saxReader<span class="token punctuation">;</span>    <span class="token comment">//ç¬¬ä¸‰æ–¹beançš„ç®¡ç†</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testThirdBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">Document</span> document <span class="token operator">=</span> saxReader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">"1.xml"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Element</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getRootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> name <span class="token operator">=</span> rootElement<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> age <span class="token operator">=</span> rootElement<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">" : "</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡å¯SpringBootæœåŠ¡ï¼Œæ‰§è¡Œæµ‹è¯•æ–¹æ³•åï¼Œæ§åˆ¶å°è¾“å‡ºæ—¥å¿—ï¼š</p><pre class="line-numbers language-none"><code class="language-none">Tom : 18<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>è¯´æ˜ï¼šä»¥ä¸Šåœ¨å¯åŠ¨ç±»ä¸­å£°æ˜ç¬¬ä¸‰æ–¹Beançš„ä½œæ³•ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼ˆé¡¹ç›®ä¸­è¦ä¿è¯å¯åŠ¨ç±»çš„çº¯ç²¹æ€§ï¼‰</strong></p></blockquote><p><strong>è§£å†³æ–¹æ¡ˆ2ï¼šåœ¨é…ç½®ç±»ä¸­å®šä¹‰@Beanæ ‡è¯†çš„æ–¹æ³•</strong></p><ul><li>å¦‚æœéœ€è¦å®šä¹‰ç¬¬ä¸‰æ–¹Beanæ—¶ï¼Œ é€šå¸¸ä¼šå•ç‹¬å®šä¹‰ä¸€ä¸ªé…ç½®ç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span> <span class="token comment">//é…ç½®ç±»  (åœ¨é…ç½®ç±»å½“ä¸­å¯¹ç¬¬ä¸‰æ–¹beanè¿›è¡Œé›†ä¸­çš„é…ç½®ç®¡ç†)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CommonConfig</span> <span class="token punctuation">{</span>    <span class="token comment">//å£°æ˜ç¬¬ä¸‰æ–¹bean</span>    <span class="token annotation punctuation">@Bean</span> <span class="token comment">//å°†å½“å‰æ–¹æ³•çš„è¿”å›å€¼å¯¹è±¡äº¤ç»™IOCå®¹å™¨ç®¡ç†, æˆä¸ºIOCå®¹å™¨bean</span>          <span class="token comment">//é€šè¿‡@Beanæ³¨è§£çš„name/valueå±æ€§æŒ‡å®šbeanåç§°, å¦‚æœæœªæŒ‡å®š, é»˜è®¤æ˜¯æ–¹æ³•å</span>    <span class="token keyword">public</span> <span class="token class-name">SAXReader</span> <span class="token function">reader</span><span class="token punctuation">(</span><span class="token class-name">DeptService</span> deptService<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>deptService<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SAXReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨é‡Šæ‰SpringBootå¯åŠ¨ç±»ä¸­åˆ›å»ºç¬¬ä¸‰æ–¹beanå¯¹è±¡çš„ä»£ç ï¼Œé‡å¯æœåŠ¡ï¼Œæ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼š</p><pre class="line-numbers language-none"><code class="language-none">Tom : 18<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨æ–¹æ³•ä¸ŠåŠ ä¸Šä¸€ä¸ª@Beanæ³¨è§£ï¼ŒSpring å®¹å™¨åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨çš„è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶å°†æ–¹æ³•çš„è¿”å›å€¼å£°æ˜ä¸ºSpringå®¹å™¨å½“ä¸­çš„Beanå¯¹è±¡ã€‚</p><blockquote><p>æ³¨æ„äº‹é¡¹ ï¼š</p><ul><li><p>é€šè¿‡@Beanæ³¨è§£çš„nameæˆ–valueå±æ€§å¯ä»¥å£°æ˜beançš„åç§°ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤beançš„åç§°å°±æ˜¯æ–¹æ³•åã€‚</p></li><li><p>å¦‚æœç¬¬ä¸‰æ–¹beanéœ€è¦ä¾èµ–å…¶å®ƒbeanå¯¹è±¡ï¼Œç›´æ¥åœ¨beanå®šä¹‰æ–¹æ³•ä¸­è®¾ç½®å½¢å‚å³å¯ï¼Œå®¹å™¨ä¼šæ ¹æ®ç±»å‹è‡ªåŠ¨è£…é…ã€‚</p></li></ul></blockquote><p>å…³äºBeanå¤§å®¶åªéœ€è¦ä¿æŒä¸€ä¸ªåŸåˆ™ï¼š</p><ul><li>å¦‚æœæ˜¯åœ¨é¡¹ç›®å½“ä¸­æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç±»ï¼Œæƒ³å°†è¿™äº›ç±»äº¤ç»™IOCå®¹å™¨ç®¡ç†ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨@Componentä»¥åŠå®ƒçš„è¡ç”Ÿæ³¨è§£æ¥å£°æ˜å°±å¯ä»¥ã€‚</li><li>å¦‚æœè¿™ä¸ªç±»å®ƒä¸æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ï¼Œè€Œæ˜¯å¼•å…¥çš„ç¬¬ä¸‰æ–¹ä¾èµ–å½“ä¸­æä¾›çš„ç±»ï¼Œè€Œä¸”æˆ‘ä»¬è¿˜æƒ³å°†è¿™ä¸ªç±»äº¤ç»™IOCå®¹å™¨ç®¡ç†ã€‚æ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦åœ¨é…ç½®ç±»ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨æ–¹æ³•ä¸ŠåŠ ä¸Šä¸€ä¸ª@Beanæ³¨è§£ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ¥å£°æ˜ç¬¬ä¸‰æ–¹çš„beanå¯¹è±¡ã€‚</li></ul><h2 id="3-SpringBootåŸç†"><a href="#3-SpringBootåŸç†" class="headerlink" title="3. SpringBootåŸç†"></a>3. SpringBootåŸç†</h2><p>ç»è¿‡å‰é¢10å¤šå¤©è¯¾ç¨‹çš„å­¦ä¹ ï¼Œå¤§å®¶ä¹Ÿä¼šå‘ç°åŸºäºSpringBootè¿›è¡Œwebç¨‹åºçš„å¼€å‘æ˜¯éå¸¸ç®€å•ã€éå¸¸é«˜æ•ˆçš„ã€‚</p><p>SpringBootä½¿æˆ‘ä»¬èƒ½å¤Ÿé›†ä¸­ç²¾åŠ›åœ°å»å…³æ³¨ä¸šåŠ¡åŠŸèƒ½çš„å¼€å‘ï¼Œè€Œä¸ç”¨è¿‡å¤šåœ°å…³æ³¨æ¡†æ¶æœ¬èº«çš„é…ç½®ä½¿ç”¨ã€‚è€Œæˆ‘ä»¬å‰é¢æ‰€è®²è§£çš„éƒ½æ˜¯é¢å‘åº”ç”¨å±‚é¢çš„æŠ€æœ¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹å­¦ä¹ SpringBootçš„åŸç†ï¼Œè¿™éƒ¨åˆ†å†…å®¹åå‘äºåº•å±‚çš„åŸç†åˆ†æã€‚</p><p>åœ¨å‰–æSpringBootçš„åŸç†ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å¿«é€Ÿå›é¡¾ä¸€ä¸‹æˆ‘ä»¬å‰é¢æ‰€è®²è§£çš„Springå®¶æ—çš„æ¡†æ¶ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101928432.png"></p><p>Springæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€æµè¡Œçš„Javaæ¡†æ¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´åŠ å¿«é€Ÿã€æ›´åŠ å®¹æ˜“çš„æ¥æ„å»ºJavaé¡¹ç›®ã€‚è€Œåœ¨Springå®¶æ—å½“ä¸­æä¾›äº†å¾ˆå¤šä¼˜ç§€çš„æ¡†æ¶ï¼Œè€Œæ‰€æœ‰çš„æ¡†æ¶éƒ½æ˜¯åŸºäºä¸€ä¸ªåŸºç¡€æ¡†æ¶çš„SpringFramework(ä¹Ÿå°±æ˜¯Springæ¡†æ¶)ã€‚è€Œå‰é¢æˆ‘ä»¬ä¹Ÿæåˆ°ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥åŸºäºSpringæ¡†æ¶è¿›è¡Œé¡¹ç›®çš„å¼€å‘ï¼Œä¼šæ¯”è¾ƒç¹çã€‚</p><p>è¿™ä¸ªç¹çä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼š</p><ol><li>åœ¨pom.xmlä¸­ä¾èµ–é…ç½®æ¯”è¾ƒç¹çï¼Œåœ¨é¡¹ç›®å¼€å‘æ—¶ï¼Œéœ€è¦è‡ªå·±å»æ‰¾åˆ°å¯¹åº”çš„ä¾èµ–ï¼Œè¿˜éœ€è¦æ‰¾åˆ°ä¾èµ–å®ƒæ‰€é…å¥—çš„ä¾èµ–ä»¥åŠå¯¹åº”ç‰ˆæœ¬ï¼Œå¦åˆ™å°±ä¼šå‡ºç°ç‰ˆæœ¬å†²çªé—®é¢˜ã€‚</li><li>åœ¨ä½¿ç”¨Springæ¡†æ¶è¿›è¡Œé¡¹ç›®å¼€å‘æ—¶ï¼Œéœ€è¦åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­åšå¤§é‡çš„é…ç½®ï¼Œè¿™å°±é€ æˆSpringæ¡†æ¶å…¥é—¨éš¾åº¦è¾ƒå¤§ï¼Œå­¦ä¹ æˆæœ¬è¾ƒé«˜ã€‚</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101928132.png"></p><blockquote><p>åŸºäºSpringå­˜åœ¨çš„é—®é¢˜ï¼Œå®˜æ–¹åœ¨Springæ¡†æ¶4.0ç‰ˆæœ¬ä¹‹åï¼Œåˆæ¨å‡ºäº†ä¸€ä¸ªå…¨æ–°çš„æ¡†æ¶ï¼šSpringBootã€‚</p><p>é€šè¿‡ SpringBootæ¥ç®€åŒ–Springæ¡†æ¶çš„å¼€å‘(æ˜¯ç®€åŒ–ä¸æ˜¯æ›¿ä»£)ã€‚æˆ‘ä»¬ç›´æ¥åŸºäºSpringBootæ¥æ„å»ºJavaé¡¹ç›®ï¼Œä¼šè®©æˆ‘ä»¬çš„é¡¹ç›®å¼€å‘æ›´åŠ ç®€å•ï¼Œæ›´åŠ å¿«æ·ã€‚</p></blockquote><p>SpringBootæ¡†æ¶ä¹‹æ‰€ä»¥ä½¿ç”¨èµ·æ¥æ›´ç®€å•æ›´å¿«æ·ï¼Œæ˜¯å› ä¸ºSpringBootæ¡†æ¶åº•å±‚æä¾›äº†ä¸¤ä¸ªéå¸¸é‡è¦çš„åŠŸèƒ½ï¼šä¸€ä¸ªæ˜¯èµ·æ­¥ä¾èµ–ï¼Œä¸€ä¸ªæ˜¯è‡ªåŠ¨é…ç½®ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101928977.png"></p><blockquote><p>é€šè¿‡SpringBootæ‰€æä¾›çš„èµ·æ­¥ä¾èµ–ï¼Œå°±å¯ä»¥å¤§å¤§çš„ç®€åŒ–pomæ–‡ä»¶å½“ä¸­ä¾èµ–çš„é…ç½®ï¼Œä»è€Œè§£å†³äº†Springæ¡†æ¶å½“ä¸­ä¾èµ–é…ç½®ç¹ççš„é—®é¢˜ã€‚</p><p>é€šè¿‡è‡ªåŠ¨é…ç½®çš„åŠŸèƒ½å°±å¯ä»¥å¤§å¤§çš„ç®€åŒ–æ¡†æ¶åœ¨ä½¿ç”¨æ—¶beançš„å£°æ˜ä»¥åŠbeançš„é…ç½®ã€‚æˆ‘ä»¬åªéœ€è¦å¼•å…¥ç¨‹åºå¼€å‘æ—¶æ‰€éœ€è¦çš„èµ·æ­¥ä¾èµ–ï¼Œé¡¹ç›®å¼€å‘æ—¶æ‰€ç”¨åˆ°å¸¸è§çš„é…ç½®éƒ½å·²ç»æœ‰äº†ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å°±å¯ä»¥äº†ã€‚</p></blockquote><p>ç®€å•å›é¡¾ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å­¦ä¹ ä¸‹SpringBootçš„åŸç†ã€‚å…¶å®å­¦ä¹ SpringBootçš„åŸç†å°±æ˜¯æ¥è§£æSpringBootå½“ä¸­çš„èµ·æ­¥ä¾èµ–ä¸è‡ªåŠ¨é…ç½®çš„åŸç†ã€‚æˆ‘ä»¬é¦–å…ˆæ¥å­¦ä¹ SpringBootå½“ä¸­èµ·æ­¥ä¾èµ–çš„åŸç†ã€‚</p><h3 id="3-1-èµ·æ­¥ä¾èµ–"><a href="#3-1-èµ·æ­¥ä¾èµ–" class="headerlink" title="3.1 èµ·æ­¥ä¾èµ–"></a>3.1 èµ·æ­¥ä¾èµ–</h3><p>å‡å¦‚æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨SpringBootï¼Œç”¨çš„æ˜¯Springæ¡†æ¶è¿›è¡Œwebç¨‹åºçš„å¼€å‘ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦å¼•å…¥webç¨‹åºå¼€å‘æ‰€éœ€è¦çš„ä¸€äº›ä¾èµ–ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101928307.png"></p><blockquote><p>spring-webmvcä¾èµ–ï¼šè¿™æ˜¯Springæ¡†æ¶è¿›è¡Œwebç¨‹åºå¼€å‘æ‰€éœ€è¦çš„ä¾èµ–</p><p>servlet-apiä¾èµ–ï¼šServletåŸºç¡€ä¾èµ–</p><p>jackson-databindä¾èµ–ï¼šJSONå¤„ç†å·¥å…·åŒ…</p><p>å¦‚æœè¦ä½¿ç”¨AOPï¼Œè¿˜éœ€è¦å¼•å…¥aopä¾èµ–ã€aspectä¾èµ–</p><p>é¡¹ç›®ä¸­æ‰€å¼•å…¥çš„è¿™äº›ä¾èµ–ï¼Œè¿˜éœ€è¦ä¿è¯ç‰ˆæœ¬åŒ¹é…ï¼Œå¦åˆ™å°±å¯èƒ½ä¼šå‡ºç°ç‰ˆæœ¬å†²çªé—®é¢˜ã€‚</p></blockquote><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†SpringBootï¼Œå°±ä¸éœ€è¦åƒä¸Šé¢è¿™ä¹ˆç¹ççš„å¼•å…¥ä¾èµ–äº†ã€‚æˆ‘ä»¬åªéœ€è¦å¼•å…¥ä¸€ä¸ªä¾èµ–å°±å¯ä»¥äº†ï¼Œé‚£å°±æ˜¯webå¼€å‘çš„èµ·æ­¥ä¾èµ–ï¼šspringboot-starter-webã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101928554.png"></p><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬åªéœ€è¦å¼•å…¥ä¸€ä¸ªwebå¼€å‘çš„èµ·æ­¥ä¾èµ–ï¼Œwebå¼€å‘æ‰€éœ€è¦çš„æ‰€æœ‰çš„ä¾èµ–éƒ½æœ‰äº†å‘¢ï¼Ÿ</p><ul><li>å› ä¸ºMavençš„ä¾èµ–ä¼ é€’ã€‚</li></ul><blockquote><ul><li><p>åœ¨SpringBootç»™æˆ‘ä»¬æä¾›çš„è¿™äº›èµ·æ­¥ä¾èµ–å½“ä¸­ï¼Œå·²æä¾›äº†å½“å‰ç¨‹åºå¼€å‘æ‰€éœ€è¦çš„æ‰€æœ‰çš„å¸¸è§ä¾èµ–(å®˜ç½‘åœ°å€ï¼š<a href="https://docs.spring.io/spring-boot/docs/2.7.7/reference/htmlsingle/#using.build-systems.starters)%E3%80%82">https://docs.spring.io/spring-boot/docs/2.7.7/reference/htmlsingle/#using.build-systems.starters)ã€‚</a></p></li><li><p>æ¯”å¦‚ï¼šspringboot-starter-webï¼Œè¿™æ˜¯webå¼€å‘çš„èµ·æ­¥ä¾èµ–ï¼Œåœ¨webå¼€å‘çš„èµ·æ­¥ä¾èµ–å½“ä¸­ï¼Œå°±é›†æˆäº†webå¼€å‘ä¸­å¸¸è§çš„ä¾èµ–ï¼šjsonã€webã€webmvcã€tomcatç­‰ã€‚æˆ‘ä»¬åªéœ€è¦å¼•å…¥è¿™ä¸€ä¸ªèµ·æ­¥ä¾èµ–ï¼Œå…¶ä»–çš„ä¾èµ–éƒ½ä¼šè‡ªåŠ¨çš„é€šè¿‡Mavençš„ä¾èµ–ä¼ é€’è¿›æ¥ã€‚</p></li></ul></blockquote><p><strong>ç»“è®ºï¼šèµ·æ­¥ä¾èµ–çš„åŸç†å°±æ˜¯Mavençš„ä¾èµ–ä¼ é€’ã€‚</strong></p><h3 id="3-2-è‡ªåŠ¨é…ç½®"><a href="#3-2-è‡ªåŠ¨é…ç½®" class="headerlink" title="3.2 è‡ªåŠ¨é…ç½®"></a>3.2 è‡ªåŠ¨é…ç½®</h3><p>æˆ‘ä»¬è®²è§£äº†SpringBootå½“ä¸­èµ·æ­¥ä¾èµ–çš„åŸç†ï¼Œå°±æ˜¯Mavençš„ä¾èµ–ä¼ é€’ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è§£æä¸‹è‡ªåŠ¨é…ç½®çš„åŸç†ï¼Œæˆ‘ä»¬è¦åˆ†æè‡ªåŠ¨é…ç½®çš„åŸç†ï¼Œé¦–å…ˆè¦çŸ¥é“ä»€ä¹ˆæ˜¯è‡ªåŠ¨é…ç½®ã€‚</p><h4 id="3-2-1-æ¦‚è¿°"><a href="#3-2-1-æ¦‚è¿°" class="headerlink" title="3.2.1 æ¦‚è¿°"></a>3.2.1 æ¦‚è¿°</h4><p>SpringBootçš„è‡ªåŠ¨é…ç½®å°±æ˜¯å½“Springå®¹å™¨å¯åŠ¨åï¼Œä¸€äº›é…ç½®ç±»ã€beanå¯¹è±¡å°±è‡ªåŠ¨å­˜å…¥åˆ°äº†IOCå®¹å™¨ä¸­ï¼Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»å£°æ˜ï¼Œä»è€Œç®€åŒ–äº†å¼€å‘ï¼Œçœå»äº†ç¹ççš„é…ç½®æ“ä½œã€‚</p><blockquote><p>æ¯”å¦‚ï¼šæˆ‘ä»¬è¦è¿›è¡Œäº‹åŠ¡ç®¡ç†ã€è¦è¿›è¡ŒAOPç¨‹åºçš„å¼€å‘ï¼Œæ­¤æ—¶å°±ä¸éœ€è¦æˆ‘ä»¬å†å»æ‰‹åŠ¨çš„å£°æ˜è¿™äº›beanå¯¹è±¡äº†ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å°±å¯ä»¥ä»è€Œå¤§å¤§çš„ç®€åŒ–ç¨‹åºçš„å¼€å‘ï¼Œçœå»äº†ç¹ççš„é…ç½®æ“ä½œã€‚</p></blockquote><p>ä¸‹é¢æˆ‘ä»¬æ‰“å¼€ideaï¼Œä¸€èµ·æ¥çœ‹ä¸‹è‡ªåŠ¨é…ç½®çš„æ•ˆæœï¼š</p><ul><li>è¿è¡ŒSpringBootå¯åŠ¨ç±»</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101928007.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101929645.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101928090.png"></p><p>å¤§å®¶ä¼šçœ‹åˆ°æœ‰ä¸¤ä¸ªCommonConfigï¼Œåœ¨ç¬¬ä¸€ä¸ªCommonConfigç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªbeanå¯¹è±¡ï¼Œbeanå¯¹è±¡çš„åå­—å«readerã€‚</p><p>åœ¨ç¬¬äºŒä¸ªCommonConfigä¸­å®ƒçš„beanåå­—å«commonConfigï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šæœ‰è¿™æ ·ä¸€ä¸ªbeanå¯¹è±¡å‘¢ï¼ŸåŸå› æ˜¯åœ¨CommonConfigé…ç½®ç±»ä¸Šæ·»åŠ äº†ä¸€ä¸ªæ³¨è§£@Configurationï¼Œè€Œ@Configurationåº•å±‚å°±æ˜¯@Component</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101929554.png"></p><blockquote><p>æ‰€ä»¥é…ç½®ç±»æœ€ç»ˆä¹Ÿæ˜¯SpringIOCå®¹å™¨å½“ä¸­çš„ä¸€ä¸ªbeanå¯¹è±¡</p></blockquote><p>åœ¨IOCå®¹å™¨ä¸­é™¤äº†æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„beanä»¥å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šé…ç½®ç±»ï¼Œè¿™äº›é…ç½®ç±»éƒ½æ˜¯SpringBootåœ¨å¯åŠ¨çš„æ—¶å€™åŠ è½½è¿›æ¥çš„é…ç½®ç±»ã€‚è¿™äº›é…ç½®ç±»åŠ è½½è¿›æ¥ä¹‹åï¼Œå®ƒä¹Ÿä¼šç”Ÿæˆå¾ˆå¤šçš„beanå¯¹è±¡ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101929834.png"></p><blockquote><p>æ¯”å¦‚ï¼šé…ç½®ç±»GsonAutoConfigurationé‡Œé¢æœ‰ä¸€ä¸ªbeanï¼Œbeançš„åå­—å«gsonï¼Œå®ƒçš„ç±»å‹æ˜¯Gsonã€‚ </p><p>com.google.gson.Gsonæ˜¯è°·æ­ŒåŒ…ä¸­æä¾›çš„ç”¨æ¥å¤„ç†JSONæ ¼å¼æ•°æ®çš„ã€‚</p></blockquote><p>å½“æˆ‘ä»¬æƒ³è¦ä½¿ç”¨è¿™äº›é…ç½®ç±»ä¸­ç”Ÿæˆçš„beanå¯¹è±¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨@Autowiredå°±è‡ªåŠ¨æ³¨å…¥äº†ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>gson<span class="token punctuation">.</span></span><span class="token class-name">Gson</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Result</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfigurationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">Gson</span> gson<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">String</span> json <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ·»åŠ æ–­ç‚¹ï¼Œä½¿ç”¨debugæ¨¡å¼è¿è¡Œæµ‹è¯•ç±»ç¨‹åºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101929106.png"></p><p>é—®é¢˜ï¼šåœ¨å½“å‰é¡¹ç›®ä¸­æˆ‘ä»¬å¹¶æ²¡æœ‰å£°æ˜è°·æ­Œæä¾›çš„Gsonè¿™ä¹ˆä¸€ä¸ªbeanå¯¹è±¡ï¼Œç„¶åæˆ‘ä»¬å´å¯ä»¥é€šè¿‡@Autowiredä»Springå®¹å™¨ä¸­æ³¨å…¥beanå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªbeanå¯¹è±¡æ€ä¹ˆæ¥çš„ï¼Ÿ</p><p>ç­”æ¡ˆï¼šSpringBooté¡¹ç›®åœ¨å¯åŠ¨æ—¶é€šè¿‡è‡ªåŠ¨é…ç½®å®Œæˆäº†beanå¯¹è±¡çš„åˆ›å»ºã€‚</p><p>ä½“éªŒäº†SpringBootçš„è‡ªåŠ¨é…ç½®äº†ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥åˆ†æè‡ªåŠ¨é…ç½®çš„åŸç†ã€‚å…¶å®åˆ†æè‡ªåŠ¨é…ç½®åŸç†å°±æ˜¯æ¥è§£æåœ¨SpringBooté¡¹ç›®ä¸­ï¼Œåœ¨å¼•å…¥ä¾èµ–ä¹‹åæ˜¯å¦‚ä½•å°†ä¾èµ–jaråŒ…å½“ä¸­æ‰€å®šä¹‰çš„é…ç½®ç±»ä»¥åŠbeanåŠ è½½åˆ°SpringIOCå®¹å™¨ä¸­çš„ã€‚</p><h4 id="3-2-2-å¸¸è§æ–¹æ¡ˆ"><a href="#3-2-2-å¸¸è§æ–¹æ¡ˆ" class="headerlink" title="3.2.2 å¸¸è§æ–¹æ¡ˆ"></a>3.2.2 å¸¸è§æ–¹æ¡ˆ</h4><h5 id="3-2-2-1-æ¦‚è¿°"><a href="#3-2-2-1-æ¦‚è¿°" class="headerlink" title="3.2.2.1 æ¦‚è¿°"></a>3.2.2.1 æ¦‚è¿°</h5><p>æˆ‘ä»¬çŸ¥é“äº†ä»€ä¹ˆæ˜¯è‡ªåŠ¨é…ç½®ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦æ¥å‰–æè‡ªåŠ¨é…ç½®çš„åŸç†ã€‚è§£æè‡ªåŠ¨é…ç½®çš„åŸç†å°±æ˜¯åˆ†æåœ¨ SpringBooté¡¹ç›®å½“ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥å¯¹åº”çš„ä¾èµ–ä¹‹åï¼Œæ˜¯å¦‚ä½•å°†ä¾èµ–jaråŒ…å½“ä¸­æ‰€æä¾›çš„beanä»¥åŠé…ç½®ç±»ç›´æ¥åŠ è½½åˆ°å½“å‰é¡¹ç›®çš„SpringIOCå®¹å™¨å½“ä¸­çš„ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ç›´æ¥é€šè¿‡ä»£ç æ¥åˆ†æè‡ªåŠ¨é…ç½®åŸç†ã€‚</p><blockquote><p>å‡†å¤‡å·¥ä½œï¼šåœ¨Ideaä¸­å¯¼å…¥â€èµ„æ–™\03. è‡ªåŠ¨é…ç½®åŸç†â€ä¸‹çš„itheima-utilså·¥ç¨‹</p></blockquote><p>1ã€åœ¨SpringBooté¡¹ç›® spring-boot-web-config2 å·¥ç¨‹ä¸­ï¼Œé€šè¿‡åæ ‡å¼•å…¥itheima-utilsä¾èµ–</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101930043.png"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TokenParser</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"TokenParser ... parse ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2ã€åœ¨æµ‹è¯•ç±»ä¸­ï¼Œæ·»åŠ æµ‹è¯•æ–¹æ³•</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfigurationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testTokenParse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">TokenParser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3ã€æ‰§è¡Œæµ‹è¯•æ–¹æ³•</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101930060.png"></p><blockquote><p>å¼‚å¸¸ä¿¡æ¯æè¿°ï¼š æ²¡æœ‰com.example.TokenParseç±»å‹çš„bean</p><p>è¯´æ˜ï¼šåœ¨Springå®¹å™¨ä¸­æ²¡æœ‰æ‰¾åˆ°com.example.TokenParseç±»å‹çš„beanå¯¹è±¡</p></blockquote><p>æ€è€ƒï¼šå¼•å…¥è¿›æ¥çš„ç¬¬ä¸‰æ–¹ä¾èµ–å½“ä¸­çš„beanä»¥åŠé…ç½®ç±»ä¸ºä»€ä¹ˆæ²¡æœ‰ç”Ÿæ•ˆï¼Ÿ</p><ul><li>åŸå› åœ¨æˆ‘ä»¬ä¹‹å‰è®²è§£IOCçš„æ—¶å€™æœ‰æåˆ°è¿‡ï¼Œåœ¨ç±»ä¸Šæ·»åŠ @Componentæ³¨è§£æ¥å£°æ˜beanå¯¹è±¡æ—¶ï¼Œè¿˜éœ€è¦ä¿è¯@Componentæ³¨è§£èƒ½è¢«Springçš„ç»„ä»¶æ‰«æåˆ°ã€‚</li><li>SpringBooté¡¹ç›®ä¸­çš„@SpringBootApplicationæ³¨è§£ï¼Œå…·æœ‰åŒ…æ‰«æçš„ä½œç”¨ï¼Œä½†æ˜¯å®ƒåªä¼šæ‰«æå¯åŠ¨ç±»æ‰€åœ¨çš„å½“å‰åŒ…ä»¥åŠå­åŒ…ã€‚ </li><li>å½“å‰åŒ…ï¼šcom.itheimaï¼Œ ç¬¬ä¸‰æ–¹ä¾èµ–ä¸­æä¾›çš„åŒ…ï¼šcom.exampleï¼ˆæ‰«æä¸åˆ°ï¼‰</li></ul><p>é‚£ä¹ˆå¦‚ä½•è§£å†³ä»¥ä¸Šé—®é¢˜çš„å‘¢ï¼Ÿ</p><ul><li>æ–¹æ¡ˆ1ï¼š@ComponentScan ç»„ä»¶æ‰«æ</li><li>æ–¹æ¡ˆ2ï¼š@Import å¯¼å…¥ï¼ˆä½¿ç”¨@Importå¯¼å…¥çš„ç±»ä¼šè¢«SpringåŠ è½½åˆ°IOCå®¹å™¨ä¸­ï¼‰</li></ul><h5 id="3-2-2-2-æ–¹æ¡ˆä¸€"><a href="#3-2-2-2-æ–¹æ¡ˆä¸€" class="headerlink" title="3.2.2.2 æ–¹æ¡ˆä¸€"></a>3.2.2.2 æ–¹æ¡ˆä¸€</h5><p>@ComponentScanç»„ä»¶æ‰«æ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootApplication</span><span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"com.itheima"</span><span class="token punctuation">,</span><span class="token string">"com.example"</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//æŒ‡å®šè¦æ‰«æçš„åŒ…</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootWebConfig2Application</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootWebConfig2Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡æ–°æ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ§åˆ¶å°æ—¥å¿—è¾“å‡ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101930259.png"></p><blockquote><p>å¤§å®¶å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœé‡‡ç”¨ä»¥ä¸Šè¿™ç§æ–¹å¼æ¥å®Œæˆè‡ªåŠ¨é…ç½®ï¼Œé‚£æˆ‘ä»¬è¿›è¡Œé¡¹ç›®å¼€å‘æ—¶ï¼Œå½“éœ€è¦å¼•å…¥å¤§é‡çš„ç¬¬ä¸‰æ–¹çš„ä¾èµ–ï¼Œå°±éœ€è¦åœ¨å¯åŠ¨ç±»ä¸Šé…ç½®Nå¤šè¦æ‰«æçš„åŒ…ï¼Œè¿™ç§æ–¹å¼ä¼šå¾ˆç¹çã€‚è€Œä¸”è¿™ç§å¤§é¢ç§¯çš„æ‰«ææ€§èƒ½ä¹Ÿæ¯”è¾ƒä½ã€‚</p><p>ç¼ºç‚¹ï¼š</p><ol><li>ä½¿ç”¨ç¹ç</li><li>æ€§èƒ½ä½</li></ol><p><strong>ç»“è®ºï¼šSpringBootä¸­å¹¶æ²¡æœ‰é‡‡ç”¨ä»¥ä¸Šè¿™ç§æ–¹æ¡ˆã€‚</strong></p></blockquote><h5 id="3-2-2-3-æ–¹æ¡ˆäºŒ"><a href="#3-2-2-3-æ–¹æ¡ˆäºŒ" class="headerlink" title="3.2.2.3 æ–¹æ¡ˆäºŒ"></a>3.2.2.3 æ–¹æ¡ˆäºŒ</h5><p>@Importå¯¼å…¥</p><ul><li>å¯¼å…¥å½¢å¼ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š<ol><li>å¯¼å…¥æ™®é€šç±»</li><li>å¯¼å…¥é…ç½®ç±»</li><li>å¯¼å…¥ImportSelectoræ¥å£å®ç°ç±»</li></ol></li></ul><p>1). ä½¿ç”¨@Importå¯¼å…¥æ™®é€šç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">TokenParser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">//å¯¼å…¥çš„ç±»ä¼šè¢«SpringåŠ è½½åˆ°IOCå®¹å™¨ä¸­</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootWebConfig2Application</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootWebConfig2Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>é‡æ–°æ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ§åˆ¶å°æ—¥å¿—è¾“å‡ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101930707.png"></p></blockquote><p>2). ä½¿ç”¨@Importå¯¼å…¥é…ç½®ç±»ï¼š</p><ul><li>é…ç½®ç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeaderConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">HeaderParser</span> <span class="token function">headerParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HeaderParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">HeaderGenerator</span> <span class="token function">headerGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HeaderGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å¯åŠ¨ç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">HeaderConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">//å¯¼å…¥é…ç½®ç±»</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootWebConfig2Application</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootWebConfig2Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æµ‹è¯•ç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfigurationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHeaderParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">HeaderParser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHeaderGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">HeaderGenerator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101930428.png"></p></blockquote><p>3). ä½¿ç”¨@Importå¯¼å…¥ImportSelectoræ¥å£å®ç°ç±»ï¼š</p><ul><li>ImportSelectoræ¥å£å®ç°ç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyImportSelector</span> <span class="token keyword">implements</span> <span class="token class-name">ImportSelector</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> importingClassMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//è¿”å›å€¼å­—ç¬¦ä¸²æ•°ç»„ï¼ˆæ•°ç»„ä¸­å°è£…äº†å…¨é™å®šåç§°çš„ç±»ï¼‰</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">"com.example.HeaderConfig"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å¯åŠ¨ç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">MyImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">//å¯¼å…¥ImportSelectoræ¥å£å®ç°ç±»</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootWebConfig2Application</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootWebConfig2Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101930974.png"></p></blockquote><p>æˆ‘ä»¬ä½¿ç”¨@Importæ³¨è§£é€šè¿‡è¿™ä¸‰ç§æ–¹å¼éƒ½å¯ä»¥å¯¼å…¥ç¬¬ä¸‰æ–¹ä¾èµ–ä¸­æ‰€æä¾›çš„beanæˆ–è€…æ˜¯é…ç½®ç±»ã€‚</p><p>æ€è€ƒï¼šå¦‚æœåŸºäºä»¥ä¸Šæ–¹å¼å®Œæˆè‡ªåŠ¨é…ç½®ï¼Œå½“è¦å¼•å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹ä¾èµ–æ—¶ï¼Œæ˜¯ä¸æ˜¯è¿˜è¦çŸ¥é“ç¬¬ä¸‰æ–¹ä¾èµ–ä¸­æœ‰å“ªäº›é…ç½®ç±»å’Œå“ªäº›Beanå¯¹è±¡ï¼Ÿ</p><ul><li>ç­”æ¡ˆï¼šæ˜¯çš„ã€‚ ï¼ˆå¯¹ç¨‹åºå‘˜æ¥è®²ï¼Œå¾ˆä¸å‹å¥½ï¼Œè€Œä¸”æ¯”è¾ƒç¹çï¼‰</li></ul><p>æ€è€ƒï¼šå½“æˆ‘ä»¬è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œä¾èµ–ä¸­åˆ°åº•æœ‰å“ªäº›beanå’Œé…ç½®ç±»ï¼Œè°æœ€æ¸…æ¥šï¼Ÿ</p><ul><li>ç­”æ¡ˆï¼šç¬¬ä¸‰æ–¹ä¾èµ–è‡ªèº«æœ€æ¸…æ¥šã€‚</li></ul><blockquote><p><strong>ç»“è®ºï¼šæˆ‘ä»¬ä¸ç”¨è‡ªå·±æŒ‡å®šè¦å¯¼å…¥å“ªäº›beanå¯¹è±¡å’Œé…ç½®ç±»äº†ï¼Œè®©ç¬¬ä¸‰æ–¹ä¾èµ–å®ƒè‡ªå·±æ¥æŒ‡å®šã€‚</strong></p></blockquote><p>æ€ä¹ˆè®©ç¬¬ä¸‰æ–¹ä¾èµ–è‡ªå·±æŒ‡å®šbeanå¯¹è±¡å’Œé…ç½®ç±»ï¼Ÿ</p><ul><li>æ¯”è¾ƒå¸¸è§çš„æ–¹æ¡ˆå°±æ˜¯ç¬¬ä¸‰æ–¹ä¾èµ–ç»™æˆ‘ä»¬æä¾›ä¸€ä¸ªæ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£ä¸€èˆ¬éƒ½ä»¥@EnableXxxxå¼€å¤´çš„æ³¨è§£ï¼Œæ³¨è§£ä¸­å°è£…çš„å°±æ˜¯@Importæ³¨è§£</li></ul><p>4). ä½¿ç”¨ç¬¬ä¸‰æ–¹ä¾èµ–æä¾›çš„ @EnableXxxxxæ³¨è§£</p><ul><li>ç¬¬ä¸‰æ–¹ä¾èµ–ä¸­æä¾›çš„æ³¨è§£</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">MyImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token comment">//æŒ‡å®šè¦å¯¼å…¥å“ªäº›beanå¯¹è±¡æˆ–é…ç½®ç±»</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableHeaderConfig</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åœ¨ä½¿ç”¨æ—¶åªéœ€åœ¨å¯åŠ¨ç±»ä¸ŠåŠ ä¸Š@EnableXxxxxæ³¨è§£å³å¯</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableHeaderConfig</span>  <span class="token comment">//ä½¿ç”¨ç¬¬ä¸‰æ–¹ä¾èµ–æä¾›çš„Enableå¼€å¤´çš„æ³¨è§£</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootWebConfig2Application</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootWebConfig2Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101931507.png"></p></blockquote><p>ä»¥ä¸Šå››ç§æ–¹å¼éƒ½å¯ä»¥å®Œæˆå¯¼å…¥æ“ä½œï¼Œä½†æ˜¯ç¬¬4ç§æ–¹å¼ä¼šæ›´æ–¹ä¾¿æ›´ä¼˜é›…ï¼Œè€Œè¿™ç§æ–¹å¼ä¹Ÿæ˜¯SpringBootå½“ä¸­æ‰€é‡‡ç”¨çš„æ–¹å¼ã€‚</p><h4 id="3-2-3-åŸç†åˆ†æ"><a href="#3-2-3-åŸç†åˆ†æ" class="headerlink" title="3.2.3 åŸç†åˆ†æ"></a>3.2.3 åŸç†åˆ†æ</h4><h5 id="3-2-3-1-æºç è·Ÿè¸ª"><a href="#3-2-3-1-æºç è·Ÿè¸ª" class="headerlink" title="3.2.3.1 æºç è·Ÿè¸ª"></a>3.2.3.1 æºç è·Ÿè¸ª</h5><p>å‰é¢æˆ‘ä»¬è®²è§£äº†åœ¨é¡¹ç›®å½“ä¸­å¼•å…¥ç¬¬ä¸‰æ–¹ä¾èµ–ä¹‹åï¼Œå¦‚ä½•åŠ è½½ç¬¬ä¸‰æ–¹ä¾èµ–ä¸­å®šä¹‰å¥½çš„beanå¯¹è±¡ä»¥åŠé…ç½®ç±»ï¼Œä»è€Œå®Œæˆè‡ªåŠ¨é…ç½®æ“ä½œã€‚é‚£ä¸‹é¢æˆ‘ä»¬é€šè¿‡æºç è·Ÿè¸ªçš„å½¢å¼æ¥å‰–æä¸‹SpringBootåº•å±‚åˆ°åº•æ˜¯å¦‚ä½•å®Œæˆè‡ªåŠ¨é…ç½®çš„ã€‚</p><blockquote><p>æºç è·Ÿè¸ªæŠ€å·§ï¼š</p><p>åœ¨è·Ÿè¸ªæ¡†æ¶æºç çš„æ—¶å€™ï¼Œä¸€å®šè¦æŠ“ä½å…³é”®ç‚¹ï¼Œæ‰¾åˆ°æ ¸å¿ƒæµç¨‹ã€‚ä¸€å®šä¸è¦ä»å¤´åˆ°å°¾ä¸€è¡Œä»£ç å»çœ‹ï¼Œä¸€ä¸ªæ–¹æ³•çš„å»ç ”ç©¶ï¼Œä¸€å®šè¦æ‰¾åˆ°å…³é”®æµç¨‹ï¼ŒæŠ“ä½å…³é”®ç‚¹ï¼Œå…ˆåœ¨å®è§‚ä¸Šå¯¹æ•´ä¸ªæµç¨‹æˆ–è€…æ•´ä¸ªåŸç†æœ‰ä¸€ä¸ªè®¤è¯†ï¼Œæœ‰ç²¾åŠ›å†å»ç ”ç©¶å…¶ä¸­çš„ç»†èŠ‚ã€‚</p></blockquote><p>è¦ææ¸…æ¥šSpringBootçš„è‡ªåŠ¨é…ç½®åŸç†ï¼Œè¦ä»SpringBootå¯åŠ¨ç±»ä¸Šä½¿ç”¨çš„æ ¸å¿ƒæ³¨è§£@SpringBootApplicationå¼€å§‹åˆ†æï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101931273.png"></p><p>åœ¨@SpringBootApplicationæ³¨è§£ä¸­åŒ…å«äº†ï¼š</p><ul><li>å…ƒæ³¨è§£ï¼ˆä¸å†è§£é‡Šï¼‰</li><li>@SpringBootConfiguration</li><li>@EnableAutoConfiguration</li><li>@ComponentScan</li></ul><p>æˆ‘ä»¬å…ˆæ¥çœ‹ç¬¬ä¸€ä¸ªæ³¨è§£ï¼š@SpringBootConfiguration</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101931391.png"></p><blockquote><p>@SpringBootConfigurationæ³¨è§£ä¸Šä½¿ç”¨äº†@Configurationï¼Œè¡¨æ˜SpringBootå¯åŠ¨ç±»å°±æ˜¯ä¸€ä¸ªé…ç½®ç±»ã€‚</p><p>@Indexedæ³¨è§£ï¼Œæ˜¯ç”¨æ¥åŠ é€Ÿåº”ç”¨å¯åŠ¨çš„ï¼ˆä¸ç”¨å…³å¿ƒï¼‰ã€‚</p></blockquote><p>æ¥ä¸‹æ¥å†å…ˆçœ‹@ComponentScanæ³¨è§£ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101931941.png"></p><blockquote><p>@ComponentScanæ³¨è§£æ˜¯ç”¨æ¥è¿›è¡Œç»„ä»¶æ‰«æçš„ï¼Œæ‰«æå¯åŠ¨ç±»æ‰€åœ¨çš„åŒ…åŠå…¶å­åŒ…ä¸‹æ‰€æœ‰è¢«@ComponentåŠå…¶è¡ç”Ÿæ³¨è§£å£°æ˜çš„ç±»ã€‚</p><p>SpringBootå¯åŠ¨ç±»ï¼Œä¹‹æ‰€ä»¥å…·å¤‡æ‰«æåŒ…åŠŸèƒ½ï¼Œå°±æ˜¯å› ä¸ºåŒ…å«äº†@ComponentScanæ³¨è§£ã€‚</p></blockquote><p>æœ€åæˆ‘ä»¬æ¥çœ‹çœ‹@EnableAutoConfigurationæ³¨è§£ï¼ˆè‡ªåŠ¨é…ç½®æ ¸å¿ƒæ³¨è§£ï¼‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101931126.png"></p><blockquote><p>ä½¿ç”¨@Importæ³¨è§£ï¼Œå¯¼å…¥äº†å®ç°ImportSelectoræ¥å£çš„å®ç°ç±»ã€‚</p><p>AutoConfigurationImportSelectorç±»æ˜¯ImportSelectoræ¥å£çš„å®ç°ç±»ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101931232.png"></p></blockquote><p>AutoConfigurationImportSelectorç±»ä¸­é‡å†™äº†ImportSelectoræ¥å£çš„selectImports()æ–¹æ³•ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101932570.png"></p><blockquote><p>selectImports()æ–¹æ³•åº•å±‚è°ƒç”¨getAutoConfigurationEntry()æ–¹æ³•ï¼Œè·å–å¯è‡ªåŠ¨é…ç½®çš„é…ç½®ç±»ä¿¡æ¯é›†åˆ</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101932365.png"></p><blockquote><p>getAutoConfigurationEntry()æ–¹æ³•é€šè¿‡è°ƒç”¨getCandidateConfigurations(annotationMetadata, attributes)æ–¹æ³•è·å–åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»çš„é›†åˆ</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101932410.png"></p><blockquote><p>getCandidateConfigurationsæ–¹æ³•çš„åŠŸèƒ½ï¼š</p><p>è·å–æ‰€æœ‰åŸºäºMETA-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.importsæ–‡ä»¶ã€META-INF/spring.factoriesæ–‡ä»¶ä¸­é…ç½®ç±»çš„é›†åˆ</p></blockquote><p>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.importsæ–‡ä»¶å’ŒMETA-INF/spring.factoriesæ–‡ä»¶è¿™ä¸¤ä¸ªæ–‡ä»¶åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p><ul><li>é€šå¸¸åœ¨å¼•å…¥çš„èµ·æ­¥ä¾èµ–ä¸­ï¼Œéƒ½æœ‰åŒ…å«ä»¥ä¸Šä¸¤ä¸ªæ–‡ä»¶</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101932178.png"> </p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101932003.png"></p><p>åœ¨å‰é¢åœ¨ç»™å¤§å®¶æ¼”ç¤ºè‡ªåŠ¨é…ç½®çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨æµ‹è¯•ç±»å½“ä¸­æ³¨å…¥äº†ä¸€ä¸ªå«gsonçš„beanå¯¹è±¡ï¼Œè¿›è¡ŒJSONæ ¼å¼è½¬æ¢ã€‚è™½ç„¶æˆ‘ä»¬æ²¡æœ‰é…ç½®beanå¯¹è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬æ˜¯å¯ä»¥ç›´æ¥æ³¨å…¥ä½¿ç”¨çš„ã€‚åŸå› å°±æ˜¯å› ä¸ºåœ¨è‡ªåŠ¨é…ç½®ç±»å½“ä¸­åšäº†è‡ªåŠ¨é…ç½®ã€‚åˆ°åº•æ˜¯åœ¨å“ªä¸ªè‡ªåŠ¨é…ç½®ç±»å½“ä¸­åšçš„è‡ªåŠ¨é…ç½®å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡æœç´¢æ¥æŸ¥è¯¢ä¸€ä¸‹ã€‚</p><p>åœ¨META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.importsé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šäº†ç¬¬ä¸‰æ–¹ä¾èµ–Gsonçš„é…ç½®ç±»ï¼šGsonAutoConfiguration</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101932454.png"></p><p>ç¬¬ä¸‰æ–¹ä¾èµ–ä¸­æä¾›çš„GsonAutoConfigurationç±»ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101932328.png"></p><blockquote><p>åœ¨GsonAutoConfigurationç±»ä¸Šï¼Œæ·»åŠ äº†æ³¨è§£@AutoConfigurationï¼Œé€šè¿‡æŸ¥çœ‹æºç ï¼Œå¯ä»¥æ˜ç¡®ï¼šGsonAutoConfigurationç±»æ˜¯ä¸€ä¸ªé…ç½®ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101933846.png"></p></blockquote><p>çœ‹åˆ°è¿™é‡Œï¼Œå¤§å®¶å°±åº”è¯¥æ˜ç™½ä¸ºä»€ä¹ˆå¯ä»¥å®Œæˆè‡ªåŠ¨é…ç½®äº†ï¼ŒåŸç†å°±æ˜¯åœ¨é…ç½®ç±»ä¸­å®šä¹‰ä¸€ä¸ª@Beanæ ‡è¯†çš„æ–¹æ³•ï¼Œè€ŒSpringä¼šè‡ªåŠ¨è°ƒç”¨é…ç½®ç±»ä¸­ä½¿ç”¨@Beanæ ‡è¯†çš„æ–¹æ³•ï¼Œå¹¶æŠŠæ–¹æ³•çš„è¿”å›å€¼æ³¨å†Œåˆ°IOCå®¹å™¨ä¸­ã€‚</p><p><strong>è‡ªåŠ¨é…ç½®æºç å°ç»“</strong></p><p>è‡ªåŠ¨é…ç½®åŸç†æºç å…¥å£å°±æ˜¯@SpringBootApplicationæ³¨è§£ï¼Œåœ¨è¿™ä¸ªæ³¨è§£ä¸­å°è£…äº†3ä¸ªæ³¨è§£ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>@SpringBootConfiguration<ul><li>å£°æ˜å½“å‰ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»</li></ul></li><li>@ComponentScan<ul><li>è¿›è¡Œç»„ä»¶æ‰«æï¼ˆSpringBootä¸­é»˜è®¤æ‰«æçš„æ˜¯å¯åŠ¨ç±»æ‰€åœ¨çš„å½“å‰åŒ…åŠå…¶å­åŒ…ï¼‰</li></ul></li><li>@EnableAutoConfiguration<ul><li>å°è£…äº†@Importæ³¨è§£ï¼ˆImportæ³¨è§£ä¸­æŒ‡å®šäº†ä¸€ä¸ªImportSelectoræ¥å£çš„å®ç°ç±»ï¼‰<ul><li>åœ¨å®ç°ç±»é‡å†™çš„selectImports()æ–¹æ³•ï¼Œè¯»å–å½“å‰é¡¹ç›®ä¸‹æ‰€æœ‰ä¾èµ–jaråŒ…ä¸­META-INF/spring.factoriesã€META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.importsä¸¤ä¸ªæ–‡ä»¶é‡Œé¢å®šä¹‰çš„é…ç½®ç±»ï¼ˆé…ç½®ç±»ä¸­å®šä¹‰äº†@Beanæ³¨è§£æ ‡è¯†çš„æ–¹æ³•ï¼‰ã€‚</li></ul></li></ul></li></ul><p>å½“SpringBootç¨‹åºå¯åŠ¨æ—¶ï¼Œå°±ä¼šåŠ è½½é…ç½®æ–‡ä»¶å½“ä¸­æ‰€å®šä¹‰çš„é…ç½®ç±»ï¼Œå¹¶å°†è¿™äº›é…ç½®ç±»ä¿¡æ¯(ç±»çš„å…¨é™å®šå)å°è£…åˆ°Stringç±»å‹çš„æ•°ç»„ä¸­ï¼Œæœ€ç»ˆé€šè¿‡@Importæ³¨è§£å°†è¿™äº›é…ç½®ç±»å…¨éƒ¨åŠ è½½åˆ°Springçš„IOCå®¹å™¨ä¸­ï¼Œäº¤ç»™IOCå®¹å™¨ç®¡ç†ã€‚</p><blockquote><p>æœ€åå‘¢ç»™å¤§å®¶æŠ›å‡ºä¸€ä¸ªé—®é¢˜ï¼šåœ¨META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.importsæ–‡ä»¶ä¸­å®šä¹‰çš„é…ç½®ç±»éå¸¸å¤šï¼Œè€Œä¸”æ¯ä¸ªé…ç½®ç±»ä¸­åˆå¯ä»¥å®šä¹‰å¾ˆå¤šçš„beanï¼Œé‚£è¿™äº›beanéƒ½ä¼šæ³¨å†Œåˆ°Springçš„IOCå®¹å™¨ä¸­å—ï¼Ÿ</p><p>ç­”æ¡ˆï¼šå¹¶ä¸æ˜¯ã€‚ åœ¨å£°æ˜beanå¯¹è±¡æ—¶ï¼Œä¸Šé¢æœ‰åŠ ä¸€ä¸ªä»¥@Conditionalå¼€å¤´çš„æ³¨è§£ï¼Œè¿™ç§æ³¨è§£çš„ä½œç”¨å°±æ˜¯æŒ‰ç…§æ¡ä»¶è¿›è¡Œè£…é…ï¼Œåªæœ‰æ»¡è¶³æ¡ä»¶ä¹‹åï¼Œæ‰ä¼šå°†beanæ³¨å†Œåˆ°Springçš„IOCå®¹å™¨ä¸­ï¼ˆä¸‹é¢ä¼šè¯¦ç»†æ¥è®²è§£ï¼‰</p></blockquote><h5 id="3-2-3-2-Conditional"><a href="#3-2-3-2-Conditional" class="headerlink" title="3.2.3.2 @Conditional"></a>3.2.3.2 @Conditional</h5><p>æˆ‘ä»¬åœ¨è·Ÿè¸ªSpringBootè‡ªåŠ¨é…ç½®çš„æºç çš„æ—¶å€™ï¼Œåœ¨è‡ªåŠ¨é…ç½®ç±»å£°æ˜beançš„æ—¶å€™ï¼Œé™¤äº†åœ¨æ–¹æ³•ä¸ŠåŠ äº†ä¸€ä¸ª@Beanæ³¨è§£ä»¥å¤–ï¼Œè¿˜ä¼šç»å¸¸ç”¨åˆ°ä¸€ä¸ªæ³¨è§£ï¼Œå°±æ˜¯ä»¥Conditionalå¼€å¤´çš„è¿™ä¸€ç±»çš„æ³¨è§£ã€‚ä»¥Conditionalå¼€å¤´çš„è¿™äº›æ³¨è§£éƒ½æ˜¯æ¡ä»¶è£…é…çš„æ³¨è§£ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸‹æ¡ä»¶è£…é…æ³¨è§£ã€‚</p><p>@Conditionalæ³¨è§£ï¼š</p><ul><li>ä½œç”¨ï¼šæŒ‰ç…§ä¸€å®šçš„æ¡ä»¶è¿›è¡Œåˆ¤æ–­ï¼Œåœ¨æ»¡è¶³ç»™å®šæ¡ä»¶åæ‰ä¼šæ³¨å†Œå¯¹åº”çš„beanå¯¹è±¡åˆ°Springçš„IOCå®¹å™¨ä¸­ã€‚</li><li>ä½ç½®ï¼šæ–¹æ³•ã€ç±»</li><li>@Conditionalæœ¬èº«æ˜¯ä¸€ä¸ªçˆ¶æ³¨è§£ï¼Œæ´¾ç”Ÿå‡ºå¤§é‡çš„å­æ³¨è§£ï¼š<ul><li>@ConditionalOnClassï¼šåˆ¤æ–­ç¯å¢ƒä¸­æœ‰å¯¹åº”å­—èŠ‚ç æ–‡ä»¶ï¼Œæ‰æ³¨å†Œbeanåˆ°IOCå®¹å™¨ã€‚</li><li>@ConditionalOnMissingBeanï¼šåˆ¤æ–­ç¯å¢ƒä¸­æ²¡æœ‰å¯¹åº”çš„bean(ç±»å‹æˆ–åç§°)ï¼Œæ‰æ³¨å†Œbeanåˆ°IOCå®¹å™¨ã€‚</li><li>@ConditionalOnPropertyï¼šåˆ¤æ–­é…ç½®æ–‡ä»¶ä¸­æœ‰å¯¹åº”å±æ€§å’Œå€¼ï¼Œæ‰æ³¨å†Œbeanåˆ°IOCå®¹å™¨ã€‚</li></ul></li></ul><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç æ¥æ¼”ç¤ºä¸‹Conditionalæ³¨è§£çš„ä½¿ç”¨ï¼š</p><ul><li>@ConditionalOnClassæ³¨è§£</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeaderConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"io.jsonwebtoken.Jwts"</span><span class="token punctuation">)</span><span class="token comment">//ç¯å¢ƒä¸­å­˜åœ¨æŒ‡å®šçš„è¿™ä¸ªç±»ï¼Œæ‰ä¼šå°†è¯¥beanåŠ å…¥IOCå®¹å™¨</span>    <span class="token keyword">public</span> <span class="token class-name">HeaderParser</span> <span class="token function">headerParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HeaderParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>pom.xml</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token constant">JWT</span>ä»¤ç‰Œ<span class="token operator">--</span><span class="token operator">&gt;</span><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>     <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>io<span class="token punctuation">.</span>jsonwebtoken<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>     <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>jjwt<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>     <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">0.9</span><span class="token number">.1</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æµ‹è¯•ç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfigurationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHeaderParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">HeaderParser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡ŒtestHeaderParser()æµ‹è¯•æ–¹æ³•ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101933926.png"></p><p>å› ä¸ºio.jsonwebtoken.Jwtså­—èŠ‚ç æ–‡ä»¶åœ¨å¯åŠ¨SpringBootç¨‹åºæ—¶å·²å­˜åœ¨ï¼Œæ‰€ä»¥åˆ›å»ºHeaderParserå¯¹è±¡å¹¶æ³¨å†Œåˆ°IOCå®¹å™¨ä¸­ã€‚</p></blockquote><ul><li>@ConditionalOnMissingBeanæ³¨è§£</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeaderConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token annotation punctuation">@ConditionalOnMissingBean</span> <span class="token comment">//ä¸å­˜åœ¨è¯¥ç±»å‹çš„beanï¼Œæ‰ä¼šå°†è¯¥beanåŠ å…¥IOCå®¹å™¨</span>    <span class="token keyword">public</span> <span class="token class-name">HeaderParser</span> <span class="token function">headerParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HeaderParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡ŒtestHeaderParser()æµ‹è¯•æ–¹æ³•ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101933085.png"></p><p>SpringBootåœ¨è°ƒç”¨@Beanæ ‡è¯†çš„headerParser()å‰ï¼ŒIOCå®¹å™¨ä¸­æ˜¯æ²¡æœ‰HeaderParserç±»å‹çš„beanï¼Œæ‰€ä»¥HeaderParserå¯¹è±¡æ­£å¸¸åˆ›å»ºï¼Œå¹¶æ³¨å†Œåˆ°IOCå®¹å™¨ä¸­ã€‚</p></blockquote><p>å†æ¬¡ä¿®æ”¹@ConditionalOnMissingBeanæ³¨è§£ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeaderConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"deptController2"</span><span class="token punctuation">)</span><span class="token comment">//ä¸å­˜åœ¨æŒ‡å®šåç§°çš„beanï¼Œæ‰ä¼šå°†è¯¥beanåŠ å…¥IOCå®¹å™¨</span>    <span class="token keyword">public</span> <span class="token class-name">HeaderParser</span> <span class="token function">headerParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HeaderParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡ŒtestHeaderParser()æµ‹è¯•æ–¹æ³•ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101933028.png"></p><p>å› ä¸ºåœ¨SpringBootç¯å¢ƒä¸­ä¸å­˜åœ¨åå­—å«deptController2çš„beanå¯¹è±¡ï¼Œæ‰€ä»¥åˆ›å»ºHeaderParserå¯¹è±¡å¹¶æ³¨å†Œåˆ°IOCå®¹å™¨ä¸­ã€‚</p></blockquote><p>å†æ¬¡ä¿®æ”¹@ConditionalOnMissingBeanæ³¨è§£ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeaderConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">HeaderConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token comment">//ä¸å­˜åœ¨æŒ‡å®šç±»å‹çš„beanï¼Œæ‰ä¼šå°†beanåŠ å…¥IOCå®¹å™¨</span>    <span class="token keyword">public</span> <span class="token class-name">HeaderParser</span> <span class="token function">headerParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HeaderParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfigurationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHeaderParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">HeaderParser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡ŒtestHeaderParser()æµ‹è¯•æ–¹æ³•ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101933503.png"></p><p>å› ä¸ºHeaderConfigç±»ä¸­æ·»åŠ @Configurationæ³¨è§£ï¼Œè€Œ@Configurationæ³¨è§£ä¸­åŒ…å«äº†@Componentï¼Œæ‰€ä»¥SpringBootå¯åŠ¨æ—¶ä¼šåˆ›å»ºHeaderConfigç±»å¯¹è±¡ï¼Œå¹¶æ³¨å†Œåˆ°IOCå®¹å™¨ä¸­ã€‚</p><p>å½“IOCå®¹å™¨ä¸­æœ‰HeaderConfigç±»å‹çš„beanå­˜åœ¨æ—¶ï¼Œä¸ä¼šæŠŠåˆ›å»ºHeaderParserå¯¹è±¡æ³¨å†Œåˆ°IOCå®¹å™¨ä¸­ã€‚è€ŒIOCå®¹å™¨ä¸­æ²¡æœ‰HeaderParserç±»å‹çš„å¯¹è±¡æ—¶ï¼Œé€šè¿‡getBean(HeaderParser.class)æ–¹æ³•è·å–beanå¯¹è±¡æ—¶ï¼Œå¼•å‘å¼‚å¸¸ï¼šNoSuchBeanDefinitionException</p></blockquote><ul><li>@ConditionalOnPropertyæ³¨è§£ï¼ˆè¿™ä¸ªæ³¨è§£å’Œé…ç½®æ–‡ä»¶å½“ä¸­é…ç½®çš„å±æ€§æœ‰å…³ç³»ï¼‰</li></ul><p>å…ˆåœ¨application.ymlé…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹çš„é”®å€¼å¯¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> itheima<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨å£°æ˜beançš„æ—¶å€™å°±å¯ä»¥æŒ‡å®šä¸€ä¸ªæ¡ä»¶@ConditionalOnProperty</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeaderConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span><span class="token string">"name"</span><span class="token punctuation">,</span>havingValue <span class="token operator">=</span> <span class="token string">"itheima"</span><span class="token punctuation">)</span><span class="token comment">//é…ç½®æ–‡ä»¶ä¸­å­˜åœ¨æŒ‡å®šå±æ€§åä¸å€¼ï¼Œæ‰ä¼šå°†beanåŠ å…¥IOCå®¹å™¨</span>    <span class="token keyword">public</span> <span class="token class-name">HeaderParser</span> <span class="token function">headerParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HeaderParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">HeaderGenerator</span> <span class="token function">headerGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HeaderGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡ŒtestHeaderParser()æµ‹è¯•æ–¹æ³•ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101933031.png"></p></blockquote><p>ä¿®æ”¹@ConditionalOnPropertyæ³¨è§£ï¼š  havingValueçš„å€¼ä¿®æ”¹ä¸ºâ€itheima2â€</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span><span class="token string">"name"</span><span class="token punctuation">,</span>havingValue <span class="token operator">=</span> <span class="token string">"itheima2"</span><span class="token punctuation">)</span><span class="token comment">//é…ç½®æ–‡ä»¶ä¸­å­˜åœ¨æŒ‡å®šå±æ€§åä¸å€¼ï¼Œæ‰ä¼šå°†beanåŠ å…¥IOCå®¹å™¨</span><span class="token keyword">public</span> <span class="token class-name">HeaderParser</span> <span class="token function">headerParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HeaderParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å†æ¬¡æ‰§è¡ŒtestHeaderParser()æµ‹è¯•æ–¹æ³•ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101933433.png"></p><p>å› ä¸ºapplication.ymlé…ç½®æ–‡ä»¶ä¸­ï¼Œä¸å­˜åœ¨ï¼š name:  itheima2ï¼Œæ‰€ä»¥HeaderParserå¯¹è±¡åœ¨IOCå®¹å™¨ä¸­ä¸å­˜åœ¨</p></blockquote><p>æˆ‘ä»¬å†å›å¤´çœ‹çœ‹ä¹‹å‰è®²è§£SpringBootæºç æ—¶æåˆ°çš„ä¸€ä¸ªé…ç½®ç±»ï¼šGsonAutoConfiguration</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101934548.png"></p><p>æœ€åå†ç»™å¤§å®¶æ¢³ç†ä¸€ä¸‹è‡ªåŠ¨é…ç½®åŸç†ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101934541.png"></p><blockquote><p>è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒå°±åœ¨@SpringBootApplicationæ³¨è§£ä¸Šï¼ŒSpringBootApplicationè¿™ä¸ªæ³¨è§£åº•å±‚åŒ…å«äº†3ä¸ªæ³¨è§£ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li><p>@SpringBootConfiguration</p></li><li><p>@ComponentScan</p></li><li><p>@EnableAutoConfiguration</p></li></ul><p>@EnableAutoConfigurationè¿™ä¸ªæ³¨è§£æ‰æ˜¯è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒã€‚</p><ul><li>å®ƒå°è£…äº†ä¸€ä¸ª@Importæ³¨è§£ï¼ŒImportæ³¨è§£é‡Œé¢æŒ‡å®šäº†ä¸€ä¸ªImportSelectoræ¥å£çš„å®ç°ç±»ã€‚</li><li>åœ¨è¿™ä¸ªå®ç°ç±»ä¸­ï¼Œé‡å†™äº†ImportSelectoræ¥å£ä¸­çš„selectImports()æ–¹æ³•ã€‚</li><li>è€ŒselectImports()æ–¹æ³•ä¸­ä¼šå»è¯»å–ä¸¤ä»½é…ç½®æ–‡ä»¶ï¼Œå¹¶å°†é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„é…ç½®ç±»åšä¸ºselectImports()æ–¹æ³•çš„è¿”å›å€¼è¿”å›ï¼Œè¿”å›å€¼ä»£è¡¨çš„å°±æ˜¯éœ€è¦å°†å“ªäº›ç±»äº¤ç»™Springçš„IOCå®¹å™¨è¿›è¡Œç®¡ç†ã€‚</li><li>é‚£ä¹ˆæ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»çš„ä¸­å£°æ˜çš„beanéƒ½ä¼šåŠ è½½åˆ°Springçš„IOCå®¹å™¨ä¸­å—? å…¶å®å¹¶ä¸ä¼šï¼Œå› ä¸ºè¿™äº›é…ç½®ç±»ä¸­åœ¨å£°æ˜beanæ—¶ï¼Œé€šå¸¸éƒ½ä¼šæ·»åŠ @Conditionalå¼€å¤´çš„æ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£å°±æ˜¯è¿›è¡Œæ¡ä»¶è£…é…ã€‚è€ŒSpringä¼šæ ¹æ®Conditionalæ³¨è§£æœ‰é€‰æ‹©æ€§çš„è¿›è¡Œbeançš„åˆ›å»ºã€‚</li><li>@Enable å¼€å¤´çš„æ³¨è§£åº•å±‚ï¼Œå®ƒå°±å°è£…äº†ä¸€ä¸ªæ³¨è§£ import æ³¨è§£ï¼Œå®ƒé‡Œé¢æŒ‡å®šäº†ä¸€ä¸ªç±»ï¼Œæ˜¯ ImportSelector æ¥å£çš„å®ç°ç±»ã€‚åœ¨å®ç°ç±»å½“ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å»å®ç° ImportSelector  æ¥å£å½“ä¸­çš„ä¸€ä¸ªæ–¹æ³• selectImports è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ä»£è¡¨çš„å°±æ˜¯æˆ‘éœ€è¦å°†å“ªäº›ç±»äº¤ç»™ spring çš„ IOCå®¹å™¨è¿›è¡Œç®¡ç†ã€‚</li><li>æ­¤æ—¶å®ƒä¼šå»è¯»å–ä¸¤ä»½é…ç½®æ–‡ä»¶ï¼Œä¸€ä»½å„¿æ˜¯ spring.factoriesï¼Œå¦å¤–ä¸€ä»½å„¿æ˜¯ autoConfiguration.importsã€‚è€Œåœ¨  autoConfiguration.imports è¿™ä»½å„¿æ–‡ä»¶å½“ä¸­ï¼Œå®ƒå°±ä¼šå»é…ç½®å¤§é‡çš„è‡ªåŠ¨é…ç½®çš„ç±»ã€‚</li><li>è€Œå‰é¢æˆ‘ä»¬ä¹Ÿæåˆ°è¿‡è¿™äº›æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±»å½“ä¸­ï¼Œæ‰€æœ‰çš„ beanéƒ½ä¼šåŠ è½½åˆ° spring çš„ IOC å®¹å™¨å½“ä¸­å—ï¼Ÿå…¶å®å¹¶ä¸ä¼šï¼Œå› ä¸ºè¿™äº›é…ç½®ç±»å½“ä¸­ï¼Œåœ¨å£°æ˜ bean çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šåŠ ä¸Šè¿™ä¹ˆä¸€ç±»@Conditional å¼€å¤´çš„æ³¨è§£ã€‚è¿™ä¸ªæ³¨è§£å°±æ˜¯è¿›è¡Œæ¡ä»¶è£…é…ã€‚æ‰€ä»¥SpringBootéå¸¸çš„æ™ºèƒ½ï¼Œå®ƒä¼šæ ¹æ® @Conditional æ³¨è§£æ¥è¿›è¡Œæ¡ä»¶è£…é…ã€‚åªæœ‰æ¡ä»¶æˆç«‹ï¼Œå®ƒæ‰ä¼šå£°æ˜è¿™ä¸ªbeanï¼Œæ‰ä¼šå°†è¿™ä¸ª bean äº¤ç»™ IOC å®¹å™¨ç®¡ç†ã€‚</li></ul></blockquote><h4 id="3-2-4-æ¡ˆä¾‹"><a href="#3-2-4-æ¡ˆä¾‹" class="headerlink" title="3.2.4 æ¡ˆä¾‹"></a>3.2.4 æ¡ˆä¾‹</h4><h5 id="3-2-4-1-è‡ªå®šä¹‰starteråˆ†æ"><a href="#3-2-4-1-è‡ªå®šä¹‰starteråˆ†æ" class="headerlink" title="3.2.4.1 è‡ªå®šä¹‰starteråˆ†æ"></a>3.2.4.1 è‡ªå®šä¹‰starteråˆ†æ</h5><p>å‰é¢æˆ‘ä»¬è§£æäº†SpringBootä¸­è‡ªåŠ¨é…ç½®çš„åŸç†ï¼Œä¸‹é¢æˆ‘ä»¬å°±é€šè¿‡ä¸€ä¸ªè‡ªå®šä¹‰starteræ¡ˆä¾‹æ¥åŠ æ·±å¤§å®¶å¯¹äºè‡ªåŠ¨é…ç½®åŸç†çš„ç†è§£ã€‚é¦–å…ˆä»‹ç»ä¸€ä¸‹è‡ªå®šä¹‰starterçš„ä¸šåŠ¡åœºæ™¯ï¼Œå†æ¥åˆ†æä¸€ä¸‹å…·ä½“çš„æ“ä½œæ­¥éª¤ã€‚</p><p>æ‰€è°“starteræŒ‡çš„å°±æ˜¯SpringBootå½“ä¸­çš„èµ·æ­¥ä¾èµ–ã€‚åœ¨SpringBootå½“ä¸­å·²ç»ç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šçš„èµ·æ­¥ä¾èµ–äº†ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜éœ€è¦è‡ªå®šä¹‰ starter èµ·æ­¥ä¾èµ–ï¼Ÿè¿™æ˜¯å› ä¸ºåœ¨å®é™…çš„é¡¹ç›®å¼€å‘å½“ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šç”¨åˆ°å¾ˆå¤šç¬¬ä¸‰æ–¹çš„æŠ€æœ¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç¬¬ä¸‰æ–¹çš„æŠ€æœ¯å®˜æ–¹éƒ½ç»™æˆ‘ä»¬æä¾›äº†ä¸SpringBootæ•´åˆçš„starterèµ·æ­¥ä¾èµ–ï¼Œä½†æ˜¯è¿™äº›æŠ€æœ¯åˆéå¸¸çš„é€šç”¨ï¼Œåœ¨å¾ˆå¤šé¡¹ç›®ç»„å½“ä¸­éƒ½åœ¨ä½¿ç”¨ã€‚</p><p>ä¸šåŠ¡åœºæ™¯ï¼š</p><ul><li>æˆ‘ä»¬å‰é¢æ¡ˆä¾‹å½“ä¸­æ‰€ä½¿ç”¨çš„é˜¿é‡Œäº‘OSSå¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œç°åœ¨é˜¿é‡Œäº‘çš„å®˜æ–¹æ˜¯æ²¡æœ‰ç»™æˆ‘ä»¬æä¾›å¯¹åº”çš„èµ·æ­¥ä¾èµ–çš„ï¼Œè¿™ä¸ªæ—¶å€™ä½¿ç”¨èµ·æ¥å°±ä¼šæ¯”è¾ƒç¹çï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥å¯¹åº”çš„ä¾èµ–ã€‚æˆ‘ä»¬è¿˜éœ€è¦åœ¨é…ç½®æ–‡ä»¶å½“ä¸­è¿›è¡Œé…ç½®ï¼Œè¿˜éœ€è¦åŸºäºå®˜æ–¹SDKç¤ºä¾‹æ¥æ”¹é€ å¯¹åº”çš„å·¥å…·ç±»ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®å½“ä¸­æ‰å¯ä»¥è¿›è¡Œä½¿ç”¨ã€‚</li><li>å¤§å®¶æƒ³åœ¨æˆ‘ä»¬å½“å‰é¡¹ç›®å½“ä¸­ä½¿ç”¨äº†é˜¿é‡Œäº‘OSSï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œè¿™ä¹ˆå¤šæ­¥çš„æ“ä½œã€‚åœ¨åˆ«çš„é¡¹ç›®ç»„å½“ä¸­è¦æƒ³ä½¿ç”¨é˜¿é‡Œäº‘OSSï¼Œæ˜¯ä¸æ˜¯ä¹Ÿéœ€è¦è¿›è¡Œè¿™ä¹ˆå¤šæ­¥çš„æ“ä½œï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è‡ªå®šä¹‰ä¸€äº›å…¬å…±ç»„ä»¶ï¼Œåœ¨è¿™äº›å…¬å…±ç»„ä»¶å½“ä¸­ï¼Œæˆ‘å°±å¯ä»¥æå‰æŠŠéœ€è¦é…ç½®çš„beanéƒ½æå‰é…ç½®å¥½ã€‚å°†æ¥åœ¨é¡¹ç›®å½“ä¸­ï¼Œæˆ‘è¦æƒ³ä½¿ç”¨è¿™ä¸ªæŠ€æœ¯ï¼Œæˆ‘ç›´æ¥å°†ç»„ä»¶å¯¹åº”çš„åæ ‡ç›´æ¥å¼•å…¥è¿›æ¥ï¼Œå°±å·²ç»è‡ªåŠ¨é…ç½®å¥½äº†ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå…¬å…±ç»„ä»¶æä¾›ç»™åˆ«çš„é¡¹ç›®ç»„è¿›è¡Œä½¿ç”¨ï¼Œè¿™æ ·å°±å¯ä»¥å¤§å¤§çš„ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘ã€‚</li></ul><p>åœ¨SpringBooté¡¹ç›®ä¸­ï¼Œä¸€èˆ¬éƒ½ä¼šå°†è¿™äº›å…¬å…±ç»„ä»¶å°è£…ä¸ºSpringBootå½“ä¸­çš„starterï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„èµ·æ­¥ä¾èµ–ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101934516.png"></p><blockquote><p>SpringBootå®˜æ–¹starterå‘½åï¼š spring-boot-starter-xxxx</p><p>ç¬¬ä¸‰ç»„ç»‡æä¾›çš„starterå‘½åï¼š  xxxx-spring-boot-starter</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101934615.png"></p><blockquote><p>Mybatisæä¾›äº†é…ç½®ç±»ï¼Œå¹¶ä¸”ä¹Ÿæä¾›äº†springbootä¼šè‡ªåŠ¨è¯»å–çš„é…ç½®æ–‡ä»¶ã€‚å½“SpringBooté¡¹ç›®å¯åŠ¨æ—¶ï¼Œä¼šè¯»å–åˆ°spring.factoriesé…ç½®æ–‡ä»¶ä¸­çš„é…ç½®ç±»å¹¶åŠ è½½é…ç½®ç±»ï¼Œç”Ÿæˆç›¸å…³beanå¯¹è±¡æ³¨å†Œåˆ°IOCå®¹å™¨ä¸­ã€‚</p><p>ç»“æœï¼šæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨SpringBootç¨‹åºä¸­ä½¿ç”¨Mybatisè‡ªåŠ¨é…ç½®çš„beanå¯¹è±¡ã€‚</p></blockquote><p>åœ¨è‡ªå®šä¹‰ä¸€ä¸ªèµ·æ­¥ä¾èµ–starterçš„æ—¶å€™ï¼ŒæŒ‰ç…§è§„èŒƒéœ€è¦å®šä¹‰ä¸¤ä¸ªæ¨¡å—ï¼š</p><ol><li>starteræ¨¡å—ï¼ˆè¿›è¡Œä¾èµ–ç®¡ç†[æŠŠç¨‹åºå¼€å‘æ‰€éœ€è¦çš„ä¾èµ–éƒ½å®šä¹‰åœ¨starterèµ·æ­¥ä¾èµ–ä¸­]ï¼‰</li><li>autoconfigureæ¨¡å—ï¼ˆè‡ªåŠ¨é…ç½®ï¼‰</li></ol><blockquote><p>å°†æ¥åœ¨é¡¹ç›®å½“ä¸­è¿›è¡Œç›¸å…³åŠŸèƒ½å¼€å‘æ—¶ï¼Œåªéœ€è¦å¼•å…¥ä¸€ä¸ªèµ·æ­¥ä¾èµ–å°±å¯ä»¥äº†ï¼Œå› ä¸ºå®ƒä¼šå°†autoconfigureè‡ªåŠ¨é…ç½®çš„ä¾èµ–ç»™ä¼ é€’ä¸‹æ¥ã€‚</p></blockquote><p>ä¸Šé¢æˆ‘ä»¬ç®€å•ä»‹ç»äº†è‡ªå®šä¹‰starterçš„åœºæ™¯ï¼Œä»¥åŠè‡ªå®šä¹‰starteræ—¶æ¶‰åŠåˆ°çš„æ¨¡å—ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å®Œæˆä¸€ä¸ªè‡ªå®šä¹‰starterçš„æ¡ˆä¾‹ã€‚</p><p>éœ€æ±‚ï¼šè‡ªå®šä¹‰aliyun-oss-spring-boot-starterï¼Œå®Œæˆé˜¿é‡Œäº‘OSSæ“ä½œå·¥å…·ç±»AliyunOSSUtilsçš„è‡ªåŠ¨é…ç½®ã€‚</p><p>ç›®æ ‡ï¼šå¼•å…¥èµ·æ­¥ä¾èµ–å¼•å…¥ä¹‹åï¼Œè¦æƒ³ä½¿ç”¨é˜¿é‡Œäº‘OSSï¼Œæ³¨å…¥AliyunOSSUtilsç›´æ¥ä½¿ç”¨å³å¯ã€‚</p><p>ä¹‹å‰é˜¿é‡Œäº‘OSSçš„ä½¿ç”¨ï¼š</p><ul><li>é…ç½®æ–‡ä»¶</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#é…ç½®é˜¿é‡Œäº‘OSSå‚æ•°</span><span class="token key atrule">aliyun</span><span class="token punctuation">:</span>  <span class="token key atrule">oss</span><span class="token punctuation">:</span>    <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>     <span class="token key atrule">accessKeyId</span><span class="token punctuation">:</span>     <span class="token key atrule">accessKeySecret</span><span class="token punctuation">:</span>     <span class="token key atrule">bucketName</span><span class="token punctuation">:</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>AliOSSPropertiesç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"aliyun.oss"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliOSSProperties</span> <span class="token punctuation">{</span>    <span class="token comment">//åŒºåŸŸ</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> endpoint<span class="token punctuation">;</span>    <span class="token comment">//èº«ä»½ID</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeyId <span class="token punctuation">;</span>    <span class="token comment">//èº«ä»½å¯†é’¥</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeySecret <span class="token punctuation">;</span>    <span class="token comment">//å­˜å‚¨ç©ºé—´</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> bucketName<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>AliOSSUtilså·¥å…·ç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span> <span class="token comment">//å½“å‰ç±»å¯¹è±¡ç”±Springåˆ›å»ºå’Œç®¡ç†</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliOSSUtils</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">AliOSSProperties</span> aliOSSProperties<span class="token punctuation">;</span>    <span class="token comment">/**     * å®ç°ä¸Šä¼ å›¾ç‰‡åˆ°OSS     */</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> multipartFile<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        <span class="token comment">// è·å–ä¸Šä¼ çš„æ–‡ä»¶çš„è¾“å…¥æµ</span>        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> multipartFile<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é¿å…æ–‡ä»¶è¦†ç›–</span>        <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> multipartFile<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> originalFilename<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>originalFilename<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ä¸Šä¼ æ–‡ä»¶åˆ° OSS</span>        <span class="token class-name">OSS</span> ossClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSSClientBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>aliOSSProperties<span class="token punctuation">.</span><span class="token function">getEndpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                aliOSSProperties<span class="token punctuation">.</span><span class="token function">getAccessKeyId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> aliOSSProperties<span class="token punctuation">.</span><span class="token function">getAccessKeySecret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span>aliOSSProperties<span class="token punctuation">.</span><span class="token function">getBucketName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ–‡ä»¶è®¿é—®è·¯å¾„</span>        <span class="token class-name">String</span> url <span class="token operator">=</span>aliOSSProperties<span class="token punctuation">.</span><span class="token function">getEndpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"//"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"//"</span> <span class="token operator">+</span> aliOSSProperties<span class="token punctuation">.</span><span class="token function">getBucketName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span> aliOSSProperties<span class="token punctuation">.</span><span class="token function">getEndpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"//"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> fileName<span class="token punctuation">;</span>        <span class="token comment">// å…³é—­ossClient</span>        ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> url<span class="token punctuation">;</span><span class="token comment">// æŠŠä¸Šä¼ åˆ°ossçš„è·¯å¾„è¿”å›</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“æˆ‘ä»¬åœ¨é¡¹ç›®å½“ä¸­è¦ä½¿ç”¨é˜¿é‡Œäº‘OSSï¼Œå°±å¯ä»¥æ³¨å…¥AliOSSUtilså·¥å…·ç±»æ¥è¿›è¡Œæ–‡ä»¶ä¸Šä¼ ã€‚ä½†è¿™ç§æ–¹å¼å…¶å®æ˜¯æ¯”è¾ƒç¹ççš„ã€‚</p><p>å¤§å®¶å†æ€è€ƒï¼Œç°åœ¨æˆ‘ä»¬ä½¿ç”¨é˜¿é‡Œäº‘OSSï¼Œéœ€è¦åšè¿™ä¹ˆå‡ æ­¥ï¼Œå°†æ¥å¤§å®¶åœ¨å¼€å‘å…¶ä»–çš„é¡¹ç›®çš„æ—¶å€™ï¼Œä½ ä½¿ç”¨é˜¿é‡Œäº‘OSSï¼Œè¿™å‡ æ­¥ä½ è¦ä¸è¦åšï¼Ÿå½“å›¢é˜Ÿä¸­å…¶ä»–å°ä¼™ä¼´ä¹Ÿåœ¨ä½¿ç”¨é˜¿é‡Œäº‘OSSçš„æ—¶å€™ï¼Œæ­¥éª¤ ä¸ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p><p>æ‰€ä»¥è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥åˆ¶ä½œä¸€ä¸ªå…¬å…±ç»„ä»¶(è‡ªå®šä¹‰starter)ã€‚starterå®šä¹‰å¥½ä¹‹åï¼Œå°†æ¥è¦ä½¿ç”¨é˜¿é‡Œäº‘OSSè¿›è¡Œæ–‡ä»¶ä¸Šä¼ ï¼Œåªéœ€è¦å°†èµ·æ­¥ä¾èµ–å¼•å…¥è¿›æ¥ä¹‹åï¼Œå°±å¯ä»¥ç›´æ¥æ³¨å…¥AliOSSUtilsä½¿ç”¨äº†ã€‚</p><p>éœ€æ±‚æ˜ç¡®äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥åˆ†æä¸€ä¸‹å…·ä½“çš„å®ç°æ­¥éª¤ï¼š</p><ul><li>ç¬¬1æ­¥ï¼šåˆ›å»ºè‡ªå®šä¹‰starteræ¨¡å—ï¼ˆè¿›è¡Œä¾èµ–ç®¡ç†ï¼‰<ul><li>æŠŠé˜¿é‡Œäº‘OSSæ‰€æœ‰çš„ä¾èµ–ç»Ÿä¸€ç®¡ç†èµ·æ¥</li></ul></li><li>ç¬¬2æ­¥ï¼šåˆ›å»ºautoconfigureæ¨¡å—<ul><li>åœ¨starterä¸­å¼•å…¥autoconfigure ï¼ˆæˆ‘ä»¬ä½¿ç”¨æ—¶åªéœ€è¦å¼•å…¥starterèµ·æ­¥ä¾èµ–å³å¯ï¼‰</li></ul></li><li>ç¬¬3æ­¥ï¼šåœ¨autoconfigureä¸­å®Œæˆè‡ªåŠ¨é…ç½®<ol><li>å®šä¹‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼Œåœ¨è‡ªåŠ¨é…ç½®ç±»ä¸­å°†æ‰€è¦é…ç½®çš„beanéƒ½æå‰é…ç½®å¥½</li><li>å®šä¹‰é…ç½®æ–‡ä»¶ï¼ŒæŠŠè‡ªåŠ¨é…ç½®ç±»çš„å…¨ç±»åå®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­</li></ol></li></ul><p>æˆ‘ä»¬åˆ†æå®Œè‡ªå®šä¹‰é˜¿é‡Œäº‘OSSè‡ªåŠ¨é…ç½®çš„æ“ä½œæ­¥éª¤äº†ï¼Œä¸‹é¢æˆ‘ä»¬å°±æŒ‰ç…§åˆ†æçš„æ­¥éª¤æ¥å®ç°è‡ªå®šä¹‰starterã€‚</p><h5 id="3-2-4-2-è‡ªå®šä¹‰starterå®ç°"><a href="#3-2-4-2-è‡ªå®šä¹‰starterå®ç°" class="headerlink" title="3.2.4.2 è‡ªå®šä¹‰starterå®ç°"></a>3.2.4.2 è‡ªå®šä¹‰starterå®ç°</h5><p>è‡ªå®šä¹‰starterçš„æ­¥éª¤æˆ‘ä»¬åˆšæ‰å·²ç»åˆ†æäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æŒ‰ç…§åˆ†æçš„æ­¥éª¤æ¥å®Œæˆè‡ªå®šä¹‰starterçš„å¼€å‘ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬å…ˆæ¥åˆ›å»ºä¸¤ä¸ªMavenæ¨¡å—ï¼š</p><p>1). aliyun-oss-spring-boot-starteræ¨¡å—</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101935688.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101935594.png"></p><p>åˆ›å»ºå®Œstarteræ¨¡å—åï¼Œåˆ é™¤å¤šä½™çš„æ–‡ä»¶ï¼Œæœ€ç»ˆä¿ç•™å†…å®¹å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101935182.png"></p><p>åˆ é™¤pom.xmlæ–‡ä»¶ä¸­å¤šä½™çš„å†…å®¹åï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-oss-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2). aliyun-oss-spring-boot-autoconfigureæ¨¡å—</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101936006.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101936597.png"></p><p>åˆ›å»ºå®Œstarteræ¨¡å—åï¼Œåˆ é™¤å¤šä½™çš„æ–‡ä»¶ï¼Œæœ€ç»ˆä¿ç•™å†…å®¹å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101936260.png"></p><p>åˆ é™¤pom.xmlæ–‡ä»¶ä¸­å¤šä½™çš„å†…å®¹åï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-oss-spring-boot-autoconfigure<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æŒ‰ç…§æˆ‘ä»¬ä¹‹å‰çš„åˆ†æï¼Œæ˜¯éœ€è¦åœ¨starteræ¨¡å—ä¸­æ¥å¼•å…¥autoconfigureè¿™ä¸ªæ¨¡å—çš„ã€‚æ‰“å¼€starteræ¨¡å—ä¸­çš„pomæ–‡ä»¶ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-oss-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--å¼•å…¥autoconfigureæ¨¡å—--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-oss-spring-boot-autoconfigure<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å‰ä¸¤æ­¥å·²ç»å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æ˜¯æœ€å…³é”®çš„å°±æ˜¯ç¬¬ä¸‰æ­¥ï¼š</p><p>åœ¨autoconfigureæ¨¡å—å½“ä¸­æ¥å®Œæˆè‡ªåŠ¨é…ç½®æ“ä½œã€‚</p><blockquote><p> æˆ‘ä»¬å°†ä¹‹å‰æ¡ˆä¾‹ä¸­æ‰€ä½¿ç”¨çš„é˜¿é‡Œäº‘OSSéƒ¨åˆ†çš„ä»£ç ç›´æ¥æ‹·è´åˆ°autoconfigureæ¨¡å—ä¸‹ï¼Œç„¶åè¿›è¡Œæ”¹é€ å°±è¡Œäº†ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101936996.png"></p><p>æ‹·è´è¿‡æ¥åï¼Œè¿˜ç¼ºå¤±ä¸€äº›ç›¸å…³çš„ä¾èµ–ï¼Œéœ€è¦æŠŠç›¸å…³ä¾èµ–ä¹Ÿæ‹·è´è¿‡æ¥ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-oss-spring-boot-autoconfigure<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--å¼•å…¥webèµ·æ­¥ä¾èµ–--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--Lombok--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--é˜¿é‡Œäº‘OSS--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-sdk-oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.15.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.xml.bind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jaxb-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>activation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- no more than 2.3.3--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.glassfish.jaxb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jaxb-runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç°åœ¨å¤§å®¶æ€è€ƒä¸‹ï¼Œåœ¨ç±»ä¸Šæ·»åŠ çš„@Componentæ³¨è§£è¿˜æœ‰ç”¨å—ï¼Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101936645.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101936268.png"></p><p>ç­”æ¡ˆï¼šæ²¡ç”¨äº†ã€‚  åœ¨SpringBooté¡¹ç›®ä¸­ï¼Œå¹¶ä¸ä¼šå»æ‰«æcom.aliyun.ossè¿™ä¸ªåŒ…ï¼Œä¸æ‰«æè¿™ä¸ªåŒ…é‚£ç±»ä¸Šçš„æ³¨è§£ä¹Ÿå°±å¤±å»äº†ä½œç”¨ã€‚</p><blockquote><p>@Componentæ³¨è§£ä¸éœ€è¦ä½¿ç”¨äº†ï¼Œå¯ä»¥ä»ç±»ä¸Šåˆ é™¤äº†ã€‚</p><p>åˆ é™¤åæŠ¥çº¢è‰²é”™è¯¯ï¼Œæš‚æ—¶ä¸ç†ä¼šï¼Œåé¢å†æ¥å¤„ç†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101936552.png"></p><p>åˆ é™¤AliOSSUtilsç±»ä¸­çš„@Componentæ³¨è§£ã€@Autowiredæ³¨è§£</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101937245.png"></p></blockquote><p>ä¸‹é¢æˆ‘ä»¬å°±è¦å®šä¹‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»äº†ï¼Œåœ¨è‡ªåŠ¨é…ç½®ç±»å½“ä¸­æ¥å£°æ˜AliOSSUtilsçš„beanå¯¹è±¡ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101937720.png"></p><p> AliOSSAutoConfigurationç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token comment">//å½“å‰ç±»ä¸ºSpringé…ç½®ç±»</span><span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">AliOSSProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token comment">//å¯¼å…¥AliOSSPropertiesç±»ï¼Œå¹¶äº¤ç»™SpringIOCç®¡ç†</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliOSSAutoConfiguration</span> <span class="token punctuation">{</span>    <span class="token comment">//åˆ›å»ºAliOSSUtilså¯¹è±¡ï¼Œå¹¶äº¤ç»™SpringIOCå®¹å™¨</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">AliOSSUtils</span> <span class="token function">aliOSSUtils</span><span class="token punctuation">(</span><span class="token class-name">AliOSSProperties</span> aliOSSProperties<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">AliOSSUtils</span> aliOSSUtils <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AliOSSUtils</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        aliOSSUtils<span class="token punctuation">.</span><span class="token function">setAliOSSProperties</span><span class="token punctuation">(</span>aliOSSProperties<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> aliOSSUtils<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>AliOSSPropertiesç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*é˜¿é‡Œäº‘OSSç›¸å…³é…ç½®*/</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"aliyun.oss"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliOSSProperties</span> <span class="token punctuation">{</span>    <span class="token comment">//åŒºåŸŸ</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> endpoint<span class="token punctuation">;</span>    <span class="token comment">//èº«ä»½ID</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeyId <span class="token punctuation">;</span>    <span class="token comment">//èº«ä»½å¯†é’¥</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeySecret <span class="token punctuation">;</span>    <span class="token comment">//å­˜å‚¨ç©ºé—´</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> bucketName<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>AliOSSUtilsç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliOSSUtils</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">AliOSSProperties</span> aliOSSProperties<span class="token punctuation">;</span>    <span class="token comment">/**     * å®ç°ä¸Šä¼ å›¾ç‰‡åˆ°OSS     */</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> multipartFile<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        <span class="token comment">// è·å–ä¸Šä¼ çš„æ–‡ä»¶çš„è¾“å…¥æµ</span>        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> multipartFile<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é¿å…æ–‡ä»¶è¦†ç›–</span>        <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> multipartFile<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> originalFilename<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>originalFilename<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ä¸Šä¼ æ–‡ä»¶åˆ° OSS</span>        <span class="token class-name">OSS</span> ossClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSSClientBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>aliOSSProperties<span class="token punctuation">.</span><span class="token function">getEndpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                aliOSSProperties<span class="token punctuation">.</span><span class="token function">getAccessKeyId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> aliOSSProperties<span class="token punctuation">.</span><span class="token function">getAccessKeySecret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span>aliOSSProperties<span class="token punctuation">.</span><span class="token function">getBucketName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ–‡ä»¶è®¿é—®è·¯å¾„</span>        <span class="token class-name">String</span> url <span class="token operator">=</span>aliOSSProperties<span class="token punctuation">.</span><span class="token function">getEndpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"//"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"//"</span> <span class="token operator">+</span> aliOSSProperties<span class="token punctuation">.</span><span class="token function">getBucketName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span> aliOSSProperties<span class="token punctuation">.</span><span class="token function">getEndpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"//"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> fileName<span class="token punctuation">;</span>        <span class="token comment">// å…³é—­ossClient</span>        ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> url<span class="token punctuation">;</span><span class="token comment">// æŠŠä¸Šä¼ åˆ°ossçš„è·¯å¾„è¿”å›</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨aliyun-oss-spring-boot-autoconfigureæ¨¡å—ä¸­çš„resourcesä¸‹ï¼Œæ–°å»ºè‡ªåŠ¨é…ç½®æ–‡ä»¶ï¼š</p><ul><li><p>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span>AliOSSAutoConfiguration</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101937031.png"></p><h5 id="3-2-4-3-è‡ªå®šä¹‰starteræµ‹è¯•"><a href="#3-2-4-3-è‡ªå®šä¹‰starteræµ‹è¯•" class="headerlink" title="3.2.4.3 è‡ªå®šä¹‰starteræµ‹è¯•"></a>3.2.4.3 è‡ªå®šä¹‰starteræµ‹è¯•</h5><p>é˜¿é‡Œäº‘OSSçš„starteræˆ‘ä»¬åˆšæ‰å·²ç»å®šä¹‰å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥åšä¸€ä¸ªæµ‹è¯•ã€‚</p><blockquote><p>ä»Šå¤©çš„è¯¾ç¨‹èµ„æ–™å½“ä¸­ï¼Œæä¾›äº†ä¸€ä¸ªè‡ªå®šä¹‰starterçš„æµ‹è¯•å·¥ç¨‹ã€‚æˆ‘ä»¬ç›´æ¥æ‰“å¼€æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªæµ‹è¯•å·¥ç¨‹ã€‚æµ‹è¯•å·¥ç¨‹å°±æ˜¯springboot-autoconfiguration-testï¼Œæˆ‘ä»¬åªéœ€è¦å°†æµ‹è¯•å·¥ç¨‹ç›´æ¥å¯¼å…¥åˆ°Ideaå½“ä¸­å³å¯ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101937324.png"></p><p>æµ‹è¯•å‰å‡†å¤‡ï¼š</p><ol><li><p>åœ¨testå·¥ç¨‹ä¸­å¼•å…¥é˜¿é‡Œäº‘starterä¾èµ–</p><ul><li>é€šè¿‡ä¾èµ–ä¼ é€’ï¼Œä¼šæŠŠautoconfigureä¾èµ–ä¹Ÿå¼•å…¥äº†</li></ul><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--å¼•å…¥é˜¿é‡Œäº‘OSSèµ·æ­¥ä¾èµ–--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-oss-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>åœ¨testå·¥ç¨‹ä¸­çš„application.ymlæ–‡ä»¶ä¸­ï¼Œé…ç½®é˜¿é‡Œäº‘OSSé…ç½®å‚æ•°ä¿¡æ¯ï¼ˆä»ä»¥å‰çš„å·¥ç¨‹ä¸­æ‹·è´å³å¯ï¼‰</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#é…ç½®é˜¿é‡Œäº‘OSSå‚æ•°</span><span class="token key atrule">aliyun</span><span class="token punctuation">:</span>  <span class="token key atrule">oss</span><span class="token punctuation">:</span>    <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>shanghai.aliyuncs.com    <span class="token key atrule">accessKeyId</span><span class="token punctuation">:</span> LTAI5t9MZK8iq5T2Av5GLDxX    <span class="token key atrule">accessKeySecret</span><span class="token punctuation">:</span> C0IrHzKZGKqU8S7YQcevcotD3Zd5Tc    <span class="token key atrule">bucketName</span><span class="token punctuation">:</span> web<span class="token punctuation">-</span>framework01<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>åœ¨testå·¥ç¨‹ä¸­çš„UploadControllerç±»ç¼–å†™ä»£ç </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UploadController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">AliOSSUtils</span> aliOSSUtils<span class="token punctuation">;</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> image<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">//ä¸Šä¼ æ–‡ä»¶åˆ°é˜¿é‡Œäº‘ OSS</span>        <span class="token class-name">String</span> url <span class="token operator">=</span> aliOSSUtils<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> url<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><p>ç¼–å†™å®Œä»£ç åï¼Œæˆ‘ä»¬å¯åŠ¨å½“å‰çš„SpringBootæµ‹è¯•å·¥ç¨‹ï¼š</p><ul><li>éšç€SpringBooté¡¹ç›®å¯åŠ¨ï¼Œè‡ªåŠ¨é…ç½®ä¼šæŠŠAliOSSUtilsçš„beanå¯¹è±¡è£…é…åˆ°IOCå®¹å™¨ä¸­</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101937590.png"></p><p>ç”¨postmanå·¥å…·è¿›è¡Œæ–‡ä»¶ä¸Šä¼ ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101937112.png"></p><p>é€šè¿‡æ–­ç‚¹å¯ä»¥çœ‹åˆ°è‡ªåŠ¨æ³¨å…¥AliOSSUtilsçš„beanå¯¹è±¡ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101938292.png"></p><h2 id="4-Webåç«¯å¼€å‘æ€»ç»“"><a href="#4-Webåç«¯å¼€å‘æ€»ç»“" class="headerlink" title="4. Webåç«¯å¼€å‘æ€»ç»“"></a>4. Webåç«¯å¼€å‘æ€»ç»“</h2><p>åˆ°æ­¤åŸºäºSpringBootè¿›è¡Œwebåç«¯å¼€å‘çš„ç›¸å…³çŸ¥è¯†æˆ‘ä»¬å·²ç»å­¦ä¹ å®Œæ¯•äº†ã€‚ä¸‹é¢æˆ‘ä»¬ä¸€èµ·é’ˆå¯¹è¿™æ®µwebè¯¾ç¨‹åšä¸€ä¸ªæ€»ç»“ã€‚</p><p>æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹å…³äºwebåç«¯å¼€å‘ï¼Œæˆ‘ä»¬éƒ½å­¦ä¹ äº†å“ªäº›å†…å®¹ï¼Œä»¥åŠæ¯ä¸€å—çŸ¥è¯†ï¼Œå…·ä½“æ˜¯å±äºå“ªä¸ªæ¡†æ¶çš„ã€‚</p><p>webåç«¯å¼€å‘ç°åœ¨åŸºæœ¬ä¸Šéƒ½æ˜¯åŸºäºæ ‡å‡†çš„ä¸‰å±‚æ¶æ„è¿›è¡Œå¼€å‘çš„ï¼Œåœ¨ä¸‰å±‚æ¶æ„å½“ä¸­ï¼ŒControlleræ§åˆ¶å™¨å±‚è´Ÿè´£æ¥æ”¶è¯·æ±‚å“åº”æ•°æ®ï¼ŒServiceä¸šåŠ¡å±‚è´Ÿè´£å…·ä½“çš„ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œè€ŒDaoæ•°æ®è®¿é—®å±‚ä¹Ÿå«æŒä¹…å±‚ï¼Œå°±æ˜¯ç”¨æ¥å¤„ç†æ•°æ®è®¿é—®æ“ä½œçš„ï¼Œæ¥å®Œæˆæ•°æ®åº“å½“ä¸­æ•°æ®çš„å¢åˆ æ”¹æŸ¥æ“ä½œã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101938006.png"></p><blockquote><p>åœ¨ä¸‰å±‚æ¶æ„å½“ä¸­ï¼Œå‰ç«¯å‘èµ·è¯·æ±‚é¦–å…ˆä¼šåˆ°è¾¾Controller(ä¸è¿›è¡Œé€»è¾‘å¤„ç†)ï¼Œç„¶åControllerä¼šç›´æ¥è°ƒç”¨Service è¿›è¡Œé€»è¾‘å¤„ç†ï¼Œ Serviceå†è°ƒç”¨Daoå®Œæˆæ•°æ®è®¿é—®æ“ä½œã€‚</p></blockquote><p>å¦‚æœæˆ‘ä»¬åœ¨æ‰§è¡Œå…·ä½“çš„ä¸šåŠ¡å¤„ç†ä¹‹å‰ï¼Œéœ€è¦å»åšä¸€äº›é€šç”¨çš„ä¸šåŠ¡å¤„ç†ï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬è¦è¿›è¡Œç»Ÿä¸€çš„ç™»å½•æ ¡éªŒï¼Œæˆ‘ä»¬è¦è¿›è¡Œç»Ÿä¸€çš„å­—ç¬¦ç¼–ç ç­‰è¿™äº›æ“ä½œæ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å€ŸåŠ©äºJavawebå½“ä¸­ä¸‰å¤§ç»„ä»¶ä¹‹ä¸€çš„è¿‡æ»¤å™¨Filteræˆ–è€…æ˜¯Springå½“ä¸­æä¾›çš„æ‹¦æˆªå™¨Interceptoræ¥å®ç°ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101938674.png"></p><p>è€Œä¸ºäº†å®ç°ä¸‰å±‚æ¶æ„å±‚ä¸å±‚ä¹‹é—´çš„è§£è€¦ï¼Œæˆ‘ä»¬å­¦ä¹ äº†Springæ¡†æ¶å½“ä¸­çš„ç¬¬ä¸€å¤§æ ¸å¿ƒï¼šIOCæ§åˆ¶åè½¬ä¸DIä¾èµ–æ³¨å…¥ã€‚</p><blockquote><p>æ‰€è°“æ§åˆ¶åè½¬ï¼ŒæŒ‡çš„æ˜¯å°†å¯¹è±¡åˆ›å»ºçš„æ§åˆ¶æƒç”±åº”ç”¨ç¨‹åºè‡ªèº«äº¤ç»™å¤–éƒ¨å®¹å™¨ï¼Œè¿™ä¸ªå®¹å™¨å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„IOCå®¹å™¨æˆ–Springå®¹å™¨ã€‚</p><p>è€ŒDIä¾èµ–æ³¨å…¥æŒ‡çš„æ˜¯å®¹å™¨ä¸ºç¨‹åºæä¾›è¿è¡Œæ—¶æ‰€éœ€è¦çš„èµ„æºã€‚</p></blockquote><p>é™¤äº†IOCä¸DIæˆ‘ä»¬è¿˜è®²åˆ°äº†AOPé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œè¿˜æœ‰Springä¸­çš„äº‹åŠ¡ç®¡ç†ã€å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Œä»¥åŠä¼ é€’ä¼šè¯æŠ€æœ¯Cookieã€Sessionä»¥åŠæ–°çš„ä¼šè¯è·Ÿè¸ªè§£å†³æ–¹æ¡ˆJWTä»¤ç‰Œï¼Œé˜¿é‡Œäº‘OSSå¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œä»¥åŠé€šè¿‡MybatisæŒä¹…å±‚æ¶æ„æ“ä½œæ•°æ®åº“ç­‰æŠ€æœ¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101938935.png"></p><p>æˆ‘ä»¬åœ¨å­¦ä¹ è¿™äº›webåç«¯å¼€å‘æŠ€æœ¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½æ˜¯åŸºäºä¸»æµçš„SpringBootè¿›è¡Œæ•´åˆä½¿ç”¨çš„ã€‚è€ŒSpringBootåˆæ˜¯ç”¨æ¥ç®€åŒ–å¼€å‘ï¼Œæé«˜å¼€å‘æ•ˆç‡çš„ã€‚åƒè¿‡æ»¤å™¨ã€æ‹¦æˆªå™¨ã€IOCã€DIã€AOPã€äº‹åŠ¡ç®¡ç†ç­‰è¿™äº›æŠ€æœ¯åˆ°åº•æ˜¯å“ªä¸ªæ¡†æ¶æä¾›çš„æ ¸å¿ƒåŠŸèƒ½ï¼Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101938649.png"></p><blockquote><p>Filterè¿‡æ»¤å™¨ã€Cookieã€ Sessionè¿™äº›éƒ½æ˜¯ä¼ ç»Ÿçš„JavaWebæä¾›çš„æŠ€æœ¯ã€‚</p><p>JWTä»¤ç‰Œã€é˜¿é‡Œäº‘OSSå¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œæ˜¯ç°åœ¨ä¼ä¸šé¡¹ç›®ä¸­å¸¸è§çš„ä¸€äº›è§£å†³æ–¹æ¡ˆã€‚</p><p>IOCæ§åˆ¶åè½¬ã€DIä¾èµ–æ³¨å…¥ã€AOPé¢å‘åˆ‡é¢ç¼–ç¨‹ã€äº‹åŠ¡ç®¡ç†ã€å…¨å±€å¼‚å¸¸å¤„ç†ã€æ‹¦æˆªå™¨ç­‰ï¼Œè¿™äº›æŠ€æœ¯éƒ½æ˜¯ Spring Frameworkæ¡†æ¶å½“ä¸­æä¾›çš„æ ¸å¿ƒåŠŸèƒ½ã€‚</p><p>Mybatiså°±æ˜¯ä¸€ä¸ªæŒä¹…å±‚çš„æ¡†æ¶ï¼Œæ˜¯ç”¨æ¥æ“ä½œæ•°æ®åº“çš„ã€‚</p></blockquote><p>åœ¨Springæ¡†æ¶çš„ç”Ÿæ€ä¸­ï¼Œå¯¹webç¨‹åºå¼€å‘æä¾›äº†å¾ˆå¥½çš„æ”¯æŒï¼Œå¦‚ï¼šå…¨å±€å¼‚å¸¸å¤„ç†å™¨ã€æ‹¦æˆªå™¨è¿™äº›éƒ½æ˜¯Springæ¡†æ¶ä¸­webå¼€å‘æ¨¡å—æ‰€æä¾›çš„åŠŸèƒ½ï¼Œè€ŒSpringæ¡†æ¶çš„webå¼€å‘æ¨¡å—ï¼Œæˆ‘ä»¬ä¹Ÿç§°ä¸ºï¼šSpringMVC</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412101938776.png"></p><blockquote><p>SpringMVCä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ¡†æ¶ï¼Œå®ƒæ˜¯Springæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯Springæ¡†æ¶ä¸­çš„webå¼€å‘æ¨¡å—ï¼Œæ˜¯ç”¨æ¥ç®€åŒ–åŸå§‹çš„Servletç¨‹åºå¼€å‘çš„ã€‚</p></blockquote><p>å¤–ç•Œä¿—ç§°çš„SSMï¼Œå°±æ˜¯ç”±ï¼šSpringMVCã€Spring Frameworkã€Mybatisä¸‰å—ç»„æˆã€‚</p><p>åŸºäºä¼ ç»Ÿçš„SSMæ¡†æ¶è¿›è¡Œæ•´åˆå¼€å‘é¡¹ç›®ä¼šæ¯”è¾ƒç¹çï¼Œè€Œä¸”æ•ˆç‡ä¹Ÿæ¯”è¾ƒä½ï¼Œæ‰€ä»¥åœ¨ç°åœ¨çš„ä¼ä¸šé¡¹ç›®å¼€å‘å½“ä¸­ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ç›´æ¥åŸºäºSpringBootæ•´åˆSSMè¿›è¡Œé¡¹ç›®å¼€å‘çš„ã€‚</p><p>åˆ°æ­¤æˆ‘ä»¬webåç«¯å¼€å‘çš„å†…å®¹å°±å·²ç»å…¨éƒ¨è®²è§£ç»“æŸäº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é…ç½®ä¼˜å…ˆçº§ </tag>
            
            <tag> Beanç®¡ç† </tag>
            
            <tag> SpringBootåŸç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ¡ˆä¾‹ï¼ˆ3ï¼‰</title>
      <link href="/2024/12/05/springboot-an-li-3/"/>
      <url>/2024/12/05/springboot-an-li-3/</url>
      
        <content type="html"><![CDATA[<h1 id="äº‹åŠ¡-AOP"><a href="#äº‹åŠ¡-AOP" class="headerlink" title="äº‹åŠ¡&amp;AOP"></a>äº‹åŠ¡&amp;AOP</h1><h2 id="1-äº‹åŠ¡ç®¡ç†"><a href="#1-äº‹åŠ¡ç®¡ç†" class="headerlink" title="1. äº‹åŠ¡ç®¡ç†"></a>1. äº‹åŠ¡ç®¡ç†</h2><h3 id="1-1-äº‹åŠ¡å›é¡¾"><a href="#1-1-äº‹åŠ¡å›é¡¾" class="headerlink" title="1.1 äº‹åŠ¡å›é¡¾"></a>1.1 äº‹åŠ¡å›é¡¾</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-44f618d816f5bf716e1672c75ffbbb9f-image-20241205215726427.png"></p><p>åœ¨æ•°æ®åº“é˜¶æ®µæˆ‘ä»¬å·²å­¦ä¹ è¿‡äº‹åŠ¡äº†ï¼Œæˆ‘ä»¬è®²åˆ°ï¼š</p><p><strong>äº‹åŠ¡</strong>æ˜¯ä¸€ç»„æ“ä½œçš„é›†åˆï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ã€‚äº‹åŠ¡ä¼šæŠŠæ‰€æœ‰çš„æ“ä½œä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œä¸€èµ·å‘æ•°æ®åº“æäº¤æˆ–è€…æ˜¯æ’¤é”€æ“ä½œè¯·æ±‚ã€‚æ‰€ä»¥è¿™ç»„æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚</p><p>æ€ä¹ˆæ ·æ¥æ§åˆ¶è¿™ç»„æ“ä½œï¼Œè®©è¿™ç»„æ“ä½œåŒæ—¶æˆåŠŸæˆ–åŒæ—¶å¤±è´¥å‘¢ï¼Ÿæ­¤æ—¶å°±è¦æ¶‰åŠåˆ°äº‹åŠ¡çš„å…·ä½“æ“ä½œäº†ã€‚</p><p>äº‹åŠ¡çš„æ“ä½œä¸»è¦æœ‰ä¸‰æ­¥ï¼š</p><ol><li>å¼€å¯äº‹åŠ¡ï¼ˆä¸€ç»„æ“ä½œå¼€å§‹å‰ï¼Œå¼€å¯äº‹åŠ¡ï¼‰ï¼šstart transaction / begin ;</li><li>æäº¤äº‹åŠ¡ï¼ˆè¿™ç»„æ“ä½œå…¨éƒ¨æˆåŠŸåï¼Œæäº¤äº‹åŠ¡ï¼‰ï¼šcommit ;</li><li>å›æ»šäº‹åŠ¡ï¼ˆä¸­é—´ä»»ä½•ä¸€ä¸ªæ“ä½œå‡ºç°å¼‚å¸¸ï¼Œå›æ»šäº‹åŠ¡ï¼‰ï¼šrollback ;</li></ol><h3 id="1-2-Springäº‹åŠ¡ç®¡ç†"><a href="#1-2-Springäº‹åŠ¡ç®¡ç†" class="headerlink" title="1.2 Springäº‹åŠ¡ç®¡ç†"></a>1.2 Springäº‹åŠ¡ç®¡ç†</h3><h4 id="1-2-1-æ¡ˆä¾‹"><a href="#1-2-1-æ¡ˆä¾‹" class="headerlink" title="1.2.1 æ¡ˆä¾‹"></a>1.2.1 æ¡ˆä¾‹</h4><p>ç®€å•çš„å›é¡¾äº†äº‹åŠ¡çš„æ¦‚å¿µä»¥åŠäº‹åŠ¡çš„åŸºæœ¬æ“ä½œä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸ªäº‹åŠ¡ç®¡ç†æ¡ˆä¾‹ï¼šè§£æ•£éƒ¨é—¨ ï¼ˆè§£æ•£éƒ¨é—¨å°±æ˜¯åˆ é™¤éƒ¨é—¨ï¼‰</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-4137fbd623c7cacd2baa7d5bf59883f8-image-20241205223921422.png"></p><p>éœ€æ±‚ï¼šå½“éƒ¨é—¨è§£æ•£äº†ä¸ä»…éœ€è¦æŠŠéƒ¨é—¨ä¿¡æ¯åˆ é™¤äº†ï¼Œè¿˜éœ€è¦æŠŠè¯¥éƒ¨é—¨ä¸‹çš„å‘˜å·¥æ•°æ®ä¹Ÿåˆ é™¤äº†ã€‚</p><p>æ­¥éª¤ï¼š</p><ul><li>æ ¹æ®IDåˆ é™¤éƒ¨é—¨æ•°æ®</li><li>æ ¹æ®éƒ¨é—¨IDåˆ é™¤è¯¥éƒ¨é—¨ä¸‹çš„å‘˜å·¥</li></ul><p>ä»£ç å®ç°ï¼š</p><ol><li>DeptServiceImpl</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptMapper</span> deptMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token comment">//æ ¹æ®éƒ¨é—¨idï¼Œåˆ é™¤éƒ¨é—¨ä¿¡æ¯åŠéƒ¨é—¨ä¸‹çš„æ‰€æœ‰å‘˜å·¥</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//æ ¹æ®éƒ¨é—¨idåˆ é™¤éƒ¨é—¨ä¿¡æ¯</span>        deptMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//åˆ é™¤éƒ¨é—¨ä¸‹çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯</span>        empMapper<span class="token punctuation">.</span><span class="token function">deleteByDeptId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>DeptMapper</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptMapper</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æ ¹æ®idåˆ é™¤éƒ¨é—¨ä¿¡æ¯     * @param id   éƒ¨é—¨id     */</span>    <span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">"delete from dept where id = #{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">void</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>EmpMapper</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token comment">//æ ¹æ®éƒ¨é—¨idåˆ é™¤éƒ¨é—¨ä¸‹æ‰€æœ‰å‘˜å·¥</span>    <span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">"delete from emp where dept_id=#{deptId}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">deleteByDeptId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> deptId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡å¯SpringBootæœåŠ¡ï¼Œä½¿ç”¨postmanæµ‹è¯•éƒ¨é—¨åˆ é™¤ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20230107140057729.png"></p><p>ä»£ç æ­£å¸¸æƒ…å†µä¸‹ï¼Œdeptè¡¨å’ŒEmè¡¨ä¸­çš„æ•°æ®å·²åˆ é™¤</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20230107140130199.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20230107140221425.png"></p><p>ä¿®æ”¹DeptServiceImplç±»ä¸­ä»£ç ï¼Œæ·»åŠ å¯èƒ½å‡ºç°å¼‚å¸¸çš„ä»£ç ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptMapper</span> deptMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token comment">//æ ¹æ®éƒ¨é—¨idï¼Œåˆ é™¤éƒ¨é—¨ä¿¡æ¯åŠéƒ¨é—¨ä¸‹çš„æ‰€æœ‰å‘˜å·¥</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//æ ¹æ®éƒ¨é—¨idåˆ é™¤éƒ¨é—¨ä¿¡æ¯</span>        deptMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//æ¨¡æ‹Ÿï¼šå¼‚å¸¸å‘ç”Ÿ</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>        <span class="token comment">//åˆ é™¤éƒ¨é—¨ä¸‹çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯</span>        empMapper<span class="token punctuation">.</span><span class="token function">deleteByDeptId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡å¯SpringBootæœåŠ¡ï¼Œä½¿ç”¨postmanæµ‹è¯•éƒ¨é—¨åˆ é™¤ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20230107140618199.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20230107140706301.png"></p><p>æŸ¥çœ‹æ•°æ®åº“è¡¨ï¼š</p><ul><li>åˆ é™¤äº†2å·éƒ¨é—¨</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20230107140726701.png"></p><ul><li>2å·éƒ¨é—¨ä¸‹çš„å‘˜å·¥æ•°æ®æ²¡æœ‰åˆ é™¤</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-796123db8f58bf2fa3af2093c64b15e3-image-20230107140221425.png"></p><p><strong>ä»¥ä¸Šç¨‹åºå‡ºç°çš„é—®é¢˜ï¼šå³ä½¿ç¨‹åºè¿è¡ŒæŠ›å‡ºäº†å¼‚å¸¸ï¼Œéƒ¨é—¨ä¾ç„¶åˆ é™¤äº†ï¼Œä½†æ˜¯éƒ¨é—¨ä¸‹çš„å‘˜å·¥å´æ²¡æœ‰åˆ é™¤ï¼Œé€ æˆäº†æ•°æ®çš„ä¸ä¸€è‡´ã€‚</strong></p><h4 id="1-2-2-åŸå› åˆ†æ"><a href="#1-2-2-åŸå› åˆ†æ" class="headerlink" title="1.2.2 åŸå› åˆ†æ"></a>1.2.2 åŸå› åˆ†æ</h4><p>åŸå› ï¼š</p><ul><li>å…ˆæ‰§è¡Œæ ¹æ®idåˆ é™¤éƒ¨é—¨çš„æ“ä½œï¼Œè¿™æ­¥æ‰§è¡Œå®Œæ¯•ï¼Œæ•°æ®åº“è¡¨ dept ä¸­çš„æ•°æ®å°±å·²ç»åˆ é™¤äº†ã€‚</li><li>æ‰§è¡Œ 1/0 æ“ä½œï¼ŒæŠ›å‡ºå¼‚å¸¸</li><li>æŠ›å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œä¸‹é¢æ‰€æœ‰çš„ä»£ç éƒ½ä¸ä¼šæ‰§è¡Œäº†ï¼Œæ ¹æ®éƒ¨é—¨IDåˆ é™¤è¯¥éƒ¨é—¨ä¸‹çš„å‘˜å·¥ï¼Œè¿™ä¸ªæ“ä½œä¹Ÿä¸ä¼šæ‰§è¡Œ ã€‚</li></ul><p>æ­¤æ—¶å°±å‡ºç°é—®é¢˜äº†ï¼Œéƒ¨é—¨åˆ é™¤äº†ï¼Œéƒ¨é—¨ä¸‹çš„å‘˜å·¥è¿˜åœ¨ï¼Œä¸šåŠ¡æ“ä½œå‰åæ•°æ®ä¸ä¸€è‡´ã€‚</p><p>è€Œè¦æƒ³ä¿è¯æ“ä½œå‰åï¼Œæ•°æ®çš„ä¸€è‡´æ€§ï¼Œå°±éœ€è¦è®©è§£æ•£éƒ¨é—¨ä¸­æ¶‰åŠåˆ°çš„ä¸¤ä¸ªä¸šåŠ¡æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ ã€‚ é‚£æˆ‘ä»¬å¦‚ä½•ï¼Œè®©è¿™ä¸¤ä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å‘¢ ï¼Ÿ</p><p>é‚£å°±å¯ä»¥é€šè¿‡äº‹åŠ¡æ¥å®ç°ï¼Œå› ä¸ºä¸€ä¸ªäº‹åŠ¡ä¸­çš„å¤šä¸ªä¸šåŠ¡æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</p><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨deleteåˆ é™¤ä¸šåŠ¡åŠŸèƒ½ä¸­æ·»åŠ äº‹åŠ¡ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-b751ab54e725cf86c0166659ade2b569-image-20230107141652636.png"></p><p>åœ¨æ–¹æ³•è¿è¡Œä¹‹å‰ï¼Œå¼€å¯äº‹åŠ¡ï¼Œå¦‚æœæ–¹æ³•æˆåŠŸæ‰§è¡Œï¼Œå°±æäº¤äº‹åŠ¡ï¼Œå¦‚æœæ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹å½“ä¸­å‡ºç°å¼‚å¸¸äº†ï¼Œå°±å›æ»šäº‹åŠ¡ã€‚</p><p>æ€è€ƒï¼šå¼€å‘ä¸­æ‰€æœ‰çš„ä¸šåŠ¡æ“ä½œï¼Œä¸€æ—¦æˆ‘ä»¬è¦è¿›è¡Œæ§åˆ¶äº‹åŠ¡ï¼Œæ˜¯ä¸æ˜¯éƒ½æ˜¯è¿™æ ·çš„å¥—è·¯ï¼Ÿ</p><p>ç­”æ¡ˆï¼šæ˜¯çš„ã€‚</p><p>æ‰€ä»¥åœ¨springæ¡†æ¶å½“ä¸­å°±å·²ç»æŠŠäº‹åŠ¡æ§åˆ¶çš„ä»£ç éƒ½å·²ç»å°è£…å¥½äº†ï¼Œå¹¶ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å®ç°ã€‚æˆ‘ä»¬ä½¿ç”¨äº†springæ¡†æ¶ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡ä¸€ä¸ªç®€å•çš„æ³¨è§£@Transactionalå°±æå®šäº†ã€‚</p><h4 id="1-2-3-Transactionalæ³¨è§£"><a href="#1-2-3-Transactionalæ³¨è§£" class="headerlink" title="1.2.3 Transactionalæ³¨è§£"></a>1.2.3 Transactionalæ³¨è§£</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-8db219fff3ac46e762e5b21ca88a5e18-image-20241205224315410.png" alt="æ³¨è§£"></p><blockquote><p>@Transactionalä½œç”¨ï¼šå°±æ˜¯åœ¨å½“å‰è¿™ä¸ªæ–¹æ³•æ‰§è¡Œå¼€å§‹ä¹‹å‰æ¥å¼€å¯äº‹åŠ¡ï¼Œæ–¹æ³•æ‰§è¡Œå®Œæ¯•ä¹‹åæäº¤äº‹åŠ¡ã€‚å¦‚æœåœ¨è¿™ä¸ªæ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹å½“ä¸­å‡ºç°äº†å¼‚å¸¸ï¼Œå°±ä¼šè¿›è¡Œäº‹åŠ¡çš„å›æ»šæ“ä½œã€‚</p><p>@Transactionalæ³¨è§£ï¼šæˆ‘ä»¬ä¸€èˆ¬ä¼šåœ¨ä¸šåŠ¡å±‚å½“ä¸­æ¥æ§åˆ¶äº‹åŠ¡ï¼Œå› ä¸ºåœ¨ä¸šåŠ¡å±‚å½“ä¸­ï¼Œä¸€ä¸ªä¸šåŠ¡åŠŸèƒ½å¯èƒ½ä¼šåŒ…å«å¤šä¸ªæ•°æ®è®¿é—®çš„æ“ä½œã€‚åœ¨ä¸šåŠ¡å±‚æ¥æ§åˆ¶äº‹åŠ¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å¤šä¸ªæ•°æ®è®¿é—®æ“ä½œæ§åˆ¶åœ¨ä¸€ä¸ªäº‹åŠ¡èŒƒå›´å†…ã€‚</p></blockquote><p>@Transactionalæ³¨è§£ä¹¦å†™ä½ç½®ï¼š</p><ul><li>æ–¹æ³•<ul><li>å½“å‰æ–¹æ³•äº¤ç»™springè¿›è¡Œäº‹åŠ¡ç®¡ç†</li></ul></li><li>ç±»<ul><li>å½“å‰ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½äº¤ç”±springè¿›è¡Œäº‹åŠ¡ç®¡ç†</li></ul></li><li>æ¥å£<ul><li>æ¥å£ä¸‹æ‰€æœ‰çš„å®ç°ç±»å½“ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½äº¤ç»™spring è¿›è¡Œäº‹åŠ¡ç®¡ç†</li></ul></li></ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸šåŠ¡æ–¹æ³•deleteä¸ŠåŠ ä¸Š @Transactional æ¥æ§åˆ¶äº‹åŠ¡ ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptMapper</span> deptMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>        <span class="token annotation punctuation">@Override</span>    <span class="token annotation punctuation">@Transactional</span>  <span class="token comment">//å½“å‰æ–¹æ³•æ·»åŠ äº†äº‹åŠ¡ç®¡ç†</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//æ ¹æ®éƒ¨é—¨idåˆ é™¤éƒ¨é—¨ä¿¡æ¯</span>        deptMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//æ¨¡æ‹Ÿï¼šå¼‚å¸¸å‘ç”Ÿ</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>        <span class="token comment">//åˆ é™¤éƒ¨é—¨ä¸‹çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯</span>        empMapper<span class="token punctuation">.</span><span class="token function">deleteByDeptId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ä¸šåŠ¡åŠŸèƒ½ä¸Šæ·»åŠ @Transactionalæ³¨è§£è¿›è¡Œäº‹åŠ¡ç®¡ç†åï¼Œæˆ‘ä»¬é‡å¯SpringBootæœåŠ¡ï¼Œä½¿ç”¨postmanæµ‹è¯•ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-8668d1a00087850f2ab3b276bd1aa3df-image-20230107143339917.png"></p><p>æ·»åŠ Springäº‹åŠ¡ç®¡ç†åï¼Œç”±äºæœåŠ¡ç«¯ç¨‹åºå¼•å‘äº†å¼‚å¸¸ï¼Œæ‰€ä»¥äº‹åŠ¡è¿›è¡Œå›æ»šã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-e6533dafd3be2b5cfd147fa89f61138e-image-20230107144312892.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-e256fc7f34a4cd99e9ae1759da8a5b23-image-20230107143720961.png"></p><p>è¯´æ˜ï¼šå¯ä»¥åœ¨application.ymlé…ç½®æ–‡ä»¶ä¸­å¼€å¯äº‹åŠ¡ç®¡ç†æ—¥å¿—ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ§åˆ¶çœ‹åˆ°å’Œäº‹åŠ¡ç›¸å…³çš„æ—¥å¿—ä¿¡æ¯äº†</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#springäº‹åŠ¡ç®¡ç†æ—¥å¿—</span><span class="token key atrule">logging</span><span class="token punctuation">:</span>  <span class="token key atrule">level</span><span class="token punctuation">:</span>    <span class="token key atrule">org.springframework.jdbc.support.JdbcTransactionManager</span><span class="token punctuation">:</span> debug<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-3-äº‹åŠ¡è¿›é˜¶"><a href="#1-3-äº‹åŠ¡è¿›é˜¶" class="headerlink" title="1.3 äº‹åŠ¡è¿›é˜¶"></a>1.3 äº‹åŠ¡è¿›é˜¶</h3><p>å‰é¢æˆ‘ä»¬é€šè¿‡springäº‹åŠ¡ç®¡ç†æ³¨è§£@Transactionalå·²ç»æ§åˆ¶äº†ä¸šåŠ¡å±‚æ–¹æ³•çš„äº‹åŠ¡ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¦æ¥è¯¦ç»†çš„ä»‹ç»ä¸€ä¸‹@Transactionaläº‹åŠ¡ç®¡ç†æ³¨è§£çš„ä½¿ç”¨ç»†èŠ‚ã€‚æˆ‘ä»¬è¿™é‡Œä¸»è¦ä»‹ç»@Transactionalæ³¨è§£å½“ä¸­çš„ä¸¤ä¸ªå¸¸è§çš„å±æ€§ï¼š</p><ol><li>å¼‚å¸¸å›æ»šçš„å±æ€§ï¼šrollbackFor </li><li>äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼špropagation</li></ol><p>æˆ‘ä»¬å…ˆæ¥å­¦ä¹ ä¸‹rollbackForå±æ€§ã€‚</p><h4 id="1-3-1-rollbackFor"><a href="#1-3-1-rollbackFor" class="headerlink" title="1.3.1 rollbackFor"></a>1.3.1 rollbackFor</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-c90becaa487131cb5464b89722b22344-image-20241205225014901.png"></p><p>æˆ‘ä»¬åœ¨ä¹‹å‰ç¼–å†™çš„ä¸šåŠ¡æ–¹æ³•ä¸Šæ·»åŠ äº†@Transactionalæ³¨è§£ï¼Œæ¥å®ç°äº‹åŠ¡ç®¡ç†ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Transactional</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//æ ¹æ®éƒ¨é—¨idåˆ é™¤éƒ¨é—¨ä¿¡æ¯</span>        deptMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//æ¨¡æ‹Ÿï¼šå¼‚å¸¸å‘ç”Ÿ</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>        <span class="token comment">//åˆ é™¤éƒ¨é—¨ä¸‹çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯</span>        empMapper<span class="token punctuation">.</span><span class="token function">deleteByDeptId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸Šä¸šåŠ¡åŠŸèƒ½delete()æ–¹æ³•åœ¨è¿è¡Œæ—¶ï¼Œä¼šå¼•å‘é™¤0çš„ç®—æ•°è¿ç®—å¼‚å¸¸(è¿è¡Œæ—¶å¼‚å¸¸)ï¼Œå‡ºç°å¼‚å¸¸ä¹‹åï¼Œç”±äºæˆ‘ä»¬åœ¨æ–¹æ³•ä¸ŠåŠ äº†@Transactionalæ³¨è§£è¿›è¡Œäº‹åŠ¡ç®¡ç†ï¼Œæ‰€ä»¥å‘ç”Ÿå¼‚å¸¸ä¼šæ‰§è¡Œrollbackå›æ»šæ“ä½œï¼Œä»è€Œä¿è¯äº‹åŠ¡æ“ä½œå‰åæ•°æ®æ˜¯ä¸€è‡´çš„ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬åœ¨åšä¸€ä¸ªæµ‹è¯•ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸šåŠ¡åŠŸèƒ½ä»£ç ï¼Œåœ¨æ¨¡æ‹Ÿå¼‚å¸¸çš„ä½ç½®ä¸Šç›´æ¥æŠ›å‡ºExceptionå¼‚å¸¸ï¼ˆç¼–è¯‘æ—¶å¼‚å¸¸ï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Transactional</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">//æ ¹æ®éƒ¨é—¨idåˆ é™¤éƒ¨é—¨ä¿¡æ¯</span>        deptMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//æ¨¡æ‹Ÿï¼šå¼‚å¸¸å‘ç”Ÿ</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">"å‡ºç°å¼‚å¸¸äº†~~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">//åˆ é™¤éƒ¨é—¨ä¸‹çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯</span>        empMapper<span class="token punctuation">.</span><span class="token function">deleteByDeptId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>è¯´æ˜ï¼šåœ¨serviceä¸­å‘ä¸ŠæŠ›å‡ºä¸€ä¸ªExceptionç¼–è¯‘æ—¶å¼‚å¸¸ä¹‹åï¼Œç”±äºæ˜¯controllerè°ƒç”¨serviceï¼Œæ‰€ä»¥åœ¨controllerä¸­è¦æœ‰å¼‚å¸¸å¤„ç†ä»£ç ï¼Œæ­¤æ—¶æˆ‘ä»¬é€‰æ‹©åœ¨controllerä¸­ç»§ç»­æŠŠå¼‚å¸¸å‘ä¸ŠæŠ›ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">"/depts/{id}"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>  <span class="token comment">//æ—¥å¿—è®°å½•</span>  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"æ ¹æ®idåˆ é™¤éƒ¨é—¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//è°ƒç”¨serviceå±‚åŠŸèƒ½</span>  deptService<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//å“åº”</span>  <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><p>é‡æ–°å¯åŠ¨æœåŠ¡åæµ‹è¯•ï¼š</p><p>æŠ›å‡ºå¼‚å¸¸ä¹‹åäº‹åŠ¡ä¼šä¸ä¼šå›æ»š</p><blockquote><p>ç°æœ‰è¡¨ä¸­æ•°æ®ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-3632305c5c76ae36ddc0056692a0b1c8-image-20230107140726701.png"></p></blockquote><p>ä½¿ç”¨postmanæµ‹è¯•ï¼Œåˆ é™¤5å·éƒ¨é—¨</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-3cbf3c412f80fbab63f4212ef7655a6e-image-20230108142359592.png"></p><p>å‘ç”Ÿäº†Exceptionå¼‚å¸¸ï¼Œä½†äº‹åŠ¡ä¾ç„¶æäº¤äº†</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-54865a1e78a708d9671a0decd3e7bb86-image-20230108142555310.png"></p><blockquote><p>deptè¡¨ä¸­æ•°æ®ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-aee0f1cd43131b8c382a883daec8b5fb-image-20230108142707351.png"></p></blockquote><p>é€šè¿‡ä»¥ä¸Šæµ‹è¯•å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œ<strong>åªæœ‰å‡ºç°RuntimeException(è¿è¡Œæ—¶å¼‚å¸¸)æ‰ä¼šå›æ»šäº‹åŠ¡</strong>ã€‚</p><p>å‡å¦‚æˆ‘ä»¬æƒ³è®©æ‰€æœ‰çš„å¼‚å¸¸éƒ½å›æ»šï¼Œéœ€è¦æ¥é…ç½®@Transactionalæ³¨è§£å½“ä¸­çš„rollbackForå±æ€§ï¼Œé€šè¿‡rollbackForè¿™ä¸ªå±æ€§å¯ä»¥æŒ‡å®šå‡ºç°ä½•ç§å¼‚å¸¸ç±»å‹å›æ»šäº‹åŠ¡ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptMapper</span> deptMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>        <span class="token annotation punctuation">@Override</span>    <span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>rollbackFor<span class="token operator">=</span><span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//æ ¹æ®éƒ¨é—¨idåˆ é™¤éƒ¨é—¨ä¿¡æ¯</span>        deptMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//æ¨¡æ‹Ÿï¼šå¼‚å¸¸å‘ç”Ÿ</span>        <span class="token keyword">int</span> num <span class="token operator">=</span> id<span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>        <span class="token comment">//åˆ é™¤éƒ¨é—¨ä¸‹çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯</span>        empMapper<span class="token punctuation">.</span><span class="token function">deleteByDeptId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥æˆ‘ä»¬é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œæµ‹è¯•åˆ é™¤éƒ¨é—¨çš„æ“ä½œï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-767f96c72e488f2ad0080b7a6e518f7b-image-20230108184912155.png"></p><p>æ§åˆ¶å°æ—¥å¿—ï¼šæ‰§è¡Œäº†åˆ é™¤3å·éƒ¨é—¨çš„æ“ä½œï¼Œ å› ä¸ºå¼‚å¸¸åˆè¿›è¡Œäº†äº‹åŠ¡å›æ»š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-d693c414825b056df3f3b9e2659ef96e-image-20230108185432083.png"></p><p>æ•°æ®è¡¨ï¼š3å·éƒ¨é—¨æ²¡æœ‰åˆ é™¤</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-3632305c5c76ae36ddc0056692a0b1c8-05-3632305c5c76ae36ddc0056692a0b1c8-image-20230107140726701.png"></p><blockquote><p>ç»“è®ºï¼š</p><ul><li>åœ¨Springçš„äº‹åŠ¡ç®¡ç†ä¸­ï¼Œé»˜è®¤åªæœ‰è¿è¡Œæ—¶å¼‚å¸¸ RuntimeExceptionæ‰ä¼šå›æ»šã€‚</li><li>å¦‚æœè¿˜éœ€è¦å›æ»šæŒ‡å®šç±»å‹çš„å¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡rollbackForå±æ€§æ¥æŒ‡å®šã€‚</li></ul></blockquote><h4 id="1-3-3-propagation"><a href="#1-3-3-propagation" class="headerlink" title="1.3.3 propagation"></a>1.3.3 propagation</h4><h5 id="1-3-3-1-ä»‹ç»"><a href="#1-3-3-1-ä»‹ç»" class="headerlink" title="1.3.3.1 ä»‹ç»"></a>1.3.3.1 ä»‹ç»</h5><p>æˆ‘ä»¬æ¥ç€ç»§ç»­å­¦ä¹ @Transactionalæ³¨è§£å½“ä¸­çš„ç¬¬äºŒä¸ªå±æ€§propagationï¼Œè¿™ä¸ªå±æ€§æ˜¯ç”¨æ¥é…ç½®äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºçš„ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-b245eef5fb995bfe31016619c53a1a86-image-20241205225241421.png"></p><p>ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºå‘¢ï¼Ÿ</p><ul><li>å°±æ˜¯å½“ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è¢«å¦ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªäº‹åŠ¡æ–¹æ³•åº”è¯¥å¦‚ä½•è¿›è¡Œäº‹åŠ¡æ§åˆ¶ã€‚</li></ul><p>ä¾‹å¦‚ï¼šä¸¤ä¸ªäº‹åŠ¡æ–¹æ³•ï¼Œä¸€ä¸ªAæ–¹æ³•ï¼Œä¸€ä¸ªBæ–¹æ³•ã€‚åœ¨è¿™ä¸¤ä¸ªæ–¹æ³•ä¸Šéƒ½æ·»åŠ äº†@Transactionalæ³¨è§£ï¼Œå°±ä»£è¡¨è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å…·æœ‰äº‹åŠ¡ï¼Œè€Œåœ¨Aæ–¹æ³•å½“ä¸­åˆå»è°ƒç”¨äº†Bæ–¹æ³•ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-85541a2d7e3834fd21730890a820cf3b-image-20230112152543953.png"> </p><p>æ‰€è°“äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºï¼ŒæŒ‡çš„å°±æ˜¯åœ¨Aæ–¹æ³•è¿è¡Œçš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œåœ¨Aæ–¹æ³•å½“ä¸­åˆè°ƒç”¨äº†Bæ–¹æ³•ï¼Œ Bæ–¹æ³•è‡ªèº«ä¹Ÿå…·æœ‰äº‹åŠ¡ï¼Œé‚£ä¹ˆBæ–¹æ³•åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œåˆ°åº•æ˜¯åŠ å…¥åˆ°Aæ–¹æ³•çš„äº‹åŠ¡å½“ä¸­æ¥ï¼Œè¿˜æ˜¯Bæ–¹æ³•åœ¨è¿è¡Œçš„æ—¶å€™æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Ÿè¿™ä¸ªå°±æ¶‰åŠåˆ°äº†äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºã€‚</p><p>æˆ‘ä»¬è¦æƒ³æ§åˆ¶äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºï¼Œåœ¨@Transactionalæ³¨è§£çš„åé¢æŒ‡å®šä¸€ä¸ªå±æ€§propagationï¼Œé€šè¿‡ propagation å±æ€§æ¥æŒ‡å®šä¼ æ’­è¡Œä¸ºã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸€ä¸‹å¸¸è§çš„äº‹åŠ¡ä¼ æ’­è¡Œä¸ºã€‚</p><table><thead><tr><th><strong>å±æ€§å€¼</strong></th><th><strong>å«ä¹‰</strong></th></tr></thead><tbody><tr><td>REQUIRED</td><td>ã€é»˜è®¤å€¼ã€‘éœ€è¦äº‹åŠ¡ï¼Œæœ‰åˆ™åŠ å…¥ï¼Œæ— åˆ™åˆ›å»ºæ–°äº‹åŠ¡</td></tr><tr><td>REQUIRES_NEW</td><td>éœ€è¦æ–°äº‹åŠ¡ï¼Œæ— è®ºæœ‰æ— ï¼Œæ€»æ˜¯åˆ›å»ºæ–°äº‹åŠ¡</td></tr><tr><td>SUPPORTS</td><td>æ”¯æŒäº‹åŠ¡ï¼Œæœ‰åˆ™åŠ å…¥ï¼Œæ— åˆ™åœ¨æ— äº‹åŠ¡çŠ¶æ€ä¸­è¿è¡Œ</td></tr><tr><td>NOT_SUPPORTED</td><td>ä¸æ”¯æŒäº‹åŠ¡ï¼Œåœ¨æ— äº‹åŠ¡çŠ¶æ€ä¸‹è¿è¡Œ,å¦‚æœå½“å‰å­˜åœ¨å·²æœ‰äº‹åŠ¡,åˆ™æŒ‚èµ·å½“å‰äº‹åŠ¡</td></tr><tr><td>MANDATORY</td><td>å¿…é¡»æœ‰äº‹åŠ¡ï¼Œå¦åˆ™æŠ›å¼‚å¸¸</td></tr><tr><td>NEVER</td><td>å¿…é¡»æ²¡äº‹åŠ¡ï¼Œå¦åˆ™æŠ›å¼‚å¸¸</td></tr><tr><td>â€¦</td><td></td></tr></tbody></table><blockquote><p>å¯¹äºè¿™äº›äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨ä»¥ä¸‹ä¸¤ä¸ªå°±å¯ä»¥äº†ï¼š</p><ol><li>REQUIREDï¼ˆé»˜è®¤å€¼ï¼‰</li><li>REQUIRES_NEW</li></ol></blockquote><h5 id="1-3-3-2-æ¡ˆä¾‹"><a href="#1-3-3-2-æ¡ˆä¾‹" class="headerlink" title="1.3.3.2 æ¡ˆä¾‹"></a>1.3.3.2 æ¡ˆä¾‹</h5><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥æ¼”ç¤ºä¸‹äº‹åŠ¡ä¼ æ’­è¡Œä¸ºpropagationå±æ€§çš„ä½¿ç”¨ã€‚</p><p><strong>éœ€æ±‚ï¼š</strong>è§£æ•£éƒ¨é—¨æ—¶éœ€è¦è®°å½•æ“ä½œæ—¥å¿—</p><p>â€‹ç”±äºè§£æ•£éƒ¨é—¨æ˜¯ä¸€ä¸ªéå¸¸é‡è¦è€Œä¸”éå¸¸å±é™©çš„æ“ä½œï¼Œæ‰€ä»¥åœ¨ä¸šåŠ¡å½“ä¸­è¦æ±‚æ¯ä¸€æ¬¡æ‰§è¡Œè§£æ•£éƒ¨é—¨çš„æ“ä½œéƒ½éœ€è¦ç•™ä¸‹ç—•è¿¹ï¼Œå°±æ˜¯è¦è®°å½•æ“ä½œæ—¥å¿—ã€‚è€Œä¸”è¿˜è¦æ±‚æ— è®ºæ˜¯æ‰§è¡ŒæˆåŠŸäº†è¿˜æ˜¯æ‰§è¡Œå¤±è´¥äº†ï¼Œéƒ½éœ€è¦ç•™ä¸‹ç—•è¿¹ã€‚</p><p><strong>æ­¥éª¤ï¼š</strong></p><ol><li>æ‰§è¡Œè§£æ•£éƒ¨é—¨çš„ä¸šåŠ¡ï¼šå…ˆåˆ é™¤éƒ¨é—¨ï¼Œå†åˆ é™¤éƒ¨é—¨ä¸‹çš„å‘˜å·¥ï¼ˆå‰é¢å·²å®ç°ï¼‰</li><li>è®°å½•è§£æ•£éƒ¨é—¨çš„æ—¥å¿—ï¼Œåˆ°æ—¥å¿—è¡¨ï¼ˆæœªå®ç°ï¼‰</li></ol><p><strong>å‡†å¤‡å·¥ä½œï¼š</strong></p><ol><li>åˆ›å»ºæ•°æ®åº“è¡¨ dept_log æ—¥å¿—è¡¨ï¼š</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create table dept_log(   id int auto_increment comment 'ä¸»é”®ID' primary key,    create_time datetime null comment 'æ“ä½œæ—¶é—´',    description varchar(300) null comment 'æ“ä½œæè¿°')comment 'éƒ¨é—¨æ“ä½œæ—¥å¿—è¡¨';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>å¼•å…¥èµ„æ–™ä¸­æä¾›çš„å®ä½“ç±»ï¼šDeptLog</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptLog</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> createTime<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> description<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>å¼•å…¥èµ„æ–™ä¸­æä¾›çš„Mapperæ¥å£ï¼šDeptLogMapper</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptLogMapper</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">"insert into dept_log(create_time,description) values(#{createTime},#{description})"</span><span class="token punctuation">)</span>    <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">DeptLog</span> log<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li>å¼•å…¥èµ„æ–™ä¸­æä¾›çš„ä¸šåŠ¡æ¥å£ï¼šDeptLogService</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptLogService</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">DeptLog</span> deptLog<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="5"><li>å¼•å…¥èµ„æ–™ä¸­æä¾›çš„ä¸šåŠ¡å®ç°ç±»ï¼šDeptLogServiceImpl</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptLogServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptLogService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptLogMapper</span> deptLogMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Transactional</span> <span class="token comment">//äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼šæœ‰äº‹åŠ¡å°±åŠ å…¥ã€æ²¡æœ‰äº‹åŠ¡å°±æ–°å»ºäº‹åŠ¡</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">DeptLog</span> deptLog<span class="token punctuation">)</span> <span class="token punctuation">{</span>        deptLogMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>deptLog<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ä»£ç å®ç°:</strong></p><p>ä¸šåŠ¡å®ç°ç±»ï¼šDeptServiceImpl</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token comment">//@Transactional //å½“å‰ä¸šåŠ¡å®ç°ç±»ä¸­çš„æ‰€æœ‰çš„æ–¹æ³•ï¼Œéƒ½æ·»åŠ äº†springäº‹åŠ¡ç®¡ç†æœºåˆ¶</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptMapper</span> deptMapper<span class="token punctuation">;</span>        <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptLogService</span> deptLogService<span class="token punctuation">;</span>    <span class="token comment">//æ ¹æ®éƒ¨é—¨idï¼Œåˆ é™¤éƒ¨é—¨ä¿¡æ¯åŠéƒ¨é—¨ä¸‹çš„æ‰€æœ‰å‘˜å·¥</span>    <span class="token annotation punctuation">@Override</span>    <span class="token annotation punctuation">@Log</span>    <span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>rollbackFor <span class="token operator">=</span> <span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment">//æ ¹æ®éƒ¨é—¨idåˆ é™¤éƒ¨é—¨ä¿¡æ¯</span>            deptMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æ¨¡æ‹Ÿï¼šå¼‚å¸¸</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">"å‡ºç°å¼‚å¸¸äº†~~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">//åˆ é™¤éƒ¨é—¨ä¸‹çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯</span>            empMapper<span class="token punctuation">.</span><span class="token function">deleteByDeptId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token comment">//ä¸è®ºæ˜¯å¦æœ‰å¼‚å¸¸ï¼Œæœ€ç»ˆéƒ½è¦æ‰§è¡Œçš„ä»£ç ï¼šè®°å½•æ—¥å¿—</span>            <span class="token class-name">DeptLog</span> deptLog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeptLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            deptLog<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            deptLog<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œäº†è§£æ•£éƒ¨é—¨çš„æ“ä½œï¼Œæ­¤æ—¶è§£æ•£çš„æ˜¯"</span><span class="token operator">+</span>id<span class="token operator">+</span><span class="token string">"å·éƒ¨é—¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//è°ƒç”¨å…¶ä»–ä¸šåŠ¡ç±»ä¸­çš„æ–¹æ³•</span>            deptLogService<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>deptLog<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>        <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æµ‹è¯•:</strong></p><p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡ï¼Œæµ‹è¯•åˆ é™¤3å·éƒ¨é—¨åä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><ul><li>æ‰§è¡Œäº†åˆ é™¤3å·éƒ¨é—¨æ“ä½œ</li><li>æ‰§è¡Œäº†æ’å…¥éƒ¨é—¨æ—¥å¿—æ“ä½œ</li><li>ç¨‹åºå‘ç”ŸExceptionå¼‚å¸¸</li><li>æ‰§è¡Œäº‹åŠ¡å›æ»šï¼ˆåˆ é™¤ã€æ’å…¥æ“ä½œå› ä¸ºåœ¨ä¸€ä¸ªäº‹åŠ¡èŒƒå›´å†…ï¼Œä¸¤ä¸ªæ“ä½œéƒ½ä¼šè¢«å›æ»šï¼‰</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-e0b828270ca767ac9a0bbe5b44b89daf-image-20230109154025262.png"></p><p>ç„¶ååœ¨dept_logè¡¨ä¸­æ²¡æœ‰è®°å½•æ—¥å¿—æ•°æ®</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-938e9bb08eeea74a1bdfa7e031e228e4-image-20230109154344393.png"> </p><p><strong>åŸå› åˆ†æ:</strong></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦æ¥åˆ†æä¸€ä¸‹å…·ä½“æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„æ—¥å¿—æ²¡æœ‰æˆåŠŸçš„è®°å½•ã€‚</p><ul><li><p>åœ¨æ‰§è¡Œdeleteæ“ä½œæ—¶å¼€å¯äº†ä¸€ä¸ªäº‹åŠ¡</p></li><li><p>å½“æ‰§è¡Œinsertæ“ä½œæ—¶ï¼Œinsertè®¾ç½®çš„äº‹åŠ¡ä¼ æ’­è¡Œæ˜¯é»˜è®¤å€¼REQUIREDï¼Œè¡¨ç¤ºæœ‰äº‹åŠ¡å°±åŠ å…¥ï¼Œæ²¡æœ‰åˆ™æ–°å»ºäº‹åŠ¡</p></li><li><p>æ­¤æ—¶ï¼šdeleteå’Œinsertæ“ä½œä½¿ç”¨äº†åŒä¸€ä¸ªäº‹åŠ¡ï¼ŒåŒä¸€ä¸ªäº‹åŠ¡ä¸­çš„å¤šä¸ªæ“ä½œï¼Œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ï¼Œæ‰€ä»¥å½“å¼‚å¸¸å‘ç”Ÿæ—¶è¿›è¡Œäº‹åŠ¡å›æ»šï¼Œå°±ä¼šå›æ»šdeleteå’Œinsertæ“ä½œ</p></li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-55b7b5bd546cb2da1283f9054dabab96-image-20230109162420479.png"></p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><p>åœ¨DeptLogServiceImplç±»ä¸­insertæ–¹æ³•ä¸Šï¼Œæ·»åŠ @Transactional(propagation = Propagation.REQUIRES_NEW)</p><blockquote><p>Propagation.REQUIRES_NEW  ï¼šä¸è®ºæ˜¯å¦æœ‰äº‹åŠ¡ï¼Œéƒ½åˆ›å»ºæ–°äº‹åŠ¡  ï¼Œè¿è¡Œåœ¨ä¸€ä¸ªç‹¬ç«‹çš„äº‹åŠ¡ä¸­ã€‚</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptLogServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptLogService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptLogMapper</span> deptLogMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>propagation <span class="token operator">=</span> <span class="token class-name">Propagation</span><span class="token punctuation">.</span><span class="token constant">REQUIRES_NEW</span><span class="token punctuation">)</span><span class="token comment">//äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼šä¸è®ºæ˜¯å¦æœ‰äº‹åŠ¡ï¼Œéƒ½æ–°å»ºäº‹åŠ¡</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">DeptLog</span> deptLog<span class="token punctuation">)</span> <span class="token punctuation">{</span>        deptLogMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>deptLog<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡å¯SpringBootæœåŠ¡ï¼Œå†æ¬¡æµ‹è¯•åˆ é™¤3å·éƒ¨é—¨ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-72161158b54664b707111ceb48dd07cf-image-20230109170002879.png"></p><p>é‚£æ­¤æ—¶ï¼ŒDeptServiceImplä¸­çš„deleteæ–¹æ³•è¿è¡Œæ—¶ï¼Œä¼šå¼€å¯ä¸€ä¸ªäº‹åŠ¡ã€‚ å½“è°ƒç”¨  deptLogService.insert(deptLog)  æ—¶ï¼Œä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œé‚£æ­¤æ—¶ï¼Œå½“insertæ–¹æ³•è¿è¡Œå®Œæ¯•ä¹‹åï¼Œäº‹åŠ¡å°±å·²ç»æäº¤äº†ã€‚ å³ä½¿å¤–éƒ¨çš„äº‹åŠ¡å‡ºç°å¼‚å¸¸ï¼Œå†…éƒ¨å·²ç»æäº¤çš„äº‹åŠ¡ï¼Œä¹Ÿä¸ä¼šå›æ»šäº†ï¼Œå› ä¸ºæ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„äº‹åŠ¡ã€‚</p><p>åˆ°æ­¤äº‹åŠ¡ä¼ æ’­è¡Œä¸ºå·²æ¼”ç¤ºå®Œæˆï¼Œäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºæˆ‘ä»¬åªéœ€è¦æŒæ¡ä¸¤ä¸ªï¼šREQUIREDã€REQUIRES_NEWã€‚</p><blockquote><ul><li><p>REQUIRED ï¼šå¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯ç”¨è¯¥ä¼ æ’­è¡Œä¸ºå³å¯ã€‚</p></li><li><p>REQUIRES_NEW ï¼šå½“æˆ‘ä»¬ä¸å¸Œæœ›äº‹åŠ¡ä¹‹é—´ç›¸äº’å½±å“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¯¥ä¼ æ’­è¡Œä¸ºã€‚æ¯”å¦‚ï¼šä¸‹è®¢å•å‰éœ€è¦è®°å½•æ—¥å¿—ï¼Œä¸è®ºè®¢å•ä¿å­˜æˆåŠŸä¸å¦ï¼Œéƒ½éœ€è¦ä¿è¯æ—¥å¿—è®°å½•èƒ½å¤Ÿè®°å½•æˆåŠŸã€‚</p></li></ul></blockquote><h2 id="2-AOPåŸºç¡€"><a href="#2-AOPåŸºç¡€" class="headerlink" title="2. AOPåŸºç¡€"></a>2. AOPåŸºç¡€</h2><p>å­¦ä¹ å®Œspringçš„äº‹åŠ¡ç®¡ç†ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥åˆ°AOPçš„å­¦ä¹ ã€‚ AOPä¹Ÿæ˜¯springæ¡†æ¶çš„ç¬¬äºŒå¤§æ ¸å¿ƒï¼Œæˆ‘ä»¬å…ˆæ¥å­¦ä¹ AOPçš„åŸºç¡€ã€‚</p><p>åœ¨AOPåŸºç¡€è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬é¦–å…ˆä»‹ç»ä¸€ä¸‹ä»€ä¹ˆæ˜¯AOPï¼Œå†é€šè¿‡ä¸€ä¸ªå¿«é€Ÿå…¥é—¨ç¨‹åºï¼Œè®©å¤§å®¶å¿«é€Ÿä½“éªŒAOPç¨‹åºçš„å¼€å‘ã€‚æœ€åå†ä»‹ç»AOPå½“ä¸­æ‰€æ¶‰åŠåˆ°çš„ä¸€äº›æ ¸å¿ƒçš„æ¦‚å¿µã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/06-abda5ae454b2dc6ba1f92d06f15ba03f-image-20241206153805698.png" alt="AOP"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/09-3846b71d517a5ea1394ca7ac56e4e933-image-20241209203152054.png"></p><h3 id="2-1-AOPæ¦‚è¿°"><a href="#2-1-AOPæ¦‚è¿°" class="headerlink" title="2.1 AOPæ¦‚è¿°"></a>2.1 AOPæ¦‚è¿°</h3><p>ä»€ä¹ˆæ˜¯AOPï¼Ÿ</p><ul><li>AOPè‹±æ–‡å…¨ç§°ï¼šAspect Oriented Programmingï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ã€é¢å‘æ–¹é¢ç¼–ç¨‹ï¼‰ï¼Œå…¶å®è¯´ç™½äº†ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹å°±æ˜¯é¢å‘ç‰¹å®šæ–¹æ³•ç¼–ç¨‹ã€‚</li></ul><p>é‚£ä»€ä¹ˆåˆæ˜¯é¢å‘æ–¹æ³•ç¼–ç¨‹å‘¢ï¼Œä¸ºä»€ä¹ˆåˆéœ€è¦é¢å‘æ–¹æ³•ç¼–ç¨‹å‘¢ï¼Ÿæ¥æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­åšä¸€ä¸ªè¯´æ˜ï¼š</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬è¿™é‡Œæœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œé¡¹ç›®ä¸­å¼€å‘äº†å¾ˆå¤šçš„ä¸šåŠ¡åŠŸèƒ½ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-3776cd33ed649a7f087896b9517c7adb-image-20230112154547523.png"> </p><p>ç„¶è€Œæœ‰ä¸€äº›ä¸šåŠ¡åŠŸèƒ½æ‰§è¡Œæ•ˆç‡æ¯”è¾ƒä½ï¼Œæ‰§è¡Œè€—æ—¶è¾ƒé•¿ï¼Œæˆ‘ä»¬éœ€è¦é’ˆå¯¹äºè¿™äº›ä¸šåŠ¡æ–¹æ³•è¿›è¡Œä¼˜åŒ–ã€‚ é‚£é¦–å…ˆç¬¬ä¸€æ­¥å°±éœ€è¦å®šä½å‡ºæ‰§è¡Œè€—æ—¶æ¯”è¾ƒé•¿çš„ä¸šåŠ¡æ–¹æ³•ï¼Œå†é’ˆå¯¹äºä¸šåŠ¡æ–¹æ³•å†æ¥è¿›è¡Œä¼˜åŒ–ã€‚</p><p>æ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦ç»Ÿè®¡å½“å‰è¿™ä¸ªé¡¹ç›®å½“ä¸­æ¯ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•çš„æ‰§è¡Œè€—æ—¶ã€‚é‚£ä¹ˆç»Ÿè®¡æ¯ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•çš„æ‰§è¡Œè€—æ—¶è¯¥æ€ä¹ˆå®ç°ï¼Ÿ</p><p>å¯èƒ½å¤šæ•°äººé¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯åœ¨æ¯ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•è¿è¡Œä¹‹å‰ï¼Œè®°å½•è¿™ä¸ªæ–¹æ³•è¿è¡Œçš„å¼€å§‹æ—¶é—´ã€‚åœ¨è¿™ä¸ªæ–¹æ³•è¿è¡Œå®Œæ¯•ä¹‹åï¼Œå†æ¥è®°å½•è¿™ä¸ªæ–¹æ³•è¿è¡Œçš„ç»“æŸæ—¶é—´ã€‚æ‹¿ç»“æŸæ—¶é—´å‡å»å¼€å§‹æ—¶é—´ï¼Œä¸å°±æ˜¯è¿™ä¸ªæ–¹æ³•çš„æ‰§è¡Œè€—æ—¶å—ï¼Ÿ</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-5d60063203b3b75acacf349358935953-image-20230112154605206.png" alt="image-20230112154605206" style="zoom:80%;"> <p>ä»¥ä¸Šåˆ†æçš„å®ç°æ–¹å¼æ˜¯å¯ä»¥è§£å†³éœ€æ±‚é—®é¢˜çš„ã€‚ä½†æ˜¯å¯¹äºä¸€ä¸ªé¡¹ç›®æ¥è®²ï¼Œé‡Œé¢ä¼šåŒ…å«å¾ˆå¤šçš„ä¸šåŠ¡æ¨¡å—ï¼Œæ¯ä¸ªä¸šåŠ¡æ¨¡å—åˆåŒ…å«å¾ˆå¤šå¢åˆ æ”¹æŸ¥çš„æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬è¦åœ¨æ¯ä¸€ä¸ªæ¨¡å—ä¸‹çš„ä¸šåŠ¡æ–¹æ³•ä¸­ï¼Œæ·»åŠ è®°å½•å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´ã€è®¡ç®—æ‰§è¡Œè€—æ—¶çš„ä»£ç ï¼Œå°±ä¼šè®©ç¨‹åºå‘˜çš„å·¥ä½œå˜å¾—éå¸¸ç¹çã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-1b0cdfbc746a5188c4155a057ab80c97-image-20230112154627546.png" alt="image-20230112154627546" style="zoom:80%;"> <p>è€ŒAOPé¢å‘æ–¹æ³•ç¼–ç¨‹ï¼Œå°±å¯ä»¥åšåˆ°åœ¨ä¸æ”¹åŠ¨è¿™äº›åŸå§‹æ–¹æ³•çš„åŸºç¡€ä¸Šï¼Œé’ˆå¯¹ç‰¹å®šçš„æ–¹æ³•è¿›è¡ŒåŠŸèƒ½çš„å¢å¼ºã€‚</p><blockquote><p>AOPçš„ä½œç”¨ï¼šåœ¨ç¨‹åºè¿è¡ŒæœŸé—´åœ¨ä¸ä¿®æ”¹æºä»£ç çš„åŸºç¡€ä¸Šå¯¹å·²æœ‰æ–¹æ³•è¿›è¡Œå¢å¼ºï¼ˆæ— ä¾µå…¥æ€§: è§£è€¦ï¼‰</p></blockquote><p>æˆ‘ä»¬è¦æƒ³å®Œæˆç»Ÿè®¡å„ä¸ªä¸šåŠ¡æ–¹æ³•æ‰§è¡Œè€—æ—¶çš„éœ€æ±‚ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ï¼Œå°†è®°å½•æ–¹æ³•æ‰§è¡Œè€—æ—¶è¿™ä¸€éƒ¨åˆ†å…¬å…±çš„é€»è¾‘ä»£ç ï¼Œå®šä¹‰åœ¨æ¨¡æ¿æ–¹æ³•å½“ä¸­ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•å¼€å§‹è¿è¡Œä¹‹å‰ï¼Œæ¥è®°å½•è¿™ä¸ªæ–¹æ³•è¿è¡Œçš„å¼€å§‹æ—¶é—´ï¼Œåœ¨æ–¹æ³•ç»“æŸè¿è¡Œçš„æ—¶å€™ï¼Œå†æ¥è®°å½•æ–¹æ³•è¿è¡Œçš„ç»“æŸæ—¶é—´ï¼Œä¸­é—´å°±æ¥è¿è¡ŒåŸå§‹çš„ä¸šåŠ¡æ–¹æ³•ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-ab2267b6a835f005a7a7213f6b161f63-image-20230112154530101.png" alt="image-20230112154530101" style="zoom:80%;"> <p>è€Œä¸­é—´è¿è¡Œçš„åŸå§‹ä¸šåŠ¡æ–¹æ³•ï¼Œå¯èƒ½æ˜¯å…¶ä¸­çš„ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•ï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬åªæƒ³é€šè¿‡ éƒ¨é—¨ç®¡ç†çš„ list æ–¹æ³•çš„æ‰§è¡Œè€—æ—¶ï¼Œé‚£å°±åªæœ‰è¿™ä¸€ä¸ªæ–¹æ³•æ˜¯åŸå§‹ä¸šåŠ¡æ–¹æ³•ã€‚  è€Œå¦‚æœï¼Œæˆ‘ä»¬æ˜¯å…ˆæƒ³ç»Ÿè®¡æ‰€æœ‰éƒ¨é—¨ç®¡ç†çš„ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œè€—æ—¶ï¼Œé‚£æ­¤æ—¶ï¼Œæ‰€æœ‰çš„éƒ¨é—¨ç®¡ç†çš„ä¸šåŠ¡æ–¹æ³•éƒ½æ˜¯ åŸå§‹ä¸šåŠ¡æ–¹æ³•ã€‚ <strong>é‚£é¢å‘è¿™æ ·çš„æŒ‡å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•è¿›è¡Œç¼–ç¨‹ï¼Œæˆ‘ä»¬å°±ç§°ä¹‹ä¸º é¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚</strong></p><p>é‚£æ­¤æ—¶ï¼Œå½“æˆ‘ä»¬å†è°ƒç”¨éƒ¨é—¨ç®¡ç†çš„ list ä¸šåŠ¡æ–¹æ³•æ—¶å•Šï¼Œå¹¶ä¸ä¼šç›´æ¥æ‰§è¡Œ list æ–¹æ³•çš„é€»è¾‘ï¼Œè€Œæ˜¯ä¼šæ‰§è¡Œæˆ‘ä»¬æ‰€å®šä¹‰çš„ æ¨¡æ¿æ–¹æ³• ï¼Œ ç„¶åå†æ¨¡æ¿æ–¹æ³•ä¸­ï¼š</p><ul><li>è®°å½•æ–¹æ³•è¿è¡Œå¼€å§‹æ—¶é—´</li><li>è¿è¡ŒåŸå§‹çš„ä¸šåŠ¡æ–¹æ³•ï¼ˆé‚£æ­¤æ—¶åŸå§‹çš„ä¸šåŠ¡æ–¹æ³•ï¼Œå°±æ˜¯ list æ–¹æ³•ï¼‰</li><li>è®°å½•æ–¹æ³•è¿è¡Œç»“æŸæ—¶é—´ï¼Œè®¡ç®—æ–¹æ³•æ‰§è¡Œè€—æ—¶</li></ul><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-8846bead7e9d91e07e01d8d86d134c71-image-20230112155813944.png" alt="image-20230112155813944" style="zoom:80%;"> <p>ä¸è®ºï¼Œæˆ‘ä»¬è¿è¡Œçš„æ˜¯é‚£ä¸ªä¸šåŠ¡æ–¹æ³•ï¼Œæœ€åå…¶å®è¿è¡Œçš„å°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„æ¨¡æ¿æ–¹æ³•ï¼Œè€Œåœ¨æ¨¡æ¿æ–¹æ³•ä¸­ï¼Œå°±å®Œæˆäº†åŸå§‹æ–¹æ³•æ‰§è¡Œè€—æ—¶çš„ç»Ÿè®¡æ“ä½œ ã€‚(é‚£è¿™æ ·å‘¢ï¼Œæˆ‘ä»¬å°±é€šè¿‡ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•å°±å®Œæˆäº†æŒ‡å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªä¸šåŠ¡æ–¹æ³•æ‰§è¡Œè€—æ—¶çš„ç»Ÿè®¡)</p><p>è€Œå¤§å®¶ä¼šå‘ç°ï¼Œè¿™ä¸ªæµç¨‹ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯ä¼¼æ›¾ç›¸è¯†å•Šï¼Ÿ </p><p>å¯¹äº†ï¼Œå°±æ˜¯å’Œæˆ‘ä»¬ä¹‹å‰æ‰€å­¦ä¹ çš„åŠ¨æ€ä»£ç†æŠ€æœ¯æ˜¯éå¸¸ç±»ä¼¼çš„ã€‚ æˆ‘ä»¬æ‰€è¯´çš„æ¨¡æ¿æ–¹æ³•ï¼Œå…¶å®å°±æ˜¯ä»£ç†å¯¹è±¡ä¸­æ‰€å®šä¹‰çš„æ–¹æ³•ï¼Œé‚£ä»£ç†å¯¹è±¡ä¸­çš„æ–¹æ³•ä»¥åŠæ ¹æ®å¯¹åº”çš„ä¸šåŠ¡éœ€è¦ï¼Œ å®Œæˆäº†å¯¹åº”çš„ä¸šåŠ¡åŠŸèƒ½ï¼Œå½“è¿è¡ŒåŸå§‹ä¸šåŠ¡æ–¹æ³•æ—¶ï¼Œå°±ä¼šè¿è¡Œä»£ç†å¯¹è±¡ä¸­çš„æ–¹æ³•ï¼Œä»è€Œå®ç°ç»Ÿè®¡ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œè€—æ—¶çš„æ“ä½œã€‚</p><p>å…¶å®ï¼ŒAOPé¢å‘åˆ‡é¢ç¼–ç¨‹å’ŒOOPé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸€æ ·ï¼Œå®ƒä»¬éƒ½ä»…ä»…æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œè€ŒåŠ¨æ€ä»£ç†æŠ€æœ¯æ˜¯è¿™ç§æ€æƒ³æœ€ä¸»æµçš„å®ç°æ–¹å¼ã€‚è€ŒSpringçš„AOPæ˜¯Springæ¡†æ¶çš„é«˜çº§æŠ€æœ¯ï¼Œæ—¨åœ¨ç®¡ç†beanå¯¹è±¡çš„è¿‡ç¨‹ä¸­åº•å±‚ä½¿ç”¨åŠ¨æ€ä»£ç†æœºåˆ¶ï¼Œå¯¹ç‰¹å®šçš„æ–¹æ³•è¿›è¡Œç¼–ç¨‹(åŠŸèƒ½å¢å¼º)ã€‚</p><blockquote><p>AOPçš„ä¼˜åŠ¿ï¼š</p><ol><li>å‡å°‘é‡å¤ä»£ç </li><li>æé«˜å¼€å‘æ•ˆç‡</li><li>ç»´æŠ¤æ–¹ä¾¿</li></ol></blockquote><h3 id="2-2-AOPå¿«é€Ÿå…¥é—¨"><a href="#2-2-AOPå¿«é€Ÿå…¥é—¨" class="headerlink" title="2.2 AOPå¿«é€Ÿå…¥é—¨"></a>2.2 AOPå¿«é€Ÿå…¥é—¨</h3><p>åœ¨äº†è§£äº†ä»€ä¹ˆæ˜¯AOPåï¼Œæˆ‘ä»¬ä¸‹é¢é€šè¿‡ä¸€ä¸ªå¿«é€Ÿå…¥é—¨ç¨‹åºï¼Œä½“éªŒä¸‹AOPçš„å¼€å‘ï¼Œå¹¶æŒæ¡Springä¸­AOPçš„å¼€å‘æ­¥éª¤ã€‚</p><p><strong>éœ€æ±‚ï¼š</strong>ç»Ÿè®¡å„ä¸ªä¸šåŠ¡å±‚æ–¹æ³•æ‰§è¡Œè€—æ—¶ã€‚</p><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><ol><li>å¯¼å…¥ä¾èµ–ï¼šåœ¨pom.xmlä¸­å¯¼å…¥AOPçš„ä¾èµ–</li><li>ç¼–å†™AOPç¨‹åºï¼šé’ˆå¯¹äºç‰¹å®šæ–¹æ³•æ ¹æ®ä¸šåŠ¡éœ€è¦è¿›è¡Œç¼–ç¨‹</li></ol><blockquote><p>ä¸ºæ¼”ç¤ºæ–¹ä¾¿ï¼Œå¯ä»¥è‡ªå»ºæ–°é¡¹ç›®æˆ–å¯¼å…¥æä¾›çš„<code>springboot-aop-quickstart</code>é¡¹ç›®å·¥ç¨‹</p></blockquote><p><strong>pom.xml</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-aop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>AOPç¨‹åºï¼šTimeAspect</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Aspect</span> <span class="token comment">//å½“å‰ç±»ä¸ºåˆ‡é¢ç±»</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TimeAspect</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>     <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">recordTime</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>        <span class="token comment">//è®°å½•æ–¹æ³•æ‰§è¡Œå¼€å§‹æ—¶é—´</span>        <span class="token keyword">long</span> begin <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ‰§è¡ŒåŸå§‹æ–¹æ³•</span>        <span class="token class-name">Object</span> result <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è®°å½•æ–¹æ³•æ‰§è¡Œç»“æŸæ—¶é—´</span>        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è®¡ç®—æ–¹æ³•æ‰§è¡Œè€—æ—¶</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>pjp<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"æ‰§è¡Œè€—æ—¶: {}æ¯«ç§’"</span><span class="token punctuation">,</span>end<span class="token operator">-</span>begin<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡æµ‹è¯•ç¨‹åºï¼š</p><ul><li>æŸ¥è¯¢3å·éƒ¨é—¨ä¿¡æ¯</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-2eecfed5cb64809565a0638083544bcd-image-20230110143404792.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-3baeb1731a49b8b566749625f50011d9-image-20230110143611669.png"></p><blockquote><p>æˆ‘ä»¬å¯ä»¥å†æµ‹è¯•ä¸‹ï¼šæŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨ä¿¡æ¯ï¼ˆåŒæ ·æ‰§è¡ŒAOPç¨‹åºï¼‰</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-cc88dcd9a353e129e2794e863fe717fc-image-20230110143815479.png"></p></blockquote><p>æˆ‘ä»¬é€šè¿‡AOPå…¥é—¨ç¨‹åºå®Œæˆäº†ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œè€—æ—¶çš„ç»Ÿè®¡ï¼Œé‚£å…¶å®AOPçš„åŠŸèƒ½è¿œä¸æ­¢äºæ­¤ï¼Œå¸¸è§çš„åº”ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p><ul><li>è®°å½•ç³»ç»Ÿçš„æ“ä½œæ—¥å¿—</li><li>æƒé™æ§åˆ¶</li><li>äº‹åŠ¡ç®¡ç†ï¼šæˆ‘ä»¬å‰é¢æ‰€è®²è§£çš„Springäº‹åŠ¡ç®¡ç†ï¼Œåº•å±‚å…¶å®ä¹Ÿæ˜¯é€šè¿‡AOPæ¥å®ç°çš„ï¼Œåªè¦æ·»åŠ @Transactionalæ³¨è§£ä¹‹åï¼ŒAOPç¨‹åºè‡ªåŠ¨ä¼šåœ¨åŸå§‹æ–¹æ³•è¿è¡Œå‰å…ˆæ¥å¼€å¯äº‹åŠ¡ï¼Œåœ¨åŸå§‹æ–¹æ³•è¿è¡Œå®Œæ¯•ä¹‹åæäº¤æˆ–å›æ»šäº‹åŠ¡</li></ul><p>è¿™äº›éƒ½æ˜¯AOPåº”ç”¨çš„å…¸å‹åœºæ™¯ã€‚</p><p>é€šè¿‡å…¥é—¨ç¨‹åºï¼Œæˆ‘ä»¬ä¹Ÿåº”è¯¥æ„Ÿå—åˆ°äº†AOPé¢å‘åˆ‡é¢ç¼–ç¨‹çš„ä¸€äº›ä¼˜åŠ¿ï¼š</p><ul><li><p>ä»£ç æ— ä¾µå…¥ï¼šæ²¡æœ‰ä¿®æ”¹åŸå§‹çš„ä¸šåŠ¡æ–¹æ³•ï¼Œå°±å·²ç»å¯¹åŸå§‹çš„ä¸šåŠ¡æ–¹æ³•è¿›è¡Œäº†åŠŸèƒ½çš„å¢å¼ºæˆ–è€…æ˜¯åŠŸèƒ½çš„æ”¹å˜</p></li><li><p>å‡å°‘äº†é‡å¤ä»£ç </p></li><li><p>æé«˜å¼€å‘æ•ˆç‡</p></li><li><p>ç»´æŠ¤æ–¹ä¾¿</p></li></ul><h3 id="2-3-AOPæ ¸å¿ƒæ¦‚å¿µ"><a href="#2-3-AOPæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="2.3 AOPæ ¸å¿ƒæ¦‚å¿µ"></a>2.3 AOPæ ¸å¿ƒæ¦‚å¿µ</h3><p>é€šè¿‡SpringAOPçš„å¿«é€Ÿå…¥é—¨ï¼Œæ„Ÿå—äº†ä¸€ä¸‹AOPé¢å‘åˆ‡é¢ç¼–ç¨‹çš„å¼€å‘æ–¹å¼ã€‚ä¸‹é¢æˆ‘ä»¬å†æ¥å­¦ä¹ AOPå½“ä¸­æ¶‰åŠåˆ°çš„ä¸€äº›æ ¸å¿ƒæ¦‚å¿µã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/09-c1a0da8cef07c41fee76c086e3cc0bae-image-20241209211012215.png" alt="æ ¸å¿ƒæ¦‚å¿µ"></p><p><strong>1. è¿æ¥ç‚¹ï¼šJoinPoint</strong>ï¼Œå¯ä»¥è¢«AOPæ§åˆ¶çš„æ–¹æ³•ï¼ˆæš—å«æ–¹æ³•æ‰§è¡Œæ—¶çš„ç›¸å…³ä¿¡æ¯ï¼‰</p><p>â€‹è¿æ¥ç‚¹æŒ‡çš„æ˜¯å¯ä»¥è¢«aopæ§åˆ¶çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼šå…¥é—¨ç¨‹åºå½“ä¸­æ‰€æœ‰çš„ä¸šåŠ¡æ–¹æ³•éƒ½æ˜¯å¯ä»¥è¢«aopæ§åˆ¶çš„æ–¹æ³•ã€‚</p><p>â€‹<img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-f51b47035fe22e72253ddff7152ebbed-image-20230112160708474.png"> </p><p>â€‹åœ¨SpringAOPæä¾›çš„JoinPointå½“ä¸­ï¼Œå°è£…äº†è¿æ¥ç‚¹æ–¹æ³•åœ¨æ‰§è¡Œæ—¶çš„ç›¸å…³ä¿¡æ¯ã€‚ï¼ˆåé¢ä¼šæœ‰å…·ä½“çš„è®²è§£ï¼‰</p><p><strong>2. é€šçŸ¥ï¼šAdvice</strong>ï¼ŒæŒ‡å“ªäº›é‡å¤çš„é€»è¾‘ï¼Œä¹Ÿå°±æ˜¯å…±æ€§åŠŸèƒ½ï¼ˆæœ€ç»ˆä½“ç°ä¸ºä¸€ä¸ªæ–¹æ³•ï¼‰</p><p>â€‹åœ¨å…¥é—¨ç¨‹åºä¸­æ˜¯éœ€è¦ç»Ÿè®¡å„ä¸ªä¸šåŠ¡æ–¹æ³•çš„æ‰§è¡Œè€—æ—¶çš„ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦åœ¨è¿™äº›ä¸šåŠ¡æ–¹æ³•è¿è¡Œå¼€å§‹ä¹‹å‰ï¼Œå…ˆè®°å½•è¿™ä¸ªæ–¹æ³•è¿è¡Œçš„å¼€å§‹æ—¶é—´ï¼Œåœ¨æ¯ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•è¿è¡Œç»“æŸçš„æ—¶å€™ï¼Œå†æ¥è®°å½•è¿™ä¸ªæ–¹æ³•è¿è¡Œçš„ç»“æŸæ—¶é—´ã€‚</p><p>â€‹ä½†æ˜¯åœ¨AOPé¢å‘åˆ‡é¢ç¼–ç¨‹å½“ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å°†è¿™éƒ¨åˆ†é‡å¤çš„ä»£ç é€»è¾‘æŠ½å–å‡ºæ¥å•ç‹¬å®šä¹‰ã€‚æŠ½å–å‡ºæ¥çš„è¿™ä¸€éƒ¨åˆ†é‡å¤çš„é€»è¾‘ï¼Œä¹Ÿå°±æ˜¯å…±æ€§çš„åŠŸèƒ½ã€‚</p><p>â€‹<img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-edbfc58d49de02bf5d93010887b6bc2f-image-20230112160852883.png" alt="image-20230112160852883" style="zoom:80%;"> </p><p>â€‹</p><p><strong>3. åˆ‡å…¥ç‚¹ï¼šPointCut</strong>ï¼ŒåŒ¹é…è¿æ¥ç‚¹çš„æ¡ä»¶ï¼Œé€šçŸ¥ä»…ä¼šåœ¨åˆ‡å…¥ç‚¹æ–¹æ³•æ‰§è¡Œæ—¶è¢«åº”ç”¨</p><p>â€‹åœ¨é€šçŸ¥å½“ä¸­ï¼Œæˆ‘ä»¬æ‰€å®šä¹‰çš„å…±æ€§åŠŸèƒ½åˆ°åº•è¦åº”ç”¨åœ¨å“ªäº›æ–¹æ³•ä¸Šï¼Ÿæ­¤æ—¶å°±æ¶‰åŠåˆ°äº†åˆ‡å…¥ç‚¹pointcutæ¦‚å¿µã€‚åˆ‡å…¥ç‚¹æŒ‡çš„æ˜¯åŒ¹é…è¿æ¥ç‚¹çš„æ¡ä»¶ã€‚é€šçŸ¥ä»…ä¼šåœ¨åˆ‡å…¥ç‚¹æ–¹æ³•è¿è¡Œæ—¶æ‰ä¼šè¢«åº”ç”¨ã€‚</p><p>â€‹åœ¨aopçš„å¼€å‘å½“ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé€šè¿‡ä¸€ä¸ªåˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ¥æè¿°åˆ‡å…¥ç‚¹(åé¢ä¼šæœ‰è¯¦è§£)ã€‚</p><p>â€‹<img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-a1699099d249e98307a8b1f0be6d5f6b-image-20230112161131937.png" alt="image-20230112161131937" style="zoom:80%;"> </p><p>â€‹å‡å¦‚ï¼šåˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ”¹ä¸ºDeptServiceImpl.list()ï¼Œæ­¤æ—¶å°±ä»£è¡¨ä»…ä»…åªæœ‰listè¿™ä¸€ä¸ªæ–¹æ³•æ˜¯åˆ‡å…¥ç‚¹ã€‚åªæœ‰list()æ–¹æ³•åœ¨è¿è¡Œçš„æ—¶å€™æ‰ä¼šåº”ç”¨é€šçŸ¥ã€‚</p><p>â€‹</p><p><strong>4. åˆ‡é¢ï¼šAspect</strong>ï¼Œæè¿°é€šçŸ¥ä¸åˆ‡å…¥ç‚¹çš„å¯¹åº”å…³ç³»ï¼ˆé€šçŸ¥+åˆ‡å…¥ç‚¹ï¼‰</p><p>â€‹å½“é€šçŸ¥å’Œåˆ‡å…¥ç‚¹ç»“åˆåœ¨ä¸€èµ·ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªåˆ‡é¢ã€‚é€šè¿‡åˆ‡é¢å°±èƒ½å¤Ÿæè¿°å½“å‰aopç¨‹åºéœ€è¦é’ˆå¯¹äºå“ªä¸ªåŸå§‹æ–¹æ³•ï¼Œåœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œä»€ä¹ˆæ ·çš„æ“ä½œã€‚</p><p>â€‹<img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-64e78611b268b34f7d5b997173ab7c6e-image-20230112161335186.png" alt="image-20230112161335186" style="zoom:80%;"> </p><p>â€‹åˆ‡é¢æ‰€åœ¨çš„ç±»ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§°ä¸º<strong>åˆ‡é¢ç±»</strong>ï¼ˆè¢«@Aspectæ³¨è§£æ ‡è¯†çš„ç±»ï¼‰</p><p>â€‹</p><p><strong>5. ç›®æ ‡å¯¹è±¡ï¼šTarget</strong>ï¼Œé€šçŸ¥æ‰€åº”ç”¨çš„å¯¹è±¡</p><p>â€‹ç›®æ ‡å¯¹è±¡æŒ‡çš„å°±æ˜¯é€šçŸ¥æ‰€åº”ç”¨çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å°±ç§°ä¹‹ä¸ºç›®æ ‡å¯¹è±¡ã€‚</p><p>â€‹<img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-14c37621d94b455c90c64b1e739a3508-image-20230112161657667.png"> </p><p>AOPçš„æ ¸å¿ƒæ¦‚å¿µæˆ‘ä»¬ä»‹ç»å®Œæ¯•ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥åˆ†æä¸€ä¸‹æˆ‘ä»¬æ‰€å®šä¹‰çš„é€šçŸ¥æ˜¯å¦‚ä½•ä¸ç›®æ ‡å¯¹è±¡ç»“åˆåœ¨ä¸€èµ·ï¼Œå¯¹ç›®æ ‡å¯¹è±¡å½“ä¸­çš„æ–¹æ³•è¿›è¡ŒåŠŸèƒ½å¢å¼ºçš„ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-76124f9e3579eac2e583d7b8e58dece6-image-20230112161821401.png" alt="image-20230112161821401" style="zoom:80%;"> <p>Springçš„AOPåº•å±‚æ˜¯åŸºäºåŠ¨æ€ä»£ç†æŠ€æœ¯æ¥å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨çš„åŸºäºåŠ¨æ€ä»£ç†æŠ€æœ¯ä¸ºç›®æ ‡å¯¹è±¡ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„ä»£ç†å¯¹è±¡ã€‚åœ¨ä»£ç†å¯¹è±¡å½“ä¸­å°±ä¼šå¯¹ç›®æ ‡å¯¹è±¡å½“ä¸­çš„åŸå§‹æ–¹æ³•è¿›è¡ŒåŠŸèƒ½çš„å¢å¼ºã€‚</p><h2 id="3-AOPè¿›é˜¶"><a href="#3-AOPè¿›é˜¶" class="headerlink" title="3. AOPè¿›é˜¶"></a>3. AOPè¿›é˜¶</h2><p>AOPçš„åŸºç¡€çŸ¥è¯†å­¦ä¹ å®Œä¹‹åï¼Œä¸‹é¢æˆ‘ä»¬å¯¹AOPå½“ä¸­çš„å„ä¸ªç»†èŠ‚è¿›è¡Œè¯¦ç»†çš„å­¦ä¹ ã€‚ä¸»è¦åˆ†ä¸º4ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>é€šçŸ¥ç±»å‹</li><li>é€šçŸ¥é¡ºåº</li><li>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</li><li>è¿æ¥ç‚¹</li></ol><p>æˆ‘ä»¬å…ˆæ¥å­¦ä¹ ç¬¬ä¸€éƒ¨åˆ†é€šçŸ¥ç±»å‹ã€‚</p><h3 id="3-1-é€šçŸ¥ç±»å‹"><a href="#3-1-é€šçŸ¥ç±»å‹" class="headerlink" title="3.1 é€šçŸ¥ç±»å‹"></a>3.1 é€šçŸ¥ç±»å‹</h3><p>åœ¨å…¥é—¨ç¨‹åºå½“ä¸­ï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨äº†ä¸€ç§åŠŸèƒ½æœ€ä¸ºå¼ºå¤§çš„é€šçŸ¥ç±»å‹ï¼šAroundç¯ç»•é€šçŸ¥ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">recordTime</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>    <span class="token comment">//è®°å½•æ–¹æ³•æ‰§è¡Œå¼€å§‹æ—¶é—´</span>    <span class="token keyword">long</span> begin <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//æ‰§è¡ŒåŸå§‹æ–¹æ³•</span>    <span class="token class-name">Object</span> result <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//è®°å½•æ–¹æ³•æ‰§è¡Œç»“æŸæ—¶é—´</span>    <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//è®¡ç®—æ–¹æ³•æ‰§è¡Œè€—æ—¶</span>    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>pjp<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"æ‰§è¡Œè€—æ—¶: {}æ¯«ç§’"</span><span class="token punctuation">,</span>end<span class="token operator">-</span>begin<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> result<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>åªè¦æˆ‘ä»¬åœ¨é€šçŸ¥æ–¹æ³•ä¸ŠåŠ ä¸Šäº†@Aroundæ³¨è§£ï¼Œå°±ä»£è¡¨å½“å‰é€šçŸ¥æ˜¯ä¸€ä¸ªç¯ç»•é€šçŸ¥ã€‚</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/09-6499f0047d5a7060abf2c9c508fd617e-image-20241209211835325.png" alt="é€šçŸ¥ç±»å‹"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/09-78ea0c42ae375e186ab758da93851548-image-20241209212353074.png" alt="æ³¨æ„äº‹é¡¹"></p><p>Springä¸­AOPçš„é€šçŸ¥ç±»å‹ï¼š</p><ul><li>@Aroundï¼šç¯ç»•é€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•å‰ã€åéƒ½è¢«æ‰§è¡Œ</li><li>@Beforeï¼šå‰ç½®é€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•å‰è¢«æ‰§è¡Œ</li><li>@After ï¼šåç½®é€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•åè¢«æ‰§è¡Œï¼Œæ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ</li><li>@AfterReturning ï¼š è¿”å›åé€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•åè¢«æ‰§è¡Œï¼Œæœ‰å¼‚å¸¸ä¸ä¼šæ‰§è¡Œ</li><li>@AfterThrowing ï¼š å¼‚å¸¸åé€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•å‘ç”Ÿå¼‚å¸¸åæ‰§è¡Œ</li></ul><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç æ¼”ç¤ºï¼Œæ¥åŠ æ·±å¯¹äºä¸åŒé€šçŸ¥ç±»å‹çš„ç†è§£ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Aspect</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAspect1</span> <span class="token punctuation">{</span>    <span class="token comment">//å‰ç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"before ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//ç¯ç»•é€šçŸ¥</span>    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> proceedingJoinPoint<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"around before ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„åŸå§‹æ–¹æ³•æ‰§è¡Œ</span>        <span class="token class-name">Object</span> result <span class="token operator">=</span> proceedingJoinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//åŸå§‹æ–¹æ³•å¦‚æœæ‰§è¡Œæ—¶æœ‰å¼‚å¸¸ï¼Œç¯ç»•é€šçŸ¥ä¸­çš„åç½®ä»£ç ä¸ä¼šåœ¨æ‰§è¡Œäº†</span>                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"around after ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//åç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"after ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//è¿”å›åé€šçŸ¥ï¼ˆç¨‹åºåœ¨æ­£å¸¸æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œä¼šæ‰§è¡Œçš„åç½®é€šçŸ¥ï¼‰</span>    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterReturning</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"afterReturning ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//å¼‚å¸¸é€šçŸ¥ï¼ˆç¨‹åºåœ¨å‡ºç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œçš„åç½®é€šçŸ¥ï¼‰</span>    <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterThrowing</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"afterThrowing ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡ï¼Œè¿›è¡Œæµ‹è¯•ï¼š</p><p><strong>1. æ²¡æœ‰å¼‚å¸¸æƒ…å†µä¸‹ï¼š</strong></p><ul><li>ä½¿ç”¨postmanæµ‹è¯•æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨æ•°æ®</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-d9fecafd7539fdc02d1c25f80512209d-image-20230110165514461.png"></p><ul><li>æŸ¥çœ‹ideaä¸­æ§åˆ¶å°æ—¥å¿—è¾“å‡º</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-c54ef121460ad97c33e406cbf469604f-image-20230110165806934.png"></p><blockquote><p>ç¨‹åºæ²¡æœ‰å‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œ@AfterThrowingæ ‡è¯†çš„é€šçŸ¥æ–¹æ³•ä¸ä¼šæ‰§è¡Œã€‚</p></blockquote><p><strong>2. å‡ºç°å¼‚å¸¸æƒ…å†µä¸‹ï¼š</strong></p><p>ä¿®æ”¹DeptServiceImplä¸šåŠ¡å®ç°ç±»ä¸­çš„ä»£ç ï¼š æ·»åŠ å¼‚å¸¸</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptMapper</span> deptMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">&gt;</span></span> deptList <span class="token operator">=</span> deptMapper<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ¨¡æ‹Ÿå¼‚å¸¸</span>        <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> deptList<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡ï¼Œæµ‹è¯•å‘ç”Ÿå¼‚å¸¸æƒ…å†µä¸‹é€šçŸ¥çš„æ‰§è¡Œï¼š</p><ul><li>æŸ¥çœ‹ideaä¸­æ§åˆ¶å°æ—¥å¿—è¾“å‡º</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-f073ee6ff8367deded19b6487b229ce8-image-20230110171006874.png"></p><blockquote><p>ç¨‹åºå‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µä¸‹ï¼š</p><ul><li><p>@AfterReturningæ ‡è¯†çš„é€šçŸ¥æ–¹æ³•ä¸ä¼šæ‰§è¡Œï¼Œ@AfterThrowingæ ‡è¯†çš„é€šçŸ¥æ–¹æ³•æ‰§è¡Œäº†</p></li><li><p>@Aroundç¯ç»•é€šçŸ¥ä¸­åŸå§‹æ–¹æ³•è°ƒç”¨æ—¶æœ‰å¼‚å¸¸ï¼Œé€šçŸ¥ä¸­çš„ç¯ç»•åçš„ä»£ç é€»è¾‘ä¹Ÿä¸ä¼šåœ¨æ‰§è¡Œäº† ï¼ˆå› ä¸ºåŸå§‹æ–¹æ³•è°ƒç”¨å·²ç»å‡ºå¼‚å¸¸äº†ï¼‰</p></li></ul></blockquote><p>åœ¨ä½¿ç”¨é€šçŸ¥æ—¶çš„æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>@Aroundç¯ç»•é€šçŸ¥éœ€è¦è‡ªå·±è°ƒç”¨ <strong>ProceedingJoinPoint.proceed()</strong> æ¥è®©åŸå§‹æ–¹æ³•æ‰§è¡Œï¼Œå…¶ä»–é€šçŸ¥ä¸éœ€è¦è€ƒè™‘ç›®æ ‡æ–¹æ³•æ‰§è¡Œ</li><li>@Aroundç¯ç»•é€šçŸ¥æ–¹æ³•çš„è¿”å›å€¼ï¼Œ<strong>å¿…é¡»æŒ‡å®šä¸ºObject</strong>ï¼Œæ¥æ¥æ”¶åŸå§‹æ–¹æ³•çš„è¿”å›å€¼ï¼Œå¦åˆ™åŸå§‹æ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œæ˜¯è·å–ä¸åˆ°è¿”å›å€¼çš„ã€‚</li></ul><p>äº”ç§å¸¸è§çš„é€šçŸ¥ç±»å‹ï¼Œæˆ‘ä»¬å·²ç»æµ‹è¯•å®Œæ¯•äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹åˆšæ‰æ‰€ç¼–å†™çš„ä»£ç ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//å‰ç½®é€šçŸ¥</span><span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span><span class="token comment">//ç¯ç»•é€šçŸ¥</span><span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>  <span class="token comment">//åç½®é€šçŸ¥</span><span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span><span class="token comment">//è¿”å›åé€šçŸ¥ï¼ˆç¨‹åºåœ¨æ­£å¸¸æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œä¼šæ‰§è¡Œçš„åç½®é€šçŸ¥ï¼‰</span><span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span><span class="token comment">//å¼‚å¸¸é€šçŸ¥ï¼ˆç¨‹åºåœ¨å‡ºç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œçš„åç½®é€šçŸ¥ï¼‰</span><span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬å‘ç°å•Šï¼Œæ¯ä¸€ä¸ªæ³¨è§£é‡Œé¢éƒ½æŒ‡å®šäº†åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œè€Œä¸”è¿™äº›åˆ‡å…¥ç‚¹è¡¨è¾¾å¼éƒ½ä¸€æ¨¡ä¸€æ ·ã€‚æ­¤æ—¶æˆ‘ä»¬çš„ä»£ç å½“ä¸­å°±å­˜åœ¨äº†å¤§é‡çš„é‡å¤æ€§çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œå‡å¦‚æ­¤æ—¶åˆ‡å…¥ç‚¹è¡¨è¾¾å¼éœ€è¦å˜åŠ¨ï¼Œå°±éœ€è¦å°†æ‰€æœ‰çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä¸€ä¸ªä¸€ä¸ªçš„æ¥æ”¹åŠ¨ï¼Œå°±å˜å¾—éå¸¸ç¹çäº†ã€‚</p><p>æ€ä¹ˆæ¥è§£å†³è¿™ä¸ªåˆ‡å…¥ç‚¹è¡¨è¾¾å¼é‡å¤çš„é—®é¢˜ï¼Ÿ ç­”æ¡ˆå°±æ˜¯ï¼š<strong>æŠ½å–</strong></p><p>Springæä¾›äº†@PointCutæ³¨è§£ï¼Œè¯¥æ³¨è§£çš„ä½œç”¨æ˜¯å°†å…¬å…±çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æŠ½å–å‡ºæ¥ï¼Œéœ€è¦ç”¨åˆ°æ—¶å¼•ç”¨è¯¥åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å³å¯ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Aspect</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAspect1</span> <span class="token punctuation">{</span>    <span class="token comment">//åˆ‡å…¥ç‚¹æ–¹æ³•ï¼ˆå…¬å…±çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼‰</span>    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">pt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token comment">//å‰ç½®é€šçŸ¥ï¼ˆå¼•ç”¨åˆ‡å…¥ç‚¹ï¼‰</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"pt()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"before ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//ç¯ç»•é€šçŸ¥</span>    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"pt()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> proceedingJoinPoint<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"around before ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„åŸå§‹æ–¹æ³•æ‰§è¡Œ</span>        <span class="token class-name">Object</span> result <span class="token operator">=</span> proceedingJoinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//åŸå§‹æ–¹æ³•åœ¨æ‰§è¡Œæ—¶ï¼šå‘ç”Ÿå¼‚å¸¸</span>        <span class="token comment">//åç»­ä»£ç ä¸åœ¨æ‰§è¡Œ</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"around after ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//åç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">"pt()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"after ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//è¿”å›åé€šçŸ¥ï¼ˆç¨‹åºåœ¨æ­£å¸¸æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œä¼šæ‰§è¡Œçš„åç½®é€šçŸ¥ï¼‰</span>    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span><span class="token string">"pt()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterReturning</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"afterReturning ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//å¼‚å¸¸é€šçŸ¥ï¼ˆç¨‹åºåœ¨å‡ºç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œçš„åç½®é€šçŸ¥ï¼‰</span>    <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span><span class="token string">"pt()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterThrowing</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"afterThrowing ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå½“åˆ‡å…¥ç‚¹æ–¹æ³•ä½¿ç”¨privateä¿®é¥°æ—¶ï¼Œä»…èƒ½åœ¨å½“å‰åˆ‡é¢ç±»ä¸­å¼•ç”¨è¯¥è¡¨è¾¾å¼ï¼Œ å½“å¤–éƒ¨å…¶ä»–åˆ‡é¢ç±»ä¸­ä¹Ÿè¦å¼•ç”¨å½“å‰ç±»ä¸­çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œå°±éœ€è¦æŠŠprivateæ”¹ä¸ºpublicï¼Œè€Œåœ¨å¼•ç”¨çš„æ—¶å€™ï¼Œå…·ä½“çš„è¯­æ³•ä¸ºï¼š</p><p>å…¨ç±»å.æ–¹æ³•å()ï¼Œå…·ä½“å½¢å¼å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Aspect</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAspect2</span> <span class="token punctuation">{</span>    <span class="token comment">//å¼•ç”¨MyAspect1åˆ‡é¢ç±»ä¸­çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"com.itheima.aspect.MyAspect1.pt()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"MyAspect2 -&gt; before ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/09-78ea0c42ae375e186ab758da93851548-image-20241209212834528.png" alt="æ³¨æ„äº‹é¡¹"></p><h3 id="3-2-é€šçŸ¥é¡ºåº"><a href="#3-2-é€šçŸ¥é¡ºåº" class="headerlink" title="3.2 é€šçŸ¥é¡ºåº"></a>3.2 é€šçŸ¥é¡ºåº</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/09-9fd880131e6da89d425aa06f2cbe2c6b-image-20241209213238305.png" alt="é€šçŸ¥é¡ºåº"></p><p>è®²è§£å®Œäº†Springä¸­AOPæ‰€æ”¯æŒçš„5ç§é€šçŸ¥ç±»å‹ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥ç ”ç©¶é€šçŸ¥çš„æ‰§è¡Œé¡ºåºã€‚</p><p>å½“åœ¨é¡¹ç›®å¼€å‘å½“ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†å¤šä¸ªåˆ‡é¢ç±»ï¼Œè€Œå¤šä¸ªåˆ‡é¢ç±»ä¸­å¤šä¸ªåˆ‡å…¥ç‚¹éƒ½åŒ¹é…åˆ°äº†åŒä¸€ä¸ªç›®æ ‡æ–¹æ³•ã€‚æ­¤æ—¶å½“ç›®æ ‡æ–¹æ³•åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œè¿™å¤šä¸ªåˆ‡é¢ç±»å½“ä¸­çš„è¿™äº›é€šçŸ¥æ–¹æ³•éƒ½ä¼šè¿è¡Œã€‚</p><p>æ­¤æ—¶æˆ‘ä»¬å°±æœ‰ä¸€ä¸ªç–‘é—®ï¼Œè¿™å¤šä¸ªé€šçŸ¥æ–¹æ³•åˆ°åº•å“ªä¸ªå…ˆè¿è¡Œï¼Œå“ªä¸ªåè¿è¡Œï¼Ÿ ä¸‹é¢æˆ‘ä»¬é€šè¿‡ç¨‹åºæ¥éªŒè¯ï¼ˆè¿™é‡Œå‘¢ï¼Œæˆ‘ä»¬å°±å®šä¹‰ä¸¤ç§ç±»å‹çš„é€šçŸ¥è¿›è¡Œæµ‹è¯•ï¼Œä¸€ç§æ˜¯å‰ç½®é€šçŸ¥@Beforeï¼Œä¸€ç§æ˜¯åç½®é€šçŸ¥@Afterï¼‰</p><p>å®šä¹‰å¤šä¸ªåˆ‡é¢ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Aspect</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAspect2</span> <span class="token punctuation">{</span>    <span class="token comment">//å‰ç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"MyAspect2 -&gt; before ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//åç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"MyAspect2 -&gt; after ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Aspect</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAspect3</span> <span class="token punctuation">{</span>    <span class="token comment">//å‰ç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"MyAspect3 -&gt; before ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//åç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"MyAspect3 -&gt;  after ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Aspect</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAspect4</span> <span class="token punctuation">{</span>    <span class="token comment">//å‰ç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"MyAspect4 -&gt; before ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//åç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"MyAspect4 -&gt; after ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡ï¼Œæµ‹è¯•é€šçŸ¥çš„æ‰§è¡Œé¡ºåºï¼š</p><blockquote><p>å¤‡æ³¨ï¼š</p><ol><li><p>æŠŠDeptServiceImplå®ç°ç±»ä¸­æ¨¡æ‹Ÿå¼‚å¸¸çš„ä»£ç åˆ é™¤æˆ–æ³¨é‡Šæ‰ã€‚</p></li><li><p>æ³¨é‡Šæ‰å…¶ä»–åˆ‡é¢ç±»(æŠŠ@Aspectæ³¨é‡Šå³å¯)ï¼Œä»…ä¿ç•™MyAspect2ã€MyAspect3ã€MyAspect4 ï¼Œè¿™æ ·å°±å¯ä»¥æ¸…æ™°çœ‹åˆ°æ‰§è¡Œçš„ç»“æœï¼Œè€Œä¸è¢«å…¶ä»–åˆ‡é¢ç±»å¹²æ‰°ã€‚</p></li></ol></blockquote><ul><li>ä½¿ç”¨postmanæµ‹è¯•æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨æ•°æ®</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-0c05e2ca1b1d2a2be42343a8649bdcf3-image-20241205215100877.png"></p><ul><li>æŸ¥çœ‹ideaä¸­æ§åˆ¶å°æ—¥å¿—è¾“å‡º</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-b20ba9d4feebf42c87ca974ce26be38f-image-20230110211208549.png"></p><p>é€šè¿‡ä»¥ä¸Šç¨‹åºè¿è¡Œå¯ä»¥çœ‹å‡ºåœ¨ä¸åŒåˆ‡é¢ç±»ä¸­ï¼Œé»˜è®¤æŒ‰ç…§åˆ‡é¢ç±»çš„ç±»åå­—æ¯æ’åºï¼š</p><ul><li>ç›®æ ‡æ–¹æ³•å‰çš„é€šçŸ¥æ–¹æ³•ï¼šå­—æ¯æ’åé å‰çš„å…ˆæ‰§è¡Œ</li><li>ç›®æ ‡æ–¹æ³•åçš„é€šçŸ¥æ–¹æ³•ï¼šå­—æ¯æ’åé å‰çš„åæ‰§è¡Œ</li></ul><p>å¦‚æœæˆ‘ä»¬æƒ³æ§åˆ¶é€šçŸ¥çš„æ‰§è¡Œé¡ºåºæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ol><li>ä¿®æ”¹åˆ‡é¢ç±»çš„ç±»åï¼ˆè¿™ç§æ–¹å¼éå¸¸ç¹çã€è€Œä¸”ä¸ä¾¿ç®¡ç†ï¼‰</li><li>ä½¿ç”¨Springæä¾›çš„@Orderæ³¨è§£</li></ol><p>ä½¿ç”¨@Orderæ³¨è§£ï¼Œæ§åˆ¶é€šçŸ¥çš„æ‰§è¡Œé¡ºåºï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Aspect</span><span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">//åˆ‡é¢ç±»çš„æ‰§è¡Œé¡ºåºï¼ˆå‰ç½®é€šçŸ¥ï¼šæ•°å­—è¶Šå°å…ˆæ‰§è¡Œ; åç½®é€šçŸ¥ï¼šæ•°å­—è¶Šå°è¶Šåæ‰§è¡Œï¼‰</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAspect2</span> <span class="token punctuation">{</span>    <span class="token comment">//å‰ç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"MyAspect2 -&gt; before ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//åç½®é€šçŸ¥ </span>    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"MyAspect2 -&gt; after ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Aspect</span><span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token comment">//åˆ‡é¢ç±»çš„æ‰§è¡Œé¡ºåºï¼ˆå‰ç½®é€šçŸ¥ï¼šæ•°å­—è¶Šå°å…ˆæ‰§è¡Œ; åç½®é€šçŸ¥ï¼šæ•°å­—è¶Šå°è¶Šåæ‰§è¡Œï¼‰</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAspect3</span> <span class="token punctuation">{</span>    <span class="token comment">//å‰ç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"MyAspect3 -&gt; before ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//åç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"MyAspect3 -&gt;  after ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Aspect</span><span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">//åˆ‡é¢ç±»çš„æ‰§è¡Œé¡ºåºï¼ˆå‰ç½®é€šçŸ¥ï¼šæ•°å­—è¶Šå°å…ˆæ‰§è¡Œ; åç½®é€šçŸ¥ï¼šæ•°å­—è¶Šå°è¶Šåæ‰§è¡Œï¼‰</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAspect4</span> <span class="token punctuation">{</span>    <span class="token comment">//å‰ç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"MyAspect4 -&gt; before ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//åç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">"execution(* com.itheima.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"MyAspect4 -&gt; after ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡ï¼Œæµ‹è¯•é€šçŸ¥æ‰§è¡Œé¡ºåºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-b8bbf18b40447eb85f86cde21e77cc0b-image-20230110212523787.png"></p><blockquote><p>é€šçŸ¥çš„æ‰§è¡Œé¡ºåºå¤§å®¶ä¸»è¦çŸ¥é“ä¸¤ç‚¹å³å¯ï¼š</p><ol><li>ä¸åŒçš„åˆ‡é¢ç±»å½“ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹é€šçŸ¥çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸åˆ‡é¢ç±»çš„ç±»åå­—æ¯æ’åºæ˜¯æœ‰å…³ç³»çš„</li><li>å¯ä»¥åœ¨åˆ‡é¢ç±»ä¸Šé¢åŠ ä¸Š@Orderæ³¨è§£ï¼Œæ¥æ§åˆ¶ä¸åŒçš„åˆ‡é¢ç±»é€šçŸ¥çš„æ‰§è¡Œé¡ºåº</li></ol></blockquote><h3 id="3-3-åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"><a href="#3-3-åˆ‡å…¥ç‚¹è¡¨è¾¾å¼" class="headerlink" title="3.3 åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"></a>3.3 åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</h3><p>ä»AOPçš„å…¥é—¨ç¨‹åºåˆ°ç°åœ¨ï¼Œæˆ‘ä»¬ä¸€ç›´éƒ½åœ¨ä½¿ç”¨åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ¥æè¿°åˆ‡å…¥ç‚¹ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥è¯¦ç»†çš„ä»‹ç»ä¸€ä¸‹åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„å…·ä½“å†™æ³•ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/09-fb07a7743bdebe25e350334adb4629ea-image-20241209213609345.png" alt="ä¸¤ç§åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"></p><p>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼š</p><ul><li><p>æè¿°åˆ‡å…¥ç‚¹æ–¹æ³•çš„ä¸€ç§è¡¨è¾¾å¼</p></li><li><p>ä½œç”¨ï¼šä¸»è¦ç”¨æ¥å†³å®šé¡¹ç›®ä¸­çš„å“ªäº›æ–¹æ³•éœ€è¦åŠ å…¥é€šçŸ¥</p></li><li><p>å¸¸è§å½¢å¼ï¼š</p><ol><li>execution(â€¦â€¦)ï¼šæ ¹æ®æ–¹æ³•çš„ç­¾åæ¥åŒ¹é…</li></ol><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-493090cf9ddaec8dcd1bfe08b925a086-image-20230110214150215.png"></p><ol start="2"><li>@annotation(â€¦â€¦) ï¼šæ ¹æ®æ³¨è§£åŒ¹é…</li></ol><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-e9dda645a0bbffeac85265bce6f3fd85-image-20230110214242083.png"></p></li></ul><p>é¦–å…ˆæˆ‘ä»¬å…ˆå­¦ä¹ ç¬¬ä¸€ç§æœ€ä¸ºå¸¸è§çš„executionåˆ‡å…¥ç‚¹è¡¨è¾¾å¼ã€‚</p><h4 id="3-3-1-execution"><a href="#3-3-1-execution" class="headerlink" title="3.3.1 execution"></a>3.3.1 execution</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/09-554b08478bdf24bdbb9c2e55e1158924-image-20241209213739547.png" alt="execution"></p><p>executionä¸»è¦æ ¹æ®æ–¹æ³•çš„è¿”å›å€¼ã€åŒ…åã€ç±»åã€æ–¹æ³•åã€æ–¹æ³•å‚æ•°ç­‰ä¿¡æ¯æ¥åŒ¹é…ï¼Œè¯­æ³•ä¸ºï¼š</p><pre class="line-numbers language-none"><code class="language-none">execution(è®¿é—®ä¿®é¥°ç¬¦?  è¿”å›å€¼  åŒ…å.ç±»å.?æ–¹æ³•å(æ–¹æ³•å‚æ•°) throws å¼‚å¸¸?)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…¶ä¸­å¸¦<code>?</code>çš„è¡¨ç¤ºå¯ä»¥çœç•¥çš„éƒ¨åˆ†</p><ul><li><p>è®¿é—®ä¿®é¥°ç¬¦ï¼šå¯çœç•¥ï¼ˆæ¯”å¦‚: publicã€protectedï¼‰</p></li><li><p>åŒ…å.ç±»åï¼š å¯çœç•¥</p></li><li><p>throws å¼‚å¸¸ï¼šå¯çœç•¥ï¼ˆæ³¨æ„æ˜¯æ–¹æ³•ä¸Šå£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ï¼Œä¸æ˜¯å®é™…æŠ›å‡ºçš„å¼‚å¸¸ï¼‰</p></li></ul><p>ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"execution(void com.itheima.service.impl.DeptServiceImpl.delete(java.lang.Integer))"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯ä»¥ä½¿ç”¨é€šé…ç¬¦æè¿°åˆ‡å…¥ç‚¹</p><ul><li><p><code>*</code> ï¼šå•ä¸ªç‹¬ç«‹çš„ä»»æ„ç¬¦å·ï¼Œå¯ä»¥é€šé…ä»»æ„è¿”å›å€¼ã€åŒ…åã€ç±»åã€æ–¹æ³•åã€ä»»æ„ç±»å‹çš„ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿå¯ä»¥é€šé…åŒ…ã€ç±»ã€æ–¹æ³•åçš„ä¸€éƒ¨åˆ†</p></li><li><p><code>..</code> ï¼šå¤šä¸ªè¿ç»­çš„ä»»æ„ç¬¦å·ï¼Œå¯ä»¥é€šé…ä»»æ„å±‚çº§çš„åŒ…ï¼Œæˆ–ä»»æ„ç±»å‹ã€ä»»æ„ä¸ªæ•°çš„å‚æ•°</p></li></ul><p>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„è¯­æ³•è§„åˆ™ï¼š</p><ol><li>æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥çœç•¥</li><li>è¿”å›å€¼å¯ä»¥ä½¿ç”¨<code>*</code>å·ä»£æ›¿ï¼ˆä»»æ„è¿”å›å€¼ç±»å‹ï¼‰</li><li>åŒ…åå¯ä»¥ä½¿ç”¨<code>*</code>å·ä»£æ›¿ï¼Œä»£è¡¨ä»»æ„åŒ…ï¼ˆä¸€å±‚åŒ…ä½¿ç”¨ä¸€ä¸ª<code>*</code>ï¼‰</li><li>ä½¿ç”¨<code>..</code>é…ç½®åŒ…åï¼Œæ ‡è¯†æ­¤åŒ…ä»¥åŠæ­¤åŒ…ä¸‹çš„æ‰€æœ‰å­åŒ…</li><li>ç±»åå¯ä»¥ä½¿ç”¨<code>*</code>å·ä»£æ›¿ï¼Œæ ‡è¯†ä»»æ„ç±»</li><li>æ–¹æ³•åå¯ä»¥ä½¿ç”¨<code>*</code>å·ä»£æ›¿ï¼Œè¡¨ç¤ºä»»æ„æ–¹æ³•</li><li>å¯ä»¥ä½¿ç”¨ <code>*</code>  é…ç½®å‚æ•°ï¼Œä¸€ä¸ªä»»æ„ç±»å‹çš„å‚æ•°</li><li>å¯ä»¥ä½¿ç”¨<code>..</code> é…ç½®å‚æ•°ï¼Œä»»æ„ä¸ªä»»æ„ç±»å‹çš„å‚æ•°</li></ol><p><strong>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ç¤ºä¾‹</strong></p><ul><li><p>çœç•¥æ–¹æ³•çš„ä¿®é¥°ç¬¦å· </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">execution</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>DeptServiceImpl</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Integer</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>ä½¿ç”¨<code>*</code>ä»£æ›¿è¿”å›å€¼ç±»å‹</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">execution</span><span class="token punctuation">(</span><span class="token operator">*</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>DeptServiceImpl</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Integer</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>ä½¿ç”¨<code>*</code>ä»£æ›¿åŒ…åï¼ˆä¸€å±‚åŒ…ä½¿ç”¨ä¸€ä¸ª<code>*</code>ï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">execution</span><span class="token punctuation">(</span><span class="token operator">*</span> com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>*<span class="token punctuation">.</span>*<span class="token punctuation">.</span>DeptServiceImpl<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Integer</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>ä½¿ç”¨<code>..</code>çœç•¥åŒ…å</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">execution</span><span class="token punctuation">(</span><span class="token operator">*</span> com<span class="token punctuation">.</span><span class="token punctuation">.</span>DeptServiceImpl<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Integer</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>ä½¿ç”¨<code>*</code>ä»£æ›¿ç±»å</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">execution</span><span class="token punctuation">(</span><span class="token operator">*</span> com<span class="token punctuation">.</span><span class="token punctuation">.</span>*<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Integer</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>ä½¿ç”¨<code>*</code>ä»£æ›¿æ–¹æ³•å</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">execution</span><span class="token punctuation">(</span><span class="token operator">*</span> com<span class="token punctuation">.</span><span class="token punctuation">.</span>*<span class="token punctuation">.</span>*<span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Integer</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>ä½¿ç”¨ <code>*</code> ä»£æ›¿å‚æ•°</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">execution</span><span class="token punctuation">(</span><span class="token operator">*</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>DeptServiceImpl</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>ä½¿ç”¨<code>..</code>çœç•¥å‚æ•°</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">execution</span><span class="token punctuation">(</span><span class="token operator">*</span> com<span class="token punctuation">.</span><span class="token punctuation">.</span>*<span class="token punctuation">.</span>*<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><p>â€‹</p><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><p>æ ¹æ®ä¸šåŠ¡éœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨ ä¸”ï¼ˆ&amp;&amp;ï¼‰ã€æˆ–ï¼ˆ||ï¼‰ã€éï¼ˆ!ï¼‰ æ¥ç»„åˆæ¯”è¾ƒå¤æ‚çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">execution</span><span class="token punctuation">(</span><span class="token operator">*</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span>DeptService</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">execution</span><span class="token punctuation">(</span><span class="token operator">*</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span>DeptService</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><p>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„ä¹¦å†™å»ºè®®ï¼š</p><ul><li><p>æ‰€æœ‰ä¸šåŠ¡æ–¹æ³•ååœ¨å‘½åæ—¶å°½é‡è§„èŒƒï¼Œæ–¹ä¾¿åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å¿«é€ŸåŒ¹é…ã€‚å¦‚ï¼šæŸ¥è¯¢ç±»æ–¹æ³•éƒ½æ˜¯ find å¼€å¤´ï¼Œæ›´æ–°ç±»æ–¹æ³•éƒ½æ˜¯updateå¼€å¤´</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//ä¸šåŠ¡ç±»</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllDept</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">//çœç•¥ä»£ç ...</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token class-name">Dept</span> <span class="token function">findDeptById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">//çœç•¥ä»£ç ...</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateDeptById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">//çœç•¥ä»£ç ...</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateDeptByMoreCondition</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">//çœç•¥ä»£ç ...</span>    <span class="token punctuation">}</span>    <span class="token comment">//å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//åŒ¹é…DeptServiceImplç±»ä¸­ä»¥findå¼€å¤´çš„æ–¹æ³•</span><span class="token function">execution</span><span class="token punctuation">(</span><span class="token operator">*</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>DeptServiceImpl</span><span class="token punctuation">.</span>find<span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>æè¿°åˆ‡å…¥ç‚¹æ–¹æ³•é€šå¸¸åŸºäºæ¥å£æè¿°ï¼Œè€Œä¸æ˜¯ç›´æ¥æè¿°å®ç°ç±»ï¼Œå¢å¼ºæ‹“å±•æ€§</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">execution</span><span class="token punctuation">(</span><span class="token operator">*</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span>DeptService</span><span class="token punctuation">.</span>*<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>åœ¨æ»¡è¶³ä¸šåŠ¡éœ€è¦çš„å‰æä¸‹ï¼Œå°½é‡ç¼©å°åˆ‡å…¥ç‚¹çš„åŒ¹é…èŒƒå›´ã€‚å¦‚ï¼šåŒ…ååŒ¹é…å°½é‡ä¸ä½¿ç”¨ ..ï¼Œä½¿ç”¨ * åŒ¹é…å•ä¸ªåŒ…</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">execution</span><span class="token punctuation">(</span><span class="token operator">*</span> com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>*<span class="token punctuation">.</span>*<span class="token punctuation">.</span>DeptServiceImpl<span class="token punctuation">.</span>find<span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><h4 id="3-3-2-annotation"><a href="#3-3-2-annotation" class="headerlink" title="3.3.2 @annotation"></a>3.3.2 @annotation</h4><p>å·²ç»å­¦ä¹ äº†executionåˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„è¯­æ³•ã€‚é‚£ä¹ˆå¦‚æœæˆ‘ä»¬è¦åŒ¹é…å¤šä¸ªæ— è§„åˆ™çš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼šlist()å’Œ delete()è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬åŸºäºexecutionè¿™ç§åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ¥æè¿°å°±ä¸æ˜¯å¾ˆæ–¹ä¾¿äº†ã€‚è€Œåœ¨ä¹‹å‰æˆ‘ä»¬æ˜¯å°†ä¸¤ä¸ªåˆ‡å…¥ç‚¹è¡¨è¾¾å¼ç»„åˆåœ¨äº†ä¸€èµ·å®Œæˆçš„éœ€æ±‚ï¼Œè¿™ä¸ªæ˜¯æ¯”è¾ƒç¹ççš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å€ŸåŠ©äºå¦ä¸€ç§åˆ‡å…¥ç‚¹è¡¨è¾¾å¼annotationæ¥æè¿°è¿™ä¸€ç±»çš„åˆ‡å…¥ç‚¹ï¼Œä»è€Œæ¥ç®€åŒ–åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„ä¹¦å†™ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/09-94ee8c2a41b09364c1ede7404e840c03-image-20241209214934544.png" alt="åˆ‡å…¥ç‚¹è¡¨è¾¾å¼"></p><p>å®ç°æ­¥éª¤ï¼š</p><ol><li><p>ç¼–å†™è‡ªå®šä¹‰æ³¨è§£</p></li><li><p>åœ¨ä¸šåŠ¡ç±»è¦åšä¸ºè¿æ¥ç‚¹çš„æ–¹æ³•ä¸Šæ·»åŠ è‡ªå®šä¹‰æ³¨è§£</p></li></ol><p><strong>è‡ªå®šä¹‰æ³¨è§£</strong>ï¼šMyLog</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyLog</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ä¸šåŠ¡ç±»</strong>ï¼šDeptServiceImpl</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptMapper</span> deptMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token annotation punctuation">@MyLog</span> <span class="token comment">//è‡ªå®šä¹‰æ³¨è§£ï¼ˆè¡¨ç¤ºï¼šå½“å‰æ–¹æ³•å±äºç›®æ ‡æ–¹æ³•ï¼‰</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">&gt;</span></span> deptList <span class="token operator">=</span> deptMapper<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ¨¡æ‹Ÿå¼‚å¸¸</span>        <span class="token comment">//int num = 10/0;</span>        <span class="token keyword">return</span> deptList<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token annotation punctuation">@MyLog</span>  <span class="token comment">//è‡ªå®šä¹‰æ³¨è§£ï¼ˆè¡¨ç¤ºï¼šå½“å‰æ–¹æ³•å±äºç›®æ ‡æ–¹æ³•ï¼‰</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//1. åˆ é™¤éƒ¨é—¨</span>        deptMapper<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span> <span class="token punctuation">{</span>        dept<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        dept<span class="token punctuation">.</span><span class="token function">setUpdateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        deptMapper<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>dept<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Dept</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> deptMapper<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span> <span class="token punctuation">{</span>        dept<span class="token punctuation">.</span><span class="token function">setUpdateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        deptMapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>dept<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åˆ‡é¢ç±»</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Aspect</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAspect6</span> <span class="token punctuation">{</span>    <span class="token comment">//é’ˆå¯¹listæ–¹æ³•ã€deleteæ–¹æ³•è¿›è¡Œå‰ç½®é€šçŸ¥å’Œåç½®é€šçŸ¥</span>    <span class="token comment">//å‰ç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"@annotation(com.itheima.anno.MyLog)"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"MyAspect6 -&gt; before ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//åç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">"@annotation(com.itheima.anno.MyLog)"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"MyAspect6 -&gt; after ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡å¯SpringBootæœåŠ¡ï¼Œæµ‹è¯•æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨æ•°æ®ï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-fe787704ec0f29dcdf806088c3497eb7-image-20230110224447047.png"></p><p>åˆ°æ­¤æˆ‘ä»¬ä¸¤ç§å¸¸è§çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æˆ‘å·²ç»ä»‹ç»å®Œäº†ã€‚</p><ul><li>executionåˆ‡å…¥ç‚¹è¡¨è¾¾å¼<ul><li>æ ¹æ®æˆ‘ä»¬æ‰€æŒ‡å®šçš„æ–¹æ³•çš„æè¿°ä¿¡æ¯æ¥åŒ¹é…åˆ‡å…¥ç‚¹æ–¹æ³•ï¼Œè¿™ç§æ–¹å¼ä¹Ÿæ˜¯æœ€ä¸ºå¸¸ç”¨çš„ä¸€ç§æ–¹å¼</li><li>å¦‚æœæˆ‘ä»¬è¦åŒ¹é…çš„åˆ‡å…¥ç‚¹æ–¹æ³•çš„æ–¹æ³•åä¸è§„åˆ™ï¼Œæˆ–è€…æœ‰ä¸€äº›æ¯”è¾ƒç‰¹æ®Šçš„éœ€æ±‚ï¼Œé€šè¿‡executionåˆ‡å…¥ç‚¹è¡¨è¾¾å¼æè¿°æ¯”è¾ƒç¹ç</li></ul></li><li>annotation åˆ‡å…¥ç‚¹è¡¨è¾¾å¼<ul><li>åŸºäºæ³¨è§£çš„æ–¹å¼æ¥åŒ¹é…åˆ‡å…¥ç‚¹æ–¹æ³•ã€‚è¿™ç§æ–¹å¼è™½ç„¶å¤šä¸€æ­¥æ“ä½œï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼Œä½†æ˜¯ç›¸å¯¹æ¥æ¯”è¾ƒçµæ´»ã€‚æˆ‘ä»¬éœ€è¦åŒ¹é…å“ªä¸ªæ–¹æ³•ï¼Œå°±åœ¨æ–¹æ³•ä¸ŠåŠ ä¸Šå¯¹åº”çš„æ³¨è§£å°±å¯ä»¥äº†</li></ul></li></ul><h3 id="3-4-è¿æ¥ç‚¹"><a href="#3-4-è¿æ¥ç‚¹" class="headerlink" title="3.4 è¿æ¥ç‚¹"></a>3.4 è¿æ¥ç‚¹</h3><p>è®²è§£å®Œäº†åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥è®²è§£æœ€åä¸€ä¸ªéƒ¨åˆ†è¿æ¥ç‚¹ã€‚æˆ‘ä»¬å‰é¢åœ¨è®²è§£AOPæ ¸å¿ƒæ¦‚å¿µçš„æ—¶å€™ï¼Œæˆ‘ä»¬æåˆ°è¿‡ä»€ä¹ˆæ˜¯è¿æ¥ç‚¹ï¼Œè¿æ¥ç‚¹å¯ä»¥ç®€å•ç†è§£ä¸ºå¯ä»¥è¢«AOPæ§åˆ¶çš„æ–¹æ³•ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/09-72e3c28748c8e2a82b32f69917a98709-image-20241209215457109.png" alt="ç¯ç»•é€šçŸ¥è·å–è¿æ¥ç‚¹-@Around"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/09-c6758ef7ae5acce778ae2ddad7f41ae9-image-20241209215917531.png" alt="å…¶ä»–å››ç§é€šçŸ¥"></p><p>æˆ‘ä»¬ç›®æ ‡å¯¹è±¡å½“ä¸­æ‰€æœ‰çš„æ–¹æ³•æ˜¯ä¸æ˜¯éƒ½æ˜¯å¯ä»¥è¢«AOPæ§åˆ¶çš„æ–¹æ³•ã€‚è€Œåœ¨SpringAOPå½“ä¸­ï¼Œè¿æ¥ç‚¹åˆç‰¹æŒ‡æ–¹æ³•çš„æ‰§è¡Œã€‚</p><p>åœ¨Springä¸­ç”¨JoinPointæŠ½è±¡äº†è¿æ¥ç‚¹ï¼Œç”¨å®ƒå¯ä»¥è·å¾—æ–¹æ³•æ‰§è¡Œæ—¶çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ç›®æ ‡ç±»åã€æ–¹æ³•åã€æ–¹æ³•å‚æ•°ç­‰ã€‚</p><ul><li><p>å¯¹äº@Aroundé€šçŸ¥ï¼Œè·å–è¿æ¥ç‚¹ä¿¡æ¯åªèƒ½ä½¿ç”¨ProceedingJoinPointç±»å‹</p></li><li><p>å¯¹äºå…¶ä»–å››ç§é€šçŸ¥ï¼Œè·å–è¿æ¥ç‚¹ä¿¡æ¯åªèƒ½ä½¿ç”¨JoinPointï¼Œå®ƒæ˜¯ProceedingJoinPointçš„çˆ¶ç±»å‹</p></li></ul><p>ç¤ºä¾‹ä»£ç ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Aspect</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAspect7</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"@annotation(com.itheima.anno.MyLog)"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">pt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>       <span class="token comment">//å‰ç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"pt()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" MyAspect7 -&gt; before ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//åç½®é€šçŸ¥</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"pt()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" MyAspect7 -&gt; after ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//ç¯ç»•é€šçŸ¥</span>    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"pt()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>        <span class="token comment">//è·å–ç›®æ ‡ç±»å</span>        <span class="token class-name">String</span> name <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"ç›®æ ‡ç±»åï¼š{}"</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ç›®æ ‡æ–¹æ³•å</span>        <span class="token class-name">String</span> methodName <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"ç›®æ ‡æ–¹æ³•åï¼š{}"</span><span class="token punctuation">,</span>methodName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è·å–æ–¹æ³•æ‰§è¡Œæ—¶éœ€è¦çš„å‚æ•°</span>        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"ç›®æ ‡æ–¹æ³•å‚æ•°ï¼š{}"</span><span class="token punctuation">,</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ‰§è¡ŒåŸå§‹æ–¹æ³•</span>        <span class="token class-name">Object</span> returnValue <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> returnValue<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡ï¼Œæ‰§è¡ŒæŸ¥è¯¢éƒ¨é—¨æ•°æ®çš„åŠŸèƒ½ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-c835a17ff1bae48d4cacc6bd0a6ef41b-image-20230110231629140.png"></p><h2 id="4-AOPæ¡ˆä¾‹"><a href="#4-AOPæ¡ˆä¾‹" class="headerlink" title="4. AOPæ¡ˆä¾‹"></a>4. AOPæ¡ˆä¾‹</h2><p>SpringAOPçš„ç›¸å…³çŸ¥è¯†æˆ‘ä»¬å°±å·²ç»å…¨éƒ¨å­¦ä¹ å®Œæ¯•äº†ã€‚æœ€åæˆ‘ä»¬è¦é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥å¯¹AOPè¿›è¡Œä¸€ä¸ªç»¼åˆçš„åº”ç”¨ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/09-8088ff4235514b1ae2536fb5b78cc50b-image-20241209220749586.png" alt="æ¡ˆä¾‹"></p><h3 id="4-1-éœ€æ±‚"><a href="#4-1-éœ€æ±‚" class="headerlink" title="4.1 éœ€æ±‚"></a>4.1 éœ€æ±‚</h3><p>éœ€æ±‚ï¼šå°†æ¡ˆä¾‹ä¸­å¢ã€åˆ ã€æ”¹ç›¸å…³æ¥å£çš„æ“ä½œæ—¥å¿—è®°å½•åˆ°æ•°æ®åº“è¡¨ä¸­</p><ul><li>å°±æ˜¯å½“è®¿é—®éƒ¨é—¨ç®¡ç†å’Œå‘˜å·¥ç®¡ç†å½“ä¸­çš„å¢ã€åˆ ã€æ”¹ç›¸å…³åŠŸèƒ½æ¥å£æ—¶ï¼Œéœ€è¦è¯¦ç»†çš„æ“ä½œæ—¥å¿—ï¼Œå¹¶ä¿å­˜åœ¨æ•°æ®è¡¨ä¸­ï¼Œä¾¿äºåæœŸæ•°æ®è¿½è¸ªã€‚</li></ul><p>æ“ä½œæ—¥å¿—ä¿¡æ¯åŒ…å«ï¼š</p><ul><li>æ“ä½œäººã€æ“ä½œæ—¶é—´ã€æ‰§è¡Œæ–¹æ³•çš„å…¨ç±»åã€æ‰§è¡Œæ–¹æ³•åã€æ–¹æ³•è¿è¡Œæ—¶å‚æ•°ã€è¿”å›å€¼ã€æ–¹æ³•æ‰§è¡Œæ—¶é•¿</li></ul><blockquote><p>æ‰€è®°å½•çš„æ—¥å¿—ä¿¡æ¯åŒ…æ‹¬å½“å‰æ¥å£çš„æ“ä½œäººæ˜¯è°æ“ä½œçš„ï¼Œä»€ä¹ˆæ—¶é—´ç‚¹æ“ä½œçš„ï¼Œä»¥åŠè®¿é—®çš„æ˜¯å“ªä¸ªç±»å½“ä¸­çš„å“ªä¸ªæ–¹æ³•ï¼Œåœ¨è®¿é—®è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ä¼ å…¥è¿›æ¥çš„å‚æ•°æ˜¯ä»€ä¹ˆï¼Œè®¿é—®è¿™ä¸ªæ–¹æ³•æœ€ç»ˆæ‹¿åˆ°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Œä»¥åŠæ•´ä¸ªæ¥å£æ–¹æ³•çš„è¿è¡Œæ—¶é•¿æ˜¯å¤šé•¿æ—¶é—´ã€‚</p></blockquote><h3 id="4-2-åˆ†æ"><a href="#4-2-åˆ†æ" class="headerlink" title="4.2 åˆ†æ"></a>4.2 åˆ†æ</h3><p>é—®é¢˜1ï¼šé¡¹ç›®å½“ä¸­å¢åˆ æ”¹ç›¸å…³çš„æ–¹æ³•æ˜¯ä¸æ˜¯æœ‰å¾ˆå¤šï¼Ÿ</p><ul><li>å¾ˆå¤š</li></ul><p>é—®é¢˜2ï¼šæˆ‘ä»¬éœ€è¦é’ˆå¯¹æ¯ä¸€ä¸ªåŠŸèƒ½æ¥å£æ–¹æ³•è¿›è¡Œä¿®æ”¹ï¼Œåœ¨æ¯ä¸€ä¸ªåŠŸèƒ½æ¥å£å½“ä¸­éƒ½æ¥è®°å½•è¿™äº›æ“ä½œæ—¥å¿—å—ï¼Ÿ</p><ul><li>è¿™ç§åšæ³•æ¯”è¾ƒç¹ç</li></ul><p>ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼šå¯ä»¥ä½¿ç”¨AOPè§£å†³(æ¯ä¸€ä¸ªå¢åˆ æ”¹åŠŸèƒ½æ¥å£ä¸­è¦å®ç°çš„è®°å½•æ“ä½œæ—¥å¿—çš„é€»è¾‘ä»£ç æ˜¯ç›¸åŒ)ã€‚</p><blockquote><p>å¯ä»¥æŠŠè¿™éƒ¨åˆ†è®°å½•æ“ä½œæ—¥å¿—çš„é€šç”¨çš„ã€é‡å¤æ€§çš„é€»è¾‘ä»£ç æŠ½å–å‡ºæ¥å®šä¹‰åœ¨ä¸€ä¸ªé€šçŸ¥æ–¹æ³•å½“ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡AOPé¢å‘åˆ‡é¢ç¼–ç¨‹çš„æ–¹å¼ï¼Œåœ¨ä¸æ”¹åŠ¨åŸå§‹åŠŸèƒ½çš„åŸºç¡€ä¸Šæ¥å¯¹åŸå§‹çš„åŠŸèƒ½è¿›è¡Œå¢å¼ºã€‚ç›®å‰æˆ‘ä»¬æ‰€å¢å¼ºçš„åŠŸèƒ½å°±æ˜¯æ¥è®°å½•æ“ä½œæ—¥å¿—ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ä½¿ç”¨AOPçš„æŠ€æœ¯æ¥å®ç°ã€‚ä½¿ç”¨AOPçš„æŠ€æœ¯æ¥å®ç°ä¹Ÿæ˜¯æœ€ä¸ºç®€å•ï¼Œæœ€ä¸ºæ–¹ä¾¿çš„ã€‚</p></blockquote><p>é—®é¢˜3ï¼šæ—¢ç„¶è¦åŸºäºAOPé¢å‘åˆ‡é¢ç¼–ç¨‹çš„æ–¹å¼æ¥å®Œæˆçš„åŠŸèƒ½ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨ AOPäº”ç§é€šçŸ¥ç±»å‹å½“ä¸­çš„å“ªç§é€šçŸ¥ç±»å‹ï¼Ÿ</p><ul><li>ç­”æ¡ˆï¼šç¯ç»•é€šçŸ¥</li></ul><blockquote><p>æ‰€è®°å½•çš„æ“ä½œæ—¥å¿—å½“ä¸­åŒ…æ‹¬ï¼šæ“ä½œäººã€æ“ä½œæ—¶é—´ï¼Œè®¿é—®çš„æ˜¯å“ªä¸ªç±»ã€å“ªä¸ªæ–¹æ³•ã€æ–¹æ³•è¿è¡Œæ—¶å‚æ•°ã€æ–¹æ³•çš„è¿”å›å€¼ã€æ–¹æ³•çš„è¿è¡Œæ—¶é•¿ã€‚</p><p>æ–¹æ³•è¿”å›å€¼ï¼Œæ˜¯åœ¨åŸå§‹æ–¹æ³•æ‰§è¡Œåæ‰èƒ½è·å–åˆ°çš„ã€‚</p><p>æ–¹æ³•çš„è¿è¡Œæ—¶é•¿ï¼Œéœ€è¦åŸå§‹æ–¹æ³•è¿è¡Œä¹‹å‰è®°å½•å¼€å§‹æ—¶é—´ï¼ŒåŸå§‹æ–¹æ³•è¿è¡Œä¹‹åè®°å½•ç»“æŸæ—¶é—´ã€‚é€šè¿‡è®¡ç®—è·å¾—æ–¹æ³•çš„æ‰§è¡Œè€—æ—¶ã€‚</p><p>åŸºäºä»¥ä¸Šçš„åˆ†ææˆ‘ä»¬ç¡®å®šè¦ä½¿ç”¨Aroundç¯ç»•é€šçŸ¥ã€‚</p></blockquote><p>é—®é¢˜4ï¼šæœ€åä¸€ä¸ªé—®é¢˜ï¼Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼æˆ‘ä»¬è¯¥æ€ä¹ˆå†™ï¼Ÿ</p><ul><li>ç­”æ¡ˆï¼šä½¿ç”¨annotationæ¥æè¿°è¡¨è¾¾å¼</li></ul><blockquote><p>è¦åŒ¹é…ä¸šåŠ¡æ¥å£å½“ä¸­æ‰€æœ‰çš„å¢åˆ æ”¹çš„æ–¹æ³•ï¼Œè€Œå¢åˆ æ”¹æ–¹æ³•åœ¨å‘½åä¸Šæ²¡æœ‰å…±åŒçš„å‰ç¼€æˆ–åç¼€ã€‚æ­¤æ—¶å¦‚æœä½¿ç”¨executionåˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯ä¼šæ¯”è¾ƒç¹çã€‚ å½“é‡åˆ°å¢åˆ æ”¹çš„æ–¹æ³•åæ²¡æœ‰è§„å¾‹æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ annotationåˆ‡å…¥ç‚¹è¡¨è¾¾å¼</p></blockquote><h3 id="4-3-æ­¥éª¤"><a href="#4-3-æ­¥éª¤" class="headerlink" title="4.3 æ­¥éª¤"></a>4.3 æ­¥éª¤</h3><p>ç®€å•åˆ†æäº†ä¸€ä¸‹å¤§æ¦‚çš„å®ç°æ€è·¯åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦æ¥å®Œæˆæ¡ˆä¾‹äº†ã€‚æ¡ˆä¾‹çš„å®ç°æ­¥éª¤å…¶å®å°±ä¸¤æ­¥ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/09-6a2ca6cd2d47360c010758466ec6b5cd-image-20241209220944732.png" alt="æ­¥éª¤"></p><ul><li>å‡†å¤‡å·¥ä½œ<ol><li>å¼•å…¥AOPçš„èµ·æ­¥ä¾èµ–</li><li>å¯¼å…¥èµ„æ–™ä¸­å‡†å¤‡å¥½çš„æ•°æ®åº“è¡¨ç»“æ„ï¼Œå¹¶å¼•å…¥å¯¹åº”çš„å®ä½“ç±»</li></ol></li><li>ç¼–ç å®ç°<ol><li>è‡ªå®šä¹‰æ³¨è§£@Log</li><li>å®šä¹‰åˆ‡é¢ç±»ï¼Œå®Œæˆè®°å½•æ“ä½œæ—¥å¿—çš„é€»è¾‘</li></ol></li></ul><h3 id="4-4-å®ç°"><a href="#4-4-å®ç°" class="headerlink" title="4.4 å®ç°"></a>4.4 å®ç°</h3><h4 id="4-4-1-å‡†å¤‡å·¥ä½œ"><a href="#4-4-1-å‡†å¤‡å·¥ä½œ" class="headerlink" title="4.4.1 å‡†å¤‡å·¥ä½œ"></a>4.4.1 å‡†å¤‡å·¥ä½œ</h4><ol><li>AOPèµ·æ­¥ä¾èµ–</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--AOPèµ·æ­¥ä¾èµ–--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-aop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>å¯¼å…¥èµ„æ–™ä¸­å‡†å¤‡å¥½çš„æ•°æ®åº“è¡¨ç»“æ„ï¼Œå¹¶å¼•å…¥å¯¹åº”çš„å®ä½“ç±»</li></ol><p>æ•°æ®è¡¨</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- æ“ä½œæ—¥å¿—è¡¨create table operate_log(    id int unsigned primary key auto_increment comment 'ID',    operate_user int unsigned comment 'æ“ä½œäºº',    operate_time datetime comment 'æ“ä½œæ—¶é—´',    class_name varchar(100) comment 'æ“ä½œçš„ç±»å',    method_name varchar(100) comment 'æ“ä½œçš„æ–¹æ³•å',    method_params varchar(1000) comment 'æ–¹æ³•å‚æ•°',    return_value varchar(2000) comment 'è¿”å›å€¼',    cost_time bigint comment 'æ–¹æ³•æ‰§è¡Œè€—æ—¶, å•ä½:ms') comment 'æ“ä½œæ—¥å¿—è¡¨';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®ä½“ç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//æ“ä½œæ—¥å¿—å®ä½“ç±»</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OperateLog</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span> <span class="token comment">//ä¸»é”®ID</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> operateUser<span class="token punctuation">;</span> <span class="token comment">//æ“ä½œäººID</span>    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> operateTime<span class="token punctuation">;</span> <span class="token comment">//æ“ä½œæ—¶é—´</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> className<span class="token punctuation">;</span> <span class="token comment">//æ“ä½œç±»å</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> methodName<span class="token punctuation">;</span> <span class="token comment">//æ“ä½œæ–¹æ³•å</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> methodParams<span class="token punctuation">;</span> <span class="token comment">//æ“ä½œæ–¹æ³•å‚æ•°</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> returnValue<span class="token punctuation">;</span> <span class="token comment">//æ“ä½œæ–¹æ³•è¿”å›å€¼</span>    <span class="token keyword">private</span> <span class="token class-name">Long</span> costTime<span class="token punctuation">;</span> <span class="token comment">//æ“ä½œè€—æ—¶</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Mapperæ¥å£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">OperateLog</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Insert</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OperateLogMapper</span> <span class="token punctuation">{</span>    <span class="token comment">//æ’å…¥æ—¥å¿—æ•°æ®</span>    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">"insert into operate_log (operate_user, operate_time, class_name, method_name, method_params, return_value, cost_time) "</span> <span class="token operator">+</span>            <span class="token string">"values (#{operateUser}, #{operateTime}, #{className}, #{methodName}, #{methodParams}, #{returnValue}, #{costTime});"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">OperateLog</span> log<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-4-2-ç¼–ç å®ç°"><a href="#4-4-2-ç¼–ç å®ç°" class="headerlink" title="4.4.2 ç¼–ç å®ç°"></a>4.4.2 ç¼–ç å®ç°</h4><ul><li>è‡ªå®šä¹‰æ³¨è§£@Log</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * è‡ªå®šä¹‰Logæ³¨è§£ */</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Documented</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Log</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ä¿®æ”¹ä¸šåŠ¡å®ç°ç±»ï¼Œåœ¨å¢åˆ æ”¹ä¸šåŠ¡æ–¹æ³•ä¸Šæ·»åŠ @Logæ³¨è§£</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token annotation punctuation">@Log</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span> <span class="token punctuation">{</span>        emp<span class="token punctuation">.</span><span class="token function">setUpdateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ›´æ–°ä¿®æ”¹æ—¶é—´ä¸ºå½“å‰æ—¶é—´</span>        empMapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token annotation punctuation">@Log</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//è¡¥å…¨æ•°æ®</span>        emp<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setUpdateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨æ·»åŠ æ–¹æ³•</span>        empMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token annotation punctuation">@Log</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span> <span class="token punctuation">{</span>        empMapper<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥åŒæ ·çš„æ–¹å¼ï¼Œä¿®æ”¹EmpServiceImplä¸šåŠ¡ç±»</p><ul><li>å®šä¹‰åˆ‡é¢ç±»ï¼Œå®Œæˆè®°å½•æ“ä½œæ—¥å¿—çš„é€»è¾‘</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Aspect</span> <span class="token comment">//åˆ‡é¢ç±»</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogAspect</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">OperateLogMapper</span> operateLogMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"@annotation(com.itheima.anno.Log)"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">recordLog</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>        <span class="token comment">//æ“ä½œäººID - å½“å‰ç™»å½•å‘˜å·¥ID</span>        <span class="token comment">//è·å–è¯·æ±‚å¤´ä¸­çš„jwtä»¤ç‰Œ, è§£æä»¤ç‰Œ</span>        <span class="token class-name">String</span> jwt <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Claims</span> claims <span class="token operator">=</span> <span class="token class-name">JwtUtils</span><span class="token punctuation">.</span><span class="token function">parseJWT</span><span class="token punctuation">(</span>jwt<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Integer</span> operateUser <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> claims<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ“ä½œæ—¶é—´</span>        <span class="token class-name">LocalDateTime</span> operateTime <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ“ä½œç±»å</span>        <span class="token class-name">String</span> className <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ“ä½œæ–¹æ³•å</span>        <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ“ä½œæ–¹æ³•å‚æ•°</span>        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> methodParams <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> begin <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨åŸå§‹ç›®æ ‡æ–¹æ³•è¿è¡Œ</span>        <span class="token class-name">Object</span> result <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ–¹æ³•è¿”å›å€¼</span>        <span class="token class-name">String</span> returnValue <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ“ä½œè€—æ—¶</span>        <span class="token class-name">Long</span> costTime <span class="token operator">=</span> end <span class="token operator">-</span> begin<span class="token punctuation">;</span>        <span class="token comment">//è®°å½•æ“ä½œæ—¥å¿—</span>        <span class="token class-name">OperateLog</span> operateLog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OperateLog</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>operateUser<span class="token punctuation">,</span>operateTime<span class="token punctuation">,</span>className<span class="token punctuation">,</span>methodName<span class="token punctuation">,</span>methodParams<span class="token punctuation">,</span>returnValue<span class="token punctuation">,</span>costTime<span class="token punctuation">)</span><span class="token punctuation">;</span>        operateLogMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>operateLog<span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"AOPè®°å½•æ“ä½œæ—¥å¿—: {}"</span> <span class="token punctuation">,</span> operateLog<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>ä»£ç å®ç°ç»†èŠ‚ï¼š è·å–requestå¯¹è±¡ï¼Œä»è¯·æ±‚å¤´ä¸­è·å–åˆ°jwtä»¤ç‰Œï¼Œè§£æä»¤ç‰Œè·å–å‡ºå½“å‰ç”¨æˆ·çš„idã€‚</p></blockquote><p>é‡å¯SpringBootæœåŠ¡ï¼Œæµ‹è¯•æ“ä½œæ—¥å¿—è®°å½•åŠŸèƒ½ï¼š</p><ul><li>æ·»åŠ ä¸€ä¸ªæ–°çš„éƒ¨é—¨</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-3bada9e4eea37b4eb9b5cda050ae4698-image-20230111001114301.png"></p><ul><li>æ•°æ®è¡¨</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2024/12/05-cfc525391f28a17a2bc7187c4a5b36df-image-20230111001230731.png"></p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äº‹åŠ¡ </tag>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ¡ˆä¾‹ï¼ˆ2ï¼‰</title>
      <link href="/2024/12/05/springboot-an-li-2/"/>
      <url>/2024/12/05/springboot-an-li-2/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¡ˆä¾‹-ç™»å½•è®¤è¯"><a href="#æ¡ˆä¾‹-ç™»å½•è®¤è¯" class="headerlink" title="æ¡ˆä¾‹-ç™»å½•è®¤è¯"></a>æ¡ˆä¾‹-ç™»å½•è®¤è¯</h1><p>åœ¨å‰é¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†éƒ¨é—¨ç®¡ç†ã€å‘˜å·¥ç®¡ç†çš„åŸºæœ¬åŠŸèƒ½ï¼Œä½†æ˜¯å¤§å®¶ä¼šå‘ç°ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ç™»å½•ï¼Œå°±ç›´æ¥è®¿é—®åˆ°äº†Tliasæ™ºèƒ½å­¦ä¹ è¾…åŠ©ç³»ç»Ÿçš„åå°ã€‚ è¿™æ˜¯ä¸å®‰å…¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»Šå¤©çš„ä¸»é¢˜å°±æ˜¯ç™»å½•è®¤è¯ã€‚ æœ€ç»ˆæˆ‘ä»¬è¦å®ç°çš„æ•ˆæœå°±æ˜¯ç”¨æˆ·å¿…é¡»ç™»å½•ä¹‹åï¼Œæ‰å¯ä»¥è®¿é—®åå°ç³»ç»Ÿä¸­çš„åŠŸèƒ½ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050942525.png"></p><h2 id="1-ç™»å½•åŠŸèƒ½"><a href="#1-ç™»å½•åŠŸèƒ½" class="headerlink" title="1. ç™»å½•åŠŸèƒ½"></a>1. ç™»å½•åŠŸèƒ½</h2><h3 id="1-1-éœ€æ±‚"><a href="#1-1-éœ€æ±‚" class="headerlink" title="1.1 éœ€æ±‚"></a>1.1 éœ€æ±‚</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050944708.png"></p><p>åœ¨ç™»å½•ç•Œé¢ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¾“å…¥ç”¨æˆ·çš„ç”¨æˆ·åä»¥åŠå¯†ç ï¼Œç„¶åç‚¹å‡» â€œç™»å½•â€ æŒ‰é’®å°±è¦è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡ç«¯åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åæˆ–è€…å¯†ç æ˜¯å¦æ­£ç¡®ã€‚å¦‚æœæ­£ç¡®ï¼Œåˆ™è¿”å›æˆåŠŸç»“æœï¼Œå‰ç«¯è·³è½¬è‡³ç³»ç»Ÿé¦–é¡µé¢ã€‚</p><h3 id="1-2-æ¥å£æ–‡æ¡£"><a href="#1-2-æ¥å£æ–‡æ¡£" class="headerlink" title="1.2 æ¥å£æ–‡æ¡£"></a>1.2 æ¥å£æ–‡æ¡£</h3><p>æˆ‘ä»¬å‚ç…§æ¥å£æ–‡æ¡£æ¥å¼€å‘ç™»å½•åŠŸèƒ½</p><ul><li><p>åŸºæœ¬ä¿¡æ¯</p><pre class="line-numbers language-none"><code class="language-none">è¯·æ±‚è·¯å¾„ï¼š/loginè¯·æ±‚æ–¹å¼ï¼šPOSTæ¥å£æè¿°ï¼šè¯¥æ¥å£ç”¨äºå‘˜å·¥ç™»å½•Tliasæ™ºèƒ½å­¦ä¹ è¾…åŠ©ç³»ç»Ÿï¼Œç™»å½•å®Œæ¯•åï¼Œç³»ç»Ÿä¸‹å‘JWTä»¤ç‰Œã€‚ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>è¯·æ±‚å‚æ•°</p><p>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>username</td><td>string</td><td>å¿…é¡»</td><td>ç”¨æˆ·å</td></tr><tr><td>password</td><td>string</td><td>å¿…é¡»</td><td>å¯†ç </td></tr></tbody></table><p>è¯·æ±‚æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span><span class="token property">"username"</span><span class="token operator">:</span> <span class="token string">"jinyong"</span><span class="token punctuation">,</span>    <span class="token property">"password"</span><span class="token operator">:</span> <span class="token string">"123456"</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å“åº”æ•°æ®</p><p>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>é»˜è®¤å€¼</th><th>å¤‡æ³¨</th><th>å…¶ä»–ä¿¡æ¯</th></tr></thead><tbody><tr><td>code</td><td>number</td><td>å¿…é¡»</td><td></td><td>å“åº”ç , 1 æˆåŠŸ ; 0  å¤±è´¥</td><td></td></tr><tr><td>msg</td><td>string</td><td>éå¿…é¡»</td><td></td><td>æç¤ºä¿¡æ¯</td><td></td></tr><tr><td>data</td><td>string</td><td>å¿…é¡»</td><td></td><td>è¿”å›çš„æ•°æ® , jwtä»¤ç‰Œ</td><td></td></tr></tbody></table><p>å“åº”æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"code"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">"msg"</span><span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token string">"eyJhbGciOiJIUzI1NiJ9.eyJuYW1lIjoi6YeR5bq4IiwiaWQiOjEsInVzZXJuYW1lIjoiamlueW9uZyIsImV4cCI6MTY2MjIwNzA0OH0.KkUc_CXJZJ8Dd063eImx4H9Ojfrr6XMJ-yVzaWCVZCo"</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="1-3-æ€è·¯åˆ†æ"><a href="#1-3-æ€è·¯åˆ†æ" class="headerlink" title="1.3 æ€è·¯åˆ†æ"></a>1.3 æ€è·¯åˆ†æ</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050945654.png"></p><p>ç™»å½•æœåŠ¡ç«¯çš„æ ¸å¿ƒé€»è¾‘å°±æ˜¯ï¼šæ¥æ”¶å‰ç«¯è¯·æ±‚ä¼ é€’çš„ç”¨æˆ·åå’Œå¯†ç  ï¼Œç„¶åå†æ ¹æ®ç”¨æˆ·åå’Œå¯†ç æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚æœç”¨æˆ·ä¿¡æ¯å­˜åœ¨ï¼Œåˆ™è¯´æ˜ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç æ­£ç¡®ã€‚å¦‚æœæŸ¥è¯¢åˆ°çš„ç”¨æˆ·ä¸å­˜åœ¨ï¼Œåˆ™è¯´æ˜ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç é”™è¯¯ã€‚</p><h3 id="1-4-åŠŸèƒ½å¼€å‘"><a href="#1-4-åŠŸèƒ½å¼€å‘" class="headerlink" title="1.4 åŠŸèƒ½å¼€å‘"></a>1.4 åŠŸèƒ½å¼€å‘</h3><p><strong>LoginController</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpService</span> empService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">Emp</span> e <span class="token operator">=</span> empService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span>  e <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpService</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ç”¨æˆ·ç™»å½•     * @param emp     * @return     */</span>    <span class="token keyword">public</span> <span class="token class-name">Emp</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpServiceImpl</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Emp</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//è°ƒç”¨daoå±‚åŠŸèƒ½ï¼šç™»å½•</span>        <span class="token class-name">Emp</span> loginEmp <span class="token operator">=</span> empMapper<span class="token punctuation">.</span><span class="token function">getByUsernameAndPassword</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è¿”å›æŸ¥è¯¢ç»“æœç»™Controller</span>        <span class="token keyword">return</span> loginEmp<span class="token punctuation">;</span>    <span class="token punctuation">}</span>           <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpMapper</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select id, username, password, name, gender, image, job, entrydate, dept_id, create_time, update_time "</span> <span class="token operator">+</span>            <span class="token string">"from emp "</span> <span class="token operator">+</span>            <span class="token string">"where username=#{username} and password =#{password}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Emp</span> <span class="token function">getByUsernameAndPassword</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-5-æµ‹è¯•"><a href="#1-5-æµ‹è¯•" class="headerlink" title="1.5 æµ‹è¯•"></a>1.5 æµ‹è¯•</h3><p>åŠŸèƒ½å¼€å‘å®Œæ¯•åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯åŠ¨æœåŠ¡ï¼Œæ‰“å¼€postmanè¿›è¡Œæµ‹è¯•äº†ã€‚ </p><p>å‘èµ·POSTè¯·æ±‚ï¼Œè®¿é—®ï¼š<a href="http://localhost:8080/login">http://localhost:8080/login</a></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050945395.png"> </p><p>postmanæµ‹è¯•é€šè¿‡äº†ï¼Œé‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»“åˆç€å‰ç«¯å·¥ç¨‹è¿›è¡Œè”è°ƒæµ‹è¯•ã€‚</p><p>å…ˆé€€å‡ºç³»ç»Ÿï¼Œè¿›å…¥åˆ°ç™»å½•é¡µé¢ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050945624.png"></p><p>åœ¨ç™»å½•é¡µé¢è¾“å…¥è´¦æˆ·å¯†ç ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050945151.png"></p><p>ç™»å½•æˆåŠŸä¹‹åè¿›å…¥åˆ°åå°ç®¡ç†ç³»ç»Ÿé¡µé¢ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050945673.png"></p><h2 id="2-ç™»å½•æ ¡éªŒ"><a href="#2-ç™»å½•æ ¡éªŒ" class="headerlink" title="2. ç™»å½•æ ¡éªŒ"></a>2. ç™»å½•æ ¡éªŒ</h2><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051031238.png"></p><h3 id="2-1-é—®é¢˜åˆ†æ"><a href="#2-1-é—®é¢˜åˆ†æ" class="headerlink" title="2.1 é—®é¢˜åˆ†æ"></a>2.1 é—®é¢˜åˆ†æ</h3><p>æˆ‘ä»¬å·²ç»å®Œæˆäº†åŸºç¡€ç™»å½•åŠŸèƒ½çš„å¼€å‘ä¸æµ‹è¯•ï¼Œåœ¨æˆ‘ä»¬ç™»å½•æˆåŠŸåå°±å¯ä»¥è¿›å…¥åˆ°åå°ç®¡ç†ç³»ç»Ÿä¸­è¿›è¡Œæ•°æ®çš„æ“ä½œã€‚</p><p>ä½†æ˜¯å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­æ–°çš„é¡µé¢ä¸Šè¾“å…¥åœ°å€ï¼š<code>http://localhost:9528/#/system/dept</code>ï¼Œå‘ç°æ²¡æœ‰ç™»å½•ä»ç„¶å¯ä»¥è¿›å…¥åˆ°åç«¯ç®¡ç†ç³»ç»Ÿé¡µé¢ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050946086.png"></p><p>è€ŒçœŸæ­£çš„ç™»å½•åŠŸèƒ½åº”è¯¥æ˜¯ï¼šç™»é™†åæ‰èƒ½è®¿é—®åç«¯ç³»ç»Ÿé¡µé¢ï¼Œä¸ç™»é™†åˆ™è·³è½¬ç™»é™†é¡µé¢è¿›è¡Œç™»é™†ã€‚</p><p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Ÿå…¶å®åŸå› å¾ˆç®€å•ï¼Œå°±æ˜¯å› ä¸ºé’ˆå¯¹äºæˆ‘ä»¬å½“å‰æ‰€å¼€å‘çš„éƒ¨é—¨ç®¡ç†ã€å‘˜å·¥ç®¡ç†ä»¥åŠæ–‡ä»¶ä¸Šä¼ ç­‰ç›¸å…³æ¥å£æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨æœåŠ¡å™¨ç«¯å¹¶æ²¡æœ‰åšä»»ä½•çš„åˆ¤æ–­ï¼Œæ²¡æœ‰å»åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•äº†ã€‚æ‰€ä»¥æ— è®ºç”¨æˆ·æ˜¯å¦ç™»å½•ï¼Œéƒ½å¯ä»¥è®¿é—®éƒ¨é—¨ç®¡ç†ä»¥åŠå‘˜å·¥ç®¡ç†çš„ç›¸å…³æ•°æ®ã€‚æ‰€ä»¥æˆ‘ä»¬ç›®å‰æ‰€å¼€å‘çš„ç™»å½•åŠŸèƒ½ï¼Œå®ƒåªæ˜¯å¾’æœ‰å…¶è¡¨ã€‚è€Œæˆ‘ä»¬è¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±éœ€è¦å®Œæˆä¸€æ­¥éå¸¸é‡è¦çš„æ“ä½œï¼šç™»å½•æ ¡éªŒã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050946170.png"></p><p>ä»€ä¹ˆæ˜¯ç™»å½•æ ¡éªŒï¼Ÿ</p><ul><li>æ‰€è°“ç™»å½•æ ¡éªŒï¼ŒæŒ‡çš„æ˜¯æˆ‘ä»¬åœ¨æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°æµè§ˆå™¨å‘é€è¿‡æ¥çš„è¯·æ±‚ä¹‹åï¼Œé¦–å…ˆæˆ‘ä»¬è¦å¯¹è¯·æ±‚è¿›è¡Œæ ¡éªŒã€‚å…ˆè¦æ ¡éªŒä¸€ä¸‹ç”¨æˆ·ç™»å½•äº†æ²¡æœ‰ï¼Œå¦‚æœç”¨æˆ·å·²ç»ç™»å½•äº†ï¼Œå°±ç›´æ¥æ‰§è¡Œå¯¹åº”çš„ä¸šåŠ¡æ“ä½œå°±å¯ä»¥äº†ï¼›å¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œæ­¤æ—¶å°±ä¸å…è®¸ä»–æ‰§è¡Œç›¸å…³çš„ä¸šåŠ¡æ“ä½œï¼Œç›´æ¥ç»™å‰ç«¯å“åº”ä¸€ä¸ªé”™è¯¯çš„ç»“æœï¼Œæœ€ç»ˆè·³è½¬åˆ°ç™»å½•é¡µé¢ï¼Œè¦æ±‚ä»–ç™»å½•æˆåŠŸä¹‹åï¼Œå†æ¥è®¿é—®å¯¹åº”çš„æ•°æ®ã€‚</li></ul><p>äº†è§£å®Œä»€ä¹ˆæ˜¯ç™»å½•æ ¡éªŒä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åˆ†æä¸€ä¸‹ç™»å½•æ ¡éªŒå¤§æ¦‚çš„å®ç°æ€è·¯ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬åœ¨å®è§‚ä¸Šå…ˆæœ‰ä¸€ä¸ªè®¤çŸ¥ï¼š</p><p>å‰é¢åœ¨è®²è§£HTTPåè®®çš„æ—¶å€™ï¼Œæˆ‘ä»¬æåˆ°HTTPåè®®æ˜¯æ— çŠ¶æ€åè®®ã€‚ä»€ä¹ˆåˆæ˜¯æ— çŠ¶æ€çš„åè®®ï¼Ÿ</p><p>æ‰€è°“æ— çŠ¶æ€ï¼ŒæŒ‡çš„æ˜¯æ¯ä¸€æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸‹ä¸€æ¬¡è¯·æ±‚å¹¶ä¸ä¼šæºå¸¦ä¸Šä¸€æ¬¡è¯·æ±‚çš„æ•°æ®ã€‚è€Œæµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œäº¤äº’ï¼ŒåŸºäºHTTPåè®®ä¹Ÿå°±æ„å‘³ç€ç°åœ¨æˆ‘ä»¬é€šè¿‡æµè§ˆå™¨æ¥è®¿é—®äº†ç™»é™†è¿™ä¸ªæ¥å£ï¼Œå®ç°äº†ç™»é™†çš„æ“ä½œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åœ¨æ‰§è¡Œå…¶ä»–ä¸šåŠ¡æ“ä½œæ—¶ï¼ŒæœåŠ¡å™¨ä¹Ÿå¹¶ä¸çŸ¥é“è¿™ä¸ªå‘˜å·¥åˆ°åº•ç™»é™†äº†æ²¡æœ‰ã€‚å› ä¸ºHTTPåè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œä¸¤æ¬¡è¯·æ±‚ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥æ˜¯æ— æ³•åˆ¤æ–­è¿™ä¸ªå‘˜å·¥åˆ°åº•ç™»é™†äº†æ²¡æœ‰ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050946619.png"></p><p>é‚£åº”è¯¥æ€ä¹ˆæ¥å®ç°ç™»å½•æ ¡éªŒçš„æ“ä½œå‘¢ï¼Ÿå…·ä½“çš„å®ç°æ€è·¯å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p><ol><li>åœ¨å‘˜å·¥ç™»å½•æˆåŠŸåï¼Œéœ€è¦å°†ç”¨æˆ·ç™»å½•æˆåŠŸçš„ä¿¡æ¯å­˜èµ·æ¥ï¼Œè®°å½•ç”¨æˆ·å·²ç»ç™»å½•æˆåŠŸçš„æ ‡è®°ã€‚</li><li>åœ¨æµè§ˆå™¨å‘èµ·è¯·æ±‚æ—¶ï¼Œéœ€è¦åœ¨æœåŠ¡ç«¯è¿›è¡Œç»Ÿä¸€æ‹¦æˆªï¼Œæ‹¦æˆªåè¿›è¡Œç™»å½•æ ¡éªŒã€‚</li></ol><blockquote><p>æƒ³è¦åˆ¤æ–­å‘˜å·¥æ˜¯å¦å·²ç»ç™»å½•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å‘˜å·¥ç™»å½•æˆåŠŸä¹‹åï¼Œå­˜å‚¨ä¸€ä¸ªç™»å½•æˆåŠŸçš„æ ‡è®°ï¼Œæ¥ä¸‹æ¥åœ¨æ¯ä¸€ä¸ªæ¥å£æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œå…ˆåšä¸€ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œåˆ¤æ–­ä¸€ä¸‹è¿™ä¸ªå‘˜å·¥åˆ°åº•ç™»å½•äº†æ²¡æœ‰ã€‚å¦‚æœæ˜¯ç™»å½•äº†ï¼Œå°±å¯ä»¥æ‰§è¡Œæ­£å¸¸çš„ä¸šåŠ¡æ“ä½œï¼Œå¦‚æœæ²¡æœ‰ç™»å½•ï¼Œä¼šç›´æ¥ç»™å‰ç«¯è¿”å›ä¸€ä¸ªé”™è¯¯çš„ä¿¡æ¯ï¼Œå‰ç«¯æ‹¿åˆ°è¿™ä¸ªé”™è¯¯ä¿¡æ¯ä¹‹åä¼šè‡ªåŠ¨çš„è·³è½¬åˆ°ç™»å½•é¡µé¢ã€‚</p><p>æˆ‘ä»¬ç¨‹åºä¸­æ‰€å¼€å‘çš„æŸ¥è¯¢åŠŸèƒ½ã€åˆ é™¤åŠŸèƒ½ã€æ·»åŠ åŠŸèƒ½ã€ä¿®æ”¹åŠŸèƒ½ï¼Œéƒ½éœ€è¦ä½¿ç”¨ä»¥ä¸Šå¥—è·¯è¿›è¡Œç™»å½•æ ¡éªŒã€‚æ­¤æ—¶å°±ä¼šå‡ºç°ï¼šç›¸åŒä»£ç é€»è¾‘ï¼Œæ¯ä¸ªåŠŸèƒ½éƒ½éœ€è¦ç¼–å†™ï¼Œå°±ä¼šé€ æˆä»£ç éå¸¸ç¹çã€‚</p><p>ä¸ºäº†ç®€åŒ–è¿™å—æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç§æŠ€æœ¯ï¼šç»Ÿä¸€æ‹¦æˆªæŠ€æœ¯ã€‚</p><p>é€šè¿‡ç»Ÿä¸€æ‹¦æˆªçš„æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥æ¥æ‹¦æˆªæµè§ˆå™¨å‘é€è¿‡æ¥çš„æ‰€æœ‰çš„è¯·æ±‚ï¼Œæ‹¦æˆªåˆ°è¿™ä¸ªè¯·æ±‚ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡è¯·æ±‚æ¥è·å–ä¹‹å‰æ‰€å­˜å…¥çš„ç™»å½•æ ‡è®°ï¼Œåœ¨è·å–åˆ°ç™»å½•æ ‡è®°ä¸”æ ‡è®°ä¸ºç™»å½•æˆåŠŸï¼Œå°±è¯´æ˜å‘˜å·¥å·²ç»ç™»å½•äº†ã€‚å¦‚æœå·²ç»ç™»å½•ï¼Œæˆ‘ä»¬å°±ç›´æ¥æ”¾è¡Œ(æ„æ€å°±æ˜¯å¯ä»¥è®¿é—®æ­£å¸¸çš„ä¸šåŠ¡æ¥å£äº†)ã€‚</p></blockquote><p>æˆ‘ä»¬è¦å®Œæˆä»¥ä¸Šæ“ä½œï¼Œä¼šæ¶‰åŠåˆ°webå¼€å‘ä¸­çš„ä¸¤ä¸ªæŠ€æœ¯ï¼š</p><ol><li>ä¼šè¯æŠ€æœ¯</li><li>ç»Ÿä¸€æ‹¦æˆªæŠ€æœ¯</li></ol><p>è€Œç»Ÿä¸€æ‹¦æˆªæŠ€æœ¯ç°å®æ–¹æ¡ˆä¹Ÿæœ‰ä¸¤ç§ï¼š</p><ol><li>Servletè§„èŒƒä¸­çš„Filterè¿‡æ»¤å™¨</li><li>Springæä¾›çš„interceptoræ‹¦æˆªå™¨</li></ol><p>ä¸‹é¢æˆ‘ä»¬å…ˆå­¦ä¹ ä¼šè¯æŠ€æœ¯ï¼Œç„¶åå†å­¦ä¹ ç»Ÿä¸€æ‹¦æˆªæŠ€æœ¯ã€‚</p><h3 id="2-2-ä¼šè¯æŠ€æœ¯"><a href="#2-2-ä¼šè¯æŠ€æœ¯" class="headerlink" title="2.2 ä¼šè¯æŠ€æœ¯"></a>2.2 ä¼šè¯æŠ€æœ¯</h3><p>ä»‹ç»äº†ç™»å½•æ ¡éªŒçš„å¤§æ¦‚æ€è·¯ä¹‹åï¼Œæˆ‘ä»¬å…ˆæ¥å­¦ä¹ ä¸‹ä¼šè¯æŠ€æœ¯ã€‚</p><h4 id="2-2-1-ä¼šè¯æŠ€æœ¯ä»‹ç»"><a href="#2-2-1-ä¼šè¯æŠ€æœ¯ä»‹ç»" class="headerlink" title="2.2.1 ä¼šè¯æŠ€æœ¯ä»‹ç»"></a>2.2.1 ä¼šè¯æŠ€æœ¯ä»‹ç»</h4><p>ä»€ä¹ˆæ˜¯ä¼šè¯ï¼Ÿ</p><ul><li><p>åœ¨æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»å½“ä¸­ï¼Œä¼šè¯æŒ‡çš„å°±æ˜¯è°ˆè¯ã€äº¤è°ˆã€‚</p></li><li><p>åœ¨webå¼€å‘å½“ä¸­ï¼Œä¼šè¯æŒ‡çš„å°±æ˜¯æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„ä¸€æ¬¡è¿æ¥ï¼Œæˆ‘ä»¬å°±ç§°ä¸ºä¸€æ¬¡ä¼šè¯ã€‚</p><blockquote><p>åœ¨ç”¨æˆ·æ‰“å¼€æµè§ˆå™¨ç¬¬ä¸€æ¬¡è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼Œè¿™ä¸ªä¼šè¯å°±å»ºç«‹äº†ï¼Œç›´åˆ°æœ‰ä»»ä½•ä¸€æ–¹æ–­å¼€è¿æ¥ï¼Œæ­¤æ—¶ä¼šè¯å°±ç»“æŸäº†ã€‚åœ¨ä¸€æ¬¡ä¼šè¯å½“ä¸­ï¼Œæ˜¯å¯ä»¥åŒ…å«å¤šæ¬¡è¯·æ±‚å’Œå“åº”çš„ã€‚</p><p>æ¯”å¦‚ï¼šæ‰“å¼€äº†æµè§ˆå™¨æ¥è®¿é—®webæœåŠ¡å™¨ä¸Šçš„èµ„æºï¼ˆæµè§ˆå™¨ä¸èƒ½å…³é—­ã€æœåŠ¡å™¨ä¸èƒ½æ–­å¼€ï¼‰</p><ul><li>ç¬¬1æ¬¡ï¼šè®¿é—®çš„æ˜¯ç™»å½•çš„æ¥å£ï¼Œå®Œæˆç™»å½•æ“ä½œ</li><li>ç¬¬2æ¬¡ï¼šè®¿é—®çš„æ˜¯éƒ¨é—¨ç®¡ç†æ¥å£ï¼ŒæŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨æ•°æ®</li><li>ç¬¬3æ¬¡ï¼šè®¿é—®çš„æ˜¯å‘˜å·¥ç®¡ç†æ¥å£ï¼ŒæŸ¥è¯¢å‘˜å·¥æ•°æ®</li></ul><p>åªè¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨éƒ½æ²¡æœ‰å…³é—­ï¼Œä»¥ä¸Š3æ¬¡è¯·æ±‚éƒ½å±äºä¸€æ¬¡ä¼šè¯å½“ä¸­å®Œæˆçš„ã€‚</p></blockquote></li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050955084.png"></p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p><p>ä¼šè¯æ˜¯å’Œæµè§ˆå™¨å…³è”çš„ï¼Œå½“æœ‰ä¸‰ä¸ªæµè§ˆå™¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å»ºç«‹äº†è¿æ¥æ—¶ï¼Œå°±ä¼šæœ‰ä¸‰ä¸ªä¼šè¯ã€‚</p><p>åŒä¸€ä¸ªæµè§ˆå™¨åœ¨æœªå…³é—­ä¹‹å‰è¯·æ±‚äº†å¤šæ¬¡æœåŠ¡å™¨ï¼Œè¿™å¤šæ¬¡è¯·æ±‚æ˜¯å±äºåŒä¸€ä¸ªä¼šè¯ã€‚æ¯”å¦‚ï¼š1ã€2ã€3è¿™ä¸‰ä¸ªè¯·æ±‚éƒ½æ˜¯å±äºåŒä¸€ä¸ªä¼šè¯ã€‚å½“æˆ‘ä»¬å…³é—­æµè§ˆå™¨ä¹‹åï¼Œè¿™æ¬¡ä¼šè¯å°±ç»“æŸäº†ã€‚è€Œå¦‚æœæˆ‘ä»¬æ˜¯ç›´æ¥æŠŠwebæœåŠ¡å™¨å…³äº†ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ä¼šè¯å°±éƒ½ç»“æŸäº†ã€‚</p><p>çŸ¥é“äº†ä¼šè¯çš„æ¦‚å¿µäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥äº†è§£ä¸‹ä¼šè¯è·Ÿè¸ªã€‚</p><p>ä¼šè¯è·Ÿè¸ªï¼šä¸€ç§ç»´æŠ¤æµè§ˆå™¨çŠ¶æ€çš„æ–¹æ³•ï¼ŒæœåŠ¡å™¨éœ€è¦è¯†åˆ«å¤šæ¬¡è¯·æ±‚æ˜¯å¦æ¥è‡ªäºåŒä¸€æµè§ˆå™¨ï¼Œä»¥ä¾¿åœ¨åŒä¸€æ¬¡ä¼šè¯çš„å¤šæ¬¡è¯·æ±‚é—´å…±äº«æ•°æ®ã€‚</p><blockquote><p>æœåŠ¡å™¨ä¼šæ¥æ”¶å¾ˆå¤šçš„è¯·æ±‚ï¼Œä½†æ˜¯æœåŠ¡å™¨æ˜¯éœ€è¦è¯†åˆ«å‡ºè¿™äº›è¯·æ±‚æ˜¯ä¸æ˜¯åŒä¸€ä¸ªæµè§ˆå™¨å‘å‡ºæ¥çš„ã€‚æ¯”å¦‚ï¼š1å’Œ2è¿™ä¸¤ä¸ªè¯·æ±‚æ˜¯ä¸æ˜¯åŒä¸€ä¸ªæµè§ˆå™¨å‘å‡ºæ¥çš„ï¼Œ3å’Œ5è¿™ä¸¤ä¸ªè¯·æ±‚ä¸æ˜¯åŒä¸€ä¸ªæµè§ˆå™¨å‘å‡ºæ¥çš„ã€‚å¦‚æœæ˜¯åŒä¸€ä¸ªæµè§ˆå™¨å‘å‡ºæ¥çš„ï¼Œå°±è¯´æ˜æ˜¯åŒä¸€ä¸ªä¼šè¯ã€‚å¦‚æœæ˜¯ä¸åŒçš„æµè§ˆå™¨å‘å‡ºæ¥çš„ï¼Œå°±è¯´æ˜æ˜¯ä¸åŒçš„ä¼šè¯ã€‚è€Œè¯†åˆ«å¤šæ¬¡è¯·æ±‚æ˜¯å¦æ¥è‡ªäºåŒä¸€æµè§ˆå™¨çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å°±ç§°ä¸ºä¼šè¯è·Ÿè¸ªã€‚</p></blockquote><p>æˆ‘ä»¬ä½¿ç”¨ä¼šè¯è·Ÿè¸ªæŠ€æœ¯å°±æ˜¯è¦å®Œæˆåœ¨åŒä¸€ä¸ªä¼šè¯ä¸­ï¼Œå¤šä¸ªè¯·æ±‚ä¹‹é—´è¿›è¡Œå…±äº«æ•°æ®ã€‚</p><blockquote><p>ä¸ºä»€ä¹ˆè¦å…±äº«æ•°æ®å‘¢ï¼Ÿ</p><p>ç”±äºHTTPæ˜¯æ— çŠ¶æ€åè®®ï¼Œåœ¨åé¢è¯·æ±‚ä¸­æ€ä¹ˆæ‹¿åˆ°å‰ä¸€æ¬¡è¯·æ±‚ç”Ÿæˆçš„æ•°æ®å‘¢ï¼Ÿæ­¤æ—¶å°±éœ€è¦åœ¨ä¸€æ¬¡ä¼šè¯çš„å¤šæ¬¡è¯·æ±‚ä¹‹é—´è¿›è¡Œæ•°æ®å…±äº«</p></blockquote><p>ä¼šè¯è·Ÿè¸ªæŠ€æœ¯æœ‰ä¸¤ç§ï¼š</p><ol><li>Cookieï¼ˆ<strong>å®¢æˆ·ç«¯</strong>ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ï¼‰<ul><li>æ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨å½“ä¸­</li></ul></li><li>Sessionï¼ˆ<strong>æœåŠ¡ç«¯</strong>ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ï¼‰<ul><li>æ•°æ®å­˜å‚¨åœ¨å‚¨åœ¨æœåŠ¡ç«¯</li></ul></li><li>ä»¤ç‰ŒæŠ€æœ¯</li></ol><h4 id="2-2-2-ä¼šè¯è·Ÿè¸ªæ–¹æ¡ˆ"><a href="#2-2-2-ä¼šè¯è·Ÿè¸ªæ–¹æ¡ˆ" class="headerlink" title="2.2.2 ä¼šè¯è·Ÿè¸ªæ–¹æ¡ˆ"></a>2.2.2 ä¼šè¯è·Ÿè¸ªæ–¹æ¡ˆ</h4><p>ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†ä»€ä¹ˆæ˜¯ä¼šè¯ï¼Œä»€ä¹ˆæ˜¯ä¼šè¯è·Ÿè¸ªï¼Œå¹¶ä¸”ä¹Ÿæåˆ°äº†ä¼šè¯è·Ÿè¸ª 3 ç§å¸¸è§çš„æŠ€æœ¯æ–¹æ¡ˆã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥å¯¹æ¯”ä¸€ä¸‹è¿™ 3 ç§ä¼šè¯è·Ÿè¸ªçš„æŠ€æœ¯æ–¹æ¡ˆï¼Œæ¥çœ‹ä¸€ä¸‹å…·ä½“çš„å®ç°æ€è·¯ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¼˜ç¼ºç‚¹ã€‚</p><h5 id="2-2-2-1-æ–¹æ¡ˆä¸€-Cookie"><a href="#2-2-2-1-æ–¹æ¡ˆä¸€-Cookie" class="headerlink" title="2.2.2.1 æ–¹æ¡ˆä¸€ - Cookie"></a>2.2.2.1 æ–¹æ¡ˆä¸€ - Cookie</h5><p><img src="/SpringBootWeb%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81.assets/image-20241205111814373.png"></p><p>cookie æ˜¯å®¢æˆ·ç«¯ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ï¼Œå®ƒæ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ cookie æ¥è·Ÿè¸ªä¼šè¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æµè§ˆå™¨ç¬¬ä¸€æ¬¡å‘èµ·è¯·æ±‚æ¥è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨æœåŠ¡å™¨ç«¯æ¥è®¾ç½®ä¸€ä¸ªcookieã€‚</p><p>æ¯”å¦‚ç¬¬ä¸€æ¬¡è¯·æ±‚äº†ç™»å½•æ¥å£ï¼Œç™»å½•æ¥å£æ‰§è¡Œå®Œæˆä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¾ç½®ä¸€ä¸ªcookieï¼Œåœ¨ cookie å½“ä¸­æˆ‘ä»¬å°±å¯ä»¥æ¥å­˜å‚¨ç”¨æˆ·ç›¸å…³çš„ä¸€äº›æ•°æ®ä¿¡æ¯ã€‚æ¯”å¦‚æˆ‘å¯ä»¥åœ¨ cookie å½“ä¸­æ¥å­˜å‚¨å½“å‰ç™»å½•ç”¨æˆ·çš„ç”¨æˆ·åï¼Œç”¨æˆ·çš„IDã€‚</p><p>æœåŠ¡å™¨ç«¯åœ¨ç»™å®¢æˆ·ç«¯åœ¨å“åº”æ•°æ®çš„æ—¶å€™ï¼Œä¼š<strong>è‡ªåŠ¨</strong>çš„å°† cookie å“åº”ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ°å“åº”å›æ¥çš„ cookie ä¹‹åï¼Œä¼š<strong>è‡ªåŠ¨</strong>çš„å°† cookie çš„å€¼å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°ã€‚æ¥ä¸‹æ¥åœ¨åç»­çš„æ¯ä¸€æ¬¡è¯·æ±‚å½“ä¸­ï¼Œéƒ½ä¼šå°†æµè§ˆå™¨æœ¬åœ°æ‰€å­˜å‚¨çš„ cookie <strong>è‡ªåŠ¨</strong>åœ°æºå¸¦åˆ°æœåŠ¡ç«¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050955762.png"> </p><p>æ¥ä¸‹æ¥åœ¨æœåŠ¡ç«¯æˆ‘ä»¬å°±å¯ä»¥è·å–åˆ° cookie çš„å€¼ã€‚æˆ‘ä»¬å¯ä»¥å»åˆ¤æ–­ä¸€ä¸‹è¿™ä¸ª cookie çš„å€¼æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨è¿™ä¸ªcookieï¼Œå°±è¯´æ˜å®¢æˆ·ç«¯ä¹‹å‰æ˜¯æ²¡æœ‰è®¿é—®ç™»å½•æ¥å£çš„ï¼›å¦‚æœå­˜åœ¨ cookie çš„å€¼ï¼Œå°±è¯´æ˜å®¢æˆ·ç«¯ä¹‹å‰å·²ç»ç™»å½•å®Œæˆäº†ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åŸºäº cookie åœ¨åŒä¸€æ¬¡ä¼šè¯çš„ä¸åŒè¯·æ±‚ä¹‹é—´æ¥å…±äº«æ•°æ®ã€‚</p><p>æˆ‘åˆšæ‰åœ¨ä»‹ç»æµç¨‹çš„æ—¶å€™ï¼Œç”¨äº† 3 ä¸ªè‡ªåŠ¨ï¼š</p><ul><li><p>æœåŠ¡å™¨ä¼š <strong>è‡ªåŠ¨</strong> çš„å°† cookie å“åº”ç»™æµè§ˆå™¨ã€‚</p></li><li><p>æµè§ˆå™¨æ¥æ”¶åˆ°å“åº”å›æ¥çš„æ•°æ®ä¹‹åï¼Œä¼š <strong>è‡ªåŠ¨</strong> çš„å°† cookie å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°ã€‚</p></li><li><p>åœ¨åç»­çš„è¯·æ±‚å½“ä¸­ï¼Œæµè§ˆå™¨ä¼š <strong>è‡ªåŠ¨</strong> çš„å°† cookie æºå¸¦åˆ°æœåŠ¡å™¨ç«¯ã€‚</p></li></ul><p><strong>ä¸ºä»€ä¹ˆè¿™ä¸€åˆ‡éƒ½æ˜¯è‡ªåŠ¨åŒ–è¿›è¡Œçš„ï¼Ÿ</strong></p><p>æ˜¯å› ä¸º cookie å®ƒæ˜¯ HTP åè®®å½“ä¸­æ‰€æ”¯æŒçš„æŠ€æœ¯ï¼Œè€Œå„å¤§æµè§ˆå™¨å‚å•†éƒ½æ”¯æŒäº†è¿™ä¸€æ ‡å‡†ã€‚åœ¨ HTTP åè®®å®˜æ–¹ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå“åº”å¤´å’Œè¯·æ±‚å¤´ï¼š</p><ul><li><p>å“åº”å¤´ Set-Cookie ï¼šè®¾ç½®Cookieæ•°æ®çš„</p></li><li><p>è¯·æ±‚å¤´ Cookieï¼šæºå¸¦Cookieæ•°æ®çš„</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050955618.png"> </p><p><strong>ä»£ç æµ‹è¯•</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SessionController</span> <span class="token punctuation">{</span>    <span class="token comment">//è®¾ç½®Cookie</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/c1"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">cookie1</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span><span class="token punctuation">{</span>        response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"login_username"</span><span class="token punctuation">,</span><span class="token string">"itheima"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è®¾ç½®Cookie/å“åº”Cookie</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//è·å–Cookie</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/c2"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">cookie2</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie <span class="token operator">:</span> cookies<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"login_username"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"login_username: "</span><span class="token operator">+</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è¾“å‡ºnameä¸ºlogin_usernameçš„cookie</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>A. è®¿é—®c1æ¥å£ï¼Œè®¾ç½®Cookieï¼Œ<a href="http://localhost:8080/c1">http://localhost:8080/c1</a></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050955832.png"> </p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè®¾ç½®çš„cookieï¼Œé€šè¿‡<strong>å“åº”å¤´Set-Cookie</strong>å“åº”ç»™æµè§ˆå™¨ï¼Œå¹¶ä¸”æµè§ˆå™¨ä¼šå°†Cookieï¼Œå­˜å‚¨åœ¨æµè§ˆå™¨ç«¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050955757.png"> </p><p>B. è®¿é—®c2æ¥å£ <a href="http://localhost:8080/c2%EF%BC%8C%E6%AD%A4%E6%97%B6%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BC%9A%E8%87%AA%E5%8A%A8%E7%9A%84%E5%B0%86Cookie%E6%90%BA%E5%B8%A6%E5%88%B0%E6%9C%8D%E5%8A%A1%E7%AB%AF%EF%BC%8C%E6%98%AF%E9%80%9A%E8%BF%87**%E8%AF%B7%E6%B1%82%E5%A4%B4Cookie**%EF%BC%8C%E6%90%BA%E5%B8%A6%E7%9A%84%E3%80%82">http://localhost:8080/c2ï¼Œæ­¤æ—¶æµè§ˆå™¨ä¼šè‡ªåŠ¨çš„å°†Cookieæºå¸¦åˆ°æœåŠ¡ç«¯ï¼Œæ˜¯é€šè¿‡**è¯·æ±‚å¤´Cookie**ï¼Œæºå¸¦çš„ã€‚</a></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050956685.png"> </p><p><strong>ä¼˜ç¼ºç‚¹</strong></p><ul><li>ä¼˜ç‚¹ï¼šHTTPåè®®ä¸­æ”¯æŒçš„æŠ€æœ¯ï¼ˆåƒSet-Cookie å“åº”å¤´çš„è§£æä»¥åŠ Cookie è¯·æ±‚å¤´æ•°æ®çš„æºå¸¦ï¼Œéƒ½æ˜¯æµè§ˆå™¨è‡ªåŠ¨è¿›è¡Œçš„ï¼Œæ˜¯æ— éœ€æˆ‘ä»¬æ‰‹åŠ¨æ“ä½œçš„ï¼‰</li><li>ç¼ºç‚¹ï¼š<ul><li>ç§»åŠ¨ç«¯APP(Androidã€IOS)ä¸­æ— æ³•ä½¿ç”¨Cookie</li><li>ä¸å®‰å…¨ï¼Œç”¨æˆ·å¯ä»¥è‡ªå·±ç¦ç”¨Cookie</li><li>Cookieä¸èƒ½è·¨åŸŸ</li></ul></li></ul><blockquote><p>è·¨åŸŸä»‹ç»ï¼š</p><p>â€‹ <img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050957861.png" alt="image-20230112103840467" style="zoom:80%;"> </p><ul><li>ç°åœ¨çš„é¡¹ç›®ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯å‰åç«¯åˆ†ç¦»çš„ï¼Œå‰åç«¯æœ€ç»ˆä¹Ÿä¼šåˆ†å¼€éƒ¨ç½²ï¼Œå‰ç«¯éƒ¨ç½²åœ¨æœåŠ¡å™¨ 192.168.150.200 ä¸Šï¼Œç«¯å£ 80ï¼Œåç«¯éƒ¨ç½²åœ¨ 192.168.150.100ä¸Šï¼Œç«¯å£ 8080</li><li>æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨ç›´æ¥è®¿é—®å‰ç«¯å·¥ç¨‹ï¼Œè®¿é—®urlï¼š<a href="http://192.168.150.200/login.html">http://192.168.150.200/login.html</a></li><li>ç„¶ååœ¨è¯¥é¡µé¢å‘èµ·è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œè€ŒæœåŠ¡ç«¯æ‰€åœ¨åœ°å€ä¸å†æ˜¯localhostï¼Œè€Œæ˜¯æœåŠ¡å™¨çš„IPåœ°å€192.168.150.100ï¼Œå‡è®¾è®¿é—®æ¥å£åœ°å€ä¸ºï¼š<a href="http://192.168.150.100:8080/login">http://192.168.150.100:8080/login</a></li><li>é‚£æ­¤æ—¶å°±å­˜åœ¨è·¨åŸŸæ“ä½œäº†ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯åœ¨ <a href="http://192.168.150.200/login.html">http://192.168.150.200/login.html</a> è¿™ä¸ªé¡µé¢ä¸Šè®¿é—®äº†<a href="http://192.168.150.100:8080/login">http://192.168.150.100:8080/login</a> æ¥å£</li><li>æ­¤æ—¶å¦‚æœæœåŠ¡å™¨è®¾ç½®äº†ä¸€ä¸ªCookieï¼Œè¿™ä¸ªCookieæ˜¯ä¸èƒ½ä½¿ç”¨çš„ï¼Œå› ä¸ºCookieæ— æ³•è·¨åŸŸ</li></ul><p>åŒºåˆ†è·¨åŸŸçš„ç»´åº¦ï¼š</p><ul><li>åè®®</li><li>IP/åè®®</li><li>ç«¯å£</li></ul><p>åªè¦ä¸Šè¿°çš„ä¸‰ä¸ªç»´åº¦æœ‰ä»»ä½•ä¸€ä¸ªç»´åº¦ä¸åŒï¼Œé‚£å°±æ˜¯è·¨åŸŸæ“ä½œ</p><p>ä¸¾ä¾‹ï¼š</p><p>â€‹<a href="http://192.168.150.200/login.html">http://192.168.150.200/login.html</a> â€”â€”â€”-&gt; <a href="https://192.168.150.200/login">https://192.168.150.200/login</a>   [åè®®ä¸åŒï¼Œè·¨åŸŸ]</p><p>â€‹<a href="http://192.168.150.200/login.html">http://192.168.150.200/login.html</a> â€”â€”â€”-&gt; <a href="http://192.168.150.100/login">http://192.168.150.100/login</a>     [IPä¸åŒï¼Œè·¨åŸŸ]</p><p>â€‹<a href="http://192.168.150.200/login.html">http://192.168.150.200/login.html</a> â€”â€”â€”-&gt; <a href="http://192.168.150.200:8080/login">http://192.168.150.200:8080/login</a>   [ç«¯å£ä¸åŒï¼Œè·¨åŸŸ]</p><p>â€‹    <a href="http://192.168.150.200/login.html">http://192.168.150.200/login.html</a> â€”â€”â€”-&gt; <a href="http://192.168.150.200/login">http://192.168.150.200/login</a>     [ä¸è·¨åŸŸ]   </p></blockquote><h5 id="2-2-2-2-æ–¹æ¡ˆäºŒ-Session"><a href="#2-2-2-2-æ–¹æ¡ˆäºŒ-Session" class="headerlink" title="2.2.2.2 æ–¹æ¡ˆäºŒ - Session"></a>2.2.2.2 æ–¹æ¡ˆäºŒ - Session</h5><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241205112419114.png"></p><p>å‰é¢ä»‹ç»çš„æ—¶å€™ï¼Œæˆ‘ä»¬æåˆ°Sessionï¼Œå®ƒæ˜¯æœåŠ¡å™¨ç«¯ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ï¼Œæ‰€ä»¥å®ƒæ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯çš„ã€‚è€Œ Session çš„åº•å±‚å…¶å®å°±æ˜¯åŸºäºæˆ‘ä»¬åˆšæ‰æ‰€ä»‹ç»çš„ Cookie æ¥å®ç°çš„ã€‚</p><ul><li><p>è·å–Session</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050957894.png"> </p><p>å¦‚æœæˆ‘ä»¬ç°åœ¨è¦åŸºäº Session æ¥è¿›è¡Œä¼šè¯è·Ÿè¸ªï¼Œæµè§ˆå™¨åœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨æœåŠ¡å™¨å½“ä¸­æ¥è·å–åˆ°ä¼šè¯å¯¹è±¡Sessionã€‚å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¯·æ±‚Session ï¼Œä¼šè¯å¯¹è±¡æ˜¯ä¸å­˜åœ¨çš„ï¼Œè¿™ä¸ªæ—¶å€™æœåŠ¡å™¨ä¼šè‡ªåŠ¨çš„åˆ›å»ºä¸€ä¸ªä¼šè¯å¯¹è±¡Session ã€‚è€Œæ¯ä¸€ä¸ªä¼šè¯å¯¹è±¡Session ï¼Œå®ƒéƒ½æœ‰ä¸€ä¸ªIDï¼ˆç¤ºæ„å›¾ä¸­Sessionåé¢æ‹¬å·ä¸­çš„1ï¼Œå°±è¡¨ç¤ºIDï¼‰ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º Session çš„IDã€‚</p></li><li><p>å“åº”Cookie (JSESSIONID)</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050957020.png"> </p><p>æ¥ä¸‹æ¥ï¼ŒæœåŠ¡å™¨ç«¯åœ¨ç»™æµè§ˆå™¨å“åº”æ•°æ®çš„æ—¶å€™ï¼Œå®ƒä¼šå°† Session çš„ ID é€šè¿‡ Cookie å“åº”ç»™æµè§ˆå™¨ã€‚å…¶å®åœ¨å“åº”å¤´å½“ä¸­å¢åŠ äº†ä¸€ä¸ª Set-Cookie å“åº”å¤´ã€‚è¿™ä¸ª  Set-Cookie  å“åº”å¤´å¯¹åº”çš„å€¼æ˜¯ä¸æ˜¯cookieï¼Ÿ cookie çš„åå­—æ˜¯å›ºå®šçš„ JSESSIONID ä»£è¡¨çš„æœåŠ¡å™¨ç«¯ä¼šè¯å¯¹è±¡ Session çš„ IDã€‚æµè§ˆå™¨ä¼šè‡ªåŠ¨è¯†åˆ«è¿™ä¸ªå“åº”å¤´ï¼Œç„¶åè‡ªåŠ¨å°†Cookieå­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°ã€‚</p></li><li><p>æŸ¥æ‰¾Session</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050957752.png"> </p><p>æ¥ä¸‹æ¥ï¼Œåœ¨åç»­çš„æ¯ä¸€æ¬¡è¯·æ±‚å½“ä¸­ï¼Œéƒ½ä¼šå°† Cookie çš„æ•°æ®è·å–å‡ºæ¥ï¼Œå¹¶ä¸”æºå¸¦åˆ°æœåŠ¡ç«¯ã€‚æ¥ä¸‹æ¥æœåŠ¡å™¨æ‹¿åˆ°JSESSIONIDè¿™ä¸ª Cookie çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ Session çš„IDã€‚æ‹¿åˆ° ID ä¹‹åï¼Œå°±ä¼šä»ä¼—å¤šçš„ Session å½“ä¸­æ¥æ‰¾åˆ°å½“å‰è¯·æ±‚å¯¹åº”çš„ä¼šè¯å¯¹è±¡Sessionã€‚</p><p>è¿™æ ·æˆ‘ä»¬æ˜¯ä¸æ˜¯å°±å¯ä»¥é€šè¿‡ Session ä¼šè¯å¯¹è±¡åœ¨åŒä¸€æ¬¡ä¼šè¯çš„å¤šæ¬¡è¯·æ±‚ä¹‹é—´æ¥å…±äº«æ•°æ®äº†ï¼Ÿå¥½ï¼Œè¿™å°±æ˜¯åŸºäº Session è¿›è¡Œä¼šè¯è·Ÿè¸ªçš„æµç¨‹ã€‚</p></li></ul><p><strong>ä»£ç æµ‹è¯•</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SessionController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/s1"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">session1</span><span class="token punctuation">(</span><span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"HttpSession-s1: {}"</span><span class="token punctuation">,</span> session<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"loginUser"</span><span class="token punctuation">,</span> <span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å¾€sessionä¸­å­˜å‚¨æ•°æ®</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/s2"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">session2</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"HttpSession-s2: {}"</span><span class="token punctuation">,</span> session<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span> loginUser <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"loginUser"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ä»sessionä¸­è·å–æ•°æ®</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"loginUser: {}"</span><span class="token punctuation">,</span> loginUser<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>loginUser<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>A. è®¿é—® s1 æ¥å£ï¼Œ<a href="http://localhost:8080/s1">http://localhost:8080/s1</a></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050957530.png"> </p><p>è¯·æ±‚å®Œæˆä¹‹åï¼Œåœ¨å“åº”å¤´ä¸­ï¼Œå°±ä¼šçœ‹åˆ°æœ‰ä¸€ä¸ªSet-Cookieçš„å“åº”å¤´ï¼Œé‡Œé¢å“åº”å›æ¥äº†ä¸€ä¸ªCookieï¼Œå°±æ˜¯JSESSIONIDï¼Œè¿™ä¸ªå°±æ˜¯æœåŠ¡ç«¯ä¼šè¯å¯¹è±¡ Session çš„IDã€‚</p><p>B. è®¿é—® s2 æ¥å£ï¼Œ<a href="http://localhost:8080/s2">http://localhost:8080/s2</a></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050957995.png"> </p><p>æ¥ä¸‹æ¥ï¼Œåœ¨åç»­çš„æ¯æ¬¡è¯·æ±‚æ—¶ï¼Œéƒ½ä¼šå°†Cookieçš„å€¼ï¼Œæºå¸¦åˆ°æœåŠ¡ç«¯ï¼Œé‚£æœåŠ¡ç«¯å‘¢ï¼Œæ¥æ”¶åˆ°Cookieä¹‹åï¼Œä¼šè‡ªåŠ¨çš„æ ¹æ®JSESSIONIDçš„å€¼ï¼Œæ‰¾åˆ°å¯¹åº”çš„ä¼šè¯å¯¹è±¡Sessionã€‚</p><p>é‚£ç»è¿‡è¿™ä¸¤æ­¥æµ‹è¯•ï¼Œå¤§å®¶ä¹Ÿä¼šçœ‹åˆ°ï¼Œåœ¨æ§åˆ¶å°ä¸­è¾“å‡ºå¦‚ä¸‹æ—¥å¿—ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050957799.png"> </p><p>ä¸¤æ¬¡è¯·æ±‚ï¼Œè·å–åˆ°çš„Sessionä¼šè¯å¯¹è±¡çš„hashcodeæ˜¯ä¸€æ ·çš„ï¼Œå°±è¯´æ˜æ˜¯åŒä¸€ä¸ªä¼šè¯å¯¹è±¡ã€‚è€Œä¸”ï¼Œç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œå¾€Sessionä¼šè¯å¯¹è±¡ä¸­å­˜å‚¨çš„å€¼ï¼Œç¬¬äºŒæ¬¡è¯·æ±‚æ—¶ï¼Œä¹Ÿè·å–åˆ°äº†ã€‚ é‚£è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡Sessionä¼šè¯å¯¹è±¡ï¼Œåœ¨åŒä¸€ä¸ªä¼šè¯çš„å¤šæ¬¡è¯·æ±‚ä¹‹é—´æ¥è¿›è¡Œæ•°æ®å…±äº«äº†ã€‚</p><p><strong>ä¼˜ç¼ºç‚¹</strong></p><ul><li>ä¼˜ç‚¹ï¼šSessionæ˜¯å­˜å‚¨åœ¨æœåŠ¡ç«¯çš„ï¼Œå®‰å…¨</li><li>ç¼ºç‚¹ï¼š<ul><li>æœåŠ¡å™¨é›†ç¾¤ç¯å¢ƒä¸‹æ— æ³•ç›´æ¥ä½¿ç”¨Session</li><li>ç§»åŠ¨ç«¯APP(Androidã€IOS)ä¸­æ— æ³•ä½¿ç”¨Cookie</li><li>ç”¨æˆ·å¯ä»¥è‡ªå·±ç¦ç”¨Cookie</li><li>Cookieä¸èƒ½è·¨åŸŸ</li></ul></li></ul><blockquote><p>PSï¼šSession åº•å±‚æ˜¯åŸºäºCookieå®ç°çš„ä¼šè¯è·Ÿè¸ªï¼Œå¦‚æœCookieä¸å¯ç”¨ï¼Œåˆ™è¯¥æ–¹æ¡ˆï¼Œä¹Ÿå°±å¤±æ•ˆäº†ã€‚</p></blockquote><blockquote><p>æœåŠ¡å™¨é›†ç¾¤ç¯å¢ƒä¸ºä½•æ— æ³•ä½¿ç”¨Sessionï¼Ÿ</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050958594.png" alt="image-20230112112557480" style="zoom:67%;"> </p><ul><li>é¦–å…ˆç¬¬ä¸€ç‚¹ï¼Œæˆ‘ä»¬ç°åœ¨æ‰€å¼€å‘çš„é¡¹ç›®ï¼Œä¸€èˆ¬éƒ½ä¸ä¼šåªéƒ¨ç½²åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œå› ä¸ºä¸€å°æœåŠ¡å™¨ä¼šå­˜åœ¨ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œå°±æ˜¯å•ç‚¹æ•…éšœã€‚æ‰€è°“å•ç‚¹æ•…éšœï¼ŒæŒ‡çš„å°±æ˜¯ä¸€æ—¦è¿™å°æœåŠ¡å™¨æŒ‚äº†ï¼Œæ•´ä¸ªåº”ç”¨éƒ½æ²¡æ³•è®¿é—®äº†ã€‚</li></ul><p>â€‹    <img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050958022.png"> </p><ul><li><p>æ‰€ä»¥åœ¨ç°åœ¨çš„ä¼ä¸šé¡¹ç›®å¼€å‘å½“ä¸­ï¼Œæœ€ç»ˆéƒ¨ç½²çš„æ—¶å€™éƒ½æ˜¯ä»¥é›†ç¾¤çš„å½¢å¼æ¥è¿›è¡Œéƒ¨ç½²ï¼Œä¹Ÿå°±æ˜¯åŒä¸€ä¸ªé¡¹ç›®å®ƒä¼šéƒ¨ç½²å¤šä»½ã€‚æ¯”å¦‚è¿™ä¸ªé¡¹ç›®æˆ‘ä»¬ç°åœ¨å°±éƒ¨ç½²äº† 3 ä»½ã€‚</p></li><li><p>è€Œç”¨æˆ·åœ¨è®¿é—®çš„æ—¶å€™ï¼Œåˆ°åº•è®¿é—®è¿™ä¸‰å°å…¶ä¸­çš„å“ªä¸€å°ï¼Ÿå…¶å®ç”¨æˆ·åœ¨è®¿é—®çš„æ—¶å€™ï¼Œä»–ä¼šè®¿é—®ä¸€å°å‰ç½®çš„æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å«è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œæˆ‘ä»¬åœ¨åé¢é¡¹ç›®å½“ä¸­ä¼šè¯¦ç»†è®²è§£ã€‚ç›®å‰å¤§å®¶å…ˆæœ‰ä¸€ä¸ªå°è±¡è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å°†å‰ç«¯å‘èµ·çš„è¯·æ±‚å‡åŒ€çš„åˆ†å‘ç»™åé¢çš„è¿™ä¸‰å°æœåŠ¡å™¨ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050958329.png"> </p></li><li><p>æ­¤æ—¶å‡å¦‚æˆ‘ä»¬é€šè¿‡ session æ¥è¿›è¡Œä¼šè¯è·Ÿè¸ªï¼Œå¯èƒ½å°±ä¼šå­˜åœ¨è¿™æ ·ä¸€ä¸ªé—®é¢˜ã€‚ç”¨æˆ·æ‰“å¼€æµè§ˆå™¨è¦è¿›è¡Œç™»å½•æ“ä½œï¼Œæ­¤æ—¶ä¼šå‘èµ·ç™»å½•è¯·æ±‚ã€‚ç™»å½•è¯·æ±‚åˆ°è¾¾è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œå°†è¿™ä¸ªè¯·æ±‚è½¬ç»™äº†ç¬¬ä¸€å° Tomcat æœåŠ¡å™¨ã€‚</p><p>Tomcat æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œè¦è·å–åˆ°ä¼šè¯å¯¹è±¡sessionã€‚è·å–åˆ°ä¼šè¯å¯¹è±¡ session ä¹‹åï¼Œè¦ç»™æµè§ˆå™¨å“åº”æ•°æ®ï¼Œæœ€ç»ˆåœ¨ç»™æµè§ˆå™¨å“åº”æ•°æ®çš„æ—¶å€™ï¼Œå°±ä¼šæºå¸¦è¿™ä¹ˆä¸€ä¸ª cookie çš„åå­—ï¼Œå°±æ˜¯ JSESSIONID ï¼Œä¸‹ä¸€æ¬¡å†è¯·æ±‚çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯åˆä¼šå°† Cookie æºå¸¦åˆ°æœåŠ¡ç«¯ï¼Ÿ</p><p>å¥½ã€‚æ­¤æ—¶å‡å¦‚åˆæ‰§è¡Œäº†ä¸€æ¬¡æŸ¥è¯¢æ“ä½œï¼Œè¦æŸ¥è¯¢éƒ¨é—¨çš„æ•°æ®ã€‚è¿™æ¬¡è¯·æ±‚åˆ°è¾¾è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä¹‹åï¼Œè´Ÿè½½å‡è¡¡æœåŠ¡å™¨å°†è¿™æ¬¡è¯·æ±‚è½¬ç»™äº†ç¬¬äºŒå° Tomcat æœåŠ¡å™¨ï¼Œæ­¤æ—¶ä»–å°±è¦åˆ°ç¬¬äºŒå° Tomcat æœåŠ¡å™¨å½“ä¸­ã€‚æ ¹æ®JSESSIONID ä¹Ÿå°±æ˜¯å¯¹åº”çš„ session çš„ ID å€¼ï¼Œè¦æ‰¾å¯¹åº”çš„ session ä¼šè¯å¯¹è±¡ã€‚</p><p>æˆ‘æƒ³è¯·é—®åœ¨ç¬¬äºŒå°æœåŠ¡å™¨å½“ä¸­æœ‰æ²¡æœ‰è¿™ä¸ªIDçš„ä¼šè¯å¯¹è±¡ Sessionï¼Œ æ˜¯æ²¡æœ‰çš„ã€‚æ­¤æ—¶æ˜¯ä¸æ˜¯å°±å‡ºç°é—®é¢˜äº†ï¼Ÿæˆ‘åŒä¸€ä¸ªæµè§ˆå™¨å‘èµ·äº† 2 æ¬¡è¯·æ±‚ï¼Œç»“æœè·å–åˆ°çš„ä¸æ˜¯åŒä¸€ä¸ªä¼šè¯å¯¹è±¡ï¼Œè¿™å°±æ˜¯Sessionè¿™ç§ä¼šè¯è·Ÿè¸ªæ–¹æ¡ˆå®ƒçš„ç¼ºç‚¹ï¼Œåœ¨æœåŠ¡å™¨é›†ç¾¤ç¯å¢ƒä¸‹æ— æ³•ç›´æ¥ä½¿ç”¨Sessionã€‚</p></li></ul></blockquote><p>å¤§å®¶ä¼šçœ‹åˆ°ä¸Šé¢è¿™ä¸¤ç§ä¼ ç»Ÿçš„ä¼šè¯æŠ€æœ¯ï¼Œåœ¨ç°åœ¨çš„ä¼ä¸šå¼€å‘å½“ä¸­æ˜¯ä¸æ˜¯ä¼šå­˜åœ¨å¾ˆå¤šçš„é—®é¢˜ã€‚ ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œåœ¨ç°åœ¨çš„ä¼ä¸šå¼€å‘å½“ä¸­ï¼ŒåŸºæœ¬ä¸Šéƒ½ä¼šé‡‡ç”¨ç¬¬ä¸‰ç§æ–¹æ¡ˆï¼Œé€šè¿‡ä»¤ç‰ŒæŠ€æœ¯æ¥è¿›è¡Œä¼šè¯è·Ÿè¸ªã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸€ä¸‹ä»¤ç‰ŒæŠ€æœ¯ï¼Œæ¥çœ‹ä¸€ä¸‹ä»¤ç‰ŒæŠ€æœ¯åˆæ˜¯å¦‚ä½•è·Ÿè¸ªä¼šè¯çš„ã€‚</p><h5 id="2-2-2-3-æ–¹æ¡ˆä¸‰-ä»¤ç‰ŒæŠ€æœ¯"><a href="#2-2-2-3-æ–¹æ¡ˆä¸‰-ä»¤ç‰ŒæŠ€æœ¯" class="headerlink" title="2.2.2.3 æ–¹æ¡ˆä¸‰ - ä»¤ç‰ŒæŠ€æœ¯"></a>2.2.2.3 æ–¹æ¡ˆä¸‰ - ä»¤ç‰ŒæŠ€æœ¯</h5><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241205112632154.png"></p><p>è¿™é‡Œæˆ‘ä»¬æ‰€æåˆ°çš„ä»¤ç‰Œï¼Œå…¶å®å®ƒå°±æ˜¯ä¸€ä¸ªç”¨æˆ·èº«ä»½çš„æ ‡è¯†ï¼Œçœ‹ä¼¼å¾ˆé«˜å¤§ä¸Šï¼Œå¾ˆç¥ç§˜ï¼Œå…¶å®æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050958460.png"> </p><p>å¦‚æœé€šè¿‡ä»¤ç‰ŒæŠ€æœ¯æ¥è·Ÿè¸ªä¼šè¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æµè§ˆå™¨å‘èµ·è¯·æ±‚ã€‚åœ¨è¯·æ±‚ç™»å½•æ¥å£çš„æ—¶å€™ï¼Œå¦‚æœç™»å½•æˆåŠŸï¼Œæˆ‘å°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªä»¤ç‰Œï¼Œä»¤ç‰Œå°±æ˜¯ç”¨æˆ·çš„åˆæ³•èº«ä»½å‡­è¯ã€‚æ¥ä¸‹æ¥æˆ‘åœ¨å“åº”æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘å°±å¯ä»¥ç›´æ¥å°†ä»¤ç‰Œå“åº”ç»™å‰ç«¯ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨å‰ç«¯ç¨‹åºå½“ä¸­æ¥æ”¶åˆ°ä»¤ç‰Œä¹‹åï¼Œå°±éœ€è¦å°†è¿™ä¸ªä»¤ç‰Œå­˜å‚¨èµ·æ¥ã€‚è¿™ä¸ªå­˜å‚¨å¯ä»¥å­˜å‚¨åœ¨ cookie å½“ä¸­ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨åœ¨å…¶ä»–çš„å­˜å‚¨ç©ºé—´(æ¯”å¦‚ï¼šlocalStorage)å½“ä¸­ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œåœ¨åç»­çš„æ¯ä¸€æ¬¡è¯·æ±‚å½“ä¸­ï¼Œéƒ½éœ€è¦å°†ä»¤ç‰Œæºå¸¦åˆ°æœåŠ¡ç«¯ã€‚æºå¸¦åˆ°æœåŠ¡ç«¯ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦æ¥æ ¡éªŒä»¤ç‰Œçš„æœ‰æ•ˆæ€§ã€‚å¦‚æœä»¤ç‰Œæ˜¯æœ‰æ•ˆçš„ï¼Œå°±è¯´æ˜ç”¨æˆ·å·²ç»æ‰§è¡Œäº†ç™»å½•æ“ä½œï¼Œå¦‚æœä»¤ç‰Œæ˜¯æ— æ•ˆçš„ï¼Œå°±è¯´æ˜ç”¨æˆ·ä¹‹å‰å¹¶æœªæ‰§è¡Œç™»å½•æ“ä½œã€‚</p><p>æ­¤æ—¶ï¼Œå¦‚æœæ˜¯åœ¨åŒä¸€æ¬¡ä¼šè¯çš„å¤šæ¬¡è¯·æ±‚ä¹‹é—´ï¼Œæˆ‘ä»¬æƒ³å…±äº«æ•°æ®ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å…±äº«çš„æ•°æ®å­˜å‚¨åœ¨ä»¤ç‰Œå½“ä¸­å°±å¯ä»¥äº†ã€‚</p><p><strong>ä¼˜ç¼ºç‚¹</strong></p><ul><li>ä¼˜ç‚¹ï¼š<ul><li>æ”¯æŒPCç«¯ã€ç§»åŠ¨ç«¯</li><li>è§£å†³é›†ç¾¤ç¯å¢ƒä¸‹çš„è®¤è¯é—®é¢˜</li><li>å‡è½»æœåŠ¡å™¨çš„å­˜å‚¨å‹åŠ›ï¼ˆæ— éœ€åœ¨æœåŠ¡å™¨ç«¯å­˜å‚¨ï¼‰</li></ul></li><li>ç¼ºç‚¹ï¼šéœ€è¦è‡ªå·±å®ç°ï¼ˆåŒ…æ‹¬ä»¤ç‰Œçš„ç”Ÿæˆã€ä»¤ç‰Œçš„ä¼ é€’ã€ä»¤ç‰Œçš„æ ¡éªŒï¼‰</li></ul><p><strong>é’ˆå¯¹äºè¿™ä¸‰ç§æ–¹æ¡ˆï¼Œç°åœ¨ä¼ä¸šå¼€å‘å½“ä¸­ä½¿ç”¨çš„æœ€å¤šçš„å°±æ˜¯ç¬¬ä¸‰ç§ä»¤ç‰ŒæŠ€æœ¯è¿›è¡Œä¼šè¯è·Ÿè¸ªã€‚è€Œå‰é¢çš„è¿™ä¸¤ç§ä¼ ç»Ÿçš„æ–¹æ¡ˆï¼Œç°åœ¨ä¼ä¸šé¡¹ç›®å¼€å‘å½“ä¸­å·²ç»å¾ˆå°‘ä½¿ç”¨äº†ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬çš„è¯¾ç¨‹å½“ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå°†ä¼šé‡‡ç”¨ä»¤ç‰ŒæŠ€æœ¯æ¥è§£å†³æ¡ˆä¾‹é¡¹ç›®å½“ä¸­çš„ä¼šè¯è·Ÿè¸ªé—®é¢˜ã€‚</strong></p><h3 id="2-3-JWTä»¤ç‰Œ"><a href="#2-3-JWTä»¤ç‰Œ" class="headerlink" title="2.3 JWTä»¤ç‰Œ"></a>2.3 JWTä»¤ç‰Œ</h3><p>å‰é¢æˆ‘ä»¬ä»‹ç»äº†åŸºäºä»¤ç‰ŒæŠ€æœ¯æ¥å®ç°ä¼šè¯è¿½è¸ªã€‚è¿™é‡Œæ‰€æåˆ°çš„ä»¤ç‰Œå°±æ˜¯ç”¨æˆ·èº«ä»½çš„æ ‡è¯†ï¼Œå…¶æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä»¤ç‰Œçš„å½¢å¼æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯åŠŸèƒ½å¼ºå¤§çš„ JWTä»¤ç‰Œã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241205112923561.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241205113137275.png"></p><h4 id="2-3-1-ä»‹ç»"><a href="#2-3-1-ä»‹ç»" class="headerlink" title="2.3.1 ä»‹ç»"></a>2.3.1 ä»‹ç»</h4><p>JWTå…¨ç§°ï¼šJSON Web Token  ï¼ˆå®˜ç½‘ï¼š<a href="https://jwt.io/%EF%BC%89">https://jwt.io/ï¼‰</a></p><ul><li><p>å®šä¹‰äº†ä¸€ç§ç®€æ´çš„ã€è‡ªåŒ…å«çš„æ ¼å¼ï¼Œç”¨äºåœ¨é€šä¿¡åŒæ–¹ä»¥jsonæ•°æ®æ ¼å¼å®‰å…¨çš„ä¼ è¾“ä¿¡æ¯ã€‚ç”±äºæ•°å­—ç­¾åçš„å­˜åœ¨ï¼Œè¿™äº›ä¿¡æ¯æ˜¯å¯é çš„ã€‚</p><blockquote><p>ç®€æ´ï¼šæ˜¯æŒ‡jwtå°±æ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ã€‚å¯ä»¥åœ¨è¯·æ±‚å‚æ•°æˆ–è€…æ˜¯è¯·æ±‚å¤´å½“ä¸­ç›´æ¥ä¼ é€’ã€‚</p><p>è‡ªåŒ…å«ï¼šæŒ‡çš„æ˜¯jwtä»¤ç‰Œï¼Œçœ‹ä¼¼æ˜¯ä¸€ä¸ªéšæœºçš„å­—ç¬¦ä¸²ï¼Œä½†æ˜¯æˆ‘ä»¬æ˜¯å¯ä»¥æ ¹æ®è‡ªèº«çš„éœ€æ±‚åœ¨jwtä»¤ç‰Œä¸­å­˜å‚¨è‡ªå®šä¹‰çš„æ•°æ®å†…å®¹ã€‚å¦‚ï¼šå¯ä»¥ç›´æ¥åœ¨jwtä»¤ç‰Œä¸­å­˜å‚¨ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯ã€‚</p><p>ç®€å•æ¥è®²ï¼Œjwtå°±æ˜¯å°†åŸå§‹çš„jsonæ•°æ®æ ¼å¼è¿›è¡Œäº†å®‰å…¨çš„å°è£…ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥åŸºäºjwtåœ¨é€šä¿¡åŒæ–¹å®‰å…¨çš„è¿›è¡Œä¿¡æ¯ä¼ è¾“äº†ã€‚</p></blockquote></li></ul><p>JWTçš„ç»„æˆï¼š ï¼ˆJWTä»¤ç‰Œç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼Œä¸‰ä¸ªéƒ¨åˆ†ä¹‹é—´ä½¿ç”¨è‹±æ–‡çš„ç‚¹æ¥åˆ†å‰²ï¼‰</p><ul><li><p>ç¬¬ä¸€éƒ¨åˆ†ï¼šHeader(å¤´ï¼‰ï¼Œ è®°å½•ä»¤ç‰Œç±»å‹ã€ç­¾åç®—æ³•ç­‰ã€‚ ä¾‹å¦‚ï¼š{â€œalgâ€:â€HS256â€,â€typeâ€:â€JWTâ€}</p></li><li><p>ç¬¬äºŒéƒ¨åˆ†ï¼šPayload(æœ‰æ•ˆè½½è·ï¼‰ï¼Œæºå¸¦ä¸€äº›è‡ªå®šä¹‰ä¿¡æ¯ã€é»˜è®¤ä¿¡æ¯ç­‰ã€‚ ä¾‹å¦‚ï¼š{â€œidâ€:â€1â€,â€usernameâ€:â€Tomâ€}</p></li><li><p>ç¬¬ä¸‰éƒ¨åˆ†ï¼šSignature(ç­¾åï¼‰ï¼Œé˜²æ­¢Tokenè¢«ç¯¡æ”¹ã€ç¡®ä¿å®‰å…¨æ€§ã€‚å°†headerã€payloadï¼Œå¹¶åŠ å…¥æŒ‡å®šç§˜é’¥ï¼Œé€šè¿‡æŒ‡å®šç­¾åç®—æ³•è®¡ç®—è€Œæ¥ã€‚</p><blockquote><p>ç­¾åçš„ç›®çš„å°±æ˜¯ä¸ºäº†é˜²jwtä»¤ç‰Œè¢«ç¯¡æ”¹ï¼Œè€Œæ­£æ˜¯å› ä¸ºjwtä»¤ç‰Œæœ€åä¸€ä¸ªéƒ¨åˆ†æ•°å­—ç­¾åçš„å­˜åœ¨ï¼Œæ‰€ä»¥æ•´ä¸ªjwt ä»¤ç‰Œæ˜¯éå¸¸å®‰å…¨å¯é çš„ã€‚ä¸€æ—¦jwtä»¤ç‰Œå½“ä¸­ä»»ä½•ä¸€ä¸ªéƒ¨åˆ†ã€ä»»ä½•ä¸€ä¸ªå­—ç¬¦è¢«ç¯¡æ”¹äº†ï¼Œæ•´ä¸ªä»¤ç‰Œåœ¨æ ¡éªŒçš„æ—¶å€™éƒ½ä¼šå¤±è´¥ï¼Œæ‰€ä»¥å®ƒæ˜¯éå¸¸å®‰å…¨å¯é çš„ã€‚</p></blockquote></li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050958757.png"></p><blockquote><p>JWTæ˜¯å¦‚ä½•å°†åŸå§‹çš„JSONæ ¼å¼æ•°æ®ï¼Œè½¬å˜ä¸ºå­—ç¬¦ä¸²çš„å‘¢ï¼Ÿ</p><p>å…¶å®åœ¨ç”ŸæˆJWTä»¤ç‰Œæ—¶ï¼Œä¼šå¯¹JSONæ ¼å¼çš„æ•°æ®è¿›è¡Œä¸€æ¬¡ç¼–ç ï¼šè¿›è¡Œbase64ç¼–ç </p><p>Base64ï¼šæ˜¯ä¸€ç§åŸºäº64ä¸ªå¯æ‰“å°çš„å­—ç¬¦æ¥è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„ç¼–ç æ–¹å¼ã€‚æ—¢ç„¶èƒ½ç¼–ç ï¼Œé‚£ä¹Ÿå°±æ„å‘³ç€ä¹Ÿèƒ½è§£ç ã€‚æ‰€ä½¿ç”¨çš„64ä¸ªå­—ç¬¦åˆ†åˆ«æ˜¯Aåˆ°Zã€aåˆ°zã€ 0- 9ï¼Œä¸€ä¸ªåŠ å·ï¼Œä¸€ä¸ªæ–œæ ï¼ŒåŠ èµ·æ¥å°±æ˜¯64ä¸ªå­—ç¬¦ã€‚ä»»ä½•æ•°æ®ç»è¿‡base64ç¼–ç ä¹‹åï¼Œæœ€ç»ˆå°±ä¼šé€šè¿‡è¿™64ä¸ªå­—ç¬¦æ¥è¡¨ç¤ºã€‚å½“ç„¶è¿˜æœ‰ä¸€ä¸ªç¬¦å·ï¼Œé‚£å°±æ˜¯ç­‰å·ã€‚ç­‰å·å®ƒæ˜¯ä¸€ä¸ªè¡¥ä½çš„ç¬¦å·</p><p>éœ€è¦æ³¨æ„çš„æ˜¯Base64æ˜¯ç¼–ç æ–¹å¼ï¼Œè€Œä¸æ˜¯åŠ å¯†æ–¹å¼ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050958595.png"> </p><p>JWTä»¤ç‰Œæœ€å…¸å‹çš„åº”ç”¨åœºæ™¯å°±æ˜¯ç™»å½•è®¤è¯ï¼š</p><ol><li>åœ¨æµè§ˆå™¨å‘èµ·è¯·æ±‚æ¥æ‰§è¡Œç™»å½•æ“ä½œï¼Œæ­¤æ—¶ä¼šè®¿é—®ç™»å½•çš„æ¥å£ï¼Œå¦‚æœç™»å½•æˆåŠŸä¹‹åï¼Œæˆ‘ä»¬éœ€è¦ç”Ÿæˆä¸€ä¸ªjwtä»¤ç‰Œï¼Œå°†ç”Ÿæˆçš„ jwtä»¤ç‰Œè¿”å›ç»™å‰ç«¯ã€‚</li><li>å‰ç«¯æ‹¿åˆ°jwtä»¤ç‰Œä¹‹åï¼Œä¼šå°†jwtä»¤ç‰Œå­˜å‚¨èµ·æ¥ã€‚åœ¨åç»­çš„æ¯ä¸€æ¬¡è¯·æ±‚ä¸­éƒ½ä¼šå°†jwtä»¤ç‰Œæºå¸¦åˆ°æœåŠ¡ç«¯ã€‚</li><li>æœåŠ¡ç«¯ç»Ÿä¸€æ‹¦æˆªè¯·æ±‚ä¹‹åï¼Œå…ˆæ¥åˆ¤æ–­ä¸€ä¸‹è¿™æ¬¡è¯·æ±‚æœ‰æ²¡æœ‰æŠŠä»¤ç‰Œå¸¦è¿‡æ¥ï¼Œå¦‚æœæ²¡æœ‰å¸¦è¿‡æ¥ï¼Œç›´æ¥æ‹’ç»è®¿é—®ï¼Œå¦‚æœå¸¦è¿‡æ¥äº†ï¼Œè¿˜è¦æ ¡éªŒä¸€ä¸‹ä»¤ç‰Œæ˜¯å¦æ˜¯æœ‰æ•ˆã€‚å¦‚æœæœ‰æ•ˆï¼Œå°±ç›´æ¥æ”¾è¡Œè¿›è¡Œè¯·æ±‚çš„å¤„ç†ã€‚</li></ol><p>åœ¨JWTç™»å½•è®¤è¯çš„åœºæ™¯ä¸­æˆ‘ä»¬å‘ç°ï¼Œæ•´ä¸ªæµç¨‹å½“ä¸­æ¶‰åŠåˆ°ä¸¤æ­¥æ“ä½œï¼š</p><ol><li>åœ¨ç™»å½•æˆåŠŸä¹‹åï¼Œè¦ç”Ÿæˆä»¤ç‰Œã€‚</li><li>æ¯ä¸€æ¬¡è¯·æ±‚å½“ä¸­ï¼Œè¦æ¥æ”¶ä»¤ç‰Œå¹¶å¯¹ä»¤ç‰Œè¿›è¡Œæ ¡éªŒã€‚</li></ol><p>ç¨åæˆ‘ä»¬å†æ¥å­¦ä¹ å¦‚ä½•æ¥ç”Ÿæˆjwtä»¤ç‰Œï¼Œä»¥åŠå¦‚ä½•æ¥æ ¡éªŒjwtä»¤ç‰Œã€‚</p><h4 id="2-3-2-ç”Ÿæˆå’Œæ ¡éªŒ"><a href="#2-3-2-ç”Ÿæˆå’Œæ ¡éªŒ" class="headerlink" title="2.3.2 ç”Ÿæˆå’Œæ ¡éªŒ"></a>2.3.2 ç”Ÿæˆå’Œæ ¡éªŒ</h4><p>ç®€å•ä»‹ç»äº†JWTä»¤ç‰Œä»¥åŠJWTä»¤ç‰Œçš„ç»„æˆä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å­¦ä¹ åŸºäºJavaä»£ç å¦‚ä½•ç”Ÿæˆå’Œæ ¡éªŒJWTä»¤ç‰Œã€‚</p><p>é¦–å…ˆæˆ‘ä»¬å…ˆæ¥å®ç°JWTä»¤ç‰Œçš„ç”Ÿæˆã€‚è¦æƒ³ä½¿ç”¨JWTä»¤ç‰Œï¼Œéœ€è¦å…ˆå¼•å…¥JWTçš„ä¾èµ–ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- JWTä¾èµ–--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jjwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.9.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>åœ¨å¼•å…¥å®ŒJWTæ¥èµ–åï¼Œå°±å¯ä»¥è°ƒç”¨å·¥å…·åŒ…ä¸­æä¾›çš„APIæ¥å®ŒæˆJWTä»¤ç‰Œçš„ç”Ÿæˆå’Œæ ¡éªŒ</p><p>å·¥å…·ç±»ï¼šJwts</p></blockquote><p>ç”ŸæˆJWTä»£ç å®ç°ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">genJwt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> claims <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    claims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    claims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span><span class="token string">"Tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> jwt <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">setClaims</span><span class="token punctuation">(</span>claims<span class="token punctuation">)</span> <span class="token comment">//è‡ªå®šä¹‰å†…å®¹(è½½è·)          </span>        <span class="token punctuation">.</span><span class="token function">signWith</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span><span class="token constant">HS256</span><span class="token punctuation">,</span> <span class="token string">"itheima"</span><span class="token punctuation">)</span> <span class="token comment">//ç­¾åç®—æ³•        </span>        <span class="token punctuation">.</span><span class="token function">setExpiration</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">24</span><span class="token operator">*</span><span class="token number">3600</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//æœ‰æ•ˆæœŸ   </span>        <span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jwt<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼š</p><pre class="line-numbers language-none"><code class="language-none">eyJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwiZXhwIjoxNjcyNzI5NzMwfQ.fHi0Ub8npbyt71UqLXDdLyipptLgxBUg_mSuGJtXtBk<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¾“å‡ºçš„ç»“æœå°±æ˜¯ç”Ÿæˆçš„JWTä»¤ç‰Œ,ï¼Œé€šè¿‡è‹±æ–‡çš„ç‚¹åˆ†å‰²å¯¹ä¸‰ä¸ªéƒ¨åˆ†è¿›è¡Œåˆ†å‰²ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç”Ÿæˆçš„ä»¤ç‰Œå¤åˆ¶ä¸€ä¸‹ï¼Œç„¶åæ‰“å¼€JWTçš„å®˜ç½‘ï¼Œå°†ç”Ÿæˆçš„ä»¤ç‰Œç›´æ¥æ”¾åœ¨Encodedä½ç½®ï¼Œæ­¤æ—¶å°±ä¼šè‡ªåŠ¨çš„å°†ä»¤ç‰Œè§£æå‡ºæ¥ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050959543.png"></p><blockquote><p>ç¬¬ä¸€éƒ¨åˆ†è§£æå‡ºæ¥ï¼Œçœ‹åˆ°JSONæ ¼å¼çš„åŸå§‹æ•°æ®ï¼Œæ‰€ä½¿ç”¨çš„ç­¾åç®—æ³•ä¸ºHS256ã€‚</p><p>ç¬¬äºŒä¸ªéƒ¨åˆ†æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„æ•°æ®ï¼Œä¹‹å‰æˆ‘ä»¬è‡ªå®šä¹‰çš„æ•°æ®å°±æ˜¯idï¼Œè¿˜æœ‰ä¸€ä¸ªexpä»£è¡¨çš„æ˜¯æˆ‘ä»¬æ‰€è®¾ç½®çš„è¿‡æœŸæ—¶é—´ã€‚</p><p>ç”±äºå‰ä¸¤ä¸ªéƒ¨åˆ†æ˜¯base64ç¼–ç ï¼Œæ‰€ä»¥æ˜¯å¯ä»¥ç›´æ¥è§£ç å‡ºæ¥ã€‚ä½†æœ€åä¸€ä¸ªéƒ¨åˆ†å¹¶ä¸æ˜¯base64ç¼–ç ï¼Œæ˜¯ç»è¿‡ç­¾åç®—æ³•è®¡ç®—å‡ºæ¥çš„ï¼Œæ‰€ä»¥æœ€åä¸€ä¸ªéƒ¨åˆ†æ˜¯ä¸ä¼šè§£æçš„ã€‚</p></blockquote><p>å®ç°äº†JWTä»¤ç‰Œçš„ç”Ÿæˆï¼Œä¸‹é¢æˆ‘ä»¬æ¥ç€ä½¿ç”¨Javaä»£ç æ¥æ ¡éªŒJWTä»¤ç‰Œ(è§£æç”Ÿæˆçš„ä»¤ç‰Œ)ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parseJwt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token class-name">Claims</span> claims <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span><span class="token string">"itheima"</span><span class="token punctuation">)</span><span class="token comment">//æŒ‡å®šç­¾åå¯†é’¥ï¼ˆå¿…é¡»ä¿è¯å’Œç”Ÿæˆä»¤ç‰Œæ—¶ä½¿ç”¨ç›¸åŒçš„ç­¾åå¯†é’¥ï¼‰  </span>    <span class="token punctuation">.</span><span class="token function">parseClaimsJws</span><span class="token punctuation">(</span><span class="token string">"eyJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwiZXhwIjoxNjcyNzI5NzMwfQ.fHi0Ub8npbyt71UqLXDdLyipptLgxBUg_mSuGJtXtBk"</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>claims<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼š</p><pre class="line-numbers language-none"><code class="language-none">{id=1, exp=1672729730}<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>ä»¤ç‰Œè§£æåï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°idå’Œè¿‡æœŸæ—¶é—´ï¼Œå¦‚æœåœ¨è§£æçš„è¿‡ç¨‹å½“ä¸­æ²¡æœ‰æŠ¥é”™ï¼Œå°±è¯´æ˜è§£ææˆåŠŸäº†ã€‚</p></blockquote><p>ä¸‹é¢æˆ‘ä»¬åšä¸€ä¸ªæµ‹è¯•ï¼šæŠŠä»¤ç‰Œheaderä¸­çš„æ•°å­—9å˜ä¸º8ï¼Œè¿è¡Œæµ‹è¯•æ–¹æ³•åå‘ç°æŠ¥é”™ï¼š</p><blockquote><p>åŸheaderï¼š eyJhbGciOiJIUzI1NiJ9</p><p>ä¿®æ”¹ä¸ºï¼š eyJhbGciOiJIUzI1NiJ8</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050959454.png"></p><p>ç»“è®ºï¼šç¯¡æ”¹ä»¤ç‰Œä¸­çš„ä»»ä½•ä¸€ä¸ªå­—ç¬¦ï¼Œåœ¨å¯¹ä»¤ç‰Œè¿›è¡Œè§£ææ—¶éƒ½ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥JWTä»¤ç‰Œæ˜¯éå¸¸å®‰å…¨å¯é çš„ã€‚</p><p>æˆ‘ä»¬ç»§ç»­æµ‹è¯•ï¼šä¿®æ”¹ç”Ÿæˆä»¤ç‰Œçš„æ—¶æŒ‡å®šçš„è¿‡æœŸæ—¶é—´ï¼Œä¿®æ”¹ä¸º1åˆ†é’Ÿ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">genJwt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> claims <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    claims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>â€œidâ€<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    claims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>â€œusernameâ€<span class="token punctuation">,</span>â€œ<span class="token class-name">Tom</span>â€<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> jwt <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">setClaims</span><span class="token punctuation">(</span>claims<span class="token punctuation">)</span> <span class="token comment">//è‡ªå®šä¹‰å†…å®¹(è½½è·)          </span>        <span class="token punctuation">.</span><span class="token function">signWith</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span><span class="token constant">HS256</span><span class="token punctuation">,</span> â€œitheimaâ€<span class="token punctuation">)</span> <span class="token comment">//ç­¾åç®—æ³•        </span>        <span class="token punctuation">.</span><span class="token function">setExpiration</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">60</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//æœ‰æ•ˆæœŸ60ç§’   </span>        <span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jwt<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//è¾“å‡ºç»“æœï¼šeyJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwiZXhwIjoxNjczMDA5NzU0fQ.RcVIR65AkGiax-ID6FjW60eLFH3tPTKdoK7UtE4A1ro</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parseJwt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token class-name">Claims</span> claims <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span><span class="token string">"itheima"</span><span class="token punctuation">)</span><span class="token comment">//æŒ‡å®šç­¾åå¯†é’¥</span><span class="token punctuation">.</span><span class="token function">parseClaimsJws</span><span class="token punctuation">(</span><span class="token string">"eyJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwiZXhwIjoxNjczMDA5NzU0fQ.RcVIR65AkGiax-ID6FjW60eLFH3tPTKdoK7UtE4A1ro"</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>claims<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç­‰å¾…1åˆ†é’Ÿä¹‹åè¿è¡Œæµ‹è¯•æ–¹æ³•å‘ç°ä¹ŸæŠ¥é”™äº†ï¼Œè¯´æ˜ï¼šJWTä»¤ç‰Œè¿‡æœŸåï¼Œä»¤ç‰Œå°±å¤±æ•ˆäº†ï¼Œè§£æçš„ä¸ºéæ³•ä»¤ç‰Œã€‚</p><p>é€šè¿‡ä»¥ä¸Šæµ‹è¯•ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨JWTä»¤ç‰Œæ—¶éœ€è¦æ³¨æ„ï¼š</p><ul><li><p>JWTæ ¡éªŒæ—¶ä½¿ç”¨çš„ç­¾åç§˜é’¥ï¼Œå¿…é¡»å’Œç”ŸæˆJWTä»¤ç‰Œæ—¶ä½¿ç”¨çš„ç§˜é’¥æ˜¯é…å¥—çš„ã€‚</p></li><li><p>å¦‚æœJWTä»¤ç‰Œè§£ææ ¡éªŒæ—¶æŠ¥é”™ï¼Œåˆ™è¯´æ˜ JWTä»¤ç‰Œè¢«ç¯¡æ”¹ æˆ– å¤±æ•ˆäº†ï¼Œä»¤ç‰Œéæ³•ã€‚</p></li></ul><h4 id="2-3-3-ç™»å½•ä¸‹å‘ä»¤ç‰Œ"><a href="#2-3-3-ç™»å½•ä¸‹å‘ä»¤ç‰Œ" class="headerlink" title="2.3.3 ç™»å½•ä¸‹å‘ä»¤ç‰Œ"></a>2.3.3 ç™»å½•ä¸‹å‘ä»¤ç‰Œ</h4><p>JWTä»¤ç‰Œçš„ç”Ÿæˆå’Œæ ¡éªŒçš„åŸºæœ¬æ“ä½œæˆ‘ä»¬å·²ç»å­¦ä¹ å®Œäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦åœ¨æ¡ˆä¾‹å½“ä¸­é€šè¿‡JWTä»¤ç‰ŒæŠ€æœ¯æ¥è·Ÿè¸ªä¼šè¯ã€‚å…·ä½“çš„æ€è·¯æˆ‘ä»¬å‰é¢å·²ç»åˆ†æè¿‡äº†ï¼Œä¸»è¦å°±æ˜¯ä¸¤æ­¥æ“ä½œï¼š</p><ol><li>ç”Ÿæˆä»¤ç‰Œ<ul><li>åœ¨ç™»å½•æˆåŠŸä¹‹åæ¥ç”Ÿæˆä¸€ä¸ªJWTä»¤ç‰Œï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªä»¤ç‰Œç›´æ¥è¿”å›ç»™å‰ç«¯</li></ul></li><li>æ ¡éªŒä»¤ç‰Œ<ul><li>æ‹¦æˆªå‰ç«¯è¯·æ±‚ï¼Œä»è¯·æ±‚ä¸­è·å–åˆ°ä»¤ç‰Œï¼Œå¯¹ä»¤ç‰Œè¿›è¡Œè§£ææ ¡éªŒ</li></ul></li></ol><p>é‚£æˆ‘ä»¬é¦–å…ˆæ¥å®Œæˆï¼šç™»å½•æˆåŠŸä¹‹åç”ŸæˆJWTä»¤ç‰Œï¼Œå¹¶ä¸”æŠŠä»¤ç‰Œè¿”å›ç»™å‰ç«¯ã€‚</p><p>JWTä»¤ç‰Œæ€ä¹ˆè¿”å›ç»™å‰ç«¯å‘¢ï¼Ÿæ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦å†æ¥çœ‹ä¸€ä¸‹æ¥å£æ–‡æ¡£å½“ä¸­å…³äºç™»å½•æ¥å£çš„æè¿°ï¼ˆä¸»è¦çœ‹å“åº”æ•°æ®ï¼‰ï¼š</p><ul><li><p>å“åº”æ•°æ®</p><p>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>é»˜è®¤å€¼</th><th>å¤‡æ³¨</th><th>å…¶ä»–ä¿¡æ¯</th></tr></thead><tbody><tr><td>code</td><td>number</td><td>å¿…é¡»</td><td></td><td>å“åº”ç , 1 æˆåŠŸ ; 0  å¤±è´¥</td><td></td></tr><tr><td>msg</td><td>string</td><td>éå¿…é¡»</td><td></td><td>æç¤ºä¿¡æ¯</td><td></td></tr><tr><td>data</td><td>string</td><td>å¿…é¡»</td><td></td><td>è¿”å›çš„æ•°æ® , jwtä»¤ç‰Œ</td><td></td></tr></tbody></table><p>å“åº”æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"code"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">"msg"</span><span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token string">"eyJhbGciOiJIUzI1NiJ9.eyJuYW1lIjoi6YeR5bq4IiwiaWQiOjEsInVzZXJuYW1lIjoiamlueW9uZyIsImV4cCI6MTY2MjIwNzA0OH0.KkUc_CXJZJ8Dd063eImx4H9Ojfrr6XMJ-yVzaWCVZCo"</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å¤‡æ³¨è¯´æ˜</p><p>ç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¸‹å‘JWTä»¤ç‰Œï¼Œç„¶ååœ¨åç»­çš„æ¯æ¬¡è¯·æ±‚ä¸­ï¼Œéƒ½éœ€è¦åœ¨è¯·æ±‚å¤´headerä¸­æºå¸¦åˆ°æœåŠ¡ç«¯ï¼Œè¯·æ±‚å¤´çš„åç§°ä¸º token ï¼Œå€¼ä¸º ç™»å½•æ—¶ä¸‹å‘çš„JWTä»¤ç‰Œã€‚</p><p>å¦‚æœæ£€æµ‹åˆ°ç”¨æˆ·æœªç™»å½•ï¼Œåˆ™ä¼šè¿”å›å¦‚ä¸‹å›ºå®šé”™è¯¯ä¿¡æ¯ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span><span class="token property">"code"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"msg"</span><span class="token operator">:</span> <span class="token string">"NOT_LOGIN"</span><span class="token punctuation">,</span><span class="token property">"data"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>è§£è¯»å®Œæ¥å£æ–‡æ¡£ä¸­çš„æè¿°äº†ï¼Œç›®å‰æˆ‘ä»¬å…ˆæ¥å®Œæˆä»¤ç‰Œçš„ç”Ÿæˆå’Œä»¤ç‰Œçš„ä¸‹å‘ï¼Œæˆ‘ä»¬åªéœ€è¦ç”Ÿæˆä¸€ä¸ªä»¤ç‰Œè¿”å›ç»™å‰ç«¯å°±å¯ä»¥äº†ã€‚</p><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><ol><li>å¼•å…¥JWTå·¥å…·ç±»<ul><li>åœ¨é¡¹ç›®å·¥ç¨‹ä¸‹åˆ›å»ºcom.itheima.utilsåŒ…ï¼Œå¹¶æŠŠæä¾›JWTå·¥å…·ç±»å¤åˆ¶åˆ°è¯¥åŒ…ä¸‹</li></ul></li><li>ç™»å½•å®Œæˆåï¼Œè°ƒç”¨å·¥å…·ç±»ç”ŸæˆJWTä»¤ç‰Œå¹¶è¿”å›</li></ol><p><strong>JWTå·¥å…·ç±»</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtUtils</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> signKey <span class="token operator">=</span> <span class="token string">"itheima"</span><span class="token punctuation">;</span><span class="token comment">//ç­¾åå¯†é’¥</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Long</span> expire <span class="token operator">=</span> <span class="token number">43200000L</span><span class="token punctuation">;</span> <span class="token comment">//æœ‰æ•ˆæ—¶é—´</span>    <span class="token comment">/**     * ç”ŸæˆJWTä»¤ç‰Œ     * @param claims JWTç¬¬äºŒéƒ¨åˆ†è´Ÿè½½ payload ä¸­å­˜å‚¨çš„å†…å®¹     * @return     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">generateJwt</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> claims<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">String</span> jwt <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">addClaims</span><span class="token punctuation">(</span>claims<span class="token punctuation">)</span><span class="token comment">//è‡ªå®šä¹‰ä¿¡æ¯ï¼ˆæœ‰æ•ˆè½½è·ï¼‰</span>                <span class="token punctuation">.</span><span class="token function">signWith</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span><span class="token constant">HS256</span><span class="token punctuation">,</span> signKey<span class="token punctuation">)</span><span class="token comment">//ç­¾åç®—æ³•ï¼ˆå¤´éƒ¨ï¼‰</span>                <span class="token punctuation">.</span><span class="token function">setExpiration</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> expire<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//è¿‡æœŸæ—¶é—´</span>                <span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> jwt<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**     * è§£æJWTä»¤ç‰Œ     * @param jwt JWTä»¤ç‰Œ     * @return JWTç¬¬äºŒéƒ¨åˆ†è´Ÿè½½ payload ä¸­å­˜å‚¨çš„å†…å®¹     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Claims</span> <span class="token function">parseJWT</span><span class="token punctuation">(</span><span class="token class-name">String</span> jwt<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">Claims</span> claims <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span>signKey<span class="token punctuation">)</span><span class="token comment">//æŒ‡å®šç­¾åå¯†é’¥</span>                <span class="token punctuation">.</span><span class="token function">parseClaimsJws</span><span class="token punctuation">(</span>jwt<span class="token punctuation">)</span><span class="token comment">//æŒ‡å®šä»¤ç‰ŒToken</span>                <span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> claims<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç™»å½•æˆåŠŸï¼Œç”ŸæˆJWTä»¤ç‰Œå¹¶è¿”å›</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginController</span> <span class="token punctuation">{</span>    <span class="token comment">//ä¾èµ–ä¸šåŠ¡å±‚å¯¹è±¡</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpService</span> empService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Emp</span> emp<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//è°ƒç”¨ä¸šåŠ¡å±‚ï¼šç™»å½•åŠŸèƒ½</span>        <span class="token class-name">Emp</span> loginEmp <span class="token operator">=</span> empService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//åˆ¤æ–­ï¼šç™»å½•ç”¨æˆ·æ˜¯å¦å­˜åœ¨</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>loginEmp <span class="token operator">!=</span><span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">//è‡ªå®šä¹‰ä¿¡æ¯</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span> <span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> claims <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            claims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> loginEmp<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            claims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span>loginEmp<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            claims<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span>loginEmp<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//ä½¿ç”¨JWTå·¥å…·ç±»ï¼Œç”Ÿæˆèº«ä»½ä»¤ç‰Œ</span>            <span class="token class-name">String</span> token <span class="token operator">=</span> <span class="token class-name">JwtUtils</span><span class="token punctuation">.</span><span class="token function">generateJwt</span><span class="token punctuation">(</span>claims<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡å¯æœåŠ¡ï¼Œæ‰“å¼€postmanæµ‹è¯•ç™»å½•æ¥å£ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050959007.png"></p><p>æ‰“å¼€æµè§ˆå™¨å®Œæˆå‰åç«¯è”è°ƒæ“ä½œï¼šåˆ©ç”¨å¼€å‘è€…å·¥å…·ï¼ŒæŠ“å–ä¸€ä¸‹ç½‘ç»œè¯·æ±‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050959515.png"></p><blockquote><p>ç™»å½•è¯·æ±‚å®Œæˆåï¼Œå¯ä»¥çœ‹åˆ°JWTä»¤ç‰Œå·²ç»å“åº”ç»™äº†å‰ç«¯ï¼Œæ­¤æ—¶å‰ç«¯å°±ä¼šå°†JWTä»¤ç‰Œå­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°ã€‚</p></blockquote><p>æœåŠ¡å™¨å“åº”çš„JWTä»¤ç‰Œå­˜å‚¨åœ¨æœ¬åœ°æµè§ˆå™¨å“ªé‡Œäº†å‘¢ï¼Ÿ</p><ul><li>åœ¨å½“å‰æ¡ˆä¾‹ä¸­ï¼ŒJWTä»¤ç‰Œå­˜å‚¨åœ¨æµè§ˆå™¨çš„æœ¬åœ°å­˜å‚¨ç©ºé—´local storageä¸­äº†ã€‚ local storageæ˜¯æµè§ˆå™¨çš„æœ¬åœ°å­˜å‚¨ï¼Œåœ¨ç§»åŠ¨ç«¯ä¹Ÿæ˜¯æ”¯æŒçš„ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050959424.png"></p><p>æˆ‘ä»¬åœ¨å‘èµ·ä¸€ä¸ªæŸ¥è¯¢éƒ¨é—¨æ•°æ®çš„è¯·æ±‚ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨è¯·æ±‚å¤´ä¸­åŒ…å«ä¸€ä¸ªtoken(JWTä»¤ç‰Œ)ï¼Œåç»­çš„æ¯ä¸€æ¬¡è¯·æ±‚å½“ä¸­ï¼Œéƒ½ä¼šå°†è¿™ä¸ªä»¤ç‰Œæºå¸¦åˆ°æœåŠ¡ç«¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412050959353.png"></p><h3 id="2-4-è¿‡æ»¤å™¨Filter"><a href="#2-4-è¿‡æ»¤å™¨Filter" class="headerlink" title="2.4 è¿‡æ»¤å™¨Filter"></a>2.4 è¿‡æ»¤å™¨Filter</h3><p>åˆšæ‰é€šè¿‡æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨åç»­çš„è¯·æ±‚å½“ä¸­ï¼Œéƒ½ä¼šåœ¨è¯·æ±‚å¤´ä¸­æºå¸¦JWTä»¤ç‰Œåˆ°æœåŠ¡ç«¯ï¼Œè€ŒæœåŠ¡ç«¯éœ€è¦ç»Ÿä¸€æ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ï¼Œä»è€Œåˆ¤æ–­æ˜¯å¦æºå¸¦çš„æœ‰åˆæ³•çš„JWTä»¤ç‰Œã€‚<br>é‚£æ€ä¹ˆæ ·æ¥ç»Ÿä¸€æ‹¦æˆªåˆ°æ‰€æœ‰çš„è¯·æ±‚æ ¡éªŒä»¤ç‰Œçš„æœ‰æ•ˆæ€§å‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬ä¼šå­¦ä¹ ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p><ol><li>Filterè¿‡æ»¤å™¨</li><li>Interceptoræ‹¦æˆªå™¨</li></ol><p>æˆ‘ä»¬é¦–å…ˆæ¥å­¦ä¹ è¿‡æ»¤å™¨Filterã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241205144439304.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241205145531423.png" alt="æ“ä½œæ­¥éª¤1"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241205145624983.png" alt="æ“ä½œæ­¥éª¤2"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241205151141553.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241205151632754.png"></p><h4 id="2-4-1-å¿«é€Ÿå…¥é—¨"><a href="#2-4-1-å¿«é€Ÿå…¥é—¨" class="headerlink" title="2.4.1 å¿«é€Ÿå…¥é—¨"></a>2.4.1 å¿«é€Ÿå…¥é—¨</h4><p>ä»€ä¹ˆæ˜¯Filterï¼Ÿ</p><ul><li>Filterè¡¨ç¤ºè¿‡æ»¤å™¨ï¼Œæ˜¯ JavaWebä¸‰å¤§ç»„ä»¶(Servletã€Filterã€Listener)ä¹‹ä¸€ã€‚</li><li>è¿‡æ»¤å™¨å¯ä»¥æŠŠå¯¹èµ„æºçš„è¯·æ±‚æ‹¦æˆªä¸‹æ¥ï¼Œä»è€Œå®ç°ä¸€äº›ç‰¹æ®Šçš„åŠŸèƒ½<ul><li>ä½¿ç”¨äº†è¿‡æ»¤å™¨ä¹‹åï¼Œè¦æƒ³è®¿é—®webæœåŠ¡å™¨ä¸Šçš„èµ„æºï¼Œå¿…é¡»å…ˆç»è¿‡æ»¤å™¨ï¼Œè¿‡æ»¤å™¨å¤„ç†å®Œæ¯•ä¹‹åï¼Œæ‰å¯ä»¥è®¿é—®å¯¹åº”çš„èµ„æºã€‚</li></ul></li><li>è¿‡æ»¤å™¨ä¸€èˆ¬å®Œæˆä¸€äº›é€šç”¨çš„æ“ä½œï¼Œæ¯”å¦‚ï¼šç™»å½•æ ¡éªŒã€ç»Ÿä¸€ç¼–ç å¤„ç†ã€æ•æ„Ÿå­—ç¬¦å¤„ç†ç­‰ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051000079.png"> </p><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡Filterå¿«é€Ÿå…¥é—¨ç¨‹åºæŒæ¡è¿‡æ»¤å™¨çš„åŸºæœ¬ä½¿ç”¨æ“ä½œï¼š</p><ul><li>ç¬¬1æ­¥ï¼Œå®šä¹‰è¿‡æ»¤å™¨ ï¼š1.å®šä¹‰ä¸€ä¸ªç±»ï¼Œå®ç° Filter æ¥å£ï¼Œå¹¶é‡å†™å…¶æ‰€æœ‰æ–¹æ³•ã€‚</li><li>ç¬¬2æ­¥ï¼Œé…ç½®è¿‡æ»¤å™¨ï¼šFilterç±»ä¸ŠåŠ  @WebFilter æ³¨è§£ï¼Œé…ç½®æ‹¦æˆªèµ„æºçš„è·¯å¾„ã€‚å¼•å¯¼ç±»ä¸ŠåŠ  @ServletComponentScan å¼€å¯Servletç»„ä»¶æ”¯æŒã€‚</li></ul><p><strong>å®šä¹‰è¿‡æ»¤å™¨</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>filter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebFilter</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span><span class="token comment">//å®šä¹‰ä¸€ä¸ªç±»ï¼Œå®ç°ä¸€ä¸ªæ ‡å‡†çš„Filterè¿‡æ»¤å™¨çš„æ¥å£</span><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/*"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span> <span class="token comment">//åˆå§‹åŒ–æ–¹æ³•, åªè°ƒç”¨ä¸€æ¬¡</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"init åˆå§‹åŒ–æ–¹æ³•æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span> <span class="token comment">//æ‹¦æˆªåˆ°è¯·æ±‚ä¹‹åè°ƒç”¨, è°ƒç”¨å¤šæ¬¡</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Demo æ‹¦æˆªåˆ°äº†è¯·æ±‚...æ”¾è¡Œå‰é€»è¾‘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ”¾è¡Œ</span>        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span> <span class="token comment">//é”€æ¯æ–¹æ³•, åªè°ƒç”¨ä¸€æ¬¡</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"destroy é”€æ¯æ–¹æ³•æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><ul><li><p>initæ–¹æ³•ï¼šè¿‡æ»¤å™¨çš„åˆå§‹åŒ–æ–¹æ³•ã€‚åœ¨webæœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨çš„åˆ›å»ºFilterè¿‡æ»¤å™¨å¯¹è±¡ï¼Œåœ¨åˆ›å»ºè¿‡æ»¤å™¨å¯¹è±¡çš„æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨initåˆå§‹åŒ–æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚</p></li><li><p>doFilteræ–¹æ³•ï¼šè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨æ¯ä¸€æ¬¡æ‹¦æˆªåˆ°è¯·æ±‚ä¹‹åéƒ½ä¼šè¢«è°ƒç”¨ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•æ˜¯ä¼šè¢«è°ƒç”¨å¤šæ¬¡çš„ï¼Œæ¯æ‹¦æˆªåˆ°ä¸€æ¬¡è¯·æ±‚å°±ä¼šè°ƒç”¨ä¸€æ¬¡doFilter()æ–¹æ³•ã€‚</p></li><li><p>destroyæ–¹æ³•ï¼š æ˜¯é”€æ¯çš„æ–¹æ³•ã€‚å½“æˆ‘ä»¬å…³é—­æœåŠ¡å™¨çš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨çš„è°ƒç”¨é”€æ¯æ–¹æ³•destroyï¼Œè€Œè¿™ä¸ªé”€æ¯æ–¹æ³•ä¹Ÿåªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚</p></li></ul></blockquote><p>åœ¨å®šä¹‰å®ŒFilterä¹‹åï¼ŒFilterå…¶å®å¹¶ä¸ä¼šç”Ÿæ•ˆï¼Œè¿˜éœ€è¦å®ŒæˆFilterçš„é…ç½®ï¼ŒFilterçš„é…ç½®éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨Filterç±»ä¸Šæ·»åŠ ä¸€ä¸ªæ³¨è§£ï¼š@WebFilterï¼Œå¹¶æŒ‡å®šå±æ€§urlPatternsï¼Œé€šè¿‡è¿™ä¸ªå±æ€§æŒ‡å®šè¿‡æ»¤å™¨è¦æ‹¦æˆªå“ªäº›è¯·æ±‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/*"</span><span class="token punctuation">)</span> <span class="token comment">//é…ç½®è¿‡æ»¤å™¨è¦æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„ï¼ˆ /* è¡¨ç¤ºæ‹¦æˆªæµè§ˆå™¨çš„æ‰€æœ‰è¯·æ±‚ ï¼‰</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span> <span class="token comment">//åˆå§‹åŒ–æ–¹æ³•, åªè°ƒç”¨ä¸€æ¬¡</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"init åˆå§‹åŒ–æ–¹æ³•æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span> <span class="token comment">//æ‹¦æˆªåˆ°è¯·æ±‚ä¹‹åè°ƒç”¨, è°ƒç”¨å¤šæ¬¡</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Demo æ‹¦æˆªåˆ°äº†è¯·æ±‚...æ”¾è¡Œå‰é€»è¾‘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ”¾è¡Œ</span>        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span> <span class="token comment">//é”€æ¯æ–¹æ³•, åªè°ƒç”¨ä¸€æ¬¡</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"destroy é”€æ¯æ–¹æ³•æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“æˆ‘ä»¬åœ¨Filterç±»ä¸Šé¢åŠ äº†@WebFilteræ³¨è§£ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦åœ¨å¯åŠ¨ç±»ä¸Šé¢åŠ ä¸Šä¸€ä¸ªæ³¨è§£@ServletComponentScanï¼Œé€šè¿‡è¿™ä¸ª@ServletComponentScanæ³¨è§£æ¥å¼€å¯SpringBooté¡¹ç›®å¯¹äºServletç»„ä»¶çš„æ”¯æŒã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@ServletComponentScan</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TliasWebManagementApplication</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">TliasWebManagementApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œæ‰§è¡Œéƒ¨é—¨ç®¡ç†çš„è¯·æ±‚ï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºäº†è¿‡æ»¤å™¨ä¸­çš„å†…å®¹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051000814.png"> </p><blockquote><p>æ³¨æ„äº‹é¡¹ï¼š</p><p>â€‹åœ¨è¿‡æ»¤å™¨Filterä¸­ï¼Œå¦‚æœä¸æ‰§è¡Œæ”¾è¡Œæ“ä½œï¼Œå°†æ— æ³•è®¿é—®åé¢çš„èµ„æºã€‚ æ”¾è¡Œæ“ä½œï¼šchain.doFilter(request, response);</p></blockquote><p>ç°åœ¨æˆ‘ä»¬å·²å®Œæˆäº†Filterè¿‡æ»¤å™¨çš„åŸºæœ¬ä½¿ç”¨ï¼Œä¸‹é¢æˆ‘ä»¬å°†å­¦ä¹ Filterè¿‡æ»¤å™¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›ç»†èŠ‚ã€‚</p><h4 id="2-4-2-Filterè¯¦è§£"><a href="#2-4-2-Filterè¯¦è§£" class="headerlink" title="2.4.2 Filterè¯¦è§£"></a>2.4.2 Filterè¯¦è§£</h4><p>Filterè¿‡æ»¤å™¨çš„å¿«é€Ÿå…¥é—¨ç¨‹åºæˆ‘ä»¬å·²ç»å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦è¯¦ç»†çš„ä»‹ç»ä¸€ä¸‹è¿‡æ»¤å™¨Filteråœ¨ä½¿ç”¨ä¸­çš„ä¸€äº›ç»†èŠ‚ã€‚ä¸»è¦ä»‹ç»ä»¥ä¸‹3ä¸ªæ–¹é¢çš„ç»†èŠ‚ï¼š</p><ol><li>è¿‡æ»¤å™¨çš„æ‰§è¡Œæµç¨‹</li><li>è¿‡æ»¤å™¨çš„æ‹¦æˆªè·¯å¾„é…ç½®</li><li>è¿‡æ»¤å™¨é“¾</li></ol><h5 id="2-4-2-1-æ‰§è¡Œæµç¨‹"><a href="#2-4-2-1-æ‰§è¡Œæµç¨‹" class="headerlink" title="2.4.2.1 æ‰§è¡Œæµç¨‹"></a>2.4.2.1 æ‰§è¡Œæµç¨‹</h5><p>é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹è¿‡æ»¤å™¨çš„æ‰§è¡Œæµç¨‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051000599.png"></p><p>è¿‡æ»¤å™¨å½“ä¸­æˆ‘ä»¬æ‹¦æˆªåˆ°äº†è¯·æ±‚ä¹‹åï¼Œå¦‚æœå¸Œæœ›ç»§ç»­è®¿é—®åé¢çš„webèµ„æºï¼Œå°±è¦æ‰§è¡Œæ”¾è¡Œæ“ä½œï¼Œæ”¾è¡Œå°±æ˜¯è°ƒç”¨ FilterChainå¯¹è±¡å½“ä¸­çš„doFilter()æ–¹æ³•ï¼Œåœ¨è°ƒç”¨doFilter()è¿™ä¸ªæ–¹æ³•ä¹‹å‰æ‰€ç¼–å†™çš„ä»£ç å±äºæ”¾è¡Œä¹‹å‰çš„é€»è¾‘ã€‚</p><p>åœ¨æ”¾è¡Œåè®¿é—®å®Œ web èµ„æºä¹‹åè¿˜ä¼šå›åˆ°è¿‡æ»¤å™¨å½“ä¸­ï¼Œå›åˆ°è¿‡æ»¤å™¨ä¹‹åå¦‚æœ‰éœ€æ±‚è¿˜å¯ä»¥æ‰§è¡Œæ”¾è¡Œä¹‹åçš„é€»è¾‘ï¼Œæ”¾è¡Œä¹‹åçš„é€»è¾‘æˆ‘ä»¬å†™åœ¨doFilter()è¿™è¡Œä»£ç ä¹‹åã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/*"</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>        <span class="token annotation punctuation">@Override</span> <span class="token comment">//åˆå§‹åŒ–æ–¹æ³•, åªè°ƒç”¨ä¸€æ¬¡</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"init åˆå§‹åŒ–æ–¹æ³•æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"DemoFilter   æ”¾è¡Œå‰é€»è¾‘....."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ”¾è¡Œè¯·æ±‚</span>        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span>servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"DemoFilter   æ”¾è¡Œåé€»è¾‘....."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span> <span class="token comment">//é”€æ¯æ–¹æ³•, åªè°ƒç”¨ä¸€æ¬¡</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"destroy é”€æ¯æ–¹æ³•æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051000768.png"></p><h5 id="2-4-2-2-æ‹¦æˆªè·¯å¾„"><a href="#2-4-2-2-æ‹¦æˆªè·¯å¾„" class="headerlink" title="2.4.2.2 æ‹¦æˆªè·¯å¾„"></a>2.4.2.2 æ‹¦æˆªè·¯å¾„</h5><p>æ‰§è¡Œæµç¨‹æˆ‘ä»¬ææ¸…æ¥šä¹‹åï¼Œæ¥ä¸‹æ¥å†æ¥ä»‹ç»ä¸€ä¸‹è¿‡æ»¤å™¨çš„æ‹¦æˆªè·¯å¾„ï¼ŒFilterå¯ä»¥æ ¹æ®éœ€æ±‚ï¼Œé…ç½®ä¸åŒçš„æ‹¦æˆªèµ„æºè·¯å¾„ï¼š</p><table><thead><tr><th>æ‹¦æˆªè·¯å¾„</th><th>urlPatternså€¼</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>æ‹¦æˆªå…·ä½“è·¯å¾„</td><td>/login</td><td>åªæœ‰è®¿é—® /login è·¯å¾„æ—¶ï¼Œæ‰ä¼šè¢«æ‹¦æˆª</td></tr><tr><td>ç›®å½•æ‹¦æˆª</td><td>/emps/*</td><td>è®¿é—®/empsä¸‹çš„æ‰€æœ‰èµ„æºï¼Œéƒ½ä¼šè¢«æ‹¦æˆª</td></tr><tr><td>æ‹¦æˆªæ‰€æœ‰</td><td>/*</td><td>è®¿é—®æ‰€æœ‰èµ„æºï¼Œéƒ½ä¼šè¢«æ‹¦æˆª</td></tr></tbody></table><p>ä¸‹é¢æˆ‘ä»¬æ¥æµ‹è¯•â€æ‹¦æˆªå…·ä½“è·¯å¾„â€ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/login"</span><span class="token punctuation">)</span>  <span class="token comment">//æ‹¦æˆª/loginå…·ä½“è·¯å¾„</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"DemoFilter   æ”¾è¡Œå‰é€»è¾‘....."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ”¾è¡Œè¯·æ±‚</span>        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span>servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"DemoFilter   æ”¾è¡Œåé€»è¾‘....."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>        <span class="token class-name">Filter</span><span class="token punctuation">.</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>filterConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Filter</span><span class="token punctuation">.</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•1ï¼šè®¿é—®éƒ¨é—¨ç®¡ç†è¯·æ±‚ï¼Œå‘ç°è¿‡æ»¤å™¨æ²¡æœ‰æ‹¦æˆªè¯·æ±‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051000309.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051000744.png"></p><p>æµ‹è¯•2ï¼šè®¿é—®ç™»å½•è¯·æ±‚/loginï¼Œå‘ç°è¿‡æ»¤å™¨æ‹¦æˆªè¯·æ±‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051000556.png"></p><p>ä¸‹é¢æˆ‘ä»¬æ¥æµ‹è¯•â€ç›®å½•æ‹¦æˆªâ€ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/depts/*"</span><span class="token punctuation">)</span> <span class="token comment">//æ‹¦æˆªæ‰€æœ‰ä»¥/deptså¼€å¤´ï¼Œåé¢æ˜¯ä»€ä¹ˆæ— æ‰€è°“</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"DemoFilter   æ”¾è¡Œå‰é€»è¾‘....."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ”¾è¡Œè¯·æ±‚</span>        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span>servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"DemoFilter   æ”¾è¡Œåé€»è¾‘....."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>        <span class="token class-name">Filter</span><span class="token punctuation">.</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>filterConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Filter</span><span class="token punctuation">.</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•1ï¼šè®¿é—®éƒ¨é—¨ç®¡ç†è¯·æ±‚ï¼Œå‘ç°è¿‡æ»¤å™¨æ‹¦æˆªäº†è¯·æ±‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051001193.png"></p><p>æµ‹è¯•2ï¼šè®¿é—®ç™»å½•è¯·æ±‚/loginï¼Œå‘ç°è¿‡æ»¤å™¨æ²¡æœ‰æ‹¦æˆªè¯·æ±‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051001613.png"></p><h5 id="2-4-2-3-è¿‡æ»¤å™¨é“¾"><a href="#2-4-2-3-è¿‡æ»¤å™¨é“¾" class="headerlink" title="2.4.2.3 è¿‡æ»¤å™¨é“¾"></a>2.4.2.3 è¿‡æ»¤å™¨é“¾</h5><p>æœ€åæˆ‘ä»¬åœ¨æ¥ä»‹ç»ä¸‹è¿‡æ»¤å™¨é“¾ï¼Œä»€ä¹ˆæ˜¯è¿‡æ»¤å™¨é“¾å‘¢ï¼Ÿæ‰€è°“è¿‡æ»¤å™¨é“¾æŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªwebåº”ç”¨ç¨‹åºå½“ä¸­ï¼Œå¯ä»¥é…ç½®å¤šä¸ªè¿‡æ»¤å™¨ï¼Œå¤šä¸ªè¿‡æ»¤å™¨å°±å½¢æˆäº†ä¸€ä¸ªè¿‡æ»¤å™¨é“¾ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051001219.png"></p><p>æ¯”å¦‚ï¼šåœ¨æˆ‘ä»¬webæœåŠ¡å™¨å½“ä¸­ï¼Œå®šä¹‰äº†ä¸¤ä¸ªè¿‡æ»¤å™¨ï¼Œè¿™ä¸¤ä¸ªè¿‡æ»¤å™¨å°±å½¢æˆäº†ä¸€ä¸ªè¿‡æ»¤å™¨é“¾ã€‚</p><p>è€Œè¿™ä¸ªé“¾ä¸Šçš„è¿‡æ»¤å™¨åœ¨æ‰§è¡Œçš„æ—¶å€™ä¼šä¸€ä¸ªä¸€ä¸ªçš„æ‰§è¡Œï¼Œä¼šå…ˆæ‰§è¡Œç¬¬ä¸€ä¸ªFilterï¼Œæ”¾è¡Œä¹‹åå†æ¥æ‰§è¡Œç¬¬äºŒä¸ªFilterï¼Œå¦‚æœæ‰§è¡Œåˆ°äº†æœ€åä¸€ä¸ªè¿‡æ»¤å™¨æ”¾è¡Œä¹‹åï¼Œæ‰ä¼šè®¿é—®å¯¹åº”çš„webèµ„æºã€‚</p><p>è®¿é—®å®Œwebèµ„æºä¹‹åï¼ŒæŒ‰ç…§æˆ‘ä»¬åˆšæ‰æ‰€ä»‹ç»çš„è¿‡æ»¤å™¨çš„æ‰§è¡Œæµç¨‹ï¼Œè¿˜ä¼šå›åˆ°è¿‡æ»¤å™¨å½“ä¸­æ¥æ‰§è¡Œè¿‡æ»¤å™¨æ”¾è¡Œåçš„é€»è¾‘ï¼Œè€Œåœ¨æ‰§è¡Œæ”¾è¡Œåçš„é€»è¾‘çš„æ—¶å€™ï¼Œé¡ºåºæ˜¯åç€çš„ã€‚</p><p>å…ˆè¦æ‰§è¡Œè¿‡æ»¤å™¨2æ”¾è¡Œä¹‹åçš„é€»è¾‘ï¼Œå†æ¥æ‰§è¡Œè¿‡æ»¤å™¨1æ”¾è¡Œä¹‹åçš„é€»è¾‘ï¼Œæœ€ååœ¨ç»™æµè§ˆå™¨å“åº”æ•°æ®ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯å½“æˆ‘ä»¬åœ¨webåº”ç”¨å½“ä¸­é…ç½®äº†å¤šä¸ªè¿‡æ»¤å™¨ï¼Œå½¢æˆäº†è¿™æ ·ä¸€ä¸ªè¿‡æ»¤å™¨é“¾ä»¥åŠè¿‡æ»¤å™¨é“¾çš„æ‰§è¡Œé¡ºåºã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡ideaæ¥éªŒè¯ä¸‹è¿‡æ»¤å™¨é“¾ã€‚</p><p>éªŒè¯æ­¥éª¤ï¼š</p><ol><li>åœ¨filteråŒ…ä¸‹å†æ¥æ–°å»ºä¸€ä¸ªFilterè¿‡æ»¤å™¨ç±»ï¼šAbcFilter</li><li>åœ¨AbcFilterè¿‡æ»¤å™¨ä¸­ç¼–å†™æ”¾è¡Œå‰å’Œæ”¾è¡Œåé€»è¾‘</li><li>é…ç½®AbcFilterè¿‡æ»¤å™¨æ‹¦æˆªè¯·æ±‚è·¯å¾„ä¸ºï¼š/* </li><li>é‡å¯SpringBootæœåŠ¡ï¼ŒæŸ¥çœ‹DemoFilterã€AbcFilterçš„æ‰§è¡Œæ—¥å¿—</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051001576.png"></p><p><strong>AbcFilterè¿‡æ»¤å™¨</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/*"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AbcFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Abc æ‹¦æˆªåˆ°äº†è¯·æ±‚... æ”¾è¡Œå‰é€»è¾‘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ”¾è¡Œ</span>        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Abc æ‹¦æˆªåˆ°äº†è¯·æ±‚... æ”¾è¡Œåé€»è¾‘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>DemoFilterè¿‡æ»¤å™¨</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/*"</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"DemoFilter   æ”¾è¡Œå‰é€»è¾‘....."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ”¾è¡Œè¯·æ±‚</span>        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span>servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"DemoFilter   æ”¾è¡Œåé€»è¾‘....."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰“å¼€æµè§ˆå™¨è®¿é—®ç™»å½•æ¥å£ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051001082.png"></p><p>é€šè¿‡æ§åˆ¶å°æ—¥å¿—çš„è¾“å‡ºï¼Œå¤§å®¶å‘ç°AbcFilterå…ˆæ‰§è¡ŒDemoFilteråæ‰§è¡Œï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å…¶å®æ˜¯å’Œè¿‡æ»¤å™¨çš„ç±»åæœ‰å…³ç³»ã€‚ä»¥æ³¨è§£æ–¹å¼é…ç½®çš„Filterè¿‡æ»¤å™¨ï¼Œå®ƒçš„æ‰§è¡Œä¼˜å…ˆçº§æ˜¯æŒ‰æ—¶è¿‡æ»¤å™¨ç±»åçš„è‡ªåŠ¨æ’åºç¡®å®šçš„ï¼Œç±»åæ’åè¶Šé å‰ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚</p><p>å‡å¦‚æˆ‘ä»¬æƒ³è®©DemoFilterå…ˆæ‰§è¡Œï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ä¿®æ”¹ç±»åã€‚</p><p>æµ‹è¯•ï¼šä¿®æ”¹AbcFilterç±»åä¸ºXbcFilterï¼Œè¿è¡Œç¨‹åºæŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/*"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XbcFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Xbc æ‹¦æˆªåˆ°äº†è¯·æ±‚...æ”¾è¡Œå‰é€»è¾‘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ”¾è¡Œ</span>        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Xbc æ‹¦æˆªåˆ°äº†è¯·æ±‚...æ”¾è¡Œåé€»è¾‘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051002189.png"></p><p>åˆ°æ­¤ï¼Œå…³äºè¿‡æ»¤å™¨çš„ä½¿ç”¨ç»†èŠ‚ï¼Œæˆ‘ä»¬å·²ç»å…¨éƒ¨ä»‹ç»å®Œæ¯•äº†ã€‚</p><h4 id="2-4-3-ç™»å½•æ ¡éªŒ-Filter"><a href="#2-4-3-ç™»å½•æ ¡éªŒ-Filter" class="headerlink" title="2.4.3 ç™»å½•æ ¡éªŒ-Filter"></a>2.4.3 ç™»å½•æ ¡éªŒ-Filter</h4><h5 id="2-4-3-1-åˆ†æ"><a href="#2-4-3-1-åˆ†æ" class="headerlink" title="2.4.3.1 åˆ†æ"></a>2.4.3.1 åˆ†æ</h5><p>è¿‡æ»¤å™¨Filterçš„å¿«é€Ÿå…¥é—¨ä»¥åŠä½¿ç”¨ç»†èŠ‚æˆ‘ä»¬å·²ç»ä»‹ç»å®Œäº†ï¼Œæ¥ä¸‹æ¥æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨è¿‡æ»¤å™¨Filteræ¥å®Œæˆæ¡ˆä¾‹å½“ä¸­çš„ç™»å½•æ ¡éªŒåŠŸèƒ½ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051002929.png"></p><p>æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸‹å‰é¢åˆ†æè¿‡çš„ç™»å½•æ ¡éªŒçš„åŸºæœ¬æµç¨‹ï¼š</p><ul><li><p>è¦è¿›å…¥åˆ°åå°ç®¡ç†ç³»ç»Ÿï¼Œæˆ‘ä»¬å¿…é¡»å…ˆå®Œæˆç™»å½•æ“ä½œï¼Œæ­¤æ—¶å°±éœ€è¦è®¿é—®ç™»å½•æ¥å£loginã€‚</p></li><li><p>ç™»å½•æˆåŠŸä¹‹åï¼Œæˆ‘ä»¬ä¼šåœ¨æœåŠ¡ç«¯ç”Ÿæˆä¸€ä¸ªJWTä»¤ç‰Œï¼Œå¹¶ä¸”æŠŠJWTä»¤ç‰Œè¿”å›ç»™å‰ç«¯ï¼Œå‰ç«¯ä¼šå°†JWTä»¤ç‰Œå­˜å‚¨ä¸‹æ¥ã€‚</p></li><li><p>åœ¨åç»­çš„æ¯ä¸€æ¬¡è¯·æ±‚å½“ä¸­ï¼Œéƒ½ä¼šå°†JWTä»¤ç‰Œæºå¸¦åˆ°æœåŠ¡ç«¯ï¼Œè¯·æ±‚åˆ°è¾¾æœåŠ¡ç«¯ä¹‹åï¼Œè¦æƒ³å»è®¿é—®å¯¹åº”çš„ä¸šåŠ¡åŠŸèƒ½ï¼Œæ­¤æ—¶æˆ‘ä»¬å¿…é¡»å…ˆè¦æ ¡éªŒä»¤ç‰Œçš„æœ‰æ•ˆæ€§ã€‚</p></li><li><p>å¯¹äºæ ¡éªŒä»¤ç‰Œçš„è¿™ä¸€å—æ“ä½œï¼Œæˆ‘ä»¬ä½¿ç”¨ç™»å½•æ ¡éªŒçš„è¿‡æ»¤å™¨ï¼Œåœ¨è¿‡æ»¤å™¨å½“ä¸­æ¥æ ¡éªŒä»¤ç‰Œçš„æœ‰æ•ˆæ€§ã€‚å¦‚æœä»¤ç‰Œæ˜¯æ— æ•ˆçš„ï¼Œå°±å“åº”ä¸€ä¸ªé”™è¯¯çš„ä¿¡æ¯ï¼Œä¹Ÿä¸ä¼šå†å»æ”¾è¡Œè®¿é—®å¯¹åº”çš„èµ„æºäº†ã€‚å¦‚æœä»¤ç‰Œå­˜åœ¨ï¼Œå¹¶ä¸”å®ƒæ˜¯æœ‰æ•ˆçš„ï¼Œæ­¤æ—¶å°±ä¼šæ”¾è¡Œå»è®¿é—®å¯¹åº”çš„webèµ„æºï¼Œæ‰§è¡Œç›¸åº”çš„ä¸šåŠ¡æ“ä½œã€‚</p></li></ul><p>å¤§æ¦‚æ¸…æ¥šäº†åœ¨Filterè¿‡æ»¤å™¨çš„å®ç°æ­¥éª¤äº†ï¼Œé‚£åœ¨æ­£å¼å¼€å‘ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬æ€è€ƒä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li><p>æ‰€æœ‰çš„è¯·æ±‚ï¼Œæ‹¦æˆªåˆ°äº†ä¹‹åï¼Œéƒ½éœ€è¦æ ¡éªŒä»¤ç‰Œå—ï¼Ÿ</p><ul><li>ç­”æ¡ˆï¼š<strong>ç™»å½•è¯·æ±‚ä¾‹å¤–</strong></li></ul></li><li><p>æ‹¦æˆªåˆ°è¯·æ±‚åï¼Œä»€ä¹ˆæƒ…å†µä¸‹æ‰å¯ä»¥æ”¾è¡Œï¼Œæ‰§è¡Œä¸šåŠ¡æ“ä½œï¼Ÿ</p><ul><li>ç­”æ¡ˆï¼š<strong>æœ‰ä»¤ç‰Œï¼Œä¸”ä»¤ç‰Œæ ¡éªŒé€šè¿‡(åˆæ³•)ï¼›å¦åˆ™éƒ½è¿”å›æœªç™»å½•é”™è¯¯ç»“æœ</strong></li></ul></li></ol><h5 id="2-4-3-2-å…·ä½“æµç¨‹"><a href="#2-4-3-2-å…·ä½“æµç¨‹" class="headerlink" title="2.4.3.2 å…·ä½“æµç¨‹"></a>2.4.3.2 å…·ä½“æµç¨‹</h5><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241205152630053.png"></p><p>æˆ‘ä»¬è¦å®Œæˆç™»å½•æ ¡éªŒï¼Œä¸»è¦æ˜¯åˆ©ç”¨Filterè¿‡æ»¤å™¨å®ç°ï¼Œè€ŒFilterè¿‡æ»¤å™¨çš„æµç¨‹æ­¥éª¤ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051002773.png"> </p><p>åŸºäºä¸Šé¢çš„ä¸šåŠ¡æµç¨‹ï¼Œæˆ‘ä»¬åˆ†æå‡ºå…·ä½“çš„æ“ä½œæ­¥éª¤ï¼š</p><ol><li>è·å–è¯·æ±‚url</li><li>åˆ¤æ–­è¯·æ±‚urlä¸­æ˜¯å¦åŒ…å«loginï¼Œå¦‚æœåŒ…å«ï¼Œè¯´æ˜æ˜¯ç™»å½•æ“ä½œï¼Œæ”¾è¡Œ</li><li>è·å–è¯·æ±‚å¤´ä¸­çš„ä»¤ç‰Œï¼ˆtokenï¼‰</li><li>åˆ¤æ–­ä»¤ç‰Œæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯ç»“æœï¼ˆæœªç™»å½•ï¼‰</li><li>è§£ætokenï¼Œå¦‚æœè§£æå¤±è´¥ï¼Œè¿”å›é”™è¯¯ç»“æœï¼ˆæœªç™»å½•ï¼‰</li><li>æ”¾è¡Œ</li></ol><h5 id="2-4-3-3-ä»£ç å®ç°"><a href="#2-4-3-3-ä»£ç å®ç°" class="headerlink" title="2.4.3.3 ä»£ç å®ç°"></a>2.4.3.3 ä»£ç å®ç°</h5><p>åˆ†ææ¸…æ¥šäº†ä»¥ä¸Šçš„é—®é¢˜åï¼Œæˆ‘ä»¬å°±å‚ç…§æ¥å£æ–‡æ¡£æ¥å¼€å‘ç™»å½•åŠŸèƒ½äº†ï¼Œç™»å½•æ¥å£æè¿°å¦‚ä¸‹ï¼š</p><ul><li><p>åŸºæœ¬ä¿¡æ¯</p><pre class="line-numbers language-none"><code class="language-none">è¯·æ±‚è·¯å¾„ï¼š/loginè¯·æ±‚æ–¹å¼ï¼šPOSTæ¥å£æè¿°ï¼šè¯¥æ¥å£ç”¨äºå‘˜å·¥ç™»å½•Tliasæ™ºèƒ½å­¦ä¹ è¾…åŠ©ç³»ç»Ÿï¼Œç™»å½•å®Œæ¯•åï¼Œç³»ç»Ÿä¸‹å‘JWTä»¤ç‰Œã€‚ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>è¯·æ±‚å‚æ•°</p><p>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>username</td><td>string</td><td>å¿…é¡»</td><td>ç”¨æˆ·å</td></tr><tr><td>password</td><td>string</td><td>å¿…é¡»</td><td>å¯†ç </td></tr></tbody></table><p>è¯·æ±‚æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span><span class="token property">"username"</span><span class="token operator">:</span> <span class="token string">"jinyong"</span><span class="token punctuation">,</span>    <span class="token property">"password"</span><span class="token operator">:</span> <span class="token string">"123456"</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å“åº”æ•°æ®</p><p>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>é»˜è®¤å€¼</th><th>å¤‡æ³¨</th><th>å…¶ä»–ä¿¡æ¯</th></tr></thead><tbody><tr><td>code</td><td>number</td><td>å¿…é¡»</td><td></td><td>å“åº”ç , 1 æˆåŠŸ ; 0  å¤±è´¥</td><td></td></tr><tr><td>msg</td><td>string</td><td>éå¿…é¡»</td><td></td><td>æç¤ºä¿¡æ¯</td><td></td></tr><tr><td>data</td><td>string</td><td>å¿…é¡»</td><td></td><td>è¿”å›çš„æ•°æ® , jwtä»¤ç‰Œ</td><td></td></tr></tbody></table><p>å“åº”æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"code"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">"msg"</span><span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token string">"eyJhbGciOiJIUzI1NiJ9.eyJuYW1lIjoi6YeR5bq4IiwiaWQiOjEsInVzZXJuYW1lIjoiamlueW9uZyIsImV4cCI6MTY2MjIwNzA0OH0.KkUc_CXJZJ8Dd063eImx4H9Ojfrr6XMJ-yVzaWCVZCo"</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å¤‡æ³¨è¯´æ˜</p><p>ç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¸‹å‘JWTä»¤ç‰Œï¼Œç„¶ååœ¨åç»­çš„æ¯æ¬¡è¯·æ±‚ä¸­ï¼Œéƒ½éœ€è¦åœ¨è¯·æ±‚å¤´headerä¸­æºå¸¦åˆ°æœåŠ¡ç«¯ï¼Œè¯·æ±‚å¤´çš„åç§°ä¸º token ï¼Œå€¼ä¸º ç™»å½•æ—¶ä¸‹å‘çš„JWTä»¤ç‰Œã€‚</p><p>å¦‚æœæ£€æµ‹åˆ°ç”¨æˆ·æœªç™»å½•ï¼Œåˆ™ä¼šè¿”å›å¦‚ä¸‹å›ºå®šé”™è¯¯ä¿¡æ¯ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span><span class="token property">"code"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token property">"msg"</span><span class="token operator">:</span> <span class="token string">"NOT_LOGIN"</span><span class="token punctuation">,</span><span class="token property">"data"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p><strong>ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨ï¼šLoginCheckFilter</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>filter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span></span><span class="token class-name">JSONObject</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Result</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">JwtUtils</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebFilter</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/*"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginCheckFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>        <span class="token class-name">HttpServletRequest</span> req <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> request<span class="token punctuation">;</span>        <span class="token class-name">HttpServletResponse</span> resp <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">)</span> response<span class="token punctuation">;</span>        <span class="token comment">//1.è·å–è¯·æ±‚urlã€‚</span>        <span class="token class-name">String</span> url <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRequestURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"è¯·æ±‚çš„url: {}"</span><span class="token punctuation">,</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2.åˆ¤æ–­è¯·æ±‚urlä¸­æ˜¯å¦åŒ…å«loginï¼Œå¦‚æœåŒ…å«ï¼Œè¯´æ˜æ˜¯ç™»å½•æ“ä½œï¼Œæ”¾è¡Œã€‚</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"login"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•æ“ä½œ, æ”¾è¡Œ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">// 3. æ”¾è¡ŒSwaggerç›¸å…³è¯·æ±‚</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"swagger"</span><span class="token punctuation">)</span> <span class="token operator">||</span> url<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"api-docs"</span><span class="token punctuation">)</span> <span class="token operator">||</span> url<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"webjars"</span><span class="token punctuation">)</span> <span class="token operator">||</span> url<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"doc.html"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Swaggerç›¸å…³è¯·æ±‚, æ”¾è¡Œ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">//3.è·å–è¯·æ±‚å¤´ä¸­çš„ä»¤ç‰Œï¼ˆtokenï¼‰ã€‚</span>        <span class="token class-name">String</span> jwt <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//4.åˆ¤æ–­ä»¤ç‰Œæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯ç»“æœï¼ˆæœªç™»å½•ï¼‰ã€‚</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasLength</span><span class="token punctuation">(</span>jwt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"è¯·æ±‚å¤´tokenä¸ºç©º,è¿”å›æœªç™»å½•çš„ä¿¡æ¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Result</span> error <span class="token operator">=</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"NOT_LOGIN"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æ‰‹åŠ¨è½¬æ¢ å¯¹è±¡--json --------&gt; é˜¿é‡Œå·´å·´fastJSON</span>            <span class="token class-name">String</span> notLogin <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>            resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>notLogin<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">//5.è§£ætokenï¼Œå¦‚æœè§£æå¤±è´¥ï¼Œè¿”å›é”™è¯¯ç»“æœï¼ˆæœªç™»å½•ï¼‰ã€‚</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token class-name">JwtUtils</span><span class="token punctuation">.</span><span class="token function">parseJWT</span><span class="token punctuation">(</span>jwt<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//jwtè§£æå¤±è´¥</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"è§£æä»¤ç‰Œå¤±è´¥, è¿”å›æœªç™»å½•é”™è¯¯ä¿¡æ¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Result</span> error <span class="token operator">=</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"NOT_LOGIN"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æ‰‹åŠ¨è½¬æ¢ å¯¹è±¡--json --------&gt; é˜¿é‡Œå·´å·´fastJSON</span>            <span class="token class-name">String</span> notLogin <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>            resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>notLogin<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">//6.æ”¾è¡Œã€‚</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"ä»¤ç‰Œåˆæ³•, æ”¾è¡Œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ä¸Šè¿°è¿‡æ»¤å™¨çš„åŠŸèƒ½å®ç°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ°äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹jsonå¤„ç†çš„å·¥å…·åŒ…fastjsonã€‚æˆ‘ä»¬è¦æƒ³ä½¿ç”¨ï¼Œéœ€è¦å¼•å…¥å¦‚ä¸‹ä¾èµ–ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>fastjson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.76<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç™»å½•æ ¡éªŒçš„è¿‡æ»¤å™¨æˆ‘ä»¬ç¼–å†™å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥é‡æ–°å¯åŠ¨æœåŠ¡æ¥åšä¸€ä¸ªæµ‹è¯•ï¼š</p><blockquote><p>æµ‹è¯•å‰å…ˆæŠŠä¹‹å‰æ‰€ç¼–å†™çš„æµ‹è¯•ä½¿ç”¨çš„è¿‡æ»¤å™¨ï¼Œæš‚æ—¶æ³¨é‡Šæ‰ã€‚ç›´æ¥å°†@WebFilteræ³¨è§£ç»™æ³¨é‡Šæ‰å³å¯ã€‚</p></blockquote><ul><li><p>æµ‹è¯•1ï¼šæœªç™»å½•æ˜¯å¦å¯ä»¥è®¿é—®éƒ¨é—¨ç®¡ç†é¡µé¢</p><p>é¦–å…ˆå…³é—­æµè§ˆå™¨ï¼Œé‡æ–°æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨åœ°å€æ ä¸­è¾“å…¥ï¼š<a href="http://localhost:9528/#/system/dept">http://localhost:9528/#/system/dept</a></p><p>ç”±äºç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œç™»å½•æ ¡éªŒè¿‡æ»¤å™¨è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œå‰ç«¯é¡µé¢æ ¹æ®è¿”å›çš„é”™è¯¯ä¿¡æ¯ç»“æœï¼Œè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢äº†</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051002654.png"></p></li><li><p>æµ‹è¯•2ï¼šå…ˆè¿›è¡Œç™»å½•æ“ä½œï¼Œå†è®¿é—®éƒ¨é—¨ç®¡ç†é¡µé¢</p><p>ç™»å½•æ ¡éªŒæˆåŠŸä¹‹åï¼Œå¯ä»¥æ­£å¸¸è®¿é—®ç›¸å…³ä¸šåŠ¡æ“ä½œé¡µé¢</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051002533.png"></p></li></ul><h3 id="2-5-æ‹¦æˆªå™¨Interceptor"><a href="#2-5-æ‹¦æˆªå™¨Interceptor" class="headerlink" title="2.5 æ‹¦æˆªå™¨Interceptor"></a>2.5 æ‹¦æˆªå™¨Interceptor</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241205155213213.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241205155337863.png" alt="æ­¥éª¤1"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241205155403409.png" alt="æ­¥éª¤2"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412052009411.png" alt="æ‹¦æˆªå™¨"></p><p>å­¦ä¹ å®Œäº†è¿‡æ»¤å™¨Filterä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­å­¦ä¹ æ‹¦æˆªå™¨Interseptorã€‚</p><p>æ‹¦æˆªå™¨æˆ‘ä»¬ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªæ–¹é¢è¿›è¡Œè®²è§£ï¼š</p><ol><li>ä»‹ç»ä¸‹ä»€ä¹ˆæ˜¯æ‹¦æˆªå™¨ï¼Œå¹¶é€šè¿‡å¿«é€Ÿå…¥é—¨ç¨‹åºä¸Šæ‰‹æ‹¦æˆªå™¨</li><li>æ‹¦æˆªå™¨çš„ä½¿ç”¨ç»†èŠ‚</li><li>é€šè¿‡æ‹¦æˆªå™¨Interceptorå®Œæˆç™»å½•æ ¡éªŒåŠŸèƒ½</li></ol><p>æˆ‘ä»¬å…ˆå­¦ä¹ ç¬¬ä¸€å—å†…å®¹ï¼šæ‹¦æˆªå™¨å¿«é€Ÿå…¥é—¨</p><h4 id="2-5-1-å¿«é€Ÿå…¥é—¨"><a href="#2-5-1-å¿«é€Ÿå…¥é—¨" class="headerlink" title="2.5.1 å¿«é€Ÿå…¥é—¨"></a>2.5.1 å¿«é€Ÿå…¥é—¨</h4><p>ä»€ä¹ˆæ˜¯æ‹¦æˆªå™¨ï¼Ÿ</p><ul><li>æ˜¯ä¸€ç§åŠ¨æ€æ‹¦æˆªæ–¹æ³•è°ƒç”¨çš„æœºåˆ¶ï¼Œç±»ä¼¼äºè¿‡æ»¤å™¨ã€‚</li><li>æ‹¦æˆªå™¨æ˜¯Springæ¡†æ¶ä¸­æä¾›çš„ï¼Œç”¨æ¥åŠ¨æ€æ‹¦æˆªæ§åˆ¶å™¨æ–¹æ³•çš„æ‰§è¡Œã€‚</li></ul><p>æ‹¦æˆªå™¨çš„ä½œç”¨ï¼š</p><ul><li>æ‹¦æˆªè¯·æ±‚ï¼Œåœ¨æŒ‡å®šæ–¹æ³•è°ƒç”¨å‰åï¼Œæ ¹æ®ä¸šåŠ¡éœ€è¦æ‰§è¡Œé¢„å…ˆè®¾å®šçš„ä»£ç ã€‚</li></ul><p>åœ¨æ‹¦æˆªå™¨å½“ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¹Ÿæ˜¯åšä¸€äº›é€šç”¨æ€§çš„æ“ä½œï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‹¦æˆªå™¨æ¥æ‹¦æˆªå‰ç«¯å‘èµ·çš„è¯·æ±‚ï¼Œå°†ç™»å½•æ ¡éªŒçš„é€»è¾‘å…¨éƒ¨ç¼–å†™åœ¨æ‹¦æˆªå™¨å½“ä¸­ã€‚åœ¨æ ¡éªŒçš„è¿‡ç¨‹å½“ä¸­ï¼Œå¦‚å‘ç°ç”¨æˆ·ç™»å½•äº†(æºå¸¦JWTä»¤ç‰Œä¸”æ˜¯åˆæ³•ä»¤ç‰Œ)ï¼Œå°±å¯ä»¥ç›´æ¥æ”¾è¡Œï¼Œå»è®¿é—®springå½“ä¸­çš„èµ„æºã€‚å¦‚æœæ ¡éªŒæ—¶å‘ç°å¹¶æ²¡æœ‰ç™»å½•æˆ–æ˜¯éæ³•ä»¤ç‰Œï¼Œå°±å¯ä»¥ç›´æ¥ç»™å‰ç«¯å“åº”æœªç™»å½•çš„é”™è¯¯ä¿¡æ¯ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡å¿«é€Ÿå…¥é—¨ç¨‹åºï¼Œæ¥å­¦ä¹ ä¸‹æ‹¦æˆªå™¨çš„åŸºæœ¬ä½¿ç”¨ã€‚æ‹¦æˆªå™¨çš„ä½¿ç”¨æ­¥éª¤å’Œè¿‡æ»¤å™¨ç±»ä¼¼ï¼Œä¹Ÿåˆ†ä¸ºä¸¤æ­¥ï¼š</p><ol><li><p>å®šä¹‰æ‹¦æˆªå™¨</p></li><li><p>æ³¨å†Œé…ç½®æ‹¦æˆªå™¨</p></li></ol><p><strong>è‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼š</strong>å®ç°HandlerInterceptoræ¥å£ï¼Œå¹¶é‡å†™å…¶æ‰€æœ‰æ–¹æ³•</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//è‡ªå®šä¹‰æ‹¦æˆªå™¨</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginCheckInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>    <span class="token comment">//ç›®æ ‡èµ„æºæ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œã€‚ è¿”å›trueï¼šæ”¾è¡Œ    è¿”å›falseï¼šä¸æ”¾è¡Œ</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"preHandle .... "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">//trueè¡¨ç¤ºæ”¾è¡Œ</span>    <span class="token punctuation">}</span>    <span class="token comment">//ç›®æ ‡èµ„æºæ–¹æ³•æ‰§è¡Œåæ‰§è¡Œ</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"postHandle ... "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//è§†å›¾æ¸²æŸ“å®Œæ¯•åæ‰§è¡Œï¼Œæœ€åæ‰§è¡Œ</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"afterCompletion .... "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ³¨æ„ï¼š</p><p>â€‹preHandleæ–¹æ³•ï¼šç›®æ ‡èµ„æºæ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œã€‚ è¿”å›trueï¼šæ”¾è¡Œ    è¿”å›falseï¼šä¸æ”¾è¡Œ</p><p>â€‹postHandleæ–¹æ³•ï¼šç›®æ ‡èµ„æºæ–¹æ³•æ‰§è¡Œåæ‰§è¡Œ</p><p>â€‹afterCompletionæ–¹æ³•ï¼šè§†å›¾æ¸²æŸ“å®Œæ¯•åæ‰§è¡Œï¼Œæœ€åæ‰§è¡Œ</p></blockquote><p><strong>æ³¨å†Œé…ç½®æ‹¦æˆªå™¨</strong>ï¼šå®ç°WebMvcConfigureræ¥å£ï¼Œå¹¶é‡å†™addInterceptorsæ–¹æ³•</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>    <span class="token comment">//è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨å¯¹è±¡</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">LoginCheckInterceptor</span> loginCheckInterceptor<span class="token punctuation">;</span>        <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">//æ³¨å†Œè‡ªå®šä¹‰æ‹¦æˆªå™¨å¯¹è±¡</span>        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>loginCheckInterceptor<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®æ‹¦æˆªå™¨æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„ï¼ˆ /** è¡¨ç¤ºæ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼‰</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡ï¼Œæ‰“å¼€postmanæµ‹è¯•ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051002516.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051003006.png"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥åšä¸€ä¸ªæµ‹è¯•ï¼šå°†æ‹¦æˆªå™¨ä¸­è¿”å›å€¼æ”¹ä¸ºfalse</p><p>ä½¿ç”¨postmanï¼Œå†æ¬¡ç‚¹å‡»sendå‘é€è¯·æ±‚åï¼Œæ²¡æœ‰å“åº”æ•°æ®ï¼Œè¯´æ˜è¯·æ±‚è¢«æ‹¦æˆªäº†æ²¡æœ‰æ”¾è¡Œ</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051003332.png"></p><h4 id="2-5-2-Interceptorè¯¦è§£"><a href="#2-5-2-Interceptorè¯¦è§£" class="headerlink" title="2.5.2 Interceptorè¯¦è§£"></a>2.5.2 Interceptorè¯¦è§£</h4><p>æ‹¦æˆªå™¨çš„å…¥é—¨ç¨‹åºå®Œæˆä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥ä»‹ç»æ‹¦æˆªå™¨çš„ä½¿ç”¨ç»†èŠ‚ã€‚æ‹¦æˆªå™¨çš„ä½¿ç”¨ç»†èŠ‚æˆ‘ä»¬ä¸»è¦ä»‹ç»ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>æ‹¦æˆªå™¨çš„æ‹¦æˆªè·¯å¾„é…ç½®</li><li>æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹</li></ol><h5 id="2-5-2-1-æ‹¦æˆªè·¯å¾„"><a href="#2-5-2-1-æ‹¦æˆªè·¯å¾„" class="headerlink" title="2.5.2.1 æ‹¦æˆªè·¯å¾„"></a>2.5.2.1 æ‹¦æˆªè·¯å¾„</h5><p>é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹æ‹¦æˆªå™¨çš„æ‹¦æˆªè·¯å¾„çš„é…ç½®ï¼Œåœ¨æ³¨å†Œé…ç½®æ‹¦æˆªå™¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦æŒ‡å®šæ‹¦æˆªå™¨çš„æ‹¦æˆªè·¯å¾„ï¼Œé€šè¿‡<code>addPathPatterns("è¦æ‹¦æˆªè·¯å¾„")</code>æ–¹æ³•ï¼Œå°±å¯ä»¥æŒ‡å®šè¦æ‹¦æˆªå“ªäº›èµ„æºã€‚</p><p>åœ¨å…¥é—¨ç¨‹åºä¸­æˆ‘ä»¬é…ç½®çš„æ˜¯<code>/**</code>ï¼Œè¡¨ç¤ºæ‹¦æˆªæ‰€æœ‰èµ„æºï¼Œè€Œåœ¨é…ç½®æ‹¦æˆªå™¨æ—¶ï¼Œä¸ä»…å¯ä»¥æŒ‡å®šè¦æ‹¦æˆªå“ªäº›èµ„æºï¼Œè¿˜å¯ä»¥æŒ‡å®šä¸æ‹¦æˆªå“ªäº›èµ„æºï¼Œåªéœ€è¦è°ƒç”¨<code>excludePathPatterns("ä¸æ‹¦æˆªè·¯å¾„")</code>æ–¹æ³•ï¼ŒæŒ‡å®šå“ªäº›èµ„æºä¸éœ€è¦æ‹¦æˆªã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>    <span class="token comment">//æ‹¦æˆªå™¨å¯¹è±¡</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">LoginCheckInterceptor</span> loginCheckInterceptor<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//æ³¨å†Œè‡ªå®šä¹‰æ‹¦æˆªå™¨å¯¹è±¡</span>        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>loginCheckInterceptor<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span><span class="token comment">//è®¾ç½®æ‹¦æˆªå™¨æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„ï¼ˆ /** è¡¨ç¤ºæ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼‰</span>                <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®ä¸æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨æ‹¦æˆªå™¨ä¸­é™¤äº†å¯ä»¥è®¾ç½®<code>/**</code>æ‹¦æˆªæ‰€æœ‰èµ„æºå¤–ï¼Œè¿˜æœ‰ä¸€äº›å¸¸è§æ‹¦æˆªè·¯å¾„è®¾ç½®ï¼š</p><table><thead><tr><th>æ‹¦æˆªè·¯å¾„</th><th>å«ä¹‰</th><th>ä¸¾ä¾‹</th></tr></thead><tbody><tr><td>/*</td><td>ä¸€çº§è·¯å¾„</td><td>èƒ½åŒ¹é…/deptsï¼Œ/empsï¼Œ/loginï¼Œä¸èƒ½åŒ¹é… /depts/1</td></tr><tr><td>/**</td><td>ä»»æ„çº§è·¯å¾„</td><td>èƒ½åŒ¹é…/deptsï¼Œ/depts/1ï¼Œ/depts/1/2</td></tr><tr><td>/depts/*</td><td>/deptsä¸‹çš„ä¸€çº§è·¯å¾„</td><td>èƒ½åŒ¹é…/depts/1ï¼Œä¸èƒ½åŒ¹é…/depts/1/2ï¼Œ/depts</td></tr><tr><td>/depts/**</td><td>/deptsä¸‹çš„ä»»æ„çº§è·¯å¾„</td><td>èƒ½åŒ¹é…/deptsï¼Œ/depts/1ï¼Œ/depts/1/2ï¼Œä¸èƒ½åŒ¹é…/emps/1</td></tr></tbody></table><p>ä¸‹é¢ä¸»è¦æ¥æ¼”ç¤ºä¸‹<code>/**</code>ä¸<code>/*</code>çš„åŒºåˆ«ï¼š </p><ul><li>ä¿®æ”¹æ‹¦æˆªå™¨é…ç½®ï¼ŒæŠŠæ‹¦æˆªè·¯å¾„è®¾ç½®ä¸º<code>/*</code></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>    <span class="token comment">//æ‹¦æˆªå™¨å¯¹è±¡</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">LoginCheckInterceptor</span> loginCheckInterceptor<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">//æ³¨å†Œè‡ªå®šä¹‰æ‹¦æˆªå™¨å¯¹è±¡</span>        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>loginCheckInterceptor<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/*"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®ä¸æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨postmanæµ‹è¯•ï¼š<a href="http://localhost:8080/emps/1">http://localhost:8080/emps/1</a> </p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051003015.png"></p><p>æ§åˆ¶å°æ²¡æœ‰è¾“å‡ºæ‹¦æˆªå™¨ä¸­çš„æ—¥å¿—ä¿¡æ¯ï¼Œè¯´æ˜<code>/*</code>æ²¡æœ‰åŒ¹é…åˆ°æ‹¦æˆªè·¯å¾„<code>/emp/1</code> ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051003315.png"></p><h5 id="2-5-2-2-æ‰§è¡Œæµç¨‹"><a href="#2-5-2-2-æ‰§è¡Œæµç¨‹" class="headerlink" title="2.5.2.2 æ‰§è¡Œæµç¨‹"></a>2.5.2.2 æ‰§è¡Œæµç¨‹</h5><p>ä»‹ç»å®Œæ‹¦æˆªè·¯å¾„çš„é…ç½®ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥ä»‹ç»æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹ã€‚é€šè¿‡æ‰§è¡Œæµç¨‹ï¼Œå¤§å®¶å°±èƒ½å¤Ÿæ¸…æ™°çš„çŸ¥é“è¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨çš„æ‰§è¡Œæ—¶æœºã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051003351.png"></p><h6 id="Filterå’ŒInterceptorçš„åŒºåˆ«"><a href="#Filterå’ŒInterceptorçš„åŒºåˆ«" class="headerlink" title="Filterå’ŒInterceptorçš„åŒºåˆ«"></a>Filterå’ŒInterceptorçš„åŒºåˆ«</h6><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412052050175.png"></p><ul><li><p>å½“æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨æ¥è®¿é—®éƒ¨ç½²åœ¨webæœåŠ¡å™¨å½“ä¸­çš„webåº”ç”¨æ—¶ï¼Œæ­¤æ—¶æˆ‘ä»¬æ‰€å®šä¹‰çš„è¿‡æ»¤å™¨ä¼šæ‹¦æˆªåˆ°è¿™æ¬¡è¯·æ±‚ã€‚æ‹¦æˆªåˆ°è¿™æ¬¡è¯·æ±‚ä¹‹åï¼Œå®ƒä¼šå…ˆæ‰§è¡Œæ”¾è¡Œå‰çš„é€»è¾‘ï¼Œç„¶åå†æ‰§è¡Œæ”¾è¡Œæ“ä½œã€‚è€Œç”±äºæˆ‘ä»¬å½“å‰æ˜¯åŸºäºspringbootå¼€å‘çš„ï¼Œæ‰€ä»¥æ”¾è¡Œä¹‹åæ˜¯è¿›å…¥åˆ°äº†springçš„ç¯å¢ƒå½“ä¸­ï¼Œä¹Ÿå°±æ˜¯è¦æ¥è®¿é—®æˆ‘ä»¬æ‰€å®šä¹‰çš„controllerå½“ä¸­çš„æ¥å£æ–¹æ³•ã€‚</p></li><li><p>Tomcatå¹¶ä¸è¯†åˆ«æ‰€ç¼–å†™çš„Controllerç¨‹åºï¼Œä½†æ˜¯å®ƒè¯†åˆ«Servletç¨‹åºï¼Œæ‰€ä»¥åœ¨Springçš„Webç¯å¢ƒä¸­æä¾›äº†ä¸€ä¸ªéå¸¸æ ¸å¿ƒçš„Servletï¼šDispatcherServletï¼ˆå‰ç«¯æ§åˆ¶å™¨ï¼‰ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ä¼šå…ˆè¿›è¡Œåˆ°DispatcherServletï¼Œå†å°†è¯·æ±‚è½¬ç»™Controllerã€‚</p></li><li><p>å½“æˆ‘ä»¬å®šä¹‰äº†æ‹¦æˆªå™¨åï¼Œä¼šåœ¨æ‰§è¡ŒControllerçš„æ–¹æ³•ä¹‹å‰ï¼Œè¯·æ±‚è¢«æ‹¦æˆªå™¨æ‹¦æˆªä½ã€‚æ‰§è¡Œ<code>preHandle()</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ‰§è¡Œå®Œæˆåéœ€è¦è¿”å›ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„å€¼ï¼Œå¦‚æœè¿”å›trueï¼Œå°±è¡¨ç¤ºæ”¾è¡Œæœ¬æ¬¡æ“ä½œï¼Œæ‰ä¼šç»§ç»­è®¿é—®controllerä¸­çš„æ–¹æ³•ï¼›å¦‚æœè¿”å›falseï¼Œåˆ™ä¸ä¼šæ”¾è¡Œï¼ˆcontrollerä¸­çš„æ–¹æ³•ä¹Ÿä¸ä¼šæ‰§è¡Œï¼‰ã€‚</p></li><li><p>åœ¨controllerå½“ä¸­çš„æ–¹æ³•æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå†å›è¿‡æ¥æ‰§è¡Œ<code>postHandle()</code>è¿™ä¸ªæ–¹æ³•ä»¥åŠ<code>afterCompletion()</code> æ–¹æ³•ï¼Œç„¶åå†è¿”å›ç»™DispatcherServletï¼Œæœ€ç»ˆå†æ¥æ‰§è¡Œè¿‡æ»¤å™¨å½“ä¸­æ”¾è¡Œåçš„è¿™ä¸€éƒ¨åˆ†é€»è¾‘çš„é€»è¾‘ã€‚æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæœ€ç»ˆç»™æµè§ˆå™¨å“åº”æ•°æ®ã€‚</p></li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥æ¼”ç¤ºä¸‹è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨åŒæ—¶å­˜åœ¨çš„æ‰§è¡Œæµç¨‹ï¼š</p><ul><li>å¼€å¯LoginCheckInterceptoræ‹¦æˆªå™¨</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginCheckInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"preHandle .... "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">//trueè¡¨ç¤ºæ”¾è¡Œ</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"postHandle ... "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"afterCompletion .... "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>    <span class="token comment">//æ‹¦æˆªå™¨å¯¹è±¡</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">LoginCheckInterceptor</span> loginCheckInterceptor<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//æ³¨å†Œè‡ªå®šä¹‰æ‹¦æˆªå™¨å¯¹è±¡</span>        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>loginCheckInterceptor<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span><span class="token comment">//æ‹¦æˆªæ‰€æœ‰è¯·æ±‚</span>                <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¸æ‹¦æˆªç™»å½•è¯·æ±‚</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å¼€å¯DemoFilterè¿‡æ»¤å™¨</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/*"</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"DemoFilter   æ”¾è¡Œå‰é€»è¾‘....."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ”¾è¡Œè¯·æ±‚</span>        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span>servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"DemoFilter   æ”¾è¡Œåé€»è¾‘....."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡å¯SpringBootæœåŠ¡åï¼Œæ¸…ç©ºæ—¥å¿—ï¼Œæ‰“å¼€Postmanï¼Œæµ‹è¯•æŸ¥è¯¢éƒ¨é—¨ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051003625.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051003057.png"></p><p>ä»¥ä¸Šå°±æ˜¯æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹ã€‚é€šè¿‡æ‰§è¡Œæµç¨‹åˆ†æï¼Œå¤§å®¶åº”è¯¥å·²ç»æ¸…æ¥šäº†è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨ä¹‹é—´çš„åŒºåˆ«ï¼Œå…¶å®å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä¸»è¦æ˜¯ä¸¤ç‚¹ï¼š</p><ul><li>æ¥å£è§„èŒƒä¸åŒï¼šè¿‡æ»¤å™¨éœ€è¦å®ç°Filteræ¥å£ï¼Œè€Œæ‹¦æˆªå™¨éœ€è¦å®ç°HandlerInterceptoræ¥å£ã€‚</li><li>æ‹¦æˆªèŒƒå›´ä¸åŒï¼šè¿‡æ»¤å™¨Filterä¼šæ‹¦æˆªæ‰€æœ‰çš„èµ„æºï¼Œè€ŒInterceptoråªä¼šæ‹¦æˆªSpringç¯å¢ƒä¸­çš„èµ„æºã€‚</li></ul><h4 id="2-5-3-ç™»å½•æ ¡éªŒ-Interceptor"><a href="#2-5-3-ç™»å½•æ ¡éªŒ-Interceptor" class="headerlink" title="2.5.3 ç™»å½•æ ¡éªŒ- Interceptor"></a>2.5.3 ç™»å½•æ ¡éªŒ- Interceptor</h4><p>è®²è§£å®Œäº†æ‹¦æˆªå™¨çš„åŸºæœ¬æ“ä½œä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å®Œæˆæœ€åä¸€æ­¥æ“ä½œï¼šé€šè¿‡æ‹¦æˆªå™¨æ¥å®Œæˆæ¡ˆä¾‹å½“ä¸­çš„ç™»å½•æ ¡éªŒåŠŸèƒ½ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412052054420.png" alt="æµç¨‹"></p><p>ç™»å½•æ ¡éªŒçš„ä¸šåŠ¡é€»è¾‘ä»¥åŠæ“ä½œæ­¥éª¤æˆ‘ä»¬å‰é¢å·²ç»åˆ†æè¿‡äº†ï¼Œå’Œç™»å½•æ ¡éªŒFilterè¿‡æ»¤å™¨å½“ä¸­çš„é€»è¾‘æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚ç°åœ¨æˆ‘ä»¬åªéœ€è¦æŠŠè¿™ä¸ªæŠ€æœ¯æ–¹æ¡ˆç”±åŸæ¥çš„è¿‡æ»¤å™¨æ¢æˆæ‹¦æˆªå™¨interceptorå°±å¯ä»¥äº†ã€‚</p><p><strong>ç™»å½•æ ¡éªŒæ‹¦æˆªå™¨</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//è‡ªå®šä¹‰æ‹¦æˆªå™¨</span><span class="token annotation punctuation">@Component</span> <span class="token comment">//å½“å‰æ‹¦æˆªå™¨å¯¹è±¡ç”±Springåˆ›å»ºå’Œç®¡ç†</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginCheckInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>    <span class="token comment">//å‰ç½®æ–¹å¼</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"preHandle .... "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//1.è·å–è¯·æ±‚url</span>        <span class="token comment">//2.åˆ¤æ–­è¯·æ±‚urlä¸­æ˜¯å¦åŒ…å«loginï¼Œå¦‚æœåŒ…å«ï¼Œè¯´æ˜æ˜¯ç™»å½•æ“ä½œï¼Œæ”¾è¡Œ</span>        <span class="token comment">//3.è·å–è¯·æ±‚å¤´ä¸­çš„ä»¤ç‰Œï¼ˆtokenï¼‰</span>        <span class="token class-name">String</span> token <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"ä»è¯·æ±‚å¤´ä¸­è·å–çš„ä»¤ç‰Œï¼š{}"</span><span class="token punctuation">,</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//4.åˆ¤æ–­ä»¤ç‰Œæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯ç»“æœï¼ˆæœªç™»å½•ï¼‰</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasLength</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Tokenä¸å­˜åœ¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//åˆ›å»ºå“åº”ç»“æœå¯¹è±¡</span>            <span class="token class-name">Result</span> responseResult <span class="token operator">=</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"NOT_LOGIN"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æŠŠResultå¯¹è±¡è½¬æ¢ä¸ºJSONæ ¼å¼å­—ç¬¦ä¸² (fastjsonæ˜¯é˜¿é‡Œå·´å·´æä¾›çš„ç”¨äºå®ç°å¯¹è±¡å’Œjsonçš„è½¬æ¢å·¥å…·ç±»)</span>            <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>responseResult<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//è®¾ç½®å“åº”å¤´ï¼ˆå‘ŠçŸ¥æµè§ˆå™¨ï¼šå“åº”çš„æ•°æ®ç±»å‹ä¸ºjsonã€å“åº”çš„æ•°æ®ç¼–ç è¡¨ä¸ºutf-8ï¼‰</span>            response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/json;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//å“åº”</span>            response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">//ä¸æ”¾è¡Œ</span>        <span class="token punctuation">}</span>        <span class="token comment">//5.è§£ætokenï¼Œå¦‚æœè§£æå¤±è´¥ï¼Œè¿”å›é”™è¯¯ç»“æœï¼ˆæœªç™»å½•ï¼‰</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token class-name">JwtUtils</span><span class="token punctuation">.</span><span class="token function">parseJWT</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"ä»¤ç‰Œè§£æå¤±è´¥!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//åˆ›å»ºå“åº”ç»“æœå¯¹è±¡</span>            <span class="token class-name">Result</span> responseResult <span class="token operator">=</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"NOT_LOGIN"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æŠŠResultå¯¹è±¡è½¬æ¢ä¸ºJSONæ ¼å¼å­—ç¬¦ä¸² (fastjsonæ˜¯é˜¿é‡Œå·´å·´æä¾›çš„ç”¨äºå®ç°å¯¹è±¡å’Œjsonçš„è½¬æ¢å·¥å…·ç±»)</span>            <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>responseResult<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//è®¾ç½®å“åº”å¤´</span>            response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/json;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//å“åº”</span>            response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">//6.æ”¾è¡Œ</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ³¨å†Œé…ç½®æ‹¦æˆªå™¨</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>    <span class="token comment">//æ‹¦æˆªå™¨å¯¹è±¡</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">LoginCheckInterceptor</span> loginCheckInterceptor<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">//æ³¨å†Œè‡ªå®šä¹‰æ‹¦æˆªå™¨å¯¹è±¡</span>        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>loginCheckInterceptor<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç™»å½•æ ¡éªŒçš„æ‹¦æˆªå™¨ç¼–å†™å®Œæˆåï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥é‡æ–°å¯åŠ¨æœåŠ¡æ¥åšä¸€ä¸ªæµ‹è¯•ï¼š ï¼ˆ<strong>å…³é—­ç™»å½•æ ¡éªŒFilterè¿‡æ»¤å™¨</strong>ï¼‰</p><ul><li><p>æµ‹è¯•1ï¼šæœªç™»å½•æ˜¯å¦å¯ä»¥è®¿é—®éƒ¨é—¨ç®¡ç†é¡µé¢</p><p>é¦–å…ˆå…³é—­æµè§ˆå™¨ï¼Œé‡æ–°æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨åœ°å€æ ä¸­è¾“å…¥ï¼š<a href="http://localhost:9528/#/system/dept">http://localhost:9528/#/system/dept</a></p><p>ç”±äºç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œæ ¡éªŒæœºåˆ¶è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œå‰ç«¯é¡µé¢æ ¹æ®è¿”å›çš„é”™è¯¯ä¿¡æ¯ç»“æœï¼Œè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢äº†</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051004777.png"></p></li><li><p>æµ‹è¯•2ï¼šå…ˆè¿›è¡Œç™»å½•æ“ä½œï¼Œå†è®¿é—®éƒ¨é—¨ç®¡ç†é¡µé¢</p><p>ç™»å½•æ ¡éªŒæˆåŠŸä¹‹åï¼Œå¯ä»¥æ­£å¸¸è®¿é—®ç›¸å…³ä¸šåŠ¡æ“ä½œé¡µé¢</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051004090.png"></p></li></ul><p>åˆ°æ­¤æˆ‘ä»¬ä¹Ÿå°±éªŒè¯äº†æ‰€å¼€å‘çš„ç™»å½•æ ¡éªŒçš„æ‹¦æˆªå™¨ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚ç™»å½•æ ¡éªŒçš„è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨å…¶ä¸­çš„ä¸€ç§å°±å¯ä»¥äº†ã€‚</p><h2 id="3-å¼‚å¸¸å¤„ç†"><a href="#3-å¼‚å¸¸å¤„ç†" class="headerlink" title="3. å¼‚å¸¸å¤„ç†"></a>3. å¼‚å¸¸å¤„ç†</h2><h3 id="3-1-å½“å‰é—®é¢˜"><a href="#3-1-å½“å‰é—®é¢˜" class="headerlink" title="3.1 å½“å‰é—®é¢˜"></a>3.1 å½“å‰é—®é¢˜</h3><p>ç™»å½•åŠŸèƒ½å’Œç™»å½•æ ¡éªŒåŠŸèƒ½æˆ‘ä»¬éƒ½å®ç°äº†ï¼Œä¸‹é¢æˆ‘ä»¬å­¦ä¹ ä¸‹ä»Šå¤©æœ€åä¸€å—æŠ€æœ¯ç‚¹ï¼šå¼‚å¸¸å¤„ç†ã€‚é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ç³»ç»Ÿå‡ºç°å¼‚å¸¸ä¹‹åä¼šå‘ç”Ÿä»€ä¹ˆç°è±¡ï¼Œå†æ¥ä»‹ç»å¼‚å¸¸å¤„ç†çš„æ–¹æ¡ˆã€‚</p><p>æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ç³»ç»Ÿä¸­çš„æ–°å¢éƒ¨é—¨æ“ä½œï¼Œç³»ç»Ÿä¸­å·²ç»æœ‰äº† â€œå°±ä¸šéƒ¨â€ è¿™ä¸ªéƒ¨é—¨ï¼Œæˆ‘ä»¬å†æ¥å¢åŠ ä¸€ä¸ªå°±ä¸šéƒ¨ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆç°è±¡ã€‚</p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051004398.png" alt="image-20230112125651073" style="zoom: 80%;">   <p>ç‚¹å‡»ç¡®å®šä¹‹åï¼Œçª—å£å…³é—­äº†ï¼Œé¡µé¢æ²¡æœ‰ä»»ä½•ååº”ï¼Œå°±ä¸šéƒ¨ä¹Ÿæ²¡æœ‰æ·»åŠ ä¸Šã€‚ è€Œæ­¤æ—¶ï¼Œå¤§å®¶ä¼šå‘ç°ï¼Œç½‘ç»œè¯·æ±‚æŠ¥é”™äº†ã€‚</p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051004740.png" alt="image-20230112125737863" style="zoom:80%;"> <p>çŠ¶æ€ç ä¸º500ï¼Œè¡¨ç¤ºæœåŠ¡å™¨ç«¯å¼‚å¸¸ï¼Œæˆ‘ä»¬æ‰“å¼€ideaï¼Œæ¥çœ‹ä¸€ä¸‹ï¼ŒæœåŠ¡å™¨ç«¯å‡ºäº†ä»€ä¹ˆé—®é¢˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051004232.png"> </p><p>ä¸Šè¿°é”™è¯¯ä¿¡æ¯çš„å«ä¹‰æ˜¯ï¼Œdeptéƒ¨é—¨è¡¨çš„nameå­—æ®µçš„å€¼ å°±ä¸šéƒ¨ é‡å¤äº†ï¼Œå› ä¸ºåœ¨æ•°æ®åº“è¡¨deptä¸­å·²ç»æœ‰äº†å°±ä¸šéƒ¨ï¼Œæˆ‘ä»¬ä¹‹å‰è®¾è®¡è¿™å¼ è¡¨æ—¶ï¼Œä¸ºnameå­—æ®µå»ºè®®äº†å”¯ä¸€çº¦æŸï¼Œæ‰€ä»¥è¯¥å­—æ®µçš„å€¼æ˜¯ä¸èƒ½é‡å¤çš„ã€‚</p><p>è€Œå½“æˆ‘ä»¬å†æ·»åŠ å°±ä¸šéƒ¨ï¼Œè¿™ä¸ªéƒ¨é—¨æ—¶ï¼Œå°±è¿åäº†å”¯ä¸€çº¦æŸï¼Œæ­¤æ—¶å°±ä¼šæŠ¥é”™ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å‡ºç°å¼‚å¸¸ä¹‹åï¼Œæœ€ç»ˆæœåŠ¡ç«¯ç»™å‰ç«¯å“åº”å›æ¥çš„æ•°æ®é•¿ä»€ä¹ˆæ ·ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051004571.png"> </p><p>å“åº”å›æ¥çš„æ•°æ®æ˜¯ä¸€ä¸ªJSONæ ¼å¼çš„æ•°æ®ã€‚ä½†è¿™ç§JSONæ ¼å¼çš„æ•°æ®è¿˜æ˜¯æˆ‘ä»¬å¼€å‘è§„èŒƒå½“ä¸­æ‰€æåˆ°çš„ç»Ÿä¸€å“åº”ç»“æœResultå—ï¼Ÿæ˜¾ç„¶å¹¶ä¸æ˜¯ã€‚ç”±äºè¿”å›çš„æ•°æ®ä¸ç¬¦åˆå¼€å‘è§„èŒƒï¼Œæ‰€ä»¥å‰ç«¯å¹¶ä¸èƒ½è§£æå‡ºå“åº”çš„JSONæ•°æ®ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æ€è€ƒçš„æ˜¯å‡ºç°å¼‚å¸¸ä¹‹åï¼Œå½“å‰æ¡ˆä¾‹é¡¹ç›®çš„å¼‚å¸¸æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿ</p><ul><li>ç­”æ¡ˆï¼šæ²¡æœ‰åšä»»ä½•çš„å¼‚å¸¸å¤„ç†</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051005300.png"></p><p>å½“æˆ‘ä»¬æ²¡æœ‰åšä»»ä½•çš„å¼‚å¸¸å¤„ç†æ—¶ï¼Œæˆ‘ä»¬ä¸‰å±‚æ¶æ„å¤„ç†å¼‚å¸¸çš„æ–¹æ¡ˆï¼š</p><ul><li>Mapperæ¥å£åœ¨æ“ä½œæ•°æ®åº“çš„æ—¶å€™å‡ºé”™äº†ï¼Œæ­¤æ—¶å¼‚å¸¸ä¼šå¾€ä¸ŠæŠ›(è°è°ƒç”¨Mapperå°±æŠ›ç»™è°)ï¼Œä¼šæŠ›ç»™serviceã€‚ </li><li>service ä¸­ä¹Ÿå­˜åœ¨å¼‚å¸¸äº†ï¼Œä¼šæŠ›ç»™controllerã€‚</li><li>è€Œåœ¨controllerå½“ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡æœ‰åšä»»ä½•çš„å¼‚å¸¸å¤„ç†ï¼Œæ‰€ä»¥æœ€ç»ˆå¼‚å¸¸ä¼šå†å¾€ä¸ŠæŠ›ã€‚æœ€ç»ˆæŠ›ç»™æ¡†æ¶ä¹‹åï¼Œæ¡†æ¶å°±ä¼šè¿”å›ä¸€ä¸ªJSONæ ¼å¼çš„æ•°æ®ï¼Œé‡Œé¢å°è£…çš„å°±æ˜¯é”™è¯¯çš„ä¿¡æ¯ï¼Œä½†æ˜¯æ¡†æ¶è¿”å›çš„JSONæ ¼å¼çš„æ•°æ®å¹¶ä¸ç¬¦åˆæˆ‘ä»¬çš„å¼€å‘è§„èŒƒã€‚</li></ul><h3 id="3-2-è§£å†³æ–¹æ¡ˆ"><a href="#3-2-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="3.2 è§£å†³æ–¹æ¡ˆ"></a>3.2 è§£å†³æ–¹æ¡ˆ</h3><p>é‚£ä¹ˆåœ¨ä¸‰å±‚æ„æ¶é¡¹ç›®ä¸­ï¼Œå‡ºç°äº†å¼‚å¸¸ï¼Œè¯¥å¦‚ä½•å¤„ç†?</p><ul><li>æ–¹æ¡ˆä¸€ï¼šåœ¨æ‰€æœ‰Controllerçš„æ‰€æœ‰æ–¹æ³•ä¸­è¿›è¡Œtryâ€¦catchå¤„ç†<ul><li>ç¼ºç‚¹ï¼šä»£ç è‡ƒè‚¿ï¼ˆä¸æ¨èï¼‰</li></ul></li><li>æ–¹æ¡ˆäºŒï¼šå…¨å±€å¼‚å¸¸å¤„ç†å™¨<ul><li>å¥½å¤„ï¼šç®€å•ã€ä¼˜é›…ï¼ˆæ¨èï¼‰</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051005943.png"></p><h3 id="3-3-å…¨å±€å¼‚å¸¸å¤„ç†å™¨"><a href="#3-3-å…¨å±€å¼‚å¸¸å¤„ç†å™¨" class="headerlink" title="3.3 å…¨å±€å¼‚å¸¸å¤„ç†å™¨"></a>3.3 å…¨å±€å¼‚å¸¸å¤„ç†å™¨</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241205211433712.png" alt="å…¨å±€å¼‚å¸¸å¤„ç†å™¨"></p><p>æˆ‘ä»¬è¯¥æ€ä¹ˆæ ·å®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Ÿ</p><ul><li>å®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†å™¨éå¸¸ç®€å•ï¼Œå°±æ˜¯å®šä¹‰ä¸€ä¸ªç±»ï¼Œåœ¨ç±»ä¸ŠåŠ ä¸Šä¸€ä¸ªæ³¨è§£@RestControllerAdviceï¼ŒåŠ ä¸Šè¿™ä¸ªæ³¨è§£å°±ä»£è¡¨æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å¼‚å¸¸å¤„ç†å™¨ã€‚</li><li>åœ¨å…¨å±€å¼‚å¸¸å¤„ç†å™¨å½“ä¸­ï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ªæ–¹æ³•æ¥æ•è·å¼‚å¸¸ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸Šéœ€è¦åŠ ä¸Šæ³¨è§£@ExceptionHandlerã€‚é€šè¿‡@ExceptionHandleræ³¨è§£å½“ä¸­çš„valueå±æ€§æ¥æŒ‡å®šæˆ‘ä»¬è¦æ•è·çš„æ˜¯å“ªä¸€ç±»å‹çš„å¼‚å¸¸ã€‚</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestControllerAdvice</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionHandler</span> <span class="token punctuation">{</span>    <span class="token comment">//å¤„ç†å¼‚å¸¸</span>    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">//æŒ‡å®šèƒ½å¤Ÿå¤„ç†çš„å¼‚å¸¸ç±»å‹</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">ex</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ‰“å°å †æ ˆä¸­çš„å¼‚å¸¸ä¿¡æ¯</span>        <span class="token comment">//æ•è·åˆ°å¼‚å¸¸ä¹‹åï¼Œå“åº”ä¸€ä¸ªæ ‡å‡†çš„Result</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"å¯¹ä¸èµ·,æ“ä½œå¤±è´¥,è¯·è”ç³»ç®¡ç†å‘˜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>@RestControllerAdvice = @ControllerAdvice + @ResponseBody</p><p>å¤„ç†å¼‚å¸¸çš„æ–¹æ³•è¿”å›å€¼ä¼šè½¬æ¢ä¸ºjsonåå†å“åº”ç»™å‰ç«¯</p></blockquote><p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œå†æ¥æµ‹è¯•ä¸€ä¸‹æ·»åŠ éƒ¨é—¨è¿™ä¸ªæ“ä½œï¼Œæˆ‘ä»¬ä¾ç„¶æ·»åŠ å·²å­˜åœ¨çš„ â€œå°±ä¸šéƒ¨â€ è¿™ä¸ªéƒ¨é—¨ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051005878.png"> </p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412051005571.png"> </p><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå‡ºç°å¼‚å¸¸ä¹‹åï¼Œå¼‚å¸¸å·²ç»è¢«å…¨å±€å¼‚å¸¸å¤„ç†å™¨æ•è·äº†ã€‚ç„¶åè¿”å›çš„é”™è¯¯ä¿¡æ¯ï¼Œè¢«å‰ç«¯ç¨‹åºæ­£å¸¸è§£æï¼Œç„¶åæç¤ºå‡ºäº†å¯¹åº”çš„é”™è¯¯æç¤ºä¿¡æ¯ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯å…¨å±€å¼‚å¸¸å¤„ç†å™¨çš„ä½¿ç”¨ï¼Œä¸»è¦æ¶‰åŠåˆ°ä¸¤ä¸ªæ³¨è§£ï¼š</p><ul><li>@RestControllerAdvice  //è¡¨ç¤ºå½“å‰ç±»ä¸ºå…¨å±€å¼‚å¸¸å¤„ç†å™¨</li><li>@ExceptionHandler  //æŒ‡å®šå¯ä»¥æ•è·å“ªç§ç±»å‹çš„å¼‚å¸¸è¿›è¡Œå¤„ç†</li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Filter </tag>
            
            <tag> Interceptor </tag>
            
            <tag> å…¨å±€å¼‚å¸¸å¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ¡ˆä¾‹ï¼ˆ1ï¼‰</title>
      <link href="/2024/12/04/springboot-an-li-1/"/>
      <url>/2024/12/04/springboot-an-li-1/</url>
      
        <content type="html"><![CDATA[<p>SpringBootWebæ¡ˆä¾‹</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241203184510006.png" alt="è§„èŒƒ"></p><p>å‰é¢æˆ‘ä»¬å·²ç»è®²è§£äº†Webå‰ç«¯å¼€å‘çš„åŸºç¡€çŸ¥è¯†ï¼Œä¹Ÿè®²è§£äº†Webåç«¯å¼€å‘çš„åŸºç¡€(HTTPåè®®ã€è¯·æ±‚å“åº”)ï¼Œå¹¶ä¸”ä¹Ÿè®²è§£äº†æ•°æ®åº“MySQLï¼Œä»¥åŠé€šè¿‡Mybatisæ¡†æ¶å¦‚ä½•æ¥å®Œæˆæ•°æ®åº“çš„åŸºæœ¬æ“ä½œã€‚ é‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹ï¼Œæ¥å°†å‰ç«¯å¼€å‘ã€åç«¯å¼€å‘ã€æ•°æ®åº“æ•´åˆèµ·æ¥ã€‚ è€Œè¿™ä¸ªæ¡ˆä¾‹å‘¢ï¼Œå°±æ˜¯æˆ‘ä»¬å‰é¢æåˆ°çš„Tliasæ™ºèƒ½å­¦ä¹ è¾…åŠ©ç³»ç»Ÿã€‚</p><blockquote><p><strong>ä»Šå¤©çš„ä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š</strong></p><ul><li>å‡†å¤‡å·¥ä½œ</li><li>éƒ¨é—¨ç®¡ç†</li><li>å‘˜å·¥ç®¡ç†</li></ul></blockquote><p>ä¸‹é¢æˆ‘ä»¬å°±è¿›å…¥åˆ°ä»Šå¤©çš„ç¬¬1ä¸ªå†…å®¹<code>å‡†å¤‡å·¥ä½œ</code>çš„å­¦ä¹ ã€‚</p><h2 id="1ã€å‡†å¤‡å·¥ä½œ"><a href="#1ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="1ã€å‡†å¤‡å·¥ä½œ"></a>1ã€å‡†å¤‡å·¥ä½œ</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241203183832215.png" alt="å‡†å¤‡"></p><p>å‡†å¤‡å·¥ä½œçš„å­¦ä¹ ï¼Œæˆ‘ä»¬å…ˆä»â€éœ€æ±‚â€å’Œâ€ç¯å¢ƒæ­å»ºâ€å¼€å§‹å…¥æ‰‹ã€‚</p><h3 id="1-1-éœ€æ±‚-ç¯å¢ƒæ­å»º"><a href="#1-1-éœ€æ±‚-ç¯å¢ƒæ­å»º" class="headerlink" title="1.1 éœ€æ±‚&amp;ç¯å¢ƒæ­å»º"></a>1.1 éœ€æ±‚&amp;ç¯å¢ƒæ­å»º</h3><h4 id="1-1-1-éœ€æ±‚è¯´æ˜"><a href="#1-1-1-éœ€æ±‚è¯´æ˜" class="headerlink" title="1.1.1 éœ€æ±‚è¯´æ˜"></a>1.1.1 éœ€æ±‚è¯´æ˜</h4><p><strong>1ã€éƒ¨é—¨ç®¡ç†</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213205503102.png"></p><p>éƒ¨é—¨ç®¡ç†åŠŸèƒ½å¼€å‘åŒ…æ‹¬ï¼š</p><ul><li>æŸ¥è¯¢éƒ¨é—¨åˆ—è¡¨</li><li>åˆ é™¤éƒ¨é—¨</li><li>æ–°å¢éƒ¨é—¨</li><li>ä¿®æ”¹éƒ¨é—¨</li></ul><p><strong>2ã€å‘˜å·¥ç®¡ç†</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213205737307.png"></p><p>å‘˜å·¥ç®¡ç†åŠŸèƒ½å¼€å‘åŒ…æ‹¬ï¼š</p><ul><li>æŸ¥è¯¢å‘˜å·¥åˆ—è¡¨(åˆ†é¡µã€æ¡ä»¶)</li><li>åˆ é™¤å‘˜å·¥</li><li>æ–°å¢å‘˜å·¥</li><li>ä¿®æ”¹å‘˜å·¥</li></ul><h4 id="1-1-2-ç¯å¢ƒæ­å»º"><a href="#1-1-2-ç¯å¢ƒæ­å»º" class="headerlink" title="1.1.2 ç¯å¢ƒæ­å»º"></a>1.1.2 ç¯å¢ƒæ­å»º</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213230710821.png"></p><p>æ­¥éª¤ï¼š</p><ol><li>å‡†å¤‡æ•°æ®åº“è¡¨(deptã€emp)</li><li>åˆ›å»ºspringbootå·¥ç¨‹ï¼Œå¼•å…¥å¯¹åº”çš„èµ·æ­¥ä¾èµ–ï¼ˆwebã€mybatisã€mysqlé©±åŠ¨ã€lombokï¼‰</li><li>é…ç½®æ–‡ä»¶application.propertiesä¸­å¼•å…¥mybatisçš„é…ç½®ä¿¡æ¯ï¼Œå‡†å¤‡å¯¹åº”çš„å®ä½“ç±»</li><li>å‡†å¤‡å¯¹åº”çš„Mapperã€Service(æ¥å£ã€å®ç°ç±»)ã€ControlleråŸºç¡€ç»“æ„</li></ol><p>ç¬¬1æ­¥ï¼šå‡†å¤‡æ•°æ®åº“è¡¨</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create database tlias;use tlias;-- éƒ¨é—¨ç®¡ç†create table dept(    id int unsigned primary key auto_increment comment 'ä¸»é”®ID',    name varchar(10) not null unique comment 'éƒ¨é—¨åç§°',    create_time datetime not null comment 'åˆ›å»ºæ—¶é—´',    update_time datetime not null comment 'ä¿®æ”¹æ—¶é—´') comment 'éƒ¨é—¨è¡¨';-- éƒ¨é—¨è¡¨æµ‹è¯•æ•°æ®insert into dept (id, name, create_time, update_time) values(1,'å­¦å·¥éƒ¨',now(),now()),(2,'æ•™ç ”éƒ¨',now(),now()),(3,'å’¨è¯¢éƒ¨',now(),now()), (4,'å°±ä¸šéƒ¨',now(),now()),(5,'äººäº‹éƒ¨',now(),now());-- å‘˜å·¥ç®¡ç†(å¸¦çº¦æŸ)create table emp (  id int unsigned primary key auto_increment comment 'ID',  username varchar(20) not null unique comment 'ç”¨æˆ·å',  password varchar(32) default '123456' comment 'å¯†ç ',  name varchar(10) not null comment 'å§“å',  gender tinyint unsigned not null comment 'æ€§åˆ«, è¯´æ˜: 1 ç”·, 2 å¥³',  image varchar(300) comment 'å›¾åƒ',  job tinyint unsigned comment 'èŒä½, è¯´æ˜: 1 ç­ä¸»ä»»,2 è®²å¸ˆ, 3 å­¦å·¥ä¸»ç®¡, 4 æ•™ç ”ä¸»ç®¡, 5 å’¨è¯¢å¸ˆ',  entrydate date comment 'å…¥èŒæ—¶é—´',  dept_id int unsigned comment 'éƒ¨é—¨ID',  create_time datetime not null comment 'åˆ›å»ºæ—¶é—´',  update_time datetime not null comment 'ä¿®æ”¹æ—¶é—´') comment 'å‘˜å·¥è¡¨';-- å‘˜å·¥è¡¨æµ‹è¯•æ•°æ®INSERT INTO emp(id, username, password, name, gender, image, job, entrydate,dept_id, create_time, update_time) VALUES(1,'jinyong','123456','é‡‘åº¸',1,'1.jpg',4,'2000-01-01',2,now(),now()),(2,'zhangwuji','123456','å¼ æ— å¿Œ',1,'2.jpg',2,'2015-01-01',2,now(),now()),(3,'yangxiao','123456','æ¨é€',1,'3.jpg',2,'2008-05-01',2,now(),now()),(4,'weiyixiao','123456','éŸ¦ä¸€ç¬‘',1,'4.jpg',2,'2007-01-01',2,now(),now()),(5,'changyuchun','123456','å¸¸é‡æ˜¥',1,'5.jpg',2,'2012-12-05',2,now(),now()),(6,'xiaozhao','123456','å°æ˜­',2,'6.jpg',3,'2013-09-05',1,now(),now()),(7,'jixiaofu','123456','çºªæ™“èŠ™',2,'7.jpg',1,'2005-08-01',1,now(),now()),(8,'zhouzhiruo','123456','å‘¨èŠ·è‹¥',2,'8.jpg',1,'2014-11-09',1,now(),now()),(9,'dingminjun','123456','ä¸æ•å›',2,'9.jpg',1,'2011-03-11',1,now(),now()),(10,'zhaomin','123456','èµµæ•',2,'10.jpg',1,'2013-09-05',1,now(),now()),(11,'luzhangke','123456','é¹¿æ–å®¢',1,'11.jpg',5,'2007-02-01',3,now(),now()),(12,'hebiweng','123456','é¹¤ç¬”ç¿',1,'12.jpg',5,'2008-08-18',3,now(),now()),(13,'fangdongbai','123456','æ–¹ä¸œç™½',1,'13.jpg',5,'2012-11-01',3,now(),now()),(14,'zhangsanfeng','123456','å¼ ä¸‰ä¸°',1,'14.jpg',2,'2002-08-01',2,now(),now()),(15,'yulianzhou','123456','ä¿è²èˆŸ',1,'15.jpg',2,'2011-05-01',2,now(),now()),(16,'songyuanqiao','123456','å®‹è¿œæ¡¥',1,'16.jpg',2,'2007-01-01',2,now(),now()),(17,'chenyouliang','123456','é™ˆå‹è°…',1,'17.jpg',NULL,'2015-03-21',NULL,now(),now());<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¬¬2æ­¥ï¼šåˆ›å»ºä¸€ä¸ªSpringBootå·¥ç¨‹ï¼Œé€‰æ‹©å¼•å…¥å¯¹åº”çš„èµ·æ­¥ä¾èµ–ï¼ˆwebã€mybatisã€mysqlé©±åŠ¨ã€lombokï¼‰ (ç‰ˆæœ¬é€‰æ‹©2.7.5ç‰ˆæœ¬ï¼Œå¯ä»¥åˆ›å»ºå®Œæ¯•ä¹‹åï¼Œåœ¨pom.xmlæ–‡ä»¶ä¸­æ›´æ”¹ç‰ˆæœ¬å·)</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213221142985.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213221408420.png"></p><p> ç”Ÿæˆçš„pom.xmlæ–‡ä»¶ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>tlias-web-management<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>tlias-web-management<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Demo project for Spring Boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span class="token punctuation">&gt;</span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">&gt;</span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>tlias-web-management<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>tlias-web-management<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Demo project for Spring Boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- webèµ·æ­¥ä¾èµ– --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- ä¿ç•™ä¸€ä¸ªç‰ˆæœ¬çš„ logback-classic --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-classic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- ä¿ç•™ä¸€ä¸ªåˆé€‚çš„ç‰ˆæœ¬ --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- knife4j ä¾èµ– --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.xiaoymin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>knife4j-openapi2-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.4.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- mybatis ä¾èµ– --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- mysql é©±åŠ¨ --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- lombok --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- Spring Boot æµ‹è¯•ä¾èµ– --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span class="token punctuation">&gt;</span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">&gt;</span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ›å»ºé¡¹ç›®å·¥ç¨‹ç›®å½•ç»“æ„ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213222039985.png"></p><p>ç¬¬3æ­¥ï¼šé…ç½®æ–‡ä»¶application.propertiesä¸­å¼•å…¥mybatisçš„é…ç½®ä¿¡æ¯ï¼Œå‡†å¤‡å¯¹åº”çš„å®ä½“ç±»</p><ul><li>application.properties ï¼ˆç›´æ¥æŠŠä¹‹å‰é¡¹ç›®ä¸­çš„å¤åˆ¶è¿‡æ¥ï¼‰</li></ul><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">#æ•°æ®åº“è¿æ¥</span><span class="token key attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span><span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/tlias</span><span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span><span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span><span class="token comment">#å¼€å¯mybatisçš„æ—¥å¿—è¾“å‡º</span><span class="token key attr-name">mybatis.configuration.log-impl</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.ibatis.logging.stdout.StdOutImpl</span><span class="token comment">#å¼€å¯æ•°æ®åº“è¡¨å­—æ®µ åˆ° å®ä½“ç±»å±æ€§çš„é©¼å³°æ˜ å°„</span><span class="token key attr-name">mybatis.configuration.map-underscore-to-camel-case</span><span class="token punctuation">=</span><span class="token value attr-value">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å®ä½“ç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*éƒ¨é—¨ç±»*/</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dept</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> createTime<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> updateTime<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*å‘˜å·¥ç±»*/</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Emp</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Short</span> gender<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> image<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Short</span> job<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">LocalDate</span> entrydate<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> deptId<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> createTime<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> updateTime<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¬¬4æ­¥ï¼šå‡†å¤‡å¯¹åº”çš„Mapperã€Service(æ¥å£ã€å®ç°ç±»)ã€ControlleråŸºç¡€ç»“æ„</p><p>æ•°æ®è®¿é—®å±‚ï¼š</p><ul><li>DeptMapper</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptMapper</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>EmpMapper</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸šåŠ¡å±‚ï¼š</p><ul><li>DeptService</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span><span class="token comment">//éƒ¨é—¨ä¸šåŠ¡è§„åˆ™</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>DeptServiceImpl</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span><span class="token comment">//éƒ¨é—¨ä¸šåŠ¡å®ç°ç±»</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>EmpService</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span><span class="token comment">//å‘˜å·¥ä¸šåŠ¡è§„åˆ™</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>EmpServiceImpl</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">EmpService</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span><span class="token comment">//å‘˜å·¥ä¸šåŠ¡å®ç°ç±»</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ§åˆ¶å±‚ï¼š</p><ul><li>DeptController</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token comment">//éƒ¨é—¨ç®¡ç†æ§åˆ¶å™¨</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptController</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>EmpController</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token comment">//å‘˜å·¥ç®¡ç†æ§åˆ¶å™¨</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpController</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é¡¹ç›®å·¥ç¨‹ç»“æ„ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213224927868.png"></p><h3 id="1-2-å¼€å‘è§„èŒƒ"><a href="#1-2-å¼€å‘è§„èŒƒ" class="headerlink" title="1.2 å¼€å‘è§„èŒƒ"></a>1.2 å¼€å‘è§„èŒƒ</h3><p>äº†è§£å®Œéœ€æ±‚ä¹Ÿå®Œæˆäº†ç¯å¢ƒæ­å»ºäº†ï¼Œæˆ‘ä»¬ä¸‹é¢å¼€å§‹å­¦ä¹ å¼€å‘çš„ä¸€äº›è§„èŒƒã€‚</p><p>å¼€å‘è§„èŒƒæˆ‘ä»¬ä¸»è¦ä»ä»¥ä¸‹å‡ æ–¹é¢ä»‹ç»ï¼š</p><p><strong>1ã€å¼€å‘è§„èŒƒ-REST</strong></p><p>æˆ‘ä»¬çš„æ¡ˆä¾‹æ˜¯åŸºäºå½“å‰æœ€ä¸ºä¸»æµçš„å‰åç«¯åˆ†ç¦»æ¨¡å¼è¿›è¡Œå¼€å‘ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213230911102.png"></p><p>åœ¨å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸­ï¼Œå‰åç«¯å¼€å‘äººå‘˜éƒ½éœ€è¦æ ¹æ®æå‰å®šä¹‰å¥½çš„æ¥å£æ–‡æ¡£ï¼Œæ¥è¿›è¡Œå‰åç«¯åŠŸèƒ½çš„å¼€å‘ã€‚</p><blockquote><p>åç«¯å¼€å‘äººå‘˜ï¼šå¿…é¡»ä¸¥æ ¼éµå®ˆæä¾›çš„æ¥å£æ–‡æ¡£è¿›è¡Œåç«¯åŠŸèƒ½å¼€å‘ï¼ˆä¿éšœå¼€å‘çš„åŠŸèƒ½å¯ä»¥å’Œå‰ç«¯å¯¹æ¥ï¼‰</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213231519551.png"></p></blockquote><p>è€Œåœ¨å‰åç«¯è¿›è¡Œäº¤äº’çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åŸºäºå½“å‰ä¸»æµçš„RESTé£æ ¼çš„APIæ¥å£è¿›è¡Œäº¤äº’ã€‚</p><p>ä»€ä¹ˆæ˜¯RESTé£æ ¼å‘¢?</p><ul><li>RESTï¼ˆRepresentational State Transferï¼‰ï¼Œè¡¨è¿°æ€§çŠ¶æ€è½¬æ¢ï¼Œå®ƒæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ã€‚</li></ul><p><strong>ä¼ ç»ŸURLé£æ ¼å¦‚ä¸‹ï¼š</strong></p><pre class="line-numbers language-uri" data-language="uri"><code class="language-uri"><span class="token scheme">http<span class="token scheme-delimiter">:</span></span><span class="token authority"><span class="token authority-delimiter">//</span><span class="token host">localhost</span><span class="token port-segment"><span class="token port-delimiter">:</span><span class="token port">8080</span></span></span><span class="token path"><span class="token path-separator">/</span>user<span class="token path-separator">/</span>getById</span><span class="token query"><span class="token query-delimiter">?</span><span class="token pair"><span class="token key">id</span>=<span class="token value">1</span></span></span>     GETï¼šæŸ¥è¯¢idä¸º1çš„ç”¨æˆ·<span class="token scheme">http<span class="token scheme-delimiter">:</span></span><span class="token authority"><span class="token authority-delimiter">//</span><span class="token host">localhost</span><span class="token port-segment"><span class="token port-delimiter">:</span><span class="token port">8080</span></span></span><span class="token path"><span class="token path-separator">/</span>user<span class="token path-separator">/</span>saveUser</span>         POSTï¼šæ–°å¢ç”¨æˆ·<span class="token scheme">http<span class="token scheme-delimiter">:</span></span><span class="token authority"><span class="token authority-delimiter">//</span><span class="token host">localhost</span><span class="token port-segment"><span class="token port-delimiter">:</span><span class="token port">8080</span></span></span><span class="token path"><span class="token path-separator">/</span>user<span class="token path-separator">/</span>updateUser</span>       POSTï¼šä¿®æ”¹ç”¨æˆ·<span class="token scheme">http<span class="token scheme-delimiter">:</span></span><span class="token authority"><span class="token authority-delimiter">//</span><span class="token host">localhost</span><span class="token port-segment"><span class="token port-delimiter">:</span><span class="token port">8080</span></span></span><span class="token path"><span class="token path-separator">/</span>user<span class="token path-separator">/</span>deleteUser</span><span class="token query"><span class="token query-delimiter">?</span><span class="token pair"><span class="token key">id</span>=<span class="token value">1</span></span></span>  GETï¼šåˆ é™¤idä¸º1çš„ç”¨æˆ·<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬çœ‹åˆ°ï¼ŒåŸå§‹çš„ä¼ ç»ŸURLå‘¢ï¼Œå®šä¹‰æ¯”è¾ƒå¤æ‚ï¼Œè€Œä¸”å°†èµ„æºçš„è®¿é—®è¡Œä¸ºå¯¹å¤–æš´éœ²å‡ºæ¥äº†ã€‚</p><p><strong>åŸºäºRESTé£æ ¼URLå¦‚ä¸‹ï¼š</strong></p><pre class="line-numbers language-none"><code class="language-none">http://localhost:8080/users/1  GETï¼šæŸ¥è¯¢idä¸º1çš„ç”¨æˆ·http://localhost:8080/users    POSTï¼šæ–°å¢ç”¨æˆ·http://localhost:8080/users    PUTï¼šä¿®æ”¹ç”¨æˆ·http://localhost:8080/users/1  DELETEï¼šåˆ é™¤idä¸º1çš„ç”¨æˆ·<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­æ€»ç»“èµ·æ¥ï¼Œå°±ä¸€å¥è¯ï¼šé€šè¿‡URLå®šä½è¦æ“ä½œçš„èµ„æºï¼Œé€šè¿‡HTTPåŠ¨è¯(è¯·æ±‚æ–¹å¼)æ¥æè¿°å…·ä½“çš„æ“ä½œã€‚</p><p>åœ¨RESTé£æ ¼çš„URLä¸­ï¼Œé€šè¿‡å››ç§è¯·æ±‚æ–¹å¼ï¼Œæ¥æ“ä½œæ•°æ®çš„å¢åˆ æ”¹æŸ¥ã€‚ </p><ul><li>GET ï¼š æŸ¥è¯¢</li><li>POST ï¼šæ–°å¢</li><li>PUT ï¼šä¿®æ”¹</li><li>DELETE ï¼šåˆ é™¤</li></ul><p>æˆ‘ä»¬çœ‹åˆ°å¦‚æœæ˜¯åŸºäºRESTé£æ ¼ï¼Œå®šä¹‰URLï¼ŒURLå°†ä¼šæ›´åŠ ç®€æ´ã€æ›´åŠ è§„èŒƒã€æ›´åŠ ä¼˜é›…ã€‚</p><blockquote><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>RESTæ˜¯é£æ ¼ï¼Œæ˜¯çº¦å®šæ–¹å¼ï¼Œçº¦å®šä¸æ˜¯è§„å®šï¼Œå¯ä»¥æ‰“ç ´</li><li>æè¿°æ¨¡å—çš„åŠŸèƒ½é€šå¸¸ä½¿ç”¨å¤æ•°ï¼Œä¹Ÿå°±æ˜¯åŠ sçš„æ ¼å¼æ¥æè¿°ï¼Œè¡¨ç¤ºæ­¤ç±»èµ„æºï¼Œè€Œéå•ä¸ªèµ„æºã€‚å¦‚ï¼šusersã€empsã€booksâ€¦</li></ul></blockquote><p><strong>2ã€å¼€å‘è§„èŒƒ-ç»Ÿä¸€å“åº”ç»“æœ</strong></p><p>å‰åç«¯å·¥ç¨‹åœ¨è¿›è¡Œäº¤äº’æ—¶ï¼Œä½¿ç”¨ç»Ÿä¸€å“åº”ç»“æœ Resultã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">NoArgsConstructor</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Result</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> code<span class="token punctuation">;</span><span class="token comment">//å“åº”ç ï¼Œ1 ä»£è¡¨æˆåŠŸ; 0 ä»£è¡¨å¤±è´¥</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>  <span class="token comment">//å“åº”ä¿¡æ¯ æè¿°å­—ç¬¦ä¸²</span>    <span class="token keyword">private</span> <span class="token class-name">Object</span> data<span class="token punctuation">;</span> <span class="token comment">//è¿”å›çš„æ•°æ®</span>    <span class="token comment">//å¢åˆ æ”¹ æˆåŠŸå“åº”</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"success"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//æŸ¥è¯¢ æˆåŠŸå“åº”</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token class-name">Object</span> data<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"success"</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//å¤±è´¥å“åº”</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>msg<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>3ã€å¼€å‘æµç¨‹</strong></p><p>æˆ‘ä»¬åœ¨è¿›è¡ŒåŠŸèƒ½å¼€å‘æ—¶ï¼Œéƒ½æ˜¯æ ¹æ®å¦‚ä¸‹æµç¨‹è¿›è¡Œï¼š</p><ol><li><p>æŸ¥çœ‹é¡µé¢åŸå‹æ˜ç¡®éœ€æ±‚</p><ul><li>æ ¹æ®é¡µé¢åŸå‹å’Œéœ€æ±‚ï¼Œè¿›è¡Œè¡¨ç»“æ„è®¾è®¡ã€ç¼–å†™æ¥å£æ–‡æ¡£(å·²æä¾›)</li></ul></li><li><p>é˜…è¯»æ¥å£æ–‡æ¡£</p></li><li><p>æ€è·¯åˆ†æ</p></li><li><p>åŠŸèƒ½æ¥å£å¼€å‘</p><ul><li>å°±æ˜¯å¼€å‘åå°çš„ä¸šåŠ¡åŠŸèƒ½ï¼Œä¸€ä¸ªä¸šåŠ¡åŠŸèƒ½ï¼Œæˆ‘ä»¬ç§°ä¸ºä¸€ä¸ªæ¥å£</li></ul></li><li><p>åŠŸèƒ½æ¥å£æµ‹è¯•</p><ul><li>åŠŸèƒ½å¼€å‘å®Œæ¯•åï¼Œå…ˆé€šè¿‡Postmanè¿›è¡ŒåŠŸèƒ½æ¥å£æµ‹è¯•ï¼Œæµ‹è¯•é€šè¿‡åï¼Œå†å’Œå‰ç«¯è¿›è¡Œè”è°ƒæµ‹è¯•</li></ul></li><li><p>å‰åç«¯è”è°ƒæµ‹è¯•</p><ul><li>å’Œå‰ç«¯å¼€å‘äººå‘˜å¼€å‘å¥½çš„å‰ç«¯å·¥ç¨‹ä¸€èµ·æµ‹è¯•</li></ul></li></ol><h2 id="2ã€éƒ¨é—¨ç®¡ç†"><a href="#2ã€éƒ¨é—¨ç®¡ç†" class="headerlink" title="2ã€éƒ¨é—¨ç®¡ç†"></a>2ã€éƒ¨é—¨ç®¡ç†</h2><p>æˆ‘ä»¬æŒ‰ç…§å‰é¢å­¦ä¹ çš„å¼€å‘æµç¨‹ï¼Œå¼€å§‹å®ŒæˆåŠŸèƒ½å¼€å‘ã€‚é¦–å…ˆæŒ‰ç…§ä¹‹å‰åˆ†æçš„éœ€æ±‚ï¼Œå®Œæˆ<code>éƒ¨é—¨ç®¡ç†</code>çš„åŠŸèƒ½å¼€å‘ã€‚</p><p>å¼€å‘çš„éƒ¨é—¨ç®¡ç†åŠŸèƒ½åŒ…å«ï¼š</p><ol><li>æŸ¥è¯¢éƒ¨é—¨</li><li>åˆ é™¤éƒ¨é—¨</li><li>æ–°å¢éƒ¨é—¨</li><li>æ›´æ–°éƒ¨é—¨ï¼ˆä¸è®²è§£ï¼Œè‡ªå·±ç‹¬ç«‹å®Œæˆï¼‰</li></ol><h3 id="2-1-æŸ¥è¯¢éƒ¨é—¨"><a href="#2-1-æŸ¥è¯¢éƒ¨é—¨" class="headerlink" title="2.1 æŸ¥è¯¢éƒ¨é—¨"></a>2.1 æŸ¥è¯¢éƒ¨é—¨</h3><h4 id="2-1-1-åŸå‹å’Œéœ€æ±‚"><a href="#2-1-1-åŸå‹å’Œéœ€æ±‚" class="headerlink" title="2.1.1 åŸå‹å’Œéœ€æ±‚"></a>2.1.1 åŸå‹å’Œéœ€æ±‚</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213234154699.png"></p><blockquote><p>æŸ¥è¯¢çš„éƒ¨é—¨çš„ä¿¡æ¯ï¼šéƒ¨é—¨IDã€éƒ¨é—¨åç§°ã€ä¿®æ”¹æ—¶é—´</p><p>é€šè¿‡é¡µé¢åŸå‹ä»¥åŠéœ€æ±‚æè¿°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œéƒ¨é—¨æŸ¥è¯¢ï¼Œæ˜¯ä¸éœ€è¦è€ƒè™‘åˆ†é¡µæ“ä½œçš„ã€‚</p></blockquote><h4 id="2-1-2-æ¥å£æ–‡æ¡£"><a href="#2-1-2-æ¥å£æ–‡æ¡£" class="headerlink" title="2.1.2 æ¥å£æ–‡æ¡£"></a>2.1.2 æ¥å£æ–‡æ¡£</h4><p><strong>éƒ¨é—¨åˆ—è¡¨æŸ¥è¯¢</strong></p><ul><li><p>åŸºæœ¬ä¿¡æ¯</p><pre class="line-numbers language-none"><code class="language-none">è¯·æ±‚è·¯å¾„ï¼š/deptsè¯·æ±‚æ–¹å¼ï¼šGETæ¥å£æè¿°ï¼šè¯¥æ¥å£ç”¨äºéƒ¨é—¨åˆ—è¡¨æ•°æ®æŸ¥è¯¢<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>è¯·æ±‚å‚æ•°</p><p>æ— </p></li><li><p>å“åº”æ•°æ®</p><p>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>code</td><td>number</td><td>å¿…é¡»</td><td>å“åº”ç ï¼Œ1 ä»£è¡¨æˆåŠŸï¼Œ0 ä»£è¡¨å¤±è´¥</td></tr><tr><td>msg</td><td>string</td><td>éå¿…é¡»</td><td>æç¤ºä¿¡æ¯</td></tr><tr><td>data</td><td>object[ ]</td><td>éå¿…é¡»</td><td>è¿”å›çš„æ•°æ®</td></tr><tr><td>|- id</td><td>number</td><td>éå¿…é¡»</td><td>id</td></tr><tr><td>|- name</td><td>string</td><td>éå¿…é¡»</td><td>éƒ¨é—¨åç§°</td></tr><tr><td>|- createTime</td><td>string</td><td>éå¿…é¡»</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>|- updateTime</td><td>string</td><td>éå¿…é¡»</td><td>ä¿®æ”¹æ—¶é—´</td></tr></tbody></table><p>å“åº”æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"code"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">"msg"</span><span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"å­¦å·¥éƒ¨"</span><span class="token punctuation">,</span>      <span class="token property">"createTime"</span><span class="token operator">:</span> <span class="token string">"2022-09-01T23:06:29"</span><span class="token punctuation">,</span>      <span class="token property">"updateTime"</span><span class="token operator">:</span> <span class="token string">"2022-09-01T23:06:29"</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"æ•™ç ”éƒ¨"</span><span class="token punctuation">,</span>      <span class="token property">"createTime"</span><span class="token operator">:</span> <span class="token string">"2022-09-01T23:06:29"</span><span class="token punctuation">,</span>      <span class="token property">"updateTime"</span><span class="token operator">:</span> <span class="token string">"2022-09-01T23:06:29"</span>    <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h4 id="2-1-3-æ€è·¯åˆ†æ"><a href="#2-1-3-æ€è·¯åˆ†æ" class="headerlink" title="2.1.3 æ€è·¯åˆ†æ"></a>2.1.3 æ€è·¯åˆ†æ</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213235157345.png"></p><h4 id="2-1-4-åŠŸèƒ½å¼€å‘"><a href="#2-1-4-åŠŸèƒ½å¼€å‘" class="headerlink" title="2.1.4 åŠŸèƒ½å¼€å‘"></a>2.1.4 åŠŸèƒ½å¼€å‘</h4><p>é€šè¿‡æŸ¥çœ‹æ¥å£æ–‡æ¡£ï¼šéƒ¨é—¨åˆ—è¡¨æŸ¥è¯¢</p><blockquote><p>è¯·æ±‚è·¯å¾„ï¼š/depts</p><p>è¯·æ±‚æ–¹å¼ï¼šGET</p><p>è¯·æ±‚å‚æ•°ï¼šæ— </p><p>å“åº”æ•°æ®ï¼šjsonæ ¼å¼</p></blockquote><p><strong>DeptController</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptService</span> deptService<span class="token punctuation">;</span>    <span class="token comment">//@RequestMapping(value = "/depts" , method = RequestMethod.GET)</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/depts"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨æ•°æ®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">&gt;</span></span> deptList <span class="token operator">=</span> deptService<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>deptList<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>@Slf4jæ³¨è§£æºç ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221214000909044.png"></p></blockquote><p><strong>DeptService</strong>ï¼ˆä¸šåŠ¡æ¥å£ï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æŸ¥è¯¢æ‰€æœ‰çš„éƒ¨é—¨æ•°æ®     * @return   å­˜å‚¨Deptå¯¹è±¡çš„é›†åˆ     */</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> <strong>DeptServiceImpl</strong>ï¼ˆä¸šåŠ¡å®ç°ç±»ï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptMapper</span> deptMapper<span class="token punctuation">;</span>        <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">&gt;</span></span> deptList <span class="token operator">=</span> deptMapper<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> deptList<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>DeptMapper</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptMapper</span> <span class="token punctuation">{</span>    <span class="token comment">//æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨æ•°æ®</span>    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select id, name, create_time, update_time from dept"</span><span class="token punctuation">)</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-1-5-åŠŸèƒ½æµ‹è¯•"><a href="#2-1-5-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="2.1.5 åŠŸèƒ½æµ‹è¯•"></a>2.1.5 åŠŸèƒ½æµ‹è¯•</h4><p>åŠŸèƒ½å¼€å‘å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯åŠ¨é¡¹ç›®ï¼Œç„¶åæ‰“å¼€postmanï¼Œå‘èµ·GETè¯·æ±‚ï¼Œè®¿é—® ï¼š<a href="http://localhost:8080/depts">http://localhost:8080/depts</a></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220904130315247.png"></p><blockquote><p>è¯´æ˜ï¼šåªè¦æŒ‰ç…§æ¥å£æ–‡æ¡£å¼€å‘åŠŸèƒ½æ¥å£ï¼Œå°±èƒ½ä¿è¯å‰åç«¯ç¨‹åºäº¤äº’</p><ul><li>åç«¯ï¼šä¸¥æ ¼éµå®ˆæ¥å£æ–‡æ¡£è¿›è¡ŒåŠŸèƒ½æ¥å£å¼€å‘</li><li>å‰ç«¯ï¼šä¸¥æ ¼éµå®ˆæ¥å£æ–‡æ¡£è®¿é—®åŠŸèƒ½æ¥å£</li></ul></blockquote><h3 id="2-3-åˆ é™¤éƒ¨é—¨"><a href="#2-3-åˆ é™¤éƒ¨é—¨" class="headerlink" title="2.3 åˆ é™¤éƒ¨é—¨"></a>2.3 åˆ é™¤éƒ¨é—¨</h3><p>æŸ¥è¯¢éƒ¨é—¨çš„åŠŸèƒ½æˆ‘ä»¬æå®šäº†ï¼Œä¸‹é¢æˆ‘ä»¬å¼€å§‹å®Œæˆ<code>åˆ é™¤éƒ¨é—¨</code>çš„åŠŸèƒ½å¼€å‘ã€‚</p><h4 id="2-3-1-éœ€æ±‚"><a href="#2-3-1-éœ€æ±‚" class="headerlink" title="2.3.1 éœ€æ±‚"></a>2.3.1 éœ€æ±‚</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220904132440220.png"></p><p>ç‚¹å‡»éƒ¨é—¨åˆ—è¡¨åé¢æ“ä½œæ çš„ â€œåˆ é™¤â€ æŒ‰é’®ï¼Œå°±å¯ä»¥åˆ é™¤è¯¥éƒ¨é—¨ä¿¡æ¯ã€‚ æ­¤æ—¶ï¼Œå‰ç«¯åªéœ€è¦ç»™æœåŠ¡ç«¯ä¼ é€’ä¸€ä¸ªIDå‚æ•°å°±å¯ä»¥äº†ã€‚ æˆ‘ä»¬ä»æ¥å£æ–‡æ¡£ä¸­ä¹Ÿå¯ä»¥çœ‹å¾—å‡ºæ¥ã€‚</p><h4 id="2-3-2-æ¥å£æ–‡æ¡£"><a href="#2-3-2-æ¥å£æ–‡æ¡£" class="headerlink" title="2.3.2 æ¥å£æ–‡æ¡£"></a>2.3.2 æ¥å£æ–‡æ¡£</h4><p><strong>åˆ é™¤éƒ¨é—¨</strong></p><ul><li><p>åŸºæœ¬ä¿¡æ¯</p><pre class="line-numbers language-none"><code class="language-none">è¯·æ±‚è·¯å¾„ï¼š/depts/{id}è¯·æ±‚æ–¹å¼ï¼šDELETEæ¥å£æè¿°ï¼šè¯¥æ¥å£ç”¨äºæ ¹æ®IDåˆ é™¤éƒ¨é—¨æ•°æ®<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>è¯·æ±‚å‚æ•°<br>å‚æ•°æ ¼å¼ï¼šè·¯å¾„å‚æ•°</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>id</td><td>number</td><td>å¿…é¡»</td><td>éƒ¨é—¨ID</td></tr></tbody></table><p>è¯·æ±‚å‚æ•°æ ·ä¾‹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">/depts/1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>å“åº”æ•°æ®<br>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>code</td><td>number</td><td>å¿…é¡»</td><td>å“åº”ç ï¼Œ1 ä»£è¡¨æˆåŠŸï¼Œ0 ä»£è¡¨å¤±è´¥</td></tr><tr><td>msg</td><td>string</td><td>éå¿…é¡»</td><td>æç¤ºä¿¡æ¯</td></tr><tr><td>data</td><td>object</td><td>éå¿…é¡»</td><td>è¿”å›çš„æ•°æ®</td></tr></tbody></table><p>å“åº”æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>    <span class="token property">"code"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>    <span class="token property">"msg"</span><span class="token operator">:</span><span class="token string">"success"</span><span class="token punctuation">,</span>    <span class="token property">"data"</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h4 id="2-3-3-æ€è·¯åˆ†æ"><a href="#2-3-3-æ€è·¯åˆ†æ" class="headerlink" title="2.3.3 æ€è·¯åˆ†æ"></a>2.3.3 æ€è·¯åˆ†æ</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221214102705490.png"></p><blockquote><p>æ¥å£æ–‡æ¡£è§„å®šï¼š</p><ul><li>å‰ç«¯è¯·æ±‚è·¯å¾„ï¼š/depts/{id}</li><li>å‰ç«¯è¯·æ±‚æ–¹å¼ï¼šDELETE</li></ul><p>é—®é¢˜1ï¼šæ€ä¹ˆåœ¨controllerä¸­æ¥æ”¶è¯·æ±‚è·¯å¾„ä¸­çš„è·¯å¾„å‚æ•°ï¼Ÿ</p><pre class="line-numbers language-none"><code class="language-none">@PathVariable<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>é—®é¢˜2ï¼šå¦‚ä½•é™å®šè¯·æ±‚æ–¹å¼æ˜¯deleteï¼Ÿ</p><pre class="line-numbers language-none"><code class="language-none">@DeleteMapping<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><h4 id="2-3-4-åŠŸèƒ½å¼€å‘"><a href="#2-3-4-åŠŸèƒ½å¼€å‘" class="headerlink" title="2.3.4 åŠŸèƒ½å¼€å‘"></a>2.3.4 åŠŸèƒ½å¼€å‘</h4><p>é€šè¿‡æŸ¥çœ‹æ¥å£æ–‡æ¡£ï¼šåˆ é™¤éƒ¨é—¨</p><blockquote><p>è¯·æ±‚è·¯å¾„ï¼š/depts/{id}</p><p>è¯·æ±‚æ–¹å¼ï¼šDELETE</p><p>è¯·æ±‚å‚æ•°ï¼šè·¯å¾„å‚æ•° {id}</p><p>å“åº”æ•°æ®ï¼šjsonæ ¼å¼</p></blockquote><p><strong>DeptController</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptService</span> deptService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">"/depts/{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//æ—¥å¿—è®°å½•</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"æ ¹æ®idåˆ é™¤éƒ¨é—¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨serviceå±‚åŠŸèƒ½</span>        deptService<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å“åº”</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>DeptService</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æ ¹æ®idåˆ é™¤éƒ¨é—¨     * @param id    éƒ¨é—¨id     */</span>    <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>DeptServiceImpl</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptMapper</span> deptMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//è°ƒç”¨æŒä¹…å±‚åˆ é™¤åŠŸèƒ½</span>        deptMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>DeptMapper</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptMapper</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æ ¹æ®idåˆ é™¤éƒ¨é—¨ä¿¡æ¯     * @param id   éƒ¨é—¨id     */</span>    <span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">"delete from dept where id = #{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">void</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-3-5-åŠŸèƒ½æµ‹è¯•"><a href="#2-3-5-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="2.3.5 åŠŸèƒ½æµ‹è¯•"></a>2.3.5 åŠŸèƒ½æµ‹è¯•</h4><p>åˆ é™¤åŠŸèƒ½å¼€å‘å®Œæˆåï¼Œé‡æ–°å¯åŠ¨é¡¹ç›®ï¼Œä½¿ç”¨postmanï¼Œå‘èµ·DELETEè¯·æ±‚ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221214112451600.png"></p><h3 id="2-4-æ–°å¢éƒ¨é—¨"><a href="#2-4-æ–°å¢éƒ¨é—¨" class="headerlink" title="2.4 æ–°å¢éƒ¨é—¨"></a>2.4 æ–°å¢éƒ¨é—¨</h3><p>æˆ‘ä»¬å‰é¢å·²å®Œæˆäº†<code>æŸ¥è¯¢éƒ¨é—¨</code>ã€<code>åˆ é™¤éƒ¨é—¨</code>ä¸¤ä¸ªåŠŸèƒ½ï¼Œä¹Ÿç†Ÿæ‚‰äº†å¼€å‘çš„æµç¨‹ã€‚ä¸‹é¢æˆ‘ä»¬ç»§ç»­å®Œæˆ<code>æ–°å¢éƒ¨é—¨</code>åŠŸèƒ½ã€‚</p><h4 id="2-4-1-éœ€æ±‚"><a href="#2-4-1-éœ€æ±‚" class="headerlink" title="2.4.1 éœ€æ±‚"></a>2.4.1 éœ€æ±‚</h4><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220904150427982.png" style="zoom:80%;"><p>ç‚¹å‡» â€œæ–°å¢éƒ¨é—¨â€ æŒ‰é’®ï¼Œå¼¹å‡ºæ–°å¢éƒ¨é—¨å¯¹è¯æ¡†ï¼Œè¾“å…¥éƒ¨é—¨åç§°ï¼Œç‚¹å‡» â€œä¿å­˜â€ ï¼Œå°†éƒ¨é—¨ä¿¡æ¯ä¿å­˜åˆ°æ•°æ®åº“ã€‚</p><h4 id="2-4-2-æ¥å£æ–‡æ¡£"><a href="#2-4-2-æ¥å£æ–‡æ¡£" class="headerlink" title="2.4.2 æ¥å£æ–‡æ¡£"></a>2.4.2 æ¥å£æ–‡æ¡£</h4><p><strong>æ·»åŠ éƒ¨é—¨</strong></p><ul><li><p>åŸºæœ¬ä¿¡æ¯</p><pre class="line-numbers language-none"><code class="language-none">è¯·æ±‚è·¯å¾„ï¼š/deptsè¯·æ±‚æ–¹å¼ï¼šPOSTæ¥å£æè¿°ï¼šè¯¥æ¥å£ç”¨äºæ·»åŠ éƒ¨é—¨æ•°æ®<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>è¯·æ±‚å‚æ•°</p><p>æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>name</td><td>string</td><td>å¿…é¡»</td><td>éƒ¨é—¨åç§°</td></tr></tbody></table><p>è¯·æ±‚å‚æ•°æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"æ•™ç ”éƒ¨"</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>å“åº”æ•°æ®</p><p>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>code</td><td>number</td><td>å¿…é¡»</td><td>å“åº”ç ï¼Œ1 ä»£è¡¨æˆåŠŸï¼Œ0 ä»£è¡¨å¤±è´¥</td></tr><tr><td>msg</td><td>string</td><td>éå¿…é¡»</td><td>æç¤ºä¿¡æ¯</td></tr><tr><td>data</td><td>object</td><td>éå¿…é¡»</td><td>è¿”å›çš„æ•°æ®</td></tr></tbody></table><p>å“åº”æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>    <span class="token property">"code"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>    <span class="token property">"msg"</span><span class="token operator">:</span><span class="token string">"success"</span><span class="token punctuation">,</span>    <span class="token property">"data"</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h4 id="2-4-3-æ€è·¯åˆ†æ"><a href="#2-4-3-æ€è·¯åˆ†æ" class="headerlink" title="2.4.3 æ€è·¯åˆ†æ"></a>2.4.3 æ€è·¯åˆ†æ</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221214115519648.png"></p><blockquote><p>æ¥å£æ–‡æ¡£è§„å®šï¼š</p><ul><li>å‰ç«¯è¯·æ±‚è·¯å¾„ï¼š/depts</li><li>å‰ç«¯è¯·æ±‚æ–¹å¼ï¼šPOST</li><li>å‰ç«¯è¯·æ±‚å‚æ•° (Jsonæ ¼å¼)ï¼š{ â€œnameâ€: â€œæ•™ç ”éƒ¨â€ }</li></ul><p>é—®é¢˜1ï¼šå¦‚ä½•é™å®šè¯·æ±‚æ–¹å¼æ˜¯POSTï¼Ÿ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@PostMapping</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>é—®é¢˜2ï¼šæ€ä¹ˆåœ¨controllerä¸­æ¥æ”¶jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°ï¼Ÿ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestBody</span>  <span class="token comment">//æŠŠå‰ç«¯ä¼ é€’çš„jsonæ•°æ®å¡«å……åˆ°å®ä½“ç±»ä¸­</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><h4 id="2-4-4-åŠŸèƒ½å¼€å‘"><a href="#2-4-4-åŠŸèƒ½å¼€å‘" class="headerlink" title="2.4.4 åŠŸèƒ½å¼€å‘"></a>2.4.4 åŠŸèƒ½å¼€å‘</h4><p>é€šè¿‡æŸ¥çœ‹æ¥å£æ–‡æ¡£ï¼šæ–°å¢éƒ¨é—¨</p><blockquote><p>è¯·æ±‚è·¯å¾„ï¼š/depts</p><p>è¯·æ±‚æ–¹å¼ï¼šPOST</p><p>è¯·æ±‚å‚æ•°ï¼šjsonæ ¼å¼ </p><p>å“åº”æ•°æ®ï¼šjsonæ ¼å¼</p></blockquote><p><strong>DeptController</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptService</span> deptService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/depts"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Dept</span> dept<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//è®°å½•æ—¥å¿—</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"æ–°å¢éƒ¨é—¨ï¼š{}"</span><span class="token punctuation">,</span>dept<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨serviceå±‚æ·»åŠ åŠŸèƒ½</span>        deptService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>dept<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å“åº”</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>DeptService</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æ–°å¢éƒ¨é—¨     * @param dept  éƒ¨é—¨å¯¹è±¡     */</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>DeptServiceImpl</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptMapper</span> deptMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//è¡¥å…¨éƒ¨é—¨æ•°æ®</span>        dept<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        dept<span class="token punctuation">.</span><span class="token function">setUpdateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨æŒä¹…å±‚å¢åŠ åŠŸèƒ½</span>        deptMapper<span class="token punctuation">.</span><span class="token function">inser</span><span class="token punctuation">(</span>dept<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>DeptMapper</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptMapper</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">"insert into dept (name, create_time, update_time) values (#{name},#{createTime},#{updateTime})"</span><span class="token punctuation">)</span>    <span class="token keyword">void</span> <span class="token function">inser</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-4-5-åŠŸèƒ½æµ‹è¯•"><a href="#2-4-5-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="2.4.5 åŠŸèƒ½æµ‹è¯•"></a>2.4.5 åŠŸèƒ½æµ‹è¯•</h4><p>æ–°å¢åŠŸèƒ½å¼€å‘å®Œæˆåï¼Œé‡æ–°å¯åŠ¨é¡¹ç›®ï¼Œä½¿ç”¨postmanï¼Œå‘èµ·POSTè¯·æ±‚ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221214153758708.png"></p><h4 id="2-4-7-è¯·æ±‚è·¯å¾„"><a href="#2-4-7-è¯·æ±‚è·¯å¾„" class="headerlink" title="2.4.7 è¯·æ±‚è·¯å¾„"></a>2.4.7 è¯·æ±‚è·¯å¾„</h4><p>æˆ‘ä»¬éƒ¨é—¨ç®¡ç†çš„<code>æŸ¥è¯¢</code>ã€<code>åˆ é™¤</code>ã€<code>æ–°å¢</code>åŠŸèƒ½å…¨éƒ¨å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦å¯¹controllerå±‚çš„ä»£ç è¿›è¡Œä¼˜åŒ–ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ç›®å‰controllerå±‚ä»£ç ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215110553435.png"></p><blockquote><p>ä»¥ä¸Šä¸‰ä¸ªæ–¹æ³•ä¸Šçš„è¯·æ±‚è·¯å¾„ï¼Œå­˜åœ¨ä¸€ä¸ªå…±åŒç‚¹ï¼šéƒ½æ˜¯ä»¥<code>/depts</code>ä½œä¸ºå¼€å¤´ã€‚ï¼ˆé‡å¤äº†ï¼‰</p></blockquote><p>åœ¨Springå½“ä¸­ä¸ºäº†ç®€åŒ–è¯·æ±‚è·¯å¾„çš„å®šä¹‰ï¼Œå¯ä»¥æŠŠå…¬å…±çš„è¯·æ±‚è·¯å¾„ï¼Œç›´æ¥æŠ½å–åˆ°ç±»ä¸Šï¼Œåœ¨ç±»ä¸ŠåŠ ä¸€ä¸ªæ³¨è§£@RequestMappingï¼Œå¹¶æŒ‡å®šè¯·æ±‚è·¯å¾„â€/deptsâ€ã€‚ä»£ç å‚ç…§å¦‚ä¸‹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215111110219.png"></p><blockquote><p>ä¼˜åŒ–å‰åçš„å¯¹æ¯”ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215111309042.png"></p></blockquote><blockquote><p>æ³¨æ„äº‹é¡¹ï¼šä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚è·¯å¾„ï¼Œåº”è¯¥æ˜¯ç±»ä¸Š@RequestMappingçš„valueå±æ€§ + æ–¹æ³•ä¸Šçš„ @RequestMappingçš„valueå±æ€§</p></blockquote><h2 id="3-å‘˜å·¥ç®¡ç†"><a href="#3-å‘˜å·¥ç®¡ç†" class="headerlink" title="3. å‘˜å·¥ç®¡ç†"></a>3. å‘˜å·¥ç®¡ç†</h2><p>å®Œæˆäº†éƒ¨é—¨ç®¡ç†çš„åŠŸèƒ½å¼€å‘ä¹‹åï¼Œæˆ‘ä»¬è¿›å…¥åˆ°ä¸‹ä¸€ç¯èŠ‚å‘˜å·¥ç®¡ç†åŠŸèƒ½çš„å¼€å‘ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215142107329.png"></p><p>åŸºäºä»¥ä¸ŠåŸå‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå‘˜å·¥ç®¡ç†åŠŸèƒ½åˆ†ä¸ºï¼š</p><ol><li>åˆ†é¡µæŸ¥è¯¢ï¼ˆä»Šå¤©å®Œæˆï¼‰</li><li>å¸¦æ¡ä»¶çš„åˆ†é¡µæŸ¥è¯¢ï¼ˆä»Šå¤©å®Œæˆï¼‰</li><li>åˆ é™¤å‘˜å·¥ï¼ˆä»Šå¤©å®Œæˆï¼‰</li><li>æ–°å¢å‘˜å·¥ï¼ˆåç»­å®Œæˆï¼‰</li><li>ä¿®æ”¹å‘˜å·¥ï¼ˆåç»­å®Œæˆï¼‰</li></ol><p>é‚£ä¸‹é¢æˆ‘ä»¬å°±å…ˆä»åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½å¼€å§‹å­¦ä¹ ã€‚</p><h3 id="3-1-åˆ†é¡µæŸ¥è¯¢"><a href="#3-1-åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="3.1 åˆ†é¡µæŸ¥è¯¢"></a>3.1 åˆ†é¡µæŸ¥è¯¢</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241204162214986.png"></p><h4 id="3-1-1-åŸºç¡€åˆ†é¡µ"><a href="#3-1-1-åŸºç¡€åˆ†é¡µ" class="headerlink" title="3.1.1 åŸºç¡€åˆ†é¡µ"></a>3.1.1 åŸºç¡€åˆ†é¡µ</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241204110238010.png"></p><h5 id="3-1-1-1-éœ€æ±‚åˆ†æ"><a href="#3-1-1-1-éœ€æ±‚åˆ†æ" class="headerlink" title="3.1.1.1 éœ€æ±‚åˆ†æ"></a>3.1.1.1 éœ€æ±‚åˆ†æ</h5><p>æˆ‘ä»¬ä¹‹å‰åšçš„æŸ¥è¯¢åŠŸèƒ½ï¼Œæ˜¯å°†æ•°æ®åº“ä¸­æ‰€æœ‰çš„æ•°æ®æŸ¥è¯¢å‡ºæ¥å¹¶å±•ç¤ºåˆ°é¡µé¢ä¸Šï¼Œè¯•æƒ³å¦‚æœæ•°æ®åº“ä¸­çš„æ•°æ®æœ‰å¾ˆå¤š(å‡è®¾æœ‰åå‡ ä¸‡æ¡)çš„æ—¶å€™ï¼Œå°†æ•°æ®å…¨éƒ¨å±•ç¤ºå‡ºæ¥è‚¯å®šä¸ç°å®ï¼Œé‚£å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><blockquote><p>ä½¿ç”¨åˆ†é¡µè§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ¯æ¬¡åªå±•ç¤ºä¸€é¡µçš„æ•°æ®ï¼Œæ¯”å¦‚ï¼šä¸€é¡µå±•ç¤º10æ¡æ•°æ®ï¼Œå¦‚æœè¿˜æƒ³çœ‹å…¶ä»–çš„æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡»é¡µç è¿›è¡ŒæŸ¥è¯¢ã€‚</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215141233541.png"></p><p>è¦æƒ³ä»æ•°æ®åº“ä¸­è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨<code>LIMIT</code>å…³é”®å­—ï¼Œæ ¼å¼ä¸ºï¼šlimit  å¼€å§‹ç´¢å¼•  æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°</p><blockquote><p>æŸ¥è¯¢ç¬¬1é¡µæ•°æ®çš„SQLè¯­å¥æ˜¯ï¼š</p><pre class="line-numbers language-none"><code class="language-none">select * from emp  limit 0,10;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æŸ¥è¯¢ç¬¬2é¡µæ•°æ®çš„SQLè¯­å¥æ˜¯ï¼š</p><pre class="line-numbers language-none"><code class="language-none">select * from emp  limit 10,10;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æŸ¥è¯¢ç¬¬3é¡µçš„æ•°æ®çš„SQLè¯­å¥æ˜¯ï¼š</p><pre class="line-numbers language-none"><code class="language-none">select * from emp  limit 20,10;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è§‚å¯Ÿä»¥ä¸ŠSQLè¯­å¥ï¼Œå‘ç°ï¼š å¼€å§‹ç´¢å¼•ä¸€ç›´åœ¨æ”¹å˜ ï¼Œ æ¯é¡µæ˜¾ç¤ºæ¡æ•°æ˜¯å›ºå®šçš„</p><p>å¼€å§‹ç´¢å¼•çš„è®¡ç®—å…¬å¼ï¼š   å¼€å§‹ç´¢å¼• = (å½“å‰é¡µç  - 1)  *  æ¯é¡µæ˜¾ç¤ºæ¡æ•°</p></blockquote><p>æˆ‘ä»¬ç»§ç»­åŸºäºé¡µé¢åŸå‹ï¼Œç»§ç»­åˆ†æï¼Œå¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š</p><ol><li>å‰ç«¯åœ¨è¯·æ±‚æœåŠ¡ç«¯æ—¶ï¼Œä¼ é€’çš„å‚æ•°<ul><li>å½“å‰é¡µç   page</li><li>æ¯é¡µæ˜¾ç¤ºæ¡æ•°  pageSize</li></ul></li><li>åç«¯éœ€è¦å“åº”ä»€ä¹ˆæ•°æ®ç»™å‰ç«¯<ul><li>æ‰€æŸ¥è¯¢åˆ°çš„æ•°æ®åˆ—è¡¨ï¼ˆå­˜å‚¨åˆ°List é›†åˆä¸­ï¼‰</li><li>æ€»è®°å½•æ•°</li></ul></li></ol><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215152021068.png"></p><blockquote><p>åå°ç»™å‰ç«¯è¿”å›çš„æ•°æ®åŒ…å«ï¼šListé›†åˆ(æ•°æ®åˆ—è¡¨)ã€total(æ€»è®°å½•æ•°)</p><p>è€Œè¿™ä¸¤éƒ¨åˆ†æˆ‘ä»¬é€šå¸¸å°è£…åˆ°PageBeanå¯¹è±¡ä¸­ï¼Œå¹¶å°†è¯¥å¯¹è±¡è½¬æ¢ä¸ºjsonæ ¼å¼çš„æ•°æ®å“åº”å›ç»™æµè§ˆå™¨ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PageBean</span> <span class="token punctuation">{</span><span class="token keyword">private</span> <span class="token class-name">Long</span> total<span class="token punctuation">;</span> <span class="token comment">//æ€»è®°å½•æ•°</span><span class="token keyword">private</span> <span class="token class-name">List</span> rows<span class="token punctuation">;</span> <span class="token comment">//å½“å‰é¡µæ•°æ®åˆ—è¡¨</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h5 id="3-1-1-2-æ¥å£æ–‡æ¡£"><a href="#3-1-1-2-æ¥å£æ–‡æ¡£" class="headerlink" title="3.1.1.2 æ¥å£æ–‡æ¡£"></a>3.1.1.2 æ¥å£æ–‡æ¡£</h5><p><strong>å‘˜å·¥åˆ—è¡¨æŸ¥è¯¢</strong></p><ul><li><p>åŸºæœ¬ä¿¡æ¯</p><pre class="line-numbers language-none"><code class="language-none">è¯·æ±‚è·¯å¾„ï¼š/empsè¯·æ±‚æ–¹å¼ï¼šGETæ¥å£æè¿°ï¼šè¯¥æ¥å£ç”¨äºå‘˜å·¥åˆ—è¡¨æ•°æ®çš„æ¡ä»¶åˆ†é¡µæŸ¥è¯¢<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>è¯·æ±‚å‚æ•°</p><p>å‚æ•°æ ¼å¼ï¼šqueryString</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°åç§°</th><th>æ˜¯å¦å¿…é¡»</th><th>ç¤ºä¾‹</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>name</td><td>å¦</td><td>å¼ </td><td>å§“å</td></tr><tr><td>gender</td><td>å¦</td><td>1</td><td>æ€§åˆ« , 1 ç”· , 2 å¥³</td></tr><tr><td>begin</td><td>å¦</td><td>2010-01-01</td><td>èŒƒå›´åŒ¹é…çš„å¼€å§‹æ—¶é—´(å…¥èŒæ—¥æœŸ)</td></tr><tr><td>end</td><td>å¦</td><td>2020-01-01</td><td>èŒƒå›´åŒ¹é…çš„ç»“æŸæ—¶é—´(å…¥èŒæ—¥æœŸ)</td></tr><tr><td>page</td><td>æ˜¯</td><td>1</td><td>åˆ†é¡µæŸ¥è¯¢çš„é¡µç ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œé»˜è®¤ä¸º1</td></tr><tr><td>pageSize</td><td>æ˜¯</td><td>10</td><td>åˆ†é¡µæŸ¥è¯¢çš„æ¯é¡µè®°å½•æ•°ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œé»˜è®¤ä¸º10</td></tr></tbody></table><p>è¯·æ±‚æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/emps?name<span class="token operator">=</span>å¼ <span class="token operator">&amp;</span><span class="token assign-left variable">gender</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token assign-left variable">begin</span><span class="token operator">=</span><span class="token number">2007</span>-09-01<span class="token operator">&amp;</span><span class="token assign-left variable">end</span><span class="token operator">=</span><span class="token number">2022</span>-09-01<span class="token operator">&amp;</span><span class="token assign-left variable">page</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token assign-left variable">pageSize</span><span class="token operator">=</span><span class="token number">10</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>å“åº”æ•°æ®</p><p>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>é»˜è®¤å€¼</th><th>å¤‡æ³¨</th><th>å…¶ä»–ä¿¡æ¯</th></tr></thead><tbody><tr><td>code</td><td>number</td><td>å¿…é¡»</td><td></td><td>å“åº”ç , 1 æˆåŠŸ , 0 å¤±è´¥</td><td></td></tr><tr><td>msg</td><td>string</td><td>éå¿…é¡»</td><td></td><td>æç¤ºä¿¡æ¯</td><td></td></tr><tr><td>data</td><td>object</td><td>å¿…é¡»</td><td></td><td>è¿”å›çš„æ•°æ®</td><td></td></tr><tr><td>|- total</td><td>number</td><td>å¿…é¡»</td><td></td><td>æ€»è®°å½•æ•°</td><td></td></tr><tr><td>|- rows</td><td>object []</td><td>å¿…é¡»</td><td></td><td>æ•°æ®åˆ—è¡¨</td><td>item ç±»å‹: object</td></tr><tr><td>|- id</td><td>number</td><td>éå¿…é¡»</td><td></td><td>id</td><td></td></tr><tr><td>|- username</td><td>string</td><td>éå¿…é¡»</td><td></td><td>ç”¨æˆ·å</td><td></td></tr><tr><td>|- name</td><td>string</td><td>éå¿…é¡»</td><td></td><td>å§“å</td><td></td></tr><tr><td>|- password</td><td>string</td><td>éå¿…é¡»</td><td></td><td>å¯†ç </td><td></td></tr><tr><td>|- entrydate</td><td>string</td><td>éå¿…é¡»</td><td></td><td>å…¥èŒæ—¥æœŸ</td><td></td></tr><tr><td>|- gender</td><td>number</td><td>éå¿…é¡»</td><td></td><td>æ€§åˆ« , 1 ç”· ; 2 å¥³</td><td></td></tr><tr><td>|- image</td><td>string</td><td>éå¿…é¡»</td><td></td><td>å›¾åƒ</td><td></td></tr><tr><td>|- job</td><td>number</td><td>éå¿…é¡»</td><td></td><td>èŒä½, è¯´æ˜: 1 ç­ä¸»ä»»,2 è®²å¸ˆ, 3 å­¦å·¥ä¸»ç®¡, 4 æ•™ç ”ä¸»ç®¡, 5 å’¨è¯¢å¸ˆ</td><td></td></tr><tr><td>|- deptId</td><td>number</td><td>éå¿…é¡»</td><td></td><td>éƒ¨é—¨id</td><td></td></tr><tr><td>|- createTime</td><td>string</td><td>éå¿…é¡»</td><td></td><td>åˆ›å»ºæ—¶é—´</td><td></td></tr><tr><td>|- updateTime</td><td>string</td><td>éå¿…é¡»</td><td></td><td>æ›´æ–°æ—¶é—´</td><td></td></tr></tbody></table><p>å“åº”æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"code"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">"msg"</span><span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"total"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>    <span class="token property">"rows"</span><span class="token operator">:</span> <span class="token punctuation">[</span>       <span class="token punctuation">{</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">"username"</span><span class="token operator">:</span> <span class="token string">"jinyong"</span><span class="token punctuation">,</span>        <span class="token property">"password"</span><span class="token operator">:</span> <span class="token string">"123456"</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"é‡‘åº¸"</span><span class="token punctuation">,</span>        <span class="token property">"gender"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">"image"</span><span class="token operator">:</span> <span class="token string">"https://web-framework.oss-cn-hangzhou.aliyuncs.com/2022-09-02-00-27-53B.jpg"</span><span class="token punctuation">,</span>        <span class="token property">"job"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>        <span class="token property">"entrydate"</span><span class="token operator">:</span> <span class="token string">"2015-01-01"</span><span class="token punctuation">,</span>        <span class="token property">"deptId"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>        <span class="token property">"createTime"</span><span class="token operator">:</span> <span class="token string">"2022-09-01T23:06:30"</span><span class="token punctuation">,</span>        <span class="token property">"updateTime"</span><span class="token operator">:</span> <span class="token string">"2022-09-02T00:29:04"</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>        <span class="token property">"username"</span><span class="token operator">:</span> <span class="token string">"zhangwuji"</span><span class="token punctuation">,</span>        <span class="token property">"password"</span><span class="token operator">:</span> <span class="token string">"123456"</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"å¼ æ— å¿Œ"</span><span class="token punctuation">,</span>        <span class="token property">"gender"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">"image"</span><span class="token operator">:</span> <span class="token string">"https://web-framework.oss-cn-hangzhou.aliyuncs.com/2022-09-02-00-27-53B.jpg"</span><span class="token punctuation">,</span>        <span class="token property">"job"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>        <span class="token property">"entrydate"</span><span class="token operator">:</span> <span class="token string">"2015-01-01"</span><span class="token punctuation">,</span>        <span class="token property">"deptId"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>        <span class="token property">"createTime"</span><span class="token operator">:</span> <span class="token string">"2022-09-01T23:06:30"</span><span class="token punctuation">,</span>        <span class="token property">"updateTime"</span><span class="token operator">:</span> <span class="token string">"2022-09-02T00:29:04"</span>      <span class="token punctuation">}</span>    <span class="token punctuation">]</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h5 id="3-1-1-3-æ€è·¯åˆ†æ"><a href="#3-1-1-3-æ€è·¯åˆ†æ" class="headerlink" title="3.1.1.3 æ€è·¯åˆ†æ"></a>3.1.1.3 æ€è·¯åˆ†æ</h5><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215153413290.png"></p><p>åˆ†é¡µæŸ¥è¯¢éœ€è¦çš„æ•°æ®ï¼Œå°è£…åœ¨PageBeanå¯¹è±¡ä¸­ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215154036047.png"></p><h5 id="3-1-1-4-åŠŸèƒ½å¼€å‘"><a href="#3-1-1-4-åŠŸèƒ½å¼€å‘" class="headerlink" title="3.1.1.4 åŠŸèƒ½å¼€å‘"></a>3.1.1.4 åŠŸèƒ½å¼€å‘</h5><p>é€šè¿‡æŸ¥çœ‹æ¥å£æ–‡æ¡£ï¼šå‘˜å·¥åˆ—è¡¨æŸ¥è¯¢</p><blockquote><p>è¯·æ±‚è·¯å¾„ï¼š/emps</p><p>è¯·æ±‚æ–¹å¼ï¼šGET</p><p>è¯·æ±‚å‚æ•°ï¼šè·Ÿéšåœ¨è¯·æ±‚è·¯å¾„åçš„å‚æ•°å­—ç¬¦ä¸²ã€‚  ä¾‹ï¼š/emps?page=1&amp;pageSize=10</p><p>å“åº”æ•°æ®ï¼šjsonæ ¼å¼</p></blockquote><p><strong>EmpController</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">PageBean</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Result</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">EmpService</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestParam</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/emps"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpService</span> empService<span class="token punctuation">;</span>    <span class="token comment">//æ¡ä»¶åˆ†é¡µæŸ¥è¯¢</span>    <span class="token annotation punctuation">@GetMapping</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">page</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>defaultValue <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> page<span class="token punctuation">,</span>                       <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>defaultValue <span class="token operator">=</span> <span class="token string">"10"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//è®°å½•æ—¥å¿—</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"åˆ†é¡µæŸ¥è¯¢ï¼Œå‚æ•°ï¼š{},{}"</span><span class="token punctuation">,</span> page<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨ä¸šåŠ¡å±‚åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½</span>        <span class="token class-name">PageBean</span> pageBean <span class="token operator">=</span> empService<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å“åº”</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>pageBean<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>@RequestParam(defaultValue=â€é»˜è®¤å€¼â€)   //è®¾ç½®è¯·æ±‚å‚æ•°é»˜è®¤å€¼</p></blockquote><p><strong>EmpService</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æ¡ä»¶åˆ†é¡µæŸ¥è¯¢     * @param page é¡µç      * @param pageSize æ¯é¡µå±•ç¤ºè®°å½•æ•°     * @return     */</span>    <span class="token class-name">PageBean</span> <span class="token function">page</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> page<span class="token punctuation">,</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpServiceImpl</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">EmpMapper</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Emp</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">PageBean</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">EmpService</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDate</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">PageBean</span> <span class="token function">page</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> page<span class="token punctuation">,</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//1ã€è·å–æ€»è®°å½•æ•°</span>        <span class="token class-name">Long</span> count <span class="token operator">=</span> empMapper<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2ã€è·å–åˆ†é¡µæŸ¥è¯¢ç»“æœåˆ—è¡¨</span>        <span class="token class-name">Integer</span> start <span class="token operator">=</span> <span class="token punctuation">(</span>page <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> pageSize<span class="token punctuation">;</span> <span class="token comment">//è®¡ç®—èµ·å§‹ç´¢å¼• , å…¬å¼: (é¡µç -1)*é¡µå¤§å°</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empList <span class="token operator">=</span> empMapper<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//3ã€å°è£…PageBeanå¯¹è±¡</span>        <span class="token class-name">PageBean</span> pageBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PageBean</span><span class="token punctuation">(</span>count <span class="token punctuation">,</span> empList<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> pageBean<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpMapper</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token comment">//è·å–æ€»è®°å½•æ•°</span>    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select count(*) from emp"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Long</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//è·å–å½“å‰é¡µçš„ç»“æœåˆ—è¡¨</span>    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from emp limit #{start}, #{pageSize}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> start<span class="token punctuation">,</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="3-1-1-5-åŠŸèƒ½æµ‹è¯•"><a href="#3-1-1-5-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="3.1.1.5 åŠŸèƒ½æµ‹è¯•"></a>3.1.1.5 åŠŸèƒ½æµ‹è¯•</h5><p>åŠŸèƒ½å¼€å‘å®Œæˆåï¼Œé‡æ–°å¯åŠ¨é¡¹ç›®ï¼Œä½¿ç”¨postmanï¼Œå‘èµ·POSTè¯·æ±‚ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215162008339.png"></p><h4 id="3-1-2-åˆ†é¡µæ’ä»¶"><a href="#3-1-2-åˆ†é¡µæ’ä»¶" class="headerlink" title="3.1.2 åˆ†é¡µæ’ä»¶"></a>3.1.2 åˆ†é¡µæ’ä»¶</h4><h5 id="3-1-2-1-ä»‹ç»"><a href="#3-1-2-1-ä»‹ç»" class="headerlink" title="3.1.2.1 ä»‹ç»"></a>3.1.2.1 ä»‹ç»</h5><p>å‰é¢æˆ‘ä»¬å·²ç»å®Œäº†åŸºç¡€çš„åˆ†é¡µæŸ¥è¯¢ï¼Œå¤§å®¶ä¼šå‘ç°ï¼šåˆ†é¡µæŸ¥è¯¢åŠŸèƒ½ç¼–å†™èµ·æ¥æ¯”è¾ƒç¹çã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215164811566.png"></p><blockquote><p>åœ¨Mapperæ¥å£ä¸­å®šä¹‰ä¸¤ä¸ªæ–¹æ³•æ‰§è¡Œä¸¤æ¡ä¸åŒçš„SQLè¯­å¥ï¼š</p><ol><li>æŸ¥è¯¢æ€»è®°å½•æ•°</li><li>æŒ‡å®šé¡µç çš„æ•°æ®åˆ—è¡¨</li></ol><p>åœ¨Serviceå½“ä¸­ï¼Œè°ƒç”¨Mapperæ¥å£çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«è·å–ï¼šæ€»è®°å½•æ•°ã€æŸ¥è¯¢ç»“æœåˆ—è¡¨ï¼Œç„¶ååœ¨å°†è·å–çš„æ•°æ®ç»“æœå°è£…åˆ°PageBeanå¯¹è±¡ä¸­ã€‚</p><p>å¤§å®¶æ€è€ƒä¸‹ï¼šåœ¨æœªæ¥å¼€å‘å…¶ä»–é¡¹ç›®ï¼Œåªè¦æ¶‰åŠåˆ°åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½(ä¾‹ï¼šè®¢å•ã€ç”¨æˆ·ã€æ”¯ä»˜ã€å•†å“)ï¼Œéƒ½å¿…é¡»æŒ‰ç…§ä»¥ä¸Šæ“ä½œå®ŒæˆåŠŸèƒ½å¼€å‘</p></blockquote><p>ç»“è®ºï¼šåŸå§‹æ–¹å¼çš„åˆ†é¡µæŸ¥è¯¢ï¼Œå­˜åœ¨ç€â€æ­¥éª¤å›ºå®šâ€ã€â€ä»£ç é¢‘ç¹â€çš„é—®é¢˜</p><p>è§£å†³æ–¹æ¡ˆï¼šå¯ä»¥ä½¿ç”¨ä¸€äº›ç°æˆçš„åˆ†é¡µæ’ä»¶å®Œæˆã€‚å¯¹äºMybatisæ¥è®²ç°åœ¨æœ€ä¸»æµçš„å°±æ˜¯PageHelperã€‚</p><blockquote><p>PageHelperæ˜¯Mybatisçš„ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§ã€æ–¹ä¾¿æ˜“ç”¨çš„åˆ†é¡µæ’ä»¶ï¼Œæ”¯æŒä»»ä½•å½¢å¼çš„å•æ ‡ã€å¤šè¡¨çš„åˆ†é¡µæŸ¥è¯¢ã€‚</p><p>å®˜ç½‘ï¼š<a href="https://pagehelper.github.io/">https://pagehelper.github.io/</a></p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215170038833.png"></p><blockquote><p>åœ¨æ‰§è¡ŒempMapper.list()æ–¹æ³•æ—¶ï¼Œå°±æ˜¯æ‰§è¡Œï¼šselect  *  from  emp   è¯­å¥ï¼Œæ€ä¹ˆèƒ½å¤Ÿå®ç°åˆ†é¡µæ“ä½œå‘¢ï¼Ÿ</p><p>åˆ†é¡µæ’ä»¶å¸®æˆ‘ä»¬å®Œæˆäº†ä»¥ä¸‹æ“ä½œï¼š</p><ol><li>å…ˆè·å–åˆ°è¦æ‰§è¡Œçš„SQLè¯­å¥ï¼šselect  *  from  emp      </li><li>æŠŠSQLè¯­å¥ä¸­çš„å­—æ®µåˆ—è¡¨ï¼Œå˜ä¸ºï¼šcount(*)</li><li>æ‰§è¡ŒSQLè¯­å¥ï¼šselect  count(*)  from  emp          //è·å–åˆ°æ€»è®°å½•æ•°</li><li>å†å¯¹è¦æ‰§è¡Œçš„SQLè¯­å¥ï¼šselect  *  from  emp è¿›è¡Œæ”¹é€ ï¼Œåœ¨æœ«å°¾æ·»åŠ  limit ? , ?</li><li>æ‰§è¡Œæ”¹é€ åçš„SQLè¯­å¥ï¼šselect  *  from  emp  limit  ? , ?</li></ol></blockquote><h5 id="3-1-2-2-ä»£ç å®ç°"><a href="#3-1-2-2-ä»£ç å®ç°" class="headerlink" title="3.1.2.2 ä»£ç å®ç°"></a>3.1.2.2 ä»£ç å®ç°</h5><p>å½“ä½¿ç”¨äº†PageHelperåˆ†é¡µæ’ä»¶è¿›è¡Œåˆ†é¡µï¼Œå°±æ— éœ€å†Mapperä¸­è¿›è¡Œæ‰‹åŠ¨åˆ†é¡µäº†ã€‚ åœ¨Mapperä¸­æˆ‘ä»¬åªéœ€è¦è¿›è¡Œæ­£å¸¸çš„åˆ—è¡¨æŸ¥è¯¢å³å¯ã€‚åœ¨Serviceå±‚ä¸­ï¼Œè°ƒç”¨Mapperçš„æ–¹æ³•ä¹‹å‰è®¾ç½®åˆ†é¡µå‚æ•°ï¼Œåœ¨è°ƒç”¨Mapperæ–¹æ³•æ‰§è¡ŒæŸ¥è¯¢ä¹‹åï¼Œè§£æåˆ†é¡µç»“æœï¼Œå¹¶å°†ç»“æœå°è£…åˆ°PageBeanå¯¹è±¡ä¸­è¿”å›ã€‚</p><p>1ã€åœ¨pom.xmlå¼•å…¥ä¾èµ–</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>pagehelper-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.4.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2ã€EmpMapper</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token comment">//è·å–å½“å‰é¡µçš„ç»“æœåˆ—è¡¨</span>    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from emp"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">page</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> start<span class="token punctuation">,</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3ã€EmpServiceImpl</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token class-name">PageBean</span> <span class="token function">page</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> page<span class="token punctuation">,</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// è®¾ç½®åˆ†é¡µå‚æ•°</span>    <span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empList <span class="token operator">=</span> empMapper<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>begin<span class="token punctuation">,</span>end<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// è·å–åˆ†é¡µç»“æœ</span>    <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> empList<span class="token punctuation">;</span>       <span class="token comment">//å°è£…PageBean</span>    <span class="token class-name">PageBean</span> pageBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PageBean</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">return</span> pageBean<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="3-1-2-3-æµ‹è¯•"><a href="#3-1-2-3-æµ‹è¯•" class="headerlink" title="3.1.2.3 æµ‹è¯•"></a>3.1.2.3 æµ‹è¯•</h5><p>åŠŸèƒ½å¼€å‘å®Œæˆåï¼Œæˆ‘ä»¬é‡å¯é¡¹ç›®å·¥ç¨‹ï¼Œæ‰“å¼€postmanï¼Œå‘èµ·GETè¯·æ±‚ï¼Œè®¿é—® ï¼š<a href="http://localhost:8080/emps?page=1&amp;pageSize=5">http://localhost:8080/emps?page=1&amp;pageSize=5</a></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241204104643510.png"></p><blockquote><p>åç«¯ç¨‹åºSQLè¾“å‡ºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215174820377.png"></p></blockquote><h3 id="3-2-åˆ†é¡µæŸ¥è¯¢-å¸¦æ¡ä»¶"><a href="#3-2-åˆ†é¡µæŸ¥è¯¢-å¸¦æ¡ä»¶" class="headerlink" title="3.2 åˆ†é¡µæŸ¥è¯¢(å¸¦æ¡ä»¶)"></a>3.2 åˆ†é¡µæŸ¥è¯¢(å¸¦æ¡ä»¶)</h3><p>å®Œäº†åˆ†é¡µæŸ¥è¯¢åï¼Œä¸‹é¢æˆ‘ä»¬éœ€è¦åœ¨åˆ†é¡µæŸ¥è¯¢çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ æ¡ä»¶ã€‚</p><h4 id="3-2-1-éœ€æ±‚"><a href="#3-2-1-éœ€æ±‚" class="headerlink" title="3.2.1 éœ€æ±‚"></a>3.2.1 éœ€æ±‚</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215175639974.png"></p><p>é€šè¿‡å‘˜å·¥ç®¡ç†çš„é¡µé¢åŸå‹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå‘˜å·¥åˆ—è¡¨é¡µé¢çš„æŸ¥è¯¢ï¼Œä¸ä»…ä»…éœ€è¦è€ƒè™‘åˆ†é¡µï¼Œè¿˜éœ€è¦è€ƒè™‘æŸ¥è¯¢æ¡ä»¶ã€‚ åˆ†é¡µæŸ¥è¯¢æˆ‘ä»¬å·²ç»å®ç°äº†ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘åœ¨åˆ†é¡µæŸ¥è¯¢çš„åŸºç¡€ä¸Šï¼Œå†åŠ ä¸ŠæŸ¥è¯¢æ¡ä»¶ã€‚</p><p>æˆ‘ä»¬çœ‹åˆ°é¡µé¢åŸå‹åŠéœ€æ±‚ä¸­æè¿°ï¼Œæœç´¢æ çš„æœç´¢æ¡ä»¶æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>å§“åï¼šæ¨¡ç³ŠåŒ¹é…</li><li>æ€§åˆ«ï¼šç²¾ç¡®åŒ¹é…</li><li>å…¥èŒæ—¥æœŸï¼šèŒƒå›´åŒ¹é…</li></ul><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select * from empwhere   name like concat('%','å¼ ','%')   -- æ¡ä»¶1ï¼šæ ¹æ®å§“åæ¨¡ç³ŠåŒ¹é…  and gender = 1                   -- æ¡ä»¶2ï¼šæ ¹æ®æ€§åˆ«ç²¾ç¡®åŒ¹é…  and entrydate = between '2000-01-01' and '2010-01-01'  -- æ¡ä»¶3ï¼šæ ¹æ®å…¥èŒæ—¥æœŸèŒƒå›´åŒ¹é…order by update_time desc;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è€Œä¸”ä¸Šè¿°çš„ä¸‰ä¸ªæ¡ä»¶ï¼Œéƒ½æ˜¯å¯ä»¥ä¼ é€’ï¼Œä¹Ÿå¯ä»¥ä¸ä¼ é€’çš„ï¼Œä¹Ÿå°±æ˜¯åŠ¨æ€çš„ã€‚ æˆ‘ä»¬éœ€è¦ä½¿ç”¨å‰é¢å­¦ä¹ çš„Mybatisä¸­çš„åŠ¨æ€SQL ã€‚</p><h4 id="3-2-2-æ€è·¯åˆ†æ"><a href="#3-2-2-æ€è·¯åˆ†æ" class="headerlink" title="3.2.2 æ€è·¯åˆ†æ"></a>3.2.2 æ€è·¯åˆ†æ</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215180528415.png"></p><h4 id="3-2-3-åŠŸèƒ½å¼€å‘"><a href="#3-2-3-åŠŸèƒ½å¼€å‘" class="headerlink" title="3.2.3 åŠŸèƒ½å¼€å‘"></a>3.2.3 åŠŸèƒ½å¼€å‘</h4><p>é€šè¿‡æŸ¥çœ‹æ¥å£æ–‡æ¡£ï¼šå‘˜å·¥åˆ—è¡¨æŸ¥è¯¢</p><blockquote><p>è¯·æ±‚è·¯å¾„ï¼š/emps</p><p>è¯·æ±‚æ–¹å¼ï¼šGET</p><p>è¯·æ±‚å‚æ•°ï¼š</p><table><thead><tr><th>å‚æ•°åç§°</th><th>æ˜¯å¦å¿…é¡»</th><th>ç¤ºä¾‹</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>name</td><td>å¦</td><td>å¼ </td><td>å§“å</td></tr><tr><td>gender</td><td>å¦</td><td>1</td><td>æ€§åˆ« , 1 ç”· , 2 å¥³</td></tr><tr><td>begin</td><td>å¦</td><td>2010-01-01</td><td>èŒƒå›´åŒ¹é…çš„å¼€å§‹æ—¶é—´(å…¥èŒæ—¥æœŸ)</td></tr><tr><td>end</td><td>å¦</td><td>2020-01-01</td><td>èŒƒå›´åŒ¹é…çš„ç»“æŸæ—¶é—´(å…¥èŒæ—¥æœŸ)</td></tr><tr><td>page</td><td>æ˜¯</td><td>1</td><td>åˆ†é¡µæŸ¥è¯¢çš„é¡µç ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œé»˜è®¤ä¸º1</td></tr><tr><td>pageSize</td><td>æ˜¯</td><td>10</td><td>åˆ†é¡µæŸ¥è¯¢çš„æ¯é¡µè®°å½•æ•°ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œé»˜è®¤ä¸º10</td></tr></tbody></table></blockquote><p>åœ¨åŸæœ‰åˆ†é¡µæŸ¥è¯¢çš„ä»£ç åŸºç¡€ä¸Šè¿›è¡Œæ”¹é€ ï¼š</p><p><strong>EmpController</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/emps"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpService</span> empService<span class="token punctuation">;</span>    <span class="token comment">//æ¡ä»¶åˆ†é¡µæŸ¥è¯¢</span>    <span class="token annotation punctuation">@GetMapping</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">page</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>defaultValue <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> page<span class="token punctuation">,</span>                       <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>defaultValue <span class="token operator">=</span> <span class="token string">"10"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">,</span>                       <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Short</span> gender<span class="token punctuation">,</span>                       <span class="token annotation punctuation">@DateTimeFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span> <span class="token class-name">LocalDate</span> begin<span class="token punctuation">,</span>                       <span class="token annotation punctuation">@DateTimeFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span> <span class="token class-name">LocalDate</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//è®°å½•æ—¥å¿—</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"åˆ†é¡µæŸ¥è¯¢ï¼Œå‚æ•°ï¼š{},{},{},{},{},{}"</span><span class="token punctuation">,</span> page<span class="token punctuation">,</span> pageSize<span class="token punctuation">,</span>name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> begin<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨ä¸šåŠ¡å±‚åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½</span>        <span class="token class-name">PageBean</span> pageBean <span class="token operator">=</span> empService<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> pageSize<span class="token punctuation">,</span> name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> begin<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å“åº”</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>pageBean<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpService</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æ¡ä»¶åˆ†é¡µæŸ¥è¯¢     * @param page     é¡µç      * @param pageSize æ¯é¡µå±•ç¤ºè®°å½•æ•°     * @param name     å§“å     * @param gender   æ€§åˆ«     * @param begin   å¼€å§‹æ—¶é—´     * @param end     ç»“æŸæ—¶é—´     * @return     */</span>    <span class="token class-name">PageBean</span> <span class="token function">page</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> page<span class="token punctuation">,</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Short</span> gender<span class="token punctuation">,</span> <span class="token class-name">LocalDate</span> begin<span class="token punctuation">,</span> <span class="token class-name">LocalDate</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpServiceImpl</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">PageBean</span> <span class="token function">page</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> page<span class="token punctuation">,</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Short</span> gender<span class="token punctuation">,</span> <span class="token class-name">LocalDate</span> begin<span class="token punctuation">,</span> <span class="token class-name">LocalDate</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//è®¾ç½®åˆ†é¡µå‚æ•°</span>        <span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ‰§è¡Œæ¡ä»¶åˆ†é¡µæŸ¥è¯¢</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empList <span class="token operator">=</span> empMapper<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> begin<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è·å–æŸ¥è¯¢ç»“æœ</span>        <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> empList<span class="token punctuation">;</span>        <span class="token comment">//å°è£…PageBean</span>        <span class="token class-name">PageBean</span> pageBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PageBean</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> pageBean<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpMapper</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token comment">//è·å–å½“å‰é¡µçš„ç»“æœåˆ—è¡¨</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Short</span> gender<span class="token punctuation">,</span> <span class="token class-name">LocalDate</span> begin<span class="token punctuation">,</span> <span class="token class-name">LocalDate</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpMapper.xml</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.mapper.EmpMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- æ¡ä»¶åˆ†é¡µæŸ¥è¯¢ --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.pojo.Emp<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        select * from emp        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name != null and name != ''<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                name like concat('%',#{name},'%')            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                and gender = #{gender}            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>begin != null and end != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                and entrydate between #{begin} and #{end}            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>        order by update_time desc    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-2-4-åŠŸèƒ½æµ‹è¯•"><a href="#3-2-4-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="3.2.4 åŠŸèƒ½æµ‹è¯•"></a>3.2.4 åŠŸèƒ½æµ‹è¯•</h4><p>åŠŸèƒ½å¼€å‘å®Œæˆåï¼Œé‡å¯é¡¹ç›®å·¥ç¨‹ï¼Œæ‰“å¼€postmanï¼Œå‘èµ·GETè¯·æ±‚ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215182344380.png"></p><blockquote><p>æ§åˆ¶å°SQLè¯­å¥ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215182952789.png"></p></blockquote><h3 id="3-3-åˆ é™¤å‘˜å·¥"><a href="#3-3-åˆ é™¤å‘˜å·¥" class="headerlink" title="3.3 åˆ é™¤å‘˜å·¥"></a>3.3 åˆ é™¤å‘˜å·¥</h3><p>æŸ¥è¯¢å‘˜å®Œæˆä¹‹åï¼Œæˆ‘ä»¬ç»§ç»­å¼€å‘æ–°çš„åŠŸèƒ½ï¼šåˆ é™¤å‘˜å·¥ã€‚</p><h4 id="3-3-1-éœ€æ±‚"><a href="#3-3-1-éœ€æ±‚" class="headerlink" title="3.3.1 éœ€æ±‚"></a>3.3.1 éœ€æ±‚</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215183657413.png"></p><p>å½“æˆ‘ä»¬å‹¾é€‰åˆ—è¡¨å‰é¢çš„å¤é€‰æ¡†ï¼Œç„¶åç‚¹å‡» â€œæ‰¹é‡åˆ é™¤â€ æŒ‰é’®ï¼Œå°±å¯ä»¥å°†è¿™ä¸€æ‰¹æ¬¡çš„å‘˜å·¥ä¿¡æ¯åˆ é™¤æ‰äº†ã€‚ä¹Ÿå¯ä»¥åªå‹¾é€‰ä¸€ä¸ªå¤é€‰æ¡†ï¼Œä»…åˆ é™¤ä¸€ä¸ªå‘˜å·¥ä¿¡æ¯ã€‚</p><p>é—®é¢˜ï¼šæˆ‘ä»¬éœ€è¦å¼€å‘ä¸¤ä¸ªåŠŸèƒ½æ¥å£å—ï¼Ÿä¸€ä¸ªåˆ é™¤å•ä¸ªå‘˜å·¥ï¼Œä¸€ä¸ªåˆ é™¤å¤šä¸ªå‘˜å·¥</p><p>ç­”æ¡ˆï¼šä¸éœ€è¦ã€‚ åªéœ€è¦å¼€å‘ä¸€ä¸ªåŠŸèƒ½æ¥å£å³å¯ï¼ˆåˆ é™¤å¤šä¸ªå‘˜å·¥åŒ…å«åªåˆ é™¤ä¸€ä¸ªå‘˜å·¥ï¼‰</p><h4 id="3-3-2-æ¥å£æ–‡æ¡£"><a href="#3-3-2-æ¥å£æ–‡æ¡£" class="headerlink" title="3.3.2 æ¥å£æ–‡æ¡£"></a>3.3.2 æ¥å£æ–‡æ¡£</h4><p><strong>åˆ é™¤å‘˜å·¥</strong></p><ul><li><p>åŸºæœ¬ä¿¡æ¯</p><pre class="line-numbers language-none"><code class="language-none">è¯·æ±‚è·¯å¾„ï¼š/emps/{ids}è¯·æ±‚æ–¹å¼ï¼šDELETEæ¥å£æè¿°ï¼šè¯¥æ¥å£ç”¨äºæ‰¹é‡åˆ é™¤å‘˜å·¥çš„æ•°æ®ä¿¡æ¯<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>è¯·æ±‚å‚æ•°</p><p>å‚æ•°æ ¼å¼ï¼šè·¯å¾„å‚æ•°</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>ç¤ºä¾‹</th><th>æ˜¯å¦å¿…é¡»</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ids</td><td>æ•°ç»„ array</td><td>1,2,3</td><td>å¿…é¡»</td><td>å‘˜å·¥çš„idæ•°ç»„</td></tr></tbody></table><p>è¯·æ±‚å‚æ•°æ ·ä¾‹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">/emps/1,2,3<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>å“åº”æ•°æ®</p><p>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>code</td><td>number</td><td>å¿…é¡»</td><td>å“åº”ç ï¼Œ1 ä»£è¡¨æˆåŠŸï¼Œ0 ä»£è¡¨å¤±è´¥</td></tr><tr><td>msg</td><td>string</td><td>éå¿…é¡»</td><td>æç¤ºä¿¡æ¯</td></tr><tr><td>data</td><td>object</td><td>éå¿…é¡»</td><td>è¿”å›çš„æ•°æ®</td></tr></tbody></table><p>å“åº”æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>    <span class="token property">"code"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>    <span class="token property">"msg"</span><span class="token operator">:</span><span class="token string">"success"</span><span class="token punctuation">,</span>    <span class="token property">"data"</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h4 id="3-3-3-æ€è·¯åˆ†æ"><a href="#3-3-3-æ€è·¯åˆ†æ" class="headerlink" title="3.3.3 æ€è·¯åˆ†æ"></a>3.3.3 æ€è·¯åˆ†æ</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215184714815.png"></p><blockquote><p>æ¥å£æ–‡æ¡£è§„å®šï¼š</p><ul><li>å‰ç«¯è¯·æ±‚è·¯å¾„ï¼š/emps/{ids}</li><li>å‰ç«¯è¯·æ±‚æ–¹å¼ï¼šDELETE</li></ul><p>é—®é¢˜1ï¼šæ€ä¹ˆåœ¨controllerä¸­æ¥æ”¶è¯·æ±‚è·¯å¾„ä¸­çš„è·¯å¾„å‚æ•°ï¼Ÿ</p><pre class="line-numbers language-none"><code class="language-none">@PathVariable<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>é—®é¢˜2ï¼šå¦‚ä½•é™å®šè¯·æ±‚æ–¹å¼æ˜¯deleteï¼Ÿ</p><pre class="line-numbers language-none"><code class="language-none">@DeleteMapping<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>é—®é¢˜3ï¼šåœ¨Mapperæ¥å£ä¸­ï¼Œæ‰§è¡Œdeleteæ“ä½œçš„SQLè¯­å¥æ—¶ï¼Œæ¡ä»¶ä¸­çš„idå€¼æ˜¯ä¸ç¡®å®šçš„æ˜¯åŠ¨æ€çš„ï¼Œæ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p><pre class="line-numbers language-none"><code class="language-none">Mybatisä¸­çš„åŠ¨æ€SQLï¼šforeach<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><h4 id="3-3-4-åŠŸèƒ½å¼€å‘"><a href="#3-3-4-åŠŸèƒ½å¼€å‘" class="headerlink" title="3.3.4 åŠŸèƒ½å¼€å‘"></a>3.3.4 åŠŸèƒ½å¼€å‘</h4><p>é€šè¿‡æŸ¥çœ‹æ¥å£æ–‡æ¡£ï¼šåˆ é™¤å‘˜å·¥</p><blockquote><p>è¯·æ±‚è·¯å¾„ï¼š/emps/{ids}</p><p>è¯·æ±‚æ–¹å¼ï¼šDELETE</p><p>è¯·æ±‚å‚æ•°ï¼šè·¯å¾„å‚æ•° {ids}</p><p>å“åº”æ•°æ®ï¼šjsonæ ¼å¼</p></blockquote><p><strong>EmpController</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/emps"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpService</span> empService<span class="token punctuation">;</span>    <span class="token comment">//æ‰¹é‡åˆ é™¤</span>    <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">"/{ids}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span><span class="token punctuation">{</span>        empService<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//æ¡ä»¶åˆ†é¡µæŸ¥è¯¢</span>    <span class="token annotation punctuation">@GetMapping</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">page</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>defaultValue <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> page<span class="token punctuation">,</span>                       <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>defaultValue <span class="token operator">=</span> <span class="token string">"10"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">,</span>                       <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Short</span> gender<span class="token punctuation">,</span>                       <span class="token annotation punctuation">@DateTimeFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span> <span class="token class-name">LocalDate</span> begin<span class="token punctuation">,</span>                       <span class="token annotation punctuation">@DateTimeFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span> <span class="token class-name">LocalDate</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//è®°å½•æ—¥å¿—</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"åˆ†é¡µæŸ¥è¯¢ï¼Œå‚æ•°ï¼š{},{},{},{},{},{}"</span><span class="token punctuation">,</span> page<span class="token punctuation">,</span> pageSize<span class="token punctuation">,</span>name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> begin<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨ä¸šåŠ¡å±‚åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½</span>        <span class="token class-name">PageBean</span> pageBean <span class="token operator">=</span> empService<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> pageSize<span class="token punctuation">,</span> name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> begin<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å“åº”</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>pageBean<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpService</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æ‰¹é‡åˆ é™¤æ“ä½œ     * @param ids idé›†åˆ     */</span>    <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpServiceImpl</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span> <span class="token punctuation">{</span>        empMapper<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpMapper</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token comment">//æ‰¹é‡åˆ é™¤</span>    <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpMapper.xml</strong></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.mapper.EmpMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--æ‰¹é‡åˆ é™¤å‘˜å·¥--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>delete<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        delete from emp where id in        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ids<span class="token punctuation">"</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(<span class="token punctuation">"</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>)<span class="token punctuation">"</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>,<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            #{id}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- çœç•¥... --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-3-5-åŠŸèƒ½æµ‹è¯•"><a href="#3-3-5-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="3.3.5 åŠŸèƒ½æµ‹è¯•"></a>3.3.5 åŠŸèƒ½æµ‹è¯•</h4><p>åŠŸèƒ½å¼€å‘å®Œæˆåï¼Œé‡å¯é¡¹ç›®å·¥ç¨‹ï¼Œæ‰“å¼€postmanï¼Œå‘èµ·DELETEè¯·æ±‚ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215190229696.png"></p><blockquote><p>æ§åˆ¶å°SQLè¯­å¥ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221215190948723.png"></p></blockquote><p>å‰é¢æˆ‘ä»¬å·²ç»å®ç°äº†å‘˜å·¥ä¿¡æ¯çš„æ¡ä»¶åˆ†é¡µæŸ¥è¯¢ä»¥åŠåˆ é™¤æ“ä½œã€‚ å…³äºå‘˜å·¥ç®¡ç†çš„åŠŸèƒ½ï¼Œè¿˜æœ‰ä¸¤ä¸ªéœ€è¦å®ç°ï¼š</p><ul><li>æ–°å¢å‘˜å·¥</li><li>ä¿®æ”¹å‘˜å·¥</li></ul><p>é¦–å…ˆæˆ‘ä»¬å…ˆå®Œæˆâ€æ–°å¢å‘˜å·¥â€çš„åŠŸèƒ½å¼€å‘ï¼Œå†å®Œæˆâ€ä¿®æ”¹å‘˜å·¥â€çš„åŠŸèƒ½å¼€å‘ã€‚è€Œåœ¨â€æ–°å¢å‘˜å·¥â€ä¸­ï¼Œéœ€è¦æ·»åŠ å¤´åƒï¼Œè€Œå¤´åƒéœ€è¦ç”¨åˆ°â€æ–‡ä»¶ä¸Šä¼ â€æŠ€æœ¯ã€‚ å½“æ•´ä¸ªå‘˜å·¥ç®¡ç†åŠŸèƒ½å…¨éƒ¨å¼€å‘å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å†é€šè¿‡é…ç½®æ–‡ä»¶æ¥ä¼˜åŒ–ä¸€äº›å†…å®¹ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬ä»Šå¤©çš„è¯¾ç¨‹å†…å®¹åŒ…å«ä»¥ä¸‹å››ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>æ–°å¢å‘˜å·¥</li><li>æ–‡ä»¶ä¸Šä¼ </li><li>ä¿®æ”¹å‘˜å·¥</li><li>é…ç½®æ–‡ä»¶</li></ul><h2 id="1-æ–°å¢å‘˜å·¥"><a href="#1-æ–°å¢å‘˜å·¥" class="headerlink" title="1. æ–°å¢å‘˜å·¥"></a>1. æ–°å¢å‘˜å·¥</h2><h3 id="1-1-éœ€æ±‚"><a href="#1-1-éœ€æ±‚" class="headerlink" title="1.1 éœ€æ±‚"></a>1.1 éœ€æ±‚</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042213280.png"> </p><p>åœ¨æ–°å¢ç”¨æˆ·æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¿å­˜ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¹¶ä¸”è¿˜éœ€è¦ä¸Šä¼ çš„å‘˜å·¥çš„å›¾ç‰‡ï¼Œç›®å‰æˆ‘ä»¬å…ˆå®Œæˆç¬¬ä¸€æ­¥æ“ä½œï¼Œä¿å­˜ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ã€‚ </p><h3 id="1-2-æ¥å£æ–‡æ¡£"><a href="#1-2-æ¥å£æ–‡æ¡£" class="headerlink" title="1.2 æ¥å£æ–‡æ¡£"></a>1.2 æ¥å£æ–‡æ¡£</h3><p>æˆ‘ä»¬å‚ç…§æ¥å£æ–‡æ¡£æ¥å¼€å‘æ–°å¢å‘˜å·¥åŠŸèƒ½</p><ul><li><p>åŸºæœ¬ä¿¡æ¯</p><pre class="line-numbers language-none"><code class="language-none">è¯·æ±‚è·¯å¾„ï¼š/empsè¯·æ±‚æ–¹å¼ï¼šPOSTæ¥å£æè¿°ï¼šè¯¥æ¥å£ç”¨äºæ·»åŠ å‘˜å·¥çš„ä¿¡æ¯<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>è¯·æ±‚å‚æ•°</p><p>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>username</td><td>string</td><td>å¿…é¡»</td><td>ç”¨æˆ·å</td></tr><tr><td>name</td><td>string</td><td>å¿…é¡»</td><td>å§“å</td></tr><tr><td>gender</td><td>number</td><td>å¿…é¡»</td><td>æ€§åˆ«, è¯´æ˜: 1 ç”·, 2 å¥³</td></tr><tr><td>image</td><td>string</td><td>éå¿…é¡»</td><td>å›¾åƒ</td></tr><tr><td>deptId</td><td>number</td><td>éå¿…é¡»</td><td>éƒ¨é—¨id</td></tr><tr><td>entrydate</td><td>string</td><td>éå¿…é¡»</td><td>å…¥èŒæ—¥æœŸ</td></tr><tr><td>job</td><td>number</td><td>éå¿…é¡»</td><td>èŒä½, è¯´æ˜: 1 ç­ä¸»ä»»,2 è®²å¸ˆ, 3 å­¦å·¥ä¸»ç®¡, 4 æ•™ç ”ä¸»ç®¡, 5 å’¨è¯¢å¸ˆ</td></tr></tbody></table><p>è¯·æ±‚æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"image"</span><span class="token operator">:</span> <span class="token string">"https://web-framework.oss-cn-hangzhou.aliyuncs.com/2022-09-03-07-37-38222.jpg"</span><span class="token punctuation">,</span>  <span class="token property">"username"</span><span class="token operator">:</span> <span class="token string">"linpingzhi"</span><span class="token punctuation">,</span>  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"æ—å¹³ä¹‹"</span><span class="token punctuation">,</span>  <span class="token property">"gender"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">"job"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">"entrydate"</span><span class="token operator">:</span> <span class="token string">"2022-09-18"</span><span class="token punctuation">,</span>  <span class="token property">"deptId"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å“åº”æ•°æ®</p><p>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>code</td><td>number</td><td>å¿…é¡»</td><td>å“åº”ç ï¼Œ1 ä»£è¡¨æˆåŠŸï¼Œ0 ä»£è¡¨å¤±è´¥</td></tr><tr><td>msg</td><td>string</td><td>éå¿…é¡»</td><td>æç¤ºä¿¡æ¯</td></tr><tr><td>data</td><td>object</td><td>éå¿…é¡»</td><td>è¿”å›çš„æ•°æ®</td></tr></tbody></table><p>å“åº”æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>    <span class="token property">"code"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>    <span class="token property">"msg"</span><span class="token operator">:</span><span class="token string">"success"</span><span class="token punctuation">,</span>    <span class="token property">"data"</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="1-3-æ€è·¯åˆ†æ"><a href="#1-3-æ€è·¯åˆ†æ" class="headerlink" title="1.3 æ€è·¯åˆ†æ"></a>1.3 æ€è·¯åˆ†æ</h3><p>æ–°å¢å‘˜å·¥çš„å…·ä½“çš„æµç¨‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042221667.png"></p><blockquote><p>æ¥å£æ–‡æ¡£è§„å®šï¼š</p><ul><li>è¯·æ±‚è·¯å¾„ï¼š/emps</li><li>è¯·æ±‚æ–¹å¼ï¼šPOST</li><li>è¯·æ±‚å‚æ•°ï¼šJsonæ ¼å¼æ•°æ®</li><li>å“åº”æ•°æ®ï¼šJsonæ ¼å¼æ•°æ®</li></ul><p>é—®é¢˜1ï¼šå¦‚ä½•é™å®šè¯·æ±‚æ–¹å¼æ˜¯POSTï¼Ÿ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@PostMapping</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>é—®é¢˜2ï¼šæ€ä¹ˆåœ¨controllerä¸­æ¥æ”¶jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°ï¼Ÿ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestBody</span>  <span class="token comment">//æŠŠå‰ç«¯ä¼ é€’çš„jsonæ•°æ®å¡«å……åˆ°å®ä½“ç±»ä¸­</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><h3 id="1-4-åŠŸèƒ½å¼€å‘"><a href="#1-4-åŠŸèƒ½å¼€å‘" class="headerlink" title="1.4 åŠŸèƒ½å¼€å‘"></a>1.4 åŠŸèƒ½å¼€å‘</h3><p><strong>EmpController</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/emps"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpService</span> empService<span class="token punctuation">;</span>    <span class="token comment">//æ–°å¢</span>    <span class="token annotation punctuation">@PostMapping</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//è®°å½•æ—¥å¿—</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"æ–°å¢å‘˜å·¥, emp:{}"</span><span class="token punctuation">,</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨ä¸šåŠ¡å±‚æ–°å¢åŠŸèƒ½</span>        empService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å“åº”</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpService</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ä¿å­˜å‘˜å·¥ä¿¡æ¯     * @param emp     */</span>    <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpServiceImpl</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//è¡¥å…¨æ•°æ®</span>        emp<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setUpdateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨æ·»åŠ æ–¹æ³•</span>        empMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>EmpMapper</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token comment">//æ–°å¢å‘˜å·¥</span>    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">"insert into emp (username, name, gender, image, job, entrydate, dept_id, create_time, update_time) "</span> <span class="token operator">+</span>            <span class="token string">"values (#{username}, #{name}, #{gender}, #{image}, #{job}, #{entrydate}, #{deptId}, #{createTime}, #{updateTime});"</span><span class="token punctuation">)</span>    <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-5-åŠŸèƒ½æµ‹è¯•"><a href="#1-5-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="1.5 åŠŸèƒ½æµ‹è¯•"></a>1.5 åŠŸèƒ½æµ‹è¯•</h3><p>ä»£ç å¼€å‘å®Œæˆåï¼Œé‡å¯æœåŠ¡å™¨ï¼Œæ‰“å¼€Postmanå‘é€ POST è¯·æ±‚ï¼Œè¯·æ±‚è·¯å¾„ï¼š<a href="http://localhost:8080/emps">http://localhost:8080/emps</a></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042221478.png"></p><h3 id="1-6-å‰åç«¯è”è°ƒ"><a href="#1-6-å‰åç«¯è”è°ƒ" class="headerlink" title="1.6 å‰åç«¯è”è°ƒ"></a>1.6 å‰åç«¯è”è°ƒ</h3><p>åŠŸèƒ½æµ‹è¯•é€šè¿‡åï¼Œæˆ‘ä»¬å†è¿›è¡Œé€šè¿‡æ‰“å¼€æµè§ˆå™¨ï¼Œæµ‹è¯•åç«¯åŠŸèƒ½æ¥å£ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042221983.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042221555.png"></p><h2 id="2-æ–‡ä»¶ä¸Šä¼ "><a href="#2-æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="2. æ–‡ä»¶ä¸Šä¼ "></a>2. æ–‡ä»¶ä¸Šä¼ </h2><p>åœ¨æˆ‘ä»¬å®Œæˆçš„æ–°å¢å‘˜å·¥åŠŸèƒ½ä¸­ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šæ²¡æœ‰å¤´åƒ(å›¾ç‰‡ç¼ºå¤±)</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042221042.png"></p><p>ä¸Šè¿°é—®é¢˜ï¼Œéœ€è¦æˆ‘ä»¬é€šè¿‡æ–‡ä»¶ä¸Šä¼ æŠ€æœ¯æ¥è§£å†³ã€‚ä¸‹é¢æˆ‘ä»¬å°±è¿›å…¥åˆ°æ–‡ä»¶ä¸Šä¼ æŠ€æœ¯çš„å­¦ä¹ ã€‚</p><p>æ–‡ä»¶ä¸Šä¼ æŠ€æœ¯è¿™å—æˆ‘ä»¬ä¸»è¦è®²è§£ä¸‰ä¸ªæ–¹é¢ï¼šé¦–å…ˆæˆ‘ä»¬å…ˆå¯¹æ–‡ä»¶ä¸Šä¼ åšä¸€ä¸ªæ•´ä½“çš„ä»‹ç»ï¼Œæ¥ç€å†å­¦ä¹ æ–‡ä»¶ä¸Šä¼ çš„æœ¬åœ°å­˜å‚¨æ–¹å¼ï¼Œæœ€åå­¦ä¹ äº‘å­˜å‚¨æ–¹å¼ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å…ˆæ¥å­¦ä¹ ä¸‹ä»€ä¹ˆæ˜¯æ–‡ä»¶ä¸Šä¼ ã€‚</p><h3 id="2-1-ç®€ä»‹"><a href="#2-1-ç®€ä»‹" class="headerlink" title="2.1 ç®€ä»‹"></a>2.1 ç®€ä»‹</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042221821.png" alt="ä¸‰è¦ç´ "></p><p>æ–‡ä»¶ä¸Šä¼ ï¼Œæ˜¯æŒ‡å°†æœ¬åœ°å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œä¾›å…¶ä»–ç”¨æˆ·æµè§ˆæˆ–ä¸‹è½½çš„è¿‡ç¨‹ã€‚</p><p>æ–‡ä»¶ä¸Šä¼ åœ¨é¡¹ç›®ä¸­åº”ç”¨éå¸¸å¹¿æ³›ï¼Œæˆ‘ä»¬ç»å¸¸å‘å¾®åšã€å‘å¾®ä¿¡æœ‹å‹åœˆéƒ½ç”¨åˆ°äº†æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042221337.png"></p><blockquote><p>åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œåœ¨æ–°å¢å‘˜å·¥çš„æ—¶å€™ï¼Œè¦ä¸Šä¼ å‘˜å·¥çš„å¤´åƒï¼Œæ­¤æ—¶å°±ä¼šæ¶‰åŠåˆ°æ–‡ä»¶ä¸Šä¼ çš„åŠŸèƒ½ã€‚åœ¨è¿›è¡Œæ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œæˆ‘ä»¬ç‚¹å‡»åŠ å·æˆ–è€…æ˜¯ç‚¹å‡»å›¾ç‰‡ï¼Œå°±å¯ä»¥é€‰æ‹©æ‰‹æœºæˆ–è€…æ˜¯ç”µè„‘æœ¬åœ°çš„å›¾ç‰‡æ–‡ä»¶äº†ã€‚å½“æˆ‘ä»¬é€‰æ‹©äº†æŸä¸€ä¸ªå›¾ç‰‡æ–‡ä»¶ä¹‹åï¼Œè¿™ä¸ªæ–‡ä»¶å°±ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œä»è€Œå®Œæˆæ–‡ä»¶ä¸Šä¼ çš„æ“ä½œã€‚</p></blockquote><p>æƒ³è¦å®Œæˆæ–‡ä»¶ä¸Šä¼ è¿™ä¸ªåŠŸèƒ½éœ€è¦æ¶‰åŠåˆ°ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>å‰ç«¯ç¨‹åº</li><li>æœåŠ¡ç«¯ç¨‹åº</li></ol><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹åœ¨å‰ç«¯ç¨‹åºä¸­è¦å®Œæˆå“ªäº›ä»£ç ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/upload<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>å§“å: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>    å¹´é¾„: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>age<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>    å¤´åƒ: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æäº¤<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šä¼ æ–‡ä»¶çš„åŸå§‹formè¡¨å•ï¼Œè¦æ±‚è¡¨å•å¿…é¡»å…·å¤‡ä»¥ä¸‹ä¸‰ç‚¹ï¼ˆä¸Šä¼ æ–‡ä»¶é¡µé¢ä¸‰è¦ç´ ï¼‰ï¼š</p><ul><li><p>è¡¨å•å¿…é¡»æœ‰fileåŸŸï¼Œç”¨äºé€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶</p><blockquote><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote></li><li><p>è¡¨å•æäº¤æ–¹å¼å¿…é¡»ä¸ºPOST</p><blockquote><p>é€šå¸¸ä¸Šä¼ çš„æ–‡ä»¶ä¼šæ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ POST æäº¤æ–¹å¼</p></blockquote></li><li><p>è¡¨å•çš„ç¼–ç ç±»å‹enctypeå¿…é¡»è¦è®¾ç½®ä¸ºï¼šmultipart/form-data</p><blockquote><p>æ™®é€šé»˜è®¤çš„ç¼–ç æ ¼å¼æ˜¯ä¸é€‚åˆä¼ è¾“å¤§å‹çš„äºŒè¿›åˆ¶æ•°æ®çš„ï¼Œæ‰€ä»¥åœ¨æ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œè¡¨å•çš„ç¼–ç æ ¼å¼å¿…é¡»è®¾ç½®ä¸ºmultipart/form-data</p></blockquote></li></ul><p>å‰ç«¯é¡µé¢çš„3è¦ç´ æˆ‘ä»¬äº†è§£åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥éªŒè¯ä¸‹æ‰€è®²è§£çš„æ–‡ä»¶ä¸Šä¼ 3è¦ç´ ã€‚</p><p>åœ¨æä¾›çš„â€è¯¾ç¨‹èµ„æ–™â€ä¸­æœ‰ä¸€ä¸ªåå«â€æ–‡ä»¶ä¸Šä¼ â€çš„æ–‡ä»¶å¤¹ï¼Œç›´æ¥å°†é‡Œçš„â€upload.htmlâ€æ–‡ä»¶ï¼Œå¤åˆ¶åˆ°springbooté¡¹ç›®å·¥ç¨‹ä¸‹çš„staticç›®å½•é‡Œé¢ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042221055.png"></p><p>ä¸‹é¢æˆ‘ä»¬æ¥éªŒè¯ï¼šåˆ é™¤formè¡¨å•ä¸­enctypeå±æ€§å€¼ï¼Œä¼šæ˜¯ä»€ä¹ˆæƒ…å†µï¼Ÿ</p><ol><li>åœ¨IDEAä¸­ç›´æ¥ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€upload.htmlé¡µé¢</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042220858.png"></p><ol start="2"><li>é€‰æ‹©è¦ä¸Šä¼ çš„æœ¬åœ°æ–‡ä»¶</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042220310.png"></p><ol start="3"><li>ç‚¹å‡»â€æäº¤â€æŒ‰é’®ï¼Œè¿›å…¥åˆ°å¼€å‘è€…æ¨¡å¼è§‚å¯Ÿ</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042220068.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042220259.png"></p><p>æˆ‘ä»¬å†æ¥éªŒè¯ï¼šè®¾ç½®formè¡¨å•ä¸­enctypeå±æ€§å€¼ä¸ºmultipart/form-dataï¼Œä¼šæ˜¯ä»€ä¹ˆæƒ…å†µï¼Ÿ</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/upload<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>       å§“å: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>       å¹´é¾„: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>age<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>       å¤´åƒ: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æäº¤<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042220479.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042220571.png"></p><p>çŸ¥é“äº†å‰ç«¯ç¨‹åºä¸­éœ€è¦è®¾ç½®ä¸Šä¼ æ–‡ä»¶é¡µé¢ä¸‰è¦ç´ ï¼Œé‚£æˆ‘ä»¬çš„åç«¯ç¨‹åºåˆæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p><ul><li><p>é¦–å…ˆåœ¨æœåŠ¡ç«¯å®šä¹‰è¿™ä¹ˆä¸€ä¸ªcontrollerï¼Œç”¨æ¥è¿›è¡Œæ–‡ä»¶ä¸Šä¼ ï¼Œç„¶ååœ¨controllerå½“ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•æ¥å¤„ç†<code>/upload</code> è¯·æ±‚</p></li><li><p>åœ¨å®šä¹‰çš„æ–¹æ³•ä¸­æ¥æ”¶æäº¤è¿‡æ¥çš„æ•°æ® ï¼ˆæ–¹æ³•ä¸­çš„å½¢å‚åå’Œè¯·æ±‚å‚æ•°çš„åå­—ä¿æŒä¸€è‡´ï¼‰</p><ul><li>ç”¨æˆ·åï¼šString  name</li><li>å¹´é¾„ï¼š Integer  age</li><li>æ–‡ä»¶ï¼š MultipartFile  image</li></ul><blockquote><p>Springä¸­æä¾›äº†ä¸€ä¸ªAPIï¼šMultipartFileï¼Œä½¿ç”¨è¿™ä¸ªAPIå°±å¯ä»¥æ¥æ¥æ”¶åˆ°ä¸Šä¼ çš„æ–‡ä»¶</p></blockquote></li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042220933.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042220083.png" alt="è‹¥ä¸ä¸€è‡´ï¼Œå¯ä»¥è¿›è¡ŒæŒ‡å®š"></p><blockquote><p>é—®é¢˜ï¼šå¦‚æœè¡¨å•é¡¹çš„åå­—å’Œæ–¹æ³•ä¸­å½¢å‚åä¸ä¸€è‡´ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</p><ul><li><pre><code class="javascript">public Result upload(String username,                     Integer age,                      MultipartFile file) //fileå½¢å‚åå’Œè¯·æ±‚å‚æ•°åimageä¸ä¸€è‡´<pre class="line-numbers language-none"><code class="language-none">è§£å†³ï¼šä½¿ç”¨@RequestParamæ³¨è§£è¿›è¡Œå‚æ•°ç»‘å®š- ~~~java  public Result upload(String username,                       Integer age,                        @RequestParam("image") MultipartFile file)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></code></pre></li></ul></blockquote><p><strong>UploadControllerä»£ç ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UploadController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">Integer</span> age<span class="token punctuation">,</span> <span class="token class-name">MultipartFile</span> image<span class="token punctuation">)</span>  <span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"æ–‡ä»¶ä¸Šä¼ ï¼š{},{},{}"</span><span class="token punctuation">,</span>username<span class="token punctuation">,</span>age<span class="token punctuation">,</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>åç«¯ç¨‹åºç¼–å†™å®Œæˆä¹‹åï¼Œæ‰“ä¸ªæ–­ç‚¹ï¼Œä»¥debugæ–¹å¼å¯åŠ¨SpringBooté¡¹ç›®</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042220744.png"></p><blockquote><p>æ‰“å¼€æµè§ˆå™¨è¾“å…¥ï¼š<a href="http://localhost:8080/upload.html">http://localhost:8080/upload.html</a> ï¼Œ å½•å…¥æ•°æ®å¹¶æäº¤</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042219123.png"></p><p>é€šè¿‡åç«¯ç¨‹åºæ§åˆ¶å°å¯ä»¥çœ‹åˆ°ï¼Œä¸Šä¼ çš„æ–‡ä»¶æ˜¯å­˜æ”¾åœ¨ä¸€ä¸ªä¸´æ—¶ç›®å½•</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042219486.png"></p><blockquote><p>æ‰“å¼€ä¸´æ—¶ç›®å½•å¯ä»¥çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042219427.png"></p><blockquote><p>è¡¨å•æäº¤çš„ä¸‰é¡¹æ•°æ®(å§“åã€å¹´é¾„ã€æ–‡ä»¶)ï¼Œåˆ†åˆ«å­˜å‚¨åœ¨ä¸åŒçš„ä¸´æ—¶æ–‡ä»¶ä¸­ï¼š</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042219992.png"></p><blockquote><p>å½“æˆ‘ä»¬ç¨‹åºè¿è¡Œå®Œæ¯•ä¹‹åï¼Œè¿™ä¸ªä¸´æ—¶æ–‡ä»¶ä¼šè‡ªåŠ¨åˆ é™¤ã€‚ </p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¦‚æœæƒ³è¦å®ç°æ–‡ä»¶ä¸Šä¼ ï¼Œéœ€è¦å°†è¿™ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œè¦è½¬å­˜åˆ°æˆ‘ä»¬çš„ç£ç›˜ç›®å½•ä¸­ã€‚</p></blockquote><h3 id="2-2-æœ¬åœ°å­˜å‚¨"><a href="#2-2-æœ¬åœ°å­˜å‚¨" class="headerlink" title="2.2 æœ¬åœ°å­˜å‚¨"></a>2.2 æœ¬åœ°å­˜å‚¨</h3><p>å‰é¢æˆ‘ä»¬å·²åˆ†æäº†æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½å‰ç«¯å’Œåç«¯çš„åŸºç¡€ä»£ç å®ç°ï¼Œæ–‡ä»¶ä¸Šä¼ æ—¶åœ¨æœåŠ¡ç«¯ä¼šäº§ç”Ÿä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œè¯·æ±‚å“åº”å®Œæˆä¹‹åï¼Œè¿™ä¸ªä¸´æ—¶æ–‡ä»¶è¢«è‡ªåŠ¨åˆ é™¤ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œä¿å­˜ã€‚ä¸‹é¢å‘¢ï¼Œæˆ‘ä»¬å°±éœ€è¦å®Œæˆå°†ä¸Šä¼ çš„æ–‡ä»¶ä¿å­˜åœ¨æœåŠ¡å™¨çš„æœ¬åœ°ç£ç›˜ä¸Šã€‚</p><p>ä»£ç å®ç°ï¼š</p><ol><li>åœ¨æœåŠ¡å™¨æœ¬åœ°ç£ç›˜ä¸Šåˆ›å»ºimagesç›®å½•ï¼Œç”¨æ¥å­˜å‚¨ä¸Šä¼ çš„æ–‡ä»¶ï¼ˆä¾‹ï¼šEç›˜åˆ›å»ºimagesç›®å½•ï¼‰</li><li>ä½¿ç”¨MultipartFileç±»æä¾›çš„APIæ–¹æ³•ï¼ŒæŠŠä¸´æ—¶æ–‡ä»¶è½¬å­˜åˆ°æœ¬åœ°ç£ç›˜ç›®å½•ä¸‹</li></ol><blockquote><p>MultipartFile å¸¸è§æ–¹æ³•ï¼š </p><ul><li>String  getOriginalFilename();  //è·å–åŸå§‹æ–‡ä»¶å</li><li>void  transferTo(File dest);     //å°†æ¥æ”¶çš„æ–‡ä»¶è½¬å­˜åˆ°ç£ç›˜æ–‡ä»¶ä¸­</li><li>long  getSize();     //è·å–æ–‡ä»¶çš„å¤§å°ï¼Œå•ä½ï¼šå­—èŠ‚</li><li>byte[]  getBytes();    //è·å–æ–‡ä»¶å†…å®¹çš„å­—èŠ‚æ•°ç»„</li><li>InputStream  getInputStream();    //è·å–æ¥æ”¶åˆ°çš„æ–‡ä»¶å†…å®¹çš„è¾“å…¥æµ</li></ul></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UploadController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">Integer</span> age<span class="token punctuation">,</span> <span class="token class-name">MultipartFile</span> image<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"æ–‡ä»¶ä¸Šä¼ ï¼š{},{},{}"</span><span class="token punctuation">,</span>username<span class="token punctuation">,</span>age<span class="token punctuation">,</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è·å–åŸå§‹æ–‡ä»¶å</span>        <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å°†æ–‡ä»¶å­˜å‚¨åœ¨æœåŠ¡å™¨çš„ç£ç›˜ç›®å½•</span>        image<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"E:/images/"</span><span class="token operator">+</span>originalFilename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ©ç”¨postmanæµ‹è¯•ï¼š</p><blockquote><p>æ³¨æ„ï¼šè¯·æ±‚å‚æ•°åå’Œcontrolleræ–¹æ³•å½¢å‚åä¿æŒä¸€è‡´</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042219553.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042219278.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042219954.png"></p><p>é€šè¿‡postmanæµ‹è¯•ï¼Œæˆ‘ä»¬å‘ç°æ–‡ä»¶ä¸Šä¼ æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯ç”±äºæˆ‘ä»¬æ˜¯ä½¿ç”¨åŸå§‹æ–‡ä»¶åä½œä¸ºæ‰€ä¸Šä¼ æ–‡ä»¶çš„å­˜å‚¨åå­—ï¼Œå½“æˆ‘ä»¬å†æ¬¡ä¸Šä¼ ä¸€ä¸ªåä¸º1.jpgæ–‡ä»¶æ—¶ï¼Œå‘ç°ä¼šæŠŠä¹‹å‰å·²ç»ä¸Šä¼ æˆåŠŸçš„æ–‡ä»¶è¦†ç›–æ‰ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼šä¿è¯æ¯æ¬¡ä¸Šä¼ æ–‡ä»¶æ—¶æ–‡ä»¶åéƒ½å”¯ä¸€çš„ï¼ˆä½¿ç”¨UUIDè·å–éšæœºæ–‡ä»¶åï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UploadController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">Integer</span> age<span class="token punctuation">,</span> <span class="token class-name">MultipartFile</span> image<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"æ–‡ä»¶ä¸Šä¼ ï¼š{},{},{}"</span><span class="token punctuation">,</span>username<span class="token punctuation">,</span>age<span class="token punctuation">,</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è·å–åŸå§‹æ–‡ä»¶å</span>        <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ„å»ºæ–°çš„æ–‡ä»¶å</span>        <span class="token class-name">String</span> extname <span class="token operator">=</span> originalFilename<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>originalFilename<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ–‡ä»¶æ‰©å±•å</span>        <span class="token class-name">String</span> newFileName <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>extname<span class="token punctuation">;</span><span class="token comment">//éšæœºå+æ–‡ä»¶æ‰©å±•å</span>        <span class="token comment">//å°†æ–‡ä»¶å­˜å‚¨åœ¨æœåŠ¡å™¨çš„ç£ç›˜ç›®å½•</span>        image<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"E:/images/"</span><span class="token operator">+</span>newFileName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨è§£å†³äº†æ–‡ä»¶åå”¯ä¸€æ€§çš„é—®é¢˜åï¼Œæˆ‘ä»¬å†æ¬¡ä¸Šä¼ ä¸€ä¸ªè¾ƒå¤§çš„æ–‡ä»¶(è¶…å‡º1M)æ—¶å‘ç°ï¼Œåç«¯ç¨‹åºæŠ¥é”™ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042219856.png"></p><p>æŠ¥é”™åŸå› å‘¢æ˜¯å› ä¸ºï¼šåœ¨SpringBootä¸­ï¼Œæ–‡ä»¶ä¸Šä¼ æ—¶é»˜è®¤å•ä¸ªæ–‡ä»¶æœ€å¤§å¤§å°ä¸º1M</p><p>é‚£ä¹ˆå¦‚æœéœ€è¦ä¸Šä¼ å¤§æ–‡ä»¶ï¼Œå¯ä»¥åœ¨application.propertiesè¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">#é…ç½®å•ä¸ªæ–‡ä»¶æœ€å¤§ä¸Šä¼ å¤§å°</span><span class="token key attr-name">spring.servlet.multipart.max-file-size</span><span class="token punctuation">=</span><span class="token value attr-value">10MB</span><span class="token comment">#é…ç½®å•ä¸ªè¯·æ±‚æœ€å¤§ä¸Šä¼ å¤§å°(ä¸€æ¬¡è¯·æ±‚å¯ä»¥ä¸Šä¼ å¤šä¸ªæ–‡ä»¶)</span><span class="token key attr-name">spring.servlet.multipart.max-request-size</span><span class="token punctuation">=</span><span class="token value attr-value">100MB</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ°æ—¶æ­¤ï¼Œæˆ‘ä»¬æ–‡ä»¶ä¸Šä¼ çš„æœ¬åœ°å­˜å‚¨æ–¹å¼å·²å®Œæˆäº†ã€‚ä½†æ˜¯è¿™ç§æœ¬åœ°å­˜å‚¨æ–¹å¼è¿˜å­˜åœ¨ä¸€é—®é¢˜ï¼š </p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042218327.png"> </p><p>å¦‚æœç›´æ¥å­˜å‚¨åœ¨æœåŠ¡å™¨çš„ç£ç›˜ç›®å½•ä¸­ï¼Œå­˜åœ¨ä»¥ä¸‹ç¼ºç‚¹ï¼š</p><ul><li>ä¸å®‰å…¨ï¼šç£ç›˜å¦‚æœæŸåï¼Œæ‰€æœ‰çš„æ–‡ä»¶å°±ä¼šä¸¢å¤±</li><li>å®¹é‡æœ‰é™ï¼šå¦‚æœå­˜å‚¨å¤§é‡çš„å›¾ç‰‡ï¼Œç£ç›˜ç©ºé—´æœ‰é™(ç£ç›˜ä¸å¯èƒ½æ— é™åˆ¶æ‰©å®¹)</li><li>æ— æ³•ç›´æ¥è®¿é—®</li></ul><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜å‘¢ï¼Œé€šå¸¸æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>è‡ªå·±æ­å»ºå­˜å‚¨æœåŠ¡å™¨ï¼Œå¦‚ï¼šfastDFS ã€MinIO</li><li>ä½¿ç”¨ç°æˆçš„äº‘æœåŠ¡ï¼Œå¦‚ï¼šé˜¿é‡Œäº‘ï¼Œè…¾è®¯äº‘ï¼Œåä¸ºäº‘</li></ul><h3 id="2-3-é˜¿é‡Œäº‘OSS"><a href="#2-3-é˜¿é‡Œäº‘OSS" class="headerlink" title="2.3 é˜¿é‡Œäº‘OSS"></a>2.3 é˜¿é‡Œäº‘OSS</h3><h4 id="2-3-1-å‡†å¤‡"><a href="#2-3-1-å‡†å¤‡" class="headerlink" title="2.3.1 å‡†å¤‡"></a>2.3.1 å‡†å¤‡</h4><p>é˜¿é‡Œäº‘æ˜¯é˜¿é‡Œå·´å·´é›†å›¢æ——ä¸‹å…¨çƒé¢†å…ˆçš„äº‘è®¡ç®—å…¬å¸ï¼Œä¹Ÿæ˜¯å›½å†…æœ€å¤§çš„äº‘æœåŠ¡æä¾›å•† ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042218743.png"></p><blockquote><p>äº‘æœåŠ¡æŒ‡çš„å°±æ˜¯é€šè¿‡äº’è”ç½‘å¯¹å¤–æä¾›çš„å„ç§å„æ ·çš„æœåŠ¡ï¼Œæ¯”å¦‚åƒï¼šè¯­éŸ³æœåŠ¡ã€çŸ­ä¿¡æœåŠ¡ã€é‚®ä»¶æœåŠ¡ã€è§†é¢‘ç›´æ’­æœåŠ¡ã€æ–‡å­—è¯†åˆ«æœåŠ¡ã€å¯¹è±¡å­˜å‚¨æœåŠ¡ç­‰ç­‰ã€‚</p><p>å½“æˆ‘ä»¬åœ¨é¡¹ç›®å¼€å‘æ—¶éœ€è¦ç”¨åˆ°æŸä¸ªæˆ–æŸäº›æœåŠ¡ï¼Œå°±ä¸éœ€è¦è‡ªå·±æ¥å¼€å‘äº†ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨é˜¿é‡Œäº‘æä¾›å¥½çš„è¿™äº›ç°æˆæœåŠ¡å°±å¯ä»¥äº†ã€‚æ¯”å¦‚ï¼šåœ¨é¡¹ç›®å¼€å‘å½“ä¸­ï¼Œæˆ‘ä»¬è¦å®ç°ä¸€ä¸ªçŸ­ä¿¡å‘é€çš„åŠŸèƒ½ï¼Œå¦‚æœæˆ‘ä»¬é¡¹ç›®ç»„è‡ªå·±å®ç°ï¼Œå°†ä¼šéå¸¸ç¹çï¼Œå› ä¸ºä½ éœ€è¦å’Œå„ä¸ªè¿è¥å•†è¿›è¡Œå¯¹æ¥ã€‚è€Œæ­¤æ—¶é˜¿é‡Œäº‘å®Œæˆäº†å’Œä¸‰å¤§è¿è¥å•†å¯¹æ¥ï¼Œå¹¶å¯¹å¤–æä¾›äº†ä¸€ä¸ªçŸ­ä¿¡æœåŠ¡ã€‚æˆ‘ä»¬é¡¹ç›®ç»„åªéœ€è¦è°ƒç”¨é˜¿é‡Œäº‘æä¾›çš„çŸ­ä¿¡æœåŠ¡ï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ¥å‘é€çŸ­ä¿¡äº†ã€‚è¿™æ ·å°±é™ä½äº†æˆ‘ä»¬é¡¹ç›®çš„å¼€å‘éš¾åº¦ï¼ŒåŒæ—¶ä¹Ÿæé«˜äº†é¡¹ç›®çš„å¼€å‘æ•ˆç‡ã€‚ï¼ˆå¤§ç™½è¯ï¼šåˆ«äººå¸®æˆ‘ä»¬å®ç°å¥½äº†åŠŸèƒ½ï¼Œæˆ‘ä»¬åªè¦è°ƒç”¨å³å¯ï¼‰</p><p>äº‘æœåŠ¡æä¾›å•†ç»™æˆ‘ä»¬æä¾›çš„è½¯ä»¶æœåŠ¡é€šå¸¸æ˜¯éœ€è¦æ”¶å–ä¸€éƒ¨åˆ†è´¹ç”¨çš„ã€‚</p></blockquote><p>é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨OSSï¼ˆObject Storage Serviceï¼‰ï¼Œæ˜¯ä¸€æ¬¾æµ·é‡ã€å®‰å…¨ã€ä½æˆæœ¬ã€é«˜å¯é çš„äº‘å­˜å‚¨æœåŠ¡ã€‚ä½¿ç”¨OSSï¼Œæ‚¨å¯ä»¥é€šè¿‡ç½‘ç»œéšæ—¶å­˜å‚¨å’Œè°ƒç”¨åŒ…æ‹¬æ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘ç­‰åœ¨å†…çš„å„ç§æ–‡ä»¶ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042218587.png"> </p><p>åœ¨æˆ‘ä»¬ä½¿ç”¨äº†é˜¿é‡Œäº‘OSSå¯¹è±¡å­˜å‚¨æœåŠ¡ä¹‹åï¼Œæˆ‘ä»¬çš„é¡¹ç›®å½“ä¸­å¦‚æœæ¶‰åŠåˆ°æ–‡ä»¶ä¸Šä¼ è¿™æ ·çš„ä¸šåŠ¡ï¼Œåœ¨å‰ç«¯è¿›è¡Œæ–‡ä»¶ä¸Šä¼ å¹¶è¯·æ±‚åˆ°æœåŠ¡ç«¯æ—¶ï¼Œåœ¨æœåŠ¡å™¨æœ¬åœ°ç£ç›˜å½“ä¸­å°±ä¸éœ€è¦å†æ¥å­˜å‚¨æ–‡ä»¶äº†ã€‚æˆ‘ä»¬ç›´æ¥å°†æ¥æ”¶åˆ°çš„æ–‡ä»¶ä¸Šä¼ åˆ°ossï¼Œç”± osså¸®æˆ‘ä»¬å­˜å‚¨å’Œç®¡ç†ï¼ŒåŒæ—¶é˜¿é‡Œäº‘çš„osså­˜å‚¨æœåŠ¡è¿˜ä¿éšœäº†æˆ‘ä»¬æ‰€å­˜å‚¨å†…å®¹çš„å®‰å…¨å¯é ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042218150.png"></p><p>é‚£æˆ‘ä»¬å­¦ä¹ ä½¿ç”¨è¿™ç±»äº‘æœåŠ¡ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®æˆ‘ä»¬ä¸»è¦å­¦ä¹ çš„æ˜¯å¦‚ä½•åœ¨é¡¹ç›®å½“ä¸­æ¥ä½¿ç”¨äº‘æœåŠ¡å®Œæˆå…·ä½“çš„ä¸šåŠ¡åŠŸèƒ½ã€‚è€Œæ— è®ºä½¿ç”¨ä»€ä¹ˆæ ·çš„äº‘æœåŠ¡ï¼Œé˜¿é‡Œäº‘ä¹Ÿå¥½ï¼Œè…¾è®¯äº‘ã€åä¸ºäº‘ä¹Ÿç½¢ï¼Œåœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æœåŠ¡æ—¶ï¼Œæ“ä½œçš„æ€è·¯éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042218883.png"></p><blockquote><p>SDKï¼šSoftware Development Kit çš„ç¼©å†™ï¼Œè½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼ŒåŒ…æ‹¬è¾…åŠ©è½¯ä»¶å¼€å‘çš„ä¾èµ–ï¼ˆjaråŒ…ï¼‰ã€ä»£ç ç¤ºä¾‹ç­‰ï¼Œéƒ½å¯ä»¥å«åšSDKã€‚</p><p>ç®€å•è¯´ï¼Œsdkä¸­åŒ…å«äº†æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸‰æ–¹äº‘æœåŠ¡æ—¶æ‰€éœ€è¦çš„ä¾èµ–ï¼Œä»¥åŠä¸€äº›ç¤ºä¾‹ä»£ç ã€‚æˆ‘ä»¬å¯ä»¥å‚ç…§sdkæ‰€æä¾›çš„ç¤ºä¾‹ä»£ç å°±å¯ä»¥å®Œæˆå…¥é—¨ç¨‹åºã€‚</p></blockquote><p>ç¬¬ä¸‰æ–¹æœåŠ¡ä½¿ç”¨çš„é€šç”¨æ€è·¯ï¼Œæˆ‘ä»¬åšä¸€ä¸ªç®€å•ä»‹ç»ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸€ä¸‹æˆ‘ä»¬å½“å‰è¦ä½¿ç”¨çš„é˜¿é‡Œäº‘osså¯¹è±¡å­˜å‚¨æœåŠ¡å…·ä½“çš„ä½¿ç”¨æ­¥éª¤ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042218596.png"></p><blockquote><p>Bucketï¼šå­˜å‚¨ç©ºé—´æ˜¯ç”¨æˆ·ç”¨äºå­˜å‚¨å¯¹è±¡ï¼ˆObjectï¼Œå°±æ˜¯æ–‡ä»¶ï¼‰çš„å®¹å™¨ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½å¿…é¡»éš¶å±äºæŸä¸ªå­˜å‚¨ç©ºé—´ã€‚</p></blockquote><p>ä¸‹é¢æˆ‘ä»¬æ ¹æ®ä¹‹å‰ä»‹ç»çš„ä½¿ç”¨æ­¥éª¤ï¼Œå®Œæˆå‡†å¤‡å·¥ä½œï¼š</p><ol><li>æ³¨å†Œé˜¿é‡Œäº‘è´¦æˆ·ï¼ˆæ³¨å†Œå®Œæˆåéœ€è¦å®åè®¤è¯ï¼‰</li><li>æ³¨å†Œå®Œè´¦å·ä¹‹åï¼Œå°±å¯ä»¥ç™»å½•é˜¿é‡Œäº‘</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042218806.png"> </p><ol start="3"><li>é€šè¿‡æ§åˆ¶å°æ‰¾åˆ°å¯¹è±¡å­˜å‚¨OSSæœåŠ¡</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042218287.png"> </p><blockquote><p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è®¿é—®ï¼Œè¿˜éœ€è¦å¼€é€šå¯¹è±¡å­˜å‚¨æœåŠ¡OSS</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042218181.png"> </p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042218401.png"> </p><ol start="4"><li>å¼€é€šOSSæœåŠ¡ä¹‹åï¼Œå°±å¯ä»¥è¿›å…¥åˆ°é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨çš„æ§åˆ¶å°</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042217704.png"> </p><ol start="5"><li>ç‚¹å‡»å·¦ä¾§çš„ â€œBucketåˆ—è¡¨â€ï¼Œåˆ›å»ºä¸€ä¸ªBucket</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042217435.png"> </p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042217665.png"></p><blockquote><p>å¤§å®¶å¯ä»¥å‚ç…§â€èµ„æ–™\04. é˜¿é‡Œäº‘oss"ä¸­æä¾›çš„æ–‡æ¡£ï¼Œå¼€é€šé˜¿é‡Œäº‘OSSæœåŠ¡ã€‚</p></blockquote><h2 id="äº‘å­˜å‚¨è§£å†³æ–¹æ¡ˆ-é˜¿é‡Œäº‘OSS"><a href="#äº‘å­˜å‚¨è§£å†³æ–¹æ¡ˆ-é˜¿é‡Œäº‘OSS" class="headerlink" title="äº‘å­˜å‚¨è§£å†³æ–¹æ¡ˆ-é˜¿é‡Œäº‘OSS"></a>äº‘å­˜å‚¨è§£å†³æ–¹æ¡ˆ-é˜¿é‡Œäº‘OSS</h2><h3 id="1-é˜¿é‡Œäº‘OSSç®€ä»‹"><a href="#1-é˜¿é‡Œäº‘OSSç®€ä»‹" class="headerlink" title="1. é˜¿é‡Œäº‘OSSç®€ä»‹"></a>1. é˜¿é‡Œäº‘OSSç®€ä»‹</h3><p>â€‹é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼ˆObject Storage Serviceï¼Œç®€ç§°OSSï¼‰ä¸ºæ‚¨æä¾›åŸºäºç½‘ç»œçš„æ•°æ®å­˜å–æœåŠ¡ã€‚ä½¿ç”¨OSSï¼Œæ‚¨å¯ä»¥é€šè¿‡ç½‘ç»œéšæ—¶å­˜å‚¨å’Œè°ƒç”¨åŒ…æ‹¬æ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘ç­‰åœ¨å†…çš„å„ç§éç»“æ„åŒ–æ•°æ®æ–‡ä»¶ã€‚<br>é˜¿é‡Œäº‘OSSå°†æ•°æ®æ–‡ä»¶ä»¥å¯¹è±¡ï¼ˆobjectï¼‰çš„å½¢å¼ä¸Šä¼ åˆ°å­˜å‚¨ç©ºé—´ï¼ˆbucketï¼‰ä¸­ã€‚</p><p>â€‹æ‚¨å¯ä»¥è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ªæˆ–è€…å¤šä¸ªå­˜å‚¨ç©ºé—´ï¼Œå‘æ¯ä¸ªå­˜å‚¨ç©ºé—´ä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ã€‚</li><li>é€šè¿‡è·å–å·²ä¸Šä¼ æ–‡ä»¶çš„åœ°å€è¿›è¡Œæ–‡ä»¶çš„åˆ†äº«å’Œä¸‹è½½ã€‚</li><li>é€šè¿‡ä¿®æ”¹å­˜å‚¨ç©ºé—´æˆ–æ–‡ä»¶çš„å±æ€§æˆ–å…ƒä¿¡æ¯æ¥è®¾ç½®ç›¸åº”çš„è®¿é—®æƒé™ã€‚</li><li>åœ¨é˜¿é‡Œäº‘ç®¡ç†æ§åˆ¶å°æ‰§è¡ŒåŸºæœ¬å’Œé«˜çº§OSSä»»åŠ¡ã€‚</li><li>ä½¿ç”¨é˜¿é‡Œäº‘å¼€å‘å·¥å…·åŒ…æˆ–ç›´æ¥åœ¨åº”ç”¨ç¨‹åºä¸­è¿›è¡ŒRESTful APIè°ƒç”¨æ‰§è¡ŒåŸºæœ¬å’Œé«˜çº§OSSä»»åŠ¡</li></ul><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">#é˜¿é‡Œäº‘<span class="token constant">OSS</span>é…ç½®aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span>endpoint<span class="token operator">=</span>https<span class="token operator">:</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span>accessKeyId<span class="token operator">=</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span>accessKeySecret<span class="token operator">=</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span>bucketName<span class="token operator">=</span>web<span class="token operator">-</span>tlias<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-OSSå¼€é€š"><a href="#2-OSSå¼€é€š" class="headerlink" title="2. OSSå¼€é€š"></a>2. OSSå¼€é€š</h3><p>ï¼ˆ1ï¼‰æ‰“å¼€<a href="https://www.aliyun.com/">https://www.aliyun.com/</a> ï¼Œç”³è¯·é˜¿é‡Œäº‘è´¦å·å¹¶å®Œæˆå®åè®¤è¯ã€‚</p><p>ï¼ˆ2ï¼‰å……å€¼ (å¯ä»¥ä¸ç”¨åš)</p><p>ï¼ˆ3ï¼‰å¼€é€šOSS</p><p>ç™»å½•é˜¿é‡Œäº‘å®˜ç½‘ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„æ§åˆ¶å°ã€‚</p><p>å°†é¼ æ ‡ç§»è‡³äº§å“ï¼Œæ‰¾åˆ°å¹¶å•å‡»å¯¹è±¡å­˜å‚¨OSSï¼Œæ‰“å¼€OSSäº§å“è¯¦æƒ…é¡µé¢ã€‚åœ¨OSSäº§å“è¯¦æƒ…é¡µä¸­çš„å•å‡»ç«‹å³å¼€é€šã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221129214332892.png" alt="image-20221129214332892" style="zoom:67%;"> <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221129214403131.png" alt="image-20221129214403131" style="zoom:80%;"> <p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042217286.png"> </p><p>å¼€é€šæœåŠ¡åï¼Œåœ¨OSSäº§å“è¯¦æƒ…é¡µé¢å•å‡»ç®¡ç†æ§åˆ¶å°ç›´æ¥è¿›å…¥OSSç®¡ç†æ§åˆ¶å°ç•Œé¢ã€‚æ‚¨ä¹Ÿå¯ä»¥å•å‡»ä½äºå®˜ç½‘é¦–é¡µå³ä¸Šæ–¹èœå•æ çš„æ§åˆ¶å°ï¼Œè¿›å…¥é˜¿é‡Œäº‘ç®¡ç†æ§åˆ¶å°é¦–é¡µï¼Œç„¶åå•å‡»å·¦ä¾§çš„å¯¹è±¡å­˜å‚¨OSSèœå•è¿›å…¥<a href="https://oss.console.aliyun.com/overview">OSSç®¡ç†æ§åˆ¶å°ç•Œé¢</a>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042217226.png"></p><p>æˆ–è€…</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/01/17-f05c854e8abd9218113de306cb275cfb-image-20250117160306339.png" alt="æ–°ç‰ˆé¡µé¢"></p><p>ï¼ˆ4ï¼‰åˆ›å»ºå­˜å‚¨ç©ºé—´</p><p>æ–°å»ºBucketï¼Œå‘½åä¸º hmleadnews ï¼Œè¯»å†™æƒé™ä¸º <strong>==å…¬å…±è¯»==</strong></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221128014414947.png" alt="image-20221128014414947" style="zoom:67%;">  <p>æˆ–è€…</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/01/17-e115e0fa9921d54219beb876f562ab18-image-20250117160655734.png" alt="æ–°ç‰ˆé¡µé¢"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/01/17-d7376ac2a8a57d6b1a9beed0ebac44ac-image-20250117160748917.png" alt="æ–°ç‰ˆé¡µé¢"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/01/17-68e726392c04a00d17279dddf23c0249-image-20250117161034295.png" alt="è¿›å…¥bucket"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/01/17-39e058f333eb7f7d1e05a15addfa8edc-image-20250117161209808.png" alt="ä¿®æ”¹æƒé™"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/01/17-031138d2720a54617b153d0905dc865e-image-20250117161306245.png" alt="è®¾ç½®å…¬å…±è¯»"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/01/17-8f9fe6ef342a011e849f737ee5ba6d84-image-20250117161515073.png" alt="æ¦‚è§ˆ"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/01/17-1af7b2f25828e67c8ca65054288f40c2-image-20250117161638182.png" alt="é…ç½®AK"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/01/17-4da13be0bf185889482f20b391f998c5-image-20250117162109406.png" alt="image-20250117162109406"></p><h3 id="3-OSSå¿«é€Ÿå…¥é—¨"><a href="#3-OSSå¿«é€Ÿå…¥é—¨" class="headerlink" title="3. OSSå¿«é€Ÿå…¥é—¨"></a>3. OSSå¿«é€Ÿå…¥é—¨</h3><p><a href="https://help.aliyun.com/document_detail/32009.html?spm=a2c4g.11186623.6.919.7c264562C2Fjfs">å‚è€ƒæ–‡æ¡£å®˜æ–¹</a></p><p>ï¼ˆ1ï¼‰åˆ›å»ºæµ‹è¯•å·¥ç¨‹ï¼Œå¼•å…¥ä¾èµ–</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-sdk-oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.15.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ2ï¼‰æ–°å»ºç±»å’Œmainæ–¹æ³•</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">ClientException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSS</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSSClientBuilder</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSSException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliOssTest</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testOss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">// Endpointä»¥åä¸œ1ï¼ˆæ­å·ï¼‰ä¸ºä¾‹ï¼Œå…¶å®ƒRegionè¯·æŒ‰å®é™…æƒ…å†µå¡«å†™ã€‚</span>        <span class="token class-name">String</span> endpoint <span class="token operator">=</span> <span class="token string">"https://oss-cn-hangzhou.aliyuncs.com"</span><span class="token punctuation">;</span>        <span class="token comment">// é˜¿é‡Œäº‘è´¦å·AccessKeyæ‹¥æœ‰æ‰€æœ‰APIçš„è®¿é—®æƒé™ï¼Œé£é™©å¾ˆé«˜ã€‚å¼ºçƒˆå»ºè®®æ‚¨åˆ›å»ºå¹¶ä½¿ç”¨RAMç”¨æˆ·è¿›è¡ŒAPIè®¿é—®æˆ–æ—¥å¸¸è¿ç»´ï¼Œè¯·ç™»å½•RAMæ§åˆ¶å°åˆ›å»ºRAMç”¨æˆ·ã€‚</span>        <span class="token class-name">String</span> accessKeyId <span class="token operator">=</span> <span class="token string">"---------------------"</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> accessKeySecret <span class="token operator">=</span> <span class="token string">"-----------------------"</span><span class="token punctuation">;</span>        <span class="token comment">// å¡«å†™Bucketåç§°ï¼Œä¾‹å¦‚examplebucketã€‚</span>        <span class="token class-name">String</span> bucketName <span class="token operator">=</span> <span class="token string">"-----------"</span><span class="token punctuation">;</span>        <span class="token comment">// å¡«å†™Objectå®Œæ•´è·¯å¾„ï¼Œå®Œæ•´è·¯å¾„ä¸­ä¸èƒ½åŒ…å«Bucketåç§°ï¼Œä¾‹å¦‚exampledir/exampleobject.txtã€‚</span>        <span class="token class-name">String</span> objectName <span class="token operator">=</span> <span class="token string">"0001.jpg"</span><span class="token punctuation">;</span>        <span class="token comment">// å¡«å†™æœ¬åœ°æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œä¾‹å¦‚D:\\localpath\\examplefile.txtã€‚</span>        <span class="token comment">// å¦‚æœæœªæŒ‡å®šæœ¬åœ°è·¯å¾„ï¼Œåˆ™é»˜è®¤ä»ç¤ºä¾‹ç¨‹åºæ‰€å±é¡¹ç›®å¯¹åº”æœ¬åœ°è·¯å¾„ä¸­ä¸Šä¼ æ–‡ä»¶æµã€‚</span>        <span class="token class-name">String</span> filePath<span class="token operator">=</span> <span class="token string">"C:\\Users\\Administrator\\Pictures\\Saved Pictures\\10.jpg"</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºOSSClientå®ä¾‹ã€‚</span>        <span class="token class-name">OSS</span> ossClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSSClientBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>endpoint<span class="token punctuation">,</span> accessKeyId<span class="token punctuation">,</span> accessKeySecret<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// åˆ›å»ºPutObjectè¯·æ±‚ã€‚</span>            ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span>bucketName<span class="token punctuation">,</span> objectName<span class="token punctuation">,</span> inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">OSSException</span> oe<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Caught an OSSException, which means your request made it to OSS, "</span>                    <span class="token operator">+</span> <span class="token string">"but was rejected with an error response for some reason."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Error Message:"</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getErrorMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Error Code:"</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getErrorCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Request ID:"</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getRequestId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Host ID:"</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getHostId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ce<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Caught an ClientException, which means the client encountered "</span>                    <span class="token operator">+</span> <span class="token string">"a serious internal problem while trying to communicate with OSS, "</span>                    <span class="token operator">+</span> <span class="token string">"such as not being able to access the network."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Error Message:"</span> <span class="token operator">+</span> ce<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>ossClient <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-è·å–AccessKeyId"><a href="#4-è·å–AccessKeyId" class="headerlink" title="4. è·å–AccessKeyId"></a>4. è·å–AccessKeyId</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042217891.png"></p><h3 id="5-å·¥å…·ç±»"><a href="#5-å·¥å…·ç±»" class="headerlink" title="5.å·¥å…·ç±»"></a>5.å·¥å…·ç±»</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>utils</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSS</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSSClientBuilder</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>multipart<span class="token punctuation">.</span></span><span class="token class-name">MultipartFile</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">UUID</span></span><span class="token punctuation">;</span><span class="token comment">/** * é˜¿é‡Œäº‘ OSS å·¥å…·ç±» */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliOSSUtils</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> endpoint <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeyId <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeySecret <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> bucketName <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token comment">/**     * å®ç°ä¸Šä¼ å›¾ç‰‡åˆ°OSS     */</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> file<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        <span class="token comment">// è·å–ä¸Šä¼ çš„æ–‡ä»¶çš„è¾“å…¥æµ</span>        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é¿å…æ–‡ä»¶è¦†ç›–</span>        <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> originalFilename<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>originalFilename<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ä¸Šä¼ æ–‡ä»¶åˆ° OSS</span>        <span class="token class-name">OSS</span> ossClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSSClientBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>endpoint<span class="token punctuation">,</span> accessKeyId<span class="token punctuation">,</span> accessKeySecret<span class="token punctuation">)</span><span class="token punctuation">;</span>        ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span>bucketName<span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ–‡ä»¶è®¿é—®è·¯å¾„</span>        <span class="token class-name">String</span> url <span class="token operator">=</span> endpoint<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"//"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"//"</span> <span class="token operator">+</span> bucketName <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span> endpoint<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"//"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> fileName<span class="token punctuation">;</span>        <span class="token comment">// å…³é—­ossClient</span>        ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> url<span class="token punctuation">;</span><span class="token comment">// æŠŠä¸Šä¼ åˆ°ossçš„è·¯å¾„è¿”å›</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-3-2-å…¥é—¨"><a href="#2-3-2-å…¥é—¨" class="headerlink" title="2.3.2 å…¥é—¨"></a>2.3.2 å…¥é—¨</h4><p>é˜¿é‡Œäº‘oss å¯¹è±¡å­˜å‚¨æœåŠ¡çš„å‡†å¤‡å·¥ä½œæˆ‘ä»¬å·²ç»å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å®Œæˆç¬¬äºŒæ­¥æ“ä½œï¼šå‚ç…§å®˜æ–¹æ‰€æä¾›çš„sdkç¤ºä¾‹æ¥ç¼–å†™å…¥é—¨ç¨‹åºã€‚</p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ¥æ‰“å¼€é˜¿é‡Œäº‘OSSçš„å®˜æ–¹æ–‡æ¡£ï¼Œåœ¨å®˜æ–¹æ–‡æ¡£ä¸­æ‰¾åˆ° SDK çš„ç¤ºä¾‹ä»£ç ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042216237.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042216917.png"></p><blockquote><p>å¦‚æœæ˜¯åœ¨å®é™…å¼€å‘å½“ä¸­ï¼Œæˆ‘ä»¬æ˜¯éœ€è¦ä»å‰å¾€åä»”ç»†çš„å»é˜…è¯»è¿™ä¸€ä»½æ–‡æ¡£çš„ï¼Œä½†æ˜¯ç”±äºç°åœ¨æ˜¯æ•™å­¦ï¼Œæˆ‘ä»¬å°±åªæŒ‘é‡ç‚¹çš„å»çœ‹ã€‚æœ‰å…´è¶£çš„åŒå­¦å¤§å®¶ä¸‹æ¥ä¹Ÿå¯ä»¥è‡ªå·±å»çœ‹ä¸€ä¸‹è¿™ä»½å®˜æ–¹æ–‡æ¡£ã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042216889.png"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042216468.png"></p><p>å‚ç…§å®˜æ–¹æä¾›çš„SDKï¼Œæ”¹é€ ä¸€ä¸‹ï¼Œå³å¯å®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">ClientException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSS</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSSClientBuilder</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSSException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">PutObjectRequest</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">PutObjectResult</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliOssTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">// Endpointä»¥åä¸œ1ï¼ˆæ­å·ï¼‰ä¸ºä¾‹ï¼Œå…¶å®ƒRegionè¯·æŒ‰å®é™…æƒ…å†µå¡«å†™ã€‚</span>        <span class="token class-name">String</span> endpoint <span class="token operator">=</span> <span class="token string">"oss-cn-shanghai.aliyuncs.com"</span><span class="token punctuation">;</span>                <span class="token comment">// é˜¿é‡Œäº‘è´¦å·AccessKeyæ‹¥æœ‰æ‰€æœ‰APIçš„è®¿é—®æƒé™ï¼Œé£é™©å¾ˆé«˜ã€‚å¼ºçƒˆå»ºè®®æ‚¨åˆ›å»ºå¹¶ä½¿ç”¨RAMç”¨æˆ·è¿›è¡ŒAPIè®¿é—®æˆ–æ—¥å¸¸è¿ç»´ï¼Œè¯·ç™»å½•RAMæ§åˆ¶å°åˆ›å»ºRAMç”¨æˆ·ã€‚</span>        <span class="token class-name">String</span> accessKeyId <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> accessKeySecret <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>                <span class="token comment">// å¡«å†™Bucketåç§°ï¼Œä¾‹å¦‚examplebucketã€‚</span>        <span class="token class-name">String</span> bucketName <span class="token operator">=</span> <span class="token string">"web-framework01"</span><span class="token punctuation">;</span>        <span class="token comment">// å¡«å†™Objectå®Œæ•´è·¯å¾„ï¼Œå®Œæ•´è·¯å¾„ä¸­ä¸èƒ½åŒ…å«Bucketåç§°ï¼Œä¾‹å¦‚exampledir/exampleobject.txtã€‚</span>        <span class="token class-name">String</span> objectName <span class="token operator">=</span> <span class="token string">"1.jpg"</span><span class="token punctuation">;</span>        <span class="token comment">// å¡«å†™æœ¬åœ°æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œä¾‹å¦‚D:\\localpath\\examplefile.txtã€‚</span>        <span class="token comment">// å¦‚æœæœªæŒ‡å®šæœ¬åœ°è·¯å¾„ï¼Œåˆ™é»˜è®¤ä»ç¤ºä¾‹ç¨‹åºæ‰€å±é¡¹ç›®å¯¹åº”æœ¬åœ°è·¯å¾„ä¸­ä¸Šä¼ æ–‡ä»¶æµã€‚</span>        <span class="token class-name">String</span> filePath<span class="token operator">=</span> <span class="token string">"C:\\Users\\Administrator\\Pictures\\1.jpg"</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºOSSClientå®ä¾‹ã€‚</span>        <span class="token class-name">OSS</span> ossClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSSClientBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>endpoint<span class="token punctuation">,</span> accessKeyId<span class="token punctuation">,</span> accessKeySecret<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// åˆ›å»ºPutObjectRequestå¯¹è±¡ã€‚</span>            <span class="token class-name">PutObjectRequest</span> putObjectRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PutObjectRequest</span><span class="token punctuation">(</span>bucketName<span class="token punctuation">,</span> objectName<span class="token punctuation">,</span> inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// è®¾ç½®è¯¥å±æ€§å¯ä»¥è¿”å›responseã€‚å¦‚æœä¸è®¾ç½®ï¼Œåˆ™è¿”å›çš„responseä¸ºç©ºã€‚</span>            putObjectRequest<span class="token punctuation">.</span><span class="token function">setProcess</span><span class="token punctuation">(</span><span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// åˆ›å»ºPutObjectè¯·æ±‚ã€‚</span>            <span class="token class-name">PutObjectResult</span> result <span class="token operator">=</span> ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span>putObjectRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// å¦‚æœä¸Šä¼ æˆåŠŸï¼Œåˆ™è¿”å›200ã€‚</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">OSSException</span> oe<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Caught an OSSException, which means your request made it to OSS, "</span>                    <span class="token operator">+</span> <span class="token string">"but was rejected with an error response for some reason."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Error Message:"</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getErrorMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Error Code:"</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getErrorCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Request ID:"</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getRequestId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Host ID:"</span> <span class="token operator">+</span> oe<span class="token punctuation">.</span><span class="token function">getHostId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClientException</span> ce<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Caught an ClientException, which means the client encountered "</span>                    <span class="token operator">+</span> <span class="token string">"a serious internal problem while trying to communicate with OSS, "</span>                    <span class="token operator">+</span> <span class="token string">"such as not being able to access the network."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Error Message:"</span> <span class="token operator">+</span> ce<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>ossClient <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œéœ€è¦æ›¿æ¢çš„å†…å®¹ä¸ºï¼š</p><ul><li>accessKeyIdï¼šé˜¿é‡Œäº‘è´¦å·AccessKey</li><li>accessKeySecretï¼šé˜¿é‡Œäº‘è´¦å·AccessKeyå¯¹åº”çš„ç§˜é’¥</li><li>bucketNameï¼šBucketåç§°</li><li>objectNameï¼šå¯¹è±¡åç§°ï¼Œåœ¨Bucketä¸­å­˜å‚¨çš„å¯¹è±¡çš„åç§°</li><li>filePathï¼šæ–‡ä»¶è·¯å¾„</li></ul><p>AccessKey ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042216974.png"> </p></blockquote><p>è¿è¡Œä»¥ä¸Šç¨‹åºåï¼Œä¼šæŠŠæœ¬åœ°çš„æ–‡ä»¶ä¸Šä¼ åˆ°é˜¿é‡Œäº‘OSSæœåŠ¡å™¨ä¸Šï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042216985.png"></p><h4 id="2-3-3-é›†æˆ"><a href="#2-3-3-é›†æˆ" class="headerlink" title="2.3.3 é›†æˆ"></a>2.3.3 é›†æˆ</h4><p>é˜¿é‡Œäº‘osså¯¹è±¡å­˜å‚¨æœåŠ¡çš„å‡†å¤‡å·¥ä½œä»¥åŠå…¥é—¨ç¨‹åºæˆ‘ä»¬éƒ½å·²ç»å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦åœ¨æ¡ˆä¾‹å½“ä¸­é›†æˆosså¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œæ¥å­˜å‚¨å’Œç®¡ç†æ¡ˆä¾‹ä¸­ä¸Šä¼ çš„å›¾ç‰‡ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042215155.png"></p><blockquote><p>åœ¨æ–°å¢å‘˜å·¥çš„æ—¶å€™ï¼Œä¸Šä¼ å‘˜å·¥çš„å›¾åƒï¼Œè€Œä¹‹æ‰€ä»¥éœ€è¦ä¸Šä¼ å‘˜å·¥çš„å›¾åƒï¼Œæ˜¯å› ä¸ºå°†æ¥æˆ‘ä»¬éœ€è¦åœ¨ç³»ç»Ÿé¡µé¢å½“ä¸­è®¿é—®å¹¶å±•ç¤ºå‘˜å·¥çš„å›¾åƒã€‚è€Œè¦æƒ³å®Œæˆè¿™ä¸ªæ“ä½œï¼Œéœ€è¦åšä¸¤ä»¶äº‹ï¼š</p><ol><li>éœ€è¦ä¸Šä¼ å‘˜å·¥çš„å›¾åƒï¼Œå¹¶æŠŠå›¾åƒä¿å­˜èµ·æ¥ï¼ˆå­˜å‚¨åˆ°é˜¿é‡Œäº‘OSSï¼‰</li><li>è®¿é—®å‘˜å·¥å›¾åƒï¼ˆé€šè¿‡å›¾åƒåœ¨é˜¿é‡Œäº‘OSSçš„å­˜å‚¨åœ°å€è®¿é—®å›¾åƒï¼‰<ul><li>OSSä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½ä¼šåˆ†é…ä¸€ä¸ªè®¿é—®çš„urlï¼Œé€šè¿‡è¿™ä¸ªurlå°±å¯ä»¥è®¿é—®åˆ°å­˜å‚¨åœ¨é˜¿é‡Œäº‘ä¸Šçš„å›¾ç‰‡ã€‚æ‰€ä»¥éœ€è¦æŠŠurlè¿”å›ç»™å‰ç«¯ï¼Œè¿™æ ·å‰ç«¯å°±å¯ä»¥é€šè¿‡urlè·å–åˆ°å›¾åƒã€‚</li></ul></li></ol></blockquote><p>æˆ‘ä»¬å‚ç…§æ¥å£æ–‡æ¡£æ¥å¼€å‘æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼š</p><ul><li><p>åŸºæœ¬ä¿¡æ¯</p><pre class="line-numbers language-none"><code class="language-none">è¯·æ±‚è·¯å¾„ï¼š/uploadè¯·æ±‚æ–¹å¼ï¼šPOSTæ¥å£æè¿°ï¼šä¸Šä¼ å›¾ç‰‡æ¥å£<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>è¯·æ±‚å‚æ•°</p><p>å‚æ•°æ ¼å¼ï¼šmultipart/form-data</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°åç§°</th><th>å‚æ•°ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>ç¤ºä¾‹</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>image</td><td>file</td><td>æ˜¯</td><td></td><td></td></tr></tbody></table></li><li><p>å“åº”æ•°æ®</p><p>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>code</td><td>number</td><td>å¿…é¡»</td><td>å“åº”ç ï¼Œ1 ä»£è¡¨æˆåŠŸï¼Œ0 ä»£è¡¨å¤±è´¥</td></tr><tr><td>msg</td><td>string</td><td>éå¿…é¡»</td><td>æç¤ºä¿¡æ¯</td></tr><tr><td>data</td><td>object</td><td>éå¿…é¡»</td><td>è¿”å›çš„æ•°æ®ï¼Œä¸Šä¼ å›¾ç‰‡çš„è®¿é—®è·¯å¾„</td></tr></tbody></table><p>å“åº”æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>    <span class="token property">"code"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    <span class="token property">"msg"</span><span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>    <span class="token property">"data"</span><span class="token operator">:</span> <span class="token string">"https://web-framework.oss-cn-hangzhou.aliyuncs.com/2022-09-02-00-27-0400.jpg"</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>å¼•å…¥é˜¿é‡Œäº‘OSSä¸Šä¼ æ–‡ä»¶å·¥å…·ç±»ï¼ˆç”±å®˜æ–¹çš„ç¤ºä¾‹ä»£ç æ”¹é€ è€Œæ¥ï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSS</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSSClientBuilder</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>multipart<span class="token punctuation">.</span></span><span class="token class-name">MultipartFile</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">UUID</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliOSSUtils</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> endpoint <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeyId <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeySecret <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> bucketName <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token comment">/**     * å®ç°ä¸Šä¼ å›¾ç‰‡åˆ°OSS     */</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> multipartFile<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        <span class="token comment">// è·å–ä¸Šä¼ çš„æ–‡ä»¶çš„è¾“å…¥æµ</span>        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> multipartFile<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é¿å…æ–‡ä»¶è¦†ç›–</span>        <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> multipartFile<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> originalFilename<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>originalFilename<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ä¸Šä¼ æ–‡ä»¶åˆ° OSS</span>        <span class="token class-name">OSS</span> ossClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSSClientBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>endpoint<span class="token punctuation">,</span> accessKeyId<span class="token punctuation">,</span> accessKeySecret<span class="token punctuation">)</span><span class="token punctuation">;</span>        ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span>bucketName<span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ–‡ä»¶è®¿é—®è·¯å¾„</span>        <span class="token class-name">String</span> url <span class="token operator">=</span> endpoint<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"//"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"//"</span> <span class="token operator">+</span> bucketName <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span> endpoint<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"//"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> fileName<span class="token punctuation">;</span>        <span class="token comment">// å…³é—­ossClient</span>        ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> url<span class="token punctuation">;</span><span class="token comment">// æŠŠä¸Šä¼ åˆ°ossçš„è·¯å¾„è¿”å›</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¿®æ”¹UploadControllerä»£ç ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Result</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">AliOSSUtils</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostMapping</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>multipart<span class="token punctuation">.</span></span><span class="token class-name">MultipartFile</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UploadController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">AliOSSUtils</span> aliOSSUtils<span class="token punctuation">;</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> image<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        <span class="token comment">//è°ƒç”¨é˜¿é‡Œäº‘OSSå·¥å…·ç±»ï¼Œå°†ä¸Šä¼ ä¸Šæ¥çš„æ–‡ä»¶å­˜å…¥é˜¿é‡Œäº‘</span>        <span class="token class-name">String</span> url <span class="token operator">=</span> aliOSSUtils<span class="token punctuation">.</span><span class="token function">upload</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//å°†å›¾ç‰‡ä¸Šä¼ å®Œæˆåçš„urlè¿”å›ï¼Œç”¨äºæµè§ˆå™¨å›æ˜¾å±•ç¤º</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨postmanæµ‹è¯•ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042214779.png"></p><h2 id="3-ä¿®æ”¹å‘˜å·¥"><a href="#3-ä¿®æ”¹å‘˜å·¥" class="headerlink" title="3. ä¿®æ”¹å‘˜å·¥"></a>3. ä¿®æ”¹å‘˜å·¥</h2><p>éœ€æ±‚ï¼šä¿®æ”¹å‘˜å·¥ä¿¡æ¯</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042214028.png"></p> <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220904220006578.png" style="zoom: 50%;"><p>åœ¨è¿›è¡Œä¿®æ”¹å‘˜å·¥ä¿¡æ¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬é¦–å…ˆå…ˆè¦æ ¹æ®å‘˜å·¥çš„IDæŸ¥è¯¢å‘˜å·¥çš„ä¿¡æ¯ç”¨äºé¡µé¢å›æ˜¾å±•ç¤ºï¼Œç„¶åç”¨æˆ·ä¿®æ”¹å‘˜å·¥æ•°æ®ä¹‹åï¼Œç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼Œå°±å¯ä»¥å°†ä¿®æ”¹çš„æ•°æ®æäº¤åˆ°æœåŠ¡ç«¯ï¼Œä¿å­˜åˆ°æ•°æ®åº“ã€‚ å…·ä½“æ“ä½œä¸ºï¼š</p><ol><li>æ ¹æ®IDæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</li><li>ä¿å­˜ä¿®æ”¹çš„å‘˜å·¥ä¿¡æ¯</li></ol><h3 id="3-1-æŸ¥è¯¢å›æ˜¾"><a href="#3-1-æŸ¥è¯¢å›æ˜¾" class="headerlink" title="3.1 æŸ¥è¯¢å›æ˜¾"></a>3.1 æŸ¥è¯¢å›æ˜¾</h3><h4 id="3-1-1-æ¥å£æ–‡æ¡£"><a href="#3-1-1-æ¥å£æ–‡æ¡£" class="headerlink" title="3.1.1 æ¥å£æ–‡æ¡£"></a>3.1.1 æ¥å£æ–‡æ¡£</h4><p>æ ¹æ®IDæŸ¥è¯¢å‘˜å·¥æ•°æ® </p><ul><li><p>åŸºæœ¬ä¿¡æ¯</p><pre class="line-numbers language-none"><code class="language-none">è¯·æ±‚è·¯å¾„ï¼š/emps/{id}è¯·æ±‚æ–¹å¼ï¼šGETæ¥å£æè¿°ï¼šè¯¥æ¥å£ç”¨äºæ ¹æ®ä¸»é”®IDæŸ¥è¯¢å‘˜å·¥çš„ä¿¡æ¯<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>è¯·æ±‚å‚æ•°</p><p>å‚æ•°æ ¼å¼ï¼šè·¯å¾„å‚æ•°</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>id</td><td>number</td><td>å¿…é¡»</td><td>å‘˜å·¥ID</td></tr></tbody></table><p>è¯·æ±‚å‚æ•°æ ·ä¾‹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">/emps/1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>å“åº”æ•°æ®</p><p>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>é»˜è®¤å€¼</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>code</td><td>number</td><td>å¿…é¡»</td><td></td><td>å“åº”ç , 1 æˆåŠŸ , 0 å¤±è´¥</td></tr><tr><td>msg</td><td>string</td><td>éå¿…é¡»</td><td></td><td>æç¤ºä¿¡æ¯</td></tr><tr><td>data</td><td>object</td><td>å¿…é¡»</td><td></td><td>è¿”å›çš„æ•°æ®</td></tr><tr><td>|- id</td><td>number</td><td>éå¿…é¡»</td><td></td><td>id</td></tr><tr><td>|- username</td><td>string</td><td>éå¿…é¡»</td><td></td><td>ç”¨æˆ·å</td></tr><tr><td>|- name</td><td>string</td><td>éå¿…é¡»</td><td></td><td>å§“å</td></tr><tr><td>|- password</td><td>string</td><td>éå¿…é¡»</td><td></td><td>å¯†ç </td></tr><tr><td>|- entrydate</td><td>string</td><td>éå¿…é¡»</td><td></td><td>å…¥èŒæ—¥æœŸ</td></tr><tr><td>|- gender</td><td>number</td><td>éå¿…é¡»</td><td></td><td>æ€§åˆ« , 1 ç”· ; 2 å¥³</td></tr><tr><td>|- image</td><td>string</td><td>éå¿…é¡»</td><td></td><td>å›¾åƒ</td></tr><tr><td>|- job</td><td>number</td><td>éå¿…é¡»</td><td></td><td>èŒä½, è¯´æ˜: 1 ç­ä¸»ä»»,2 è®²å¸ˆ, 3 å­¦å·¥ä¸»ç®¡, 4 æ•™ç ”ä¸»ç®¡, 5 å’¨è¯¢å¸ˆ</td></tr><tr><td>|- deptId</td><td>number</td><td>éå¿…é¡»</td><td></td><td>éƒ¨é—¨id</td></tr><tr><td>|- createTime</td><td>string</td><td>éå¿…é¡»</td><td></td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>|- updateTime</td><td>string</td><td>éå¿…é¡»</td><td></td><td>æ›´æ–°æ—¶é—´</td></tr></tbody></table><p>å“åº”æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"code"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">"msg"</span><span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>    <span class="token property">"username"</span><span class="token operator">:</span> <span class="token string">"zhangwuji"</span><span class="token punctuation">,</span>    <span class="token property">"password"</span><span class="token operator">:</span> <span class="token string">"123456"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"å¼ æ— å¿Œ"</span><span class="token punctuation">,</span>    <span class="token property">"gender"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    <span class="token property">"image"</span><span class="token operator">:</span> <span class="token string">"https://web-framework.oss-cn-hangzhou.aliyuncs.com/2022-09-02-00-27-53B.jpg"</span><span class="token punctuation">,</span>    <span class="token property">"job"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>    <span class="token property">"entrydate"</span><span class="token operator">:</span> <span class="token string">"2015-01-01"</span><span class="token punctuation">,</span>    <span class="token property">"deptId"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>    <span class="token property">"createTime"</span><span class="token operator">:</span> <span class="token string">"2022-09-01T23:06:30"</span><span class="token punctuation">,</span>    <span class="token property">"updateTime"</span><span class="token operator">:</span> <span class="token string">"2022-09-02T00:29:04"</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h4 id="3-1-2-å®ç°æ€è·¯"><a href="#3-1-2-å®ç°æ€è·¯" class="headerlink" title="3.1.2 å®ç°æ€è·¯"></a>3.1.2 å®ç°æ€è·¯</h4><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042214496.png"></p><h4 id="3-1-3-ä»£ç å®ç°"><a href="#3-1-3-ä»£ç å®ç°" class="headerlink" title="3.1.3 ä»£ç å®ç°"></a>3.1.3 ä»£ç å®ç°</h4><ul><li>EmpMapper</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token comment">//æ ¹æ®IDæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</span>    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select id, username, password, name, gender, image, job, entrydate, dept_id, create_time, update_time "</span> <span class="token operator">+</span>            <span class="token string">"from emp "</span> <span class="token operator">+</span>            <span class="token string">"where id = #{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Emp</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>EmpService</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æ ¹æ®IDæŸ¥è¯¢å‘˜å·¥     * @param id     * @return     */</span>    <span class="token keyword">public</span> <span class="token class-name">Emp</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>EmpServiceImpl</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Emp</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> empMapper<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>EmpController</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/emps"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpService</span> empService<span class="token punctuation">;</span>    <span class="token comment">//æ ¹æ®idæŸ¥è¯¢</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">Emp</span> emp <span class="token operator">=</span> empService<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-1-4-postmanæµ‹è¯•"><a href="#3-1-4-postmanæµ‹è¯•" class="headerlink" title="3.1.4 postmanæµ‹è¯•"></a>3.1.4 postmanæµ‹è¯•</h4><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042214303.png"></p><h3 id="3-2-ä¿®æ”¹å‘˜å·¥"><a href="#3-2-ä¿®æ”¹å‘˜å·¥" class="headerlink" title="3.2 ä¿®æ”¹å‘˜å·¥"></a>3.2 ä¿®æ”¹å‘˜å·¥</h3><blockquote><p>å½“ç”¨æˆ·ä¿®æ”¹å®Œæ•°æ®ä¹‹åï¼Œç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼Œå°±éœ€è¦å°†æ•°æ®æäº¤åˆ°æœåŠ¡ç«¯ï¼Œç„¶åæœåŠ¡ç«¯éœ€è¦å°†ä¿®æ”¹åçš„æ•°æ®æ›´æ–°åˆ°æ•°æ®åº“ä¸­ã€‚ </p></blockquote><h4 id="3-2-1-æ¥å£æ–‡æ¡£"><a href="#3-2-1-æ¥å£æ–‡æ¡£" class="headerlink" title="3.2.1 æ¥å£æ–‡æ¡£"></a>3.2.1 æ¥å£æ–‡æ¡£</h4><ul><li><p>åŸºæœ¬ä¿¡æ¯</p><pre class="line-numbers language-none"><code class="language-none">è¯·æ±‚è·¯å¾„ï¼š/empsè¯·æ±‚æ–¹å¼ï¼šPUTæ¥å£æè¿°ï¼šè¯¥æ¥å£ç”¨äºä¿®æ”¹å‘˜å·¥çš„æ•°æ®ä¿¡æ¯<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>è¯·æ±‚å‚æ•°</p><p>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>id</td><td>number</td><td>å¿…é¡»</td><td>id</td></tr><tr><td>username</td><td>string</td><td>å¿…é¡»</td><td>ç”¨æˆ·å</td></tr><tr><td>name</td><td>string</td><td>å¿…é¡»</td><td>å§“å</td></tr><tr><td>gender</td><td>number</td><td>å¿…é¡»</td><td>æ€§åˆ«, è¯´æ˜: 1 ç”·, 2 å¥³</td></tr><tr><td>image</td><td>string</td><td>éå¿…é¡»</td><td>å›¾åƒ</td></tr><tr><td>deptId</td><td>number</td><td>éå¿…é¡»</td><td>éƒ¨é—¨id</td></tr><tr><td>entrydate</td><td>string</td><td>éå¿…é¡»</td><td>å…¥èŒæ—¥æœŸ</td></tr><tr><td>job</td><td>number</td><td>éå¿…é¡»</td><td>èŒä½, è¯´æ˜: 1 ç­ä¸»ä»»,2 è®²å¸ˆ, 3 å­¦å·¥ä¸»ç®¡, 4 æ•™ç ”ä¸»ç®¡, 5 å’¨è¯¢å¸ˆ</td></tr></tbody></table><p>è¯·æ±‚æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">"image"</span><span class="token operator">:</span> <span class="token string">"https://web-framework.oss-cn-hangzhou.aliyuncs.com/2022-09-03-07-37-38222.jpg"</span><span class="token punctuation">,</span>  <span class="token property">"username"</span><span class="token operator">:</span> <span class="token string">"linpingzhi"</span><span class="token punctuation">,</span>  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"æ—å¹³ä¹‹"</span><span class="token punctuation">,</span>  <span class="token property">"gender"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">"job"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">"entrydate"</span><span class="token operator">:</span> <span class="token string">"2022-09-18"</span><span class="token punctuation">,</span>  <span class="token property">"deptId"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å“åº”æ•°æ®</p><p>å‚æ•°æ ¼å¼ï¼šapplication/json</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>æ˜¯å¦å¿…é¡»</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>code</td><td>number</td><td>å¿…é¡»</td><td>å“åº”ç ï¼Œ1 ä»£è¡¨æˆåŠŸï¼Œ0 ä»£è¡¨å¤±è´¥</td></tr><tr><td>msg</td><td>string</td><td>éå¿…é¡»</td><td>æç¤ºä¿¡æ¯</td></tr><tr><td>data</td><td>object</td><td>éå¿…é¡»</td><td>è¿”å›çš„æ•°æ®</td></tr></tbody></table><p>å“åº”æ•°æ®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>    <span class="token property">"code"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>    <span class="token property">"msg"</span><span class="token operator">:</span><span class="token string">"success"</span><span class="token punctuation">,</span>    <span class="token property">"data"</span><span class="token operator">:</span><span class="token null keyword">null</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h4 id="3-2-2-å®ç°æ€è·¯"><a href="#3-2-2-å®ç°æ€è·¯" class="headerlink" title="3.2.2 å®ç°æ€è·¯"></a>3.2.2 å®ç°æ€è·¯</h4><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042214481.png"></p><h4 id="3-2-3-ä»£ç å®ç°"><a href="#3-2-3-ä»£ç å®ç°" class="headerlink" title="3.2.3 ä»£ç å®ç°"></a>3.2.3 ä»£ç å®ç°</h4><ul><li>EmpMapper</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token comment">//ä¿®æ”¹å‘˜å·¥ä¿¡æ¯</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>EmpMapper.xml</li></ul><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.mapper.EmpMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--æ›´æ–°å‘˜å·¥ä¿¡æ¯--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>update<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        update emp        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username != null and username != ''<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                username = #{username},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password != null and password != ''<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                password = #{password},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name != null and name != ''<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                name = #{name},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                gender = #{gender},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image != null and image != ''<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                image = #{image},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>job != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                job = #{job},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>entrydate != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                entrydate = #{entrydate},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>deptId != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                dept_id = #{deptId},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateTime != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                update_time = #{updateTime}            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>        where id = #{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- çœç•¥... --&gt;</span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>EmpService</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æ›´æ–°å‘˜å·¥     * @param emp     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>EmpServiceImpl</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span> <span class="token punctuation">{</span>        emp<span class="token punctuation">.</span><span class="token function">setUpdateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ›´æ–°ä¿®æ”¹æ—¶é—´ä¸ºå½“å‰æ—¶é—´</span>                empMapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>EmpController</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/emps"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpService</span> empService<span class="token punctuation">;</span>    <span class="token comment">//ä¿®æ”¹å‘˜å·¥</span>    <span class="token annotation punctuation">@PutMapping</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">{</span>        empService<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">//çœç•¥...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-2-4-postmanæµ‹è¯•"><a href="#3-2-4-postmanæµ‹è¯•" class="headerlink" title="3.2.4 postmanæµ‹è¯•"></a>3.2.4 postmanæµ‹è¯•</h4><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042214948.png"> </p><h4 id="3-2-5-å‰åç«¯è”è°ƒæµ‹è¯•"><a href="#3-2-5-å‰åç«¯è”è°ƒæµ‹è¯•" class="headerlink" title="3.2.5 å‰åç«¯è”è°ƒæµ‹è¯•"></a>3.2.5 å‰åç«¯è”è°ƒæµ‹è¯•</h4><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042214871.png"> </p><h2 id="4-é…ç½®æ–‡ä»¶"><a href="#4-é…ç½®æ–‡ä»¶" class="headerlink" title="4. é…ç½®æ–‡ä»¶"></a>4. é…ç½®æ–‡ä»¶</h2><p>å‘˜å·¥ç®¡ç†çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½æˆ‘ä»¬å·²å¼€å‘å®Œæˆï¼Œä½†åœ¨æˆ‘ä»¬æ‰€å¼€å‘çš„ç¨‹åºä¸­è¿˜ä¸€äº›å°é—®é¢˜ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥åˆ†æä¸€ä¸‹å½“å‰æ¡ˆä¾‹ä¸­å­˜åœ¨çš„é—®é¢˜ä»¥åŠå¦‚ä½•ä¼˜åŒ–è§£å†³ã€‚</p><h3 id="4-1-å‚æ•°é…ç½®åŒ–"><a href="#4-1-å‚æ•°é…ç½®åŒ–" class="headerlink" title="4.1 å‚æ•°é…ç½®åŒ–"></a>4.1 å‚æ•°é…ç½®åŒ–</h3><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221231085558457.png" alt="image-20221231085558457" style="zoom: 80%;"><p>åœ¨æˆ‘ä»¬ä¹‹å‰ç¼–å†™çš„ç¨‹åºä¸­è¿›è¡Œæ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œéœ€è¦è°ƒç”¨AliOSSUtilså·¥å…·ç±»ï¼Œå°†æ–‡ä»¶ä¸Šä¼ åˆ°é˜¿é‡Œäº‘OSSå¯¹è±¡å­˜å‚¨æœåŠ¡å½“ä¸­ã€‚è€Œåœ¨è°ƒç”¨å·¥å…·ç±»è¿›è¡Œæ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œéœ€è¦ä¸€äº›å‚æ•°ï¼š</p><ul><li>endpoint       //é˜¿é‡Œäº‘OSSåŸŸå</li><li>accessKeyID    //ç”¨æˆ·èº«ä»½ID</li><li>accessKeySecret   //ç”¨æˆ·å¯†é’¥</li><li>bucketName      //å­˜å‚¨ç©ºé—´çš„åå­—</li></ul><p>å…³äºä»¥ä¸Šçš„è¿™äº›é˜¿é‡Œäº‘ç›¸å…³é…ç½®ä¿¡æ¯ï¼Œæˆ‘ä»¬æ˜¯ç›´æ¥å†™æ­»åœ¨javaä»£ç ä¸­äº†(ç¡¬ç¼–ç )ï¼Œå¦‚æœæˆ‘ä»¬åœ¨åšé¡¹ç›®æ—¶æ¯æ¶‰åŠåˆ°ä¸€ä¸ªç¬¬ä¸‰æ–¹æŠ€æœ¯æœåŠ¡ï¼Œå°±å°†å…¶å‚æ•°ç¡¬ç¼–ç ï¼Œé‚£ä¹ˆåœ¨Javaç¨‹åºä¸­ä¼šå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>å¦‚æœè¿™äº›å‚æ•°å‘ç”Ÿå˜åŒ–äº†ï¼Œå°±å¿…é¡»åœ¨æºç¨‹åºä»£ç ä¸­æ”¹åŠ¨è¿™äº›å‚æ•°ï¼Œç„¶åéœ€è¦é‡æ–°è¿›è¡Œä»£ç çš„ç¼–è¯‘ï¼Œå°†Javaä»£ç ç¼–è¯‘æˆclasså­—èŠ‚ç æ–‡ä»¶å†é‡æ–°è¿è¡Œç¨‹åºã€‚ï¼ˆæ¯”è¾ƒç¹çï¼‰</li><li>å¦‚æœæˆ‘ä»¬å¼€å‘çš„æ˜¯ä¸€ä¸ªçœŸå®çš„ä¼ä¸šçº§é¡¹ç›®ï¼Œ Javaç±»å¯èƒ½ä¼šæœ‰å¾ˆå¤šï¼Œå¦‚æœå°†è¿™äº›å‚æ•°åˆ†æ•£çš„å®šä¹‰åœ¨å„ä¸ªJavaç±»å½“ä¸­ï¼Œæˆ‘ä»¬è¦ä¿®æ”¹ä¸€ä¸ªå‚æ•°å€¼ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨ä¼—å¤šçš„Javaä»£ç å½“ä¸­æ¥å®šä½åˆ°å¯¹åº”çš„ä½ç½®ï¼Œå†æ¥ä¿®æ”¹å‚æ•°ï¼Œä¿®æ”¹å®Œæ¯•ä¹‹åå†é‡æ–°ç¼–è¯‘å†è¿è¡Œã€‚ï¼ˆå‚æ•°é…ç½®è¿‡äºåˆ†æ•£ï¼Œæ˜¯ä¸æ–¹ä¾¿é›†ä¸­çš„ç®¡ç†å’Œç»´æŠ¤ï¼‰</li></ol><p>ä¸ºäº†è§£å†³ä»¥ä¸Šåˆ†æçš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†å‚æ•°é…ç½®åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">#è‡ªå®šä¹‰çš„é˜¿é‡Œäº‘OSSé…ç½®ä¿¡æ¯</span><span class="token key attr-name">aliyun.oss.endpoint</span><span class="token punctuation">=</span><span class="token key attr-name">aliyun.oss.accessKeyId</span><span class="token punctuation">=</span><span class="token key attr-name">aliyun.oss.accessKeySecret</span><span class="token punctuation">=</span><span class="token key attr-name">aliyun.oss.bucketName</span><span class="token punctuation">=</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨å°†é˜¿é‡Œäº‘OSSé…ç½®å‚æ•°äº¤ç»™propertiesé…ç½®æ–‡ä»¶æ¥ç®¡ç†ä¹‹åï¼Œæˆ‘ä»¬çš„AliOSSUtilså·¥å…·ç±»å°±å˜ä¸ºä»¥ä¸‹å½¢å¼ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliOSSUtils</span> <span class="token punctuation">{</span>    <span class="token comment">/*ä»¥ä¸‹4ä¸ªå‚æ•°æ²¡æœ‰æŒ‡å®šå€¼ï¼ˆé»˜è®¤å€¼ï¼šnullï¼‰*/</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> endpoint<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeyId<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeySecret<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> bucketName<span class="token punctuation">;</span>    <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>è€Œæ­¤æ—¶å¦‚æœç›´æ¥è°ƒç”¨AliOSSUtilsç±»å½“ä¸­çš„uploadæ–¹æ³•è¿›è¡Œæ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œè¿™4é¡¹å‚æ•°å…¨éƒ¨ä¸ºnullï¼ŒåŸå› æ˜¯å› ä¸ºå¹¶æ²¡æœ‰ç»™å®ƒèµ‹å€¼ã€‚</p><p>æ­¤æ—¶æˆ‘ä»¬æ˜¯ä¸æ˜¯éœ€è¦å°†é…ç½®æ–‡ä»¶å½“ä¸­æ‰€é…ç½®çš„å±æ€§å€¼è¯»å–å‡ºæ¥ï¼Œå¹¶åˆ†åˆ«èµ‹å€¼ç»™AliOSSUtilså·¥å…·ç±»å½“ä¸­çš„å„ä¸ªå±æ€§å‘¢ï¼Ÿé‚£åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p></blockquote><p>å› ä¸ºapplication.propertiesæ˜¯springbooté¡¹ç›®é»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥springbootç¨‹åºåœ¨å¯åŠ¨æ—¶ä¼šé»˜è®¤è¯»å–application.propertiesé…ç½®æ–‡ä»¶ï¼Œè€Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç°æˆçš„æ³¨è§£ï¼š@Valueï¼Œè·å–é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®ã€‚</p><p>@Value æ³¨è§£é€šå¸¸ç”¨äºå¤–éƒ¨é…ç½®çš„å±æ€§æ³¨å…¥ï¼Œå…·ä½“ç”¨æ³•ä¸ºï¼š @Value(â€œ${é…ç½®æ–‡ä»¶ä¸­çš„key}â€)</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliOSSUtils</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${aliyun.oss.endpoint}"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> endpoint<span class="token punctuation">;</span>        <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${aliyun.oss.accessKeyId}"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeyId<span class="token punctuation">;</span>        <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${aliyun.oss.accessKeySecret}"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeySecret<span class="token punctuation">;</span>        <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${aliyun.oss.bucketName}"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> bucketName<span class="token punctuation">;</span>  <span class="token comment">//çœç•¥å…¶ä»–ä»£ç ...</span> <span class="token punctuation">}</span>   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042213786.png"></p><h3 id="4-2-ymlé…ç½®æ–‡ä»¶"><a href="#4-2-ymlé…ç½®æ–‡ä»¶" class="headerlink" title="4.2 ymlé…ç½®æ–‡ä»¶"></a>4.2 ymlé…ç½®æ–‡ä»¶</h3><p>å‰é¢æˆ‘ä»¬ä¸€ç›´ä½¿ç”¨springbooté¡¹ç›®åˆ›å»ºå®Œæ¯•åè‡ªå¸¦çš„application.propertiesè¿›è¡Œå±æ€§çš„é…ç½®ï¼Œé‚£å…¶å®å‘¢ï¼Œåœ¨springbooté¡¹ç›®å½“ä¸­æ˜¯æ”¯æŒå¤šç§é…ç½®æ–¹å¼çš„ï¼Œé™¤äº†æ”¯æŒpropertiesé…ç½®æ–‡ä»¶ä»¥å¤–ï¼Œè¿˜æ”¯æŒå¦å¤–ä¸€ç§ç±»å‹çš„é…ç½®æ–‡ä»¶ï¼Œå°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦è®²è§£çš„ymlæ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚</p><ul><li><p>application.properties</p><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">8080</span><span class="token key attr-name">server.address</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>application.yml </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>  <span class="token key atrule">address</span><span class="token punctuation">:</span> 127.0.0.1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>application.yaml </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>  <span class="token key atrule">address</span><span class="token punctuation">:</span> 127.0.0.1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul><blockquote><p>yml æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œåç¼€åæœ‰ä¸¤ç§ï¼š</p><ul><li>yml ï¼ˆæ¨èï¼‰</li><li>yaml</li></ul></blockquote><p>å¸¸è§é…ç½®æ–‡ä»¶æ ¼å¼å¯¹æ¯”ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042213819.png"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é…ç½®åŒæ ·çš„æ•°æ®ä¿¡æ¯ï¼Œymlæ ¼å¼çš„æ•°æ®æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>å®¹æ˜“é˜…è¯»</li><li>å®¹æ˜“ä¸è„šæœ¬è¯­è¨€äº¤äº’</li><li>ä»¥æ•°æ®ä¸ºæ ¸å¿ƒï¼Œé‡æ•°æ®è½»æ ¼å¼</li></ul><p>ç®€å•çš„äº†è§£è¿‡springbootæ‰€æ”¯æŒçš„é…ç½®æ–‡ä»¶ï¼Œä»¥åŠä¸åŒç±»å‹é…ç½®æ–‡ä»¶ä¹‹é—´çš„ä¼˜ç¼ºç‚¹ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥äº†è§£ä¸‹ymlé…ç½®æ–‡ä»¶çš„åŸºæœ¬è¯­æ³•ï¼š</p><ul><li>å¤§å°å†™æ•æ„Ÿ</li><li>æ•°å€¼å‰è¾¹å¿…é¡»æœ‰ç©ºæ ¼ï¼Œä½œä¸ºåˆ†éš”ç¬¦</li><li>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼Œç¼©è¿›æ—¶ï¼Œä¸å…è®¸ä½¿ç”¨Tabé”®ï¼Œåªèƒ½ç”¨ç©ºæ ¼ï¼ˆideaä¸­ä¼šè‡ªåŠ¨å°†Tabè½¬æ¢ä¸ºç©ºæ ¼ï¼‰</li><li>ç¼©è¿›çš„ç©ºæ ¼æ•°ç›®ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦ä¾§å¯¹é½å³å¯</li><li><code>#</code>è¡¨ç¤ºæ³¨é‡Šï¼Œä»è¿™ä¸ªå­—ç¬¦ä¸€ç›´åˆ°è¡Œå°¾ï¼Œéƒ½ä¼šè¢«è§£æå™¨å¿½ç•¥</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042213206.png"></p><p>äº†è§£å®Œymlæ ¼å¼é…ç½®æ–‡ä»¶çš„åŸºæœ¬è¯­æ³•ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹ä¸‹ymlæ–‡ä»¶ä¸­å¸¸è§çš„æ•°æ®æ ¼å¼ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬ä¸»è¦ä»‹ç»æœ€ä¸ºå¸¸è§çš„ä¸¤ç±»ï¼š</p><ol><li>å®šä¹‰å¯¹è±¡æˆ–Mapé›†åˆ</li><li>å®šä¹‰æ•°ç»„ã€listæˆ–seté›†åˆ</li></ol><p>å¯¹è±¡/Mapé›†åˆ</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">user</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> zhangsan  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span>  <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ•°ç»„/List/Seté›†åˆ</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">hobby</span><span class="token punctuation">:</span>   <span class="token punctuation">-</span> java  <span class="token punctuation">-</span> game  <span class="token punctuation">-</span> sport<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç†Ÿæ‚‰å®Œäº†ymlæ–‡ä»¶çš„åŸºæœ¬è¯­æ³•åï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸‹ä¹‹å‰æ¡ˆä¾‹ä¸­ä½¿ç”¨çš„é…ç½®æ–‡ä»¶ï¼Œå˜æ›´ä¸ºapplication.ymlé…ç½®æ–¹å¼ï¼š</p><ol><li>ä¿®æ”¹application.propertiesåå­—ä¸ºï¼š<code>_application.properties</code>ï¼ˆåå­—éšä¾¿æ›´æ¢ï¼Œåªè¦åŠ è½½ä¸åˆ°å³å¯ï¼‰</li><li>åˆ›å»ºæ–°çš„é…ç½®æ–‡ä»¶ï¼š <code>application.yml</code></li></ol><p>åŸæœ‰application.propertiesæ–‡ä»¶ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042213598.png"></p><p>æ–°å»ºçš„application.ymlæ–‡ä»¶ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/tlias    <span class="token key atrule">username</span><span class="token punctuation">:</span> root    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">1234</span>  <span class="token key atrule">servlet</span><span class="token punctuation">:</span>    <span class="token key atrule">multipart</span><span class="token punctuation">:</span>      <span class="token key atrule">max-file-size</span><span class="token punctuation">:</span> 10MB      <span class="token key atrule">max-request-size</span><span class="token punctuation">:</span> 100MB      <span class="token key atrule">mybatis</span><span class="token punctuation">:</span>  <span class="token key atrule">configuration</span><span class="token punctuation">:</span>    <span class="token key atrule">log-impl</span><span class="token punctuation">:</span> org.apache.ibatis.logging.stdout.StdOutImpl    <span class="token key atrule">map-underscore-to-camel-case</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">aliyun</span><span class="token punctuation">:</span>  <span class="token key atrule">oss</span><span class="token punctuation">:</span>    <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>     <span class="token key atrule">accessKeyId</span><span class="token punctuation">:</span>     <span class="token key atrule">accessKeySecret</span><span class="token punctuation">:</span>     <span class="token key atrule">bucketName</span><span class="token punctuation">:</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-3-ConfigurationProperties"><a href="#4-3-ConfigurationProperties" class="headerlink" title="4.3 @ConfigurationProperties"></a>4.3 @ConfigurationProperties</h3><p>è®²è§£å®Œäº†ymlé…ç½®æ–‡ä»¶ä¹‹åï¼Œæœ€åå†æ¥ä»‹ç»ä¸€ä¸ªæ³¨è§£<code>@ConfigurationProperties</code>ã€‚åœ¨ä»‹ç»æ³¨è§£ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªåœºæ™¯ï¼Œåˆ†æä¸‹ä»£ç å½“ä¸­å¯èƒ½å­˜åœ¨çš„é—®é¢˜ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042213198.png"></p><p>æˆ‘ä»¬åœ¨application.propertiesæˆ–è€…application.ymlä¸­é…ç½®äº†é˜¿é‡Œäº‘OSSçš„å››é¡¹å‚æ•°ä¹‹åï¼Œå¦‚æœjavaç¨‹åºä¸­éœ€è¦è¿™å››é¡¹å‚æ•°æ•°æ®ï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡@Valueæ³¨è§£æ¥è¿›è¡Œæ³¨å…¥ã€‚è¿™ç§æ–¹å¼æœ¬èº«æ²¡æœ‰ä»€ä¹ˆé—®é¢˜é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœè¯´éœ€è¦æ³¨å…¥çš„å±æ€§è¾ƒå¤š(ä¾‹ï¼šéœ€è¦20å¤šä¸ªå‚æ•°æ•°æ®)ï¼Œæˆ‘ä»¬å†™èµ·æ¥å°±ä¼šæ¯”è¾ƒç¹çã€‚</p><p>é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼å¯ä»¥ç®€åŒ–è¿™äº›é…ç½®å‚æ•°çš„æ³¨å…¥å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šæœ‰ï¼Œåœ¨Springä¸­ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§ç®€åŒ–æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®é¡¹çš„å€¼è‡ªåŠ¨çš„æ³¨å…¥åˆ°å¯¹è±¡çš„å±æ€§ä¸­ã€‚</p><p>Springæä¾›çš„ç®€åŒ–æ–¹å¼å¥—è·¯ï¼š</p><ol><li><p>éœ€è¦åˆ›å»ºä¸€ä¸ªå®ç°ç±»ï¼Œä¸”å®ä½“ç±»ä¸­çš„å±æ€§åå’Œé…ç½®æ–‡ä»¶å½“ä¸­keyçš„åå­—å¿…é¡»è¦ä¸€è‡´</p><blockquote><p>æ¯”å¦‚ï¼šé…ç½®æ–‡ä»¶å½“ä¸­å«endpointsï¼Œå®ä½“ç±»å½“ä¸­çš„å±æ€§ä¹Ÿå¾—å«endpointsï¼Œå¦å¤–å®ä½“ç±»å½“ä¸­çš„å±æ€§è¿˜éœ€è¦æä¾› getter / setteræ–¹æ³•</p></blockquote></li><li><p>éœ€è¦å°†å®ä½“ç±»äº¤ç»™Springçš„IOCå®¹å™¨ç®¡ç†ï¼Œæˆä¸ºIOCå®¹å™¨å½“ä¸­çš„beanå¯¹è±¡</p></li><li><p>åœ¨å®ä½“ç±»ä¸Šæ·»åŠ <code>@ConfigurationProperties</code>æ³¨è§£ï¼Œå¹¶é€šè¿‡perfectå±æ€§æ¥æŒ‡å®šé…ç½®å‚æ•°é¡¹çš„å‰ç¼€</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042213260.png"></p><p>å®ä½“ç±»ï¼šAliOSSProperties</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">ConfigurationProperties</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token comment">/*é˜¿é‡Œäº‘OSSç›¸å…³é…ç½®*/</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"aliyun.oss"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliOSSProperties</span> <span class="token punctuation">{</span>    <span class="token comment">//åŒºåŸŸ</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> endpoint<span class="token punctuation">;</span>    <span class="token comment">//èº«ä»½ID</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeyId <span class="token punctuation">;</span>    <span class="token comment">//èº«ä»½å¯†é’¥</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKeySecret <span class="token punctuation">;</span>    <span class="token comment">//å­˜å‚¨ç©ºé—´</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> bucketName<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>AliOSSUtilså·¥å…·ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSS</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>oss<span class="token punctuation">.</span></span><span class="token class-name">OSSClientBuilder</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>multipart<span class="token punctuation">.</span></span><span class="token class-name">MultipartFile</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">UUID</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span> <span class="token comment">//å½“å‰ç±»å¯¹è±¡ç”±Springåˆ›å»ºå’Œç®¡ç†</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliOSSUtils</span> <span class="token punctuation">{</span>    <span class="token comment">//æ³¨å…¥é…ç½®å‚æ•°å®ä½“ç±»å¯¹è±¡</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">AliOSSProperties</span> aliOSSProperties<span class="token punctuation">;</span>           <span class="token comment">/**     * å®ç°ä¸Šä¼ å›¾ç‰‡åˆ°OSS     */</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> multipartFile<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        <span class="token comment">// è·å–ä¸Šä¼ çš„æ–‡ä»¶çš„è¾“å…¥æµ</span>        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> multipartFile<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é¿å…æ–‡ä»¶è¦†ç›–</span>        <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> multipartFile<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> originalFilename<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>originalFilename<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ä¸Šä¼ æ–‡ä»¶åˆ° OSS</span>        <span class="token class-name">OSS</span> ossClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSSClientBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>aliOSSProperties<span class="token punctuation">.</span><span class="token function">getEndpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                aliOSSProperties<span class="token punctuation">.</span><span class="token function">getAccessKeyId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> aliOSSProperties<span class="token punctuation">.</span><span class="token function">getAccessKeySecret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ossClient<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span>aliOSSProperties<span class="token punctuation">.</span><span class="token function">getBucketName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ–‡ä»¶è®¿é—®è·¯å¾„</span>        <span class="token class-name">String</span> url <span class="token operator">=</span>aliOSSProperties<span class="token punctuation">.</span><span class="token function">getEndpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"//"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"//"</span> <span class="token operator">+</span> aliOSSProperties<span class="token punctuation">.</span><span class="token function">getBucketName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span> aliOSSProperties<span class="token punctuation">.</span><span class="token function">getEndpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"//"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> fileName<span class="token punctuation">;</span>        <span class="token comment">// å…³é—­ossClient</span>        ossClient<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> url<span class="token punctuation">;</span><span class="token comment">// æŠŠä¸Šä¼ åˆ°ossçš„è·¯å¾„è¿”å›</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨æˆ‘ä»¬æ·»åŠ ä¸Šæ³¨è§£åï¼Œä¼šå‘ç°ideaçª—å£ä¸Šé¢å‡ºç°ä¸€ä¸ªçº¢è‰²è­¦å‘Šï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412042213798.png"> </p><p>è¿™ä¸ªè­¦å‘Šæç¤ºæ˜¯å‘ŠçŸ¥æˆ‘ä»¬è¿˜éœ€è¦å¼•å…¥ä¸€ä¸ªä¾èµ–ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å½“æˆ‘ä»¬åœ¨pom.xmlæ–‡ä»¶å½“ä¸­é…ç½®äº†è¿™é¡¹ä¾èµ–ä¹‹åï¼Œæˆ‘ä»¬é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œå¤§å®¶å°±ä¼šçœ‹åˆ°åœ¨propertiesæˆ–è€…æ˜¯ymlé…ç½®æ–‡ä»¶å½“ä¸­ï¼Œå°±ä¼šæç¤ºé˜¿é‡Œäº‘ OSS ç›¸å…³çš„é…ç½®é¡¹ã€‚æ‰€ä»¥è¿™é¡¹ä¾èµ–å®ƒçš„ä½œç”¨å°±æ˜¯ä¼šè‡ªåŠ¨çš„è¯†åˆ«è¢«<code>@Configuration Properties</code>æ³¨è§£æ ‡è¯†çš„beanå¯¹è±¡ã€‚</p><blockquote><p>åˆšæ‰çš„çº¢è‰²è­¦å‘Šï¼Œå·²ç»å˜æˆäº†ä¸€ä¸ªç°è‰²çš„æç¤ºï¼Œæç¤ºæˆ‘ä»¬éœ€è¦é‡æ–°è¿è¡ŒspringbootæœåŠ¡</p></blockquote><p>@ConfigurationPropertiesæ³¨è§£æˆ‘ä»¬å·²ç»ä»‹ç»å®Œäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥åŒºåˆ†ä¸€ä¸‹@ConfigurationPropertiesæ³¨è§£ä»¥åŠæˆ‘ä»¬å‰é¢æ‰€ä»‹ç»çš„å¦å¤–ä¸€ä¸ª@Valueæ³¨è§£ï¼š</p><p>ç›¸åŒç‚¹ï¼šéƒ½æ˜¯ç”¨æ¥æ³¨å…¥å¤–éƒ¨é…ç½®çš„å±æ€§çš„ã€‚</p><p>ä¸åŒç‚¹ï¼š</p><ul><li><p>@Valueæ³¨è§£åªèƒ½ä¸€ä¸ªä¸€ä¸ªçš„è¿›è¡Œå¤–éƒ¨å±æ€§çš„æ³¨å…¥ã€‚</p></li><li><p>@ConfigurationPropertieså¯ä»¥æ‰¹é‡çš„å°†å¤–éƒ¨çš„å±æ€§é…ç½®æ³¨å…¥åˆ°beanå¯¹è±¡çš„å±æ€§ä¸­ã€‚</p></li></ul><p>å¦‚æœè¦æ³¨å…¥çš„å±æ€§éå¸¸çš„å¤šï¼Œå¹¶ä¸”è¿˜æƒ³åšåˆ°å¤ç”¨ï¼Œå°±å¯ä»¥å®šä¹‰è¿™ä¹ˆä¸€ä¸ªbeanå¯¹è±¡ã€‚é€šè¿‡ configuration properties æ‰¹é‡çš„å°†å¤–éƒ¨çš„å±æ€§é…ç½®ç›´æ¥æ³¨å…¥åˆ° bin å¯¹è±¡çš„å±æ€§å½“ä¸­ã€‚åœ¨å…¶ä»–çš„ç±»å½“ä¸­ï¼Œæˆ‘è¦æƒ³è·å–åˆ°æ³¨å…¥è¿›æ¥çš„å±æ€§ï¼Œæˆ‘ç›´æ¥æ³¨å…¥ bin å¯¹è±¡ï¼Œç„¶åè°ƒç”¨ get æ–¹æ³•ï¼Œå°±å¯ä»¥è·å–åˆ°å¯¹åº”çš„å±æ€§å€¼äº†</p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PageHelper </tag>
            
            <tag> æ–‡ä»¶ä¸Šä¼  </tag>
            
            <tag> å¯¹è±¡å­˜å‚¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mybatisï¼ˆ2ï¼‰</title>
      <link href="/2024/12/03/mybatis-2/"/>
      <url>/2024/12/03/mybatis-2/</url>
      
        <content type="html"><![CDATA[<h1 id="MybatisåŸºç¡€æ“ä½œ"><a href="#MybatisåŸºç¡€æ“ä½œ" class="headerlink" title="MybatisåŸºç¡€æ“ä½œ"></a>MybatisåŸºç¡€æ“ä½œ</h1><h2 id="1ã€Mybatis"><a href="#1ã€Mybatis" class="headerlink" title="1ã€Mybatis"></a>1ã€Mybatis</h2><p>å­¦ä¹ å®Œmybatiså…¥é—¨åï¼Œæˆ‘ä»¬ç»§ç»­å­¦ä¹ mybatisåŸºç¡€æ“ä½œã€‚</p><h3 id="1-1-éœ€æ±‚"><a href="#1-1-éœ€æ±‚" class="headerlink" title="1.1 éœ€æ±‚"></a>1.1 éœ€æ±‚</h3><p>éœ€æ±‚è¯´æ˜ï¼š</p><ul><li>æ ¹æ®èµ„æ–™ä¸­æä¾›çš„ã€Štliasæ™ºèƒ½å­¦ä¹ è¾…åŠ©ç³»ç»Ÿã€‹é¡µé¢åŸå‹åŠéœ€æ±‚ï¼Œå®Œæˆå‘˜å·¥ç®¡ç†çš„éœ€æ±‚å¼€å‘ã€‚</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210180155700.png"> </p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210180343288.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210180515206.png"></p><p>é€šè¿‡åˆ†æä»¥ä¸Šçš„é¡µé¢åŸå‹å’Œéœ€æ±‚ï¼Œæˆ‘ä»¬ç¡®å®šäº†åŠŸèƒ½åˆ—è¡¨ï¼š</p><ol><li><p>æŸ¥è¯¢</p><ul><li>æ ¹æ®ä¸»é”®IDæŸ¥è¯¢</li><li>æ¡ä»¶æŸ¥è¯¢</li></ul></li><li><p>æ–°å¢</p></li><li><p>æ›´æ–°</p></li><li><p>åˆ é™¤</p><ul><li>æ ¹æ®ä¸»é”®IDåˆ é™¤</li><li>æ ¹æ®ä¸»é”®IDæ‰¹é‡åˆ é™¤</li></ul></li></ol><h3 id="1-2-å‡†å¤‡"><a href="#1-2-å‡†å¤‡" class="headerlink" title="1.2 å‡†å¤‡"></a>1.2 å‡†å¤‡</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241202213942986.png"></p><p>å®æ–½å‰çš„å‡†å¤‡å·¥ä½œï¼š</p><ol><li>å‡†å¤‡æ•°æ®åº“è¡¨</li><li>åˆ›å»ºä¸€ä¸ªæ–°çš„springbootå·¥ç¨‹ï¼Œé€‰æ‹©å¼•å…¥å¯¹åº”çš„èµ·æ­¥ä¾èµ–ï¼ˆmybatisã€mysqlé©±åŠ¨ã€lombokï¼‰</li><li>application.propertiesä¸­å¼•å…¥æ•°æ®åº“è¿æ¥ä¿¡æ¯</li><li>åˆ›å»ºå¯¹åº”çš„å®ä½“ç±» Empï¼ˆå®ä½“ç±»å±æ€§é‡‡ç”¨é©¼å³°å‘½åï¼‰</li><li>å‡†å¤‡Mapperæ¥å£ EmpMapper</li></ol><p><strong>å‡†å¤‡æ•°æ®åº“è¡¨</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- éƒ¨é—¨ç®¡ç†create table dept(    id          int unsigned primary key auto_increment comment 'ä¸»é”®ID',    name        varchar(10) not null unique comment 'éƒ¨é—¨åç§°',    create_time datetime    not null comment 'åˆ›å»ºæ—¶é—´',    update_time datetime    not null comment 'ä¿®æ”¹æ—¶é—´') comment 'éƒ¨é—¨è¡¨';-- éƒ¨é—¨è¡¨æµ‹è¯•æ•°æ®insert into dept (id, name, create_time, update_time)values (1, 'å­¦å·¥éƒ¨', now(), now()),       (2, 'æ•™ç ”éƒ¨', now(), now()),       (3, 'å’¨è¯¢éƒ¨', now(), now()),       (4, 'å°±ä¸šéƒ¨', now(), now()),       (5, 'äººäº‹éƒ¨', now(), now());-- å‘˜å·¥ç®¡ç†create table emp(    id          int unsigned primary key auto_increment comment 'ID',    username    varchar(20)      not null unique comment 'ç”¨æˆ·å',    password    varchar(32) default '123456' comment 'å¯†ç ',    name        varchar(10)      not null comment 'å§“å',    gender      tinyint unsigned not null comment 'æ€§åˆ«, è¯´æ˜: 1 ç”·, 2 å¥³',    image       varchar(300) comment 'å›¾åƒ',    job         tinyint unsigned comment 'èŒä½, è¯´æ˜: 1 ç­ä¸»ä»»,2 è®²å¸ˆ, 3 å­¦å·¥ä¸»ç®¡, 4 æ•™ç ”ä¸»ç®¡, 5 å’¨è¯¢å¸ˆ',    entrydate   date comment 'å…¥èŒæ—¶é—´',    dept_id     int unsigned comment 'éƒ¨é—¨ID',    create_time datetime         not null comment 'åˆ›å»ºæ—¶é—´',    update_time datetime         not null comment 'ä¿®æ”¹æ—¶é—´') comment 'å‘˜å·¥è¡¨';-- å‘˜å·¥è¡¨æµ‹è¯•æ•°æ®INSERT INTO emp (id, username, password, name, gender, image, job, entrydate, dept_id, create_time, update_time)VALUES (1, 'jinyong', '123456', 'é‡‘åº¸', 1, '1.jpg', 4, '2000-01-01', 2, now(), now()),(2, 'zhangwuji', '123456', 'å¼ æ— å¿Œ', 1, '2.jpg', 2, '2015-01-01', 2, now(), now()),(3, 'yangxiao', '123456', 'æ¨é€', 1, '3.jpg', 2, '2008-05-01', 2, now(), now()),(4, 'weiyixiao', '123456', 'éŸ¦ä¸€ç¬‘', 1, '4.jpg', 2, '2007-01-01', 2, now(), now()),(5, 'changyuchun', '123456', 'å¸¸é‡æ˜¥', 1, '5.jpg', 2, '2012-12-05', 2, now(), now()),(6, 'xiaozhao', '123456', 'å°æ˜­', 2, '6.jpg', 3, '2013-09-05', 1, now(), now()),(7, 'jixiaofu', '123456', 'çºªæ™“èŠ™', 2, '7.jpg', 1, '2005-08-01', 1, now(), now()),(8, 'zhouzhiruo', '123456', 'å‘¨èŠ·è‹¥', 2, '8.jpg', 1, '2014-11-09', 1, now(), now()),(9, 'dingminjun', '123456', 'ä¸æ•å›', 2, '9.jpg', 1, '2011-03-11', 1, now(), now()),(10, 'zhaomin', '123456', 'èµµæ•', 2, '10.jpg', 1, '2013-09-05', 1, now(), now()),(11, 'luzhangke', '123456', 'é¹¿æ–å®¢', 1, '11.jpg', 5, '2007-02-01', 3, now(), now()),(12, 'hebiweng', '123456', 'é¹¤ç¬”ç¿', 1, '12.jpg', 5, '2008-08-18', 3, now(), now()),(13, 'fangdongbai', '123456', 'æ–¹ä¸œç™½', 1, '13.jpg', 5, '2012-11-01', 3, now(), now()),(14, 'zhangsanfeng', '123456', 'å¼ ä¸‰ä¸°', 1, '14.jpg', 2, '2002-08-01', 2, now(), now()),(15, 'yulianzhou', '123456', 'ä¿è²èˆŸ', 1, '15.jpg', 2, '2011-05-01', 2, now(), now()),(16, 'songyuanqiao', '123456', 'å®‹è¿œæ¡¥', 1, '16.jpg', 2, '2010-01-01', 2, now(), now()),(17, 'chenyouliang', '123456', 'é™ˆå‹è°…', 1, '17.jpg', NULL, '2015-03-21', NULL, now(), now());<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åˆ›å»ºä¸€ä¸ªæ–°çš„springbootå·¥ç¨‹ï¼Œé€‰æ‹©å¼•å…¥å¯¹åº”çš„èµ·æ­¥ä¾èµ–ï¼ˆmybatisã€mysqlé©±åŠ¨ã€lombokï¼‰</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210182008131.png"></p><p><strong>application.propertiesä¸­å¼•å…¥æ•°æ®åº“è¿æ¥ä¿¡æ¯</strong></p><blockquote><p>æç¤ºï¼šå¯ä»¥æŠŠä¹‹å‰é¡¹ç›®ä¸­å·²æœ‰çš„é…ç½®ä¿¡æ¯å¤åˆ¶è¿‡æ¥å³å¯</p></blockquote><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">#é©±åŠ¨ç±»åç§°</span><span class="token key attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span><span class="token comment">#æ•°æ®åº“è¿æ¥çš„url</span><span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/mybatis</span><span class="token comment">#è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å</span><span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span><span class="token comment">#è¿æ¥æ•°æ®åº“çš„å¯†ç </span><span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span><span class="token comment">#æ—¥å¿—</span><span class="token key attr-name">mybatis.configuration.log-impl</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.ibatis.logging.stdout.StdOutImpl</span><span class="token comment">#å¼€å¯é©¼å³°å‘½å</span><span class="token key attr-name">mybatis.configuration.map-underscore-to-camel-case</span><span class="token punctuation">=</span><span class="token value attr-value">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>åˆ›å»ºå¯¹åº”çš„å®ä½“ç±»Empï¼ˆå®ä½“ç±»å±æ€§é‡‡ç”¨é©¼å³°å‘½åï¼‰</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Emp</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Short</span> gender<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> image<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Short</span> job<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">LocalDate</span> entrydate<span class="token punctuation">;</span>     <span class="token comment">//LocalDateç±»å‹å¯¹åº”æ•°æ®è¡¨ä¸­çš„dateç±»å‹</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> deptId<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> createTime<span class="token punctuation">;</span><span class="token comment">//LocalDateTimeç±»å‹å¯¹åº”æ•°æ®è¡¨ä¸­çš„datetimeç±»å‹</span>    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> updateTime<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å‡†å¤‡Mapperæ¥å£ï¼šEmpMapper</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*@Mapperæ³¨è§£ï¼šè¡¨ç¤ºå½“å‰æ¥å£ä¸ºmybatisä¸­çš„Mapperæ¥å£  ç¨‹åºè¿è¡Œæ—¶ä¼šè‡ªåŠ¨åˆ›å»ºæ¥å£çš„å®ç°ç±»å¯¹è±¡(ä»£ç†å¯¹è±¡)ï¼Œå¹¶äº¤ç»™Springçš„IOCå®¹å™¨ç®¡ç†*/</span><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®Œæˆä»¥ä¸Šæ“ä½œåï¼Œé¡¹ç›®å·¥ç¨‹ç»“æ„ç›®å½•å¦‚ä¸‹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210182500817.png"></p><h3 id="1-3-åˆ é™¤"><a href="#1-3-åˆ é™¤" class="headerlink" title="1.3 åˆ é™¤"></a>1.3 åˆ é™¤</h3><h4 id="1-3-1-åŠŸèƒ½å®ç°"><a href="#1-3-1-åŠŸèƒ½å®ç°" class="headerlink" title="1.3.1 åŠŸèƒ½å®ç°"></a>1.3.1 åŠŸèƒ½å®ç°</h4><p>é¡µé¢åŸå‹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210183336095.png"></p><blockquote><p>å½“æˆ‘ä»¬ç‚¹å‡»åé¢çš„â€åˆ é™¤â€æŒ‰é’®æ—¶ï¼Œå‰ç«¯é¡µé¢ä¼šç»™æœåŠ¡ç«¯ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯¥è¡Œæ•°æ®çš„IDã€‚ æˆ‘ä»¬æ¥æ”¶åˆ°IDåï¼Œæ ¹æ®IDåˆ é™¤æ•°æ®å³å¯ã€‚</p></blockquote><p><strong>åŠŸèƒ½ï¼šæ ¹æ®ä¸»é”®åˆ é™¤æ•°æ®</strong></p><ul><li>SQLè¯­å¥</li></ul><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- åˆ é™¤id=17çš„æ•°æ®delete from emp where id = 17;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>Mybatisæ¡†æ¶è®©ç¨‹åºå‘˜æ›´å…³æ³¨äºSQLè¯­å¥</p></blockquote><ul><li>æ¥å£æ–¹æ³•</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>        <span class="token comment">//@Delete("delete from emp where id = 17")</span>    <span class="token comment">//public void delete();</span>    <span class="token comment">//ä»¥ä¸Šdeleteæ“ä½œçš„SQLè¯­å¥ä¸­çš„idå€¼å†™æˆå›ºå®šçš„17ï¼Œå°±è¡¨ç¤ºåªèƒ½åˆ é™¤id=17çš„ç”¨æˆ·æ•°æ®</span>    <span class="token comment">//SQLè¯­å¥ä¸­çš„idå€¼ä¸èƒ½å†™æˆå›ºå®šæ•°å€¼ï¼Œéœ€è¦å˜ä¸ºåŠ¨æ€çš„æ•°å€¼</span>    <span class="token comment">//è§£å†³æ–¹æ¡ˆï¼šåœ¨deleteæ–¹æ³•ä¸­æ·»åŠ ä¸€ä¸ªå‚æ•°(ç”¨æˆ·id)ï¼Œå°†æ–¹æ³•ä¸­çš„å‚æ•°ï¼Œä¼ ç»™SQLè¯­å¥</span>        <span class="token comment">/**     * æ ¹æ®idåˆ é™¤æ•°æ®     * @param id    ç”¨æˆ·id     */</span>    <span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">"delete from emp where id = #{id}"</span><span class="token punctuation">)</span><span class="token comment">//ä½¿ç”¨#{key}æ–¹å¼è·å–æ–¹æ³•ä¸­çš„å‚æ•°å€¼</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>@Deleteæ³¨è§£ï¼šç”¨äºç¼–å†™deleteæ“ä½œçš„SQLè¯­å¥</p></blockquote><blockquote><p>å¦‚æœmapperæ¥å£æ–¹æ³•å½¢å‚åªæœ‰ä¸€ä¸ªæ™®é€šç±»å‹çš„å‚æ•°ï¼Œ#{â€¦} é‡Œé¢çš„å±æ€§åå¯ä»¥éšä¾¿å†™ï¼Œå¦‚ï¼š#{id}ã€#{value}ã€‚ä½†æ˜¯å»ºè®®ä¿æŒåå­—ä¸€è‡´ã€‚</p></blockquote><ul><li>æµ‹è¯•<ul><li>åœ¨å•å…ƒæµ‹è¯•ç±»ä¸­é€šè¿‡@Autowiredæ³¨è§£æ³¨å…¥EmpMapperç±»å‹å¯¹è±¡</li></ul></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">SpringbootMybatisCrudApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span> <span class="token comment">//ä»Springçš„IOCå®¹å™¨ä¸­ï¼Œè·å–ç±»å‹æ˜¯EmpMapperçš„å¯¹è±¡å¹¶æ³¨å…¥</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//è°ƒç”¨åˆ é™¤æ–¹æ³•</span>        empMapper<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="1-3-2-æ—¥å¿—è¾“å…¥"><a href="#1-3-2-æ—¥å¿—è¾“å…¥" class="headerlink" title="1.3.2 æ—¥å¿—è¾“å…¥"></a>1.3.2 æ—¥å¿—è¾“å…¥</h4><p>åœ¨Mybatiså½“ä¸­æˆ‘ä»¬å¯ä»¥å€ŸåŠ©æ—¥å¿—ï¼ŒæŸ¥çœ‹åˆ°sqlè¯­å¥çš„æ‰§è¡Œã€æ‰§è¡Œä¼ é€’çš„å‚æ•°ä»¥åŠæ‰§è¡Œç»“æœã€‚å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p><ol><li><p>æ‰“å¼€application.propertiesæ–‡ä»¶</p></li><li><p>å¼€å¯mybatisçš„æ—¥å¿—ï¼Œå¹¶æŒ‡å®šè¾“å‡ºåˆ°æ§åˆ¶å°</p></li></ol><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">#æŒ‡å®šmybatisè¾“å‡ºæ—¥å¿—çš„ä½ç½®, è¾“å‡ºæ§åˆ¶å°</span><span class="token key attr-name">mybatis.configuration.log-impl</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.ibatis.logging.stdout.StdOutImpl</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¼€å¯æ—¥å¿—ä¹‹åï¼Œæˆ‘ä»¬å†æ¬¡è¿è¡Œå•å…ƒæµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°åœ¨æ§åˆ¶å°ä¸­ï¼Œè¾“å‡ºäº†ä»¥ä¸‹çš„SQLè¯­å¥ä¿¡æ¯ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220901164225644.png"> </p><blockquote><p>ä½†æ˜¯æˆ‘ä»¬å‘ç°è¾“å‡ºçš„SQLè¯­å¥ï¼šdelete from emp where id = ?ï¼Œæˆ‘ä»¬è¾“å…¥çš„å‚æ•°16å¹¶æ²¡æœ‰åœ¨åé¢æ‹¼æ¥ï¼Œidçš„å€¼æ˜¯ä½¿ç”¨?è¿›è¡Œå ä½ã€‚é‚£è¿™ç§SQLè¯­å¥æˆ‘ä»¬ç§°ä¸ºé¢„ç¼–è¯‘SQLã€‚</p></blockquote><h4 id="1-3-3-é¢„ç¼–è¯‘SQL"><a href="#1-3-3-é¢„ç¼–è¯‘SQL" class="headerlink" title="1.3.3 é¢„ç¼–è¯‘SQL"></a>1.3.3 é¢„ç¼–è¯‘SQL</h4><h5 id="1-3-3-1-ä»‹ç»"><a href="#1-3-3-1-ä»‹ç»" class="headerlink" title="1.3.3.1 ä»‹ç»"></a>1.3.3.1 ä»‹ç»</h5><p>é¢„ç¼–è¯‘SQLæœ‰ä¸¤ä¸ªä¼˜åŠ¿ï¼š</p><ol><li>æ€§èƒ½æ›´é«˜</li><li>æ›´å®‰å…¨(é˜²æ­¢SQLæ³¨å…¥)</li></ol><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210202222206.png"></p><blockquote><p>æ€§èƒ½æ›´é«˜ï¼šé¢„ç¼–è¯‘SQLï¼Œç¼–è¯‘ä¸€æ¬¡ä¹‹åä¼šå°†ç¼–è¯‘åçš„SQLè¯­å¥ç¼“å­˜èµ·æ¥ï¼Œåé¢å†æ¬¡æ‰§è¡Œè¿™æ¡è¯­å¥æ—¶ï¼Œä¸ä¼šå†æ¬¡ç¼–è¯‘ã€‚ï¼ˆåªæ˜¯è¾“å…¥çš„å‚æ•°ä¸åŒï¼‰</p><p>æ›´å®‰å…¨(é˜²æ­¢SQLæ³¨å…¥)ï¼šå°†æ•æ„Ÿå­—è¿›è¡Œè½¬ä¹‰ï¼Œä¿éšœSQLçš„å®‰å…¨æ€§ã€‚</p></blockquote><h5 id="1-3-3-2-SQLæ³¨å…¥"><a href="#1-3-3-2-SQLæ³¨å…¥" class="headerlink" title="1.3.3.2 SQLæ³¨å…¥"></a>1.3.3.2 SQLæ³¨å…¥</h5><p>SQLæ³¨å…¥ï¼šæ˜¯é€šè¿‡æ“ä½œè¾“å…¥çš„æ•°æ®æ¥ä¿®æ”¹äº‹å…ˆå®šä¹‰å¥½çš„SQLè¯­å¥ï¼Œä»¥è¾¾åˆ°æ‰§è¡Œä»£ç å¯¹æœåŠ¡å™¨è¿›è¡Œæ”»å‡»çš„æ–¹æ³•ã€‚</p><blockquote><p>ç”±äºæ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œå……åˆ†æ£€æŸ¥ï¼Œè€ŒSQLåˆæ˜¯æ‹¼æ¥è€Œæˆï¼Œåœ¨ç”¨æˆ·è¾“å…¥å‚æ•°æ—¶ï¼Œåœ¨å‚æ•°ä¸­æ·»åŠ ä¸€äº›SQLå…³é”®å­—ï¼Œè¾¾åˆ°æ”¹å˜SQLè¿è¡Œç»“æœçš„ç›®çš„ï¼Œä¹Ÿå¯ä»¥å®Œæˆæ¶æ„æ”»å‡»ã€‚</p></blockquote><p><strong>æµ‹è¯•1ï¼šä½¿ç”¨èµ„æ–™ä¸­æä¾›çš„ç¨‹åºï¼Œæ¥éªŒè¯SQLæ³¨å…¥é—®é¢˜</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210205419634.png"></p><p>ç¬¬1æ­¥ï¼šè¿›å…¥åˆ°DOS</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221211124744203.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221211124840720.png"></p><p>ç¬¬2æ­¥ï¼šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯åŠ¨ç¨‹åº</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token comment">#å¯åŠ¨å­˜åœ¨SQLæ³¨å…¥çš„ç¨‹åº</span>java <span class="token operator">-</span>jar sql_Injection_demo-0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1-SNAPSHOT<span class="token punctuation">.</span>jar <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210211605231.png"></p><p>ç¬¬3æ­¥ï¼šæ‰“å¼€æµè§ˆå™¨è¾“å…¥<code>http://localhost:9090/login.html</code></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210212406527.png"></p><p>å‘ç°ç«Ÿç„¶èƒ½å¤Ÿç™»å½•æˆåŠŸï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210212511915.png"></p><p>ä»¥ä¸Šæ“ä½œä¸ºä»€ä¹ˆèƒ½å¤Ÿç™»å½•æˆåŠŸå‘¢ï¼Ÿ</p><ul><li>ç”±äºæ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥å†…å®¹è¿›è¡Œå……åˆ†æ£€æŸ¥ï¼Œè€ŒSQLåˆæ˜¯å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼è€Œæˆï¼Œåœ¨ç”¨æˆ·è¾“å…¥å‚æ•°æ—¶ï¼Œåœ¨å‚æ•°ä¸­æ·»åŠ ä¸€äº›SQLå…³é”®å­—ï¼Œè¾¾åˆ°æ”¹å˜SQLè¿è¡Œç»“æœçš„ç›®çš„ï¼Œä»è€Œå®Œæˆæ¶æ„æ”»å‡»ã€‚</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210213311518.png"></p><blockquote><p><img src="/assets/image-20221210214431228.png" alt="image-20221210214431228"></p><p>ç”¨æˆ·åœ¨é¡µé¢æäº¤æ•°æ®çš„æ—¶å€™äººä¸ºçš„æ·»åŠ ä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼Œä½¿å¾—sqlè¯­å¥çš„ç»“æ„å‘ç”Ÿäº†å˜åŒ–ï¼Œæœ€ç»ˆå¯ä»¥åœ¨æ²¡æœ‰ç”¨æˆ·åæˆ–è€…å¯†ç çš„æƒ…å†µä¸‹è¿›è¡Œç™»å½•ã€‚</p></blockquote><p><strong>æµ‹è¯•2ï¼šä½¿ç”¨èµ„æ–™ä¸­æä¾›çš„ç¨‹åºï¼Œæ¥éªŒè¯SQLæ³¨å…¥é—®é¢˜</strong></p><p>ç¬¬1æ­¥ï¼šè¿›å…¥åˆ°DOS</p><p>ç¬¬2æ­¥ï¼šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯åŠ¨ç¨‹åºï¼š</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell"><span class="token comment">#å¯åŠ¨è§£å†³äº†SQLæ³¨å…¥çš„ç¨‹åº</span>java <span class="token operator">-</span>jar sql_prepared_demo-0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>1-SNAPSHOT<span class="token punctuation">.</span>jar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç¬¬3æ­¥ï¼šæ‰“å¼€æµè§ˆå™¨è¾“å…¥<code>http://localhost:9090/login.html</code></p><p>å‘ç°æ— æ³•ç™»å½•ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221211125751981.png"></p><p>ä»¥ä¸Šæ“ä½œSQLè¯­å¥çš„æ‰§è¡Œï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221211130011973.png"></p><blockquote><p>æŠŠæ•´ä¸ª<code>' or '1'='1</code>ä½œä¸ºä¸€ä¸ªå®Œæ•´çš„å‚æ•°ï¼Œèµ‹å€¼ç»™ç¬¬2ä¸ªé—®å·ï¼ˆ<code>' or '1'='1</code>è¿›è¡Œäº†è½¬ä¹‰ï¼Œåªå½“åšå­—ç¬¦ä¸²ä½¿ç”¨ï¼‰</p></blockquote><h5 id="1-3-3-3-å‚æ•°å ä½ç¬¦"><a href="#1-3-3-3-å‚æ•°å ä½ç¬¦" class="headerlink" title="1.3.3.3 å‚æ•°å ä½ç¬¦"></a>1.3.3.3 å‚æ•°å ä½ç¬¦</h5><p>åœ¨Mybatisä¸­æä¾›çš„å‚æ•°å ä½ç¬¦æœ‰ä¸¤ç§ï¼š${â€¦} ã€#{â€¦}</p><ul><li><p>#{â€¦}</p><ul><li>æ‰§è¡ŒSQLæ—¶ï¼Œä¼šå°†#{â€¦}æ›¿æ¢ä¸º?ï¼Œç”Ÿæˆé¢„ç¼–è¯‘SQLï¼Œä¼šè‡ªåŠ¨è®¾ç½®å‚æ•°å€¼</li><li>ä½¿ç”¨æ—¶æœºï¼šå‚æ•°ä¼ é€’ï¼Œéƒ½ä½¿ç”¨#{â€¦}</li></ul></li><li><p>${â€¦}</p><ul><li>æ‹¼æ¥SQLã€‚ç›´æ¥å°†å‚æ•°æ‹¼æ¥åœ¨SQLè¯­å¥ä¸­ï¼Œå­˜åœ¨SQLæ³¨å…¥é—®é¢˜</li><li>ä½¿ç”¨æ—¶æœºï¼šå¦‚æœå¯¹è¡¨åã€åˆ—è¡¨è¿›è¡ŒåŠ¨æ€è®¾ç½®æ—¶ä½¿ç”¨</li></ul></li></ul><blockquote><p>æ³¨æ„äº‹é¡¹ï¼šåœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œå»ºè®®ä½¿ç”¨#{â€¦}ï¼Œç”Ÿæˆé¢„ç¼–è¯‘SQLï¼Œé˜²æ­¢SQLæ³¨å…¥å®‰å…¨ã€‚</p></blockquote><h3 id="1-4-æ–°å¢"><a href="#1-4-æ–°å¢" class="headerlink" title="1.4 æ–°å¢"></a>1.4 æ–°å¢</h3><p>åŠŸèƒ½ï¼šæ–°å¢å‘˜å·¥ä¿¡æ¯</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221211134239610.png"></p><h4 id="1-4-1-åŸºæœ¬æ–°å¢"><a href="#1-4-1-åŸºæœ¬æ–°å¢" class="headerlink" title="1.4.1 åŸºæœ¬æ–°å¢"></a>1.4.1 åŸºæœ¬æ–°å¢</h4><p>å‘˜å·¥è¡¨ç»“æ„ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221211134746319.png"></p><p>SQLè¯­å¥ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> emp<span class="token punctuation">(</span>username<span class="token punctuation">,</span> name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> image<span class="token punctuation">,</span> job<span class="token punctuation">,</span> entrydate<span class="token punctuation">,</span> dept_id<span class="token punctuation">,</span> create_time<span class="token punctuation">,</span> update_time<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'songyuanqiao'</span><span class="token punctuation">,</span><span class="token string">'å®‹è¿œæ¡¥'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'1.jpg'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'2012-10-09'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'2022-10-01 10:00:00'</span><span class="token punctuation">,</span><span class="token string">'2022-10-01 10:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¥å£æ–¹æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">"insert into emp(username, name, gender, image, job, entrydate, dept_id, create_time, update_time) values (#{username}, #{name}, #{gender}, #{image}, #{job}, #{entrydate}, #{deptId}, #{createTime}, #{updateTime})"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>è¯´æ˜ï¼š#{â€¦} é‡Œé¢å†™çš„åç§°æ˜¯å¯¹è±¡çš„å±æ€§å</p></blockquote><p>æµ‹è¯•ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">EmpMapper</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Emp</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDate</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">SpringbootMybatisCrudApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//åˆ›å»ºå‘˜å·¥å¯¹è±¡</span>        <span class="token class-name">Emp</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"æ±¤å§†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setImage</span><span class="token punctuation">(</span><span class="token string">"1.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setEntrydate</span><span class="token punctuation">(</span><span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setUpdateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setDeptId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨æ·»åŠ æ–¹æ³•</span>        empMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ—¥å¿—è¾“å‡ºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221211140222240.png"></p></blockquote><h4 id="1-4-2-ä¸»é”®è¿”å›"><a href="#1-4-2-ä¸»é”®è¿”å›" class="headerlink" title="1.4.2 ä¸»é”®è¿”å›"></a>1.4.2 ä¸»é”®è¿”å›</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241203131437017.png"></p><p>æ¦‚å¿µï¼šåœ¨æ•°æ®æ·»åŠ æˆåŠŸåï¼Œéœ€è¦è·å–æ’å…¥æ•°æ®åº“æ•°æ®çš„ä¸»é”®ã€‚</p><blockquote><p>å¦‚ï¼šæ·»åŠ å¥—é¤æ•°æ®æ—¶ï¼Œè¿˜éœ€è¦ç»´æŠ¤å¥—é¤èœå“å…³ç³»è¡¨æ•°æ®ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221211150353385.png"></p><p>ä¸šåŠ¡åœºæ™¯ï¼šåœ¨å‰é¢è®²è§£åˆ°çš„è‹ç©¹å¤–å–èœå“ä¸å¥—é¤æ¨¡å—çš„è¡¨ç»“æ„ï¼Œèœå“ä¸å¥—é¤æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼Œä¸€ä¸ªå¥—é¤å¯¹åº”å¤šä¸ªèœå“ã€‚æ—¢ç„¶æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼Œæ˜¯ä¸æ˜¯æœ‰ä¸€å¼ å¥—é¤èœå“ä¸­é—´è¡¨æ¥ç»´æŠ¤å®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212093655389.png"></p><p>åœ¨æ·»åŠ å¥—é¤çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç•Œé¢å½“ä¸­æ¥å½•å…¥å¥—é¤çš„åŸºæœ¬ä¿¡æ¯ï¼Œè¿˜éœ€è¦æ¥å½•å…¥å¥—é¤ä¸èœå“çš„å…³è”ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯å½•å…¥å®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬ä¸€ç‚¹ä¿å­˜ï¼Œå°±éœ€è¦å°†å¥—é¤çš„ä¿¡æ¯ä»¥åŠå¥—é¤ä¸èœå“çš„å…³è”ä¿¡æ¯éƒ½éœ€è¦ä¿å­˜åˆ°æ•°æ®åº“å½“ä¸­ã€‚å…¶å®å…·ä½“çš„è¿‡ç¨‹åŒ…æ‹¬ä¸¤æ­¥ï¼Œé¦–å…ˆç¬¬ä¸€æ­¥å…ˆéœ€è¦å°†å¥—é¤çš„åŸºæœ¬ä¿¡æ¯ä¿å­˜äº†ï¼Œæ¥ä¸‹æ¥ç¬¬äºŒæ­¥å†æ¥ä¿å­˜å¥—é¤ä¸èœå“çš„å…³è”ä¿¡æ¯ã€‚å¥—é¤ä¸èœå“çš„å…³è”ä¿¡æ¯å°±æ˜¯å¾€ä¸­é—´è¡¨å½“ä¸­æ¥æ’å…¥æ•°æ®ï¼Œæ¥ç»´æŠ¤å®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚è€Œä¸­é—´è¡¨å½“ä¸­æœ‰ä¸¤ä¸ªå¤–é”®å­—æ®µï¼Œä¸€ä¸ªæ˜¯èœå“çš„IDï¼Œå°±æ˜¯å½“å‰èœå“çš„IDï¼Œè¿˜æœ‰ä¸€ä¸ªå°±æ˜¯å¥—é¤çš„IDï¼Œè€Œè¿™ä¸ªå¥—é¤çš„ ID æŒ‡çš„å°±æ˜¯æ­¤æ¬¡æˆ‘æ‰€æ·»åŠ çš„å¥—é¤çš„IDï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ç¬¬ä¸€æ­¥ä¿å­˜å®Œå¥—é¤çš„åŸºæœ¬ä¿¡æ¯ä¹‹åï¼Œå°±éœ€è¦å°†å¥—é¤çš„ä¸»é”®å€¼è¿”å›æ¥ä¾›ç¬¬äºŒæ­¥è¿›è¡Œä½¿ç”¨ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°ä¸»é”®è¿”å›åŠŸèƒ½ã€‚</p></blockquote><p>é‚£è¦å¦‚ä½•å®ç°åœ¨æ’å…¥æ•°æ®ä¹‹åè¿”å›æ‰€æ’å…¥è¡Œçš„ä¸»é”®å€¼å‘¢ï¼Ÿ</p><ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰§è¡Œæ’å…¥æ“ä½œæ—¶ï¼Œæ˜¯ä¸ä¼šä¸»é”®å€¼è¿”å›çš„ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦æ‹¿åˆ°ä¸»é”®å€¼ï¼Œéœ€è¦åœ¨Mapperæ¥å£ä¸­çš„æ–¹æ³•ä¸Šæ·»åŠ ä¸€ä¸ªOptionsæ³¨è§£ï¼Œå¹¶åœ¨æ³¨è§£ä¸­æŒ‡å®šå±æ€§useGeneratedKeys=trueå’ŒkeyProperty=â€å®ä½“ç±»å±æ€§åâ€</li></ul><p>ä¸»é”®è¿”å›ä»£ç å®ç°ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>        <span class="token comment">//ä¼šè‡ªåŠ¨å°†ç”Ÿæˆçš„ä¸»é”®å€¼ï¼Œèµ‹å€¼ç»™empå¯¹è±¡çš„idå±æ€§</span>    <span class="token annotation punctuation">@Options</span><span class="token punctuation">(</span>useGeneratedKeys <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>keyProperty <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">"insert into emp(username, name, gender, image, job, entrydate, dept_id, create_time, update_time) values (#{username}, #{name}, #{gender}, #{image}, #{job}, #{entrydate}, #{deptId}, #{createTime}, #{updateTime})"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">SpringbootMybatisCrudApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//åˆ›å»ºå‘˜å·¥å¯¹è±¡</span>        <span class="token class-name">Emp</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"jack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"æ°å…‹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setImage</span><span class="token punctuation">(</span><span class="token string">"1.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setEntrydate</span><span class="token punctuation">(</span><span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setUpdateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setDeptId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨æ·»åŠ æ–¹æ³•</span>        empMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp<span class="token punctuation">.</span><span class="token function">getDeptId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-5-æ›´æ–°"><a href="#1-5-æ›´æ–°" class="headerlink" title="1.5 æ›´æ–°"></a>1.5 æ›´æ–°</h3><p>åŠŸèƒ½ï¼šä¿®æ”¹å‘˜å·¥ä¿¡æ¯</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212095605863.png"></p><blockquote><p>ç‚¹å‡»â€ç¼–è¾‘â€æŒ‰é’®åï¼Œä¼šæŸ¥è¯¢æ‰€åœ¨è¡Œè®°å½•çš„å‘˜å·¥ä¿¡æ¯ï¼Œå¹¶æŠŠå‘˜å·¥ä¿¡æ¯å›æ˜¾åœ¨ä¿®æ”¹å‘˜å·¥çš„çª—ä½“ä¸Š(ä¸‹ä¸ªçŸ¥è¯†ç‚¹å­¦ä¹ )</p><p>åœ¨ä¿®æ”¹å‘˜å·¥çš„çª—ä½“ä¸Šï¼Œå¯ä»¥ä¿®æ”¹çš„å‘˜å·¥æ•°æ®ï¼šç”¨æˆ·åã€å‘˜å·¥å§“åã€æ€§åˆ«ã€å›¾åƒã€èŒä½ã€å…¥èŒæ—¥æœŸã€å½’å±éƒ¨é—¨</p><p>æ€è€ƒï¼šåœ¨ä¿®æ”¹å‘˜å·¥æ•°æ®æ—¶ï¼Œè¦ä»¥ä»€ä¹ˆåšä¸ºæ¡ä»¶å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆï¼šå‘˜å·¥id</p></blockquote><p>SQLè¯­å¥ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">update</span> emp <span class="token keyword">set</span> username <span class="token operator">=</span> <span class="token string">'linghushaoxia'</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">'ä»¤ç‹å°‘ä¾ '</span><span class="token punctuation">,</span> gender <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">,</span> image <span class="token operator">=</span> <span class="token string">'1.jpg'</span> <span class="token punctuation">,</span> job <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> entrydate <span class="token operator">=</span> <span class="token string">'2012-01-01'</span><span class="token punctuation">,</span> dept_id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> update_time <span class="token operator">=</span> <span class="token string">'2022-10-01 12:12:12'</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¥å£æ–¹æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * æ ¹æ®idä¿®æ”¹å‘˜å·¥ä¿¡æ¯     * @param emp     */</span>    <span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">"update emp set username=#{username}, name=#{name}, gender=#{gender}, image=#{image}, job=#{job}, entrydate=#{entrydate}, dept_id=#{deptId}, update_time=#{updateTime} where id=#{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">SpringbootMybatisCrudApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//è¦ä¿®æ”¹çš„å‘˜å·¥ä¿¡æ¯</span>        <span class="token class-name">Emp</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"songdaxia"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"è€å®‹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setImage</span><span class="token punctuation">(</span><span class="token string">"2.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setEntrydate</span><span class="token punctuation">(</span><span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2012</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setUpdateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setDeptId</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨æ–¹æ³•ï¼Œä¿®æ”¹å‘˜å·¥æ•°æ®</span>        empMapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-6-æŸ¥è¯¢"><a href="#1-6-æŸ¥è¯¢" class="headerlink" title="1.6 æŸ¥è¯¢"></a>1.6 æŸ¥è¯¢</h3><h4 id="1-6-1-æ ¹æ®IDæŸ¥è¯¢"><a href="#1-6-1-æ ¹æ®IDæŸ¥è¯¢" class="headerlink" title="1.6.1 æ ¹æ®IDæŸ¥è¯¢"></a>1.6.1 æ ¹æ®IDæŸ¥è¯¢</h4><p>åœ¨å‘˜å·¥ç®¡ç†çš„é¡µé¢ä¸­ï¼Œå½“æˆ‘ä»¬è¿›è¡Œæ›´æ–°æ•°æ®æ—¶ï¼Œä¼šç‚¹å‡» â€œç¼–è¾‘â€ æŒ‰é’®ï¼Œç„¶åæ­¤æ—¶ä¼šå‘é€ä¸€ä¸ªè¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œä¼šæ ¹æ®IdæŸ¥è¯¢è¯¥å‘˜å·¥ä¿¡æ¯ï¼Œå¹¶å°†å‘˜å·¥æ•°æ®å›æ˜¾åœ¨é¡µé¢ä¸Šã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212101331292.png"> </p><p>SQLè¯­å¥ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select id, username, password, name, gender, image, job, entrydate, dept_id, create_time, update_time from emp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¥å£æ–¹æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select id, username, password, name, gender, image, job, entrydate, dept_id, create_time, update_time from emp where id=#{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Emp</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">SpringbootMybatisCrudApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpMapper</span> empMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGetById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">Emp</span> emp <span class="token operator">=</span> empMapper<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡Œç»“æœï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212103004961.png"></p><p>è€Œåœ¨æµ‹è¯•çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šå‘ç°æœ‰å‡ ä¸ªå­—æ®µ(deptIdã€createTimeã€updateTime)æ˜¯æ²¡æœ‰æ•°æ®å€¼çš„</p></blockquote><h4 id="1-6-2-æ•°æ®å°è£…"><a href="#1-6-2-æ•°æ®å°è£…" class="headerlink" title="1.6.2 æ•°æ®å°è£…"></a>1.6.2 æ•°æ®å°è£…</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241203135529879.png" alt="æ•°æ®å°è£…"></p><p>æˆ‘ä»¬çœ‹åˆ°æŸ¥è¯¢è¿”å›çš„ç»“æœä¸­å¤§éƒ¨åˆ†å­—æ®µæ˜¯æœ‰å€¼çš„ï¼Œä½†æ˜¯deptIdï¼ŒcreateTimeï¼ŒupdateTimeè¿™å‡ ä¸ªå­—æ®µæ˜¯æ²¡æœ‰å€¼çš„ï¼Œè€Œæ•°æ®åº“ä¸­æ˜¯æœ‰å¯¹åº”çš„å­—æ®µå€¼çš„ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212103124490.png"></p><p>åŸå› å¦‚ä¸‹ï¼š </p><ul><li>å®ä½“ç±»å±æ€§åå’Œæ•°æ®åº“è¡¨æŸ¥è¯¢è¿”å›çš„å­—æ®µåä¸€è‡´ï¼Œmybatisä¼šè‡ªåŠ¨å°è£…ã€‚</li><li>å¦‚æœå®ä½“ç±»å±æ€§åå’Œæ•°æ®åº“è¡¨æŸ¥è¯¢è¿”å›çš„å­—æ®µåä¸ä¸€è‡´ï¼Œä¸èƒ½è‡ªåŠ¨å°è£…ã€‚</li></ul><p> è§£å†³æ–¹æ¡ˆï¼š</p><ol><li>èµ·åˆ«å</li><li>ç»“æœæ˜ å°„</li><li>å¼€å¯é©¼å³°å‘½å</li></ol><p><strong>èµ·åˆ«å</strong>ï¼šåœ¨SQLè¯­å¥ä¸­ï¼Œå¯¹ä¸ä¸€æ ·çš„åˆ—åèµ·åˆ«åï¼Œåˆ«åå’Œå®ä½“ç±»å±æ€§åä¸€æ ·</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select id, username, password, name, gender, image, job, entrydate, "</span> <span class="token operator">+</span>        <span class="token string">"dept_id AS deptId, create_time AS createTime, update_time AS updateTime "</span> <span class="token operator">+</span>        <span class="token string">"from emp "</span> <span class="token operator">+</span>        <span class="token string">"where id=#{id}"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">Emp</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å†æ¬¡æ‰§è¡Œæµ‹è¯•ç±»ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212111027396.png"></p></blockquote><p><strong>æ‰‹åŠ¨ç»“æœæ˜ å°„</strong>ï¼šé€šè¿‡ <strong>@Results</strong>åŠ**@Result** è¿›è¡Œæ‰‹åŠ¨ç»“æœæ˜ å°„</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">"dept_id"</span><span class="token punctuation">,</span> property <span class="token operator">=</span> <span class="token string">"deptId"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>          <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">"create_time"</span><span class="token punctuation">,</span> property <span class="token operator">=</span> <span class="token string">"createTime"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>          <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>column <span class="token operator">=</span> <span class="token string">"update_time"</span><span class="token punctuation">,</span> property <span class="token operator">=</span> <span class="token string">"updateTime"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select id, username, password, name, gender, image, job, entrydate, dept_id, create_time, update_time from emp where id=#{id}"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">Emp</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>@Resultsæºä»£ç ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Documented</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Results</span> <span class="token punctuation">{</span><span class="token class-name">String</span> <span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token class-name">Result</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">//Resultç±»å‹çš„æ•°ç»„</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>@Resultæºä»£ç ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Documented</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Repeatable</span><span class="token punctuation">(</span><span class="token class-name">Results</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Result</span> <span class="token punctuation">{</span><span class="token keyword">boolean</span> <span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">//è¡¨ç¤ºå½“å‰åˆ—æ˜¯å¦ä¸ºä¸»é”®ï¼ˆtrue:æ˜¯ä¸»é”®ï¼‰</span><span class="token class-name">String</span> <span class="token function">column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token comment">//æŒ‡å®šè¡¨ä¸­å­—æ®µå</span><span class="token class-name">String</span> <span class="token function">property</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token comment">//æŒ‡å®šç±»ä¸­å±æ€§å</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">javaType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token keyword">void</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span><span class="token class-name">JdbcType</span> <span class="token function">jdbcType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token class-name">JdbcType</span><span class="token punctuation">.</span><span class="token constant">UNDEFINED</span><span class="token punctuation">;</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">TypeHandler</span><span class="token punctuation">&gt;</span></span> <span class="token function">typeHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token class-name">UnknownTypeHandler</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span><span class="token class-name">One</span> <span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token annotation punctuation">@One</span><span class="token punctuation">;</span><span class="token class-name">Many</span> <span class="token function">many</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token annotation punctuation">@Many</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><p>**å¼€å¯é©¼å³°å‘½å(æ¨è)**ï¼šå¦‚æœå­—æ®µåä¸å±æ€§åç¬¦åˆé©¼å³°å‘½åè§„åˆ™ï¼Œmybatisä¼šè‡ªåŠ¨é€šè¿‡é©¼å³°å‘½åè§„åˆ™æ˜ å°„</p><blockquote><p>é©¼å³°å‘½åè§„åˆ™ï¼š   abc_xyz    =&gt;   abcXyz</p><ul><li>è¡¨ä¸­å­—æ®µåï¼šabc_xyz</li><li>ç±»ä¸­å±æ€§åï¼šabcXyz</li></ul></blockquote><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment"># åœ¨application.propertiesä¸­æ·»åŠ ï¼š</span><span class="token key attr-name">mybatis.configuration.map-underscore-to-camel-case</span><span class="token punctuation">=</span><span class="token value attr-value">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>è¦ä½¿ç”¨é©¼å³°å‘½åå‰ææ˜¯ å®ä½“ç±»çš„å±æ€§ ä¸ æ•°æ®åº“è¡¨ä¸­çš„å­—æ®µåä¸¥æ ¼éµå®ˆé©¼å³°å‘½åã€‚</p></blockquote><h4 id="1-6-3-æ¡ä»¶æŸ¥è¯¢"><a href="#1-6-3-æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="1.6.3 æ¡ä»¶æŸ¥è¯¢"></a>1.6.3 æ¡ä»¶æŸ¥è¯¢</h4><p>åœ¨å‘˜å·¥ç®¡ç†çš„åˆ—è¡¨é¡µé¢ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æ¡ä»¶æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ï¼ŒæŸ¥è¯¢æ¡ä»¶åŒ…æ‹¬ï¼šå§“åã€æ€§åˆ«ã€å…¥èŒæ—¶é—´ã€‚ </p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212113422924.png"></p><p>é€šè¿‡é¡µé¢åŸå‹ä»¥åŠéœ€æ±‚æè¿°æˆ‘ä»¬è¦å®ç°çš„æŸ¥è¯¢ï¼š</p><ul><li>å§“åï¼šè¦æ±‚æ”¯æŒæ¨¡ç³ŠåŒ¹é…</li><li>æ€§åˆ«ï¼šè¦æ±‚ç²¾ç¡®åŒ¹é…</li><li>å…¥èŒæ—¶é—´ï¼šè¦æ±‚è¿›è¡ŒèŒƒå›´æŸ¥è¯¢</li><li>æ ¹æ®æœ€åä¿®æ”¹æ—¶é—´è¿›è¡Œé™åºæ’åº</li></ul><p>SQLè¯­å¥ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> id<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> image<span class="token punctuation">,</span> job<span class="token punctuation">,</span> entrydate<span class="token punctuation">,</span> dept_id<span class="token punctuation">,</span> create_time<span class="token punctuation">,</span> update_time <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%å¼ %'</span>       <span class="token operator">and</span> gender <span class="token operator">=</span> <span class="token number">1</span>       <span class="token operator">and</span> entrydate <span class="token operator">between</span> <span class="token string">'2010-01-01'</span> <span class="token operator">and</span> <span class="token string">'2020-01-01 '</span> <span class="token keyword">order</span> <span class="token keyword">by</span> update_time <span class="token keyword">desc</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥å£æ–¹æ³•ï¼š</p><ul><li>æ–¹å¼ä¸€</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from emp "</span> <span class="token operator">+</span>            <span class="token string">"where name like '%${name}%' "</span> <span class="token operator">+</span>            <span class="token string">"and gender = #{gender} "</span> <span class="token operator">+</span>            <span class="token string">"and entrydate between #{begin} and #{end} "</span> <span class="token operator">+</span>            <span class="token string">"order by update_time desc"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Short</span> gender<span class="token punctuation">,</span> <span class="token class-name">LocalDate</span> begin<span class="token punctuation">,</span> <span class="token class-name">LocalDate</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212115149151.png"></p><p>ä»¥ä¸Šæ–¹å¼æ³¨æ„äº‹é¡¹ï¼š</p><ol><li><p>æ–¹æ³•ä¸­çš„å½¢å‚åå’ŒSQLè¯­å¥ä¸­çš„å‚æ•°å ä½ç¬¦åä¿æŒä¸€è‡´</p></li><li><p>æ¨¡ç³ŠæŸ¥è¯¢ä½¿ç”¨${â€¦}è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œè¿™ç§æ–¹å¼å‘¢ï¼Œç”±äºæ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå¹¶ä¸æ˜¯é¢„ç¼–è¯‘çš„å½¢å¼ï¼Œæ‰€ä»¥æ•ˆç‡ä¸é«˜ã€ä¸”å­˜åœ¨sqlæ³¨å…¥é£é™©ã€‚</p></li></ol></blockquote><ul><li>æ–¹å¼äºŒï¼ˆè§£å†³SQLæ³¨å…¥é£é™©ï¼‰<ul><li>ä½¿ç”¨MySQLæä¾›çš„å­—ç¬¦ä¸²æ‹¼æ¥å‡½æ•°ï¼šconcat(â€˜%â€™ , â€˜å…³é”®å­—â€™ , â€˜%â€™)</li></ul></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from emp "</span> <span class="token operator">+</span>            <span class="token string">"where name like concat('%',#{name},'%') "</span> <span class="token operator">+</span>            <span class="token string">"and gender = #{gender} "</span> <span class="token operator">+</span>            <span class="token string">"and entrydate between #{begin} and #{end} "</span> <span class="token operator">+</span>            <span class="token string">"order by update_time desc"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Short</span> gender<span class="token punctuation">,</span> <span class="token class-name">LocalDate</span> begin<span class="token punctuation">,</span> <span class="token class-name">LocalDate</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡Œç»“æœï¼šç”Ÿæˆçš„SQLéƒ½æ˜¯é¢„ç¼–è¯‘çš„SQLè¯­å¥ï¼ˆæ€§èƒ½é«˜ã€å®‰å…¨ï¼‰</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212120006242.png"></p></blockquote><h4 id="1-6-4-å‚æ•°åè¯´æ˜"><a href="#1-6-4-å‚æ•°åè¯´æ˜" class="headerlink" title="1.6.4 å‚æ•°åè¯´æ˜"></a>1.6.4 å‚æ•°åè¯´æ˜</h4><p>åœ¨ä¸Šé¢æˆ‘ä»¬æ‰€ç¼–å†™çš„æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯æ¥å£ä¸­æ–¹æ³•çš„å½¢å‚åå’ŒSQLè¯­å¥ä¸­çš„å‚æ•°å ä½ç¬¦åç›¸åŒã€‚</p><blockquote><p>å½“æ–¹æ³•ä¸­çš„å½¢å‚åå’ŒSQLè¯­å¥ä¸­çš„å ä½ç¬¦å‚æ•°åä¸ç›¸åŒæ—¶ï¼Œå°±ä¼šå‡ºç°ä»¥ä¸‹é—®é¢˜ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212150611796.png"></p></blockquote><p>å‚æ•°ååœ¨ä¸åŒçš„SpringBootç‰ˆæœ¬ä¸­ï¼Œå¤„ç†æ–¹æ¡ˆè¿˜ä¸åŒï¼š</p><ul><li>åœ¨springBootçš„2.xç‰ˆæœ¬ï¼ˆä¿è¯å‚æ•°åä¸€è‡´ï¼‰</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212151156273.png"></p><blockquote><p>springBootçš„çˆ¶å·¥ç¨‹å¯¹compilerç¼–è¯‘æ’ä»¶è¿›è¡Œäº†é»˜è®¤çš„å‚æ•°parametersé…ç½®ï¼Œä½¿å¾—åœ¨ç¼–è¯‘æ—¶ï¼Œä¼šåœ¨ç”Ÿæˆçš„å­—èŠ‚ç æ–‡ä»¶ä¸­ä¿ç•™åŸæ–¹æ³•å½¢å‚çš„åç§°ï¼Œæ‰€ä»¥#{â€¦}é‡Œé¢å¯ä»¥ç›´æ¥é€šè¿‡å½¢å‚åè·å–å¯¹åº”çš„å€¼</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212151411154.png"></p></blockquote><ul><li>åœ¨springBootçš„1.xç‰ˆæœ¬/å•ç‹¬ä½¿ç”¨mybatisï¼ˆä½¿ç”¨@Paramæ³¨è§£æ¥æŒ‡å®šSQLè¯­å¥ä¸­çš„å‚æ•°åï¼‰</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212151628715.png"></p><blockquote><p>åœ¨ç¼–è¯‘æ—¶ï¼Œç”Ÿæˆçš„å­—èŠ‚ç æ–‡ä»¶å½“ä¸­ï¼Œä¸ä¼šä¿ç•™Mapperæ¥å£ä¸­æ–¹æ³•çš„å½¢å‚åç§°ï¼Œè€Œæ˜¯ä½¿ç”¨var1ã€var2ã€â€¦è¿™æ ·çš„å½¢å‚åå­—ï¼Œæ­¤æ—¶è¦è·å–å‚æ•°å€¼æ—¶ï¼Œå°±è¦é€šè¿‡@Paramæ³¨è§£æ¥æŒ‡å®šSQLè¯­å¥ä¸­çš„å‚æ•°å</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212151736274.png"></p></blockquote><h2 id="2-ã€Mybatisçš„XMLé…ç½®æ–‡ä»¶"><a href="#2-ã€Mybatisçš„XMLé…ç½®æ–‡ä»¶" class="headerlink" title="2.ã€Mybatisçš„XMLé…ç½®æ–‡ä»¶"></a>2.ã€Mybatisçš„XMLé…ç½®æ–‡ä»¶</h2><p>Mybatisçš„å¼€å‘æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ol><li>æ³¨è§£</li><li>XML</li></ol><h3 id="2-1-XMLé…ç½®æ–‡ä»¶è§„èŒƒ"><a href="#2-1-XMLé…ç½®æ–‡ä»¶è§„èŒƒ" class="headerlink" title="2.1 XMLé…ç½®æ–‡ä»¶è§„èŒƒ"></a>2.1 XMLé…ç½®æ–‡ä»¶è§„èŒƒ</h3><p>ä½¿ç”¨Mybatisçš„æ³¨è§£æ–¹å¼ï¼Œä¸»è¦æ˜¯æ¥å®Œæˆä¸€äº›ç®€å•çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ã€‚å¦‚æœéœ€è¦å®ç°å¤æ‚çš„SQLåŠŸèƒ½ï¼Œå»ºè®®ä½¿ç”¨XMLæ¥é…ç½®æ˜ å°„è¯­å¥ï¼Œä¹Ÿå°±æ˜¯å°†SQLè¯­å¥å†™åœ¨XMLé…ç½®æ–‡ä»¶ä¸­ã€‚</p><p>åœ¨Mybatisä¸­ä½¿ç”¨XMLæ˜ å°„æ–‡ä»¶æ–¹å¼å¼€å‘ï¼Œéœ€è¦ç¬¦åˆä¸€å®šçš„è§„èŒƒï¼š</p><ol><li><p>XMLæ˜ å°„æ–‡ä»¶çš„åç§°ä¸Mapperæ¥å£åç§°ä¸€è‡´ï¼Œå¹¶ä¸”å°†XMLæ˜ å°„æ–‡ä»¶å’ŒMapperæ¥å£æ”¾ç½®åœ¨ç›¸åŒåŒ…ä¸‹ï¼ˆåŒåŒ…åŒåï¼‰</p></li><li><p>XMLæ˜ å°„æ–‡ä»¶çš„namespaceå±æ€§ä¸ºMapperæ¥å£å…¨é™å®šåä¸€è‡´</p></li><li><p>XMLæ˜ å°„æ–‡ä»¶ä¸­sqlè¯­å¥çš„idä¸Mapperæ¥å£ä¸­çš„æ–¹æ³•åä¸€è‡´ï¼Œå¹¶ä¿æŒè¿”å›ç±»å‹ä¸€è‡´ã€‚</p></li></ol><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212153529732.png"></p><blockquote><p>&lt;select&gt;æ ‡ç­¾ï¼šå°±æ˜¯ç”¨äºç¼–å†™selectæŸ¥è¯¢è¯­å¥çš„ã€‚</p><ul><li>resultTypeå±æ€§ï¼ŒæŒ‡çš„æ˜¯æŸ¥è¯¢è¿”å›çš„å•æ¡è®°å½•æ‰€å°è£…çš„ç±»å‹ã€‚</li></ul></blockquote><h3 id="2-2-XMLé…ç½®æ–‡ä»¶å®ç°"><a href="#2-2-XMLé…ç½®æ–‡ä»¶å®ç°" class="headerlink" title="2.2 XMLé…ç½®æ–‡ä»¶å®ç°"></a>2.2 XMLé…ç½®æ–‡ä»¶å®ç°</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241203143206233.png" alt="XML"></p><p>ç¬¬1æ­¥ï¼šåˆ›å»ºXMLæ˜ å°„æ–‡ä»¶</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212154908306.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212155304635.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212155544404.png"></p><p>ç¬¬2æ­¥ï¼šç¼–å†™XMLæ˜ å°„æ–‡ä»¶</p><blockquote><p>xmlæ˜ å°„æ–‡ä»¶ä¸­çš„dtdçº¦æŸï¼Œç›´æ¥ä»mybatiså®˜ç½‘å¤åˆ¶å³å¯</p></blockquote><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>  <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>  <span class="token string">"https://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é…ç½®ï¼šXMLæ˜ å°„æ–‡ä»¶çš„namespaceå±æ€§ä¸ºMapperæ¥å£å…¨é™å®šå</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212160316644.png"></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="token string">"https://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.mapper.EmpMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é…ç½®ï¼šXMLæ˜ å°„æ–‡ä»¶ä¸­sqlè¯­å¥çš„idä¸Mapperæ¥å£ä¸­çš„æ–¹æ³•åä¸€è‡´ï¼Œå¹¶ä¿æŒè¿”å›ç±»å‹ä¸€è‡´</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212163528787.png"></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="token string">"https://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.mapper.EmpMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--æŸ¥è¯¢æ“ä½œ--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.pojo.Emp<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        select * from emp        where name like concat('%',#{name},'%')              and gender = #{gender}              and entrydate between #{begin} and #{end}        order by update_time desc    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>è¿è¡Œæµ‹è¯•ç±»ï¼Œæ‰§è¡Œç»“æœï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221212163719534.png"></p></blockquote><h3 id="2-3-MybatisXçš„ä½¿ç”¨"><a href="#2-3-MybatisXçš„ä½¿ç”¨" class="headerlink" title="2.3 MybatisXçš„ä½¿ç”¨"></a>2.3 MybatisXçš„ä½¿ç”¨</h3><p>MybatisXæ˜¯ä¸€æ¬¾åŸºäºIDEAçš„å¿«é€Ÿå¼€å‘Mybatisçš„æ’ä»¶ï¼Œä¸ºæ•ˆç‡è€Œç”Ÿã€‚</p><p>MybatisXçš„å®‰è£…ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213120923252.png"></p><p>å¯ä»¥é€šè¿‡MybatisXå¿«é€Ÿå®šä½ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213121521406.png"></p><blockquote><p>MybatisXçš„ä½¿ç”¨åœ¨åç»­å­¦ä¹ ä¸­ä¼šç»§ç»­åˆ†äº«</p></blockquote><p>å­¦ä¹ äº†Mybatisä¸­XMLé…ç½®æ–‡ä»¶çš„å¼€å‘æ–¹å¼äº†ï¼Œå¤§å®¶å¯èƒ½ä¼šå­˜åœ¨ä¸€ä¸ªç–‘é—®ï¼šåˆ°åº•æ˜¯ä½¿ç”¨æ³¨è§£æ–¹å¼å¼€å‘è¿˜æ˜¯ä½¿ç”¨XMLæ–¹å¼å¼€å‘ï¼Ÿ</p><blockquote><p>å®˜æ–¹è¯´æ˜ï¼š<a href="https://mybatis.net.cn/getting-started.html">https://mybatis.net.cn/getting-started.html</a></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220901173948645.png"> </p></blockquote><p><strong>ç»“è®ºï¼š</strong>ä½¿ç”¨Mybatisçš„æ³¨è§£ï¼Œä¸»è¦æ˜¯æ¥å®Œæˆä¸€äº›ç®€å•çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ã€‚å¦‚æœéœ€è¦å®ç°å¤æ‚çš„SQLåŠŸèƒ½ï¼Œå»ºè®®ä½¿ç”¨XMLæ¥é…ç½®æ˜ å°„è¯­å¥ã€‚</p><h2 id="3ã€MybatisåŠ¨æ€SQL"><a href="#3ã€MybatisåŠ¨æ€SQL" class="headerlink" title="3ã€MybatisåŠ¨æ€SQL"></a>3ã€MybatisåŠ¨æ€SQL</h2><h3 id="3-1-ä»€ä¹ˆæ˜¯åŠ¨æ€SQL"><a href="#3-1-ä»€ä¹ˆæ˜¯åŠ¨æ€SQL" class="headerlink" title="3.1 ä»€ä¹ˆæ˜¯åŠ¨æ€SQL"></a>3.1 ä»€ä¹ˆæ˜¯åŠ¨æ€SQL</h3><p>åœ¨é¡µé¢åŸå‹ä¸­ï¼Œåˆ—è¡¨ä¸Šæ–¹çš„æ¡ä»¶æ˜¯åŠ¨æ€çš„ï¼Œæ˜¯å¯ä»¥ä¸ä¼ é€’çš„ï¼Œä¹Ÿå¯ä»¥åªä¼ é€’å…¶ä¸­çš„1ä¸ªæˆ–è€…2ä¸ªæˆ–è€…å…¨éƒ¨ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220901172933012.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220901173203491.png"></p><p>è€Œåœ¨æˆ‘ä»¬åˆšæ‰ç¼–å†™çš„SQLè¯­å¥ä¸­ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ï¼Œæˆ‘ä»¬å°†ä¸‰ä¸ªæ¡ä»¶ç›´æ¥å†™æ­»äº†ã€‚ å¦‚æœé¡µé¢åªä¼ é€’äº†å‚æ•°å§“åname å­—æ®µï¼Œå…¶ä»–ä¸¤ä¸ªå­—æ®µ æ€§åˆ« å’Œ å…¥èŒæ—¶é—´æ²¡æœ‰ä¼ é€’ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå‚æ•°çš„å€¼å°±æ˜¯nullã€‚</p><p>æ­¤æ—¶ï¼Œæ‰§è¡Œçš„SQLè¯­å¥ä¸ºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220901173431554.png"> </p><p>è¿™ä¸ªæŸ¥è¯¢ç»“æœæ˜¯ä¸æ­£ç¡®çš„ã€‚æ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯ï¼šä¼ é€’äº†å‚æ•°ï¼Œå†ç»„è£…è¿™ä¸ªæŸ¥è¯¢æ¡ä»¶ï¼›å¦‚æœæ²¡æœ‰ä¼ é€’å‚æ•°ï¼Œå°±ä¸åº”è¯¥ç»„è£…è¿™ä¸ªæŸ¥è¯¢æ¡ä»¶ã€‚</p><p>æ¯”å¦‚ï¼šå¦‚æœå§“åè¾“å…¥äº†â€å¼ â€, å¯¹åº”çš„SQLä¸º:</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span>  <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%å¼ %'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> update_time <span class="token keyword">desc</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœå§“åè¾“å…¥äº†â€å¼ â€,ï¼Œæ€§åˆ«é€‰æ‹©äº†â€ç”·â€ï¼Œåˆ™å¯¹åº”çš„SQLä¸º:</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span>  <span class="token keyword">from</span> emp <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%å¼ %'</span> <span class="token operator">and</span> gender <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">order</span> <span class="token keyword">by</span> update_time <span class="token keyword">desc</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>SQLè¯­å¥ä¼šéšç€ç”¨æˆ·çš„è¾“å…¥æˆ–å¤–éƒ¨æ¡ä»¶çš„å˜åŒ–è€Œå˜åŒ–ï¼Œæˆ‘ä»¬ç§°ä¸ºï¼š<strong>åŠ¨æ€SQL</strong>ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213122623278.png"></p><p>åœ¨Mybatisä¸­æä¾›äº†å¾ˆå¤šå®ç°åŠ¨æ€SQLçš„æ ‡ç­¾ï¼Œæˆ‘ä»¬å­¦ä¹ Mybatisä¸­çš„åŠ¨æ€SQLå°±æ˜¯æŒæ¡è¿™äº›åŠ¨æ€SQLæ ‡ç­¾ã€‚</p><h3 id="3-2-åŠ¨æ€SQL-if"><a href="#3-2-åŠ¨æ€SQL-if" class="headerlink" title="3.2 åŠ¨æ€SQL-if"></a>3.2 åŠ¨æ€SQL-if</h3><p><code>&lt;if&gt;</code>ï¼šç”¨äºåˆ¤æ–­æ¡ä»¶æ˜¯å¦æˆç«‹ã€‚ä½¿ç”¨testå±æ€§è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœæ¡ä»¶ä¸ºtrueï¼Œåˆ™æ‹¼æ¥SQLã€‚</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ¡ä»¶è¡¨è¾¾å¼<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>   è¦æ‹¼æ¥çš„sqlè¯­å¥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±é€šè¿‡<code>&lt;if&gt;</code>æ ‡ç­¾æ¥æ”¹é€ ä¹‹å‰æ¡ä»¶æŸ¥è¯¢çš„æ¡ˆä¾‹ã€‚</p><h4 id="3-2-1-æ¡ä»¶æŸ¥è¯¢"><a href="#3-2-1-æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="3.2.1 æ¡ä»¶æŸ¥è¯¢"></a>3.2.1 æ¡ä»¶æŸ¥è¯¢</h4><p>ç¤ºä¾‹ï¼šæŠŠSQLè¯­å¥æ”¹é€ ä¸ºåŠ¨æ€SQLæ–¹å¼</p><ul><li>åŸæœ‰çš„SQLè¯­å¥</li></ul><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.pojo.Emp<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        select * from emp        where name like concat('%',#{name},'%')              and gender = #{gender}              and entrydate between #{begin} and #{end}        order by update_time desc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åŠ¨æ€SQLè¯­å¥</li></ul><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.pojo.Emp<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        select * from emp        where                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                 name like concat('%',#{name},'%')             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                 and gender = #{gender}             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>begin != null and end != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                 and entrydate between #{begin} and #{end}             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            order by update_time desc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•æ–¹æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//æ€§åˆ«æ•°æ®ä¸ºnullã€å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ä¹Ÿä¸ºnull</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> empMapper<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token string">"å¼ "</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp <span class="token operator">:</span> list<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡Œçš„SQLè¯­å¥ï¼š </p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213140353285.png"></p></blockquote><p>ä¸‹é¢å‘¢ï¼Œæˆ‘ä»¬ä¿®æ”¹æµ‹è¯•æ–¹æ³•ä¸­çš„ä»£ç ï¼Œå†æ¬¡è¿›è¡Œæµ‹è¯•ï¼Œè§‚å¯Ÿæ‰§è¡Œæƒ…å†µï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//å§“åä¸ºnull</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> empMapper<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp <span class="token operator">:</span> list<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œç»“æœï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213141139015.png"> </p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213141253355.png"> </p><p>å†æ¬¡ä¿®æ”¹æµ‹è¯•æ–¹æ³•ä¸­çš„ä»£ç ï¼Œå†æ¬¡è¿›è¡Œæµ‹è¯•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//ä¼ é€’çš„æ•°æ®å…¨éƒ¨ä¸ºnull</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> empMapper<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp <span class="token operator">:</span> list<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œçš„SQLè¯­å¥ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213143854434.png"></p><p>ä»¥ä¸Šé—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨<code>&lt;where&gt;</code>æ ‡ç­¾ä»£æ›¿SQLè¯­å¥ä¸­çš„whereå…³é”®å­—</p><ul><li><code>&lt;where&gt;</code>åªä¼šåœ¨å­å…ƒç´ æœ‰å†…å®¹çš„æƒ…å†µä¸‹æ‰æ’å…¥whereå­å¥ï¼Œè€Œä¸”ä¼šè‡ªåŠ¨å»é™¤å­å¥çš„å¼€å¤´çš„ANDæˆ–OR</li></ul><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.pojo.Emp<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        select * from emp        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>             <span class="token comment">&lt;!-- ifåšä¸ºwhereæ ‡ç­¾çš„å­å…ƒç´  --&gt;</span>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                 and name like concat('%',#{name},'%')             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                 and gender = #{gender}             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>begin != null and end != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                 and entrydate between #{begin} and #{end}             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>        order by update_time desc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•æ–¹æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//åªæœ‰æ€§åˆ«</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> empMapper<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp <span class="token operator">:</span> list<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡Œçš„SQLè¯­å¥ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213141909455.png"></p></blockquote><h4 id="3-2-2-æ›´æ–°å‘˜å·¥"><a href="#3-2-2-æ›´æ–°å‘˜å·¥" class="headerlink" title="3.2.2 æ›´æ–°å‘˜å·¥"></a>3.2.2 æ›´æ–°å‘˜å·¥</h4><p>æ¡ˆä¾‹ï¼šå®Œå–„æ›´æ–°å‘˜å·¥åŠŸèƒ½ï¼Œä¿®æ”¹ä¸ºåŠ¨æ€æ›´æ–°å‘˜å·¥æ•°æ®ä¿¡æ¯</p><ul><li>åŠ¨æ€æ›´æ–°å‘˜å·¥ä¿¡æ¯ï¼Œå¦‚æœæ›´æ–°æ—¶ä¼ é€’æœ‰å€¼ï¼Œåˆ™æ›´æ–°ï¼›å¦‚æœæ›´æ–°æ—¶æ²¡æœ‰ä¼ é€’å€¼ï¼Œåˆ™ä¸æ›´æ–°</li><li>è§£å†³æ–¹æ¡ˆï¼šåŠ¨æ€SQL</li></ul><p>ä¿®æ”¹Mapperæ¥å£ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token comment">//åˆ é™¤@Updateæ³¨è§£ç¼–å†™çš„SQLè¯­å¥</span>    <span class="token comment">//updateæ“ä½œçš„SQLè¯­å¥ç¼–å†™åœ¨Mapperæ˜ å°„æ–‡ä»¶ä¸­</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¿®æ”¹Mapperæ˜ å°„æ–‡ä»¶ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="token string">"https://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.mapper.EmpMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--æ›´æ–°æ“ä½œ--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>update<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        update emp        set            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                username=#{username},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                name=#{name},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                gender=#{gender},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                image=#{image},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>job != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                job=#{job},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>entrydate != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                entrydate=#{entrydate},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>deptId != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                dept_id=#{deptId},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateTime != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                update_time=#{updateTime}            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>        where id=#{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•æ–¹æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//è¦ä¿®æ”¹çš„å‘˜å·¥ä¿¡æ¯</span>        <span class="token class-name">Emp</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"Tom111"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"æ±¤å§†111"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setUpdateTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è°ƒç”¨æ–¹æ³•ï¼Œä¿®æ”¹å‘˜å·¥æ•°æ®</span>        empMapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡Œçš„SQLè¯­å¥ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213152533851.png"></p></blockquote><p>å†æ¬¡ä¿®æ”¹æµ‹è¯•æ–¹æ³•ï¼Œè§‚å¯ŸSQLè¯­å¥æ‰§è¡Œæƒ…å†µï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//è¦ä¿®æ”¹çš„å‘˜å·¥ä¿¡æ¯</span>        <span class="token class-name">Emp</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        emp<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"Tom222"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">//è°ƒç”¨æ–¹æ³•ï¼Œä¿®æ”¹å‘˜å·¥æ•°æ®</span>        empMapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡Œçš„SQLè¯­å¥ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213152850322.png"></p></blockquote><p>ä»¥ä¸Šé—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨<code>&lt;set&gt;</code>æ ‡ç­¾ä»£æ›¿SQLè¯­å¥ä¸­çš„setå…³é”®å­—</p><ul><li><code>&lt;set&gt;</code>ï¼šåŠ¨æ€çš„åœ¨SQLè¯­å¥ä¸­æ’å…¥setå…³é”®å­—ï¼Œå¹¶ä¼šåˆ æ‰é¢å¤–çš„é€—å·ã€‚ï¼ˆç”¨äºupdateè¯­å¥ä¸­ï¼‰</li></ul><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="token string">"https://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.mapper.EmpMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--æ›´æ–°æ“ä½œ--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>update<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        update emp        <span class="token comment">&lt;!-- ä½¿ç”¨setæ ‡ç­¾ï¼Œä»£æ›¿updateè¯­å¥ä¸­çš„setå…³é”®å­— --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                username=#{username},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                name=#{name},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                gender=#{gender},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                image=#{image},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>job != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                job=#{job},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>entrydate != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                entrydate=#{entrydate},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>deptId != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                dept_id=#{deptId},            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateTime != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                update_time=#{updateTime}            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>        where id=#{id}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å†æ¬¡æ‰§è¡Œæµ‹è¯•æ–¹æ³•ï¼Œæ‰§è¡Œçš„SQLè¯­å¥ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213153329553.png"></p></blockquote><p><strong>å°ç»“</strong></p><ul><li><p><code>&lt;if&gt;</code></p><ul><li><p>ç”¨äºåˆ¤æ–­æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œå¦‚æœæ¡ä»¶ä¸ºtrueï¼Œåˆ™æ‹¼æ¥SQL</p></li><li><p>å½¢å¼ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> â€¦ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul></li><li><p><code>&lt;where&gt;</code></p><ul><li>whereå…ƒç´ åªä¼šåœ¨å­å…ƒç´ æœ‰å†…å®¹çš„æƒ…å†µä¸‹æ‰æ’å…¥whereå­å¥ï¼Œè€Œä¸”ä¼šè‡ªåŠ¨å»é™¤å­å¥çš„å¼€å¤´çš„ANDæˆ–OR</li></ul></li><li><p><code>&lt;set&gt;</code></p><ul><li>åŠ¨æ€åœ°åœ¨è¡Œé¦–æ’å…¥ SET å…³é”®å­—ï¼Œå¹¶ä¼šåˆ æ‰é¢å¤–çš„é€—å·ã€‚ï¼ˆç”¨åœ¨updateè¯­å¥ä¸­ï¼‰</li></ul></li></ul><h3 id="3-3-åŠ¨æ€SQL-foreach"><a href="#3-3-åŠ¨æ€SQL-foreach" class="headerlink" title="3.3 åŠ¨æ€SQL-foreach"></a>3.3 åŠ¨æ€SQL-foreach</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241203160244828.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241203160719224.png"></p><p>æ¡ˆä¾‹ï¼šå‘˜å·¥åˆ é™¤åŠŸèƒ½ï¼ˆæ—¢æ”¯æŒåˆ é™¤å•æ¡è®°å½•ï¼Œåˆæ”¯æŒæ‰¹é‡åˆ é™¤ï¼‰</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220901181751004.png"> </p><p>SQLè¯­å¥ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">delete from emp where id in (1,2,3);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>Mapperæ¥å£ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpMapper</span> <span class="token punctuation">{</span>    <span class="token comment">//æ‰¹é‡åˆ é™¤</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteByIds</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>XMLæ˜ å°„æ–‡ä»¶ï¼š</p><ul><li>ä½¿ç”¨<code>&lt;foreach&gt;</code>éå†deleteByIdsæ–¹æ³•ä¸­ä¼ é€’çš„å‚æ•°idsé›†åˆ</li></ul><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é›†åˆåç§°<span class="token punctuation">"</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>é›†åˆéå†å‡ºæ¥çš„å…ƒç´ /é¡¹<span class="token punctuation">"</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æ¯ä¸€æ¬¡éå†ä½¿ç”¨çš„åˆ†éš”ç¬¦<span class="token punctuation">"</span></span>          <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>éå†å¼€å§‹å‰æ‹¼æ¥çš„ç‰‡æ®µ<span class="token punctuation">"</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>éå†ç»“æŸåæ‹¼æ¥çš„ç‰‡æ®µ<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="token string">"https://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.mapper.EmpMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--åˆ é™¤æ“ä½œ--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>deleteByIds<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        delete from emp where id in        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ids<span class="token punctuation">"</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>,<span class="token punctuation">"</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(<span class="token punctuation">"</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            #{id}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213165710141.png"></p></blockquote><blockquote><p>æ‰§è¡Œçš„SQLè¯­å¥ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213164957636.png"></p></blockquote><h3 id="3-4-åŠ¨æ€SQL-sql-include"><a href="#3-4-åŠ¨æ€SQL-sql-include" class="headerlink" title="3.4 åŠ¨æ€SQL-sql&amp;include"></a>3.4 åŠ¨æ€SQL-sql&amp;include</h3><p>é—®é¢˜åˆ†æï¼š</p><ul><li>åœ¨xmlæ˜ å°„æ–‡ä»¶ä¸­é…ç½®çš„SQLï¼Œæœ‰æ—¶å¯èƒ½ä¼šå­˜åœ¨å¾ˆå¤šé‡å¤çš„ç‰‡æ®µï¼Œæ­¤æ—¶å°±ä¼šå­˜åœ¨å¾ˆå¤šå†—ä½™çš„ä»£ç </li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220901182204358.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220901182249421.png"></p><p>æˆ‘ä»¬å¯ä»¥å¯¹é‡å¤çš„ä»£ç ç‰‡æ®µè¿›è¡ŒæŠ½å–ï¼Œå°†å…¶é€šè¿‡<code>&lt;sql&gt;</code>æ ‡ç­¾å°è£…åˆ°ä¸€ä¸ªSQLç‰‡æ®µï¼Œç„¶åå†é€šè¿‡<code>&lt;include&gt;</code>æ ‡ç­¾è¿›è¡Œå¼•ç”¨ã€‚</p><ul><li><p><code>&lt;sql&gt;</code>ï¼šå®šä¹‰å¯é‡ç”¨çš„SQLç‰‡æ®µ</p></li><li><p><code>&lt;include&gt;</code>ï¼šé€šè¿‡å±æ€§refidï¼ŒæŒ‡å®šåŒ…å«çš„SQLç‰‡æ®µ</p></li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221213171244796.png"></p><p>SQLç‰‡æ®µï¼š æŠ½å–é‡å¤çš„ä»£ç </p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>commonSelect<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> select id, username, password, name, gender, image, job, entrydate, dept_id, create_time, update_time from emp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç„¶åé€šè¿‡<code>&lt;include&gt;</code> æ ‡ç­¾åœ¨åŸæ¥æŠ½å–çš„åœ°æ–¹è¿›è¡Œå¼•ç”¨ã€‚æ“ä½œå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.itheima.pojo.Emp<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>commonSelect<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            name like concat('%',#{name},'%')        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gender != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            and gender = #{gender}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>begin != null and end != null<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            and entrydate between #{begin} and #{end}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>    order by update_time desc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MybatisåŸºç¡€æ“ä½œ </tag>
            
            <tag> XML </tag>
            
            <tag> åŠ¨æ€sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mybatisï¼ˆ1ï¼‰</title>
      <link href="/2024/12/01/mybatis-1/"/>
      <url>/2024/12/01/mybatis-1/</url>
      
        <content type="html"><![CDATA[<h1 id="Mybatiså…¥é—¨"><a href="#Mybatiså…¥é—¨" class="headerlink" title="Mybatiså…¥é—¨"></a>Mybatiså…¥é—¨</h1><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241201234138327.png"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å‰é¢æˆ‘ä»¬å­¦ä¹ MySQLæ•°æ®åº“æ—¶ï¼Œéƒ½æ˜¯åˆ©ç”¨å›¾å½¢åŒ–å®¢æˆ·ç«¯å·¥å…·(å¦‚ï¼šideaã€datagrip)ï¼Œæ¥æ“ä½œæ•°æ®åº“çš„ã€‚</p><blockquote><p>åœ¨å®¢æˆ·ç«¯å·¥å…·ä¸­ï¼Œç¼–å†™å¢åˆ æ”¹æŸ¥çš„SQLè¯­å¥ï¼Œå‘ç»™MySQLæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œç”±æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ‰§è¡ŒSQLè¯­å¥å¹¶è¿”å›æ‰§è¡Œç»“æœã€‚</p><p>å¢åˆ æ”¹æ“ä½œï¼šè¿”å›å—å½±å“è¡Œæ•°</p><p>æŸ¥è¯¢æ“ä½œï¼šè¿”å›ç»“æœé›†(æŸ¥è¯¢çš„ç»“æœ)</p></blockquote><p>æˆ‘ä»¬åšä¸ºåç«¯ç¨‹åºå¼€å‘äººå‘˜ï¼Œé€šå¸¸ä¼šä½¿ç”¨Javaç¨‹åºæ¥å®Œæˆå¯¹æ•°æ®åº“çš„æ“ä½œã€‚Javaç¨‹åºæ“ä½œæ•°æ®åº“ï¼Œç°åœ¨ä¸»æµçš„æ–¹å¼æ˜¯ï¼šMybatisã€‚</p><p>ä»€ä¹ˆæ˜¯MyBatis?</p><ul><li><p>MyBatisæ˜¯ä¸€æ¬¾ä¼˜ç§€çš„ <strong>æŒä¹…å±‚</strong> <strong>æ¡†æ¶</strong>ï¼Œç”¨äºç®€åŒ–JDBCçš„å¼€å‘ã€‚</p></li><li><p>MyBatisæœ¬æ˜¯ Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatisï¼Œ2010å¹´è¿™ä¸ªé¡¹ç›®ç”±apacheè¿ç§»åˆ°äº†google codeï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatis ã€‚2013å¹´11æœˆè¿ç§»åˆ°Githubã€‚</p></li><li><p>å®˜ç½‘ï¼š<a href="https://mybatis.org/mybatis-3/zh/index.html">https://mybatis.org/mybatis-3/zh/index.html</a></p></li></ul><p>åœ¨ä¸Šé¢æˆ‘ä»¬æåˆ°äº†ä¸¤ä¸ªè¯ï¼šä¸€ä¸ªæ˜¯æŒä¹…å±‚ï¼Œå¦ä¸€ä¸ªæ˜¯æ¡†æ¶ã€‚</p><ul><li>æŒä¹…å±‚ï¼šæŒ‡çš„æ˜¯å°±æ˜¯æ•°æ®è®¿é—®å±‚(dao)ï¼Œæ˜¯ç”¨æ¥æ“ä½œæ•°æ®åº“çš„ã€‚</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220901114951631.png"> </p><ul><li>æ¡†æ¶ï¼šæ˜¯ä¸€ä¸ªåŠæˆå“è½¯ä»¶ï¼Œæ˜¯ä¸€å¥—å¯é‡ç”¨çš„ã€é€šç”¨çš„ã€è½¯ä»¶åŸºç¡€ä»£ç æ¨¡å‹ã€‚åœ¨æ¡†æ¶çš„åŸºç¡€ä¸Šè¿›è¡Œè½¯ä»¶å¼€å‘æ›´åŠ é«˜æ•ˆã€è§„èŒƒã€é€šç”¨ã€å¯æ‹“å±•ã€‚</li></ul><p>Mybatisè¯¾ç¨‹å®‰æ’ï¼š</p><ul><li><p>Mybatiså…¥é—¨</p></li><li><p>MybatisåŸºç¡€å¢åˆ æ”¹æŸ¥</p></li><li><p>MybatisåŠ¨æ€SQL</p></li></ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±é€šè¿‡ä¸€ä¸ªå…¥é—¨ç¨‹åºï¼Œè®©å¤§å®¶å¿«é€Ÿæ„Ÿå—ä¸€ä¸‹é€šè¿‡Mybatiså¦‚ä½•æ¥æ“ä½œæ•°æ®åº“ã€‚</p><h2 id="1-å¿«é€Ÿå…¥é—¨"><a href="#1-å¿«é€Ÿå…¥é—¨" class="headerlink" title="1. å¿«é€Ÿå…¥é—¨"></a>1. å¿«é€Ÿå…¥é—¨</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241202104414398.png" alt="å…¥é—¨"></p><p>éœ€æ±‚ï¼šä½¿ç”¨MybatisæŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·æ•°æ®ã€‚</p><h3 id="1-1-å…¥é—¨ç¨‹åºåˆ†æ"><a href="#1-1-å…¥é—¨ç¨‹åºåˆ†æ" class="headerlink" title="1.1 å…¥é—¨ç¨‹åºåˆ†æ"></a>1.1 å…¥é—¨ç¨‹åºåˆ†æ</h3><p>ä»¥å‰æˆ‘ä»¬æ˜¯åœ¨å›¾å½¢åŒ–å®¢æˆ·ç«¯å·¥å…·ä¸­ç¼–å†™SQLæŸ¥è¯¢ä»£ç ï¼Œå‘é€ç»™æ•°æ®åº“æ‰§è¡Œï¼Œæ•°æ®åº“æ‰§è¡Œåè¿”å›æ“ä½œç»“æœã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221209155704203.png"> </p><p>å›¾å½¢åŒ–å·¥å…·ä¼šæŠŠæ•°æ®åº“æ‰§è¡Œçš„æŸ¥è¯¢ç»“æœï¼Œä½¿ç”¨è¡¨æ ¼çš„å½¢å¼å±•ç°å‡ºæ¥</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220901121116813.png"> </p><p>ç°åœ¨ä½¿ç”¨Mybatisæ“ä½œæ•°æ®åº“ï¼Œå°±æ˜¯åœ¨Mybatisä¸­ç¼–å†™SQLæŸ¥è¯¢ä»£ç ï¼Œå‘é€ç»™æ•°æ®åº“æ‰§è¡Œï¼Œæ•°æ®åº“æ‰§è¡Œåè¿”å›ç»“æœã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221209155904370.png"></p><p> Mybatisä¼šæŠŠæ•°æ®åº“æ‰§è¡Œçš„æŸ¥è¯¢ç»“æœï¼Œä½¿ç”¨å®ä½“ç±»å°è£…èµ·æ¥ï¼ˆä¸€è¡Œè®°å½•å¯¹åº”ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡ï¼‰</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221209161623051.png"></p><p>Mybatisæ“ä½œæ•°æ®åº“çš„æ­¥éª¤ï¼š</p><ol><li><p>å‡†å¤‡å·¥ä½œ(åˆ›å»ºspringbootå·¥ç¨‹ã€æ•°æ®åº“è¡¨userã€å®ä½“ç±»User)</p></li><li><p>å¼•å…¥Mybatisçš„ç›¸å…³ä¾èµ–ï¼Œé…ç½®Mybatis(æ•°æ®åº“è¿æ¥ä¿¡æ¯)</p></li><li><p>ç¼–å†™SQLè¯­å¥(æ³¨è§£/XML)</p></li></ol><h3 id="1-2-å…¥é—¨ç¨‹åºå®ç°"><a href="#1-2-å…¥é—¨ç¨‹åºå®ç°" class="headerlink" title="1.2 å…¥é—¨ç¨‹åºå®ç°"></a>1.2 å…¥é—¨ç¨‹åºå®ç°</h3><h4 id="1-2-1-å‡†å¤‡å·¥ä½œ"><a href="#1-2-1-å‡†å¤‡å·¥ä½œ" class="headerlink" title="1.2.1 å‡†å¤‡å·¥ä½œ"></a>1.2.1 å‡†å¤‡å·¥ä½œ</h4><h5 id="1-2-1-1-åˆ›å»ºspringbootå·¥ç¨‹"><a href="#1-2-1-1-åˆ›å»ºspringbootå·¥ç¨‹" class="headerlink" title="1.2.1.1 åˆ›å»ºspringbootå·¥ç¨‹"></a>1.2.1.1 åˆ›å»ºspringbootå·¥ç¨‹</h5><p>åˆ›å»ºspringbootå·¥ç¨‹ï¼Œå¹¶å¯¼å…¥ mybatisçš„èµ·æ­¥ä¾èµ–ã€mysqlçš„é©±åŠ¨åŒ…ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221209162827242.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221209163123443.png"></p><blockquote><p>é¡¹ç›®å·¥ç¨‹åˆ›å»ºå®Œæˆåï¼Œè‡ªåŠ¨åœ¨pom.xmlæ–‡ä»¶ä¸­ï¼Œå¯¼å…¥Mybatisä¾èµ–å’ŒMySQLé©±åŠ¨ä¾èµ–</p></blockquote><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">    <span class="token comment">&lt;!-- springbootçˆ¶å·¥ç¨‹--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- ä»…ä¾›å‚è€ƒï¼šåªç²˜è´´äº†pom.xmlä¸­éƒ¨åˆ†å†…å®¹ springboot2.7.5ç‰ˆæœ¬ç”¨mysqlé©±åŠ¨2.3.0 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- mybatisèµ·æ­¥ä¾èµ– --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- mysqlé©±åŠ¨åŒ…ä¾èµ– --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>                <span class="token comment">&lt;!-- springå•å…ƒæµ‹è¯• (é›†æˆäº†junit) --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/db04    <span class="token key atrule">username</span><span class="token punctuation">:</span> root    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="1-2-1-2-æ•°æ®å‡†å¤‡"><a href="#1-2-1-2-æ•°æ®å‡†å¤‡" class="headerlink" title="1.2.1.2 æ•°æ®å‡†å¤‡"></a>1.2.1.2 æ•°æ®å‡†å¤‡</h5><p>åˆ›å»ºç”¨æˆ·è¡¨userï¼Œå¹¶åˆ›å»ºå¯¹åº”çš„å®ä½“ç±»Userã€‚</p><ul><li>ç”¨æˆ·è¡¨ï¼š</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- ç”¨æˆ·è¡¨</span><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">user</span><span class="token punctuation">(</span>    id <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span> <span class="token string">'ID'</span><span class="token punctuation">,</span>    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'å§“å'</span><span class="token punctuation">,</span>    age <span class="token keyword">tinyint</span> <span class="token keyword">unsigned</span> <span class="token keyword">comment</span> <span class="token string">'å¹´é¾„'</span><span class="token punctuation">,</span>    gender <span class="token keyword">tinyint</span> <span class="token keyword">unsigned</span> <span class="token keyword">comment</span> <span class="token string">'æ€§åˆ«, 1:ç”·, 2:å¥³'</span><span class="token punctuation">,</span>    phone <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'æ‰‹æœºå·'</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'ç”¨æˆ·è¡¨'</span><span class="token punctuation">;</span><span class="token comment">-- æµ‹è¯•æ•°æ®</span><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> phone<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'ç™½çœ‰é¹°ç‹'</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'18800000000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> phone<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'é‡‘æ¯›ç‹®ç‹'</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'18800000001'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> phone<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'é’ç¿¼è ç‹'</span><span class="token punctuation">,</span><span class="token number">38</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'18800000002'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> phone<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'ç´«è¡«é¾™ç‹'</span><span class="token punctuation">,</span><span class="token number">42</span><span class="token punctuation">,</span><span class="token string">'2'</span><span class="token punctuation">,</span><span class="token string">'18800000003'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> phone<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'å…‰æ˜å·¦ä½¿'</span><span class="token punctuation">,</span><span class="token number">37</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'18800000004'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> phone<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'å…‰æ˜å³ä½¿'</span><span class="token punctuation">,</span><span class="token number">48</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'18800000005'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>å®ä½“ç±»</p><ul><li>å®ä½“ç±»çš„å±æ€§åä¸è¡¨ä¸­çš„å­—æ®µåä¸€ä¸€å¯¹åº”ã€‚</li></ul></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>   <span class="token comment">//idï¼ˆä¸»é”®ï¼‰</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>  <span class="token comment">//å§“å</span>    <span class="token keyword">private</span> <span class="token class-name">Short</span> age<span class="token punctuation">;</span>    <span class="token comment">//å¹´é¾„</span>    <span class="token keyword">private</span> <span class="token class-name">Short</span> gender<span class="token punctuation">;</span> <span class="token comment">//æ€§åˆ«</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> phone<span class="token punctuation">;</span> <span class="token comment">//æ‰‹æœºå·</span>        <span class="token comment">//çœç•¥GET, SETæ–¹æ³•</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221209170354143.png"></p><h4 id="1-2-2-é…ç½®Mybatis"><a href="#1-2-2-é…ç½®Mybatis" class="headerlink" title="1.2.2 é…ç½®Mybatis"></a>1.2.2 é…ç½®Mybatis</h4><blockquote><p>åœ¨ä¹‹å‰ä½¿ç”¨å›¾å½¢åŒ–å®¢æˆ·ç«¯å·¥å…·ï¼Œè¿æ¥MySQLæ•°æ®åº“æ—¶ï¼Œéœ€è¦é…ç½®ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221209172527630.png"></p><p>è¿æ¥æ•°æ®åº“çš„å››å¤§å‚æ•°ï¼š</p><ul><li>MySQLé©±åŠ¨ç±» </li><li>ç™»å½•å</li><li>å¯†ç </li><li>æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²</li></ul></blockquote><p>åŸºäºä¸Šè¿°åˆ†æï¼Œåœ¨Mybatisä¸­è¦è¿æ¥æ•°æ®åº“ï¼ŒåŒæ ·ä¹Ÿéœ€è¦ä»¥ä¸Š4ä¸ªå‚æ•°é…ç½®ã€‚</p><p>åœ¨springbooté¡¹ç›®ä¸­ï¼Œå¯ä»¥ç¼–å†™application.propertiesæ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€‚æˆ‘ä»¬è¦è¿æ¥æ•°æ®åº“ï¼Œå°±éœ€è¦é…ç½®æ•°æ®åº“è¿æ¥çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šdriver-class-nameã€url ã€usernameï¼Œpasswordã€‚</p><blockquote><p>åœ¨å…¥é—¨ç¨‹åºä¸­ï¼Œå¤§å®¶å¯ä»¥ç›´æ¥è¿™ä¹ˆé…ç½®ï¼Œåé¢ä¼šä»‹ç»ä»€ä¹ˆæ˜¯é©±åŠ¨ã€‚</p></blockquote><p>application.properties:</p><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">#é©±åŠ¨ç±»åç§°</span><span class="token key attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span><span class="token comment">#æ•°æ®åº“è¿æ¥çš„url</span><span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/mybatis</span><span class="token comment">#è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å</span><span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span><span class="token comment">#è¿æ¥æ•°æ®åº“çš„å¯†ç </span><span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>ä¸Šè¿°çš„é…ç½®ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶è¿‡å»ï¼Œä¸è¦æ•²é”™äº†ã€‚ å…¨éƒ¨éƒ½æ˜¯ spring.datasource.xxxx å¼€å¤´ã€‚</p></blockquote><h4 id="1-2-3-ç¼–å†™SQLè¯­å¥"><a href="#1-2-3-ç¼–å†™SQLè¯­å¥" class="headerlink" title="1.2.3 ç¼–å†™SQLè¯­å¥"></a>1.2.3 ç¼–å†™SQLè¯­å¥</h4><p>åœ¨åˆ›å»ºå‡ºæ¥çš„springbootå·¥ç¨‹ä¸­ï¼Œåœ¨å¼•å¯¼ç±»æ‰€åœ¨åŒ…ä¸‹ï¼Œåœ¨åˆ›å»ºä¸€ä¸ªåŒ… mapperã€‚åœ¨mapperåŒ…ä¸‹åˆ›å»ºä¸€ä¸ªæ¥å£ UserMapper ï¼Œè¿™æ˜¯ä¸€ä¸ªæŒä¹…å±‚æ¥å£ï¼ˆMybatisçš„æŒä¹…å±‚æ¥å£è§„èŒƒä¸€èˆ¬éƒ½å« XxxMapperï¼‰ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221209175843651.png"></p><p>UserMapperï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Select</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>        <span class="token comment">//æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·æ•°æ®</span>    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select id, name, age, gender, phone from user"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>@Mapperæ³¨è§£ï¼šè¡¨ç¤ºæ˜¯mybatisä¸­çš„Mapperæ¥å£</p><ul><li>ç¨‹åºè¿è¡Œæ—¶ï¼šæ¡†æ¶ä¼šè‡ªåŠ¨ç”Ÿæˆæ¥å£çš„å®ç°ç±»å¯¹è±¡(ä»£ç†å¯¹è±¡)ï¼Œå¹¶ç»™äº¤Springçš„IOCå®¹å™¨ç®¡ç†</li></ul><p> @Selectæ³¨è§£ï¼šä»£è¡¨çš„å°±æ˜¯selectæŸ¥è¯¢ï¼Œç”¨äºä¹¦å†™selectæŸ¥è¯¢è¯­å¥</p></blockquote><h4 id="1-2-4-å•å…ƒæµ‹è¯•"><a href="#1-2-4-å•å…ƒæµ‹è¯•" class="headerlink" title="1.2.4 å•å…ƒæµ‹è¯•"></a>1.2.4 å•å…ƒæµ‹è¯•</h4><p>åœ¨åˆ›å»ºå‡ºæ¥çš„SpringBootå·¥ç¨‹ä¸­ï¼Œåœ¨srcä¸‹çš„testç›®å½•ä¸‹ï¼Œå·²ç»è‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºå¥½äº†æµ‹è¯•ç±» ï¼Œå¹¶ä¸”åœ¨æµ‹è¯•ç±»ä¸Šå·²ç»æ·»åŠ äº†æ³¨è§£ @SpringBootTestï¼Œä»£è¡¨è¯¥æµ‹è¯•ç±»å·²ç»ä¸SpringBootæ•´åˆã€‚ </p><p>è¯¥æµ‹è¯•ç±»åœ¨è¿è¡Œæ—¶ï¼Œä¼šè‡ªåŠ¨é€šè¿‡å¼•å¯¼ç±»åŠ è½½Springçš„ç¯å¢ƒï¼ˆIOCå®¹å™¨ï¼‰ã€‚æˆ‘ä»¬è¦æµ‹è¯•é‚£ä¸ªbeanå¯¹è±¡ï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡@Autowiredæ³¨è§£ç›´æ¥å°†å…¶æ³¨å…¥è¿›è¡Œï¼Œç„¶åå°±å¯ä»¥æµ‹è¯•äº†ã€‚ </p><p>æµ‹è¯•ç±»ä»£ç å¦‚ä¸‹ï¼š </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisQuickstartApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">UserMapper</span> userMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userList <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> userList<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>è¿è¡Œç»“æœï¼š</p><pre class="line-numbers language-none"><code class="language-none">User{id=1, name='ç™½çœ‰é¹°ç‹', age=55, gender=1, phone='18800000000'}User{id=2, name='é‡‘æ¯›ç‹®ç‹', age=45, gender=1, phone='18800000001'}User{id=3, name='é’ç¿¼è ç‹', age=38, gender=1, phone='18800000002'}User{id=4, name='ç´«è¡«é¾™ç‹', age=42, gender=2, phone='18800000003'}User{id=5, name='å…‰æ˜å·¦ä½¿', age=37, gender=1, phone='18800000004'}User{id=6, name='å…‰æ˜å³ä½¿', age=48, gender=1, phone='18800000005'}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h3 id="1-3-è§£å†³SQLè­¦å‘Šä¸æç¤º"><a href="#1-3-è§£å†³SQLè­¦å‘Šä¸æç¤º" class="headerlink" title="1.3 è§£å†³SQLè­¦å‘Šä¸æç¤º"></a>1.3 è§£å†³SQLè­¦å‘Šä¸æç¤º</h3><p>é»˜è®¤æˆ‘ä»¬åœ¨UserMapperæ¥å£ä¸ŠåŠ çš„@Selectæ³¨è§£ä¸­ç¼–å†™SQLè¯­å¥æ˜¯æ²¡æœ‰æç¤ºçš„ã€‚ å¦‚æœæƒ³è®©ideaç»™æˆ‘ä»¬æç¤ºå¯¹åº”çš„SQLè¯­å¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨IDEAä¸­é…ç½®ä¸MySQLæ•°æ®åº“çš„é“¾æ¥ã€‚ </p><p>é»˜è®¤æˆ‘ä»¬åœ¨UserMapperæ¥å£ä¸Šçš„@Selectæ³¨è§£ä¸­ç¼–å†™SQLè¯­å¥æ˜¯æ²¡æœ‰æç¤ºçš„ã€‚å¦‚æœæƒ³è®©ideaç»™å‡ºæç¤ºï¼Œå¯ä»¥åšå¦‚ä¸‹é…ç½®ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210143348119.png"></p><p>é…ç½®å®Œæˆä¹‹åï¼Œå‘ç°SQLè¯­å¥ä¸­çš„å…³é”®å­—æœ‰æç¤ºäº†ï¼Œä½†è¿˜å­˜åœ¨ä¸è¯†åˆ«è¡¨å(åˆ—å)çš„æƒ…å†µï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210143934318.png"></p><blockquote><p>äº§ç”ŸåŸå› ï¼šIdeaå’Œæ•°æ®åº“æ²¡æœ‰å»ºç«‹è¿æ¥ï¼Œä¸è¯†åˆ«è¡¨ä¿¡æ¯</p><p>è§£å†³æ–¹æ¡ˆï¼šåœ¨Ideaä¸­é…ç½®MySQLæ•°æ®åº“è¿æ¥</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210144139792.png"> </p><blockquote><p>åœ¨é…ç½®çš„æ—¶å€™æŒ‡å®šè¿æ¥é‚£ä¸ªæ•°æ®åº“ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºè¿æ¥çš„å°±æ˜¯mybatisæ•°æ®åº“ã€‚</p></blockquote><h2 id="2-JDBCä»‹ç»-äº†è§£"><a href="#2-JDBCä»‹ç»-äº†è§£" class="headerlink" title="2. JDBCä»‹ç»(äº†è§£)"></a>2. JDBCä»‹ç»(äº†è§£)</h2><h3 id="2-1-ä»‹ç»"><a href="#2-1-ä»‹ç»" class="headerlink" title="2.1 ä»‹ç»"></a>2.1 ä»‹ç»</h3><p>é€šè¿‡Mybatisçš„å¿«é€Ÿå…¥é—¨ï¼Œæˆ‘ä»¬æ˜ç™½äº†ï¼Œé€šè¿‡Mybatiså¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œæ•°æ®åº“çš„è®¿é—®æ“ä½œã€‚ä½†æ˜¯å¤§å®¶è¦æ˜ç™½ï¼Œå…¶å®javaè¯­è¨€æ“ä½œæ•°æ®åº“å‘¢ï¼Œåªèƒ½é€šè¿‡ä¸€ç§æ–¹å¼ï¼šä½¿ç”¨sunå…¬å¸æä¾›çš„ JDBC è§„èŒƒã€‚</p><blockquote><p>Mybatisæ¡†æ¶ï¼Œå°±æ˜¯å¯¹åŸå§‹çš„JDBCç¨‹åºçš„å°è£…ã€‚ </p></blockquote><p>é‚£åˆ°åº•ä»€ä¹ˆæ˜¯JDBCå‘¢ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥ä»‹ç»ä¸€ä¸‹ã€‚</p><p>JDBCï¼š ( Java DataBase Connectivity )ï¼Œå°±æ˜¯ä½¿ç”¨Javaè¯­è¨€æ“ä½œå…³ç³»å‹æ•°æ®åº“çš„ä¸€å¥—APIã€‚</p><blockquote><p>æœ¬è´¨ï¼š</p><ul><li><p>sunå…¬å¸å®˜æ–¹å®šä¹‰çš„ä¸€å¥—æ“ä½œæ‰€æœ‰å…³ç³»å‹æ•°æ®åº“çš„è§„èŒƒï¼Œå³æ¥å£ã€‚</p></li><li><p>å„ä¸ªæ•°æ®åº“å‚å•†å»å®ç°è¿™å¥—æ¥å£ï¼Œæä¾›æ•°æ®åº“é©±åŠ¨jaråŒ…ã€‚</p></li><li><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™å¥—æ¥å£(JDBC)ç¼–ç¨‹ï¼ŒçœŸæ­£æ‰§è¡Œçš„ä»£ç æ˜¯é©±åŠ¨jaråŒ…ä¸­çš„å®ç°ç±»ã€‚</p></li></ul></blockquote><h3 id="2-2-ä»£ç "><a href="#2-2-ä»£ç " class="headerlink" title="2.2 ä»£ç "></a>2.2 ä»£ç </h3><p>ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹åŸå§‹çš„JDBCç¨‹åºæ˜¯å¦‚ä½•æ“ä½œæ•°æ®åº“çš„ã€‚æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>æ³¨å†Œé©±åŠ¨</li><li>è·å–è¿æ¥å¯¹è±¡</li><li>æ‰§è¡ŒSQLè¯­å¥ï¼Œè¿”å›æ‰§è¡Œç»“æœ</li><li>å¤„ç†æ‰§è¡Œç»“æœ</li><li>é‡Šæ”¾èµ„æº</li></ol><blockquote><p>åœ¨pom.xmlæ–‡ä»¶ä¸­å·²å¼•å…¥MySQLé©±åŠ¨ä¾èµ–ï¼Œæˆ‘ä»¬ç›´æ¥ç¼–å†™JDBCä»£ç å³å¯</p></blockquote><p>JDBCå…·ä½“ä»£ç å®ç°ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcTest</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testJdbc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">//1. æ³¨å†Œé©±åŠ¨</span>        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2. è·å–æ•°æ®åº“è¿æ¥</span>        <span class="token class-name">String</span> url<span class="token operator">=</span><span class="token string">"jdbc:mysql://127.0.0.1:3306/mybatis"</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">"1234"</span><span class="token punctuation">;</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//3. æ‰§è¡ŒSQL</span>        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ“ä½œSQLçš„å¯¹è±¡</span>        <span class="token class-name">String</span> sql<span class="token operator">=</span><span class="token string">"select id,name,age,gender,phone from user"</span><span class="token punctuation">;</span>        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//SQLæŸ¥è¯¢ç»“æœä¼šå°è£…åœ¨ResultSetå¯¹è±¡ä¸­</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é›†åˆå¯¹è±¡ï¼ˆç”¨äºå­˜å‚¨Userå¯¹è±¡ï¼‰</span>        <span class="token comment">//4. å¤„ç†SQLæ‰§è¡Œç»“æœ</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">//å–å‡ºä¸€è¡Œè®°å½•ä¸­idã€nameã€ageã€genderã€phoneä¸‹çš„æ•°æ®</span>            <span class="token keyword">int</span> id <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> name <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">short</span> age <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getShort</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">short</span> gender <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getShort</span><span class="token punctuation">(</span><span class="token string">"gender"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> phone <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"phone"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//æŠŠä¸€è¡Œè®°å½•ä¸­çš„æ•°æ®ï¼Œå°è£…åˆ°Userå¯¹è±¡ä¸­</span>            <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>            userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Userå¯¹è±¡æ·»åŠ åˆ°é›†åˆ</span>        <span class="token punctuation">}</span>        <span class="token comment">//5. é‡Šæ”¾èµ„æº</span>        statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//éå†é›†åˆ</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> userList<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>DriverManager(ç±»)ï¼šæ•°æ®åº“é©±åŠ¨ç®¡ç†ç±»ã€‚</p><ul><li><p>ä½œç”¨ï¼š</p><ol><li><p>æ³¨å†Œé©±åŠ¨</p></li><li><p>åˆ›å»ºjavaä»£ç å’Œæ•°æ®åº“ä¹‹é—´çš„è¿æ¥ï¼Œå³è·å–Connectionå¯¹è±¡</p></li></ol></li></ul><p>Connection(æ¥å£)ï¼šå»ºç«‹æ•°æ®åº“è¿æ¥çš„å¯¹è±¡</p><ul><li>ä½œç”¨ï¼šç”¨äºå»ºç«‹javaç¨‹åºå’Œæ•°æ®åº“ä¹‹é—´çš„è¿æ¥</li></ul><p>Statement(æ¥å£)ï¼š æ•°æ®åº“æ“ä½œå¯¹è±¡(æ‰§è¡ŒSQLè¯­å¥çš„å¯¹è±¡)ã€‚</p><ul><li>ä½œç”¨ï¼šç”¨äºå‘æ•°æ®åº“å‘é€sqlè¯­å¥</li></ul><p>ResultSet(æ¥å£)ï¼šç»“æœé›†å¯¹è±¡ï¼ˆä¸€å¼ è™šæ‹Ÿè¡¨ï¼‰</p><ul><li>ä½œç”¨ï¼šsqlæŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œç»“æœä¼šå°è£…åœ¨ResultSetä¸­</li></ul></blockquote><p>é€šè¿‡ä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬çœ‹åˆ°ç›´æ¥åŸºäºJDBCç¨‹åºæ¥æ“ä½œæ•°æ®åº“ï¼Œä»£ç å®ç°éå¸¸ç¹çï¼Œæ‰€ä»¥åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¾ˆå°‘ä½¿ç”¨ã€‚  åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œé€šå¸¸ä¼šä½¿ç”¨Mybatisè¿™ç±»çš„é«˜çº§æŠ€æœ¯æ¥æ“ä½œæ•°æ®åº“ï¼Œä»è€Œç®€åŒ–æ•°æ®åº“æ“ä½œã€æé«˜å¼€å‘æ•ˆç‡ã€‚</p><h3 id="2-3-é—®é¢˜åˆ†æ"><a href="#2-3-é—®é¢˜åˆ†æ" class="headerlink" title="2.3 é—®é¢˜åˆ†æ"></a>2.3 é—®é¢˜åˆ†æ</h3><p>åŸå§‹çš„JDBCç¨‹åºï¼Œå­˜åœ¨ä»¥ä¸‹å‡ ç‚¹é—®é¢˜ï¼š</p><ol><li>æ•°æ®åº“é“¾æ¥çš„å››è¦ç´ (é©±åŠ¨ã€é“¾æ¥ã€ç”¨æˆ·åã€å¯†ç )å…¨éƒ¨ç¡¬ç¼–ç åœ¨javaä»£ç ä¸­</li><li>æŸ¥è¯¢ç»“æœçš„è§£æåŠå°è£…éå¸¸ç¹ç</li><li>æ¯ä¸€æ¬¡æŸ¥è¯¢æ•°æ®åº“éƒ½éœ€è¦è·å–è¿æ¥,æ“ä½œå®Œæ¯•åé‡Šæ”¾è¿æ¥, èµ„æºæµªè´¹, æ€§èƒ½é™ä½</li></ol><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210153407998.png"></p><h3 id="2-4-æŠ€æœ¯å¯¹æ¯”"><a href="#2-4-æŠ€æœ¯å¯¹æ¯”" class="headerlink" title="2.4 æŠ€æœ¯å¯¹æ¯”"></a>2.4 æŠ€æœ¯å¯¹æ¯”</h3><p>åˆ†æäº†JDBCçš„ç¼ºç‚¹ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹åœ¨mybatisä¸­ï¼Œæ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ï¼š</p><ol><li><p>æ•°æ®åº“è¿æ¥å››è¦ç´ (é©±åŠ¨ã€é“¾æ¥ã€ç”¨æˆ·åã€å¯†ç )ï¼Œéƒ½é…ç½®åœ¨springbooté»˜è®¤çš„é…ç½®æ–‡ä»¶ application.propertiesä¸­</p></li><li><p>æŸ¥è¯¢ç»“æœçš„è§£æåŠå°è£…ï¼Œç”±mybatisè‡ªåŠ¨å®Œæˆæ˜ å°„å°è£…ï¼Œæˆ‘ä»¬æ— éœ€å…³æ³¨</p></li><li><p>åœ¨mybatisä¸­ä½¿ç”¨äº†æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯ï¼Œä»è€Œé¿å…äº†é¢‘ç¹çš„åˆ›å»ºè¿æ¥ã€é”€æ¯è¿æ¥è€Œå¸¦æ¥çš„èµ„æºæµªè´¹ã€‚</p></li></ol><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210154324151.png"></p><blockquote><p>ä½¿ç”¨SpringBoot+Mybatisçš„æ–¹å¼æ“ä½œæ•°æ®åº“ï¼Œèƒ½å¤Ÿæå‡å¼€å‘æ•ˆç‡ã€é™ä½èµ„æºæµªè´¹</p></blockquote><p>è€Œå¯¹äºMybatisæ¥è¯´ï¼Œæˆ‘ä»¬åœ¨å¼€å‘æŒä¹…å±‚ç¨‹åºæ“ä½œæ•°æ®åº“æ—¶ï¼Œéœ€è¦é‡ç‚¹å…³æ³¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š</p><ol><li><p>application.properties</p><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">#é©±åŠ¨ç±»åç§°</span><span class="token key attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span><span class="token comment">#æ•°æ®åº“è¿æ¥çš„url</span><span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/mybatis</span><span class="token comment">#è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å</span><span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span><span class="token comment">#è¿æ¥æ•°æ®åº“çš„å¯†ç </span><span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token value attr-value">1234</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>Mapperæ¥å£ï¼ˆç¼–å†™SQLè¯­å¥ï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Mapper</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select id, name, age, gender, phone from user"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h2 id="3-æ•°æ®åº“è¿æ¥æ± "><a href="#3-æ•°æ®åº“è¿æ¥æ± " class="headerlink" title="3. æ•°æ®åº“è¿æ¥æ± "></a>3. æ•°æ®åº“è¿æ¥æ± </h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241202210143821.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241202210401353.png"></p><p>åœ¨å‰é¢æˆ‘ä»¬æ‰€è®²è§£çš„mybatisä¸­ï¼Œä½¿ç”¨äº†æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯ï¼Œé¿å…é¢‘ç¹çš„åˆ›å»ºè¿æ¥ã€é”€æ¯è¿æ¥è€Œå¸¦æ¥çš„èµ„æºæµªè´¹ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±å…·ä½“çš„äº†è§£ä¸‹æ•°æ®åº“è¿æ¥æ± ã€‚</p><h3 id="3-1-ä»‹ç»"><a href="#3-1-ä»‹ç»" class="headerlink" title="3.1 ä»‹ç»"></a>3.1 ä»‹ç»</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210160341852.png"></p><blockquote><p>æ²¡æœ‰ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ï¼š</p><ul><li>å®¢æˆ·ç«¯æ‰§è¡ŒSQLè¯­å¥ï¼šè¦å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„è¿æ¥å¯¹è±¡ï¼Œç„¶åæ‰§è¡ŒSQLè¯­å¥ï¼ŒSQLè¯­å¥æ‰§è¡Œååˆéœ€è¦å…³é—­è¿æ¥å¯¹è±¡ä»è€Œé‡Šæ”¾èµ„æºï¼Œæ¯æ¬¡æ‰§è¡ŒSQLæ—¶éƒ½éœ€è¦åˆ›å»ºè¿æ¥ã€é”€æ¯é“¾æ¥ï¼Œè¿™ç§é¢‘ç¹çš„é‡å¤åˆ›å»ºé”€æ¯çš„è¿‡ç¨‹æ˜¯æ¯”è¾ƒè€—è´¹è®¡ç®—æœºçš„æ€§èƒ½ã€‚</li></ul></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210161016314.png"></p><p>æ•°æ®åº“è¿æ¥æ± æ˜¯ä¸ªå®¹å™¨ï¼Œè´Ÿè´£åˆ†é…ã€ç®¡ç†æ•°æ®åº“è¿æ¥(Connection)</p><ul><li>ç¨‹åºåœ¨å¯åŠ¨æ—¶ï¼Œä¼šåœ¨æ•°æ®åº“è¿æ¥æ± (å®¹å™¨)ä¸­ï¼Œåˆ›å»ºä¸€å®šæ•°é‡çš„Connectionå¯¹è±¡</li></ul><p>å…è®¸åº”ç”¨ç¨‹åºé‡å¤ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„æ•°æ®åº“è¿æ¥ï¼Œè€Œä¸æ˜¯å†é‡æ–°å»ºç«‹ä¸€ä¸ª</p><ul><li>å®¢æˆ·ç«¯åœ¨æ‰§è¡ŒSQLæ—¶ï¼Œå…ˆä»è¿æ¥æ± ä¸­è·å–ä¸€ä¸ªConnectionå¯¹è±¡ï¼Œç„¶ååœ¨æ‰§è¡ŒSQLè¯­å¥ï¼ŒSQLè¯­å¥æ‰§è¡Œå®Œä¹‹åï¼Œé‡Šæ”¾Connectionæ—¶å°±ä¼šæŠŠConnectionå¯¹è±¡å½’è¿˜ç»™è¿æ¥æ± ï¼ˆConnectionå¯¹è±¡å¯ä»¥å¤ç”¨ï¼‰</li></ul><p>é‡Šæ”¾ç©ºé—²æ—¶é—´è¶…è¿‡æœ€å¤§ç©ºé—²æ—¶é—´çš„è¿æ¥ï¼Œæ¥é¿å…å› ä¸ºæ²¡æœ‰é‡Šæ”¾è¿æ¥è€Œå¼•èµ·çš„æ•°æ®åº“è¿æ¥é—æ¼</p><ul><li>å®¢æˆ·ç«¯è·å–åˆ°Connectionå¯¹è±¡äº†ï¼Œä½†æ˜¯Connectionå¯¹è±¡å¹¶æ²¡æœ‰å»è®¿é—®æ•°æ®åº“(å¤„äºç©ºé—²)ï¼Œæ•°æ®åº“è¿æ¥æ± å‘ç°Connectionå¯¹è±¡çš„ç©ºé—²æ—¶é—´ &gt; è¿æ¥æ± ä¸­é¢„è®¾çš„æœ€å¤§ç©ºé—²æ—¶é—´ï¼Œæ­¤æ—¶æ•°æ®åº“è¿æ¥æ± å°±ä¼šè‡ªåŠ¨é‡Šæ”¾æ‰è¿™ä¸ªè¿æ¥å¯¹è±¡</li></ul><p>æ•°æ®åº“è¿æ¥æ± çš„å¥½å¤„ï¼š</p><ol><li>èµ„æºé‡ç”¨</li><li>æå‡ç³»ç»Ÿå“åº”é€Ÿåº¦</li><li>é¿å…æ•°æ®åº“è¿æ¥é—æ¼</li></ol><h3 id="3-2-äº§å“"><a href="#3-2-äº§å“" class="headerlink" title="3.2 äº§å“"></a>3.2 äº§å“</h3><p>è¦æ€ä¹ˆæ ·å®ç°æ•°æ®åº“è¿æ¥æ± å‘¢ï¼Ÿ</p><ul><li><p>å®˜æ–¹(sun)æä¾›äº†æ•°æ®åº“è¿æ¥æ± æ ‡å‡†ï¼ˆjavax.sql.DataSourceæ¥å£ï¼‰</p><ul><li><p>åŠŸèƒ½ï¼šè·å–è¿æ¥ </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>ç¬¬ä¸‰æ–¹ç»„ç»‡å¿…é¡»æŒ‰ç…§DataSourceæ¥å£å®ç°</p></li></ul></li></ul><p>å¸¸è§çš„æ•°æ®åº“è¿æ¥æ± ï¼š</p><ul><li>C3P0</li><li>DBCP</li><li>Druid</li><li>Hikari (springbooté»˜è®¤)</li></ul><p>ç°åœ¨ä½¿ç”¨æ›´å¤šçš„æ˜¯ï¼šHikariã€Druid  ï¼ˆæ€§èƒ½æ›´ä¼˜è¶Šï¼‰</p><ul><li>Hikariï¼ˆè¿½å…‰è€…ï¼‰ [é»˜è®¤çš„è¿æ¥æ± ]</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220901144923251.png"> </p><ul><li><p>Druidï¼ˆå¾·é²ä¼Šï¼‰</p><ul><li><p>Druidè¿æ¥æ± æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„æ•°æ®åº“è¿æ¥æ± é¡¹ç›® </p></li><li><p>åŠŸèƒ½å¼ºå¤§ï¼Œæ€§èƒ½ä¼˜ç§€ï¼Œæ˜¯Javaè¯­è¨€æœ€å¥½çš„æ•°æ®åº“è¿æ¥æ± ä¹‹ä¸€</p></li></ul></li></ul><p>â€‹</p><p>å¦‚æœæˆ‘ä»¬æƒ³æŠŠé»˜è®¤çš„æ•°æ®åº“è¿æ¥æ± åˆ‡æ¢ä¸ºDruidæ•°æ®åº“è¿æ¥æ± ï¼Œåªéœ€è¦å®Œæˆä»¥ä¸‹ä¸¤æ­¥æ“ä½œå³å¯ï¼š</p><blockquote><p>å‚è€ƒå®˜æ–¹åœ°å€ï¼š<a href="https://github.com/alibaba/druid/tree/master/druid-spring-boot-starter">https://github.com/alibaba/druid/tree/master/druid-spring-boot-starter</a></p></blockquote><ol><li>åœ¨pom.xmlæ–‡ä»¶ä¸­å¼•å…¥ä¾èµ–</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- Druidè¿æ¥æ± ä¾èµ– --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>åœ¨application.propertiesä¸­å¼•å…¥æ•°æ®åº“è¿æ¥é…ç½®</li></ol><p>æ–¹å¼1ï¼š</p><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">spring.datasource.druid.driver-class-name</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span><span class="token key attr-name">spring.datasource.druid.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/mybatis</span><span class="token key attr-name">spring.datasource.druid.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span><span class="token key attr-name">spring.datasource.druid.password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ–¹å¼2ï¼š</p><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span><span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/mybatis</span><span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span><span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>    <span class="token key atrule">datasource</span><span class="token punctuation">:</span>        <span class="token key atrule">druid</span><span class="token punctuation">:</span>            driver<span class="token punctuation">-</span>class<span class="token punctuation">-</span>name<span class="token punctuation">:</span>com.mysql.cj.jdbc.Driver            url<span class="token punctuation">:</span>jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/mybatis            username<span class="token punctuation">:</span>root            password<span class="token punctuation">:</span><span class="token number">123456</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-lombok"><a href="#4-lombok" class="headerlink" title="4. lombok"></a>4. lombok</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241202211516763.png"></p><h3 id="4-1-ä»‹ç»"><a href="#4-1-ä»‹ç»" class="headerlink" title="4.1 ä»‹ç»"></a>4.1 ä»‹ç»</h3><p>Lombokæ˜¯ä¸€ä¸ªå®ç”¨çš„Javaç±»åº“ï¼Œå¯ä»¥é€šè¿‡ç®€å•çš„æ³¨è§£æ¥ç®€åŒ–å’Œæ¶ˆé™¤ä¸€äº›å¿…é¡»æœ‰ä½†æ˜¾å¾—å¾ˆè‡ƒè‚¿çš„Javaä»£ç ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210164641266.png"></p><blockquote><p>é€šè¿‡æ³¨è§£çš„å½¢å¼è‡ªåŠ¨ç”Ÿæˆæ„é€ å™¨ã€getter/setterã€equalsã€hashcodeã€toStringç­‰æ–¹æ³•ï¼Œå¹¶å¯ä»¥è‡ªåŠ¨åŒ–ç”Ÿæˆæ—¥å¿—å˜é‡ï¼Œç®€åŒ–javaå¼€å‘ã€æé«˜æ•ˆç‡ã€‚</p></blockquote><table><thead><tr><th><strong>æ³¨è§£</strong></th><th><strong>ä½œç”¨</strong></th></tr></thead><tbody><tr><td>@Getter/@Setter</td><td>ä¸ºæ‰€æœ‰çš„å±æ€§æä¾›get/setæ–¹æ³•</td></tr><tr><td>@ToString</td><td>ä¼šç»™ç±»è‡ªåŠ¨ç”Ÿæˆæ˜“é˜…è¯»çš„  toString æ–¹æ³•</td></tr><tr><td>@EqualsAndHashCode</td><td>æ ¹æ®ç±»æ‰€æ‹¥æœ‰çš„éé™æ€å­—æ®µè‡ªåŠ¨é‡å†™ equals æ–¹æ³•å’Œ  hashCode æ–¹æ³•</td></tr><tr><td>@Data</td><td>æä¾›äº†æ›´ç»¼åˆçš„ç”Ÿæˆä»£ç åŠŸèƒ½ï¼ˆ@Getter  + @Setter + @ToString + @EqualsAndHashCodeï¼‰</td></tr><tr><td>@NoArgsConstructor</td><td>ä¸ºå®ä½“ç±»ç”Ÿæˆæ— å‚çš„æ„é€ å™¨æ–¹æ³•</td></tr><tr><td>@AllArgsConstructor</td><td>ä¸ºå®ä½“ç±»ç”Ÿæˆé™¤äº†staticä¿®é¥°çš„å­—æ®µä¹‹å¤–å¸¦æœ‰å„å‚æ•°çš„æ„é€ å™¨æ–¹æ³•ã€‚</td></tr></tbody></table><h3 id="4-2-ä½¿ç”¨"><a href="#4-2-ä½¿ç”¨" class="headerlink" title="4.2 ä½¿ç”¨"></a>4.2 ä½¿ç”¨</h3><p>ç¬¬1æ­¥ï¼šåœ¨pom.xmlæ–‡ä»¶ä¸­å¼•å…¥ä¾èµ–</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- åœ¨springbootçš„çˆ¶å·¥ç¨‹ä¸­ï¼Œå·²ç»é›†æˆäº†lombokå¹¶æŒ‡å®šäº†ç‰ˆæœ¬å·ï¼Œæ•…å½“å‰å¼•å…¥ä¾èµ–æ—¶ä¸éœ€è¦æŒ‡å®šversion --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¬¬2æ­¥ï¼šåœ¨å®ä½“ç±»ä¸Šæ·»åŠ æ³¨è§£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Short</span> age<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Short</span> gender<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> phone<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>åœ¨å®ä½“ç±»ä¸Šæ·»åŠ äº†@Dataæ³¨è§£ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»åœ¨ç¼–è¯‘æ—¶æœŸï¼Œå°±ä¼šç”Ÿæˆgetter/setterã€equalsã€hashcodeã€toStringç­‰æ–¹æ³•ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210170733921.png"></p></blockquote><p>è¯´æ˜ï¼š@Dataæ³¨è§£ä¸­ä¸åŒ…å«å…¨å‚æ„é€ æ–¹æ³•ï¼Œé€šå¸¸åœ¨å®ä½“ç±»ä¸Šï¼Œè¿˜ä¼šæ·»åŠ ä¸Šï¼šå…¨å‚æ„é€ ã€æ— å‚æ„é€ </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span> <span class="token comment">//getteræ–¹æ³•ã€setteræ–¹æ³•ã€toStringæ–¹æ³•ã€hashCodeæ–¹æ³•ã€equalsæ–¹æ³•</span><span class="token annotation punctuation">@NoArgsConstructor</span> <span class="token comment">//æ— å‚æ„é€ </span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token comment">//å…¨å‚æ„é€ </span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Short</span> age<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Short</span> gender<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> phone<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Lombokçš„æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>Lombokä¼šåœ¨ç¼–è¯‘æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„javaä»£ç </li><li>åœ¨ä½¿ç”¨lombokæ—¶ï¼Œè¿˜éœ€è¦å®‰è£…ä¸€ä¸ªlombokçš„æ’ä»¶ï¼ˆæ–°ç‰ˆæœ¬çš„IDEAä¸­è‡ªå¸¦ï¼‰</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221210165506359.png"></p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mybatiså…¥é—¨ </tag>
            
            <tag> æ•°æ®åº“è¿æ¥æ±  </tag>
            
            <tag> lombok </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql (3)</title>
      <link href="/2024/12/01/mysql-3/"/>
      <url>/2024/12/01/mysql-3/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®åº“å¼€å‘-MySQL"><a href="#æ•°æ®åº“å¼€å‘-MySQL" class="headerlink" title="æ•°æ®åº“å¼€å‘-MySQL"></a>æ•°æ®åº“å¼€å‘-MySQL</h1><h2 id="1ã€å¤šè¡¨æŸ¥è¯¢"><a href="#1ã€å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="1ã€å¤šè¡¨æŸ¥è¯¢"></a>1ã€å¤šè¡¨æŸ¥è¯¢</h2><h3 id="1-1-æ¦‚è¿°"><a href="#1-1-æ¦‚è¿°" class="headerlink" title="1.1 æ¦‚è¿°"></a>1.1 æ¦‚è¿°</h3><h4 id="1-1-1-æ•°æ®å‡†å¤‡"><a href="#1-1-1-æ•°æ®å‡†å¤‡" class="headerlink" title="1.1.1 æ•°æ®å‡†å¤‡"></a>1.1.1 æ•°æ®å‡†å¤‡</h4><p>SQLè„šæœ¬ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">#å»ºè®®ï¼šåˆ›å»ºæ–°çš„æ•°æ®åº“create database db04;use db04;-- éƒ¨é—¨è¡¨create table tb_dept(    id          int unsigned primary key auto_increment comment 'ä¸»é”®ID',    name        varchar(10) not null unique comment 'éƒ¨é—¨åç§°',    create_time datetime    not null comment 'åˆ›å»ºæ—¶é—´',    update_time datetime    not null comment 'ä¿®æ”¹æ—¶é—´') comment 'éƒ¨é—¨è¡¨';-- éƒ¨é—¨è¡¨æµ‹è¯•insert into tb_dept (id, name, create_time, update_time)values (1, 'å­¦å·¥éƒ¨', now(), now()),       (2, 'æ•™ç ”éƒ¨', now(), now()),       (3, 'å’¨è¯¢éƒ¨', now(), now()),       (4, 'å°±ä¸šéƒ¨', now(), now()),       (5, 'äººäº‹éƒ¨', now(), now());-- å‘˜å·¥è¡¨create table tb_emp(    id          int unsigned primary key auto_increment comment 'ID',    username    varchar(20)      not null unique comment 'ç”¨æˆ·å',    password    varchar(32) default '123456' comment 'å¯†ç ',    name        varchar(10)      not null comment 'å§“å',    gender      tinyint unsigned not null comment 'æ€§åˆ«, è¯´æ˜: 1 ç”·, 2 å¥³',    image       varchar(300) comment 'å›¾åƒ',    job         tinyint unsigned comment 'èŒä½, è¯´æ˜: 1 ç­ä¸»ä»»,2 è®²å¸ˆ, 3 å­¦å·¥ä¸»ç®¡, 4 æ•™ç ”ä¸»ç®¡, 5 å’¨è¯¢å¸ˆ',    entrydate   date comment 'å…¥èŒæ—¶é—´',    dept_id     int unsigned comment 'éƒ¨é—¨ID',    create_time datetime         not null comment 'åˆ›å»ºæ—¶é—´',    update_time datetime         not null comment 'ä¿®æ”¹æ—¶é—´') comment 'å‘˜å·¥è¡¨';-- å‘˜å·¥è¡¨æµ‹è¯•æ•°æ®INSERT INTO tb_emp(id, username, password, name, gender, image, job, entrydate,dept_id, create_time, update_time) VALUES (1,'jinyong','123456','é‡‘åº¸',1,'1.jpg',4,'2000-01-01',2,now(),now()),(2,'zhangwuji','123456','å¼ æ— å¿Œ',1,'2.jpg',2,'2015-01-01',2,now(),now()),(3,'yangxiao','123456','æ¨é€',1,'3.jpg',2,'2008-05-01',2,now(),now()),(4,'weiyixiao','123456','éŸ¦ä¸€ç¬‘',1,'4.jpg',2,'2007-01-01',2,now(),now()),(5,'changyuchun','123456','å¸¸é‡æ˜¥',1,'5.jpg',2,'2012-12-05',2,now(),now()),(6,'xiaozhao','123456','å°æ˜­',2,'6.jpg',3,'2013-09-05',1,now(),now()),(7,'jixiaofu','123456','çºªæ™“èŠ™',2,'7.jpg',1,'2005-08-01',1,now(),now()),(8,'zhouzhiruo','123456','å‘¨èŠ·è‹¥',2,'8.jpg',1,'2014-11-09',1,now(),now()),(9,'dingminjun','123456','ä¸æ•å›',2,'9.jpg',1,'2011-03-11',1,now(),now()),(10,'zhaomin','123456','èµµæ•',2,'10.jpg',1,'2013-09-05',1,now(),now()),(11,'luzhangke','123456','é¹¿æ–å®¢',1,'11.jpg',5,'2007-02-01',3,now(),now()),(12,'hebiweng','123456','é¹¤ç¬”ç¿',1,'12.jpg',5,'2008-08-18',3,now(),now()),(13,'fangdongbai','123456','æ–¹ä¸œç™½',1,'13.jpg',5,'2012-11-01',3,now(),now()),(14,'zhangsanfeng','123456','å¼ ä¸‰ä¸°',1,'14.jpg',2,'2002-08-01',2,now(),now()),(15,'yulianzhou','123456','ä¿è²èˆŸ',1,'15.jpg',2,'2011-05-01',2,now(),now()),(16,'songyuanqiao','123456','å®‹è¿œæ¡¥',1,'16.jpg',2,'2007-01-01',2,now(),now()),(17,'chenyouliang','123456','é™ˆå‹è°…',1,'17.jpg',NULL,'2015-03-21',NULL,now(),now());<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="1-1-2-ä»‹ç»"><a href="#1-1-2-ä»‹ç»" class="headerlink" title="1.1.2 ä»‹ç»"></a>1.1.2 ä»‹ç»</h4><p>å¤šè¡¨æŸ¥è¯¢ï¼šæŸ¥è¯¢æ—¶ä»å¤šå¼ è¡¨ä¸­è·å–æ‰€éœ€æ•°æ®</p><blockquote><p>å•è¡¨æŸ¥è¯¢çš„SQLè¯­å¥ï¼šselect  å­—æ®µåˆ—è¡¨  from  è¡¨å;</p><p>é‚£ä¹ˆè¦æ‰§è¡Œå¤šè¡¨æŸ¥è¯¢ï¼Œåªéœ€è¦ä½¿ç”¨é€—å·åˆ†éš”å¤šå¼ è¡¨å³å¯ï¼Œå¦‚ï¼š select   å­—æ®µåˆ—è¡¨  from  è¡¨1, è¡¨2;</p></blockquote><p>æŸ¥è¯¢ç”¨æˆ·è¡¨å’Œéƒ¨é—¨è¡¨ä¸­çš„æ•°æ®ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select * from  tb_emp , tb_dept;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220901093654673.png">  </p><p>æ­¤æ—¶,æˆ‘ä»¬çœ‹åˆ°æŸ¥è¯¢ç»“æœä¸­åŒ…å«äº†å¤§é‡çš„ç»“æœé›†ï¼Œæ€»å…±85æ¡è®°å½•ï¼Œè€Œè¿™å…¶å®å°±æ˜¯å‘˜å·¥è¡¨æ‰€æœ‰çš„è®°å½•(17è¡Œ)ä¸éƒ¨é—¨è¡¨æ‰€æœ‰è®°å½•(5è¡Œ)çš„æ‰€æœ‰ç»„åˆæƒ…å†µï¼Œè¿™ç§ç°è±¡ç§°ä¹‹ä¸ºç¬›å¡å°”ç§¯ã€‚</p><p>ç¬›å¡å°”ç§¯ï¼šç¬›å¡å°”ä¹˜ç§¯æ˜¯æŒ‡åœ¨æ•°å­¦ä¸­ï¼Œä¸¤ä¸ªé›†åˆ(Aé›†åˆå’ŒBé›†åˆ)çš„æ‰€æœ‰ç»„åˆæƒ…å†µã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207155509696.png"></p><blockquote><p>åœ¨å¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œéœ€è¦æ¶ˆé™¤æ— æ•ˆçš„ç¬›å¡å°”ç§¯ï¼Œåªä¿ç•™è¡¨å…³è”éƒ¨åˆ†çš„æ•°æ®</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220901093756992.png"></p><p>åœ¨SQLè¯­å¥ä¸­ï¼Œå¦‚ä½•å»é™¤æ— æ•ˆçš„ç¬›å¡å°”ç§¯å‘¢ï¼Ÿåªéœ€è¦ç»™å¤šè¡¨æŸ¥è¯¢åŠ ä¸Šè¿æ¥æŸ¥è¯¢çš„æ¡ä»¶å³å¯ã€‚</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select * from tb_emp , tb_dept where tb_emp.dept_id = tb_dept.id ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207164518904.png"></p><blockquote><p>ç”±äºidä¸º17çš„å‘˜å·¥ï¼Œæ²¡æœ‰dept_idå­—æ®µå€¼ï¼Œæ‰€ä»¥åœ¨å¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œæ ¹æ®è¿æ¥æŸ¥è¯¢çš„æ¡ä»¶å¹¶æ²¡æœ‰æŸ¥è¯¢åˆ°ã€‚</p></blockquote><h4 id="1-1-3-åˆ†ç±»"><a href="#1-1-3-åˆ†ç±»" class="headerlink" title="1.1.3 åˆ†ç±»"></a>1.1.3 åˆ†ç±»</h4><p>å¤šè¡¨æŸ¥è¯¢å¯ä»¥åˆ†ä¸ºï¼š</p><ol><li><p>è¿æ¥æŸ¥è¯¢</p><ul><li>å†…è¿æ¥ï¼šç›¸å½“äºæŸ¥è¯¢Aã€Bäº¤é›†éƒ¨åˆ†æ•°æ®</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207165446062.png"> </p></li><li><p>å¤–è¿æ¥</p><ul><li><p>å·¦å¤–è¿æ¥ï¼šæŸ¥è¯¢å·¦è¡¨æ‰€æœ‰æ•°æ®(åŒ…æ‹¬ä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®)</p></li><li><p>å³å¤–è¿æ¥ï¼šæŸ¥è¯¢å³è¡¨æ‰€æœ‰æ•°æ®(åŒ…æ‹¬ä¸¤å¼ è¡¨äº¤é›†éƒ¨åˆ†æ•°æ®)</p></li></ul></li><li><p>å­æŸ¥è¯¢</p></li></ol><h3 id="1-2-å†…è¿æ¥"><a href="#1-2-å†…è¿æ¥" class="headerlink" title="1.2 å†…è¿æ¥"></a>1.2 å†…è¿æ¥</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241130222956825.png" alt="å†…è¿æ¥"></p><p>å†…è¿æ¥æŸ¥è¯¢ï¼šæŸ¥è¯¢ä¸¤è¡¨æˆ–å¤šè¡¨ä¸­äº¤é›†éƒ¨åˆ†æ•°æ®ã€‚</p><p>å†…è¿æ¥ä»è¯­æ³•ä¸Šå¯ä»¥åˆ†ä¸ºï¼š </p><ul><li><p>éšå¼å†…è¿æ¥</p></li><li><p>æ˜¾å¼å†…è¿æ¥</p></li></ul><p>éšå¼å†…è¿æ¥è¯­æ³•ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select  å­—æ®µåˆ—è¡¨   from   è¡¨1 , è¡¨2   where  æ¡ä»¶ ... ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ˜¾å¼å†…è¿æ¥è¯­æ³•ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select  å­—æ®µåˆ—è¡¨   from   è¡¨1  [ inner ]  join è¡¨2  on  è¿æ¥æ¡ä»¶ ... ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹ï¼šæŸ¥è¯¢å‘˜å·¥çš„å§“ååŠæ‰€å±çš„éƒ¨é—¨åç§°</p><ul><li>éšå¼å†…è¿æ¥å®ç°</li></ul><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select tb_emp.name , tb_dept.name -- åˆ†åˆ«æŸ¥è¯¢ä¸¤å¼ è¡¨ä¸­çš„æ•°æ®from tb_emp , tb_dept -- å…³è”ä¸¤å¼ è¡¨where tb_emp.dept_id = tb_dept.id; -- æ¶ˆé™¤ç¬›å¡å°”ç§¯<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>æ˜¾å¼å†…è¿æ¥å®ç°</li></ul><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select tb_emp.name , tb_dept.namefrom tb_emp inner join tb_depton tb_emp.dept_id = tb_dept.id;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207173435289.png"></p><p>å¤šè¡¨æŸ¥è¯¢æ—¶ç»™è¡¨èµ·åˆ«åï¼š</p><ul><li><p>tableA  as  åˆ«å1  ,  tableB  as  åˆ«å2 ;</p></li><li><p>tableA  åˆ«å1  ,  tableB  åˆ«å2 ;</p></li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207174234522.png"></p><p>ä½¿ç”¨äº†åˆ«åçš„å¤šè¡¨æŸ¥è¯¢ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select emp.name , dept.namefrom tb_emp emp inner join tb_dept depton emp.dept_id = dept.id;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>æ³¨æ„äº‹é¡¹:</p><p>ä¸€æ—¦ä¸ºè¡¨èµ·äº†åˆ«åï¼Œå°±ä¸èƒ½å†ä½¿ç”¨è¡¨åæ¥æŒ‡å®šå¯¹åº”çš„å­—æ®µäº†ï¼Œæ­¤æ—¶åªèƒ½å¤Ÿä½¿ç”¨åˆ«åæ¥æŒ‡å®šå­—æ®µã€‚</p></blockquote><h3 id="1-3-å¤–è¿æ¥"><a href="#1-3-å¤–è¿æ¥" class="headerlink" title="1.3 å¤–è¿æ¥"></a>1.3 å¤–è¿æ¥</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241201205338804.png"></p><p>å¤–è¿æ¥åˆ†ä¸ºä¸¤ç§ï¼šå·¦å¤–è¿æ¥ å’Œ å³å¤–è¿æ¥ã€‚</p><p>å·¦å¤–è¿æ¥è¯­æ³•ç»“æ„ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select  å­—æ®µåˆ—è¡¨   from   è¡¨1  left  [ outer ]  join è¡¨2  on  è¿æ¥æ¡ä»¶ ... ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>å·¦å¤–è¿æ¥ç›¸å½“äºæŸ¥è¯¢è¡¨1(å·¦è¡¨)çš„æ‰€æœ‰æ•°æ®ï¼Œå½“ç„¶ä¹ŸåŒ…å«è¡¨1å’Œè¡¨2äº¤é›†éƒ¨åˆ†çš„æ•°æ®ã€‚</p></blockquote><p>å³å¤–è¿æ¥è¯­æ³•ç»“æ„ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select  å­—æ®µåˆ—è¡¨   from   è¡¨1  right  [ outer ]  join è¡¨2  on  è¿æ¥æ¡ä»¶ ... ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>å³å¤–è¿æ¥ç›¸å½“äºæŸ¥è¯¢è¡¨2(å³è¡¨)çš„æ‰€æœ‰æ•°æ®ï¼Œå½“ç„¶ä¹ŸåŒ…å«è¡¨1å’Œè¡¨2äº¤é›†éƒ¨åˆ†çš„æ•°æ®ã€‚</p></blockquote><p>æ¡ˆä¾‹ï¼šæŸ¥è¯¢å‘˜å·¥è¡¨ä¸­æ‰€æœ‰å‘˜å·¥çš„å§“å, å’Œå¯¹åº”çš„éƒ¨é—¨åç§°</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- å·¦å¤–è¿æ¥ï¼šä»¥left joinå…³é”®å­—å·¦è¾¹çš„è¡¨ä¸ºä¸»è¡¨ï¼ŒæŸ¥è¯¢ä¸»è¡¨ä¸­æ‰€æœ‰æ•°æ®ï¼Œä»¥åŠå’Œä¸»è¡¨åŒ¹é…çš„å³è¾¹è¡¨ä¸­çš„æ•°æ®select emp.name , dept.namefrom tb_emp AS emp left join tb_dept AS dept      on emp.dept_id = dept.id;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207181204792.png"></p><p>æ¡ˆä¾‹ï¼šæŸ¥è¯¢éƒ¨é—¨è¡¨ä¸­æ‰€æœ‰éƒ¨é—¨çš„åç§°, å’Œå¯¹åº”çš„å‘˜å·¥åç§° </p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- å³å¤–è¿æ¥select dept.name , emp.namefrom tb_emp AS emp right join  tb_dept AS dept     on emp.dept_id = dept.id;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207181048208.png"></p><blockquote><p>æ³¨æ„äº‹é¡¹ï¼š</p><p>å·¦å¤–è¿æ¥å’Œå³å¤–è¿æ¥æ˜¯å¯ä»¥ç›¸äº’æ›¿æ¢çš„ï¼Œåªéœ€è¦è°ƒæ•´è¿æ¥æŸ¥è¯¢æ—¶SQLè¯­å¥ä¸­è¡¨çš„å…ˆåé¡ºåºå°±å¯ä»¥äº†ã€‚è€Œæˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘ä½¿ç”¨æ—¶ï¼Œæ›´åå‘äºå·¦å¤–è¿æ¥ã€‚</p></blockquote><h3 id="1-4-å­æŸ¥è¯¢"><a href="#1-4-å­æŸ¥è¯¢" class="headerlink" title="1.4 å­æŸ¥è¯¢"></a>1.4 å­æŸ¥è¯¢</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241201212208972.png" alt="å­æŸ¥è¯¢"></p><h4 id="1-4-1-ä»‹ç»"><a href="#1-4-1-ä»‹ç»" class="headerlink" title="1.4.1 ä»‹ç»"></a>1.4.1 ä»‹ç»</h4><p>SQLè¯­å¥ä¸­åµŒå¥—selectè¯­å¥ï¼Œç§°ä¸ºåµŒå¥—æŸ¥è¯¢ï¼Œåˆç§°å­æŸ¥è¯¢ã€‚</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span>  <span class="token operator">*</span>  <span class="token keyword">FROM</span>   t1   <span class="token keyword">WHERE</span>  column1 <span class="token operator">=</span>  <span class="token punctuation">(</span> <span class="token keyword">SELECT</span>  column1  <span class="token keyword">FROM</span>  t2 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>å­æŸ¥è¯¢å¤–éƒ¨çš„è¯­å¥å¯ä»¥æ˜¯insert / update / delete / select çš„ä»»ä½•ä¸€ä¸ªï¼Œæœ€å¸¸è§çš„æ˜¯ selectã€‚</p></blockquote><p>æ ¹æ®å­æŸ¥è¯¢ç»“æœçš„ä¸åŒåˆ†ä¸ºï¼š</p><ol><li><p>æ ‡é‡å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå•ä¸ªå€¼[ä¸€è¡Œä¸€åˆ—]ï¼‰</p></li><li><p>åˆ—å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€åˆ—ï¼Œä½†å¯ä»¥æ˜¯å¤šè¡Œï¼‰</p></li><li><p>è¡Œå­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºä¸€è¡Œï¼Œä½†å¯ä»¥æ˜¯å¤šåˆ—ï¼‰</p></li><li><p>è¡¨å­æŸ¥è¯¢ï¼ˆå­æŸ¥è¯¢ç»“æœä¸ºå¤šè¡Œå¤šåˆ—[ç›¸å½“äºå­æŸ¥è¯¢ç»“æœæ˜¯ä¸€å¼ è¡¨]ï¼‰</p></li></ol><p>å­æŸ¥è¯¢å¯ä»¥ä¹¦å†™çš„ä½ç½®ï¼š</p><ol><li>whereä¹‹å</li><li>fromä¹‹å</li><li>selectä¹‹å</li></ol><h4 id="1-4-2-æ ‡é‡å­æŸ¥è¯¢"><a href="#1-4-2-æ ‡é‡å­æŸ¥è¯¢" class="headerlink" title="1.4.2 æ ‡é‡å­æŸ¥è¯¢"></a>1.4.2 æ ‡é‡å­æŸ¥è¯¢</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241201212252891.png"></p><p>å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯å•ä¸ªå€¼(æ•°å­—ã€å­—ç¬¦ä¸²ã€æ—¥æœŸç­‰)ï¼Œæœ€ç®€å•çš„å½¢å¼ï¼Œè¿™ç§å­æŸ¥è¯¢ç§°ä¸ºæ ‡é‡å­æŸ¥è¯¢ã€‚</p><p>å¸¸ç”¨çš„æ“ä½œç¬¦ï¼š =   &lt;&gt;   &gt;    &gt;=    &lt;   &lt;=   </p><p>æ¡ˆä¾‹1ï¼šæŸ¥è¯¢â€æ•™ç ”éƒ¨â€çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯</p><blockquote><p>å¯ä»¥å°†éœ€æ±‚åˆ†è§£ä¸ºä¸¤æ­¥ï¼š</p><ol><li>æŸ¥è¯¢ â€œæ•™ç ”éƒ¨â€ éƒ¨é—¨ID</li><li>æ ¹æ® â€œæ•™ç ”éƒ¨â€ éƒ¨é—¨IDï¼ŒæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</li></ol></blockquote><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 1.æŸ¥è¯¢"æ•™ç ”éƒ¨"éƒ¨é—¨IDselect id from tb_dept where name = 'æ•™ç ”éƒ¨';    #æŸ¥è¯¢ç»“æœï¼š2-- 2.æ ¹æ®"æ•™ç ”éƒ¨"éƒ¨é—¨ID, æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯select * from tb_emp where dept_id = 2;-- åˆå¹¶å‡ºä¸Šä¸¤æ¡SQLè¯­å¥select * from tb_emp where dept_id = (select id from tb_dept where name = 'æ•™ç ”éƒ¨');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207202215946.png"></p><p>æ¡ˆä¾‹2ï¼šæŸ¥è¯¢åœ¨ â€œæ–¹ä¸œç™½â€ å…¥èŒä¹‹åçš„å‘˜å·¥ä¿¡æ¯</p><blockquote><p>å¯ä»¥å°†éœ€æ±‚åˆ†è§£ä¸ºä¸¤æ­¥ï¼š</p><ol><li>æŸ¥è¯¢ æ–¹ä¸œç™½ çš„å…¥èŒæ—¥æœŸ</li><li>æŸ¥è¯¢ æŒ‡å®šå…¥èŒæ—¥æœŸä¹‹åå…¥èŒçš„å‘˜å·¥ä¿¡æ¯</li></ol></blockquote><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 1.æŸ¥è¯¢"æ–¹ä¸œç™½"çš„å…¥èŒæ—¥æœŸselect entrydate from tb_emp where name = 'æ–¹ä¸œç™½';     #æŸ¥è¯¢ç»“æœï¼š2012-11-01-- 2.æŸ¥è¯¢æŒ‡å®šå…¥èŒæ—¥æœŸä¹‹åå…¥èŒçš„å‘˜å·¥ä¿¡æ¯select * from tb_emp where entrydate &gt; '2012-11-01';-- åˆå¹¶ä»¥ä¸Šä¸¤æ¡SQLè¯­å¥select * from tb_emp where entrydate &gt; (select entrydate from tb_emp where name = 'æ–¹ä¸œç™½');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207203000445.png"></p><h4 id="1-4-3-åˆ—å­æŸ¥è¯¢"><a href="#1-4-3-åˆ—å­æŸ¥è¯¢" class="headerlink" title="1.4.3 åˆ—å­æŸ¥è¯¢"></a>1.4.3 åˆ—å­æŸ¥è¯¢</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241201221519047.png"></p><p>å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯ä¸€åˆ—(å¯ä»¥æ˜¯å¤šè¡Œ)ï¼Œè¿™ç§å­æŸ¥è¯¢ç§°ä¸ºåˆ—å­æŸ¥è¯¢ã€‚</p><p>å¸¸ç”¨çš„æ“ä½œç¬¦ï¼š</p><table><thead><tr><th><strong>æ“ä½œç¬¦</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td>IN</td><td>åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´ä¹‹å†…ï¼Œå¤šé€‰ä¸€</td></tr><tr><td>NOT IN</td><td>ä¸åœ¨æŒ‡å®šçš„é›†åˆèŒƒå›´ä¹‹å†…</td></tr></tbody></table><p>æ¡ˆä¾‹ï¼šæŸ¥è¯¢â€æ•™ç ”éƒ¨â€å’Œâ€å’¨è¯¢éƒ¨â€çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯</p><blockquote><p>åˆ†è§£ä¸ºä»¥ä¸‹ä¸¤æ­¥ï¼š</p><ol><li>æŸ¥è¯¢ â€œé”€å”®éƒ¨â€ å’Œ â€œå¸‚åœºéƒ¨â€ çš„éƒ¨é—¨ID</li><li>æ ¹æ®éƒ¨é—¨ID, æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</li></ol></blockquote><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 1.æŸ¥è¯¢"é”€å”®éƒ¨"å’Œ"å¸‚åœºéƒ¨"çš„éƒ¨é—¨IDselect id from tb_dept where name = 'æ•™ç ”éƒ¨' or name = 'å’¨è¯¢éƒ¨';    #æŸ¥è¯¢ç»“æœï¼š3,2-- 2.æ ¹æ®éƒ¨é—¨ID, æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯select * from tb_emp where dept_id in (3,2);-- åˆå¹¶ä»¥ä¸Šä¸¤æ¡SQLè¯­å¥select * from tb_emp where dept_id in (select id from tb_dept where name = 'æ•™ç ”éƒ¨' or name = 'å’¨è¯¢éƒ¨');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207203620472.png"></p><h4 id="1-4-4-è¡Œå­æŸ¥è¯¢"><a href="#1-4-4-è¡Œå­æŸ¥è¯¢" class="headerlink" title="1.4.4 è¡Œå­æŸ¥è¯¢"></a>1.4.4 è¡Œå­æŸ¥è¯¢</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241201222404727.png"></p><p>å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯ä¸€è¡Œ(å¯ä»¥æ˜¯å¤šåˆ—)ï¼Œè¿™ç§å­æŸ¥è¯¢ç§°ä¸ºè¡Œå­æŸ¥è¯¢ã€‚</p><p>å¸¸ç”¨çš„æ“ä½œç¬¦ï¼š= ã€&lt;&gt; ã€IN ã€NOT IN</p><p>æ¡ˆä¾‹ï¼šæŸ¥è¯¢ä¸â€éŸ¦ä¸€ç¬‘â€çš„å…¥èŒæ—¥æœŸåŠèŒä½éƒ½ç›¸åŒçš„å‘˜å·¥ä¿¡æ¯ </p><blockquote><p>å¯ä»¥æ‹†è§£ä¸ºä¸¤æ­¥è¿›è¡Œï¼š </p><ol><li>æŸ¥è¯¢ â€œéŸ¦ä¸€ç¬‘â€ çš„å…¥èŒæ—¥æœŸ åŠ èŒä½</li><li>æŸ¥è¯¢ä¸â€éŸ¦ä¸€ç¬‘â€çš„å…¥èŒæ—¥æœŸåŠèŒä½ç›¸åŒçš„å‘˜å·¥ä¿¡æ¯</li></ol></blockquote><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- æŸ¥è¯¢"éŸ¦ä¸€ç¬‘"çš„å…¥èŒæ—¥æœŸ åŠ èŒä½select entrydate , job from tb_emp where name = 'éŸ¦ä¸€ç¬‘';  #æŸ¥è¯¢ç»“æœï¼š 2007-01-01 , 2-- æŸ¥è¯¢ä¸"éŸ¦ä¸€ç¬‘"çš„å…¥èŒæ—¥æœŸåŠèŒä½ç›¸åŒçš„å‘˜å·¥ä¿¡æ¯select * from tb_emp where (entrydate,job) = ('2007-01-01',2);-- åˆå¹¶ä»¥ä¸Šä¸¤æ¡SQLè¯­å¥select * from tb_emp where (entrydate,job) = (select entrydate , job from tb_emp where name = 'éŸ¦ä¸€ç¬‘');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207204452202.png"></p><h4 id="1-4-5-è¡¨å­æŸ¥è¯¢"><a href="#1-4-5-è¡¨å­æŸ¥è¯¢" class="headerlink" title="1.4.5 è¡¨å­æŸ¥è¯¢"></a>1.4.5 è¡¨å­æŸ¥è¯¢</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241201223244623.png"></p><p>å­æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯å¤šè¡Œå¤šåˆ—ï¼Œå¸¸ä½œä¸ºä¸´æ—¶è¡¨ï¼Œè¿™ç§å­æŸ¥è¯¢ç§°ä¸ºè¡¨å­æŸ¥è¯¢ã€‚</p><p>æ¡ˆä¾‹ï¼šæŸ¥è¯¢å…¥èŒæ—¥æœŸæ˜¯ â€œ2006-01-01â€ ä¹‹åçš„å‘˜å·¥ä¿¡æ¯ , åŠå…¶éƒ¨é—¨ä¿¡æ¯</p><blockquote><p>åˆ†è§£ä¸ºä¸¤æ­¥æ‰§è¡Œï¼š</p><ol><li>æŸ¥è¯¢å…¥èŒæ—¥æœŸæ˜¯ â€œ2006-01-01â€ ä¹‹åçš„å‘˜å·¥ä¿¡æ¯</li><li>åŸºäºæŸ¥è¯¢åˆ°çš„å‘˜å·¥ä¿¡æ¯ï¼Œåœ¨æŸ¥è¯¢å¯¹åº”çš„éƒ¨é—¨ä¿¡æ¯</li></ol></blockquote><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select * from emp where entrydate &gt; '2006-01-01';select e.*, d.* from (select * from emp where entrydate &gt; '2006-01-01') e left join dept d on e.dept_id = d.id ;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221208142154263.png"></p><h3 id="1-5-æ¡ˆä¾‹"><a href="#1-5-æ¡ˆä¾‹" class="headerlink" title="1.5 æ¡ˆä¾‹"></a>1.5 æ¡ˆä¾‹</h3><p>åŸºäºä¹‹å‰è®¾è®¡çš„å¤šè¡¨æ¡ˆä¾‹çš„è¡¨ç»“æ„ï¼Œæˆ‘ä»¬æ¥å®Œæˆä»Šå¤©çš„å¤šè¡¨æŸ¥è¯¢æ¡ˆä¾‹éœ€æ±‚ã€‚</p><p><strong>å‡†å¤‡ç¯å¢ƒ</strong></p><p>å°†èµ„æ–™ä¸­å‡†å¤‡å¥½çš„å¤šè¡¨æŸ¥è¯¢çš„æ•°æ®å‡†å¤‡çš„SQLè„šæœ¬å¯¼å…¥æ•°æ®åº“ä¸­ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221208143318921.png"> </p><ul><li>åˆ†ç±»è¡¨ï¼šcategory</li><li>èœå“è¡¨ï¼šdish</li><li>å¥—é¤è¡¨ï¼šsetmeal</li><li>å¥—é¤èœå“å…³ç³»è¡¨ï¼šsetmeal_dish</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221208143312292.png"> </p><p><strong>éœ€æ±‚å®ç°</strong></p><ol><li>æŸ¥è¯¢ä»·æ ¼ä½äº 10å…ƒ çš„èœå“çš„åç§° ã€ä»·æ ¼ åŠå…¶ èœå“çš„åˆ†ç±»åç§°</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">/*æŸ¥è¯¢æŠ€å·§ï¼š     æ˜ç¡®1ï¼šæŸ¥è¯¢éœ€è¦ç”¨åˆ°å“ªäº›å­—æ®µ        èœå“åç§°ã€èœå“ä»·æ ¼ ã€ èœå“åˆ†ç±»å     æ˜ç¡®2ï¼šæŸ¥è¯¢çš„å­—æ®µåˆ†åˆ«å½’å±äºå“ªå¼ è¡¨        èœå“è¡¨ï¼š[èœå“åç§°ã€èœå“ä»·æ ¼]        åˆ†ç±»è¡¨ï¼š[åˆ†ç±»å]     æ˜ç¡®3ï¼šå¦‚æŸ¥å¤šè¡¨ï¼Œå»ºç«‹è¡¨ä¸è¡¨ä¹‹é—´çš„å…³è”        èœå“è¡¨.caategory_id = åˆ†ç±»è¡¨.id     å…¶ä»–ï¼šï¼ˆå…¶ä»–æ¡ä»¶ã€å…¶ä»–è¦æ±‚ï¼‰        ä»·æ ¼ &lt; 10*/select d.name , d.price , c.namefrom dish AS d , category AS cwhere d.category_id = c.id      and d.price &lt; 10;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221208145036602.png"></p><ol start="2"><li>æŸ¥è¯¢æ‰€æœ‰ä»·æ ¼åœ¨ 10å…ƒ(å«)åˆ°50å…ƒ(å«)ä¹‹é—´ ä¸” çŠ¶æ€ä¸ºâ€èµ·å”®â€çš„èœå“åç§°ã€ä»·æ ¼åŠå…¶åˆ†ç±»åç§° (å³ä½¿èœå“æ²¡æœ‰åˆ†ç±» , ä¹Ÿè¦å°†èœå“æŸ¥è¯¢å‡ºæ¥)</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select d.name , d.price, c.namefrom dish AS d left join category AS c on d.category_id = c.idwhere d.price between 10 and 50      and d.status = 1;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221208145432077.png"></p><ol start="3"><li>æŸ¥è¯¢æ¯ä¸ªåˆ†ç±»ä¸‹æœ€è´µçš„èœå“, å±•ç¤ºå‡ºåˆ†ç±»çš„åç§°ã€æœ€è´µçš„èœå“çš„ä»·æ ¼</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select c.name , max(d.price)from dish AS d , category AS cwhere d.category_id = c.idgroup by c.name;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221208150016895.png"></p><ol start="4"><li>æŸ¥è¯¢å„ä¸ªåˆ†ç±»ä¸‹ èœå“çŠ¶æ€ä¸º â€œèµ·å”®â€ , å¹¶ä¸” è¯¥åˆ†ç±»ä¸‹èœå“æ€»æ•°é‡å¤§äºç­‰äº3 çš„ åˆ†ç±»åç§°</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">/*æŸ¥è¯¢æŠ€å·§ï¼š     æ˜ç¡®1ï¼šæŸ¥è¯¢éœ€è¦ç”¨åˆ°å“ªäº›å­—æ®µ        åˆ†ç±»åç§°ã€èœå“æ€»æ•°é‡     æ˜ç¡®2ï¼šæŸ¥è¯¢ç”¨åˆ°çš„å­—æ®µåˆ†åˆ«å½’å±äºå“ªå¼ è¡¨        åˆ†ç±»è¡¨ï¼š[åˆ†ç±»å]        èœå“è¡¨ï¼š[èœå“çŠ¶æ€]     æ˜ç¡®3ï¼šå¦‚æŸ¥å¤šè¡¨ï¼Œå»ºç«‹è¡¨ä¸è¡¨ä¹‹é—´çš„å…³è”        èœå“è¡¨.caategory_id = åˆ†ç±»è¡¨.id     å…¶ä»–ï¼šï¼ˆå…¶ä»–æ¡ä»¶ã€å…¶ä»–è¦æ±‚ï¼‰        æ¡ä»¶ï¼šèœå“çŠ¶æ€ = 1 (1è¡¨ç¤ºèµ·å”®)        åˆ†ç»„ï¼šåˆ†ç±»å        åˆ†ç»„åæ¡ä»¶ï¼š æ€»æ•°é‡ &gt;= 3*/select c.name , count(*)from dish AS d , category AS cwhere d.category_id = c.id      and d.status = 1 -- èµ·å”®çŠ¶æ€group by c.name  -- æŒ‰ç…§åˆ†ç±»ååˆ†ç»„having count(*)&gt;=3; -- å„ç»„åç­›é€‰èœå“æ€»æ•°æ®&gt;=3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221208152107502.png"></p><ol start="5"><li>æŸ¥è¯¢å‡º â€œå•†åŠ¡å¥—é¤Aâ€ ä¸­åŒ…å«äº†å“ªäº›èœå“ ï¼ˆå±•ç¤ºå‡ºå¥—é¤åç§°ã€ä»·æ ¼, åŒ…å«çš„èœå“åç§°ã€ä»·æ ¼ã€ä»½æ•°ï¼‰</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select s.name, s.price, d.name, d.price, sd.copiesfrom setmeal AS s , setmeal_dish AS sd , dish AS dwhere s.id = sd.setmeal_id and sd.dish_id = d.id      and s.name='å•†åŠ¡å¥—é¤A';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221208152626138.png"></p><ol start="6"><li>æŸ¥è¯¢å‡ºä½äºèœå“å¹³å‡ä»·æ ¼çš„èœå“ä¿¡æ¯ (å±•ç¤ºå‡ºèœå“åç§°ã€èœå“ä»·æ ¼)</li></ol><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- 1.è®¡ç®—èœå“å¹³å‡ä»·æ ¼select avg(price) from dish;    -- æŸ¥è¯¢ç»“æœï¼š37.736842-- 2.æŸ¥è¯¢å‡ºä½äºèœå“å¹³å‡ä»·æ ¼çš„èœå“ä¿¡æ¯select * from dish where price &lt; 37.736842;-- åˆå¹¶ä»¥ä¸Šä¸¤æ¡SQLè¯­å¥select * from dish where price &lt; (select avg(price) from dish);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221208153051333.png"></p><h2 id="2ã€-äº‹åŠ¡"><a href="#2ã€-äº‹åŠ¡" class="headerlink" title="2ã€ äº‹åŠ¡"></a>2ã€ äº‹åŠ¡</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241201225201286.png" alt="äº‹åŠ¡"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241201225336599.png" alt="æ“ä½œ"></p><p>åœºæ™¯ï¼šå­¦å·¥éƒ¨æ•´ä¸ªéƒ¨é—¨è§£æ•£äº†ï¼Œè¯¥éƒ¨é—¨åŠéƒ¨é—¨ä¸‹çš„å‘˜å·¥éƒ½éœ€è¦åˆ é™¤äº†ã€‚</p><ul><li><p>æ“ä½œï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- åˆ é™¤å­¦å·¥éƒ¨</span><span class="token keyword">delete</span> <span class="token keyword">from</span> dept <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">-- åˆ é™¤æˆåŠŸ</span><span class="token comment">-- åˆ é™¤å­¦å·¥éƒ¨çš„å‘˜å·¥</span><span class="token keyword">delete</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> dept_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">-- åˆ é™¤å¤±è´¥ï¼ˆæ“ä½œè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼šé€ æˆåˆ é™¤æ²¡æœ‰æˆåŠŸï¼‰</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>é—®é¢˜ï¼šå¦‚æœåˆ é™¤éƒ¨é—¨æˆåŠŸäº†ï¼Œè€Œåˆ é™¤è¯¥éƒ¨é—¨çš„å‘˜å·¥æ—¶å¤±è´¥äº†ï¼Œæ­¤æ—¶å°±é€ æˆäº†æ•°æ®çš„ä¸ä¸€è‡´ã€‚</p></li></ul><p>â€‹è¦è§£å†³ä¸Šè¿°çš„é—®é¢˜ï¼Œå°±éœ€è¦é€šè¿‡æ•°æ®åº“ä¸­çš„äº‹åŠ¡æ¥è§£å†³ã€‚</p><h3 id="2-1-ä»‹ç»"><a href="#2-1-ä»‹ç»" class="headerlink" title="2.1 ä»‹ç»"></a>2.1 ä»‹ç»</h3><p>åœ¨å®é™…çš„ä¸šåŠ¡å¼€å‘ä¸­ï¼Œæœ‰äº›ä¸šåŠ¡æ“ä½œè¦å¤šæ¬¡è®¿é—®æ•°æ®åº“ã€‚ä¸€ä¸ªä¸šåŠ¡è¦å‘é€å¤šæ¡SQLè¯­å¥ç»™æ•°æ®åº“æ‰§è¡Œã€‚éœ€è¦å°†å¤šæ¬¡è®¿é—®æ•°æ®åº“çš„æ“ä½œè§†ä¸ºä¸€ä¸ªæ•´ä½“æ¥æ‰§è¡Œï¼Œè¦ä¹ˆæ‰€æœ‰çš„SQLè¯­å¥å…¨éƒ¨æ‰§è¡ŒæˆåŠŸã€‚å¦‚æœå…¶ä¸­æœ‰ä¸€æ¡SQLè¯­å¥å¤±è´¥ï¼Œå°±è¿›è¡Œäº‹åŠ¡çš„å›æ»šï¼Œæ‰€æœ‰çš„SQLè¯­å¥å…¨éƒ¨æ‰§è¡Œå¤±è´¥ã€‚</p><p>ç®€è€Œè¨€ä¹‹ï¼šäº‹åŠ¡æ˜¯ä¸€ç»„æ“ä½œçš„é›†åˆï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ã€‚äº‹åŠ¡ä¼šæŠŠæ‰€æœ‰çš„æ“ä½œä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸€èµ·å‘ç³»ç»Ÿæäº¤æˆ–æ’¤é”€æ“ä½œè¯·æ±‚ï¼Œå³è¿™äº›æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚</p><p>äº‹åŠ¡ä½œç”¨ï¼šä¿è¯åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡æ“ä½œæ•°æ®åº“è¡¨ä¸­æ•°æ®æ—¶ï¼Œè¦ä¹ˆå…¨éƒ½æˆåŠŸ,è¦ä¹ˆå…¨éƒ½å¤±è´¥ã€‚</p><h3 id="2-2-æ“ä½œ"><a href="#2-2-æ“ä½œ" class="headerlink" title="2.2 æ“ä½œ"></a>2.2 æ“ä½œ</h3><p>MYSQLä¸­æœ‰ä¸¤ç§æ–¹å¼è¿›è¡Œäº‹åŠ¡çš„æ“ä½œï¼š</p><ol><li>è‡ªåŠ¨æäº¤äº‹åŠ¡ï¼šå³æ‰§è¡Œä¸€æ¡sqlè¯­å¥æäº¤ä¸€æ¬¡äº‹åŠ¡ã€‚ï¼ˆé»˜è®¤MySQLçš„äº‹åŠ¡æ˜¯è‡ªåŠ¨æäº¤ï¼‰</li><li>æ‰‹åŠ¨æäº¤äº‹åŠ¡ï¼šå…ˆå¼€å¯ï¼Œå†æäº¤</li></ol><p>äº‹åŠ¡æ“ä½œæœ‰å…³çš„SQLè¯­å¥ï¼š</p><table><thead><tr><th>SQLè¯­å¥</th><th>æè¿°</th></tr></thead><tbody><tr><td>start transaction;  /  begin ;</td><td>å¼€å¯æ‰‹åŠ¨æ§åˆ¶äº‹åŠ¡</td></tr><tr><td>commit;</td><td>æäº¤äº‹åŠ¡</td></tr><tr><td>rollback;</td><td>å›æ»šäº‹åŠ¡</td></tr></tbody></table><blockquote><p>æ‰‹åŠ¨æäº¤äº‹åŠ¡ä½¿ç”¨æ­¥éª¤ï¼š</p><ul><li>ç¬¬1ç§æƒ…å†µï¼šå¼€å¯äº‹åŠ¡  =&gt;  æ‰§è¡ŒSQLè¯­å¥   =&gt;  æˆåŠŸ  =&gt;  æäº¤äº‹åŠ¡</li><li>ç¬¬2ç§æƒ…å†µï¼šå¼€å¯äº‹åŠ¡  =&gt;  æ‰§è¡ŒSQLè¯­å¥   =&gt;  å¤±è´¥  =&gt;  å›æ»šäº‹åŠ¡</li></ul></blockquote><p>ä½¿ç”¨äº‹åŠ¡æ§åˆ¶åˆ é™¤éƒ¨é—¨å’Œåˆ é™¤è¯¥éƒ¨é—¨ä¸‹çš„å‘˜å·¥çš„æ“ä½œï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- å¼€å¯äº‹åŠ¡</span><span class="token keyword">start</span> <span class="token keyword">transaction</span> <span class="token punctuation">;</span><span class="token comment">-- åˆ é™¤å­¦å·¥éƒ¨</span><span class="token keyword">delete</span> <span class="token keyword">from</span> tb_dept <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">-- åˆ é™¤å­¦å·¥éƒ¨çš„å‘˜å·¥</span><span class="token keyword">delete</span> <span class="token keyword">from</span> tb_emp <span class="token keyword">where</span> dept_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ä¸Šè¿°çš„è¿™ç»„SQLè¯­å¥ï¼Œå¦‚æœå¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œåˆ™æäº¤äº‹åŠ¡</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- æäº¤äº‹åŠ¡ (æˆåŠŸæ—¶æ‰§è¡Œ)</span><span class="token keyword">commit</span> <span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>ä¸Šè¿°çš„è¿™ç»„SQLè¯­å¥ï¼Œå¦‚æœå¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œåˆ™å›æ»šäº‹åŠ¡</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- å›æ»šäº‹åŠ¡ (å‡ºé”™æ—¶æ‰§è¡Œ)</span><span class="token keyword">rollback</span> <span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="2-3-å››å¤§ç‰¹æ€§"><a href="#2-3-å››å¤§ç‰¹æ€§" class="headerlink" title="2.3 å››å¤§ç‰¹æ€§"></a>2.3 å››å¤§ç‰¹æ€§</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241201225827804.png" alt="å››å¤§ç‰¹æ€§"></p><p>é¢è¯•é¢˜ï¼šäº‹åŠ¡æœ‰å“ªäº›ç‰¹æ€§ï¼Ÿ</p><ul><li>åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šäº‹åŠ¡æ˜¯ä¸å¯åˆ†å‰²çš„æœ€å°å•å…ƒï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</li><li>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šäº‹åŠ¡å®Œæˆæ—¶ï¼Œå¿…é¡»ä½¿æ‰€æœ‰çš„æ•°æ®éƒ½ä¿æŒä¸€è‡´çŠ¶æ€ã€‚</li><li>éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šæ•°æ®åº“ç³»ç»Ÿæä¾›çš„éš”ç¦»æœºåˆ¶ï¼Œä¿è¯äº‹åŠ¡åœ¨ä¸å—å¤–éƒ¨å¹¶å‘æ“ä½œå½±å“çš„ç‹¬ç«‹ç¯å¢ƒä¸‹è¿è¡Œã€‚</li><li>æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šäº‹åŠ¡ä¸€æ—¦æäº¤æˆ–å›æ»šï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…çš„ã€‚</li></ul><blockquote><p>äº‹åŠ¡çš„å››å¤§ç‰¹æ€§ç®€ç§°ä¸ºï¼šACID</p></blockquote><ul><li><p><strong>åŸå­æ€§ï¼ˆAtomicityï¼‰</strong> ï¼šåŸå­æ€§æ˜¯æŒ‡äº‹åŠ¡åŒ…è£…çš„ä¸€ç»„sqlæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•å…ƒï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</p></li><li><p><strong>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</strong>ï¼šä¸€ä¸ªäº‹åŠ¡å®Œæˆä¹‹åæ•°æ®éƒ½å¿…é¡»å¤„äºä¸€è‡´æ€§çŠ¶æ€ã€‚</p></li></ul><p>â€‹å¦‚æœäº‹åŠ¡æˆåŠŸçš„å®Œæˆï¼Œé‚£ä¹ˆæ•°æ®åº“çš„æ‰€æœ‰å˜åŒ–å°†ç”Ÿæ•ˆã€‚</p><p>â€‹å¦‚æœäº‹åŠ¡æ‰§è¡Œå‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆæ•°æ®åº“çš„æ‰€æœ‰å˜åŒ–å°†ä¼šè¢«å›æ»š(æ’¤é”€)ï¼Œè¿”å›åˆ°åŸå§‹çŠ¶æ€ã€‚</p><ul><li><strong>éš”ç¦»æ€§ï¼ˆIsolationï¼‰</strong>ï¼šå¤šä¸ªç”¨æˆ·å¹¶å‘çš„è®¿é—®æ•°æ®åº“æ—¶ï¼Œä¸€ä¸ªç”¨æˆ·çš„äº‹åŠ¡ä¸èƒ½è¢«å…¶ä»–ç”¨æˆ·çš„äº‹åŠ¡å¹²æ‰°ï¼Œå¤šä¸ªå¹¶å‘çš„äº‹åŠ¡ä¹‹é—´è¦ç›¸äº’éš”ç¦»ã€‚</li></ul><p>â€‹ä¸€ä¸ªäº‹åŠ¡çš„æˆåŠŸæˆ–è€…å¤±è´¥å¯¹äºå…¶ä»–çš„äº‹åŠ¡æ˜¯æ²¡æœ‰å½±å“ã€‚</p><ul><li><strong>æŒä¹…æ€§ï¼ˆDurabilityï¼‰</strong>ï¼šä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤æˆ–å›æ»šï¼Œå®ƒå¯¹æ•°æ®åº“çš„æ”¹å˜å°†æ˜¯æ°¸ä¹…æ€§çš„ï¼Œå“ªæ€•æ•°æ®åº“å‘ç”Ÿå¼‚å¸¸ï¼Œé‡å¯ä¹‹åæ•°æ®äº¦ç„¶å­˜åœ¨ã€‚</li></ul><h2 id="3ã€ç´¢å¼•"><a href="#3ã€ç´¢å¼•" class="headerlink" title="3ã€ç´¢å¼•"></a>3ã€ç´¢å¼•</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241201231524559.png" alt="è¯­æ³•"></p><h3 id="3-1-ä»‹ç»"><a href="#3-1-ä»‹ç»" class="headerlink" title="3.1 ä»‹ç»"></a>3.1 ä»‹ç»</h3><p>ç´¢å¼•(index)ï¼šæ˜¯å¸®åŠ©æ•°æ®åº“é«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„ ã€‚</p><ul><li>ç®€å•æ¥è®²ï¼Œå°±æ˜¯ä½¿ç”¨ç´¢å¼•å¯ä»¥æé«˜æŸ¥è¯¢çš„æ•ˆç‡ã€‚</li></ul><p>æµ‹è¯•æ²¡æœ‰ä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221209115617429.png"></p><p>æ·»åŠ ç´¢å¼•åæŸ¥è¯¢ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- æ·»åŠ ç´¢å¼•create index idx_sku_sn on tb_sku (sn);  #åœ¨æ·»åŠ ç´¢å¼•æ—¶ï¼Œä¹Ÿéœ€è¦æ¶ˆè€—æ—¶é—´-- æŸ¥è¯¢æ•°æ®ï¼ˆä½¿ç”¨äº†ç´¢å¼•ï¼‰select * from tb_sku where sn = '100000003145008';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221209120107543.png"></p><p>ä¼˜ç‚¹ï¼š</p><ol><li>æé«˜æ•°æ®æŸ¥è¯¢çš„æ•ˆç‡ï¼Œé™ä½æ•°æ®åº“çš„IOæˆæœ¬ã€‚</li><li>é€šè¿‡ç´¢å¼•åˆ—å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œé™ä½æ•°æ®æ’åºçš„æˆæœ¬ï¼Œé™ä½CPUæ¶ˆè€—ã€‚</li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li>ç´¢å¼•ä¼šå ç”¨å­˜å‚¨ç©ºé—´ã€‚</li><li>ç´¢å¼•å¤§å¤§æé«˜äº†æŸ¥è¯¢æ•ˆç‡ï¼ŒåŒæ—¶å´ä¹Ÿé™ä½äº†insertã€updateã€deleteçš„æ•ˆç‡ã€‚</li></ol><h3 id="3-2-ç»“æ„"><a href="#3-2-ç»“æ„" class="headerlink" title="3.2 ç»“æ„"></a>3.2 ç»“æ„</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241201231301627.png" alt="å¤šè·¯å¹³è¡¡äºŒå‰æ ‘"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241201231440284.png" alt="ç‰¹ç‚¹"></p><p>MySQLæ•°æ®åº“æ”¯æŒçš„ç´¢å¼•ç»“æ„æœ‰å¾ˆå¤šï¼Œå¦‚ï¼šHashç´¢å¼•ã€B+Treeç´¢å¼•ã€Full-Textç´¢å¼•ç­‰ã€‚</p><p>æˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«æŒ‡æ˜ï¼Œéƒ½æ˜¯æŒ‡é»˜è®¤çš„ B+Tree ç»“æ„ç»„ç»‡çš„ç´¢å¼•ã€‚</p><p>åœ¨æ²¡æœ‰äº†è§£B+Treeç»“æ„å‰ï¼Œæˆ‘ä»¬å…ˆå›é¡¾ä¸‹ä¹‹å‰æ‰€å­¦ä¹ çš„æ ‘ç»“æ„ï¼š</p><blockquote><p>äºŒå‰æŸ¥æ‰¾æ ‘ï¼šå·¦è¾¹çš„å­èŠ‚ç‚¹æ¯”çˆ¶èŠ‚ç‚¹å°ï¼Œå³è¾¹çš„å­èŠ‚ç‚¹æ¯”çˆ¶èŠ‚ç‚¹å¤§</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221208174135229.png"> </p><blockquote><p>å½“æˆ‘ä»¬å‘äºŒå‰æŸ¥æ‰¾æ ‘ä¿å­˜æ•°æ®æ—¶ï¼Œæ˜¯æŒ‰ç…§ä»å¤§åˆ°å°(æˆ–ä»å°åˆ°å¤§)çš„é¡ºåºä¿å­˜çš„ï¼Œæ­¤æ—¶å°±ä¼šå½¢æˆä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œæœç´¢æ€§èƒ½ä¼šæ‰“æŠ˜æ‰£ã€‚</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221208174859866.png"> </p><blockquote><p>å¯ä»¥é€‰æ‹©å¹³è¡¡äºŒå‰æ ‘æˆ–è€…æ˜¯çº¢é»‘æ ‘æ¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚ï¼ˆçº¢é»‘æ ‘ä¹Ÿæ˜¯ä¸€æ£µå¹³è¡¡çš„äºŒå‰æ ‘ï¼‰</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221209100647867.png"></p><blockquote><p>ä½†æ˜¯åœ¨Mysqlæ•°æ®åº“ä¸­å¹¶æ²¡æœ‰ä½¿ç”¨äºŒå‰æœç´¢æ•°æˆ–äºŒå‰å¹³è¡¡æ•°æˆ–çº¢é»‘æ ‘æ¥ä½œä¸ºç´¢å¼•çš„ç»“æ„ã€‚</p></blockquote><p>æ€è€ƒï¼šé‡‡ç”¨äºŒå‰æœç´¢æ ‘æˆ–è€…æ˜¯çº¢é»‘æ ‘æ¥ä½œä¸ºç´¢å¼•çš„ç»“æ„æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p><details>    <summary>ç­”æ¡ˆ</summary>    æœ€å¤§çš„é—®é¢˜å°±æ˜¯åœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œæ ‘çš„å±‚çº§æ¯”è¾ƒæ·±ï¼Œä¼šå½±å“æ£€ç´¢é€Ÿåº¦ã€‚å› ä¸ºä¸ç®¡æ˜¯äºŒå‰æœç´¢æ•°è¿˜æ˜¯çº¢é»‘æ•°ï¼Œä¸€ä¸ªèŠ‚ç‚¹ä¸‹é¢åªèƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚æ­¤æ—¶åœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œå°±ä¼šé€ æˆæ•°çš„é«˜åº¦æ¯”è¾ƒé«˜ï¼Œæ ‘çš„é«˜åº¦ä¸€æ—¦é«˜äº†ï¼Œæ£€ç´¢é€Ÿåº¦å°±ä¼šé™ä½ã€‚</details><blockquote><p>è¯´æ˜ï¼šå¦‚æœæ•°æ®ç»“æ„æ˜¯çº¢é»‘æ ‘ï¼Œé‚£ä¹ˆæŸ¥è¯¢1000ä¸‡æ¡æ•°æ®ï¼Œæ ¹æ®è®¡ç®—æ ‘çš„é«˜åº¦å¤§æ¦‚æ˜¯23å·¦å³ï¼Œè¿™æ ·ç¡®å®æ¯”ä¹‹å‰çš„æ–¹å¼å¿«äº†å¾ˆå¤šï¼Œä½†æ˜¯å¦‚æœé«˜å¹¶å‘è®¿é—®ï¼Œé‚£ä¹ˆä¸€ä¸ªç”¨æˆ·æœ‰å¯èƒ½éœ€è¦23æ¬¡ç£ç›˜IOï¼Œé‚£ä¹ˆ100ä¸‡ç”¨æˆ·ï¼Œé‚£ä¹ˆä¼šé€ æˆæ•ˆç‡æå…¶ä½ä¸‹ã€‚æ‰€ä»¥ä¸ºäº†å‡å°‘çº¢é»‘æ ‘çš„é«˜åº¦ï¼Œé‚£ä¹ˆå°±å¾—å¢åŠ æ ‘çš„å®½åº¦ï¼Œå°±æ˜¯ä¸å†åƒçº¢é»‘æ ‘ä¸€æ ·æ¯ä¸ªèŠ‚ç‚¹åªèƒ½ä¿å­˜ä¸€ä¸ªæ•°æ®ï¼Œå¯ä»¥å¼•å…¥å¦å¤–ä¸€ç§æ•°æ®ç»“æ„ï¼Œä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥ä¿å­˜å¤šä¸ªæ•°æ®ï¼Œè¿™æ ·å®½åº¦å°±ä¼šå¢åŠ ä»è€Œé™ä½æ ‘çš„é«˜åº¦ã€‚è¿™ç§æ•°æ®ç»“æ„ä¾‹å¦‚BTreeå°±æ»¡è¶³ã€‚</p></blockquote><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹B+Tree(å¤šè·¯å¹³è¡¡æœç´¢æ ‘)ç»“æ„ä¸­å¦‚ä½•é¿å…è¿™ä¸ªé—®é¢˜ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221208181315728.png"></p><p>B+Treeç»“æ„ï¼š</p><ul><li>æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥å­˜å‚¨å¤šä¸ªkeyï¼ˆæœ‰nä¸ªkeyï¼Œå°±æœ‰nä¸ªæŒ‡é’ˆï¼‰</li><li>èŠ‚ç‚¹åˆ†ä¸ºï¼šå¶å­èŠ‚ç‚¹ã€éå¶å­èŠ‚ç‚¹<ul><li>å¶å­èŠ‚ç‚¹ï¼Œå°±æ˜¯æœ€åä¸€å±‚å­èŠ‚ç‚¹ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ä¸Š</li><li>éå¶å­èŠ‚ç‚¹ï¼Œä¸æ˜¯æ ‘ç»“æ„æœ€ä¸‹é¢çš„èŠ‚ç‚¹ï¼Œç”¨äºç´¢å¼•æ•°æ®ï¼Œå­˜å‚¨çš„çš„æ˜¯ï¼škey+æŒ‡é’ˆ</li></ul></li><li>ä¸ºäº†æé«˜èŒƒå›´æŸ¥è¯¢æ•ˆç‡ï¼Œå¶å­èŠ‚ç‚¹å½¢æˆäº†ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œä¾¿äºæ•°æ®çš„æ’åºåŠåŒºé—´èŒƒå›´æŸ¥è¯¢</li></ul><blockquote><p><strong>æ‹“å±•ï¼š</strong></p><p>éå¶å­èŠ‚ç‚¹éƒ½æ˜¯ç”±key+æŒ‡é’ˆåŸŸç»„æˆçš„ï¼Œä¸€ä¸ªkeyå 8å­—èŠ‚ï¼Œä¸€ä¸ªæŒ‡é’ˆå 6å­—èŠ‚ï¼Œè€Œä¸€ä¸ªèŠ‚ç‚¹æ€»å…±å®¹é‡æ˜¯16KBï¼Œé‚£ä¹ˆå¯ä»¥è®¡ç®—å‡ºä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥å­˜å‚¨çš„å…ƒç´ ä¸ªæ•°ï¼š16*1024å­—èŠ‚ / (8+6)=1170ä¸ªå…ƒç´ ã€‚</p><ul><li>æŸ¥çœ‹mysqlç´¢å¼•èŠ‚ç‚¹å¤§å°ï¼šshow global status like â€˜innodb_page_sizeâ€™;    â€“ èŠ‚ç‚¹å¤§å°ï¼š16384</li></ul><p>å½“æ ¹èŠ‚ç‚¹ä¸­å¯ä»¥å­˜å‚¨1170ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆæ ¹æ®æ¯ä¸ªå…ƒç´ çš„åœ°å€å€¼åˆä¼šæ‰¾åˆ°ä¸‹é¢çš„å­èŠ‚ç‚¹ï¼Œæ¯ä¸ªå­èŠ‚ç‚¹ä¹Ÿä¼šå­˜å‚¨1170ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆç¬¬äºŒå±‚å³ç¬¬äºŒæ¬¡IOçš„æ—¶å€™å°±ä¼šæ‰¾åˆ°æ•°æ®å¤§æ¦‚æ˜¯ï¼š1170*1170=135Wã€‚ä¹Ÿå°±æ˜¯è¯´B+Treeæ•°æ®ç»“æ„ä¸­åªéœ€è¦ç»å†ä¸¤æ¬¡ç£ç›˜IOå°±å¯ä»¥æ‰¾åˆ°135Wæ¡æ•°æ®ã€‚</p><p>å¯¹äºç¬¬äºŒå±‚æ¯ä¸ªå…ƒç´ æœ‰æŒ‡é’ˆï¼Œé‚£ä¹ˆä¼šæ‰¾åˆ°ç¬¬ä¸‰å±‚ï¼Œç¬¬ä¸‰å±‚ç”±key+æ•°æ®ç»„æˆï¼Œå‡è®¾key+æ•°æ®æ€»å¤§å°æ˜¯1KBï¼Œè€Œæ¯ä¸ªèŠ‚ç‚¹ä¸€å…±èƒ½å­˜å‚¨16KBï¼Œæ‰€ä»¥ä¸€ä¸ªç¬¬ä¸‰å±‚ä¸€ä¸ªèŠ‚ç‚¹å¤§æ¦‚å¯ä»¥å­˜å‚¨16ä¸ªå…ƒç´ (å³16æ¡è®°å½•)ã€‚é‚£ä¹ˆç»“åˆç¬¬äºŒå±‚æ¯ä¸ªå…ƒç´ é€šè¿‡æŒ‡é’ˆåŸŸæ‰¾åˆ°ç¬¬ä¸‰å±‚çš„èŠ‚ç‚¹ï¼Œç¬¬äºŒå±‚ä¸€å…±æ˜¯135Wä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆç¬¬ä¸‰å±‚æ€»å…ƒç´ å¤§å°å°±æ˜¯ï¼š135W*16ç»“æœå°±æ˜¯2000W+çš„å…ƒç´ ä¸ªæ•°ã€‚</p><p>ç»“åˆä¸Šè¿°åˆ†æB+Treeæœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li>åƒä¸‡æ¡æ•°æ®ï¼ŒB+Treeå¯ä»¥æ§åˆ¶åœ¨å°äºç­‰äº3çš„é«˜åº¦</li><li>æ‰€æœ‰çš„æ•°æ®éƒ½å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ä¸Šï¼Œå¹¶ä¸”åº•å±‚å·²ç»å®ç°äº†æŒ‰ç…§ç´¢å¼•è¿›è¡Œæ’åºï¼Œè¿˜å¯ä»¥æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼Œå¶å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œæ”¯æŒä»å°åˆ°å¤§æˆ–è€…ä»å¤§åˆ°å°æŸ¥æ‰¾</li></ul></blockquote><h3 id="3-3-è¯­æ³•"><a href="#3-3-è¯­æ³•" class="headerlink" title="3.3 è¯­æ³•"></a>3.3 è¯­æ³•</h3><p><strong>åˆ›å»ºç´¢å¼•</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create  [ unique ]  index ç´¢å¼•å on  è¡¨å (å­—æ®µå,... ) ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹ï¼šä¸ºtb_empè¡¨çš„nameå­—æ®µå»ºç«‹ä¸€ä¸ªç´¢å¼•</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create index idx_emp_name on tb_emp(name);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221209105119159.png"></p><blockquote><p>åœ¨åˆ›å»ºè¡¨æ—¶ï¼Œå¦‚æœæ·»åŠ äº†ä¸»é”®å’Œå”¯ä¸€çº¦æŸï¼Œå°±ä¼šé»˜è®¤åˆ›å»ºï¼šä¸»é”®ç´¢å¼•ã€å”¯ä¸€çº¦æŸ</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221209105846211.png"></p></blockquote><p><strong>æŸ¥çœ‹ç´¢å¼•</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">show  index  from  è¡¨å;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹ï¼šæŸ¥è¯¢ tb_emp è¡¨çš„ç´¢å¼•ä¿¡æ¯</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">show  index  from  tb_emp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221209110317092.png"></p><p><strong>åˆ é™¤ç´¢å¼•</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">drop  index  ç´¢å¼•å  on  è¡¨å;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹ï¼šåˆ é™¤ tb_emp è¡¨ä¸­nameå­—æ®µçš„ç´¢å¼•</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">drop index idx_emp_name on tb_emp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><p>ä¸»é”®å­—æ®µï¼Œåœ¨å»ºè¡¨æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸»é”®ç´¢å¼•</p></li><li><p>æ·»åŠ å”¯ä¸€çº¦æŸæ—¶ï¼Œæ•°æ®åº“å®é™…ä¸Šä¼šæ·»åŠ å”¯ä¸€ç´¢å¼•</p></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šè¡¨æŸ¥è¯¢ </tag>
            
            <tag> äº‹åŠ¡ </tag>
            
            <tag> ç´¢å¼• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlï¼ˆ2ï¼‰</title>
      <link href="/2024/11/30/mysql-2/"/>
      <url>/2024/11/30/mysql-2/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®åº“å¼€å‘-MySQL"><a href="#æ•°æ®åº“å¼€å‘-MySQL" class="headerlink" title="æ•°æ®åº“å¼€å‘-MySQL"></a>æ•°æ®åº“å¼€å‘-MySQL</h1><p>åœ¨ä¸Šæ¬¡å­¦ä¹ çš„å†…å®¹ä¸­ï¼Œæˆ‘ä»¬è®²è§£äº†ï¼š</p><ul><li>ä½¿ç”¨DDLè¯­å¥æ¥æ“ä½œæ•°æ®åº“ä»¥åŠè¡¨ç»“æ„ï¼ˆæ•°æ®åº“è®¾è®¡ï¼‰</li><li>ä½¿ç”¨DMLè¯­å¥æ¥å®Œæˆæ•°æ®åº“ä¸­æ•°æ®çš„å¢ã€åˆ ã€æ”¹æ“ä½œï¼ˆæ•°æ®åº“æ“ä½œï¼‰</li></ul><p>æˆ‘ä»¬ä»Šå¤©è¿˜æ˜¯ç»§ç»­å­¦ä¹ æ•°æ®åº“æ“ä½œæ–¹é¢çš„å†…å®¹ï¼šæŸ¥è¯¢ï¼ˆDQLè¯­å¥ï¼‰ã€‚</p><p>æŸ¥è¯¢æ“ä½œæˆ‘ä»¬åˆ†ä¸ºä¸¤éƒ¨åˆ†å­¦ä¹ ï¼š</p><ul><li>DQLè¯­å¥-å•è¡¨æ“ä½œ</li><li>DQLè¯­å¥-å¤šè¡¨æ“ä½œ</li></ul><h2 id="1-æ•°æ®åº“æ“ä½œ-DQL"><a href="#1-æ•°æ®åº“æ“ä½œ-DQL" class="headerlink" title="1. æ•°æ®åº“æ“ä½œ-DQL"></a>1. æ•°æ®åº“æ“ä½œ-DQL</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241130163811569.png" alt="DQL"></p><h3 id="1-1-ä»‹ç»"><a href="#1-1-ä»‹ç»" class="headerlink" title="1.1 ä»‹ç»"></a>1.1 ä»‹ç»</h3><p>DQLè‹±æ–‡å…¨ç§°æ˜¯Data Query Language(æ•°æ®æŸ¥è¯¢è¯­è¨€)ï¼Œç”¨æ¥æŸ¥è¯¢æ•°æ®åº“è¡¨ä¸­çš„è®°å½•ã€‚</p><p>æŸ¥è¯¢å…³é”®å­—ï¼šSELECT</p><p>æŸ¥è¯¢æ“ä½œæ˜¯æ‰€æœ‰SQLè¯­å¥å½“ä¸­æœ€ä¸ºå¸¸è§ï¼Œä¹Ÿæ˜¯æœ€ä¸ºé‡è¦çš„æ“ä½œã€‚åœ¨ä¸€ä¸ªæ­£å¸¸çš„ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼ŒæŸ¥è¯¢æ“ä½œçš„ä½¿ç”¨é¢‘æ¬¡æ˜¯è¦è¿œé«˜äºå¢åˆ æ”¹æ“ä½œçš„ã€‚å½“æˆ‘ä»¬æ‰“å¼€æŸä¸ªç½‘ç«™æˆ–APPæ‰€çœ‹åˆ°çš„å±•ç¤ºä¿¡æ¯ï¼Œéƒ½æ˜¯é€šè¿‡ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å¾—åˆ°çš„ï¼Œè€Œåœ¨è¿™ä¸ªæŸ¥è¯¢è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šæ¶‰åŠåˆ°æ¡ä»¶ã€æ’åºã€åˆ†é¡µç­‰æ“ä½œã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220611103943417.png"> </p><h3 id="1-2-è¯­æ³•"><a href="#1-2-è¯­æ³•" class="headerlink" title="1.2 è¯­æ³•"></a>1.2 è¯­æ³•</h3><p>DQLæŸ¥è¯¢è¯­å¥ï¼Œè¯­æ³•ç»“æ„å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">SELECTå­—æ®µåˆ—è¡¨FROMè¡¨ååˆ—è¡¨WHEREæ¡ä»¶åˆ—è¡¨GROUP  BYåˆ†ç»„å­—æ®µåˆ—è¡¨HAVINGåˆ†ç»„åæ¡ä»¶åˆ—è¡¨ORDER BYæ’åºå­—æ®µåˆ—è¡¨LIMITåˆ†é¡µå‚æ•°<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬ä»Šå¤©ä¼šå°†ä¸Šé¢çš„å®Œæ•´è¯­æ³•æ‹†åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†å­¦ä¹ ï¼š</p><ul><li>åŸºæœ¬æŸ¥è¯¢ï¼ˆä¸å¸¦ä»»ä½•æ¡ä»¶ï¼‰</li><li>æ¡ä»¶æŸ¥è¯¢ï¼ˆwhereï¼‰</li><li>åˆ†ç»„æŸ¥è¯¢ï¼ˆgroup byï¼‰</li><li>æ’åºæŸ¥è¯¢ï¼ˆorder byï¼‰</li><li>åˆ†é¡µæŸ¥è¯¢ï¼ˆlimitï¼‰</li></ul><p>å‡†å¤‡ä¸€äº›æµ‹è¯•æ•°æ®ç”¨äºæŸ¥è¯¢æ“ä½œï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create database db02; -- åˆ›å»ºæ•°æ®åº“use db02; -- åˆ‡æ¢æ•°æ®åº“-- å‘˜å·¥ç®¡ç†(å¸¦çº¦æŸ)create table tb_emp (    id int unsigned primary key auto_increment comment 'ID',    username varchar(20) not null unique comment 'ç”¨æˆ·å',    password varchar(32) default '123456' comment 'å¯†ç ',    name varchar(10) not null comment 'å§“å',    gender tinyint unsigned not null comment 'æ€§åˆ«, è¯´æ˜: 1 ç”·, 2 å¥³',    image varchar(300) comment 'å›¾åƒ',    job tinyint unsigned comment 'èŒä½, è¯´æ˜: 1 ç­ä¸»ä»»,2 è®²å¸ˆ, 3 å­¦å·¥ä¸»ç®¡, 4 æ•™ç ”ä¸»ç®¡',    entrydate date comment 'å…¥èŒæ—¶é—´',    create_time datetime not null comment 'åˆ›å»ºæ—¶é—´',    update_time datetime not null comment 'ä¿®æ”¹æ—¶é—´') comment 'å‘˜å·¥è¡¨';-- å‡†å¤‡æµ‹è¯•æ•°æ®INSERT INTO tb_emp (id, username, password, name, gender, image, job, entrydate, create_time, update_time) VALUES    (1, 'jinyong', '123456', 'é‡‘åº¸', 1, '1.jpg', 4, '2000-01-01', '2022-10-27 16:35:33', '2022-10-27 16:35:35'),    (2, 'zhangwuji', '123456', 'å¼ æ— å¿Œ', 1, '2.jpg', 2, '2015-01-01', '2022-10-27 16:35:33', '2022-10-27 16:35:37'),    (3, 'yangxiao', '123456', 'æ¨é€', 1, '3.jpg', 2, '2008-05-01', '2022-10-27 16:35:33', '2022-10-27 16:35:39'),    (4, 'weiyixiao', '123456', 'éŸ¦ä¸€ç¬‘', 1, '4.jpg', 2, '2007-01-01', '2022-10-27 16:35:33', '2022-10-27 16:35:41'),    (5, 'changyuchun', '123456', 'å¸¸é‡æ˜¥', 1, '5.jpg', 2, '2012-12-05', '2022-10-27 16:35:33', '2022-10-27 16:35:43'),    (6, 'xiaozhao', '123456', 'å°æ˜­', 2, '6.jpg', 3, '2013-09-05', '2022-10-27 16:35:33', '2022-10-27 16:35:45'),    (7, 'jixiaofu', '123456', 'çºªæ™“èŠ™', 2, '7.jpg', 1, '2005-08-01', '2022-10-27 16:35:33', '2022-10-27 16:35:47'),    (8, 'zhouzhiruo', '123456', 'å‘¨èŠ·è‹¥', 2, '8.jpg', 1, '2014-11-09', '2022-10-27 16:35:33', '2022-10-27 16:35:49'),    (9, 'dingminjun', '123456', 'ä¸æ•å›', 2, '9.jpg', 1, '2011-03-11', '2022-10-27 16:35:33', '2022-10-27 16:35:51'),    (10, 'zhaomin', '123456', 'èµµæ•', 2, '10.jpg', 1, '2013-09-05', '2022-10-27 16:35:33', '2022-10-27 16:35:53'),    (11, 'luzhangke', '123456', 'é¹¿æ–å®¢', 1, '11.jpg', 2, '2007-02-01', '2022-10-27 16:35:33', '2022-10-27 16:35:55'),    (12, 'hebiweng', '123456', 'é¹¤ç¬”ç¿', 1, '12.jpg', 2, '2008-08-18', '2022-10-27 16:35:33', '2022-10-27 16:35:57'),    (13, 'fangdongbai', '123456', 'æ–¹ä¸œç™½', 1, '13.jpg', 1, '2012-11-01', '2022-10-27 16:35:33', '2022-10-27 16:35:59'),    (14, 'zhangsanfeng', '123456', 'å¼ ä¸‰ä¸°', 1, '14.jpg', 2, '2002-08-01', '2022-10-27 16:35:33', '2022-10-27 16:36:01'),    (15, 'yulianzhou', '123456', 'ä¿è²èˆŸ', 1, '15.jpg', 2, '2011-05-01', '2022-10-27 16:35:33', '2022-10-27 16:36:03'),    (16, 'songyuanqiao', '123456', 'å®‹è¿œæ¡¥', 1, '16.jpg', 2, '2010-01-01', '2022-10-27 16:35:33', '2022-10-27 16:36:05'),    (17, 'chenyouliang', '12345678', 'é™ˆå‹è°…', 1, '17.jpg', null, '2015-03-21', '2022-10-27 16:35:33', '2022-10-27 16:36:07'),    (18, 'zhang1', '123456', 'å¼ ä¸€', 1, '2.jpg', 2, '2015-01-01', '2022-10-27 16:35:33', '2022-10-27 16:36:09'),    (19, 'zhang2', '123456', 'å¼ äºŒ', 1, '2.jpg', 2, '2012-01-01', '2022-10-27 16:35:33', '2022-10-27 16:36:11'),    (20, 'zhang3', '123456', 'å¼ ä¸‰', 1, '2.jpg', 2, '2018-01-01', '2022-10-27 16:35:33', '2022-10-27 16:36:13'),    (21, 'zhang4', '123456', 'å¼ å››', 1, '2.jpg', 2, '2015-01-01', '2022-10-27 16:35:33', '2022-10-27 16:36:15'),    (22, 'zhang5', '123456', 'å¼ äº”', 1, '2.jpg', 2, '2016-01-01', '2022-10-27 16:35:33', '2022-10-27 16:36:17'),    (23, 'zhang6', '123456', 'å¼ å…­', 1, '2.jpg', 2, '2012-01-01', '2022-10-27 16:35:33', '2022-10-27 16:36:19'),    (24, 'zhang7', '123456', 'å¼ ä¸ƒ', 1, '2.jpg', 2, '2006-01-01', '2022-10-27 16:35:33', '2022-10-27 16:36:21'),    (25, 'zhang8', '123456', 'å¼ å…«', 1, '2.jpg', 2, '2002-01-01', '2022-10-27 16:35:33', '2022-10-27 16:36:23'),    (26, 'zhang9', '123456', 'å¼ ä¹', 1, '2.jpg', 2, '2011-01-01', '2022-10-27 16:35:33', '2022-10-27 16:36:25'),    (27, 'zhang10', '123456', 'å¼ å', 1, '2.jpg', 2, '2004-01-01', '2022-10-27 16:35:33', '2022-10-27 16:36:27'),    (28, 'zhang11', '123456', 'å¼ åä¸€', 1, '2.jpg', 2, '2007-01-01', '2022-10-27 16:35:33', '2022-10-27 16:36:29'),    (29, 'zhang12', '123456', 'å¼ åäºŒ', 1, '2.jpg', 2, '2020-01-01', '2022-10-27 16:35:33', '2022-10-27 16:36:31');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-3-åŸºæœ¬æŸ¥è¯¢"><a href="#1-3-åŸºæœ¬æŸ¥è¯¢" class="headerlink" title="1.3 åŸºæœ¬æŸ¥è¯¢"></a>1.3 åŸºæœ¬æŸ¥è¯¢</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241130165549144.png" alt="è¯­æ³•"></p><p>åœ¨åŸºæœ¬æŸ¥è¯¢çš„DQLè¯­å¥ä¸­ï¼Œä¸å¸¦ä»»ä½•çš„æŸ¥è¯¢æ¡ä»¶ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><ul><li><p>æŸ¥è¯¢å¤šä¸ªå­—æ®µ</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select å­—æ®µ1, å­—æ®µ2, å­—æ®µ3 from  è¡¨å;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>æŸ¥è¯¢æ‰€æœ‰å­—æ®µï¼ˆé€šé…ç¬¦ï¼‰</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select *  from  è¡¨å;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>è®¾ç½®åˆ«å</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select å­—æ®µ1 [ as åˆ«å1 ] , å­—æ®µ2 [ as åˆ«å2 ]  from  è¡¨å;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>å»é™¤é‡å¤è®°å½•</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select distinct å­—æ®µåˆ—è¡¨ from  è¡¨å;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><p>æ¡ˆä¾‹1ï¼šæŸ¥è¯¢æŒ‡å®šå­—æ®µ nameï¼Œentrydateå¹¶è¿”å›</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select name,entrydate from tb_emp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206112810199.png"></p><p>æ¡ˆä¾‹2ï¼šæŸ¥è¯¢è¿”å›æ‰€æœ‰å­—æ®µ</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select * from tb_emp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><code>*</code>å·ä»£è¡¨æŸ¥è¯¢æ‰€æœ‰å­—æ®µï¼Œåœ¨å®é™…å¼€å‘ä¸­å°½é‡å°‘ç”¨ï¼ˆä¸ç›´è§‚ã€å½±å“æ•ˆç‡ï¼‰</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206113904763.png"></p><p>æ¡ˆä¾‹3ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥çš„ name,entrydateï¼Œå¹¶èµ·åˆ«å(å§“åã€å…¥èŒæ—¥æœŸ)</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- æ–¹å¼1ï¼šselect name AS å§“å, entrydate AS å…¥èŒæ—¥æœŸ from tb_emp;-- æ–¹å¼2ï¼š åˆ«åä¸­æœ‰ç‰¹æ®Šå­—ç¬¦æ—¶ï¼Œä½¿ç”¨''æˆ–""åŒ…å«select name AS 'å§“ å', entrydate AS 'å…¥èŒæ—¥æœŸ' from tb_emp;-- æ–¹å¼3ï¼šselect name AS "å§“å", entrydate AS "å…¥èŒæ—¥æœŸ" from tb_emp;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206114752149.png"></p><p>æ¡ˆä¾‹4ï¼šæŸ¥è¯¢å·²æœ‰çš„å‘˜å·¥å…³è”äº†å“ªå‡ ç§èŒä½(ä¸è¦é‡å¤)</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select distinct job from tb_emp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206115440117.png"></p><h3 id="1-4-æ¡ä»¶æŸ¥è¯¢"><a href="#1-4-æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="1.4 æ¡ä»¶æŸ¥è¯¢"></a>1.4 æ¡ä»¶æŸ¥è¯¢</h3><p><strong>è¯­æ³•ï¼š</strong></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span>  å­—æ®µåˆ—è¡¨  <span class="token keyword">from</span>   è¡¨å   <span class="token keyword">where</span>   æ¡ä»¶åˆ—è¡¨ <span class="token punctuation">;</span> <span class="token comment">-- æ¡ä»¶åˆ—è¡¨ï¼šæ„å‘³ç€å¯ä»¥æœ‰å¤šä¸ªæ¡ä»¶</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å­¦ä¹ æ¡ä»¶æŸ¥è¯¢å°±æ˜¯å­¦ä¹ æ¡ä»¶çš„æ„å»ºæ–¹å¼ï¼Œè€Œåœ¨SQLè¯­å¥å½“ä¸­æ„é€ æ¡ä»¶çš„è¿ç®—ç¬¦åˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li>æ¯”è¾ƒè¿ç®—ç¬¦</li><li>é€»è¾‘è¿ç®—ç¬¦</li></ul><p>å¸¸ç”¨çš„æ¯”è¾ƒè¿ç®—ç¬¦å¦‚ä¸‹: </p><table><thead><tr><th><strong>æ¯”è¾ƒè¿ç®—ç¬¦</strong></th><th><strong>åŠŸèƒ½</strong></th></tr></thead><tbody><tr><td>&gt;</td><td>å¤§äº</td></tr><tr><td>&gt;=</td><td>å¤§äºç­‰äº</td></tr><tr><td>&lt;</td><td>å°äº</td></tr><tr><td>&lt;=</td><td>å°äºç­‰äº</td></tr><tr><td>=</td><td>ç­‰äº</td></tr><tr><td>&lt;&gt; æˆ– !=</td><td>ä¸ç­‰äº</td></tr><tr><td>between â€¦  and â€¦</td><td>åœ¨æŸä¸ªèŒƒå›´ä¹‹å†…(å«æœ€å°ã€æœ€å¤§å€¼)</td></tr><tr><td>in(â€¦)</td><td>åœ¨inä¹‹åçš„åˆ—è¡¨ä¸­çš„å€¼ï¼Œå¤šé€‰ä¸€</td></tr><tr><td>like å ä½ç¬¦</td><td>æ¨¡ç³ŠåŒ¹é…(_åŒ¹é…å•ä¸ªå­—ç¬¦, %åŒ¹é…ä»»æ„ä¸ªå­—ç¬¦)</td></tr><tr><td>is null</td><td>æ˜¯null</td></tr></tbody></table><p>å¸¸ç”¨çš„é€»è¾‘è¿ç®—ç¬¦å¦‚ä¸‹:</p><table><thead><tr><th><strong>é€»è¾‘è¿ç®—ç¬¦</strong></th><th><strong>åŠŸèƒ½</strong></th></tr></thead><tbody><tr><td>and æˆ– &amp;&amp;</td><td>å¹¶ä¸” (å¤šä¸ªæ¡ä»¶åŒæ—¶æˆç«‹)</td></tr><tr><td>or æˆ– ||</td><td>æˆ–è€… (å¤šä¸ªæ¡ä»¶ä»»æ„ä¸€ä¸ªæˆç«‹)</td></tr><tr><td>not æˆ– !</td><td>é , ä¸æ˜¯</td></tr></tbody></table><p>æ¡ˆä¾‹1ï¼šæŸ¥è¯¢ å§“å ä¸º æ¨é€ çš„å‘˜å·¥</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_empwhere name = 'æ¨é€'; -- å­—ç¬¦ä¸²ä½¿ç”¨''æˆ–""åŒ…å«<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206121255784.png"></p><p>æ¡ˆä¾‹2ï¼šæŸ¥è¯¢ idå°äºç­‰äº5 çš„å‘˜å·¥ä¿¡æ¯</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_empwhere id &lt;=5;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206121523712.png"></p><p>æ¡ˆä¾‹3ï¼šæŸ¥è¯¢ æ²¡æœ‰åˆ†é…èŒä½ çš„å‘˜å·¥ä¿¡æ¯</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_empwhere job is null ;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206121754267.png"></p><blockquote><p>æ³¨æ„ï¼šæŸ¥è¯¢ä¸ºNULLçš„æ•°æ®æ—¶ï¼Œä¸èƒ½ä½¿ç”¨ <code>= null</code></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206122036970.png"></p></blockquote><p>æ¡ˆä¾‹4ï¼šæŸ¥è¯¢ æœ‰èŒä½ çš„å‘˜å·¥ä¿¡æ¯</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_empwhere job is not null ;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206122454101.png"></p><p>æ¡ˆä¾‹5ï¼šæŸ¥è¯¢ å¯†ç ä¸ç­‰äº â€˜123456â€™ çš„å‘˜å·¥ä¿¡æ¯</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- æ–¹å¼1ï¼šselect id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_empwhere password &lt;&gt; '123456';-- æ–¹å¼2ï¼šselect id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_empwhere password != '123456';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206122712152.png"></p><p>æ¡ˆä¾‹6ï¼šæŸ¥è¯¢ å…¥èŒæ—¥æœŸ åœ¨ â€˜2000-01-01â€™ (åŒ…å«) åˆ° â€˜2010-01-01â€™(åŒ…å«) ä¹‹é—´çš„å‘˜å·¥ä¿¡æ¯</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- æ–¹å¼1ï¼šselect id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_empwhere entrydate&gt;='2000-01-01' and entrydate&lt;='2010-01-01';-- æ–¹å¼2ï¼š between...andselect id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_empwhere entrydate between '2000-01-01' and '2010-01-01';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206125100857.png"></p><p>æ¡ˆä¾‹7ï¼šæŸ¥è¯¢ å…¥èŒæ—¶é—´ åœ¨ â€˜2000-01-01â€™ (åŒ…å«) åˆ° â€˜2010-01-01â€™(åŒ…å«) ä¹‹é—´ ä¸” æ€§åˆ«ä¸ºå¥³ çš„å‘˜å·¥ä¿¡æ¯</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_empwhere entrydate between '2000-01-01' and '2010-01-01'      and gender = 2;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206125356737.png"></p><p>æ¡ˆä¾‹8ï¼šæŸ¥è¯¢ èŒä½æ˜¯ 2 (è®²å¸ˆ), 3 (å­¦å·¥ä¸»ç®¡), 4 (æ•™ç ”ä¸»ç®¡) çš„å‘˜å·¥ä¿¡æ¯</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- æ–¹å¼1ï¼šä½¿ç”¨orè¿æ¥å¤šä¸ªæ¡ä»¶select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_empwhere job=2 or job=3 or job=4;-- æ–¹å¼2ï¼šinå…³é”®å­—select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_empwhere job in (2,3,4);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206141451342.png"></p><p>æ¡ˆä¾‹9ï¼šæŸ¥è¯¢ å§“å ä¸ºä¸¤ä¸ªå­—çš„å‘˜å·¥ä¿¡æ¯</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_empwhere name like '__';  # é€šé…ç¬¦ "_" ä»£è¡¨ä»»æ„1ä¸ªå­—ç¬¦<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206141937293.png"></p><p>æ¡ˆä¾‹10ï¼šæŸ¥è¯¢ å§“ â€˜å¼ â€™ çš„å‘˜å·¥ä¿¡æ¯</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_empwhere name like 'å¼ %'; # é€šé…ç¬¦ "%" ä»£è¡¨ä»»æ„ä¸ªå­—ç¬¦ï¼ˆ0ä¸ª ~ å¤šä¸ªï¼‰<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206142156154.png"></p><h3 id="1-5-èšåˆå‡½æ•°"><a href="#1-5-èšåˆå‡½æ•°" class="headerlink" title="1.5 èšåˆå‡½æ•°"></a>1.5 èšåˆå‡½æ•°</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241130192230516.png"></p><p>ä¹‹å‰æˆ‘ä»¬åšçš„æŸ¥è¯¢éƒ½æ˜¯æ¨ªå‘æŸ¥è¯¢ï¼Œå°±æ˜¯æ ¹æ®æ¡ä»¶ä¸€è¡Œä¸€è¡Œçš„è¿›è¡Œåˆ¤æ–­ï¼Œè€Œä½¿ç”¨èšåˆå‡½æ•°æŸ¥è¯¢å°±æ˜¯çºµå‘æŸ¥è¯¢ï¼Œå®ƒæ˜¯å¯¹ä¸€åˆ—çš„å€¼è¿›è¡Œè®¡ç®—ï¼Œç„¶åè¿”å›ä¸€ä¸ªç»“æœå€¼ã€‚ï¼ˆå°†ä¸€åˆ—æ•°æ®ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œè¿›è¡Œçºµå‘è®¡ç®—ï¼‰</p><p>è¯­æ³•ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select  èšåˆå‡½æ•°(å­—æ®µåˆ—è¡¨)  from  è¡¨å ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>æ³¨æ„ : èšåˆå‡½æ•°ä¼šå¿½ç•¥ç©ºå€¼ï¼Œå¯¹NULLå€¼ä¸ä½œä¸ºç»Ÿè®¡ã€‚</p></blockquote><p>å¸¸ç”¨èšåˆå‡½æ•°ï¼š</p><table><thead><tr><th><strong>å‡½æ•°</strong></th><th><strong>åŠŸèƒ½</strong></th></tr></thead><tbody><tr><td>count</td><td>ç»Ÿè®¡æ•°é‡</td></tr><tr><td>max</td><td>æœ€å¤§å€¼</td></tr><tr><td>min</td><td>æœ€å°å€¼</td></tr><tr><td>avg</td><td>å¹³å‡å€¼</td></tr><tr><td>sum</td><td>æ±‚å’Œ</td></tr></tbody></table><blockquote><p>count ï¼šæŒ‰ç…§åˆ—å»ç»Ÿè®¡æœ‰å¤šå°‘è¡Œæ•°æ®ã€‚</p><ul><li>åœ¨æ ¹æ®æŒ‡å®šçš„åˆ—ç»Ÿè®¡çš„æ—¶å€™ï¼Œå¦‚æœè¿™ä¸€åˆ—ä¸­æœ‰nullçš„è¡Œï¼Œè¯¥è¡Œä¸ä¼šè¢«ç»Ÿè®¡åœ¨å…¶ä¸­ã€‚</li></ul><p>sum ï¼šè®¡ç®—æŒ‡å®šåˆ—çš„æ•°å€¼å’Œï¼Œå¦‚æœä¸æ˜¯æ•°å€¼ç±»å‹ï¼Œé‚£ä¹ˆè®¡ç®—ç»“æœä¸º0</p><p>max ï¼šè®¡ç®—æŒ‡å®šåˆ—çš„æœ€å¤§å€¼</p><p>min ï¼šè®¡ç®—æŒ‡å®šåˆ—çš„æœ€å°å€¼</p><p>avg ï¼šè®¡ç®—æŒ‡å®šåˆ—çš„å¹³å‡å€¼</p></blockquote><p>æ¡ˆä¾‹1ï¼šç»Ÿè®¡è¯¥ä¼ä¸šå‘˜å·¥æ•°é‡</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql"># count(å­—æ®µ)select count(id) from tb_emp;-- ç»“æœï¼š29select count(job) from tb_emp;-- ç»“æœï¼š28 ï¼ˆèšåˆå‡½æ•°å¯¹NULLå€¼ä¸åšè®¡ç®—ï¼‰# count(å¸¸é‡)select count(0) from tb_emp;select count('A') from tb_emp;# count(*)  æ¨èæ­¤å†™æ³•ï¼ˆMySQLåº•å±‚è¿›è¡Œäº†ä¼˜åŒ–ï¼‰select count(*) from tb_emp;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¡ˆä¾‹2ï¼šç»Ÿè®¡è¯¥ä¼ä¸šæœ€æ—©å…¥èŒçš„å‘˜å·¥</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select min(entrydate) from tb_emp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206160145339.png"></p><p>æ¡ˆä¾‹3ï¼šç»Ÿè®¡è¯¥ä¼ä¸šæœ€è¿Ÿå…¥èŒçš„å‘˜å·¥</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select max(entrydate) from tb_emp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206160307416.png"></p><p>æ¡ˆä¾‹4ï¼šç»Ÿè®¡è¯¥ä¼ä¸šå‘˜å·¥ ID çš„å¹³å‡å€¼</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select avg(id) from tb_emp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206160416605.png"></p><p>æ¡ˆä¾‹5ï¼šç»Ÿè®¡è¯¥ä¼ä¸šå‘˜å·¥çš„ ID ä¹‹å’Œ</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select sum(id) from tb_emp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206160604073.png"></p><h3 id="1-6-åˆ†ç»„æŸ¥è¯¢"><a href="#1-6-åˆ†ç»„æŸ¥è¯¢" class="headerlink" title="1.6 åˆ†ç»„æŸ¥è¯¢"></a>1.6 åˆ†ç»„æŸ¥è¯¢</h3><p>åˆ†ç»„ï¼š æŒ‰ç…§æŸä¸€åˆ—æˆ–è€…æŸå‡ åˆ—ï¼ŒæŠŠç›¸åŒçš„æ•°æ®è¿›è¡Œåˆå¹¶è¾“å‡ºã€‚</p><blockquote><p>åˆ†ç»„å…¶å®å°±æ˜¯æŒ‰åˆ—è¿›è¡Œåˆ†ç±»(æŒ‡å®šåˆ—ä¸‹ç›¸åŒçš„æ•°æ®å½’ä¸ºä¸€ç±»)ï¼Œç„¶åå¯ä»¥å¯¹åˆ†ç±»å®Œçš„æ•°æ®è¿›è¡Œåˆå¹¶è®¡ç®—ã€‚</p><p>åˆ†ç»„æŸ¥è¯¢é€šå¸¸ä¼šä½¿ç”¨èšåˆå‡½æ•°è¿›è¡Œè®¡ç®—ã€‚</p></blockquote><p>è¯­æ³•ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select  å­—æ®µåˆ—è¡¨  from  è¡¨å  [where æ¡ä»¶]  group by åˆ†ç»„å­—æ®µå  [having åˆ†ç»„åè¿‡æ»¤æ¡ä»¶];<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹1ï¼šæ ¹æ®æ€§åˆ«åˆ†ç»„ , ç»Ÿè®¡ç”·æ€§å’Œå¥³æ€§å‘˜å·¥çš„æ•°é‡</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select gender, count(*)from tb_empgroup by gender; -- æŒ‰ç…§genderå­—æ®µè¿›è¡Œåˆ†ç»„ï¼ˆgenderå­—æ®µä¸‹ç›¸åŒçš„æ•°æ®å½’ä¸ºä¸€ç»„ï¼‰<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206172615000.png"></p><p>æ¡ˆä¾‹2ï¼šæŸ¥è¯¢å…¥èŒæ—¶é—´åœ¨ â€˜2015-01-01â€™ (åŒ…å«) ä»¥å‰çš„å‘˜å·¥ , å¹¶å¯¹ç»“æœæ ¹æ®èŒä½åˆ†ç»„ , è·å–å‘˜å·¥æ•°é‡å¤§äºç­‰äº2çš„èŒä½</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select job, count(*)from tb_empwhere entrydate &lt;= '2015-01-01'   -- åˆ†ç»„å‰æ¡ä»¶group by job                      -- æŒ‰ç…§jobå­—æ®µåˆ†ç»„having count(*) &gt;= 2;             -- åˆ†ç»„åæ¡ä»¶<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206172431873.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241130194159540.png" alt="æ€»ç»“"></p><blockquote><p>æ³¨æ„äº‹é¡¹:</p><p>â€‹â€¢ åˆ†ç»„ä¹‹åï¼ŒæŸ¥è¯¢çš„å­—æ®µä¸€èˆ¬ä¸ºèšåˆå‡½æ•°å’Œåˆ†ç»„å­—æ®µï¼ŒæŸ¥è¯¢å…¶ä»–å­—æ®µæ— ä»»ä½•æ„ä¹‰</p><p>â€‹â€¢ æ‰§è¡Œé¡ºåºï¼šwhere &gt; èšåˆå‡½æ•° &gt; having </p></blockquote><p><strong>whereä¸havingåŒºåˆ«ï¼ˆé¢è¯•é¢˜ï¼‰</strong></p><ul><li>æ‰§è¡Œæ—¶æœºä¸åŒï¼šwhereæ˜¯åˆ†ç»„ä¹‹å‰è¿›è¡Œè¿‡æ»¤ï¼Œä¸æ»¡è¶³whereæ¡ä»¶ï¼Œä¸å‚ä¸åˆ†ç»„ï¼›è€Œhavingæ˜¯åˆ†ç»„ä¹‹åå¯¹ç»“æœè¿›è¡Œè¿‡æ»¤ã€‚</li><li>åˆ¤æ–­æ¡ä»¶ä¸åŒï¼šwhereä¸èƒ½å¯¹èšåˆå‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼Œè€Œhavingå¯ä»¥ã€‚</li></ul><h3 id="1-7-æ’åºæŸ¥è¯¢"><a href="#1-7-æ’åºæŸ¥è¯¢" class="headerlink" title="1.7 æ’åºæŸ¥è¯¢"></a>1.7 æ’åºæŸ¥è¯¢</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241130194248214.png"></p><p>æ’åºåœ¨æ—¥å¸¸å¼€å‘ä¸­æ˜¯éå¸¸å¸¸è§çš„ä¸€ä¸ªæ“ä½œï¼Œæœ‰å‡åºæ’åºï¼Œä¹Ÿæœ‰é™åºæ’åºã€‚</p><p>è¯­æ³•ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select  å­—æ®µåˆ—è¡¨  from   è¡¨å   [where  æ¡ä»¶åˆ—è¡¨] [group by  åˆ†ç»„å­—æ®µ ] order  by  å­—æ®µ1  æ’åºæ–¹å¼1 , å­—æ®µ2  æ’åºæ–¹ å¼2 â€¦ ;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>æ’åºæ–¹å¼ï¼š</p><ul><li><p>ASC ï¼šå‡åºï¼ˆé»˜è®¤å€¼ï¼‰</p></li><li><p>DESCï¼šé™åº</p></li></ul></li></ul><p>æ¡ˆä¾‹1ï¼šæ ¹æ®å…¥èŒæ—¶é—´, å¯¹å‘˜å·¥è¿›è¡Œå‡åºæ’åº</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_emporder by entrydate ASC; -- æŒ‰ç…§entrydateå­—æ®µä¸‹çš„æ•°æ®è¿›è¡Œå‡åºæ’åºselect id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_emporder by  entrydate; -- é»˜è®¤å°±æ˜¯ASCï¼ˆå‡åºï¼‰<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206175720337.png"></p><blockquote><p>æ³¨æ„äº‹é¡¹ï¼šå¦‚æœæ˜¯å‡åº, å¯ä»¥ä¸æŒ‡å®šæ’åºæ–¹å¼ASC </p></blockquote><p>æ¡ˆä¾‹2ï¼šæ ¹æ®å…¥èŒæ—¶é—´ï¼Œå¯¹å‘˜å·¥è¿›è¡Œé™åºæ’åº</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_emporder by entrydate DESC; -- æŒ‰ç…§entrydateå­—æ®µä¸‹çš„æ•°æ®è¿›è¡Œé™åºæ’åº<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206180358367.png"></p><p>æ¡ˆä¾‹3ï¼šæ ¹æ®å…¥èŒæ—¶é—´å¯¹å…¬å¸çš„å‘˜å·¥è¿›è¡Œå‡åºæ’åºï¼Œå…¥èŒæ—¶é—´ç›¸åŒï¼Œå†æŒ‰ç…§æ›´æ–°æ—¶é—´è¿›è¡Œé™åºæ’åº</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_emporder by entrydate ASC , update_time DESC;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206180824583.png"></p><blockquote><p>æ³¨æ„äº‹é¡¹ï¼šå¦‚æœæ˜¯å¤šå­—æ®µæ’åºï¼Œå½“ç¬¬ä¸€ä¸ªå­—æ®µå€¼ç›¸åŒæ—¶ï¼Œæ‰ä¼šæ ¹æ®ç¬¬äºŒä¸ªå­—æ®µè¿›è¡Œæ’åº </p></blockquote><h3 id="1-8-åˆ†é¡µæŸ¥è¯¢"><a href="#1-8-åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="1.8 åˆ†é¡µæŸ¥è¯¢"></a>1.8 åˆ†é¡µæŸ¥è¯¢</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241130195816833.png"></p><p>åˆ†é¡µæ“ä½œåœ¨ä¸šåŠ¡ç³»ç»Ÿå¼€å‘æ—¶ï¼Œä¹Ÿæ˜¯éå¸¸å¸¸è§çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œæ—¥å¸¸æˆ‘ä»¬åœ¨ç½‘ç«™ä¸­çœ‹åˆ°çš„å„ç§å„æ ·çš„åˆ†é¡µæ¡ï¼Œåå°ä¹Ÿéƒ½éœ€è¦å€ŸåŠ©äºæ•°æ®åº“çš„åˆ†é¡µæ“ä½œã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206183310586.png"></p><p>åˆ†é¡µæŸ¥è¯¢è¯­æ³•ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span>  å­—æ®µåˆ—è¡¨  <span class="token keyword">from</span>   è¡¨å  <span class="token keyword">limit</span>  èµ·å§‹ç´¢å¼•<span class="token punctuation">,</span> æŸ¥è¯¢è®°å½•æ•° <span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹1ï¼šä»èµ·å§‹ç´¢å¼•0å¼€å§‹æŸ¥è¯¢å‘˜å·¥æ•°æ®, æ¯é¡µå±•ç¤º5æ¡è®°å½•</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_emplimit 0 , 5; -- ä»ç´¢å¼•0å¼€å§‹ï¼Œå‘åå–5æ¡è®°å½•<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206185257834.png"></p><p>æ¡ˆä¾‹2ï¼šæŸ¥è¯¢ ç¬¬1é¡µ å‘˜å·¥æ•°æ®, æ¯é¡µå±•ç¤º5æ¡è®°å½•</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_emplimit 5; -- å¦‚æœæŸ¥è¯¢çš„æ˜¯ç¬¬1é¡µæ•°æ®ï¼Œèµ·å§‹ç´¢å¼•å¯ä»¥çœç•¥ï¼Œç›´æ¥ç®€å†™ä¸ºï¼šlimit æ¡æ•°<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206184957410.png"></p><p>æ¡ˆä¾‹3ï¼šæŸ¥è¯¢ ç¬¬2é¡µ å‘˜å·¥æ•°æ®, æ¯é¡µå±•ç¤º5æ¡è®°å½•</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_emplimit 5 , 5; -- ä»ç´¢å¼•5å¼€å§‹ï¼Œå‘åå–5æ¡è®°å½•<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206184602569.png"></p><p>æ¡ˆä¾‹4ï¼šæŸ¥è¯¢ ç¬¬3é¡µ å‘˜å·¥æ•°æ®, æ¯é¡µå±•ç¤º5æ¡è®°å½•</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_emplimit 10 , 5; -- ä»ç´¢å¼•10å¼€å§‹ï¼Œå‘åå–5æ¡è®°å½•<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206184414356.png"></p><blockquote><p>æ³¨æ„äº‹é¡¹:</p><ol><li><p>èµ·å§‹ç´¢å¼•ä»0å¼€å§‹ã€‚        è®¡ç®—å…¬å¼ ï¼š   èµ·å§‹ç´¢å¼• = ï¼ˆæŸ¥è¯¢é¡µç  - 1ï¼‰* æ¯é¡µæ˜¾ç¤ºè®°å½•æ•°</p></li><li><p>åˆ†é¡µæŸ¥è¯¢æ˜¯æ•°æ®åº“çš„æ–¹è¨€ï¼Œä¸åŒçš„æ•°æ®åº“æœ‰ä¸åŒçš„å®ç°ï¼ŒMySQLä¸­æ˜¯LIMIT</p></li><li><p>å¦‚æœæŸ¥è¯¢çš„æ˜¯ç¬¬ä¸€é¡µæ•°æ®ï¼Œèµ·å§‹ç´¢å¼•å¯ä»¥çœç•¥ï¼Œç›´æ¥ç®€å†™ä¸º limit  æ¡æ•°</p></li></ol></blockquote><h3 id="1-9-æ¡ˆä¾‹"><a href="#1-9-æ¡ˆä¾‹" class="headerlink" title="1.9 æ¡ˆä¾‹"></a>1.9 æ¡ˆä¾‹</h3><p>DQLçš„åŸºæœ¬è¯­æ³•æˆ‘ä»¬å­¦ä¹ ç»“æŸäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¿ç”¨æ‰€æŒæ¡çš„DQLè¯­å¥çš„è¯­æ³•æ¥å®Œæˆä¸¤ä¸ªæ¡ˆä¾‹ã€‚</p><h4 id="1-9-1-æ¡ˆä¾‹ä¸€"><a href="#1-9-1-æ¡ˆä¾‹ä¸€" class="headerlink" title="1.9.1 æ¡ˆä¾‹ä¸€"></a>1.9.1 æ¡ˆä¾‹ä¸€</h4><p>æ¡ˆä¾‹ï¼šæ ¹æ®éœ€æ±‚å®Œæˆå‘˜å·¥ç®¡ç†çš„æ¡ä»¶åˆ†é¡µæŸ¥è¯¢</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206212240773.png"></p><blockquote><p>åˆ†æï¼šæ ¹æ®è¾“å…¥çš„æ¡ä»¶ï¼ŒæŸ¥è¯¢ç¬¬1é¡µæ•°æ®</p><ol><li><p>åœ¨å‘˜å·¥ç®¡ç†çš„åˆ—è¡¨ä¸Šæ–¹æœ‰ä¸€äº›æŸ¥è¯¢æ¡ä»¶ï¼šå‘˜å·¥å§“åã€å‘˜å·¥æ€§åˆ«ï¼Œå‘˜å·¥å…¥èŒæ—¶é—´(å¼€å§‹æ—¶é—´~ç»“æŸæ—¶é—´)</p><ul><li>å§“åï¼šå¼ </li><li>æ€§åˆ«ï¼šç”·</li><li>å…¥èŒæ—¶é—´ï¼š2000-01-01  ~  2015-12-31</li></ul></li><li><p>é™¤äº†æŸ¥è¯¢æ¡ä»¶å¤–ï¼Œåœ¨åˆ—è¡¨çš„ä¸‹é¢è¿˜æœ‰ä¸€ä¸ªåˆ†é¡µæ¡ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†åˆ†é¡µæŸ¥è¯¢</p><ul><li>æŸ¥è¯¢ç¬¬1é¡µæ•°æ®ï¼ˆæ¯é¡µæ˜¾ç¤º10æ¡æ•°æ®ï¼‰</li></ul></li><li><p>åŸºäºæŸ¥è¯¢çš„ç»“æœï¼ŒæŒ‰ç…§ä¿®æ”¹æ—¶é—´è¿›è¡Œé™åºæ’åº</p></li></ol><p>ç»“è®ºï¼šæ¡ä»¶æŸ¥è¯¢ + åˆ†é¡µæŸ¥è¯¢ + æ’åºæŸ¥è¯¢</p></blockquote><p>SQLè¯­å¥ä»£ç ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- æ ¹æ®è¾“å…¥æ¡ä»¶æŸ¥è¯¢ç¬¬1é¡µæ•°æ®ï¼ˆæ¯é¡µå±•ç¤º10æ¡è®°å½•ï¼‰-- è¾“å…¥æ¡ä»¶ï¼š   -- å§“åï¼šå¼  ï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼‰   -- æ€§åˆ«ï¼šç”·   -- å…¥èŒæ—¶é—´ï¼š2000-01-01 ~ 2015-12-31-- åˆ†é¡µï¼š 0 , 10-- æ’åºï¼š ä¿®æ”¹æ—¶é—´  DESCselect id, username, password, name, gender, image, job, entrydate, create_time, update_timefrom tb_empwhere name like 'å¼ %' and gender = 1 and entrydate between '2000-01-01' and '2015-12-31'order by update_time desclimit 0 , 10;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206213235786.png"></p><h4 id="1-9-2-æ¡ˆä¾‹äºŒ"><a href="#1-9-2-æ¡ˆä¾‹äºŒ" class="headerlink" title="1.9.2 æ¡ˆä¾‹äºŒ"></a>1.9.2 æ¡ˆä¾‹äºŒ</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241130202141061.png" alt="å¤æ‚åˆ†ç±»"></p><p>æ¡ˆä¾‹ï¼šæ ¹æ®éœ€æ±‚å®Œæˆå‘˜å·¥ä¿¡æ¯çš„ç»Ÿè®¡</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206210536118.png"></p><blockquote><p>åˆ†æï¼šä»¥ä¸Šä¿¡æ¯ç»Ÿè®¡åœ¨å¼€å‘ä¸­ä¹Ÿå«å›¾å½¢æŠ¥è¡¨(å°†ç»Ÿè®¡å¥½çš„æ•°æ®ä»¥å¯è§†åŒ–çš„å½¢å¼å±•ç¤ºå‡ºæ¥)</p><ul><li>å‘˜å·¥æ€§åˆ«ç»Ÿè®¡ï¼šä»¥é¥¼çŠ¶å›¾çš„å½¢å¼å±•ç¤ºå‡ºä¼ä¸šç”·æ€§å‘˜äººæ•°å’Œå¥³æ€§å‘˜å·¥äººæ•°<ul><li>åªè¦æŸ¥è¯¢å‡ºç”·æ€§å‘˜å·¥å’Œå¥³æ€§å‘˜å·¥å„è‡ªæœ‰å¤šå°‘äººå°±å¯ä»¥äº†</li></ul></li><li>å‘˜å·¥èŒä½ç»Ÿè®¡ï¼šä»¥æŸ±çŠ¶å›¾çš„å½¢å¼å±•ç¤ºå„èŒä½çš„åœ¨å²—äººæ•°<ul><li>åªè¦æŸ¥è¯¢å‡ºå„ä¸ªèŒä½æœ‰å¤šå°‘äººå°±å¯ä»¥äº†</li></ul></li></ul></blockquote><p>å‘˜å·¥æ€§åˆ«ç»Ÿè®¡ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- if(æ¡ä»¶è¡¨è¾¾å¼, trueå–å€¼ , falseå–å€¼)select if(gender=1,'ç”·æ€§å‘˜å·¥','å¥³æ€§å‘˜å·¥') AS æ€§åˆ«, count(*) AS äººæ•°from tb_empgroup by gender;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206220908397.png"></p><blockquote><p>if(è¡¨è¾¾å¼, tvalue, fvalue) ï¼šå½“è¡¨è¾¾å¼ä¸ºtrueæ—¶ï¼Œå–å€¼tvalueï¼›å½“è¡¨è¾¾å¼ä¸ºfalseæ—¶ï¼Œå–å€¼fvalue</p></blockquote><p>å‘˜å·¥èŒä½ç»Ÿè®¡ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- case è¡¨è¾¾å¼ when å€¼1 then ç»“æœ1  when å€¼2  then  ç»“æœ2 ...  else  result  endselect (case job             when 1 then 'ç­ä¸»ä»»'             when 2 then 'è®²å¸ˆ'             when 3 then 'å­¦å·¥ä¸»ç®¡'             when 4 then 'æ•™ç ”ä¸»ç®¡'             else 'æœªåˆ†é…èŒä½'        end) AS èŒä½ ,       count(*) AS äººæ•°from tb_empgroup by job;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206221718731.png"></p><blockquote><p>case   è¡¨è¾¾å¼    when   å€¼1   then  ç»“æœ1   [when å€¼2  then  ç»“æœ2 â€¦]     [else result]     end</p></blockquote><h2 id="2-å¤šè¡¨è®¾è®¡"><a href="#2-å¤šè¡¨è®¾è®¡" class="headerlink" title="2. å¤šè¡¨è®¾è®¡"></a>2. å¤šè¡¨è®¾è®¡</h2><p>å…³äºå•è¡¨çš„æ“ä½œ(å•è¡¨çš„è®¾è®¡ã€å•è¡¨çš„å¢åˆ æ”¹æŸ¥)æˆ‘ä»¬å°±å·²ç»å­¦ä¹ å®Œäº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦æ¥å­¦ä¹ å¤šè¡¨çš„æ“ä½œï¼Œé¦–å…ˆæ¥å­¦ä¹ å¤šè¡¨çš„è®¾è®¡ã€‚</p><p>é¡¹ç›®å¼€å‘ä¸­ï¼Œåœ¨è¿›è¡Œæ•°æ®åº“è¡¨ç»“æ„è®¾è®¡æ—¶ï¼Œä¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚åŠä¸šåŠ¡æ¨¡å—ä¹‹é—´çš„å…³ç³»ï¼Œåˆ†æå¹¶è®¾è®¡è¡¨ç»“æ„ï¼Œç”±äºä¸šåŠ¡ä¹‹é—´ç›¸äº’å…³è”ï¼Œæ‰€ä»¥å„ä¸ªè¡¨ç»“æ„ä¹‹é—´ä¹Ÿå­˜åœ¨ç€å„ç§è”ç³»ï¼ŒåŸºæœ¬ä¸Šåˆ†ä¸ºä¸‰ç§ï¼š</p><ul><li><p>ä¸€å¯¹å¤š(å¤šå¯¹ä¸€)</p></li><li><p>å¤šå¯¹å¤š</p></li><li><p>ä¸€å¯¹ä¸€</p></li></ul><h3 id="2-1-ä¸€å¯¹å¤š"><a href="#2-1-ä¸€å¯¹å¤š" class="headerlink" title="2.1 ä¸€å¯¹å¤š"></a>2.1 ä¸€å¯¹å¤š</h3><h4 id="2-1-1-è¡¨è®¾è®¡"><a href="#2-1-1-è¡¨è®¾è®¡" class="headerlink" title="2.1.1 è¡¨è®¾è®¡"></a>2.1.1 è¡¨è®¾è®¡</h4><p>éœ€æ±‚ï¼šæ ¹æ®é¡µé¢åŸå‹åŠéœ€æ±‚æ–‡æ¡£ ï¼Œå®Œæˆéƒ¨é—¨åŠå‘˜å·¥çš„è¡¨ç»“æ„è®¾è®¡</p><ul><li>å‘˜å·¥ç®¡ç†é¡µé¢åŸå‹ï¼šï¼ˆå‰é¢å·²å®Œæˆtb_empè¡¨ç»“æ„è®¾è®¡ï¼‰</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220831195520739.png"></p><ul><li>éƒ¨é—¨ç®¡ç†é¡µé¢åŸå‹ï¼š</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220831195603106.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206224149094.png"></p><blockquote><p>ç»è¿‡ä¸Šè¿°åˆ†æï¼Œç°å·²æ˜ç¡®çš„éƒ¨é—¨è¡¨ç»“æ„ï¼š</p><ul><li>ä¸šåŠ¡å­—æ®µ ï¼š éƒ¨é—¨åç§°</li><li>åŸºç¡€å­—æ®µ ï¼š id(ä¸»é”®)ã€åˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´</li></ul></blockquote><p>éƒ¨é—¨è¡¨ - SQLè¯­å¥ï¼š </p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql"># å»ºè®®ï¼šåˆ›å»ºæ–°çš„æ•°æ®åº“ï¼ˆå¤šè¡¨è®¾è®¡å­˜æ”¾åœ¨æ–°æ•°æ®åº“ä¸‹ï¼‰create database db03;use db03;-- éƒ¨é—¨è¡¨create table tb_dept(    id int unsigned primary key auto_increment comment 'ä¸»é”®ID',    name varchar(10) not null unique  comment 'éƒ¨é—¨åç§°',    create_time datetime not null comment 'åˆ›å»ºæ—¶é—´',    update_time datetime not null comment 'ä¿®æ”¹æ—¶é—´') comment 'éƒ¨é—¨è¡¨';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éƒ¨é—¨è¡¨åˆ›å»ºå¥½ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å†ä¿®æ”¹ä¸‹å‘˜å·¥è¡¨ã€‚ä¸ºä»€ä¹ˆè¦ä¿®æ”¹å‘˜å·¥è¡¨å‘¢ï¼Ÿæ˜¯å› ä¸ºæˆ‘ä»¬ä¹‹å‰è®¾è®¡å‘˜å·¥è¡¨(å•è¡¨)çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰è€ƒè™‘å‘˜å·¥çš„å½’å±éƒ¨é—¨ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206224642902.png"></p><p>å‘˜å·¥è¡¨ï¼šæ·»åŠ å½’å±éƒ¨é—¨å­—æ®µ</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- å‘˜å·¥è¡¨create table tb_emp(    id          int unsigned primary key auto_increment comment 'ID',    username    varchar(20)      not null unique comment 'ç”¨æˆ·å',    password    varchar(32) default '123456' comment 'å¯†ç ',    name        varchar(10)      not null comment 'å§“å',    gender      tinyint unsigned not null comment 'æ€§åˆ«, è¯´æ˜: 1 ç”·, 2 å¥³',    image       varchar(300) comment 'å›¾åƒ',    job         tinyint unsigned comment 'èŒä½, è¯´æ˜: 1 ç­ä¸»ä»»,2 è®²å¸ˆ, 3 å­¦å·¥ä¸»ç®¡, 4 æ•™ç ”ä¸»ç®¡',    entrydate   date comment 'å…¥èŒæ—¶é—´',        dept_id     int unsigned comment 'éƒ¨é—¨ID', -- å‘˜å·¥çš„å½’å±éƒ¨é—¨        create_time datetime         not null comment 'åˆ›å»ºæ—¶é—´',    update_time datetime         not null comment 'ä¿®æ”¹æ—¶é—´') comment 'å‘˜å·¥è¡¨';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•æ•°æ®ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- éƒ¨é—¨è¡¨æµ‹è¯•æ•°æ®insert into tb_dept (id, name, create_time, update_time) values(1,'å­¦å·¥éƒ¨',now(),now()),(2,'æ•™ç ”éƒ¨',now(),now()),(3,'å’¨è¯¢éƒ¨',now(),now()),(4,'å°±ä¸šéƒ¨',now(),now()),(5,'äººäº‹éƒ¨',now(),now());-- å‘˜å·¥è¡¨æµ‹è¯•æ•°æ®INSERT INTO tb_emp(id, username, password, name, gender, image, job, entrydate,dept_id, create_time, update_time) VALUES(1,'jinyong','123456','é‡‘åº¸',1,'1.jpg',4,'2000-01-01',2,now(),now()),(2,'zhangwuji','123456','å¼ æ— å¿Œ',1,'2.jpg',2,'2015-01-01',2,now(),now()),(3,'yangxiao','123456','æ¨é€',1,'3.jpg',2,'2008-05-01',2,now(),now()),(4,'weiyixiao','123456','éŸ¦ä¸€ç¬‘',1,'4.jpg',2,'2007-01-01',2,now(),now()),(5,'changyuchun','123456','å¸¸é‡æ˜¥',1,'5.jpg',2,'2012-12-05',2,now(),now()),(6,'xiaozhao','123456','å°æ˜­',2,'6.jpg',3,'2013-09-05',1,now(),now()),(7,'jixiaofu','123456','çºªæ™“èŠ™',2,'7.jpg',1,'2005-08-01',1,now(),now()),(8,'zhouzhiruo','123456','å‘¨èŠ·è‹¥',2,'8.jpg',1,'2014-11-09',1,now(),now()),(9,'dingminjun','123456','ä¸æ•å›',2,'9.jpg',1,'2011-03-11',1,now(),now()),(10,'zhaomin','123456','èµµæ•',2,'10.jpg',1,'2013-09-05',1,now(),now()),(11,'luzhangke','123456','é¹¿æ–å®¢',1,'11.jpg',1,'2007-02-01',1,now(),now()),(12,'hebiweng','123456','é¹¤ç¬”ç¿',1,'12.jpg',1,'2008-08-18',1,now(),now()),(13,'fangdongbai','123456','æ–¹ä¸œç™½',1,'13.jpg',2,'2012-11-01',2,now(),now()),(14,'zhangsanfeng','123456','å¼ ä¸‰ä¸°',1,'14.jpg',2,'2002-08-01',2,now(),now()),(15,'yulianzhou','123456','ä¿è²èˆŸ',1,'15.jpg',2,'2011-05-01',2,now(),now()),(16,'songyuanqiao','123456','å®‹è¿œæ¡¥',1,'16.jpg',2,'2010-01-01',2,now(),now()),(17,'chenyouliang','123456','é™ˆå‹è°…',1,'17.jpg',NULL,'2015-03-21',NULL,now(),now());<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å‘˜å·¥è¡¨ - éƒ¨é—¨è¡¨ä¹‹é—´çš„å…³ç³»ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206230156403.png"></p><blockquote><p><strong>ä¸€å¯¹å¤šå…³ç³»å®ç°ï¼šåœ¨æ•°æ®åº“è¡¨ä¸­å¤šçš„ä¸€æ–¹ï¼Œæ·»åŠ å­—æ®µï¼Œæ¥å…³è”å±äºä¸€è¿™æ–¹çš„ä¸»é”®ã€‚</strong></p></blockquote><h4 id="2-1-2-å¤–é”®çº¦æŸ"><a href="#2-1-2-å¤–é”®çº¦æŸ" class="headerlink" title="2.1.2 å¤–é”®çº¦æŸ"></a>2.1.2 å¤–é”®çº¦æŸ</h4><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">alter table è¡¨å    add constraint å¤–é”®åç§°         foreign key (å¤–é”®å­—æ®µå) references ä¸»è¡¨ (å­—æ®µå);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241130205540565.png" alt="å¤–é”®çº¦æŸ"></p><ul><li><p>ä¸€ä¸ªéƒ¨é—¨å¯ä»¥æœ‰å¤šåå‘˜å·¥ï¼Œä¸€ä¸ªå‘˜å·¥åªå¯ä»¥å½’å±äºä¸€ä¸ªéƒ¨é—¨ã€‚</p></li><li><p>å¤šçš„ä¸€æ–¹æ·»åŠ å¤–é”®ï¼Œå…³è”ä¸»é”®ã€‚</p></li><li><p>å‘˜å·¥è¡¨å…³è”éƒ¨é—¨è¡¨ã€‚</p></li><li><p>åœ¨å‘˜å·¥è¡¨ä¸Šæ·»åŠ å¤–é”® ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">alter table tb_emp    add constraint tb_emp_fk_dept_id        foreign key (dept_id) references tb_dept (id);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241130212228183.png" alt="æ¨èé€»è¾‘å¤–é”®"></p><p><strong>é—®é¢˜</strong></p><ul><li>è¡¨ç»“æ„åˆ›å»ºå®Œæ¯•åï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸¤å¼ è¡¨çš„æ•°æ®åˆ†åˆ«ä¸ºï¼š</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220831201844375.png"> </p><p>ç°åœ¨å‘˜å·¥è¡¨ä¸­æœ‰äº”ä¸ªå‘˜å·¥éƒ½å½’å±äº1å·éƒ¨é—¨(å­¦å·¥éƒ¨)ï¼Œå½“åˆ é™¤äº†1å·éƒ¨é—¨åï¼Œæ•°æ®å˜ä¸ºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220831202111247.png"> </p><p>1å·éƒ¨é—¨è¢«åˆ é™¤äº†ï¼Œä½†æ˜¯ä¾ç„¶è¿˜æœ‰5ä¸ªå‘˜å·¥æ˜¯å±äº1å·éƒ¨é—¨çš„ã€‚ æ­¤æ—¶ï¼šå°±å‡ºç°æ•°æ®çš„ä¸å®Œæ•´ã€ä¸ä¸€è‡´äº†ã€‚ </p><p><strong>é—®é¢˜åˆ†æ</strong></p><p>ç›®å‰ä¸Šè¿°çš„ä¸¤å¼ è¡¨(å‘˜å·¥è¡¨ã€éƒ¨é—¨è¡¨)ï¼Œåœ¨æ•°æ®åº“å±‚é¢ï¼Œå¹¶æœªå»ºç«‹å…³è”ï¼Œæ‰€ä»¥æ˜¯æ— æ³•ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§çš„</p><p><strong>é—®é¢˜è§£å†³</strong></p><p>æƒ³è§£å†³ä¸Šè¿°çš„é—®é¢˜å‘¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ•°æ®åº“ä¸­çš„ <strong>å¤–é”®çº¦æŸ</strong> æ¥è§£å†³ã€‚</p><blockquote><p>å¤–é”®çº¦æŸï¼šè®©ä¸¤å¼ è¡¨çš„æ•°æ®å»ºç«‹è¿æ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚  </p><p>å¯¹åº”çš„å…³é”®å­—ï¼šforeign key</p></blockquote><p>å¤–é”®çº¦æŸçš„è¯­æ³•ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- åˆ›å»ºè¡¨æ—¶æŒ‡å®šcreate table è¡¨å(å­—æ®µå    æ•°æ®ç±»å‹,...[constraint]   [å¤–é”®åç§°]  foreign  key (å¤–é”®å­—æ®µå)   references   ä¸»è¡¨ (ä¸»è¡¨åˆ—å));-- å»ºå®Œè¡¨åï¼Œæ·»åŠ å¤–é”®alter table  è¡¨å  add constraint  å¤–é”®åç§°  foreign key(å¤–é”®å­—æ®µå) references ä¸»è¡¨(ä¸»è¡¨åˆ—å);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä¸ºå‘˜å·¥è¡¨çš„dept_id å»ºç«‹å¤–é”®çº¦æŸï¼Œæ¥å…³è”éƒ¨é—¨è¡¨çš„ä¸»é”®ã€‚</p><p>æ–¹å¼1ï¼šé€šè¿‡SQLè¯­å¥æ“ä½œ</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- ä¿®æ”¹è¡¨ï¼š æ·»åŠ å¤–é”®çº¦æŸalter table tb_emp  add  constraint  fk_dept_id  foreign key (dept_id)  references  tb_dept(id);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ–¹å¼2ï¼šå›¾å½¢åŒ–ç•Œé¢æ“ä½œ</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206232750376.png"> </p><blockquote><p>å½“æˆ‘ä»¬æ·»åŠ å¤–é”®çº¦æŸæ—¶ï¼Œæˆ‘ä»¬å¾—ä¿è¯å½“å‰æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®æ˜¯å®Œæ•´çš„ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¹‹å‰åˆ é™¤æ‰çš„æ•°æ®å†æ·»åŠ å›æ¥ã€‚</p></blockquote><blockquote><p>å½“æˆ‘ä»¬æ·»åŠ äº†å¤–é”®ä¹‹åï¼Œå†åˆ é™¤IDä¸º1çš„éƒ¨é—¨ï¼Œå°±ä¼šå‘ç°ï¼Œæ­¤æ—¶æ•°æ®åº“æŠ¥é”™äº†ï¼Œä¸å…è®¸åˆ é™¤ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220831205523647.png"></p><p>å¤–é”®çº¦æŸï¼ˆforeign keyï¼‰ï¼šä¿è¯äº†æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚</p></blockquote><p><strong>ç‰©ç†å¤–é”®å’Œé€»è¾‘å¤–é”®</strong></p><ul><li><p>ç‰©ç†å¤–é”®</p><ul><li>æ¦‚å¿µï¼šä½¿ç”¨foreign keyå®šä¹‰å¤–é”®å…³è”å¦å¤–ä¸€å¼ è¡¨ã€‚</li><li>ç¼ºç‚¹ï¼š<ul><li>å½±å“å¢ã€åˆ ã€æ”¹çš„æ•ˆç‡ï¼ˆéœ€è¦æ£€æŸ¥å¤–é”®å…³ç³»ï¼‰ã€‚</li><li>ä»…ç”¨äºå•èŠ‚ç‚¹æ•°æ®åº“ï¼Œä¸é€‚ç”¨ä¸åˆ†å¸ƒå¼ã€é›†ç¾¤åœºæ™¯ã€‚</li><li>å®¹æ˜“å¼•å‘æ•°æ®åº“çš„æ­»é”é—®é¢˜ï¼Œæ¶ˆè€—æ€§èƒ½ã€‚</li></ul></li></ul></li><li><p>é€»è¾‘å¤–é”®</p><ul><li>æ¦‚å¿µï¼šåœ¨ä¸šåŠ¡å±‚é€»è¾‘ä¸­ï¼Œè§£å†³å¤–é”®å…³è”ã€‚</li><li>é€šè¿‡é€»è¾‘å¤–é”®ï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„è§£å†³ä¸Šè¿°é—®é¢˜ã€‚</li></ul></li></ul><blockquote><p>**åœ¨ç°åœ¨çš„ä¼ä¸šå¼€å‘ä¸­ï¼Œå¾ˆå°‘ä¼šä½¿ç”¨ç‰©ç†å¤–é”®ï¼Œéƒ½æ˜¯ä½¿ç”¨é€»è¾‘å¤–é”®ã€‚ ç”šè‡³åœ¨ä¸€äº›æ•°æ®åº“å¼€å‘è§„èŒƒä¸­ï¼Œä¼šæ˜ç¡®æŒ‡å‡ºç¦æ­¢ä½¿ç”¨ç‰©ç†å¤–é”® foreign key **</p></blockquote><h3 id="2-2-ä¸€å¯¹ä¸€"><a href="#2-2-ä¸€å¯¹ä¸€" class="headerlink" title="2.2 ä¸€å¯¹ä¸€"></a>2.2 ä¸€å¯¹ä¸€</h3><p>ä¸€å¯¹ä¸€å…³ç³»è¡¨åœ¨å®é™…å¼€å‘ä¸­åº”ç”¨èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œé€šå¸¸æ˜¯ç”¨æ¥åšå•è¡¨çš„æ‹†åˆ†ï¼Œä¹Ÿå°±æ˜¯å°†ä¸€å¼ å¤§è¡¨æ‹†åˆ†æˆä¸¤å¼ å°è¡¨ï¼Œå°†å¤§è¡¨ä¸­çš„ä¸€äº›åŸºç¡€å­—æ®µæ”¾åœ¨ä¸€å¼ è¡¨å½“ä¸­ï¼Œå°†å…¶ä»–çš„å­—æ®µæ”¾åœ¨å¦å¤–ä¸€å¼ è¡¨å½“ä¸­ï¼Œä»¥æ­¤æ¥æé«˜æ•°æ®çš„æ“ä½œæ•ˆç‡ã€‚</p><blockquote><p>ä¸€å¯¹ä¸€çš„åº”ç”¨åœºæ™¯ï¼š ç”¨æˆ·è¡¨(åŸºæœ¬ä¿¡æ¯+èº«ä»½ä¿¡æ¯)</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207104508080.png"></p><ul><li>åŸºæœ¬ä¿¡æ¯ï¼šç”¨æˆ·çš„IDã€å§“åã€æ€§åˆ«ã€æ‰‹æœºå·ã€å­¦å†</li><li>èº«ä»½ä¿¡æ¯ï¼šæ°‘æ—ã€ç”Ÿæ—¥ã€èº«ä»½è¯å·ã€èº«ä»½è¯ç­¾å‘æœºå…³ï¼Œèº«ä»½è¯çš„æœ‰æ•ˆæœŸ(å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´)</li></ul><p>å¦‚æœåœ¨ä¸šåŠ¡ç³»ç»Ÿå½“ä¸­ï¼Œå¯¹ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯æŸ¥è¯¢é¢‘ç‡ç‰¹åˆ«çš„é«˜ï¼Œä½†æ˜¯å¯¹äºç”¨æˆ·çš„èº«ä»½ä¿¡æ¯æŸ¥è¯¢é¢‘ç‡å¾ˆä½ï¼Œæ­¤æ—¶å‡ºäºæé«˜æŸ¥è¯¢æ•ˆç‡çš„è€ƒè™‘ï¼Œæˆ‘å°±å¯ä»¥å°†è¿™å¼ å¤§è¡¨æ‹†åˆ†æˆä¸¤å¼ å°è¡¨ï¼Œç¬¬ä¸€å¼ è¡¨å­˜æ”¾çš„æ˜¯ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼Œè€Œç¬¬äºŒå¼ è¡¨å­˜æ”¾çš„å°±æ˜¯ç”¨æˆ·çš„èº«ä»½ä¿¡æ¯ã€‚ä»–ä»¬ä¸¤è€…ä¹‹é—´ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œä¸€ä¸ªç”¨æˆ·åªèƒ½å¯¹åº”ä¸€ä¸ªèº«ä»½è¯ï¼Œè€Œä¸€ä¸ªèº«ä»½è¯ä¹Ÿåªèƒ½å…³è”ä¸€ä¸ªç”¨æˆ·ã€‚</p></blockquote><p>é‚£ä¹ˆåœ¨æ•°æ®åº“å±‚é¢æ€ä¹ˆå»ä½“ç°ä¸Šè¿°ä¸¤è€…ä¹‹é—´æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»å‘¢ï¼Ÿ</p><p>å…¶å®ä¸€å¯¹ä¸€æˆ‘ä»¬å¯ä»¥çœ‹æˆä¸€ç§ç‰¹æ®Šçš„ä¸€å¯¹å¤šã€‚ä¸€å¯¹å¤šæˆ‘ä»¬æ˜¯æ€ä¹ˆè®¾è®¡è¡¨å…³ç³»çš„ï¼Ÿæ˜¯ä¸æ˜¯åœ¨å¤šçš„ä¸€æ–¹æ·»åŠ å¤–é”®ã€‚åŒæ ·æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å¤–é”®æ¥ä½“ç°ä¸€å¯¹ä¸€ä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ä»»æ„ä¸€æ–¹æ¥æ·»åŠ ä¸€ä¸ªå¤–é”®å°±å¯ä»¥äº†ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207105632634.png"></p><blockquote><p>ä¸€å¯¹ä¸€ ï¼šåœ¨ä»»æ„ä¸€æ–¹åŠ å…¥å¤–é”®ï¼Œå…³è”å¦å¤–ä¸€æ–¹çš„ä¸»é”®ï¼Œå¹¶ä¸”è®¾ç½®å¤–é”®ä¸ºå”¯ä¸€çš„(UNIQUE)</p></blockquote><p>SQLè„šæœ¬ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- ç”¨æˆ·åŸºæœ¬ä¿¡æ¯è¡¨create table tb_user(    id int unsigned  primary key auto_increment comment 'ID',    name varchar(10) not null comment 'å§“å',    gender tinyint unsigned not null comment 'æ€§åˆ«, 1 ç”·  2 å¥³',    phone char(11) comment 'æ‰‹æœºå·',    degree varchar(10) comment 'å­¦å†') comment 'ç”¨æˆ·åŸºæœ¬ä¿¡æ¯è¡¨';-- æµ‹è¯•æ•°æ®insert into tb_user values (1,'ç™½çœ‰é¹°ç‹',1,'18812340001','åˆä¸­'),                        (2,'é’ç¿¼è ç‹',1,'18812340002','å¤§ä¸“'),                        (3,'é‡‘æ¯›ç‹®ç‹',1,'18812340003','åˆä¸­'),                        (4,'ç´«è¡«é¾™ç‹',2,'18812340004','ç¡•å£«');-- ç”¨æˆ·èº«ä»½ä¿¡æ¯è¡¨create table tb_user_card(    id int unsigned  primary key auto_increment comment 'ID',    nationality varchar(10) not null comment 'æ°‘æ—',    birthday date not null comment 'ç”Ÿæ—¥',    idcard char(18) not null comment 'èº«ä»½è¯å·',    issued varchar(20) not null comment 'ç­¾å‘æœºå…³',    expire_begin date not null comment 'æœ‰æ•ˆæœŸé™-å¼€å§‹',    expire_end date comment 'æœ‰æ•ˆæœŸé™-ç»“æŸ',    user_id int unsigned not null unique comment 'ç”¨æˆ·ID',    constraint fk_user_id foreign key (user_id) references tb_user(id)) comment 'ç”¨æˆ·èº«ä»½ä¿¡æ¯è¡¨';-- æµ‹è¯•æ•°æ®insert into tb_user_card values (1,'æ±‰','1960-11-06','100000100000100001','æœé˜³åŒºå…¬å®‰å±€','2000-06-10',null,1),        (2,'æ±‰','1971-11-06','100000100000100002','é™å®‰åŒºå…¬å®‰å±€','2005-06-10','2025-06-10',2),        (3,'æ±‰','1963-11-06','100000100000100003','æ˜Œå¹³åŒºå…¬å®‰å±€','2006-06-10',null,3),        (4,'å›','1980-11-06','100000100000100004','æµ·æ·€åŒºå…¬å®‰å±€','2008-06-10','2028-06-10',4);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-3-å¤šå¯¹å¤š"><a href="#2-3-å¤šå¯¹å¤š" class="headerlink" title="2.3 å¤šå¯¹å¤š"></a>2.3 å¤šå¯¹å¤š</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241130213906063.png" alt="å­¦ç”Ÿé€‰ä¿®è¯¾ç¨‹-å¤šå¯¹å¤š"></p><p>å¤šå¯¹å¤šçš„å…³ç³»åœ¨å¼€å‘ä¸­å±äºä¹Ÿæ¯”è¾ƒå¸¸è§çš„ã€‚æ¯”å¦‚ï¼šå­¦ç”Ÿå’Œè€å¸ˆçš„å…³ç³»ï¼Œä¸€ä¸ªå­¦ç”Ÿå¯ä»¥æœ‰å¤šä¸ªæˆè¯¾è€å¸ˆï¼Œä¸€ä¸ªæˆè¯¾è€å¸ˆä¹Ÿå¯ä»¥æœ‰å¤šä¸ªå­¦ç”Ÿã€‚åœ¨æ¯”å¦‚ï¼šå­¦ç”Ÿå’Œè¯¾ç¨‹çš„å…³ç³»ï¼Œä¸€ä¸ªå­¦ç”Ÿå¯ä»¥é€‰ä¿®å¤šé—¨è¯¾ç¨‹ï¼Œä¸€ä¸ªè¯¾ç¨‹ä¹Ÿå¯ä»¥ä¾›å¤šä¸ªå­¦ç”Ÿé€‰ä¿®ã€‚</p><p>æ¡ˆä¾‹ï¼šå­¦ç”Ÿä¸è¯¾ç¨‹çš„å…³ç³»</p><ul><li><p>å…³ç³»ï¼šä¸€ä¸ªå­¦ç”Ÿå¯ä»¥é€‰ä¿®å¤šé—¨è¯¾ç¨‹ï¼Œä¸€é—¨è¯¾ç¨‹ä¹Ÿå¯ä»¥ä¾›å¤šä¸ªå­¦ç”Ÿé€‰æ‹©</p></li><li><p>å®ç°å…³ç³»ï¼šå»ºç«‹ç¬¬ä¸‰å¼ ä¸­é—´è¡¨ï¼Œä¸­é—´è¡¨è‡³å°‘åŒ…å«ä¸¤ä¸ªå¤–é”®ï¼Œåˆ†åˆ«å…³è”ä¸¤æ–¹ä¸»é”®</p></li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207113341028.png"></p><p>SQLè„šæœ¬ï¼š</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- å­¦ç”Ÿè¡¨create table tb_student(    id int auto_increment primary key comment 'ä¸»é”®ID',    name varchar(10) comment 'å§“å',    no varchar(10) comment 'å­¦å·') comment 'å­¦ç”Ÿè¡¨';-- å­¦ç”Ÿè¡¨æµ‹è¯•æ•°æ®insert into tb_student(name, no) values ('é»›ç»®ä¸', '2000100101'),('è°¢é€Š', '2000100102'),('æ®·å¤©æ­£', '2000100103'),('éŸ¦ä¸€ç¬‘', '2000100104');-- è¯¾ç¨‹è¡¨create table tb_course(   id int auto_increment primary key comment 'ä¸»é”®ID',   name varchar(10) comment 'è¯¾ç¨‹åç§°') comment 'è¯¾ç¨‹è¡¨';-- è¯¾ç¨‹è¡¨æµ‹è¯•æ•°æ®insert into tb_course (name) values ('Java'), ('PHP'), ('MySQL') , ('Hadoop');-- å­¦ç”Ÿè¯¾ç¨‹è¡¨ï¼ˆä¸­é—´è¡¨ï¼‰create table tb_student_course(   id int auto_increment comment 'ä¸»é”®' primary key,   student_id int not null comment 'å­¦ç”ŸID',   course_id  int not null comment 'è¯¾ç¨‹ID',   constraint fk_courseid foreign key (course_id) references tb_course (id),   constraint fk_studentid foreign key (student_id) references tb_student (id))comment 'å­¦ç”Ÿè¯¾ç¨‹ä¸­é—´è¡¨';-- å­¦ç”Ÿè¯¾ç¨‹è¡¨æµ‹è¯•æ•°æ®insert into tb_student_course(student_id, course_id) values (1,1),(1,2),(1,3),(2,2),(2,3),(3,4);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-4-æ¡ˆä¾‹"><a href="#2-4-æ¡ˆä¾‹" class="headerlink" title="2.4 æ¡ˆä¾‹"></a>2.4 æ¡ˆä¾‹</h3><p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªç»¼åˆæ¡ˆä¾‹åŠ æ·±å¯¹äºå¤šè¡¨å…³ç³»çš„ç†è§£ï¼Œå¹¶æŒæ¡å¤šè¡¨è®¾è®¡çš„æµç¨‹ã€‚</p><p><strong>éœ€æ±‚</strong></p><ul><li>æ ¹æ®å‚è€ƒèµ„æ–™ä¸­æä¾›çš„ã€Š<a href="https://app.mockplus.cn/app/share-e928208474edd220b75e9faff1380e4ashare-VaH7dpoIaqRr/preview/BlJ_BHC42AEaa/tKNB7Tamh14B54?allowShare=1&amp;cps=expand&amp;ha=1">è‹ç©¹å¤–å–</a><a href="https://app.mockplus.cn/app/share-e928208474edd220b75e9faff1380e4ashare-VaH7dpoIaqRr/preview/BlJ_BHC42AEaa/tKNB7Tamh14B54?allowShare=1&amp;cps=expand&amp;ha=1">_</a><a href="https://app.mockplus.cn/app/share-e928208474edd220b75e9faff1380e4ashare-VaH7dpoIaqRr/preview/BlJ_BHC42AEaa/tKNB7Tamh14B54?allowShare=1&amp;cps=expand&amp;ha=1">ç®¡ç†åå°</a>ã€‹é¡µé¢åŸå‹ï¼Œè®¾è®¡åˆ†ç±»ç®¡ç†ã€èœå“ç®¡ç†ã€å¥—é¤ç®¡ç†æ¨¡å—çš„è¡¨ç»“æ„ã€‚</li></ul><p><strong>æ­¥éª¤</strong></p><ol><li><p>é˜…è¯»é¡µé¢åŸå‹åŠéœ€æ±‚æ–‡æ¡£ï¼Œåˆ†æå„ä¸ªæ¨¡å—æ¶‰åŠåˆ°çš„è¡¨ç»“æ„ï¼ŒåŠè¡¨ç»“æ„ä¹‹é—´çš„å…³ç³»ã€‚</p></li><li><p>æ ¹æ®é¡µé¢åŸå‹åŠéœ€æ±‚æ–‡æ¡£ï¼Œåˆ†æå„ä¸ªè¡¨ç»“æ„ä¸­å…·ä½“çš„å­—æ®µåŠçº¦æŸã€‚</p></li></ol><p><strong>åˆ†æ</strong></p><ul><li>é¡µé¢åŸå‹-åˆ†ç±»ç®¡ç†</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207114241260.png"></p><blockquote><p>åˆ†ç±»çš„ä¿¡æ¯ï¼šåˆ†ç±»åç§°ã€åˆ†ç±»ç±»å‹[èœå“/å¥—é¤]ã€åˆ†ç±»æ’åºã€åˆ†ç±»çŠ¶æ€[ç¦ç”¨/å¯ç”¨]ã€åˆ†ç±»çš„æ“ä½œæ—¶é—´(ä¿®æ”¹æ—¶é—´)ã€‚</p></blockquote><ul><li>é¡µé¢åŸå‹-èœå“ç®¡ç†</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207114300057.png"></p><blockquote><p>èœå“çš„ä¿¡æ¯ï¼šèœå“åç§°ã€èœå“å›¾ç‰‡ã€èœå“åˆ†ç±»ã€èœå“å”®ä»·ã€èœå“å”®å–çŠ¶æ€ã€èœå“çš„æ“ä½œæ—¶é—´(ä¿®æ”¹æ—¶é—´)ã€‚</p></blockquote><blockquote><p>æ€è€ƒï¼šåˆ†ç±»ä¸èœå“ä¹‹é—´æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</p><ul><li>æ€è€ƒé€»è¾‘ï¼šä¸€ä¸ªåˆ†ç±»ä¸‹å¯ä»¥æœ‰å¤šä¸ªèœå“å—ï¼Ÿåè¿‡æ¥å†æƒ³ä¸€æƒ³ï¼Œä¸€ä¸ªèœå“ä¼šå¯¹åº”å¤šä¸ªåˆ†ç±»å—ï¼Ÿ</li></ul><p>ç­”æ¡ˆï¼šä¸€å¯¹å¤šå…³ç³»ã€‚ä¸€ä¸ªåˆ†ç±»ä¸‹ä¼šæœ‰å¤šä¸ªèœå“ï¼Œè€Œä¸€ä¸ªèœå“åªèƒ½å½’å±ä¸€ä¸ªåˆ†ç±»ã€‚</p><p>è®¾è®¡è¡¨åŸåˆ™ï¼šåœ¨å¤šçš„ä¸€æ–¹ï¼Œæ·»åŠ å­—æ®µï¼Œå…³è”å±äºä¸€è¿™æ–¹çš„ä¸»é”®ã€‚</p></blockquote><ul><li>é¡µé¢åŸå‹-å¥—é¤ç®¡ç†</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207114327139.png"> </p><blockquote><p>å¥—é¤çš„ä¿¡æ¯ï¼šå¥—é¤åç§°ã€å¥—é¤å›¾ç‰‡ã€å¥—é¤åˆ†ç±»ã€å¥—é¤ä»·æ ¼ã€å¥—é¤å”®å–çŠ¶æ€ã€å¥—é¤çš„æ“ä½œæ—¶é—´ã€‚</p></blockquote><blockquote><p>æ€è€ƒï¼šå¥—é¤ä¸èœå“ä¹‹é—´æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</p><ul><li>æ€è€ƒé€»è¾‘ï¼šä¸€ä¸ªå¥—é¤ä¸‹å¯ä»¥æœ‰å¤šä¸ªèœå“å—ï¼Ÿåè¿‡æ¥å†æƒ³ä¸€æƒ³ï¼Œä¸€ä¸ªèœå“å¯ä»¥å‡ºç°åœ¨å¤šä¸ªå¥—é¤ä¸­å—ï¼Ÿ</li></ul><p>ç­”æ¡ˆï¼šå¤šå¯¹å¤šå…³ç³»ã€‚ä¸€ä¸ªå¥—é¤ä¸‹ä¼šæœ‰å¤šä¸ªèœå“ï¼Œè€Œä¸€ä¸ªèœå“ä¹Ÿå¯ä»¥å‡ºç°åœ¨å¤šä¸ªå¥—é¤ä¸­ã€‚</p><p>è®¾è®¡è¡¨åŸåˆ™ï¼šåˆ›å»ºç¬¬ä¸‰å¼ ä¸­é—´è¡¨ï¼Œå»ºç«‹ä¸¤ä¸ªå­—æ®µåˆ†åˆ«å…³è”èœå“è¡¨çš„ä¸»é”®å’Œå¥—é¤è¡¨çš„ä¸»é”®ã€‚</p></blockquote><p>åˆ†æé¡µé¢åŸå‹åŠéœ€æ±‚æ–‡æ¡£åï¼Œæˆ‘ä»¬è·å¾—ï¼š</p><ul><li>åˆ†ç±»è¡¨<ul><li>ä¸šåŠ¡å­—æ®µï¼šåˆ†ç±»åç§°ã€åˆ†ç±»ç±»å‹ã€åˆ†ç±»æ’åºã€åˆ†ç±»çŠ¶æ€</li><li>åŸºç¡€å­—æ®µï¼šid(ä¸»é”®)ã€åˆ†ç±»çš„åˆ›å»ºæ—¶é—´ã€åˆ†ç±»çš„ä¿®æ”¹æ—¶é—´</li></ul></li><li>èœå“è¡¨<ul><li>ä¸šåŠ¡å­—æ®µï¼šèœå“åç§°ã€èœå“å›¾ç‰‡ã€èœå“åˆ†ç±»ã€èœå“å”®ä»·ã€èœå“å”®å–çŠ¶æ€</li><li>åŸºç¡€å­—æ®µï¼šid(ä¸»é”®)ã€åˆ†ç±»çš„åˆ›å»ºæ—¶é—´ã€åˆ†ç±»çš„ä¿®æ”¹æ—¶é—´</li></ul></li><li>å¥—é¤è¡¨<ul><li>ä¸šåŠ¡å­—æ®µï¼šå¥—é¤åç§°ã€å¥—é¤å›¾ç‰‡ã€å¥—é¤åˆ†ç±»ã€å¥—é¤ä»·æ ¼ã€å¥—é¤å”®å–çŠ¶æ€</li><li>åŸºç¡€å­—æ®µï¼šid(ä¸»é”®)ã€åˆ†ç±»çš„åˆ›å»ºæ—¶é—´ã€åˆ†ç±»çš„ä¿®æ”¹æ—¶é—´</li></ul></li></ul><p>è¡¨ç»“æ„ä¹‹é—´çš„å…³ç³»ï¼š</p><ul><li>åˆ†ç±»è¡¨ - èœå“è¡¨ ï¼š ä¸€å¯¹å¤š<ul><li>åœ¨èœå“è¡¨ä¸­æ·»åŠ å­—æ®µ(èœå“åˆ†ç±»)ï¼Œå…³è”åˆ†ç±»è¡¨</li></ul></li><li>èœå“è¡¨ - å¥—é¤è¡¨ ï¼š å¤šå¯¹å¤š<ul><li>åˆ›å»ºç¬¬ä¸‰å¼ ä¸­é—´è¡¨(å¥—é¤èœå“å…³è”è¡¨)ï¼Œåœ¨ä¸­é—´è¡¨ä¸Šæ·»åŠ ä¸¤ä¸ªå­—æ®µ(èœå“idã€å¥—é¤id)ï¼Œåˆ†åˆ«å…³è”èœå“è¡¨å’Œåˆ†ç±»è¡¨</li></ul></li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220831211756004.png"></p><p><strong>è¡¨ç»“æ„</strong></p><p>åˆ†ç±»è¡¨ï¼šcategory</p><ul><li>ä¸šåŠ¡å­—æ®µï¼šåˆ†ç±»åç§°ã€åˆ†ç±»ç±»å‹ã€åˆ†ç±»æ’åºã€åˆ†ç±»çŠ¶æ€</li><li>åŸºç¡€å­—æ®µï¼šid(ä¸»é”®)ã€åˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207143907853.png"></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- åˆ†ç±»è¡¨create table category(    id          int unsigned primary key auto_increment comment 'ä¸»é”®ID',    name        varchar(20)      not null unique comment 'åˆ†ç±»åç§°',    type        tinyint unsigned not null comment 'ç±»å‹ 1 èœå“åˆ†ç±» 2 å¥—é¤åˆ†ç±»',    sort        tinyint unsigned not null comment 'é¡ºåº',    status      tinyint unsigned not null default 0 comment 'çŠ¶æ€ 0 ç¦ç”¨ï¼Œ1 å¯ç”¨',    create_time datetime         not null comment 'åˆ›å»ºæ—¶é—´',    update_time datetime         not null comment 'æ›´æ–°æ—¶é—´') comment 'èœå“åŠå¥—é¤åˆ†ç±»';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>èœå“è¡¨ï¼šdish</p><ul><li>ä¸šåŠ¡å­—æ®µï¼šèœå“åç§°ã€èœå“å›¾ç‰‡ã€èœå“åˆ†ç±»ã€èœå“å”®ä»·ã€èœå“å”®å–çŠ¶æ€</li><li>åŸºç¡€å­—æ®µï¼šid(ä¸»é”®)ã€åˆ†ç±»çš„åˆ›å»ºæ—¶é—´ã€åˆ†ç±»çš„ä¿®æ”¹æ—¶é—´</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207144323100.png"></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- èœå“è¡¨create table dish(    id          int unsigned primary key auto_increment comment 'ä¸»é”®ID',    name        varchar(20)      not null unique comment 'èœå“åç§°',    category_id int unsigned     not null comment 'èœå“åˆ†ç±»ID',   -- é€»è¾‘å¤–é”®    price       decimal(8, 2)    not null comment 'èœå“ä»·æ ¼',    image       varchar(300)     not null comment 'èœå“å›¾ç‰‡',    description varchar(200) comment 'æè¿°ä¿¡æ¯',    status      tinyint unsigned not null default 0 comment 'çŠ¶æ€, 0 åœå”® 1 èµ·å”®',    create_time datetime         not null comment 'åˆ›å»ºæ—¶é—´',    update_time datetime         not null comment 'æ›´æ–°æ—¶é—´') comment 'èœå“';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¥—é¤è¡¨ï¼šsetmeal</p><ul><li>ä¸šåŠ¡å­—æ®µï¼šå¥—é¤åç§°ã€å¥—é¤å›¾ç‰‡ã€å¥—é¤åˆ†ç±»ã€å¥—é¤ä»·æ ¼ã€å¥—é¤å”®å–çŠ¶æ€</li><li>åŸºç¡€å­—æ®µï¼šid(ä¸»é”®)ã€åˆ†ç±»çš„åˆ›å»ºæ—¶é—´ã€åˆ†ç±»çš„ä¿®æ”¹æ—¶é—´</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207144723621.png"></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- å¥—é¤è¡¨create table setmeal(    id          int unsigned primary key auto_increment comment 'ä¸»é”®ID',    name        varchar(20)      not null unique comment 'å¥—é¤åç§°',    category_id int unsigned     not null comment 'åˆ†ç±»id',       -- é€»è¾‘å¤–é”®    price       decimal(8, 2)    not null comment 'å¥—é¤ä»·æ ¼',    image       varchar(300)     not null comment 'å›¾ç‰‡',    description varchar(200) comment 'æè¿°ä¿¡æ¯',    status      tinyint unsigned not null default 0 comment 'çŠ¶æ€ 0:åœç”¨ 1:å¯ç”¨',    create_time datetime         not null comment 'åˆ›å»ºæ—¶é—´',    update_time datetime         not null comment 'æ›´æ–°æ—¶é—´') comment 'å¥—é¤';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¥—é¤èœå“å…³è”è¡¨ï¼šsetmeal_dish</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221207145016440.png"></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- å¥—é¤èœå“å…³è”è¡¨create table setmeal_dish(    id         int unsigned primary key auto_increment comment 'ä¸»é”®ID',    setmeal_id int unsigned     not null comment 'å¥—é¤id ',    -- é€»è¾‘å¤–é”®    dish_id    int unsigned     not null comment 'èœå“id',     -- é€»è¾‘å¤–é”®    copies     tinyint unsigned not null comment 'ä»½æ•°') comment 'å¥—é¤èœå“å…³è”è¡¨';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> DQL </tag>
            
            <tag> å¤šè¡¨è®¾è®¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlï¼ˆ1ï¼‰</title>
      <link href="/2024/11/30/mysql-1/"/>
      <url>/2024/11/30/mysql-1/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®åº“å¼€å‘-MySQL"><a href="#æ•°æ®åº“å¼€å‘-MySQL" class="headerlink" title="æ•°æ®åº“å¼€å‘-MySQL"></a>æ•°æ®åº“å¼€å‘-MySQL</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨æˆ‘ä»¬è®²è§£SpringBootWebåŸºç¡€çŸ¥è¯†(è¯·æ±‚å“åº”æ¡ˆä¾‹)çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®²åˆ°åœ¨webå¼€å‘ä¸­ï¼Œä¸ºäº†åº”ç”¨ç¨‹åºèŒè´£å•ä¸€ï¼Œæ–¹ä¾¿ç»´æŠ¤ï¼Œæˆ‘ä»¬ä¸€èˆ¬å°†webåº”ç”¨ç¨‹åºåˆ†ä¸ºä¸‰å±‚ï¼Œå³ï¼šControllerã€Serviceã€Dao ã€‚</p><p>ä¹‹å‰æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œæ˜¯è¿™æ ·å­çš„è¯·æ±‚æµç¨‹ï¼šæµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼Œå…ˆè¯·æ±‚Controllerï¼›Controlleræ¥æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œè°ƒç”¨Serviceè¿›è¡Œä¸šåŠ¡é€»è¾‘å¤„ç†ï¼›Serviceå†è°ƒç”¨Daoï¼ŒDaoå†è§£æuser.xmlä¸­æ‰€å­˜å‚¨çš„æ•°æ®ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205001241294.png"></p><p>xmlæ–‡ä»¶ä¸­å¯ä»¥å­˜å‚¨æ•°æ®ï¼Œä½†æ˜¯åœ¨ä¼ä¸šé¡¹ç›®å¼€å‘ä¸­ä¸ä¼šä½¿ç”¨xmlæ–‡ä»¶å­˜å‚¨æ•°æ®ï¼Œå› ä¸ºä¸ä¾¿ç®¡ç†ç»´æŠ¤ï¼Œæ“ä½œéš¾åº¦å¤§ã€‚ åœ¨çœŸå®çš„ä¼ä¸šå¼€å‘ä¸­å‘¢ï¼Œéƒ½ä¼šé‡‡ç”¨æ•°æ®åº“æ¥å­˜å‚¨å’Œç®¡ç†æ•°æ®ï¼Œé‚£æ­¤æ—¶ï¼Œwebå¼€å‘è°ƒç”¨æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205001346266.png"></p><p>é¦–å…ˆæ¥äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯æ•°æ®åº“ã€‚</p><ul><li>æ•°æ®åº“ï¼šè‹±æ–‡ä¸º DataBaseï¼Œç®€ç§°DBï¼Œå®ƒæ˜¯å­˜å‚¨å’Œç®¡ç†æ•°æ®çš„ä»“åº“ã€‚</li></ul><p>åƒæˆ‘ä»¬æ—¥å¸¸è®¿é—®çš„ç”µå•†ç½‘ç«™äº¬ä¸œï¼Œä¼ä¸šå†…éƒ¨çš„ç®¡ç†ç³»ç»ŸOAã€ERPã€CRMè¿™ç±»çš„ç³»ç»Ÿï¼Œä»¥åŠå¤§å®¶æ¯å¤©éƒ½ä¼šåˆ·çš„å¤´æ¡ã€æŠ–éŸ³ç±»çš„appï¼Œé‚£è¿™äº›å¤§å®¶æ‰€çœ‹åˆ°çš„æ•°æ®ï¼Œå…¶å®éƒ½æ˜¯å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„ã€‚æœ€ç»ˆè¿™äº›æ•°æ®ï¼Œåªæ˜¯åœ¨æµè§ˆå™¨æˆ–appä¸­å±•ç¤ºå‡ºæ¥è€Œå·²ï¼Œæœ€ç»ˆæ•°æ®çš„å­˜å‚¨å’Œç®¡ç†éƒ½æ˜¯æ•°æ®åº“è´Ÿè´£çš„ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205001501275.png"></p><p>æ•°æ®æ˜¯å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„ï¼Œé‚£æˆ‘ä»¬è¦å¦‚ä½•æ¥æ“ä½œæ•°æ®åº“ä»¥åŠæ•°æ®åº“ä¸­æ‰€å­˜æ”¾çš„æ•°æ®å‘¢ï¼Ÿ</p><p>é‚£è¿™é‡Œå‘¢ï¼Œä¼šæ¶‰åŠåˆ°ä¸€ä¸ªè½¯ä»¶ï¼šæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆ<strong>D</strong>ata<strong>B</strong>ase <strong>M</strong>anagement <strong>S</strong>ystemï¼Œç®€ç§°DBMSï¼‰</p><ul><li>DBMSæ˜¯æ“ä½œå’Œç®¡ç†æ•°æ®åº“çš„å¤§å‹è½¯ä»¶ã€‚å°†æ¥æˆ‘ä»¬åªéœ€è¦æ“ä½œè¿™ä¸ªè½¯ä»¶ï¼Œå°±å¯ä»¥é€šè¿‡è¿™ä¸ªè½¯ä»¶æ¥æ“çºµå’Œç®¡ç†æ•°æ®åº“äº†ã€‚</li></ul><p>æ­¤æ—¶åˆå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼šDBMSè¿™ä¸ªè½¯ä»¶æ€ä¹ˆçŸ¥é“è¦æ“ä½œçš„æ˜¯å“ªä¸ªæ•°æ®åº“ã€å“ªä¸ªæ•°æ®å‘¢ï¼Ÿæ˜¯å¯¹æ•°æ®åšä¿®æ”¹è¿˜æ˜¯æŸ¥è¯¢å‘¢ï¼Ÿ</p><ul><li>éœ€è¦ç»™DBMSè½¯ä»¶å‘é€ä¸€æ¡æŒ‡ä»¤ï¼Œå‘Šè¯‰è¿™ä¸ªè½¯ä»¶æˆ‘ä»¬è¦æ‰§è¡Œçš„æ˜¯ä»€ä¹ˆæ ·çš„æ“ä½œï¼Œè¦å¯¹å“ªä¸ªæ•°æ®è¿›è¡Œæ“ä½œã€‚è€Œè¿™ä¸ªæŒ‡ä»¤å°±æ˜¯SQLè¯­å¥</li></ul><p>SQLï¼ˆ<strong>S</strong>tructured <strong>Q</strong>uery <strong>L</strong>anguageï¼Œç®€ç§°SQLï¼‰ï¼šç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œå®ƒæ˜¯æ“ä½œå…³ç³»å‹æ•°æ®åº“çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®šä¹‰äº†ä¸€å¥—æ“ä½œå…³ç³»å‹æ•°æ®åº“çš„ç»Ÿä¸€æ ‡å‡†ã€‚æˆ‘ä»¬å­¦ä¹ æ•°æ®åº“å¼€å‘ï¼Œæœ€ä¸ºé‡è¦çš„å°±æ˜¯å­¦ä¹ SQLè¯­å¥ ã€‚</p><blockquote><p>å…³ç³»å‹æ•°æ®åº“ï¼šæˆ‘ä»¬åé¢ä¼šè¯¦ç»†è®²è§£ï¼Œç°åœ¨å¤§å®¶åªéœ€è¦çŸ¥é“æˆ‘ä»¬å­¦ä¹ çš„æ•°æ®åº“å±äºå…³ç³»å‹æ•°æ®åº“å³å¯ã€‚</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205095039939.png"></p><p>ç»“è®ºï¼šç¨‹åºå‘˜ç»™æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ(DBMS)å‘é€SQLè¯­å¥ï¼Œå†ç”±æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ“ä½œæ•°æ®åº“å½“ä¸­çš„æ•°æ®ã€‚</p><p>äº†è§£äº†æ•°æ®åº“çš„ä¸€äº›ç®€å•æ¦‚å¿µä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥ä»‹ç»ä¸‹ç›®å‰ä¸»æµçš„æ•°æ®åº“ï¼Œè¿™é‡Œæˆªå–äº†æ’åå‰åçš„æ•°æ®åº“ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205120408757.png"> </p><ul><li>Oracleï¼šå¤§å‹çš„æ”¶è´¹æ•°æ®åº“ï¼ŒOracleå…¬å¸äº§å“ï¼Œä»·æ ¼æ˜‚è´µã€‚ï¼ˆé€šå¸¸æ˜¯ä¸å·®é’±çš„å…¬å¸ä¼šé€‰æ‹©ä½¿ç”¨è¿™ä¸ªæ•°æ®åº“ï¼‰</li><li>MySQLï¼šå¼€æºå…è´¹çš„ä¸­å°å‹æ•°æ®åº“ï¼Œåæ¥Sunå…¬å¸æ”¶è´­äº†MySQLï¼Œè€ŒOracleåˆæ”¶è´­äº†Sunå…¬å¸ã€‚ç›®å‰Oracleæ¨å‡ºä¸¤ä¸ªç‰ˆæœ¬çš„Mysqlï¼šç¤¾åŒºç‰ˆ(å¼€æºå…è´¹)ã€å•†ä¸šç‰ˆ(æ”¶è´¹)ã€‚</li><li>SQL Serverï¼šMicrosoft å…¬å¸æ¨å‡ºçš„æ”¶è´¹çš„ä¸­å‹æ•°æ®åº“ï¼ŒC#ã€.netç­‰è¯­è¨€å¸¸ç”¨ã€‚</li><li>PostgreSQLï¼šå¼€æºå…è´¹çš„ä¸­å°å‹æ•°æ®åº“ã€‚</li><li>DB2ï¼šIBMå…¬å¸çš„å¤§å‹æ”¶è´¹æ•°æ®åº“äº§å“ã€‚</li><li>SQLLiteï¼šåµŒå…¥å¼çš„å¾®å‹æ•°æ®åº“ã€‚Androidå†…ç½®çš„æ•°æ®åº“é‡‡ç”¨çš„å°±æ˜¯è¯¥æ•°æ®åº“ã€‚</li><li>MariaDBï¼šå¼€æºå…è´¹çš„ä¸­å°å‹æ•°æ®åº“ã€‚æ˜¯MySQLæ•°æ®åº“çš„å¦å¤–ä¸€ä¸ªåˆ†æ”¯ã€å¦å¤–ä¸€ä¸ªè¡ç”Ÿäº§å“ï¼Œä¸MySQLæ•°æ®åº“æœ‰å¾ˆå¥½çš„å…¼å®¹æ€§ã€‚</li></ul><p>é‚£è¿™ä¹ˆå¤šæ•°æ®åº“ï¼Œæˆ‘ä»¬å…¨éƒ¨éƒ½éœ€è¦å­¦ä¹ å—ï¼Œå…¶å®å¹¶ä¸ç”¨ï¼Œæˆ‘ä»¬åªéœ€è¦å­¦ä¹ å…¶ä¸­çš„ä¸€ä¸ªå°±å¯ä»¥äº†ï¼Œæˆ‘ä»¬æ­¤æ¬¡è¯¾ç¨‹ä¸­å­¦ä¹ çš„æ•°æ®åº“æ˜¯ç°åœ¨äº’è”ç½‘å…¬å¸å¼€å‘ä½¿ç”¨æœ€ä¸ºæµè¡Œçš„MySQLæ•°æ®åº“ã€‚</p><p>æ­¤æ—¶å¤§å®¶å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼Œæˆ‘ä»¬ç°åœ¨å­¦ä¹ çš„æ˜¯Mysqlæ•°æ®åº“ï¼Œæˆ‘ä»¬ä»¥åå»å…¬å¸åšå¼€å‘ï¼Œå¦‚æœç”¨åˆ°çš„æ˜¯Oracleæ•°æ®åº“æˆ–SQL Serveræ•°æ®åº“è¯¥æ€ä¹ˆåŠï¼Ÿå…¶å®å¤§å®¶å®Œå…¨ä¸ç”¨æ‹…å¿ƒè¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºè¿™äº›æ•°æ®åº“éƒ½æ˜¯å±äºå…³ç³»å‹æ•°æ®åº“ï¼Œè¦æ“ä½œå…³ç³»å‹æ•°æ®åº“éƒ½æ˜¯é€šè¿‡ SQLè¯­å¥æ¥å®ç°çš„ï¼Œè€ŒSQLè¯­å¥åˆæ˜¯æ“ä½œå…³ç³»å‹æ•°æ®åº“çš„ç»Ÿä¸€æ ‡å‡†ã€‚</p><blockquote><p>ç»“è®ºï¼šåªè¦æˆ‘ä»¬å­¦ä¼šäº†SQLè¯­å¥ï¼Œå°±å¯ä»¥é€šè¿‡SQLè¯­å¥æ¥æ“ä½œMysqlï¼Œä¹Ÿå¯ä»¥é€šè¿‡SQLè¯­å¥æ¥æ“ä½œOracleæˆ–SQL Server</p></blockquote><p>è¯¾ç¨‹å†…å®¹å®‰æ’ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205122731402.png"></p><p>ä»¥ä¸Šè¯¾ç¨‹å†…å®¹æ‹†è§£ä¸º3éƒ¨åˆ†çŸ¥è¯†ç‚¹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205122937131.png"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å…ˆè¿›å…¥åˆ°ç¬¬ä¸€å¤©çš„Mysqlæ¦‚è¿°å­¦ä¹ ã€‚</p><h2 id="1-MySQLæ¦‚è¿°"><a href="#1-MySQLæ¦‚è¿°" class="headerlink" title="1. MySQLæ¦‚è¿°"></a>1. MySQLæ¦‚è¿°</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220610191829748.png"> </p><p>å®˜ç½‘ï¼š<a href="https://dev.mysql.com/">https://dev.mysql.com/</a></p><h3 id="1-1-å®‰è£…"><a href="#1-1-å®‰è£…" class="headerlink" title="1.1 å®‰è£…"></a>1.1 å®‰è£…</h3><h4 id="1-1-1-ç‰ˆæœ¬"><a href="#1-1-1-ç‰ˆæœ¬" class="headerlink" title="1.1.1 ç‰ˆæœ¬"></a>1.1.1 ç‰ˆæœ¬</h4><p>MySQLå®˜æ–¹æä¾›äº†ä¸¤ä¸ªç‰ˆæœ¬ï¼š</p><ul><li><p>å•†ä¸šç‰ˆæœ¬ï¼ˆMySQL Enterprise Editionï¼‰</p><ul><li>è¯¥ç‰ˆæœ¬æ˜¯æ”¶è´¹çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨30å¤©ã€‚ å®˜æ–¹ä¼šæä¾›å¯¹åº”çš„æŠ€æœ¯æ”¯æŒã€‚</li></ul></li><li><p>ç¤¾åŒºç‰ˆæœ¬ï¼ˆMySQL Community Serverï¼‰</p><ul><li>è¯¥ç‰ˆæœ¬æ˜¯å…è´¹çš„ï¼Œä½†æ˜¯MySQLä¸ä¼šæä¾›ä»»ä½•çš„æŠ€æœ¯æ”¯æŒã€‚</li></ul></li></ul><blockquote><p>æœ¬è¯¾ç¨‹ï¼Œé‡‡ç”¨çš„æ˜¯MySQLçš„ç¤¾åŒºç‰ˆæœ¬ï¼ˆ8.0.31ï¼‰</p></blockquote><h4 id="1-1-2-å®‰è£…"><a href="#1-1-2-å®‰è£…" class="headerlink" title="1.1.2 å®‰è£…"></a>1.1.2 å®‰è£…</h4><p>å®˜ç½‘ä¸‹è½½åœ°å€ï¼š<a href="https://downloads.mysql.com/archives/community/">https://downloads.mysql.com/archives/community/</a></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205140643412.png"></p><p>è¿™ä¸ªå®‰è£…åŒ…å‘¢ï¼Œå¤§å®¶å¯ä»¥ä¸ç”¨ä¸‹è½½ï¼Œå› ä¸ºèµ„æ–™ä¸­å·²æä¾›ç°æˆçš„å®‰è£…åŒ…ã€‚ <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205140732982.png"></p><blockquote><p>å®‰è£…MySQLå…·ä½“çš„æ­¥éª¤ï¼Œå‚è€ƒèµ„æ–™ä¸­æä¾›çš„ ã€ŠMySQLå®‰è£…æ–‡æ¡£ã€‹ ï¼Œè¿›è¡Œè½¯ä»¶çš„å®‰è£…å³å¯ã€‚</p></blockquote><h4 id="1-1-3-è¿æ¥"><a href="#1-1-3-è¿æ¥" class="headerlink" title="1.1.3 è¿æ¥"></a>1.1.3 è¿æ¥</h4><p>MySQLæœåŠ¡å™¨å¯åŠ¨å®Œæ¯•åï¼Œç„¶åå†ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤ï¼Œæ¥è¿æ¥MySQLæœåŠ¡å™¨ï¼š</p><pre class="line-numbers language-none"><code class="language-none">mysql -uç”¨æˆ·å -på¯†ç  [-hæ•°æ®åº“æœåŠ¡å™¨çš„IPåœ°å€ -Pç«¯å£å·]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>-h  å‚æ•°ä¸åŠ ï¼Œé»˜è®¤è¿æ¥çš„æ˜¯æœ¬åœ° 127.0.0.1 çš„MySQLæœåŠ¡å™¨</p><p>-P  å‚æ•°ä¸åŠ ï¼Œé»˜è®¤è¿æ¥çš„ç«¯å£å·æ˜¯ 3306</p></blockquote><p><strong>ä¸Šè¿°æŒ‡ä»¤ï¼Œå¯ä»¥æœ‰ä¸¤ç§å½¢å¼ï¼š</strong></p><ul><li>å¯†ç ç›´æ¥åœ¨-på‚æ•°ä¹‹åç›´æ¥æŒ‡å®š ï¼ˆè¿™ç§æ–¹å¼ä¸å®‰å…¨ï¼Œå¯†ç ç›´æ¥ä»¥æ˜æ–‡å½¢å¼å‡ºç°åœ¨å‘½ä»¤è¡Œï¼‰</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205143139656.png"></p><ul><li>å¯†ç åœ¨-på›è½¦ä¹‹åï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥å¯†ç ï¼Œç„¶åå›è½¦</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205143418632.png"></p><p>æ¥ä¸‹æ¥ï¼Œå°±æ¥æ¼”ç¤ºä¸€ä¸‹ï¼Œé€šè¿‡MySQLçš„å®¢æˆ·ç«¯å‘½ä»¤è¡Œï¼Œå¦‚ä½•æ¥è¿æ¥æœåŠ¡å™¨ä¸Šéƒ¨ç½²çš„MySQL ï¼š </p><pre class="line-numbers language-none"><code class="language-none">mysql -uç”¨æˆ·å -på¯†ç  [-hæ•°æ®åº“æœåŠ¡å™¨çš„IPåœ°å€ -Pç«¯å£å·]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220829111522126.png"></p><h3 id="1-2-æ•°æ®æ¨¡å‹"><a href="#1-2-æ•°æ®æ¨¡å‹" class="headerlink" title="1.2 æ•°æ®æ¨¡å‹"></a>1.2 æ•°æ®æ¨¡å‹</h3><p>ä»‹ç»å®Œäº†Mysqlæ•°æ®åº“çš„å®‰è£…é…ç½®ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥èŠä¸€èŠMysqlå½“ä¸­çš„æ•°æ®æ¨¡å‹ã€‚å­¦å®Œäº†è¿™ä¸€å°èŠ‚ä¹‹åï¼Œæˆ‘ä»¬å°±èƒ½å¤ŸçŸ¥é“åœ¨Mysqlæ•°æ®åº“å½“ä¸­åˆ°åº•æ˜¯å¦‚ä½•æ¥å­˜å‚¨å’Œç®¡ç†æ•°æ®çš„ã€‚</p><p>åœ¨ä»‹ç» Mysqlçš„æ•°æ®æ¨¡å‹ä¹‹å‰ï¼Œéœ€è¦å…ˆäº†è§£ä¸€ä¸ªæ¦‚å¿µï¼šå…³ç³»å‹æ•°æ®åº“ã€‚</p><p><strong>å…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMSï¼‰</strong></p><p>æ¦‚å¿µï¼šå»ºç«‹åœ¨å…³ç³»æ¨¡å‹åŸºç¡€ä¸Šï¼Œç”±å¤šå¼ ç›¸äº’è¿æ¥çš„<strong>äºŒç»´è¡¨</strong>ç»„æˆçš„æ•°æ®åº“ã€‚</p><p>è€Œæ‰€è°“äºŒç»´è¡¨ï¼ŒæŒ‡çš„æ˜¯ç”±è¡Œå’Œåˆ—ç»„æˆçš„è¡¨ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205145028667.png"> </p><p>äºŒç»´è¡¨çš„ä¼˜ç‚¹ï¼š</p><ul><li><p>ä½¿ç”¨è¡¨å­˜å‚¨æ•°æ®ï¼Œæ ¼å¼ç»Ÿä¸€ï¼Œä¾¿äºç»´æŠ¤</p></li><li><p>ä½¿ç”¨SQLè¯­è¨€æ“ä½œï¼Œæ ‡å‡†ç»Ÿä¸€ï¼Œä½¿ç”¨æ–¹ä¾¿ï¼Œå¯ç”¨äºå¤æ‚æŸ¥è¯¢</p></li></ul><blockquote><p>æˆ‘ä»¬ä¹‹å‰æåˆ°çš„MySQLã€Oracleã€DB2ã€SQLServerè¿™äº›éƒ½æ˜¯å±äºå…³ç³»å‹æ•°æ®åº“ï¼Œé‡Œé¢éƒ½æ˜¯åŸºäºäºŒç»´è¡¨å­˜å‚¨æ•°æ®çš„ã€‚</p><p>ç»“è®ºï¼šåŸºäºäºŒç»´è¡¨å­˜å‚¨æ•°æ®çš„æ•°æ®åº“å°±æˆä¸ºå…³ç³»å‹æ•°æ®åº“ï¼Œä¸æ˜¯åŸºäºäºŒç»´è¡¨å­˜å‚¨æ•°æ®çš„æ•°æ®åº“ï¼Œå°±æ˜¯éå…³ç³»å‹æ•°æ®åº“ï¼ˆæ¯”å¦‚å¤§å®¶åé¢è¦å­¦ä¹ çš„Redisï¼Œå°±å±äºéå…³ç³»å‹æ•°æ®åº“ï¼‰ã€‚</p></blockquote><p><strong>2). æ•°æ®æ¨¡å‹</strong></p><p>ä»‹ç»å®Œäº†å…³ç³»å‹æ•°æ®åº“ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹ä¸€çœ‹åœ¨Mysqlæ•°æ®åº“å½“ä¸­åˆ°åº•æ˜¯å¦‚ä½•æ¥å­˜å‚¨æ•°æ®çš„ï¼Œä¹Ÿå°±æ˜¯Mysql çš„æ•°æ®æ¨¡å‹ã€‚</p><p>MySQLæ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Œæ˜¯åŸºäºäºŒç»´è¡¨è¿›è¡Œæ•°æ®å­˜å‚¨çš„ï¼Œå…·ä½“çš„ç»“æ„å›¾ä¸‹:</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220829111741419.png"> </p><ul><li>é€šè¿‡MySQLå®¢æˆ·ç«¯è¿æ¥æ•°æ®åº“ç®¡ç†ç³»ç»ŸDBMSï¼Œç„¶åé€šè¿‡DBMSæ“ä½œæ•°æ®åº“</li><li>ä½¿ç”¨MySQLå®¢æˆ·ç«¯ï¼Œå‘æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå‘é€ä¸€æ¡SQLè¯­å¥ï¼Œç”±æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæ ¹æ®SQLè¯­å¥æŒ‡ä»¤å»æ“ä½œæ•°æ®åº“ä¸­çš„è¡¨ç»“æ„åŠæ•°æ®</li><li>ä¸€ä¸ªæ•°æ®åº“æœåŠ¡å™¨ä¸­å¯ä»¥åˆ›å»ºå¤šä¸ªæ•°æ®åº“ï¼Œä¸€ä¸ªæ•°æ®åº“ä¸­ä¹Ÿå¯ä»¥åŒ…å«å¤šå¼ è¡¨ï¼Œè€Œä¸€å¼ è¡¨ä¸­åˆå¯ä»¥åŒ…å«å¤šè¡Œè®°å½•ã€‚</li></ul><blockquote><p>åœ¨Mysqlæ•°æ®åº“æœåŠ¡å™¨å½“ä¸­å­˜å‚¨æ•°æ®ï¼Œä½ éœ€è¦ï¼š</p><ol><li>å…ˆå»åˆ›å»ºæ•°æ®åº“ï¼ˆå¯ä»¥åˆ›å»ºå¤šä¸ªæ•°æ®åº“ï¼Œä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼‰</li><li>åœ¨æ•°æ®åº“ä¸‹å†å»åˆ›å»ºæ•°æ®è¡¨ï¼ˆä¸€ä¸ªæ•°æ®åº“ä¸‹å¯ä»¥åˆ›å»ºå¤šå¼ è¡¨ï¼‰</li><li>å†å°†æ•°æ®å­˜æ”¾åœ¨æ•°æ®è¡¨ä¸­ï¼ˆä¸€å¼ è¡¨å¯ä»¥å­˜å‚¨å¤šè¡Œæ•°æ®ï¼‰</li></ol></blockquote><h3 id="1-3-SQLç®€ä»‹"><a href="#1-3-SQLç®€ä»‹" class="headerlink" title="1.3 SQLç®€ä»‹"></a>1.3 SQLç®€ä»‹</h3><p>SQLï¼šç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ã€‚ä¸€é—¨æ“ä½œå…³ç³»å‹æ•°æ®åº“çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®šä¹‰æ“ä½œæ‰€æœ‰å…³ç³»å‹æ•°æ®åº“çš„ç»Ÿä¸€æ ‡å‡†ã€‚</p><p>åœ¨å­¦ä¹ å…·ä½“çš„SQLè¯­å¥ä¹‹å‰ï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹SQLè¯­è¨€çš„è¯­æ³•ã€‚</p><h4 id="1-3-1-SQLé€šç”¨è¯­æ³•"><a href="#1-3-1-SQLé€šç”¨è¯­æ³•" class="headerlink" title="1.3.1 SQLé€šç”¨è¯­æ³•"></a>1.3.1 SQLé€šç”¨è¯­æ³•</h4><p>1ã€SQLè¯­å¥å¯ä»¥å•è¡Œæˆ–å¤šè¡Œä¹¦å†™ï¼Œä»¥åˆ†å·ç»“å°¾ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205151656214.png"></p><p>2ã€SQLè¯­å¥å¯ä»¥ä½¿ç”¨ç©ºæ ¼/ç¼©è¿›æ¥å¢å¼ºè¯­å¥çš„å¯è¯»æ€§ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205151953441.png"></p><p>3ã€MySQLæ•°æ®åº“çš„SQLè¯­å¥ä¸åŒºåˆ†å¤§å°å†™ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205152112070.png"></p><p>4ã€æ³¨é‡Šï¼š</p><ul><li>å•è¡Œæ³¨é‡Šï¼šâ€“ æ³¨é‡Šå†…å®¹   æˆ–   # æ³¨é‡Šå†…å®¹(MySQLç‰¹æœ‰)</li><li>å¤šè¡Œæ³¨é‡Šï¼š /* æ³¨é‡Šå†…å®¹ */</li></ul><blockquote><p>ä»¥ä¸Šå°±æ˜¯SQLè¯­å¥çš„é€šç”¨è¯­æ³•ï¼Œè¿™äº›é€šç”¨è¯­æ³•å¤§å®¶ç›®å‰å…ˆæœ‰ä¸€ä¸ªç›´è§‚çš„è®¤è¯†ï¼Œæˆ‘ä»¬åé¢åœ¨è®²è§£æ¯ä¸€ç±»SQLè¯­å¥çš„æ—¶å€™ï¼Œè¿˜ä¼šå†æ¥å¼ºè°ƒé€šç”¨è¯­æ³•ã€‚</p></blockquote><h4 id="1-3-2-åˆ†ç±»"><a href="#1-3-2-åˆ†ç±»" class="headerlink" title="1.3.2 åˆ†ç±»"></a>1.3.2 åˆ†ç±»</h4><p>SQLè¯­å¥æ ¹æ®å…¶åŠŸèƒ½è¢«åˆ†ä¸ºå››å¤§ç±»ï¼šDDLã€DMLã€DQLã€DCL </p><table><thead><tr><th><strong>åˆ†ç±»</strong></th><th><strong>å…¨ç§°</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>DDL</td><td>Data Definition  Language</td><td>æ•°æ®å®šä¹‰è¯­è¨€ï¼Œç”¨æ¥å®šä¹‰æ•°æ®åº“å¯¹è±¡(æ•°æ®åº“ï¼Œè¡¨ï¼Œå­—æ®µ)</td></tr><tr><td>DML</td><td>Data Manipulation  Language</td><td>æ•°æ®æ“ä½œè¯­è¨€ï¼Œç”¨æ¥å¯¹æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹</td></tr><tr><td>DQL</td><td>Data Query Language</td><td>æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œç”¨æ¥æŸ¥è¯¢æ•°æ®åº“ä¸­è¡¨çš„è®°å½•</td></tr><tr><td>DCL</td><td>Data Control  Language</td><td>æ•°æ®æ§åˆ¶è¯­è¨€ï¼Œç”¨æ¥åˆ›å»ºæ•°æ®åº“ç”¨æˆ·ã€æ§åˆ¶æ•°æ®åº“çš„è®¿é—®æƒé™</td></tr></tbody></table><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205152804250.png">  </p><h2 id="2-æ•°æ®åº“è®¾è®¡-DDL"><a href="#2-æ•°æ®åº“è®¾è®¡-DDL" class="headerlink" title="2. æ•°æ®åº“è®¾è®¡-DDL"></a>2. æ•°æ®åº“è®¾è®¡-DDL</h2><p>ä¸‹é¢æˆ‘ä»¬å°±æ­£å¼çš„è¿›å…¥åˆ°SQLè¯­å¥çš„å­¦ä¹ ï¼Œåœ¨å­¦ä¹ ä¹‹å‰å…ˆç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹æˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªé¡¹ç›®ï¼Œæ•´ä¸ªå¼€å‘æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œä»¥åŠåœ¨æµç¨‹å½“ä¸­å“ªäº›ç¯èŠ‚ä¼šæ¶‰åŠåˆ°æ•°æ®åº“ã€‚</p><h3 id="2-1-é¡¹ç›®å¼€å‘æµç¨‹"><a href="#2-1-é¡¹ç›®å¼€å‘æµç¨‹" class="headerlink" title="2.1 é¡¹ç›®å¼€å‘æµç¨‹"></a>2.1 é¡¹ç›®å¼€å‘æµç¨‹</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220829112953742.png"></p><p>éœ€æ±‚æ–‡æ¡£ï¼š</p><ul><li>åœ¨æˆ‘ä»¬å¼€å‘ä¸€ä¸ªé¡¹ç›®æˆ–è€…é¡¹ç›®å½“ä¸­çš„æŸä¸ªæ¨¡å—ä¹‹å‰ï¼Œä¼šå…ˆä¼šæ‹¿åˆ°äº§å“ç»ç†ç»™æˆ‘ä»¬æä¾›çš„é¡µé¢åŸå‹åŠéœ€æ±‚æ–‡æ¡£ã€‚</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205154101142.png"></p><p>è®¾è®¡ï¼š</p><ul><li>æ‹¿åˆ°äº§å“åŸå‹å’Œéœ€æ±‚æ–‡æ¡£ä¹‹åï¼Œæˆ‘ä»¬é¦–å…ˆè¦åšçš„ä¸æ˜¯ç¼–ç ï¼Œè€Œæ˜¯è¦å…ˆè¿›è¡Œé¡¹ç›®çš„è®¾è®¡ï¼Œå…¶ä¸­å°±åŒ…æ‹¬æ¦‚è¦è®¾è®¡ã€è¯¦ç»†è®¾è®¡ã€æ¥å£è®¾è®¡ã€æ•°æ®åº“è®¾è®¡ç­‰ç­‰ã€‚</li><li>æ•°æ®åº“è®¾è®¡æ ¹æ®äº§å“åŸå‹ä»¥åŠéœ€æ±‚æ–‡æ¡£ï¼Œè¦åˆ†æå„ä¸ªæ¨¡å—æ¶‰åŠåˆ°çš„è¡¨ç»“æ„ä»¥åŠè¡¨ç»“æ„ä¹‹é—´çš„å…³ç³»ï¼Œä»¥åŠè¡¨ç»“æ„çš„è¯¦ç»†ä¿¡æ¯ã€‚æœ€ç»ˆæˆ‘ä»¬éœ€è¦å°†æ•°æ®åº“ä»¥åŠæ•°æ®åº“å½“ä¸­çš„è¡¨ç»“æ„è®¾è®¡åˆ›å»ºå‡ºæ¥ã€‚</li></ul><p>å¼€å‘/æµ‹è¯•ï¼š</p><ul><li>å‚ç…§é¡µé¢åŸå‹å’Œéœ€æ±‚è¿›è¡Œç¼–ç ï¼Œå®ç°ä¸šåŠ¡åŠŸèƒ½ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹å½“ä¸­ï¼Œæˆ‘ä»¬å°±éœ€è¦æ¥æ“ä½œè®¾è®¡å‡ºæ¥çš„æ•°æ®åº“è¡¨ç»“æ„ï¼Œæ¥å®Œæˆä¸šåŠ¡çš„å¢åˆ æ”¹æŸ¥æ“ä½œç­‰ã€‚</li></ul><p>éƒ¨ç½²ä¸Šçº¿ï¼š</p><ul><li>åœ¨é¡¹ç›®çš„åŠŸèƒ½å¼€å‘æµ‹è¯•å®Œæˆä¹‹åï¼Œé¡¹ç›®å°±å¯ä»¥ä¸Šçº¿è¿è¡Œäº†ï¼ŒåæœŸå¦‚æœé¡¹ç›®é‡åˆ°æ€§èƒ½ç“¶é¢ˆï¼Œè¿˜éœ€è¦å¯¹é¡¹ç›®è¿›è¡Œä¼˜åŒ–ã€‚ä¼˜åŒ–å¾ˆé‡è¦çš„ä¸€ä¸ªéƒ¨åˆ†å°±æ˜¯æ•°æ®åº“çš„ä¼˜åŒ–ï¼ŒåŒ…æ‹¬æ•°æ®åº“å½“ä¸­ç´¢å¼•çš„å»ºç«‹ã€SQL çš„ä¼˜åŒ–ã€åˆ†åº“åˆ†è¡¨ç­‰æ“ä½œã€‚</li></ul><p>åœ¨ä¸Šè¿°çš„æµç¨‹å½“ä¸­ï¼Œé’ˆå¯¹äºæ•°æ®åº“æ¥è¯´ï¼Œä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼š</p><ol><li>æ•°æ®åº“è®¾è®¡é˜¶æ®µ<ul><li>å‚ç…§é¡µé¢åŸå‹ä»¥åŠéœ€æ±‚æ–‡æ¡£è®¾è®¡æ•°æ®åº“è¡¨ç»“æ„</li></ul></li><li>æ•°æ®åº“æ“ä½œé˜¶æ®µ<ul><li>æ ¹æ®ä¸šåŠ¡åŠŸèƒ½çš„å®ç°ï¼Œç¼–å†™SQLè¯­å¥å¯¹æ•°æ®è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œ</li></ul></li><li>æ•°æ®åº“ä¼˜åŒ–é˜¶æ®µ<ul><li>é€šè¿‡æ•°æ®åº“çš„ä¼˜åŒ–æ¥æé«˜æ•°æ®åº“çš„è®¿é—®æ€§èƒ½ã€‚ä¼˜åŒ–æ‰‹æ®µï¼šç´¢å¼•ã€SQLä¼˜åŒ–ã€åˆ†åº“åˆ†è¡¨ç­‰</li></ul></li></ol><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å…ˆæ¥å­¦ä¹ ç¬¬ä¸€éƒ¨åˆ†æ•°æ®åº“çš„è®¾è®¡ï¼Œè€Œæ•°æ®åº“çš„è®¾è®¡å°±æ˜¯æ¥å®šä¹‰æ•°æ®åº“ï¼Œå®šä¹‰è¡¨ç»“æ„ä»¥åŠè¡¨ä¸­çš„å­—æ®µã€‚</p><h3 id="2-2-æ•°æ®åº“æ“ä½œ"><a href="#2-2-æ•°æ®åº“æ“ä½œ" class="headerlink" title="2.2 æ•°æ®åº“æ“ä½œ"></a>2.2 æ•°æ®åº“æ“ä½œ</h3><p>æˆ‘ä»¬åœ¨è¿›è¡Œæ•°æ®åº“è®¾è®¡ï¼Œéœ€è¦ä½¿ç”¨åˆ°åˆšæ‰æ‰€ä»‹ç»SQLåˆ†ç±»ä¸­çš„DDLè¯­å¥ã€‚</p><p>DDLè‹±æ–‡å…¨ç§°æ˜¯Data Definition Language(æ•°æ®å®šä¹‰è¯­è¨€)ï¼Œç”¨æ¥å®šä¹‰æ•°æ®åº“å¯¹è±¡(æ•°æ®åº“ã€è¡¨)ã€‚</p><p>DDLä¸­æ•°æ®åº“çš„å¸¸è§æ“ä½œï¼šæŸ¥è¯¢ã€åˆ›å»ºã€ä½¿ç”¨ã€åˆ é™¤ã€‚</p><h4 id="2-2-1-æŸ¥è¯¢æ•°æ®åº“"><a href="#2-2-1-æŸ¥è¯¢æ•°æ®åº“" class="headerlink" title="2.2.1 æŸ¥è¯¢æ•°æ®åº“"></a>2.2.1 æŸ¥è¯¢æ•°æ®åº“</h4><p><strong>æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“ï¼š</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">show databases;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å‘½ä»¤è¡Œä¸­æ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220829124104154.png"> </p><p><strong>æŸ¥è¯¢å½“å‰æ•°æ®åº“ï¼š</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select database();<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å‘½ä»¤è¡Œä¸­æ‰§è¡Œæ•ˆæœå¦‚æœï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205174615074.png"></p><blockquote><p>æˆ‘ä»¬è¦æ“ä½œæŸä¸€ä¸ªæ•°æ®åº“ï¼Œå¿…é¡»è¦åˆ‡æ¢åˆ°å¯¹åº”çš„æ•°æ®åº“ä¸­ã€‚ </p><p>é€šè¿‡æŒ‡ä»¤ï¼šselect  database() ï¼Œå°±å¯ä»¥æŸ¥è¯¢åˆ°å½“å‰æ‰€å¤„çš„æ•°æ®åº“ </p></blockquote><h4 id="2-2-2-åˆ›å»ºæ•°æ®åº“"><a href="#2-2-2-åˆ›å»ºæ•°æ®åº“" class="headerlink" title="2.2.2 åˆ›å»ºæ•°æ®åº“"></a>2.2.2 åˆ›å»ºæ•°æ®åº“</h4><p><strong>è¯­æ³•ï¼š</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create database [ if not exists ] æ•°æ®åº“å;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹ï¼š åˆ›å»ºä¸€ä¸ªitcastæ•°æ®åº“ã€‚</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create database itcast;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å‘½ä»¤è¡Œæ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220829124219427.png"> </p><p>==æ³¨æ„ï¼šåœ¨åŒä¸€ä¸ªæ•°æ®åº“æœåŠ¡å™¨ä¸­ï¼Œä¸èƒ½åˆ›å»ºä¸¤ä¸ªåç§°ç›¸åŒçš„æ•°æ®åº“ï¼Œå¦åˆ™å°†ä¼šæŠ¥é”™ã€‚==</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220829124250514.png"></p><ul><li>å¯ä»¥ä½¿ç”¨if not existsæ¥é¿å…è¿™ä¸ªé—®é¢˜</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- æ•°æ®åº“ä¸å­˜åœ¨,åˆ™åˆ›å»ºè¯¥æ•°æ®åº“ï¼›å¦‚æœå­˜åœ¨åˆ™ä¸åˆ›å»º</span><span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> extists itcast<span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p> å‘½ä»¤è¡Œæ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼š <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220829124326741.png"> </p><h4 id="2-2-3-ä½¿ç”¨æ•°æ®åº“"><a href="#2-2-3-ä½¿ç”¨æ•°æ®åº“" class="headerlink" title="2.2.3 ä½¿ç”¨æ•°æ®åº“"></a>2.2.3 ä½¿ç”¨æ•°æ®åº“</h4><p><strong>è¯­æ³•ï¼š</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">use æ•°æ®åº“å ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>æˆ‘ä»¬è¦æ“ä½œæŸä¸€ä¸ªæ•°æ®åº“ä¸‹çš„è¡¨æ—¶ï¼Œå°±éœ€è¦é€šè¿‡è¯¥æŒ‡ä»¤ï¼Œåˆ‡æ¢åˆ°å¯¹åº”çš„æ•°æ®åº“ä¸‹ï¼Œå¦åˆ™ä¸èƒ½æ“ä½œã€‚</p></blockquote><p>æ¡ˆä¾‹ï¼šåˆ‡æ¢åˆ°itcastæ•°æ®</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">use itcast;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å‘½ä»¤æ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220829124929708.png"> </p><h4 id="2-2-4-åˆ é™¤æ•°æ®åº“"><a href="#2-2-4-åˆ é™¤æ•°æ®åº“" class="headerlink" title="2.2.4 åˆ é™¤æ•°æ®åº“"></a>2.2.4 åˆ é™¤æ•°æ®åº“</h4><p><strong>è¯­æ³•ï¼š</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">drop database [ if exists ] æ•°æ®åº“å ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>å¦‚æœåˆ é™¤ä¸€ä¸ªä¸å­˜åœ¨çš„æ•°æ®åº“ï¼Œå°†ä¼šæŠ¥é”™ã€‚</p><p>å¯ä»¥åŠ ä¸Šå‚æ•° if exists ï¼Œå¦‚æœæ•°æ®åº“å­˜åœ¨ï¼Œå†æ‰§è¡Œåˆ é™¤ï¼Œå¦åˆ™ä¸æ‰§è¡Œåˆ é™¤ã€‚</p></blockquote><p>æ¡ˆä¾‹ï¼šåˆ é™¤itcastæ•°æ®åº“</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">drop database if exists itcast; -- itcastæ•°æ®åº“å­˜åœ¨æ—¶åˆ é™¤<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å‘½ä»¤æ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220829125006142.png"> </p><blockquote><p>è¯´æ˜ï¼šä¸Šè¿°è¯­æ³•ä¸­çš„databaseï¼Œä¹Ÿå¯ä»¥æ›¿æ¢æˆ schema</p><ul><li>å¦‚ï¼šcreate schema db01;</li><li>å¦‚ï¼šshow schemas;</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205180608004.png"></p></blockquote><h3 id="2-3-å›¾å½¢åŒ–å·¥å…·"><a href="#2-3-å›¾å½¢åŒ–å·¥å…·" class="headerlink" title="2.3 å›¾å½¢åŒ–å·¥å…·"></a>2.3 å›¾å½¢åŒ–å·¥å…·</h3><h4 id="2-3-1-ä»‹ç»"><a href="#2-3-1-ä»‹ç»" class="headerlink" title="2.3.1 ä»‹ç»"></a>2.3.1 ä»‹ç»</h4><p>å‰é¢æˆ‘ä»¬è®²è§£äº†DDLä¸­å…³äºæ•°æ®åº“æ“ä½œçš„SQLè¯­å¥ï¼Œåœ¨æˆ‘ä»¬ç¼–å†™è¿™äº›SQLæ—¶ï¼Œéƒ½æ˜¯åœ¨å‘½ä»¤è¡Œå½“ä¸­å®Œæˆçš„ã€‚å¤§å®¶åœ¨ç»ƒä¹ çš„æ—¶å€™åº”è¯¥ä¹Ÿæ„Ÿå—åˆ°äº†ï¼Œåœ¨å‘½ä»¤è¡Œå½“ä¸­æ¥æ•²è¿™äº›SQLè¯­å¥å¾ˆä¸æ–¹ä¾¿ï¼Œä¸»è¦çš„åŸå› æœ‰ä»¥ä¸‹ 3 ç‚¹ï¼š</p><ol><li>æ²¡æœ‰ä»»ä½•ä»£ç æç¤ºã€‚ï¼ˆå…¨é è®°å¿†ï¼Œå®¹æ˜“æ•²é”™å­—æ¯é€ æˆæ‰§è¡ŒæŠ¥é”™ï¼‰</li><li>æ“ä½œç¹çï¼Œå½±å“å¼€å‘æ•ˆç‡ã€‚ï¼ˆæ‰€æœ‰çš„åŠŸèƒ½æ“ä½œéƒ½æ˜¯é€šè¿‡SQLè¯­å¥æ¥å®Œæˆçš„ï¼‰</li><li>ç¼–å†™è¿‡çš„SQLä»£ç æ— æ³•ä¿å­˜ã€‚</li></ol><p>åœ¨é¡¹ç›®å¼€å‘å½“ä¸­ï¼Œé€šå¸¸ä¸ºäº†æé«˜å¼€å‘æ•ˆç‡ï¼Œéƒ½ä¼šå€ŸåŠ©äºç°æˆçš„å›¾å½¢åŒ–ç®¡ç†å·¥å…·æ¥æ“ä½œæ•°æ®åº“ã€‚</p><p>ç›®å‰MySQLä¸»æµçš„å›¾å½¢åŒ–ç•Œé¢å·¥å…·æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205184802646.png"></p><p>DataGripæ˜¯JetBrainsæ——ä¸‹çš„ä¸€æ¬¾æ•°æ®åº“ç®¡ç†å·¥å…·ï¼Œæ˜¯ç®¡ç†å’Œå¼€å‘MySQLã€Oracleã€PostgreSQLçš„ç†æƒ³è§£å†³æ–¹æ¡ˆã€‚</p><p>å®˜ç½‘ï¼š <a href="https://www.jetbrains.com/zh-cn/datagrip/">https://www.jetbrains.com/zh-cn/datagrip/</a></p><h4 id="2-3-2-å®‰è£…"><a href="#2-3-2-å®‰è£…" class="headerlink" title="2.3.2 å®‰è£…"></a>2.3.2 å®‰è£…</h4><p>å®‰è£…ï¼š å‚è€ƒèµ„æ–™ä¸­æä¾›çš„ã€ŠDataGripå®‰è£…æ‰‹å†Œã€‹</p><blockquote><p>è¯´æ˜ï¼šDataGripè¿™æ¬¾å·¥å…·å¯ä»¥ä¸ç”¨å®‰è£…ï¼Œå› ä¸ºJetbrainså…¬å¸å·²ç»å°†DataGripè¿™æ¬¾å·¥å…·çš„åŠŸèƒ½å·²ç»é›†æˆåˆ°äº† IDEAå½“ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨IDEAæ¥ä½œä¸ºä¸€æ¬¾å›¾å½¢åŒ–ç•Œé¢å·¥å…·æ¥æ“ä½œMysqlæ•°æ®åº“ã€‚</p></blockquote><h4 id="2-3-3-ä½¿ç”¨"><a href="#2-3-3-ä½¿ç”¨" class="headerlink" title="2.3.3 ä½¿ç”¨"></a>2.3.3 ä½¿ç”¨</h4><h5 id="2-2-3-1-è¿æ¥æ•°æ®åº“"><a href="#2-2-3-1-è¿æ¥æ•°æ®åº“" class="headerlink" title="2.2.3.1 è¿æ¥æ•°æ®åº“"></a>2.2.3.1 è¿æ¥æ•°æ®åº“</h5><p>1ã€æ‰“å¼€IDEAè‡ªå¸¦çš„Database</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205190929756.png"></p><p>2ã€é…ç½®MySQL</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205191143072.png"></p><p>3ã€è¾“å…¥ç›¸å…³ä¿¡æ¯</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205192606038.png"></p><p>4ã€ä¸‹è½½MySQLè¿æ¥é©±åŠ¨</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205192847190.png"></p><p>5ã€æµ‹è¯•æ•°æ®åº“è¿æ¥</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205193304124.png"></p><p>6ã€ä¿å­˜é…ç½®</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205193409856.png"></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿æ¥ä¸Šäº†MySQLæ•°æ®åº“ä¹‹åï¼Œ æ•°æ®åº“å¹¶æ²¡æœ‰å…¨éƒ¨å±•ç¤ºå‡ºæ¥ã€‚ éœ€è¦é€‰æ‹©è¦å±•ç¤ºå“ªäº›æ•°æ®åº“ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/8.gif"></p><h5 id="2-2-3-2-æ“ä½œæ•°æ®åº“"><a href="#2-2-3-2-æ“ä½œæ•°æ®åº“" class="headerlink" title="2.2.3.2 æ“ä½œæ•°æ®åº“"></a>2.2.3.2 æ“ä½œæ•°æ®åº“</h5><p><strong>åˆ›å»ºæ•°æ®åº“ï¼š</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205195346655.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205195510716.png"></p><blockquote><p>æœ‰äº†å›¾å½¢åŒ–ç•Œé¢å·¥å…·åï¼Œå°±å¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨å›¾å½¢åŒ–å·¥å…·ï¼šåˆ›å»ºæ•°æ®åº“ï¼Œåˆ›å»ºè¡¨ã€ä¿®æ”¹è¡¨ç­‰DDLæ“ä½œã€‚</p><p>å…¶å®å·¥å…·åº•å±‚ä¹Ÿæ˜¯é€šè¿‡DDLè¯­å¥æ“ä½œçš„æ•°æ®åº“ï¼Œåªä¸è¿‡è¿™äº›SQLè¯­å¥æ˜¯å›¾å½¢åŒ–ç•Œé¢å·¥å…·å¸®æˆ‘ä»¬è‡ªåŠ¨å®Œæˆçš„ã€‚</p></blockquote><p><strong>æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼š</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205195128343.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205195833439.png"></p><h3 id="2-3-è¡¨æ“ä½œ"><a href="#2-3-è¡¨æ“ä½œ" class="headerlink" title="2.3 è¡¨æ“ä½œ"></a>2.3 è¡¨æ“ä½œ</h3><p>å­¦ä¹ å®Œäº†DDLè¯­å¥å½“ä¸­å…³äºæ•°æ®åº“çš„æ“ä½œä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­å­¦ä¹ DDLè¯­å¥å½“ä¸­å…³äºè¡¨ç»“æ„çš„æ“ä½œã€‚</p><p>å…³äºè¡¨ç»“æ„çš„æ“ä½œä¹Ÿæ˜¯åŒ…å«å››ä¸ªéƒ¨åˆ†ï¼šåˆ›å»ºè¡¨ã€æŸ¥è¯¢è¡¨ã€ä¿®æ”¹è¡¨ã€åˆ é™¤è¡¨ã€‚</p><h4 id="2-3-1-åˆ›å»º"><a href="#2-3-1-åˆ›å»º" class="headerlink" title="2.3.1 åˆ›å»º"></a>2.3.1 åˆ›å»º</h4><h5 id="2-3-1-1-è¯­æ³•"><a href="#2-3-1-1-è¯­æ³•" class="headerlink" title="2.3.1.1 è¯­æ³•"></a>2.3.1.1 è¯­æ³•</h5><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create table  è¡¨å(å­—æ®µ1  å­—æ®µ1ç±»å‹ [çº¦æŸ]  [comment  å­—æ®µ1æ³¨é‡Š ],å­—æ®µ2  å­—æ®µ2ç±»å‹ [çº¦æŸ]  [comment  å­—æ®µ2æ³¨é‡Š ],......å­—æ®µn  å­—æ®µnç±»å‹ [çº¦æŸ]  [comment  å­—æ®µnæ³¨é‡Š ] ) [ comment  è¡¨æ³¨é‡Š ] ;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ³¨æ„ï¼š [ ] ä¸­çš„å†…å®¹ä¸ºå¯é€‰å‚æ•°ï¼› æœ€åä¸€ä¸ªå­—æ®µåé¢æ²¡æœ‰é€—å·</p></blockquote><p>æ¡ˆä¾‹ï¼šåˆ›å»ºtb_userè¡¨</p><ul><li>å¯¹åº”çš„ç»“æ„å¦‚ä¸‹ï¼š</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220829143005524.png">  </p><ul><li>å»ºè¡¨è¯­å¥ï¼š</li></ul><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create table tb_user (    id int comment 'ID,å”¯ä¸€æ ‡è¯†',   # idæ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼ˆä¸èƒ½é‡å¤ï¼‰    username varchar(20) comment 'ç”¨æˆ·å',    name varchar(10) comment 'å§“å',    age int comment 'å¹´é¾„',    gender char(1) comment 'æ€§åˆ«') comment 'ç”¨æˆ·è¡¨';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ•°æ®è¡¨åˆ›å»ºå®Œæˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦æµ‹è¯•ä¸€ä¸‹æ˜¯å¦å¯ä»¥å¾€è¿™å¼ è¡¨ç»“æ„å½“ä¸­æ¥å­˜å‚¨æ•°æ®ã€‚</p></blockquote><p>åŒå‡»æ‰“å¼€tb_userè¡¨ç»“æ„ï¼Œå¤§å®¶ä¼šå‘ç°é‡Œé¢æ²¡æœ‰æ•°æ®ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205211008929.png"></p><p>æ·»åŠ æ•°æ®ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/9.gif"> </p><p>æ­¤æ—¶æˆ‘ä»¬å†æ’å…¥ä¸€æ¡æ•°æ®ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205214447060.png"> </p><p>æˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡ï¼šidå­—æ®µæ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼Œä¸èƒ½æœ‰é‡å¤å€¼ã€‚ä½†æ˜¯ç°åœ¨æ•°æ®è¡¨ä¸­æœ‰ä¸¤ä¸ªç›¸åŒçš„idå€¼ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><ul><li>å…¶å®æˆ‘ä»¬ç°åœ¨åˆ›å»ºè¡¨ç»“æ„çš„æ—¶å€™ï¼Œ idè¿™ä¸ªå­—æ®µæˆ‘ä»¬åªåŠ äº†ä¸€ä¸ªå¤‡æ³¨ä¿¡æ¯è¯´æ˜å®ƒæ˜¯ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œä½†æ˜¯åœ¨æ•°æ®åº“å±‚é¢å‘¢ï¼Œå¹¶æ²¡æœ‰å»é™åˆ¶å­—æ®µå­˜å‚¨çš„æ•°æ®ã€‚æ‰€ä»¥idè¿™ä¸ªå­—æ®µæ²¡æœ‰èµ·åˆ°å”¯ä¸€æ ‡è¯†çš„ä½œç”¨ã€‚</li></ul><blockquote><p>æƒ³è¦é™åˆ¶å­—æ®µæ‰€å­˜å‚¨çš„æ•°æ®ï¼Œå°±éœ€è¦ç”¨åˆ°æ•°æ®åº“ä¸­çš„çº¦æŸã€‚</p></blockquote><h5 id="2-3-1-2-çº¦æŸ"><a href="#2-3-1-2-çº¦æŸ" class="headerlink" title="2.3.1.2 çº¦æŸ"></a>2.3.1.2 çº¦æŸ</h5><p>æ¦‚å¿µï¼šæ‰€è°“çº¦æŸå°±æ˜¯ä½œç”¨åœ¨è¡¨ä¸­å­—æ®µä¸Šçš„è§„åˆ™ï¼Œç”¨äºé™åˆ¶å­˜å‚¨åœ¨è¡¨ä¸­çš„æ•°æ®ã€‚</p><p>ä½œç”¨ï¼šå°±æ˜¯æ¥ä¿è¯æ•°æ®åº“å½“ä¸­æ•°æ®çš„æ­£ç¡®æ€§ã€æœ‰æ•ˆæ€§å’Œå®Œæ•´æ€§ã€‚ï¼ˆåé¢çš„å­¦ä¹ ä¼šéªŒè¯è¿™äº›ï¼‰</p><p>åœ¨MySQLæ•°æ®åº“å½“ä¸­ï¼Œæä¾›äº†ä»¥ä¸‹5ç§çº¦æŸï¼š</p><table><thead><tr><th><strong>çº¦æŸ</strong></th><th><strong>æè¿°</strong></th><th><strong>å…³é”®å­—</strong></th></tr></thead><tbody><tr><td>éç©ºçº¦æŸ</td><td>é™åˆ¶è¯¥å­—æ®µå€¼ä¸èƒ½ä¸ºnull</td><td>not null</td></tr><tr><td>å”¯ä¸€çº¦æŸ</td><td>ä¿è¯å­—æ®µçš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯å”¯ä¸€ã€ä¸é‡å¤çš„</td><td>unique</td></tr><tr><td>ä¸»é”®çº¦æŸ</td><td>ä¸»é”®æ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼Œè¦æ±‚éç©ºä¸”å”¯ä¸€</td><td>primary key</td></tr><tr><td>é»˜è®¤çº¦æŸ</td><td>ä¿å­˜æ•°æ®æ—¶ï¼Œå¦‚æœæœªæŒ‡å®šè¯¥å­—æ®µå€¼ï¼Œåˆ™é‡‡ç”¨é»˜è®¤å€¼</td><td>default</td></tr><tr><td>å¤–é”®çº¦æŸ</td><td>è®©ä¸¤å¼ è¡¨çš„æ•°æ®å»ºç«‹è¿æ¥ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§</td><td>foreign key</td></tr></tbody></table><blockquote><p>æ³¨æ„ï¼šçº¦æŸæ˜¯ä½œç”¨äºè¡¨ä¸­å­—æ®µä¸Šçš„ï¼Œå¯ä»¥åœ¨åˆ›å»ºè¡¨/ä¿®æ”¹è¡¨çš„æ—¶å€™æ·»åŠ çº¦æŸã€‚</p></blockquote><p>æ¡ˆä¾‹ï¼šåˆ›å»ºtb_userè¡¨</p><ul><li><p>å¯¹åº”çš„ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241130130716701.png"></p></li></ul><blockquote><p>åœ¨ä¸Šè¿°çš„è¡¨ç»“æ„ä¸­:</p><ul><li><p>id æ˜¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†</p></li><li><p>username ç”¨æˆ·åå­—æ®µæ˜¯éç©ºä¸”å”¯ä¸€çš„</p></li><li><p>name å§“åå­—æ®µæ˜¯ä¸å…è®¸å­˜å‚¨ç©ºå€¼çš„</p></li><li><p>gender æ€§åˆ«å­—æ®µæ˜¯æœ‰é»˜è®¤å€¼ï¼Œé»˜è®¤ä¸ºç”·</p></li></ul></blockquote><ul><li>å»ºè¡¨è¯­å¥ï¼š</li></ul><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create table tb_user (    id int primary key comment 'ID,å”¯ä¸€æ ‡è¯†',     username varchar(20) not null unique comment 'ç”¨æˆ·å',    name varchar(10) not null comment 'å§“å',    age int comment 'å¹´é¾„',    gender char(1) default 'ç”·' comment 'æ€§åˆ«') comment 'ç”¨æˆ·è¡¨';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ•°æ®è¡¨åˆ›å»ºå®Œæˆï¼Œæ¥ä¸‹æ¥æµ‹è¯•ä¸€ä¸‹è¡¨ä¸­å­—æ®µä¸Šçš„çº¦æŸæ˜¯å¦ç”Ÿæ•ˆ</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205215309011.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205215632599.png"></p><p>å¤§å®¶æœ‰æ²¡æœ‰å‘ç°ä¸€ä¸ªé—®é¢˜ï¼šidå­—æ®µä¸‹å­˜å‚¨çš„å€¼ï¼Œå¦‚æœç”±æˆ‘ä»¬è‡ªå·±æ¥ç»´æŠ¤ä¼šæ¯”è¾ƒéº»çƒ¦(å¿…é¡»ä¿è¯å€¼çš„å”¯ä¸€æ€§)ã€‚MySQLæ•°æ®åº“ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå…³é”®å­—ï¼šauto_incrementï¼ˆè‡ªåŠ¨å¢é•¿ï¼‰</p><blockquote><p>ä¸»é”®è‡ªå¢ï¼šauto_increment</p><ul><li>æ¯æ¬¡æ’å…¥æ–°çš„è¡Œè®°å½•æ—¶ï¼Œæ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆidå­—æ®µ(ä¸»é”®)ä¸‹çš„å€¼</li><li>å…·æœ‰auto_incrementçš„æ•°æ®åˆ—æ˜¯ä¸€ä¸ªæ­£æ•°åºåˆ—å¼€å§‹å¢é•¿(ä»1å¼€å§‹è‡ªå¢)</li></ul></blockquote><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create table tb_user (    id int primary key auto_increment comment 'ID,å”¯ä¸€æ ‡è¯†', #ä¸»é”®è‡ªåŠ¨å¢é•¿    username varchar(20) not null unique comment 'ç”¨æˆ·å',    name varchar(10) not null comment 'å§“å',    age int comment 'å¹´é¾„',    gender char(1) default 'ç”·' comment 'æ€§åˆ«') comment 'ç”¨æˆ·è¡¨';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•ï¼šä¸»é”®è‡ªå¢</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/10.gif"></p><h5 id="2-3-1-3-æ•°æ®ç±»å‹"><a href="#2-3-1-3-æ•°æ®ç±»å‹" class="headerlink" title="2.3.1.3 æ•°æ®ç±»å‹"></a>2.3.1.3 æ•°æ®ç±»å‹</h5><p>åœ¨ä¸Šé¢å»ºè¡¨è¯­å¥ä¸­ï¼Œæˆ‘ä»¬åœ¨æŒ‡å®šå­—æ®µçš„æ•°æ®ç±»å‹æ—¶ï¼Œç”¨åˆ°äº†int ã€varcharã€charï¼Œé‚£ä¹ˆåœ¨MySQLä¸­é™¤äº†ä»¥ä¸Šçš„æ•°æ®ç±»å‹ï¼Œè¿˜æœ‰å“ªäº›å¸¸è§çš„æ•°æ®ç±»å‹å‘¢ï¼Ÿ æ¥ä¸‹æ¥,æˆ‘ä»¬å°±æ¥è¯¦ç»†ä»‹ç»ä¸€ä¸‹MySQLçš„æ•°æ®ç±»å‹ã€‚</p><p>MySQLä¸­çš„æ•°æ®ç±»å‹æœ‰å¾ˆå¤šï¼Œä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼šæ•°å€¼ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹ã€æ—¥æœŸæ—¶é—´ç±»å‹ã€‚</p><p><strong>æ•°å€¼ç±»å‹</strong></p><table><thead><tr><th>ç±»å‹</th><th>å¤§å°</th><th>æœ‰ç¬¦å·(SIGNED)èŒƒå›´</th><th>æ— ç¬¦å·(UNSIGNED)èŒƒå›´</th><th>æè¿°</th></tr></thead><tbody><tr><td>TINYINT</td><td>1byte</td><td>(-128ï¼Œ127)</td><td>(0ï¼Œ255)</td><td>å°æ•´æ•°å€¼</td></tr><tr><td>SMALLINT</td><td>2bytes</td><td>(-32768ï¼Œ32767)</td><td>(0ï¼Œ65535)</td><td>å¤§æ•´æ•°å€¼</td></tr><tr><td>MEDIUMINT</td><td>3bytes</td><td>(-8388608ï¼Œ8388607)</td><td>(0ï¼Œ16777215)</td><td>å¤§æ•´æ•°å€¼</td></tr><tr><td>INT/INTEGER</td><td>4bytes</td><td>(-2147483648ï¼Œ2147483647)</td><td>(0ï¼Œ4294967295)</td><td>å¤§æ•´æ•°å€¼</td></tr><tr><td>BIGINT</td><td>8bytes</td><td>(-2^63ï¼Œ2^63-1)</td><td>(0ï¼Œ2^64-1)</td><td>æå¤§æ•´æ•°å€¼</td></tr><tr><td>FLOAT</td><td>4bytes</td><td>(-3.402823466 E+38ï¼Œ3.402823466351 E+38)</td><td>0 å’Œ (1.175494351  E-38ï¼Œ3.402823466 E+38)</td><td>å•ç²¾åº¦æµ®ç‚¹æ•°å€¼</td></tr><tr><td>DOUBLE</td><td>8bytes</td><td>(-1.7976931348623157 E+308ï¼Œ1.7976931348623157 E+308)</td><td>0 å’Œ  (2.2250738585072014 E-308ï¼Œ1.7976931348623157 E+308)</td><td>åŒç²¾åº¦æµ®ç‚¹æ•°å€¼</td></tr><tr><td>DECIMAL</td><td></td><td>ä¾èµ–äºM(ç²¾åº¦)å’ŒD(æ ‡åº¦)çš„å€¼</td><td>ä¾èµ–äºM(ç²¾åº¦)å’ŒD(æ ‡åº¦)çš„å€¼</td><td>å°æ•°å€¼(ç²¾ç¡®å®šç‚¹æ•°)</td></tr></tbody></table><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">ç¤ºä¾‹:     å¹´é¾„å­—æ®µ <span class="token comment">---ä¸ä¼šå‡ºç°è´Ÿæ•°, è€Œä¸”äººçš„å¹´é¾„ä¸ä¼šå¤ªå¤§</span>age <span class="token keyword">tinyint</span> <span class="token keyword">unsigned</span>åˆ†æ•° <span class="token comment">---æ€»åˆ†100åˆ†, æœ€å¤šå‡ºç°ä¸€ä½å°æ•°</span>score <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å­—ç¬¦ä¸²ç±»å‹</strong></p><table><thead><tr><th>ç±»å‹</th><th>å¤§å°</th><th>æè¿°</th></tr></thead><tbody><tr><td>CHAR</td><td>0-255 bytes</td><td>å®šé•¿å­—ç¬¦ä¸²(éœ€è¦æŒ‡å®šé•¿åº¦)</td></tr><tr><td>VARCHAR</td><td>0-65535 bytes</td><td>å˜é•¿å­—ç¬¦ä¸²(éœ€è¦æŒ‡å®šé•¿åº¦)</td></tr><tr><td>TINYBLOB</td><td>0-255 bytes</td><td>ä¸è¶…è¿‡255ä¸ªå­—ç¬¦çš„äºŒè¿›åˆ¶æ•°æ®</td></tr><tr><td>TINYTEXT</td><td>0-255 bytes</td><td>çŸ­æ–‡æœ¬å­—ç¬¦ä¸²</td></tr><tr><td>BLOB</td><td>0-65 535 bytes</td><td>äºŒè¿›åˆ¶å½¢å¼çš„é•¿æ–‡æœ¬æ•°æ®</td></tr><tr><td>TEXT</td><td>0-65 535 bytes</td><td>é•¿æ–‡æœ¬æ•°æ®</td></tr><tr><td>MEDIUMBLOB</td><td>0-16 777 215 bytes</td><td>äºŒè¿›åˆ¶å½¢å¼çš„ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ®</td></tr><tr><td>MEDIUMTEXT</td><td>0-16 777 215 bytes</td><td>ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ®</td></tr><tr><td>LONGBLOB</td><td>0-4 294 967 295 bytes</td><td>äºŒè¿›åˆ¶å½¢å¼çš„æå¤§æ–‡æœ¬æ•°æ®</td></tr><tr><td>LONGTEXT</td><td>0-4 294 967 295 bytes</td><td>æå¤§æ–‡æœ¬æ•°æ®</td></tr></tbody></table><p>char ä¸ varchar éƒ½å¯ä»¥æè¿°å­—ç¬¦ä¸²ï¼Œcharæ˜¯å®šé•¿å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šé•¿åº¦å¤šé•¿ï¼Œå°±å ç”¨å¤šå°‘ä¸ªå­—ç¬¦ï¼Œå’Œå­—æ®µå€¼çš„é•¿åº¦æ— å…³ ã€‚è€Œvarcharæ˜¯å˜é•¿å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šçš„é•¿åº¦ä¸ºæœ€å¤§å ç”¨é•¿åº¦ ã€‚ç›¸å¯¹æ¥è¯´ï¼Œcharçš„æ€§èƒ½ä¼šæ›´é«˜äº›ã€‚</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">ç¤ºä¾‹ï¼š     ç”¨æˆ·å username <span class="token comment">---é•¿åº¦ä¸å®š, æœ€é•¿ä¸ä¼šè¶…è¿‡50</span>username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>æ‰‹æœºå· phone <span class="token comment">---å›ºå®šé•¿åº¦ä¸º11</span>phone <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ—¥æœŸæ—¶é—´ç±»å‹</strong></p><table><thead><tr><th>ç±»å‹</th><th>å¤§å°</th><th>èŒƒå›´</th><th>æ ¼å¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>DATE</td><td>3</td><td>1000-01-01 è‡³  9999-12-31</td><td>YYYY-MM-DD</td><td>æ—¥æœŸå€¼</td></tr><tr><td>TIME</td><td>3</td><td>-838:59:59 è‡³  838:59:59</td><td>HH:MM:SS</td><td>æ—¶é—´å€¼æˆ–æŒç»­æ—¶é—´</td></tr><tr><td>YEAR</td><td>1</td><td>1901 è‡³ 2155</td><td>YYYY</td><td>å¹´ä»½å€¼</td></tr><tr><td>DATETIME</td><td>8</td><td>1000-01-01 00:00:00 è‡³ 9999-12-31 23:59:59</td><td>YYYY-MM-DD HH:MM:SS</td><td>æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼</td></tr><tr><td>TIMESTAMP</td><td>4</td><td>1970-01-01 00:00:01 è‡³ 2038-01-19 03:14:07</td><td>YYYY-MM-DD HH:MM:SS</td><td>æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼ï¼Œæ—¶é—´æˆ³</td></tr></tbody></table><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">ç¤ºä¾‹: ç”Ÿæ—¥å­—æ®µ  birthday <span class="token comment">---ç”Ÿæ—¥åªéœ€è¦å¹´æœˆæ—¥  </span>birthday <span class="token keyword">date</span>åˆ›å»ºæ—¶é—´ createtime <span class="token comment">--- éœ€è¦ç²¾ç¡®åˆ°æ—¶åˆ†ç§’</span>createtime  <span class="token keyword">datetime</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="2-3-1-4-æ¡ˆä¾‹"><a href="#2-3-1-4-æ¡ˆä¾‹" class="headerlink" title="2.3.1.4 æ¡ˆä¾‹"></a>2.3.1.4 æ¡ˆä¾‹</h5><p>éœ€æ±‚ï¼šæ ¹æ®äº§å“åŸå‹/éœ€æ±‚åˆ›å»ºè¡¨((è®¾è®¡åˆç†çš„æ•°æ®ç±»å‹ã€é•¿åº¦ã€çº¦æŸ) </p><blockquote><p>å‚è€ƒèµ„æ–™ä¸­æä¾›çš„ã€Šé»‘é©¬-tliasæ™ºèƒ½å­¦ä¹ è¾…åŠ©ç³»ç»Ÿã€‹é¡µé¢åŸå‹ï¼Œè®¾è®¡å‘˜å·¥ç®¡ç†æ¨¡å—çš„è¡¨ç»“æ„</p><p>æš‚ä¸è€ƒè™‘æ‰€å±éƒ¨é—¨å­—æ®µ</p></blockquote><p>äº§å“åŸå‹åŠéœ€æ±‚å¦‚ä¸‹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220829151032029.png"></p><p> <img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220829151228102.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220829151245450.png"></p><p><strong>æ­¥éª¤ï¼š</strong></p><ol><li><p>é˜…è¯»äº§å“åŸå‹åŠéœ€æ±‚æ–‡æ¡£ï¼Œçœ‹çœ‹é‡Œé¢æ¶‰åŠåˆ°å“ªäº›å­—æ®µã€‚</p></li><li><p>æŸ¥çœ‹éœ€æ±‚æ–‡æ¡£è¯´æ˜ï¼Œç¡®è®¤å„ä¸ªå­—æ®µçš„ç±»å‹ä»¥åŠå­—æ®µå­˜å‚¨æ•°æ®çš„é•¿åº¦é™åˆ¶ã€‚</p></li><li><p>åœ¨é¡µé¢åŸå‹ä¸­æè¿°çš„åŸºç¡€å­—æ®µçš„åŸºç¡€ä¸Šï¼Œå†å¢åŠ é¢å¤–çš„åŸºç¡€å­—æ®µã€‚</p></li></ol><p>ä½¿ç”¨SQLåˆ›å»ºè¡¨ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> emp <span class="token punctuation">(</span>  id <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span> <span class="token string">'ID'</span><span class="token punctuation">,</span>  username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">unique</span> <span class="token keyword">comment</span> <span class="token string">'ç”¨æˆ·å'</span><span class="token punctuation">,</span>  password <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">'123456'</span> <span class="token keyword">comment</span> <span class="token string">'å¯†ç '</span><span class="token punctuation">,</span>  name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'å§“å'</span><span class="token punctuation">,</span>  gender <span class="token keyword">tinyint</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'æ€§åˆ«, è¯´æ˜: 1 ç”·, 2 å¥³'</span><span class="token punctuation">,</span>  image <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'å›¾åƒ'</span><span class="token punctuation">,</span>  job <span class="token keyword">tinyint</span> <span class="token keyword">unsigned</span> <span class="token keyword">comment</span> <span class="token string">'èŒä½, è¯´æ˜: 1 ç­ä¸»ä»»,2 è®²å¸ˆ, 3 å­¦å·¥ä¸»ç®¡, 4 æ•™ç ”ä¸»ç®¡'</span><span class="token punctuation">,</span>  entrydate <span class="token keyword">date</span> <span class="token keyword">comment</span> <span class="token string">'å…¥èŒæ—¶é—´'</span><span class="token punctuation">,</span>  create_time <span class="token keyword">datetime</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'åˆ›å»ºæ—¶é—´'</span><span class="token punctuation">,</span>  update_time <span class="token keyword">datetime</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'ä¿®æ”¹æ—¶é—´'</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'å‘˜å·¥è¡¨'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é™¤äº†ä½¿ç”¨SQLè¯­å¥åˆ›å»ºè¡¨å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å€ŸåŠ©äºå›¾å½¢åŒ–ç•Œé¢æ¥åˆ›å»ºè¡¨ç»“æ„ï¼Œè¿™ç§åˆ›å»ºæ–¹å¼ä¼šæ›´åŠ ç›´è§‚ã€æ›´åŠ æ–¹ä¾¿ã€‚</p><p>æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åœ¨æŒ‡å®šæ“ä½œçš„æ•°æ®åº“ä¸Šï¼Œå³é”®New ==&gt; Table</li></ol><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205230447721.png"></p><ol start="2"><li>ç¼–è¾‘è¡¨ç»“æ„çš„ç›¸å…³ä¿¡æ¯</li></ol><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205231846161.png"></p><h5 id="2-3-1-5-è®¾è®¡è¡¨æµç¨‹"><a href="#2-3-1-5-è®¾è®¡è¡¨æµç¨‹" class="headerlink" title="2.3.1.5 è®¾è®¡è¡¨æµç¨‹"></a>2.3.1.5 è®¾è®¡è¡¨æµç¨‹</h5><p>é€šè¿‡ä¸Šé¢çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬æ˜ç™½äº†ï¼Œè®¾è®¡ä¸€å¼ è¡¨ï¼ŒåŸºæœ¬çš„æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li><p>é˜…è¯»é¡µé¢åŸå‹åŠéœ€æ±‚æ–‡æ¡£</p></li><li><p>åŸºäºé¡µé¢åŸåˆ™å’Œéœ€æ±‚æ–‡æ¡£ï¼Œç¡®å®šåŸå‹å­—æ®µ(ç±»å‹ã€é•¿åº¦é™åˆ¶ã€çº¦æŸ)</p></li><li><p>å†å¢åŠ è¡¨è®¾è®¡æ‰€éœ€è¦çš„ä¸šåŠ¡åŸºç¡€å­—æ®µ(idä¸»é”®ã€æ’å…¥æ—¶é—´ã€ä¿®æ”¹æ—¶é—´)</p></li></ol><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205232253088.png"></p><blockquote><p>è¯´æ˜ï¼š</p><ul><li><p>create_timeï¼šè®°å½•çš„æ˜¯å½“å‰è¿™æ¡æ•°æ®æ’å…¥çš„æ—¶é—´ã€‚ </p></li><li><p>update_timeï¼šè®°å½•å½“å‰è¿™æ¡æ•°æ®æœ€åæ›´æ–°çš„æ—¶é—´ã€‚</p></li></ul></blockquote><h4 id="2-3-2-æŸ¥è¯¢"><a href="#2-3-2-æŸ¥è¯¢" class="headerlink" title="2.3.2 æŸ¥è¯¢"></a>2.3.2 æŸ¥è¯¢</h4><blockquote><p>å…³äºè¡¨ç»“æ„çš„æŸ¥è¯¢æ“ä½œï¼Œå·¥ä½œä¸­ä¸€èˆ¬éƒ½æ˜¯ç›´æ¥åŸºäº<strong>å›¾å½¢åŒ–ç•Œé¢æ“ä½œ</strong>ã€‚ </p></blockquote><p><strong>æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">show tables;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205233746548.png"></p><p><strong>æŸ¥çœ‹æŒ‡å®šè¡¨ç»“æ„</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">desc è¡¨å ;#å¯ä»¥æŸ¥çœ‹æŒ‡å®šè¡¨çš„å­—æ®µã€å­—æ®µçš„ç±»å‹ã€æ˜¯å¦å¯ä»¥ä¸ºNULLã€æ˜¯å¦å­˜åœ¨é»˜è®¤å€¼ç­‰ä¿¡æ¯<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205234114053.png"></p><p><strong>æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">show create table è¡¨å ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205234334696.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205234444906.png"></p><h4 id="2-3-3-ä¿®æ”¹"><a href="#2-3-3-ä¿®æ”¹" class="headerlink" title="2.3.3 ä¿®æ”¹"></a>2.3.3 ä¿®æ”¹</h4><blockquote><p>å…³äºè¡¨ç»“æ„çš„ä¿®æ”¹æ“ä½œï¼Œå·¥ä½œä¸­ä¸€èˆ¬éƒ½æ˜¯ç›´æ¥åŸºäº<strong>å›¾å½¢åŒ–ç•Œé¢æ“ä½œ</strong>ã€‚ </p></blockquote><p><strong>æ·»åŠ å­—æ®µ</strong></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> è¡¨å <span class="token keyword">add</span>  å­—æ®µå  ç±»å‹<span class="token punctuation">(</span>é•¿åº¦<span class="token punctuation">)</span>  <span class="token punctuation">[</span><span class="token keyword">comment</span> æ³¨é‡Š<span class="token punctuation">]</span>  <span class="token punctuation">[</span>çº¦æŸ<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹ï¼š ä¸ºtb_empè¡¨æ·»åŠ å­—æ®µqqï¼Œå­—æ®µç±»å‹ä¸º varchar(11)</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> tb_emp <span class="token keyword">add</span>  qq  <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'QQå·ç '</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>å›¾å½¢åŒ–æ“ä½œï¼šæ·»åŠ å­—æ®µ</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205235542272.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205235657807.png"></p><p><strong>ä¿®æ”¹æ•°æ®ç±»å‹</strong></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">alter table è¡¨å modify  å­—æ®µå  æ–°æ•°æ®ç±»å‹(é•¿åº¦);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> è¡¨å change  æ—§å­—æ®µå  æ–°å­—æ®µå  ç±»å‹<span class="token punctuation">(</span>é•¿åº¦<span class="token punctuation">)</span>  <span class="token punctuation">[</span><span class="token keyword">comment</span> æ³¨é‡Š<span class="token punctuation">]</span>  <span class="token punctuation">[</span>çº¦æŸ<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹ï¼šä¿®æ”¹qqå­—æ®µçš„å­—æ®µç±»å‹ï¼Œå°†å…¶é•¿åº¦ç”±11ä¿®æ”¹ä¸º13</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> tb_emp <span class="token keyword">modify</span> qq <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'QQå·ç '</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹ï¼šä¿®æ”¹qqå­—æ®µåä¸º qq_numï¼Œå­—æ®µç±»å‹varchar(13)</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> tb_emp change qq qq_num <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'QQå·ç '</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>å›¾å½¢åŒ–æ“ä½œï¼šä¿®æ”¹æ•°æ®ç±»å‹å’Œå­—æ®µå</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221205235950010.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206000030734.png"></p><p><strong>åˆ é™¤å­—æ®µ</strong></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> è¡¨å <span class="token keyword">drop</span> å­—æ®µå<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹ï¼šåˆ é™¤tb_empè¡¨ä¸­çš„qq_numå­—æ®µ</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> tb_emp <span class="token keyword">drop</span> qq_num<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>å›¾å½¢åŒ–æ“ä½œï¼šåˆ é™¤å­—æ®µ</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206000159237.png"></p><p><strong>ä¿®æ”¹è¡¨å</strong></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">rename</span> <span class="token keyword">table</span> è¡¨å <span class="token keyword">to</span>  æ–°è¡¨å<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹ï¼šå°†å½“å‰çš„tb_empè¡¨çš„è¡¨åä¿®æ”¹ä¸ºemp</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">rename table tb_emp to emp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>å›¾å½¢åŒ–æ“ä½œï¼šä¿®æ”¹è¡¨å</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206000636659.png"></p><h4 id="2-3-4-åˆ é™¤"><a href="#2-3-4-åˆ é™¤" class="headerlink" title="2.3.4 åˆ é™¤"></a>2.3.4 åˆ é™¤</h4><blockquote><p>å…³äºè¡¨ç»“æ„çš„åˆ é™¤æ“ä½œï¼Œå·¥ä½œä¸­ä¸€èˆ¬éƒ½æ˜¯ç›´æ¥åŸºäº<strong>å›¾å½¢åŒ–ç•Œé¢æ“ä½œ</strong>ã€‚ </p></blockquote><p>åˆ é™¤è¡¨è¯­æ³•ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">drop</span>  <span class="token keyword">table</span> <span class="token punctuation">[</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> <span class="token punctuation">]</span>  è¡¨å<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>if exists ï¼šåªæœ‰è¡¨åå­˜åœ¨æ—¶æ‰ä¼šåˆ é™¤è¯¥è¡¨ï¼Œè¡¨åä¸å­˜åœ¨ï¼Œåˆ™ä¸æ‰§è¡Œåˆ é™¤æ“ä½œ(å¦‚æœä¸åŠ è¯¥å‚æ•°é¡¹ï¼Œåˆ é™¤ä¸€å¼ ä¸å­˜åœ¨çš„è¡¨ï¼Œæ‰§è¡Œå°†ä¼šæŠ¥é”™)ã€‚</p></blockquote><p>æ¡ˆä¾‹ï¼šå¦‚æœtb_empè¡¨å­˜åœ¨ï¼Œåˆ™åˆ é™¤tb_empè¡¨</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">drop table if exists tb_emp;  -- åœ¨åˆ é™¤è¡¨æ—¶ï¼Œè¡¨ä¸­çš„å…¨éƒ¨æ•°æ®ä¹Ÿä¼šè¢«åˆ é™¤ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>å›¾å½¢åŒ–æ“ä½œï¼šåˆ é™¤è¡¨</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206001026916.png"> </p><h2 id="3-æ•°æ®åº“æ“ä½œ-DML"><a href="#3-æ•°æ®åº“æ“ä½œ-DML" class="headerlink" title="3. æ•°æ®åº“æ“ä½œ-DML"></a>3. æ•°æ®åº“æ“ä½œ-DML</h2><p>DMLè‹±æ–‡å…¨ç§°æ˜¯Data Manipulation Language(æ•°æ®æ“ä½œè¯­è¨€)ï¼Œç”¨æ¥å¯¹æ•°æ®åº“ä¸­è¡¨çš„æ•°æ®è®°å½•è¿›è¡Œå¢ã€åˆ ã€æ”¹æ“ä½œã€‚</p><ul><li>æ·»åŠ æ•°æ®ï¼ˆINSERTï¼‰</li><li>ä¿®æ”¹æ•°æ®ï¼ˆUPDATEï¼‰</li><li>åˆ é™¤æ•°æ®ï¼ˆDELETEï¼‰</li></ul><h3 id="3-1-å¢åŠ -insert"><a href="#3-1-å¢åŠ -insert" class="headerlink" title="3.1 å¢åŠ (insert)"></a>3.1 å¢åŠ (insert)</h3><p>insertè¯­æ³•ï¼š</p><ul><li><p>å‘æŒ‡å®šå­—æ®µæ·»åŠ æ•°æ®</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">insert into è¡¨å (å­—æ®µå1, å­—æ®µå2) values (å€¼1, å€¼2);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>å…¨éƒ¨å­—æ®µæ·»åŠ æ•°æ®</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">insert into è¡¨å values (å€¼1, å€¼2, ...);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>æ‰¹é‡æ·»åŠ æ•°æ®ï¼ˆæŒ‡å®šå­—æ®µï¼‰</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">insert into è¡¨å (å­—æ®µå1, å­—æ®µå2) values (å€¼1, å€¼2), (å€¼1, å€¼2);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>æ‰¹é‡æ·»åŠ æ•°æ®ï¼ˆå…¨éƒ¨å­—æ®µï¼‰</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">insert into è¡¨å values (å€¼1, å€¼2, ...), (å€¼1, å€¼2, ...);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><p>æ¡ˆä¾‹1ï¼šå‘tb_empè¡¨çš„usernameã€nameã€genderå­—æ®µæ’å…¥æ•°æ®</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">-- å› ä¸ºè®¾è®¡è¡¨æ—¶create_time, update_timeä¸¤ä¸ªå­—æ®µä¸èƒ½ä¸ºNULLï¼Œæ‰€ä»¥ä¹Ÿåšä¸ºè¦æ’å…¥çš„å­—æ®µinsert into tb_emp(username, name, gender, create_time, update_time)values ('wuji', 'å¼ æ— å¿Œ', 1, now(), now());<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ¡ˆä¾‹2ï¼šå‘tb_empè¡¨çš„æ‰€æœ‰å­—æ®µæ’å…¥æ•°æ®</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">insert into tb_emp(id, username, password, name, gender, image, job, entrydate, create_time, update_time)values (null, 'zhirou', '123', 'å‘¨èŠ·è‹¥', 2, '1.jpg', 1, '2010-01-01', now(), now());<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ¡ˆä¾‹3ï¼šæ‰¹é‡å‘tb_empè¡¨çš„usernameã€nameã€genderå­—æ®µæ’å…¥æ•°æ®</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">insert into tb_emp(username, name, gender, create_time, update_time)values ('weifuwang', 'éŸ¦ä¸€ç¬‘', 1, now(), now()),       ('fengzi', 'å¼ ä¸‰ç–¯', 1, now(), now());<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>å›¾å½¢åŒ–æ“ä½œï¼šåŒå‡»tb_empè¡¨æŸ¥çœ‹æ•°æ®</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206002807531.png"></p><p>Insertæ“ä½œçš„æ³¨æ„äº‹é¡¹ï¼š</p><ol><li><p>æ’å…¥æ•°æ®æ—¶ï¼ŒæŒ‡å®šçš„å­—æ®µé¡ºåºéœ€è¦ä¸å€¼çš„é¡ºåºæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p></li><li><p>å­—ç¬¦ä¸²å’Œæ—¥æœŸå‹æ•°æ®åº”è¯¥åŒ…å«åœ¨å¼•å·ä¸­ã€‚</p></li><li><p>æ’å…¥çš„æ•°æ®å¤§å°ï¼Œåº”è¯¥åœ¨å­—æ®µçš„è§„å®šèŒƒå›´å†…ã€‚</p></li></ol><h3 id="3-2-ä¿®æ”¹-update"><a href="#3-2-ä¿®æ”¹-update" class="headerlink" title="3.2 ä¿®æ”¹(update)"></a>3.2 ä¿®æ”¹(update)</h3><p>updateè¯­æ³•ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">update</span> è¡¨å <span class="token keyword">set</span> å­—æ®µå<span class="token number">1</span> <span class="token operator">=</span> å€¼<span class="token number">1</span> <span class="token punctuation">,</span> å­—æ®µå<span class="token number">2</span> <span class="token operator">=</span> å€¼<span class="token number">2</span> <span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">[</span><span class="token keyword">where</span> æ¡ä»¶<span class="token punctuation">]</span> <span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹1ï¼šå°†tb_empè¡¨ä¸­idä¸º1çš„å‘˜å·¥ï¼Œå§“ånameå­—æ®µæ›´æ–°ä¸ºâ€™å¼ ä¸‰â€™</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">update</span> tb_emp <span class="token keyword">set</span> name<span class="token operator">=</span><span class="token string">'å¼ ä¸‰'</span><span class="token punctuation">,</span>update_time<span class="token operator">=</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">where</span> id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹2ï¼šå°†tb_empè¡¨çš„æ‰€æœ‰å‘˜å·¥å…¥èŒæ—¥æœŸæ›´æ–°ä¸ºâ€™2010-01-01â€™</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">update</span> tb_emp <span class="token keyword">set</span> entrydate<span class="token operator">=</span><span class="token string">'2010-01-01'</span><span class="token punctuation">,</span>update_time<span class="token operator">=</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221206004425527.png"></p><blockquote><p>æ³¨æ„äº‹é¡¹:</p><ol><li><p>ä¿®æ”¹è¯­å¥çš„æ¡ä»¶å¯ä»¥æœ‰ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰ï¼Œå¦‚æœæ²¡æœ‰æ¡ä»¶ï¼Œåˆ™ä¼šä¿®æ”¹æ•´å¼ è¡¨çš„æ‰€æœ‰æ•°æ®ã€‚</p></li><li><p>åœ¨ä¿®æ”¹æ•°æ®æ—¶ï¼Œä¸€èˆ¬éœ€è¦åŒæ—¶ä¿®æ”¹å…¬å…±å­—æ®µupdate_timeï¼Œå°†å…¶ä¿®æ”¹ä¸ºå½“å‰æ“ä½œæ—¶é—´ã€‚</p></li></ol></blockquote><h3 id="3-3-åˆ é™¤-delete"><a href="#3-3-åˆ é™¤-delete" class="headerlink" title="3.3 åˆ é™¤(delete)"></a>3.3 åˆ é™¤(delete)</h3><p>deleteè¯­æ³•ï¼š</p><pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">delete from è¡¨å  [where  æ¡ä»¶] ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹1ï¼šåˆ é™¤tb_empè¡¨ä¸­idä¸º1çš„å‘˜å·¥</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">delete</span> <span class="token keyword">from</span> tb_emp <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¡ˆä¾‹2ï¼šåˆ é™¤tb_empè¡¨ä¸­æ‰€æœ‰å‘˜å·¥</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">delete</span> <span class="token keyword">from</span> tb_emp<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>æ³¨æ„äº‹é¡¹:</p><p>â€‹â€¢ DELETE è¯­å¥çš„æ¡ä»¶å¯ä»¥æœ‰ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰ï¼Œå¦‚æœæ²¡æœ‰æ¡ä»¶ï¼Œåˆ™ä¼šåˆ é™¤æ•´å¼ è¡¨çš„æ‰€æœ‰æ•°æ®ã€‚</p><p>â€‹â€¢ DELETE è¯­å¥ä¸èƒ½åˆ é™¤æŸä¸€ä¸ªå­—æ®µçš„å€¼(å¯ä»¥ä½¿ç”¨UPDATEï¼Œå°†è¯¥å­—æ®µå€¼ç½®ä¸ºNULLå³å¯)ã€‚</p><p>â€‹â€¢ å½“è¿›è¡Œåˆ é™¤å…¨éƒ¨æ•°æ®æ“ä½œæ—¶ï¼Œä¼šæç¤ºè¯¢é—®æ˜¯å¦ç¡®è®¤åˆ é™¤æ‰€æœ‰æ•°æ®ï¼Œç›´æ¥ç‚¹å‡»Executeå³å¯ã€‚ </p></blockquote>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> DDL </tag>
            
            <tag> DML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootWebè¯·æ±‚å“åº”</title>
      <link href="/2024/11/28/springbootweb-qing-qiu-xiang-ying/"/>
      <url>/2024/11/28/springbootweb-qing-qiu-xiang-ying/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringBootWebè¯·æ±‚å“åº”"><a href="#SpringBootWebè¯·æ±‚å“åº”" class="headerlink" title="SpringBootWebè¯·æ±‚å“åº”"></a>SpringBootWebè¯·æ±‚å“åº”</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ä¸Šä¸€æ¬¡çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¼€å‘äº†springbootwebçš„å…¥é—¨ç¨‹åºã€‚ åŸºäºSpringBootçš„æ–¹å¼å¼€å‘ä¸€ä¸ªwebåº”ç”¨ï¼Œæµè§ˆå™¨å‘èµ·è¯·æ±‚ /hello å ï¼Œç»™æµè§ˆå™¨è¿”å›å­—ç¬¦ä¸² â€œHello World ~â€ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220826161735076.png"></p><p>å…¶å®å‘¢ï¼Œæ˜¯æˆ‘ä»¬åœ¨æµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼Œè¯·æ±‚äº†æˆ‘ä»¬çš„åç«¯webæœåŠ¡å™¨(ä¹Ÿå°±æ˜¯å†…ç½®çš„Tomcat)ã€‚è€Œæˆ‘ä»¬åœ¨å¼€å‘webç¨‹åºæ—¶å‘¢ï¼Œå®šä¹‰äº†ä¸€ä¸ªæ§åˆ¶å™¨ç±»Controllerï¼Œè¯·æ±‚ä¼šè¢«éƒ¨ç½²åœ¨Tomcatä¸­çš„Controlleræ¥æ”¶ï¼Œç„¶åControllerå†ç»™æµè§ˆå™¨ä¸€ä¸ªå“åº”ï¼Œå“åº”ä¸€ä¸ªå­—ç¬¦ä¸² â€œHello Worldâ€ã€‚ è€Œåœ¨è¯·æ±‚å“åº”çš„è¿‡ç¨‹ä¸­æ˜¯éµå¾ªHTTPåè®®çš„ã€‚</p><p>ä½†æ˜¯å‘¢ï¼Œè¿™é‡Œè¦å‘Šè¯‰å¤§å®¶çš„æ—¶ï¼Œå…¶å®åœ¨Tomcatè¿™ç±»WebæœåŠ¡å™¨ä¸­ï¼Œæ˜¯ä¸è¯†åˆ«æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„Controllerçš„ã€‚ä½†æ˜¯æˆ‘ä»¬å‰é¢è®²åˆ°è¿‡Tomcatæ˜¯ä¸€ä¸ªServletå®¹å™¨ï¼Œæ˜¯æ”¯æŒSerlvetè§„èŒƒçš„ï¼Œæ‰€ä»¥å‘¢ï¼Œåœ¨tomcatä¸­æ˜¯å¯ä»¥è¯†åˆ« Servletç¨‹åºçš„ã€‚ é‚£æˆ‘ä»¬æ‰€ç¼–å†™çš„XxxController æ˜¯å¦‚ä½•å¤„ç†è¯·æ±‚çš„ï¼Œåˆä¸Servletä¹‹é—´æœ‰ä»€ä¹ˆè”ç³»å‘¢ï¼Ÿ</p><p>å…¶å®å‘¢ï¼Œåœ¨SpringBootè¿›è¡Œwebç¨‹åºå¼€å‘æ—¶ï¼Œå®ƒå†…ç½®äº†ä¸€ä¸ªæ ¸å¿ƒçš„Servletç¨‹åº DispatcherServletï¼Œç§°ä¹‹ä¸º æ ¸å¿ƒæ§åˆ¶å™¨ã€‚ DispatcherServlet è´Ÿè´£æ¥æ”¶é¡µé¢å‘é€çš„è¯·æ±‚ï¼Œç„¶åæ ¹æ®æ‰§è¡Œçš„è§„åˆ™ï¼Œå°†è¯·æ±‚å†è½¬å‘ç»™åé¢çš„è¯·æ±‚å¤„ç†å™¨Controllerï¼Œè¯·æ±‚å¤„ç†å™¨å¤„ç†å®Œè¯·æ±‚ä¹‹åï¼Œæœ€ç»ˆå†ç”±DispatcherServletç»™æµè§ˆå™¨å“åº”æ•°æ®ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220826165340157.png"></p><p>é‚£å°†æ¥æµè§ˆå™¨å‘é€è¯·æ±‚ï¼Œä¼šæºå¸¦è¯·æ±‚æ•°æ®ï¼ŒåŒ…æ‹¬ï¼šè¯·æ±‚è¡Œã€è¯·æ±‚å¤´ï¼›è¯·æ±‚åˆ°è¾¾tomcatä¹‹åï¼Œtomcatä¼šè´Ÿè´£è§£æè¿™äº›è¯·æ±‚æ•°æ®ï¼Œç„¶åå‘¢å°†è§£æåçš„è¯·æ±‚æ•°æ®ä¼šä¼ é€’ç»™Servletç¨‹åºçš„HttpServletRequestå¯¹è±¡ï¼Œé‚£ä¹Ÿå°±æ„å‘³ç€ HttpServletRequest å¯¹è±¡å°±å¯ä»¥è·å–åˆ°è¯·æ±‚æ•°æ®ã€‚ è€ŒTomcatï¼Œè¿˜ç»™Servletç¨‹åºä¼ é€’äº†ä¸€ä¸ªå‚æ•° HttpServletResponseï¼Œé€šè¿‡è¿™ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»™æµè§ˆå™¨è®¾ç½®å“åº”æ•°æ® ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220826171407354.pn"> </p><p>é‚£ä¸Šè¿°æ‰€æè¿°çš„è¿™ç§æµè§ˆå™¨/æœåŠ¡å™¨çš„æ¶æ„æ¨¡å¼å‘¢ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºï¼šBSæ¶æ„ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220826171454775.png"></p><p>â€¢ BSæ¶æ„ï¼šBrowser/Serverï¼Œæµè§ˆå™¨/æœåŠ¡å™¨æ¶æ„æ¨¡å¼ã€‚å®¢æˆ·ç«¯åªéœ€è¦æµè§ˆå™¨ï¼Œåº”ç”¨ç¨‹åºçš„é€»è¾‘å’Œæ•°æ®éƒ½å­˜å‚¨åœ¨æœåŠ¡ç«¯ã€‚</p><p>é‚£ä»Šå¤©å‘¢ï¼Œæˆ‘ä»¬çš„è¯¾ç¨‹å†…å®¹ä¸»è¦å°±å›´ç»•ç€ï¼šè¯·æ±‚ã€å“åº”è¿›è¡Œã€‚ ä»Šå¤©è¯¾ç¨‹å†…å®¹ï¼Œä¸»è¦åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><blockquote><ul><li>è¯·æ±‚</li><li>å“åº”</li><li>åˆ†å±‚è§£è€¦</li></ul></blockquote><h2 id="1-è¯·æ±‚"><a href="#1-è¯·æ±‚" class="headerlink" title="1. è¯·æ±‚"></a>1. è¯·æ±‚</h2><p>åœ¨æœ¬ç« èŠ‚å‘¢ï¼Œæˆ‘ä»¬ä¸»è¦è®²è§£ï¼Œå¦‚ä½•æ¥æ”¶é¡µé¢ä¼ é€’è¿‡æ¥çš„è¯·æ±‚æ•°æ®ã€‚</p><h3 id="1-1-Postman"><a href="#1-1-Postman" class="headerlink" title="1.1 Postman"></a>1.1 Postman</h3><p>ä¹‹å‰æˆ‘ä»¬è¯¾ç¨‹ä¸­æœ‰æåˆ°å½“å‰æœ€ä¸ºä¸»æµçš„å¼€å‘æ¨¡å¼ï¼šå‰åç«¯åˆ†ç¦»</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203095553048.png"></p><p>åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œå‰ç«¯æŠ€æœ¯äººå‘˜åŸºäºâ€æ¥å£æ–‡æ¡£â€ï¼Œå¼€å‘å‰ç«¯ç¨‹åºï¼›åç«¯æŠ€æœ¯äººå‘˜ä¹ŸåŸºäºâ€æ¥å£æ–‡æ¡£â€ï¼Œå¼€å‘åç«¯ç¨‹åºã€‚</p><p>ç”±äºå‰åç«¯åˆ†ç¦»ï¼Œå¯¹æˆ‘ä»¬åç«¯æŠ€æœ¯äººå‘˜æ¥è®²ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ˜¯æ²¡æœ‰å‰ç«¯é¡µé¢çš„ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆæµ‹è¯•è‡ªå·±æ‰€å¼€å‘çš„ç¨‹åºå‘¢ï¼Ÿ</p><p>æ–¹å¼1ï¼šåƒä¹‹å‰SpringBootå…¥é—¨æ¡ˆä¾‹ä¸­ä¸€æ ·ï¼Œç›´æ¥ä½¿ç”¨æµè§ˆå™¨ã€‚åœ¨æµè§ˆå™¨ä¸­è¾“å…¥åœ°å€ï¼Œæµ‹è¯•åç«¯ç¨‹åºã€‚</p><ul><li>å¼Šç«¯ï¼šåœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥åœ°å€è¿™ç§æ–¹å¼éƒ½æ˜¯GETè¯·æ±‚ï¼Œå¦‚ä½•æˆ‘ä»¬è¦ç”¨åˆ°POSTè¯·æ±‚æ€ä¹ˆåŠå‘¢ï¼Ÿ<ul><li>è¦è§£å†³POSTè¯·æ±‚ï¼Œéœ€è¦ç¨‹åºå‘˜è‡ªå·±ç¼–å†™å‰ç«¯ä»£ç ï¼ˆæ¯”è¾ƒéº»çƒ¦ï¼‰</li></ul></li></ul><p>æ–¹å¼2ï¼šä½¿ç”¨ä¸“ä¸šçš„æ¥å£æµ‹è¯•å·¥å…·ï¼ˆè¯¾ç¨‹ä¸­æˆ‘ä»¬ä½¿ç”¨Postmanå·¥å…·ï¼‰</p><h4 id="1-1-1-ä»‹ç»"><a href="#1-1-1-ä»‹ç»" class="headerlink" title="1.1.1 ä»‹ç»"></a>1.1.1 ä»‹ç»</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220826173003949.png"> </p><ul><li><p>Postmanæ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ç½‘é¡µè°ƒè¯•ä¸å‘é€ç½‘é¡µHTTPè¯·æ±‚çš„Chromeæ’ä»¶ã€‚</p><blockquote><p>PostmanåŸæ˜¯Chromeæµè§ˆå™¨çš„æ’ä»¶ï¼Œå¯ä»¥æ¨¡æ‹Ÿæµè§ˆå™¨å‘åç«¯æœåŠ¡å™¨å‘èµ·ä»»ä½•å½¢å¼(å¦‚:getã€post)çš„HTTPè¯·æ±‚</p><p>ä½¿ç”¨Postmanè¿˜å¯ä»¥åœ¨å‘èµ·è¯·æ±‚æ—¶ï¼Œæºå¸¦ä¸€äº›è¯·æ±‚å‚æ•°ã€è¯·æ±‚å¤´ç­‰ä¿¡æ¯</p></blockquote></li><li><p>ä½œç”¨ï¼šå¸¸ç”¨äºè¿›è¡Œæ¥å£æµ‹è¯•</p></li><li><p>ç‰¹å¾</p><ul><li>ç®€å•</li><li>å®ç”¨</li><li>ç¾è§‚</li><li>å¤§æ–¹</li></ul></li></ul><h4 id="1-1-2-å®‰è£…"><a href="#1-1-2-å®‰è£…" class="headerlink" title="1.1.2 å®‰è£…"></a>1.1.2 å®‰è£…</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220826173919556.png"> </p><p>åŒå‡»èµ„æ–™ä¸­æä¾›çš„<code>Postman-win64-8.3.1-Setup.exe</code>å³å¯è‡ªåŠ¨å®‰è£…ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220826174601266.png"> </p><p>å®‰è£…å®Œæˆä¹‹åï¼Œè¿›å…¥é¡µé¢ä¸­ä¼šæç¤ºæœ‰æ–°ç‰ˆæœ¬å¯ä»¥å‡çº§ï¼ˆæ— éœ€å‡çº§ï¼‰</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220826174900779.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203112117979.png"></p><p>ç•Œé¢ä»‹ç»:</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220826175306141.png"> </p><p><strong>å¦‚æœæˆ‘ä»¬éœ€è¦å°†æµ‹è¯•çš„è¯·æ±‚ä¿¡æ¯ä¿å­˜ä¸‹æ¥ï¼Œå°±éœ€è¦åˆ›å»ºä¸€ä¸ªpostmançš„è´¦å·ï¼Œç„¶åç™»å½•ä¹‹åæ‰å¯ä»¥ã€‚</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203103623435.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203112252985.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203112320687.png"> </p><p>ç™»å½•å®Œæˆä¹‹åï¼Œå¯ä»¥åˆ›å»ºå·¥ä½œç©ºé—´ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203113552785.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203113925733.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203113847126.png"></p><p>åˆ›å»ºè¯·æ±‚ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203114031824.png"></p><p>ç‚¹å‡»â€Saveâ€ï¼Œä¿å­˜å½“å‰è¯·æ±‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203114231572.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203114806665.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203114852752.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203115001098.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203115041949.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203115110440.png"></p><h3 id="1-2-ç®€å•å‚æ•°"><a href="#1-2-ç®€å•å‚æ•°" class="headerlink" title="1.2 ç®€å•å‚æ•°"></a>1.2 ç®€å•å‚æ•°</h3><p>ç®€å•å‚æ•°ï¼šåœ¨å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶ï¼Œå‘æœåŠ¡å™¨ä¼ é€’çš„æ˜¯ä¸€äº›æ™®é€šçš„è¯·æ±‚æ•°æ®ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220826180550583.png"></p><p>é‚£ä¹ˆåœ¨åç«¯ç¨‹åºä¸­ï¼Œå¦‚ä½•æ¥æ”¶ä¼ é€’è¿‡æ¥çš„æ™®é€šå‚æ•°æ•°æ®å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬åœ¨è¿™é‡Œè®²è§£ä¸¤ç§æ–¹å¼ï¼š</p><ol><li>åŸå§‹æ–¹å¼   </li><li>SpringBootæ–¹å¼</li></ol><h4 id="1-2-1-åŸå§‹æ–¹å¼"><a href="#1-2-1-åŸå§‹æ–¹å¼" class="headerlink" title="1.2.1 åŸå§‹æ–¹å¼"></a>1.2.1 åŸå§‹æ–¹å¼</h4><p>åœ¨åŸå§‹çš„Webç¨‹åºå½“ä¸­ï¼Œéœ€è¦é€šè¿‡Servletä¸­æä¾›çš„APIï¼šHttpServletRequestï¼ˆè¯·æ±‚å¯¹è±¡ï¼‰ï¼Œè·å–è¯·æ±‚çš„ç›¸å…³ä¿¡æ¯ã€‚æ¯”å¦‚è·å–è¯·æ±‚å‚æ•°ï¼š</p><blockquote><p>Tomcatæ¥æ”¶åˆ°httpè¯·æ±‚æ—¶ï¼šæŠŠè¯·æ±‚çš„ç›¸å…³ä¿¡æ¯å°è£…åˆ°HttpServletRequestå¯¹è±¡ä¸­</p></blockquote><p>åœ¨Controllerä¸­ï¼Œæˆ‘ä»¬è¦æƒ³è·å–Requestå¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥åœ¨æ–¹æ³•çš„å½¢å‚ä¸­å£°æ˜ HttpServletRequest å¯¹è±¡ã€‚ç„¶åå°±å¯ä»¥é€šè¿‡è¯¥å¯¹è±¡æ¥è·å–è¯·æ±‚ä¿¡æ¯ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">//æ ¹æ®æŒ‡å®šçš„å‚æ•°åè·å–è¯·æ±‚å‚æ•°çš„æ•°æ®å€¼</span>String  request.getParameter(<span class="token string">"å‚æ•°å"</span>)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestController</span> <span class="token punctuation">{</span>    <span class="token comment">//åŸå§‹æ–¹å¼</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/simpleParam"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">simpleParam</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">// http://localhost:8080/simpleParam?name=Tom&amp;age=10</span>        <span class="token comment">// è¯·æ±‚å‚æ•°ï¼š name=Tom&amp;age=10   ï¼ˆæœ‰2ä¸ªè¯·æ±‚å‚æ•°ï¼‰</span>        <span class="token comment">// ç¬¬1ä¸ªè¯·æ±‚å‚æ•°ï¼š name=Tom   å‚æ•°å:nameï¼Œå‚æ•°å€¼:Tom</span>        <span class="token comment">// ç¬¬2ä¸ªè¯·æ±‚å‚æ•°ï¼š age=10     å‚æ•°å:age , å‚æ•°å€¼:10</span>        <span class="token class-name">String</span> name <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//nameå°±æ˜¯è¯·æ±‚å‚æ•°å</span>        <span class="token class-name">String</span> ageStr <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ageå°±æ˜¯è¯·æ±‚å‚æ•°å</span>        <span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>ageStr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//éœ€è¦æ‰‹åŠ¨è¿›è¡Œç±»å‹è½¬æ¢</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token operator">+</span><span class="token string">"  :  "</span><span class="token operator">+</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"OK"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>ä»¥ä¸Šè¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬ä»…åšäº†è§£ã€‚ï¼ˆåœ¨ä»¥åçš„å¼€å‘ä¸­ä¸ä¼šä½¿ç”¨åˆ°ï¼‰</p></blockquote><h4 id="1-2-2-SpringBootæ–¹å¼"><a href="#1-2-2-SpringBootæ–¹å¼" class="headerlink" title="1.2.2 SpringBootæ–¹å¼"></a>1.2.2 SpringBootæ–¹å¼</h4><p>åœ¨Springbootçš„ç¯å¢ƒä¸­ï¼Œå¯¹åŸå§‹çš„APIè¿›è¡Œäº†å°è£…ï¼Œæ¥æ”¶å‚æ•°çš„å½¢å¼æ›´åŠ ç®€å•ã€‚ å¦‚æœæ˜¯ç®€å•å‚æ•°ï¼Œå‚æ•°åä¸å½¢å‚å˜é‡åç›¸åŒï¼Œå®šä¹‰åŒåçš„å½¢å‚å³å¯æ¥æ”¶å‚æ•°ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestController</span> <span class="token punctuation">{</span>    <span class="token comment">// http://localhost:8080/simpleParam?name=Tom&amp;age=10</span>    <span class="token comment">// ç¬¬1ä¸ªè¯·æ±‚å‚æ•°ï¼š name=Tom   å‚æ•°å:nameï¼Œå‚æ•°å€¼:Tom</span>    <span class="token comment">// ç¬¬2ä¸ªè¯·æ±‚å‚æ•°ï¼š age=10     å‚æ•°å:age , å‚æ•°å€¼:10</span>        <span class="token comment">//springbootæ–¹å¼</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/simpleParam"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">simpleParam</span><span class="token punctuation">(</span><span class="token class-name">String</span> name <span class="token punctuation">,</span> <span class="token class-name">Integer</span> age <span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//å½¢å‚åå’Œè¯·æ±‚å‚æ•°åä¿æŒä¸€è‡´</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token operator">+</span><span class="token string">"  :  "</span><span class="token operator">+</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"OK"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>postmanæµ‹è¯•( GET è¯·æ±‚)ï¼š</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203122405075.png"> </p><p><strong>postmanæµ‹è¯•( POSTè¯·æ±‚ )ï¼š</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220826181117898.png"></p><blockquote><p><strong>ç»“è®ºï¼šä¸è®ºæ˜¯GETè¯·æ±‚è¿˜æ˜¯POSTè¯·æ±‚ï¼Œå¯¹äºç®€å•å‚æ•°æ¥è®²ï¼Œåªè¦ä¿è¯==è¯·æ±‚å‚æ•°åå’ŒControlleræ–¹æ³•ä¸­çš„å½¢å‚åä¿æŒä¸€è‡´==ï¼Œå°±å¯ä»¥è·å–åˆ°è¯·æ±‚å‚æ•°ä¸­çš„æ•°æ®å€¼ã€‚</strong></p></blockquote><h4 id="1-2-3-å‚æ•°åä¸ä¸€è‡´"><a href="#1-2-3-å‚æ•°åä¸ä¸€è‡´" class="headerlink" title="1.2.3 å‚æ•°åä¸ä¸€è‡´"></a>1.2.3 å‚æ•°åä¸ä¸€è‡´</h4><p>å¦‚æœæ–¹æ³•å½¢å‚åç§°ä¸è¯·æ±‚å‚æ•°åç§°ä¸ä¸€è‡´ï¼Œcontrolleræ–¹æ³•ä¸­çš„å½¢å‚è¿˜èƒ½æ¥æ”¶åˆ°è¯·æ±‚å‚æ•°å€¼å—ï¼Ÿ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestController</span> <span class="token punctuation">{</span>    <span class="token comment">// http://localhost:8080/simpleParam?name=Tom&amp;age=20</span>    <span class="token comment">// è¯·æ±‚å‚æ•°åï¼šname</span>    <span class="token comment">//springbootæ–¹å¼</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/simpleParam"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">simpleParam</span><span class="token punctuation">(</span><span class="token class-name">String</span> username <span class="token punctuation">,</span> <span class="token class-name">Integer</span> age <span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//è¯·æ±‚å‚æ•°åå’Œå½¢å‚åä¸ç›¸åŒ</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token operator">+</span><span class="token string">"  :  "</span><span class="token operator">+</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"OK"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç­”æ¡ˆï¼šè¿è¡Œæ²¡æœ‰æŠ¥é”™ã€‚ controlleræ–¹æ³•ä¸­çš„usernameå€¼ä¸ºï¼šnullï¼Œageå€¼ä¸º20</p><ul><li>ç»“è®ºï¼šå¯¹äºç®€å•å‚æ•°æ¥è®²ï¼Œè¯·æ±‚å‚æ•°åå’Œcontrolleræ–¹æ³•ä¸­çš„å½¢å‚åä¸ä¸€è‡´æ—¶ï¼Œæ— æ³•æ¥æ”¶åˆ°è¯·æ±‚æ•°æ®</li></ul><p>é‚£ä¹ˆå¦‚æœæˆ‘ä»¬å¼€å‘ä¸­ï¼Œé‡åˆ°äº†è¿™ç§è¯·æ±‚å‚æ•°åå’Œcontrolleræ–¹æ³•ä¸­çš„å½¢å‚åä¸ç›¸åŒï¼Œæ€ä¹ˆåŠï¼Ÿ</p><p>è§£å†³æ–¹æ¡ˆï¼šå¯ä»¥ä½¿ç”¨Springæä¾›çš„@RequestParamæ³¨è§£å®Œæˆæ˜ å°„</p><p>åœ¨æ–¹æ³•å½¢å‚å‰é¢åŠ ä¸Š @RequestParam ç„¶åé€šè¿‡valueå±æ€§æ‰§è¡Œè¯·æ±‚å‚æ•°åï¼Œä»è€Œå®Œæˆæ˜ å°„ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestController</span> <span class="token punctuation">{</span>    <span class="token comment">// http://localhost:8080/simpleParam?name=Tom&amp;age=20</span>    <span class="token comment">// è¯·æ±‚å‚æ•°åï¼šname</span>    <span class="token comment">//springbootæ–¹å¼</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/simpleParam"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">simpleParam</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username <span class="token punctuation">,</span> <span class="token class-name">Integer</span> age <span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token operator">+</span><span class="token string">"  :  "</span><span class="token operator">+</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"OK"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><p>@RequestParamä¸­çš„requiredå±æ€§é»˜è®¤ä¸ºtrueï¼ˆé»˜è®¤å€¼ä¹Ÿæ˜¯trueï¼‰ï¼Œä»£è¡¨è¯¥è¯·æ±‚å‚æ•°å¿…é¡»ä¼ é€’ï¼Œå¦‚æœä¸ä¼ é€’å°†æŠ¥é”™</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203130726310.png"></p><p>å¦‚æœè¯¥å‚æ•°æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥å°†requiredå±æ€§è®¾ç½®ä¸ºfalse</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/simpleParam"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">simpleParam</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">Integer</span> age<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token string">"OK"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h3 id="1-3-å®ä½“å‚æ•°"><a href="#1-3-å®ä½“å‚æ•°" class="headerlink" title="1.3 å®ä½“å‚æ•°"></a>1.3 å®ä½“å‚æ•°</h3><p>åœ¨ä½¿ç”¨ç®€å•å‚æ•°åšä¸ºæ•°æ®ä¼ é€’æ–¹å¼æ—¶ï¼Œå‰ç«¯ä¼ é€’äº†å¤šå°‘ä¸ªè¯·æ±‚å‚æ•°ï¼Œåç«¯controlleræ–¹æ³•ä¸­çš„å½¢å‚å°±è¦ä¹¦å†™å¤šå°‘ä¸ªã€‚å¦‚æœè¯·æ±‚å‚æ•°æ¯”è¾ƒå¤šï¼Œé€šè¿‡ä¸Šè¿°çš„æ–¹å¼ä¸€ä¸ªå‚æ•°ä¸€ä¸ªå‚æ•°çš„æ¥æ”¶ï¼Œä¼šæ¯”è¾ƒç¹çã€‚ </p><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å°†è¯·æ±‚å‚æ•°å°è£…åˆ°ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡ä¸­ã€‚ è¦æƒ³å®Œæˆæ•°æ®å°è£…ï¼Œéœ€è¦éµå®ˆå¦‚ä¸‹è§„åˆ™ï¼š<strong>è¯·æ±‚å‚æ•°åä¸å®ä½“ç±»çš„å±æ€§åç›¸åŒ</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203131954932.png"></p><h4 id="1-3-1-ç®€å•å®ä½“å¯¹è±¡"><a href="#1-3-1-ç®€å•å®ä½“å¯¹è±¡" class="headerlink" title="1.3.1 ç®€å•å®ä½“å¯¹è±¡"></a>1.3.1 ç®€å•å®ä½“å¯¹è±¡</h4><p>å®šä¹‰POJOå®ä½“ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"User{"</span> <span class="token operator">+</span>                <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>                <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span>                <span class="token char">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Controlleræ–¹æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestController</span> <span class="token punctuation">{</span>    <span class="token comment">//å®ä½“å‚æ•°ï¼šç®€å•å®ä½“å¯¹è±¡</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/simplePojo"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">simplePojo</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"OK"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Postmanæµ‹è¯•ï¼š</p><ul><li>å‚æ•°åå’Œå®ä½“ç±»å±æ€§åä¸€è‡´æ—¶</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203161246168.png"> </p><ul><li>å‚æ•°åå’Œå®ä½“ç±»å±æ€§åä¸ä¸€è‡´æ—¶</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203161004349.png"></p><h4 id="1-3-2-å¤æ‚å®ä½“å¯¹è±¡"><a href="#1-3-2-å¤æ‚å®ä½“å¯¹è±¡" class="headerlink" title="1.3.2 å¤æ‚å®ä½“å¯¹è±¡"></a>1.3.2 å¤æ‚å®ä½“å¯¹è±¡</h4><p>ä¸Šé¢æˆ‘ä»¬è®²çš„å‘¢æ˜¯ç®€å•çš„å®ä½“å¯¹è±¡ï¼Œä¸‹é¢æˆ‘ä»¬åœ¨æ¥å­¦ä¹ ä¸‹å¤æ‚çš„å®ä½“å¯¹è±¡ã€‚</p><p>å¤æ‚å®ä½“å¯¹è±¡æŒ‡çš„æ˜¯ï¼Œåœ¨å®ä½“ç±»ä¸­æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§ï¼Œä¹Ÿæ˜¯å®ä½“å¯¹è±¡ç±»å‹çš„ã€‚å¦‚ä¸‹ï¼š</p><ul><li>Userç±»ä¸­æœ‰ä¸€ä¸ªAddressç±»å‹çš„å±æ€§ï¼ˆAddressæ˜¯ä¸€ä¸ªå®ä½“ç±»ï¼‰</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203160447953.png"></p><p>å¤æ‚å®ä½“å¯¹è±¡çš„å°è£…ï¼Œéœ€è¦éµå®ˆå¦‚ä¸‹è§„åˆ™ï¼š</p><ul><li><strong>è¯·æ±‚å‚æ•°åä¸å½¢å‚å¯¹è±¡å±æ€§åç›¸åŒï¼ŒæŒ‰ç…§å¯¹è±¡å±‚æ¬¡ç»“æ„å…³ç³»å³å¯æ¥æ”¶åµŒå¥—å®ä½“ç±»å±æ€§å‚æ•°ã€‚</strong></li></ul><p>å®šä¹‰POJOå®ä½“ç±»ï¼š</p><ul><li>Addresså®ä½“ç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Address</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> province<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> city<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getProvince</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> province<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setProvince</span><span class="token punctuation">(</span><span class="token class-name">String</span> province<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>province <span class="token operator">=</span> province<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> city<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCity</span><span class="token punctuation">(</span><span class="token class-name">String</span> city<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>city <span class="token operator">=</span> city<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Address{"</span> <span class="token operator">+</span>                <span class="token string">"province='"</span> <span class="token operator">+</span> province <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>                <span class="token string">", city='"</span> <span class="token operator">+</span> city <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>                <span class="token char">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>Userå®ä½“ç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Address</span> address<span class="token punctuation">;</span> <span class="token comment">//åœ°å€å¯¹è±¡</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">Address</span> <span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> address<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token class-name">Address</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"User{"</span> <span class="token operator">+</span>                <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>                <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span>                <span class="token string">", address="</span> <span class="token operator">+</span> address <span class="token operator">+</span>                <span class="token char">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Controlleræ–¹æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestController</span> <span class="token punctuation">{</span>    <span class="token comment">//å®ä½“å‚æ•°ï¼šå¤æ‚å®ä½“å¯¹è±¡</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/complexPojo"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">complexPojo</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"OK"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Postmanæµ‹è¯•ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203162706175.png"> </p><h3 id="1-4-æ•°ç»„é›†åˆå‚æ•°"><a href="#1-4-æ•°ç»„é›†åˆå‚æ•°" class="headerlink" title="1.4 æ•°ç»„é›†åˆå‚æ•°"></a>1.4 æ•°ç»„é›†åˆå‚æ•°</h3><p>æ•°ç»„é›†åˆå‚æ•°çš„ä½¿ç”¨åœºæ™¯ï¼šåœ¨HTMLçš„è¡¨å•ä¸­ï¼Œæœ‰ä¸€ä¸ªè¡¨å•é¡¹æ˜¯æ”¯æŒå¤šé€‰çš„(å¤é€‰æ¡†)ï¼Œå¯ä»¥æäº¤é€‰æ‹©çš„å¤šä¸ªå€¼ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203164114083.png"> </p><p>å¤šä¸ªå€¼æ˜¯æ€ä¹ˆæäº¤çš„å‘¢ï¼Ÿå…¶å®å¤šä¸ªå€¼ä¹Ÿæ˜¯ä¸€ä¸ªä¸€ä¸ªçš„æäº¤ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203164944144.png"> </p><p>åç«¯ç¨‹åºæ¥æ”¶ä¸Šè¿°å¤šä¸ªå€¼çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><ol><li>æ•°ç»„</li><li>é›†åˆ</li></ol><h4 id="1-4-1-æ•°ç»„"><a href="#1-4-1-æ•°ç»„" class="headerlink" title="1.4.1 æ•°ç»„"></a>1.4.1 æ•°ç»„</h4><p>æ•°ç»„å‚æ•°ï¼š<strong>è¯·æ±‚å‚æ•°åä¸å½¢å‚æ•°ç»„åç§°ç›¸åŒä¸”è¯·æ±‚å‚æ•°ä¸ºå¤šä¸ªï¼Œå®šä¹‰æ•°ç»„ç±»å‹å½¢å‚å³å¯æ¥æ”¶å‚æ•°</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203190218468.png"></p><p>Controlleræ–¹æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestController</span> <span class="token punctuation">{</span>    <span class="token comment">//æ•°ç»„é›†åˆå‚æ•°</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/arrayParam"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">arrayParam</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hobby<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>hobby<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"OK"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Postmanæµ‹è¯•ï¼š</p><p>åœ¨å‰ç«¯è¯·æ±‚æ—¶ï¼Œæœ‰ä¸¤ç§ä¼ é€’å½¢å¼ï¼š</p><p>æ–¹å¼ä¸€ï¼š xxxxxxxxxx?hobby=game&amp;hobby=java</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203191732601.png"> </p><p>æ–¹å¼äºŒï¼šxxxxxxxxxxxxx?hobby=game,java</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203191822996.png"></p><h4 id="1-4-2-é›†åˆ"><a href="#1-4-2-é›†åˆ" class="headerlink" title="1.4.2 é›†åˆ"></a>1.4.2 é›†åˆ</h4><p>é›†åˆå‚æ•°ï¼š<strong>è¯·æ±‚å‚æ•°åä¸å½¢å‚é›†åˆå¯¹è±¡åç›¸åŒä¸”è¯·æ±‚å‚æ•°ä¸ºå¤šä¸ªï¼Œ@RequestParam ç»‘å®šå‚æ•°å…³ç³»</strong></p><blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯·æ±‚ä¸­å‚æ•°åç›¸åŒçš„å¤šä¸ªå€¼ï¼Œæ˜¯å°è£…åˆ°æ•°ç»„ã€‚å¦‚æœè¦å°è£…åˆ°é›†åˆï¼Œè¦ä½¿ç”¨@RequestParamç»‘å®šå‚æ•°å…³ç³»</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203211640646.png"></p><p>Controlleræ–¹æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestController</span> <span class="token punctuation">{</span>    <span class="token comment">//æ•°ç»„é›†åˆå‚æ•°</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/listParam"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">listParam</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> hobby<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hobby<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"OK"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Postmanæµ‹è¯•ï¼š</p><p>æ–¹å¼ä¸€ï¼š xxxxxxxxxx?hobby=game&amp;hobby=java</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203212221939.png"> </p><p>æ–¹å¼äºŒï¼šxxxxxxxxxxxxx?hobby=game,java</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203212024679.png"></p><h3 id="1-5-æ—¥æœŸå‚æ•°"><a href="#1-5-æ—¥æœŸå‚æ•°" class="headerlink" title="1.5 æ—¥æœŸå‚æ•°"></a>1.5 æ—¥æœŸå‚æ•°</h3><p>ä¸Šè¿°æ¼”ç¤ºçš„éƒ½æ˜¯ä¸€äº›æ™®é€šçš„å‚æ•°ï¼Œåœ¨ä¸€äº›ç‰¹æ®Šçš„éœ€æ±‚ä¸­ï¼Œå¯èƒ½ä¼šæ¶‰åŠåˆ°æ—¥æœŸç±»å‹æ•°æ®çš„å°è£…ã€‚æ¯”å¦‚ï¼Œå¦‚ä¸‹éœ€æ±‚ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220826194159343.png"> </p><p>å› ä¸ºæ—¥æœŸçš„æ ¼å¼å¤šç§å¤šæ ·ï¼ˆå¦‚ï¼š2022-12-12 10:05:45 ã€2022/12/12 10:05:45ï¼‰ï¼Œé‚£ä¹ˆå¯¹äºæ—¥æœŸç±»å‹çš„å‚æ•°åœ¨è¿›è¡Œå°è£…çš„æ—¶å€™ï¼Œéœ€è¦é€šè¿‡@DateTimeFormatæ³¨è§£ï¼Œä»¥åŠå…¶patternå±æ€§æ¥è®¾ç½®æ—¥æœŸçš„æ ¼å¼ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203213120692.png"></p><ul><li>@DateTimeFormatæ³¨è§£çš„patternå±æ€§ä¸­æŒ‡å®šäº†å“ªç§æ—¥æœŸæ ¼å¼ï¼Œå‰ç«¯çš„æ—¥æœŸå‚æ•°å°±å¿…é¡»æŒ‰ç…§æŒ‡å®šçš„æ ¼å¼ä¼ é€’ã€‚</li><li>åç«¯controlleræ–¹æ³•ä¸­ï¼Œéœ€è¦ä½¿ç”¨Dateç±»å‹æˆ–LocalDateTimeç±»å‹ï¼Œæ¥å°è£…ä¼ é€’çš„å‚æ•°ã€‚</li></ul><p>Controlleræ–¹æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestController</span> <span class="token punctuation">{</span>    <span class="token comment">//æ—¥æœŸæ—¶é—´å‚æ•°</span>   <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/dateParam"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">dateParam</span><span class="token punctuation">(</span><span class="token annotation punctuation">@DateTimeFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span> <span class="token class-name">LocalDateTime</span> updateTime<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>updateTime<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"OK"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Postmanæµ‹è¯•ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203214600716.png"></p><h3 id="1-6-JSONå‚æ•°"><a href="#1-6-JSONå‚æ•°" class="headerlink" title="1.6 JSONå‚æ•°"></a>1.6 JSONå‚æ•°</h3><p>åœ¨å­¦ä¹ å‰ç«¯æŠ€æœ¯æ—¶ï¼Œæˆ‘ä»¬æœ‰è®²åˆ°è¿‡JSONï¼Œè€Œåœ¨å‰åç«¯è¿›è¡Œäº¤äº’æ—¶ï¼Œå¦‚æœæ˜¯æ¯”è¾ƒå¤æ‚çš„å‚æ•°ï¼Œå‰åç«¯é€šè¿‡ä¼šä½¿ç”¨JSONæ ¼å¼çš„æ•°æ®è¿›è¡Œä¼ è¾“ã€‚ ï¼ˆJSONæ˜¯å¼€å‘ä¸­æœ€å¸¸ç”¨çš„å‰åç«¯æ•°æ®äº¤äº’æ–¹å¼ï¼‰</p><p>æˆ‘ä»¬å­¦ä¹ JSONæ ¼å¼å‚æ•°ï¼Œä¸»è¦ä»ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ç€æ‰‹ï¼š</p><ol><li>Postmanåœ¨å‘é€è¯·æ±‚æ—¶ï¼Œå¦‚ä½•ä¼ é€’jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°</li><li>åœ¨æœåŠ¡ç«¯çš„controlleræ–¹æ³•ä¸­ï¼Œå¦‚ä½•æ¥æ”¶jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°</li></ol><p>Postmanå‘é€JSONæ ¼å¼æ•°æ®ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203225623337.png"></p><p>æœåŠ¡ç«¯Controlleræ–¹æ³•æ¥æ”¶JSONæ ¼å¼æ•°æ®ï¼š</p><ul><li>ä¼ é€’jsonæ ¼å¼çš„å‚æ•°ï¼Œåœ¨Controllerä¸­ä¼šä½¿ç”¨å®ä½“ç±»è¿›è¡Œå°è£…ã€‚ </li><li>å°è£…è§„åˆ™ï¼š<strong>JSONæ•°æ®é”®åä¸å½¢å‚å¯¹è±¡å±æ€§åç›¸åŒï¼Œå®šä¹‰POJOç±»å‹å½¢å‚å³å¯æ¥æ”¶å‚æ•°ã€‚éœ€è¦ä½¿ç”¨ @RequestBodyæ ‡è¯†ã€‚</strong></li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203230457901.png"></p><ul><li>@RequestBodyæ³¨è§£ï¼šå°†JSONæ•°æ®æ˜ å°„åˆ°å½¢å‚çš„å®ä½“ç±»å¯¹è±¡ä¸­ï¼ˆJSONä¸­çš„keyå’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¿æŒä¸€è‡´ï¼‰</li></ul><p>å®ä½“ç±»ï¼šAddress</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Address</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> province<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> city<span class="token punctuation">;</span>    <span class="token comment">//çœç•¥GET , SET æ–¹æ³•</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®ä½“ç±»ï¼šUser</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Address</span> address<span class="token punctuation">;</span>        <span class="token comment">//çœç•¥GET , SET æ–¹æ³•</span><span class="token punctuation">}</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Controlleræ–¹æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestController</span> <span class="token punctuation">{</span>    <span class="token comment">//JSONå‚æ•°</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/jsonParam"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">jsonParam</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"OK"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Postmanæµ‹è¯•ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203231803000.png"> </p><h3 id="1-7-è·¯å¾„å‚æ•°"><a href="#1-7-è·¯å¾„å‚æ•°" class="headerlink" title="1.7 è·¯å¾„å‚æ•°"></a>1.7 è·¯å¾„å‚æ•°</h3><p>ä¼ ç»Ÿçš„å¼€å‘ä¸­è¯·æ±‚å‚æ•°æ˜¯æ”¾åœ¨è¯·æ±‚ä½“(POSTè¯·æ±‚)ä¼ é€’æˆ–è·Ÿåœ¨URLåé¢é€šè¿‡?key=valueçš„å½¢å¼ä¼ é€’(GETè¯·æ±‚)ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221203235715804.png"></p><p>åœ¨ç°åœ¨çš„å¼€å‘ä¸­ï¼Œç»å¸¸è¿˜ä¼šç›´æ¥åœ¨è¯·æ±‚çš„URLä¸­ä¼ é€’å‚æ•°ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-none"><code class="language-none">http://localhost:8080/user/1http://localhost:880/user/1/0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¸Šè¿°çš„è¿™ç§ä¼ é€’è¯·æ±‚å‚æ•°çš„å½¢å¼å‘¢ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºï¼šè·¯å¾„å‚æ•°ã€‚</p><p>å­¦ä¹ è·¯å¾„å‚æ•°å‘¢ï¼Œä¸»è¦æŒæ¡åœ¨åç«¯çš„controlleræ–¹æ³•ä¸­ï¼Œå¦‚ä½•æ¥æ”¶è·¯å¾„å‚æ•°ã€‚</p><p>è·¯å¾„å‚æ•°ï¼š</p><ul><li>å‰ç«¯ï¼šé€šè¿‡è¯·æ±‚URLç›´æ¥ä¼ é€’å‚æ•°</li><li>åç«¯ï¼šä½¿ç”¨{â€¦}æ¥æ ‡è¯†è¯¥è·¯å¾„å‚æ•°ï¼Œéœ€è¦ä½¿ç”¨@PathVariableè·å–è·¯å¾„å‚æ•°</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204001520756.png"></p><p>Controlleræ–¹æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestController</span> <span class="token punctuation">{</span>    <span class="token comment">//è·¯å¾„å‚æ•°</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/path/{id}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">pathParam</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"OK"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Postmanæµ‹è¯•ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204002040184.png"></p><p><strong>ä¼ é€’å¤šä¸ªè·¯å¾„å‚æ•°ï¼š</strong></p><p>Postmanï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204002306288.png"></p><p>Controlleræ–¹æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestController</span> <span class="token punctuation">{</span>    <span class="token comment">//è·¯å¾„å‚æ•°</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/path/{id}/{name}"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">pathParam2</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> id<span class="token punctuation">,</span> <span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>id<span class="token operator">+</span> <span class="token string">" : "</span> <span class="token operator">+</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"OK"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-å“åº”"><a href="#2-å“åº”" class="headerlink" title="2. å“åº”"></a>2. å“åº”</h2><p>å‰é¢æˆ‘ä»¬å­¦ä¹ è¿‡HTTLåè®®çš„äº¤äº’æ–¹å¼ï¼šè¯·æ±‚å“åº”æ¨¡å¼ï¼ˆæœ‰è¯·æ±‚å°±æœ‰å“åº”ï¼‰</p><p>é‚£ä¹ˆControllerç¨‹åºå‘¢ï¼Œé™¤äº†æ¥æ”¶è¯·æ±‚å¤–ï¼Œè¿˜å¯ä»¥è¿›è¡Œå“åº”ã€‚</p><h3 id="2-1-ResponseBody"><a href="#2-1-ResponseBody" class="headerlink" title="2.1 @ResponseBody"></a>2.1 @ResponseBody</h3><p>åœ¨æˆ‘ä»¬å‰é¢æ‰€ç¼–å†™çš„controlleræ–¹æ³•ä¸­ï¼Œéƒ½å·²ç»è®¾ç½®äº†å“åº”æ•°æ®ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204100656376.png"></p><p>controlleræ–¹æ³•ä¸­çš„returnçš„ç»“æœï¼Œæ€ä¹ˆå°±å¯ä»¥å“åº”ç»™æµè§ˆå™¨å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆï¼šä½¿ç”¨@ResponseBodyæ³¨è§£</p><p><strong>@ResponseBodyæ³¨è§£ï¼š</strong></p><ul><li>ç±»å‹ï¼šæ–¹æ³•æ³¨è§£ã€ç±»æ³¨è§£</li><li>ä½ç½®ï¼šä¹¦å†™åœ¨Controlleræ–¹æ³•ä¸Šæˆ–ç±»ä¸Š</li><li>ä½œç”¨ï¼šå°†æ–¹æ³•è¿”å›å€¼ç›´æ¥å“åº”ç»™æµè§ˆå™¨<ul><li>å¦‚æœè¿”å›å€¼ç±»å‹æ˜¯å®ä½“å¯¹è±¡/é›†åˆï¼Œå°†ä¼šè½¬æ¢ä¸ºJSONæ ¼å¼ååœ¨å“åº”ç»™æµè§ˆå™¨</li></ul></li></ul><p>ä½†æ˜¯åœ¨æˆ‘ä»¬æ‰€ä¹¦å†™çš„Controllerä¸­ï¼Œåªåœ¨ç±»ä¸Šæ·»åŠ äº†@RestControlleræ³¨è§£ã€æ–¹æ³•æ·»åŠ äº†@RequestMappingæ³¨è§£ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨@ResponseBodyæ³¨è§£ï¼Œæ€ä¹ˆç»™æµè§ˆå™¨å“åº”å‘¢ï¼Ÿ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello World ~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"Hello World ~"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŸå› ï¼šåœ¨ç±»ä¸Šæ·»åŠ çš„@RestControlleræ³¨è§£ï¼Œæ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ã€‚</p><ul><li>@RestController = @Controller + @ResponseBody</li></ul><p>@RestControlleræºç ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>   <span class="token comment">//å…ƒæ³¨è§£ï¼ˆä¿®é¥°æ³¨è§£çš„æ³¨è§£ï¼‰</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>  <span class="token comment">//å…ƒæ³¨è§£</span><span class="token annotation punctuation">@Documented</span>    <span class="token comment">//å…ƒæ³¨è§£</span><span class="token annotation punctuation">@Controller</span>   <span class="token annotation punctuation">@ResponseBody</span> <span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">RestController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@AliasFor</span><span class="token punctuation">(</span>        annotation <span class="token operator">=</span> <span class="token class-name">Controller</span><span class="token punctuation">.</span><span class="token keyword">class</span>    <span class="token punctuation">)</span>    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç»“è®ºï¼šåœ¨ç±»ä¸Šæ·»åŠ @RestControllerå°±ç›¸å½“äºæ·»åŠ äº†@ResponseBodyæ³¨è§£ã€‚</p><ul><li>ç±»ä¸Šæœ‰@RestControlleræ³¨è§£æˆ–@ResponseBodyæ³¨è§£æ—¶ï¼šè¡¨ç¤ºå½“å‰ç±»ä¸‹æ‰€æœ‰çš„æ–¹æ³•è¿”å›å€¼åšä¸ºå“åº”æ•°æ®<ul><li>æ–¹æ³•çš„è¿”å›å€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªPOJOå¯¹è±¡æˆ–é›†åˆæ—¶ï¼Œä¼šå…ˆè½¬æ¢ä¸ºJSONæ ¼å¼ï¼Œåœ¨å“åº”ç»™æµè§ˆå™¨</li></ul></li></ul><p>ä¸‹é¢æˆ‘ä»¬æ¥æµ‹è¯•ä¸‹å“åº”æ•°æ®ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResponseController</span> <span class="token punctuation">{</span>    <span class="token comment">//å“åº”å­—ç¬¦ä¸²</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello World ~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"Hello World ~"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//å“åº”å®ä½“å¯¹è±¡</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/getAddr"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Address</span> <span class="token function">getAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">Address</span> addr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åˆ›å»ºå®ä½“ç±»å¯¹è±¡</span>        addr<span class="token punctuation">.</span><span class="token function">setProvince</span><span class="token punctuation">(</span><span class="token string">"å¹¿ä¸œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        addr<span class="token punctuation">.</span><span class="token function">setCity</span><span class="token punctuation">(</span><span class="token string">"æ·±åœ³"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> addr<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//å“åº”é›†åˆæ•°æ®</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/listAddr"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span> <span class="token function">listAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é›†åˆå¯¹è±¡</span>                <span class="token class-name">Address</span> addr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        addr<span class="token punctuation">.</span><span class="token function">setProvince</span><span class="token punctuation">(</span><span class="token string">"å¹¿ä¸œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        addr<span class="token punctuation">.</span><span class="token function">setCity</span><span class="token punctuation">(</span><span class="token string">"æ·±åœ³"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Address</span> addr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        addr2<span class="token punctuation">.</span><span class="token function">setProvince</span><span class="token punctuation">(</span><span class="token string">"é™•è¥¿"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        addr2<span class="token punctuation">.</span><span class="token function">setCity</span><span class="token punctuation">(</span><span class="token string">"è¥¿å®‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>addr2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨æœåŠ¡ç«¯å“åº”äº†ä¸€ä¸ªå¯¹è±¡æˆ–è€…é›†åˆï¼Œé‚£ç§å‰ç«¯è·å–åˆ°çš„æ•°æ®æ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿæˆ‘ä»¬ä½¿ç”¨postmanå‘é€è¯·æ±‚æ¥æµ‹è¯•ä¸‹ã€‚æµ‹è¯•æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204172339375.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204172705426.png"></p><h3 id="2-2-ç»Ÿä¸€å“åº”ç»“æœ"><a href="#2-2-ç»Ÿä¸€å“åº”ç»“æœ" class="headerlink" title="2.2 ç»Ÿä¸€å“åº”ç»“æœ"></a>2.2 ç»Ÿä¸€å“åº”ç»“æœ</h3><p>å¤§å®¶æœ‰æ²¡æœ‰å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åœ¨å‰é¢æ‰€ç¼–å†™çš„è¿™äº›Controlleræ–¹æ³•ä¸­ï¼Œè¿”å›å€¼å„ç§å„æ ·ï¼Œæ²¡æœ‰ä»»ä½•çš„è§„èŒƒã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204174052622.png"></p><p>å¦‚æœæˆ‘ä»¬å¼€å‘ä¸€ä¸ªå¤§å‹é¡¹ç›®ï¼Œé¡¹ç›®ä¸­controlleræ–¹æ³•å°†æˆåƒä¸Šä¸‡ï¼Œä½¿ç”¨ä¸Šè¿°æ–¹å¼å°†é€ æˆæ•´ä¸ªé¡¹ç›®éš¾ä»¥ç»´æŠ¤ã€‚é‚£åœ¨çœŸå®çš„é¡¹ç›®å¼€å‘ä¸­æ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿ</p><p>åœ¨çœŸå®çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œæ— è®ºæ˜¯å“ªç§æ–¹æ³•ï¼Œæˆ‘ä»¬éƒ½ä¼šå®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„è¿”å›ç»“æœã€‚æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204174537686.png"></p><blockquote><p>å‰ç«¯ï¼šåªéœ€è¦æŒ‰ç…§ç»Ÿä¸€æ ¼å¼çš„è¿”å›ç»“æœè¿›è¡Œè§£æ(ä»…ä¸€ç§è§£ææ–¹æ¡ˆ)ï¼Œå°±å¯ä»¥æ‹¿åˆ°æ•°æ®ã€‚</p></blockquote><p>ç»Ÿä¸€çš„è¿”å›ç»“æœä½¿ç”¨ç±»æ¥æè¿°ï¼Œåœ¨è¿™ä¸ªç»“æœä¸­åŒ…å«ï¼š</p><ul><li><p>å“åº”çŠ¶æ€ç ï¼šå½“å‰è¯·æ±‚æ˜¯æˆåŠŸï¼Œè¿˜æ˜¯å¤±è´¥</p></li><li><p>çŠ¶æ€ç ä¿¡æ¯ï¼šç»™é¡µé¢çš„æç¤ºä¿¡æ¯</p></li><li><p>è¿”å›çš„æ•°æ®ï¼šç»™å‰ç«¯å“åº”çš„æ•°æ®ï¼ˆå­—ç¬¦ä¸²ã€å¯¹è±¡ã€é›†åˆï¼‰</p></li></ul><p>å®šä¹‰åœ¨ä¸€ä¸ªå®ä½“ç±»Resultæ¥åŒ…å«ä»¥ä¸Šä¿¡æ¯ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Result</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> code<span class="token punctuation">;</span><span class="token comment">//å“åº”ç ï¼Œ1 ä»£è¡¨æˆåŠŸ; 0 ä»£è¡¨å¤±è´¥</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>  <span class="token comment">//å“åº”ç  æè¿°å­—ç¬¦ä¸²</span>    <span class="token keyword">private</span> <span class="token class-name">Object</span> data<span class="token punctuation">;</span> <span class="token comment">//è¿”å›çš„æ•°æ®</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> code<span class="token punctuation">,</span> <span class="token class-name">String</span> msg<span class="token punctuation">,</span> <span class="token class-name">Object</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> code<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCode</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> code<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMsg</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> data<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token class-name">Object</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//å¢åˆ æ”¹ æˆåŠŸå“åº”(ä¸éœ€è¦ç»™å‰ç«¯è¿”å›æ•°æ®)</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"success"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//æŸ¥è¯¢ æˆåŠŸå“åº”(æŠŠæŸ¥è¯¢ç»“æœåšä¸ºè¿”å›æ•°æ®å“åº”ç»™å‰ç«¯)</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token class-name">Object</span> data<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"success"</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//å¤±è´¥å“åº”</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>msg<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ”¹é€ Controllerï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResponseController</span> <span class="token punctuation">{</span>     <span class="token comment">//å“åº”ç»Ÿä¸€æ ¼å¼çš„ç»“æœ</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello World ~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//return new Result(1,"success","Hello World ~");</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">"Hello World ~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//å“åº”ç»Ÿä¸€æ ¼å¼çš„ç»“æœ</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/getAddr"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">getAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">Address</span> addr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        addr<span class="token punctuation">.</span><span class="token function">setProvince</span><span class="token punctuation">(</span><span class="token string">"å¹¿ä¸œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        addr<span class="token punctuation">.</span><span class="token function">setCity</span><span class="token punctuation">(</span><span class="token string">"æ·±åœ³"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//å“åº”ç»Ÿä¸€æ ¼å¼çš„ç»“æœ</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/listAddr"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">listAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Address</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Address</span> addr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        addr<span class="token punctuation">.</span><span class="token function">setProvince</span><span class="token punctuation">(</span><span class="token string">"å¹¿ä¸œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        addr<span class="token punctuation">.</span><span class="token function">setCity</span><span class="token punctuation">(</span><span class="token string">"æ·±åœ³"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Address</span> addr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        addr2<span class="token punctuation">.</span><span class="token function">setProvince</span><span class="token punctuation">(</span><span class="token string">"é™•è¥¿"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        addr2<span class="token punctuation">.</span><span class="token function">setCity</span><span class="token punctuation">(</span><span class="token string">"è¥¿å®‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>addr2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨Postmanæµ‹è¯•ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204180946963.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204180744084.png"></p><h3 id="2-3-æ¡ˆä¾‹"><a href="#2-3-æ¡ˆä¾‹" class="headerlink" title="2.3 æ¡ˆä¾‹"></a>2.3 æ¡ˆä¾‹</h3><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹ï¼Œæ¥åŠ å¼ºå¯¹è¯·æ±‚å“åº”çš„å­¦ä¹ ã€‚</p><h4 id="2-3-1-éœ€æ±‚è¯´æ˜"><a href="#2-3-1-éœ€æ±‚è¯´æ˜" class="headerlink" title="2.3.1 éœ€æ±‚è¯´æ˜"></a>2.3.1 éœ€æ±‚è¯´æ˜</h4><p>éœ€æ±‚ï¼šåŠ è½½å¹¶è§£æxmlæ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œå®Œæˆæ•°æ®å¤„ç†ï¼Œå¹¶åœ¨é¡µé¢å±•ç¤º</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204185928260.png">  </p><ul><li>è·å–å‘˜å·¥æ•°æ®ï¼Œè¿”å›ç»Ÿä¸€å“åº”ç»“æœï¼Œåœ¨é¡µé¢æ¸²æŸ“å±•ç¤º</li></ul><h4 id="2-3-2-å‡†å¤‡å·¥ä½œ"><a href="#2-3-2-å‡†å¤‡å·¥ä½œ" class="headerlink" title="2.3.2 å‡†å¤‡å·¥ä½œ"></a>2.3.2 å‡†å¤‡å·¥ä½œ</h4><p>æ¡ˆä¾‹å‡†å¤‡ï¼š</p><ol><li><p>XMLæ–‡ä»¶</p><ul><li>å·²ç»å‡†å¤‡å¥½(emp.xml)ï¼Œç›´æ¥å¯¼å…¥è¿›æ¥ï¼Œæ”¾åœ¨ src/main/resourcesç›®å½•ä¸‹</li></ul></li><li><p>å·¥å…·ç±»</p><ul><li>å·²ç»å‡†å¤‡å¥½è§£æXMLæ–‡ä»¶çš„å·¥å…·ç±»ï¼Œæ— éœ€è‡ªå·±å®ç°</li><li>ç›´æ¥åœ¨åˆ›å»ºä¸€ä¸ªåŒ… com.itheima.utils ï¼Œç„¶åå°†å·¥å…·ç±»æ‹·è´è¿›æ¥</li></ul></li><li><p>å‰ç«¯é¡µé¢èµ„æº</p><ul><li>å·²ç»å‡†å¤‡å¥½ï¼Œç›´æ¥æ‹·è´è¿›æ¥ï¼Œæ”¾åœ¨src/main/resourcesä¸‹çš„staticç›®å½•ä¸‹</li></ul></li></ol><p>Springbooté¡¹ç›®çš„é™æ€èµ„æº(htmlï¼Œcssï¼Œjsç­‰å‰ç«¯èµ„æº)é»˜è®¤å­˜æ”¾ç›®å½•ä¸ºï¼šclasspath:/static ã€ classpath:/publicã€ classpath:/resources</p><blockquote><p>åœ¨SpringBooté¡¹ç›®ä¸­ï¼Œé™æ€èµ„æºé»˜è®¤å¯ä»¥å­˜æ”¾çš„ç›®å½•ï¼š</p><ul><li>classpath:/static/</li><li>classpath:/public/</li><li>classpath:/resources/</li><li>classpath:/META-INF/resources/</li></ul><p>classpathï¼š</p><ul><li>ä»£è¡¨çš„æ˜¯ç±»è·¯å¾„ï¼Œåœ¨mavençš„é¡¹ç›®ä¸­ï¼Œå…¶å®æŒ‡çš„å°±æ˜¯ src/main/resources æˆ–è€… src/main/javaï¼Œä½†æ˜¯javaç›®å½•æ˜¯å­˜æ”¾javaä»£ç çš„ï¼Œæ‰€ä»¥ç›¸å…³çš„é…ç½®æ–‡ä»¶åŠé™æ€èµ„æºæ–‡æ¡£ï¼Œå°±æ”¾åœ¨ src/main/resourcesä¸‹ã€‚</li></ul></blockquote><p>xmlè§£æçš„å·¥å…·ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>utils</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>dom4j<span class="token punctuation">.</span></span><span class="token class-name">Document</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>dom4j<span class="token punctuation">.</span></span><span class="token class-name">Element</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>dom4j<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">SAXReader</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Constructor</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Field</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XmlParserUtils</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">parse</span><span class="token punctuation">(</span><span class="token class-name">String</span> file <span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> targetClass<span class="token punctuation">)</span>  <span class="token punctuation">{</span>        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å°è£…è§£æå‡ºæ¥çš„æ•°æ®</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment">//1.è·å–ä¸€ä¸ªè§£æå™¨å¯¹è±¡</span>            <span class="token class-name">SAXReader</span> saxReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SAXReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//2.åˆ©ç”¨è§£æå™¨æŠŠxmlæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­,å¹¶è¿”å›ä¸€ä¸ªæ–‡æ¡£å¯¹è±¡</span>            <span class="token class-name">Document</span> document <span class="token operator">=</span> saxReader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//3.è·å–åˆ°æ ¹æ ‡ç­¾</span>            <span class="token class-name">Element</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getRootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//4.é€šè¿‡æ ¹æ ‡ç­¾æ¥è·å– user æ ‡ç­¾</span>            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">&gt;</span></span> elements <span class="token operator">=</span> rootElement<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token string">"emp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//5.éå†é›†åˆ,å¾—åˆ°æ¯ä¸€ä¸ª user æ ‡ç­¾</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element <span class="token operator">:</span> elements<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment">//è·å– name å±æ€§</span>                <span class="token class-name">String</span> name <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//è·å– age å±æ€§</span>                <span class="token class-name">String</span> age <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//è·å– image å±æ€§</span>                <span class="token class-name">String</span> image <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token string">"image"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//è·å– gender å±æ€§</span>                <span class="token class-name">String</span> gender <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token string">"gender"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//è·å– job å±æ€§</span>                <span class="token class-name">String</span> job <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">element</span><span class="token punctuation">(</span><span class="token string">"job"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//ç»„è£…æ•°æ®</span>                <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> constructor <span class="token operator">=</span> targetClass<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                constructor<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">T</span> object <span class="token operator">=</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span> image<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> job<span class="token punctuation">)</span><span class="token punctuation">;</span>                list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-3-3-å®ç°æ­¥éª¤"><a href="#2-3-3-å®ç°æ­¥éª¤" class="headerlink" title="2.3.3 å®ç°æ­¥éª¤"></a>2.3.3 å®ç°æ­¥éª¤</h4><ol><li><p>åœ¨pom.xmlæ–‡ä»¶ä¸­å¼•å…¥dom4jçš„ä¾èµ–ï¼Œç”¨äºè§£æXMLæ–‡ä»¶</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.dom4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dom4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å¼•å…¥èµ„æ–™ä¸­æä¾›çš„ï¼šè§£æXMLçš„å·¥å…·ç±»XMLParserUtilsã€å®ä½“ç±»Empã€XMLæ–‡ä»¶emp.xml</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204182828547.png"> </p></li><li><p>å¼•å…¥èµ„æ–™ä¸­æä¾›çš„é™æ€é¡µé¢æ–‡ä»¶ï¼Œæ”¾åœ¨resourcesä¸‹çš„staticç›®å½•ä¸‹</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204183044848.png"> </p></li><li><p>åˆ›å»ºEmpControllerç±»ï¼Œç¼–å†™Controllerç¨‹åºï¼Œå¤„ç†è¯·æ±‚ï¼Œå“åº”æ•°æ®</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204184313822.png"></p></li></ol><h4 id="2-3-4-ä»£ç å®ç°"><a href="#2-3-4-ä»£ç å®ç°" class="headerlink" title="2.3.4 ä»£ç å®ç°"></a>2.3.4 ä»£ç å®ç°</h4><p>Contrillerä»£ç ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/listEmp"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//1. åŠ è½½å¹¶è§£æemp.xml</span>        <span class="token class-name">String</span> file <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">"emp.xml"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//System.out.println(file);</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empList <span class="token operator">=</span> <span class="token class-name">XmlParserUtils</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token class-name">Emp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2. å¯¹æ•°æ®è¿›è¡Œè½¬æ¢å¤„ç† - gender, job</span>        empList<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>emp <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>            <span class="token comment">//å¤„ç† gender 1: ç”·, 2: å¥³</span>            <span class="token class-name">String</span> gender <span class="token operator">=</span> emp<span class="token punctuation">.</span><span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>gender<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token string">"ç”·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>gender<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token string">"å¥³"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">//å¤„ç†job - 1: è®²å¸ˆ, 2: ç­ä¸»ä»» , 3: å°±ä¸šæŒ‡å¯¼</span>            <span class="token class-name">String</span> job <span class="token operator">=</span> emp<span class="token punctuation">.</span><span class="token function">getJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token string">"è®²å¸ˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token string">"ç­ä¸»ä»»"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"3"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token string">"å°±ä¸šæŒ‡å¯¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//3. å“åº”æ•°æ®</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>empList<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç»Ÿä¸€è¿”å›ç»“æœå®ä½“ç±»ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Result</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> code <span class="token punctuation">;</span><span class="token comment">//1 æˆåŠŸ , 0 å¤±è´¥</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span> <span class="token comment">//æç¤ºä¿¡æ¯</span>    <span class="token keyword">private</span> <span class="token class-name">Object</span> data<span class="token punctuation">;</span> <span class="token comment">//æ•°æ® date</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> code<span class="token punctuation">,</span> <span class="token class-name">String</span> msg<span class="token punctuation">,</span> <span class="token class-name">Object</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> code<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCode</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> code<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMsg</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> data<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token class-name">Object</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token class-name">Object</span> data<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"success"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"success"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Result</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-3-5-æµ‹è¯•"><a href="#2-3-5-æµ‹è¯•" class="headerlink" title="2.3.5 æµ‹è¯•"></a>2.3.5 æµ‹è¯•</h4><p>ä»£ç ç¼–å†™å®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿è¡Œå¼•å¯¼ç±»ï¼Œå¯åŠ¨æœåŠ¡è¿›è¡Œæµ‹è¯•äº†ã€‚ </p><p>ä½¿ç”¨Postmanæµ‹è¯•ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204190341389.png"></p><p>æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ï¼š <a href="http://localhost:8080/emp.html">http://localhost:8080/emp.html</a></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204185455556.png"> </p><h4 id="2-3-6-é—®é¢˜åˆ†æ"><a href="#2-3-6-é—®é¢˜åˆ†æ" class="headerlink" title="2.3.6 é—®é¢˜åˆ†æ"></a>2.3.6 é—®é¢˜åˆ†æ</h4><p>ä¸Šè¿°æ¡ˆä¾‹çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬è™½ç„¶å·²ç»å®ç°ï¼Œä½†æ˜¯å‘¢ï¼Œæˆ‘ä»¬ä¼šå‘ç°æ¡ˆä¾‹ä¸­ï¼šè§£æXMLæ•°æ®ï¼Œè·å–æ•°æ®çš„ä»£ç ï¼Œå¤„ç†æ•°æ®çš„é€»è¾‘çš„ä»£ç ï¼Œç»™é¡µé¢å“åº”çš„ä»£ç å…¨éƒ¨éƒ½å †ç§¯åœ¨ä¸€èµ·äº†ï¼Œå…¨éƒ¨éƒ½å†™åœ¨controlleræ–¹æ³•ä¸­äº†ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204190712411.png"></p><p>å½“å‰ç¨‹åºçš„è¿™ä¸ªä¸šåŠ¡é€»è¾‘è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå¦‚æœä¸šåŠ¡é€»è¾‘å†ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°Controlleræ–¹æ³•çš„ä»£ç é‡å°±å¾ˆå¤§äº†ã€‚</p><ul><li><p>å½“æˆ‘ä»¬è¦ä¿®æ”¹æ“ä½œæ•°æ®éƒ¨åˆ†çš„ä»£ç ï¼Œéœ€è¦æ”¹åŠ¨Controller</p></li><li><p>å½“æˆ‘ä»¬è¦å®Œå–„é€»è¾‘å¤„ç†éƒ¨åˆ†çš„ä»£ç ï¼Œéœ€è¦æ”¹åŠ¨Controller</p></li><li><p>å½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹æ•°æ®å“åº”çš„ä»£ç ï¼Œè¿˜æ˜¯éœ€è¦æ”¹åŠ¨Controller</p></li></ul><p>è¿™æ ·å‘¢ï¼Œå°±ä¼šé€ æˆæˆ‘ä»¬æ•´ä¸ªå·¥ç¨‹ä»£ç çš„å¤ç”¨æ€§æ¯”è¾ƒå·®ï¼Œè€Œä¸”ä»£ç éš¾ä»¥ç»´æŠ¤ã€‚ é‚£å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿå…¶å®åœ¨ç°åœ¨çš„å¼€å‘ä¸­ï¼Œæœ‰éå¸¸æˆç†Ÿçš„è§£å†³æ€è·¯ï¼Œé‚£å°±æ˜¯åˆ†å±‚å¼€å‘ã€‚</p><h2 id="3-åˆ†å±‚è§£è€¦"><a href="#3-åˆ†å±‚è§£è€¦" class="headerlink" title="3. åˆ†å±‚è§£è€¦"></a>3. åˆ†å±‚è§£è€¦</h2><h3 id="3-1-ä¸‰å±‚æ¶æ„"><a href="#3-1-ä¸‰å±‚æ¶æ„" class="headerlink" title="3.1 ä¸‰å±‚æ¶æ„"></a>3.1 ä¸‰å±‚æ¶æ„</h3><h4 id="3-1-1-ä»‹ç»"><a href="#3-1-1-ä»‹ç»" class="headerlink" title="3.1.1 ä»‹ç»"></a>3.1.1 ä»‹ç»</h4><p>åœ¨æˆ‘ä»¬è¿›è¡Œç¨‹åºè®¾è®¡ä»¥åŠç¨‹åºå¼€å‘æ—¶ï¼Œå°½å¯èƒ½è®©æ¯ä¸€ä¸ªæ¥å£ã€ç±»ã€æ–¹æ³•çš„èŒè´£æ›´å•ä¸€äº›ï¼ˆå•ä¸€èŒè´£åŸåˆ™ï¼‰ã€‚</p><blockquote><p>å•ä¸€èŒè´£åŸåˆ™ï¼šä¸€ä¸ªç±»æˆ–ä¸€ä¸ªæ–¹æ³•ï¼Œå°±åªåšä¸€ä»¶äº‹æƒ…ï¼Œåªç®¡ä¸€å—åŠŸèƒ½ã€‚</p><p>è¿™æ ·å°±å¯ä»¥è®©ç±»ã€æ¥å£ã€æ–¹æ³•çš„å¤æ‚åº¦æ›´ä½ï¼Œå¯è¯»æ€§æ›´å¼ºï¼Œæ‰©å±•æ€§æ›´å¥½ï¼Œä¹Ÿæ›´åˆ©ç”¨åæœŸçš„ç»´æŠ¤ã€‚</p></blockquote><p>æˆ‘ä»¬ä¹‹å‰å¼€å‘çš„ç¨‹åºå‘¢ï¼Œå¹¶ä¸æ»¡è¶³å•ä¸€èŒè´£åŸåˆ™ã€‚ä¸‹é¢æˆ‘ä»¬æ¥åˆ†æä¸‹ä¹‹å‰çš„ç¨‹åºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204191650390.png"> </p><p>é‚£å…¶å®æˆ‘ä»¬ä¸Šè¿°æ¡ˆä¾‹çš„å¤„ç†é€»è¾‘å‘¢ï¼Œä»ç»„æˆä¸Šçœ‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>æ•°æ®è®¿é—®ï¼šè´Ÿè´£ä¸šåŠ¡æ•°æ®çš„ç»´æŠ¤æ“ä½œï¼ŒåŒ…æ‹¬å¢ã€åˆ ã€æ”¹ã€æŸ¥ç­‰æ“ä½œã€‚</li><li>é€»è¾‘å¤„ç†ï¼šè´Ÿè´£ä¸šåŠ¡é€»è¾‘å¤„ç†çš„ä»£ç ã€‚</li><li>è¯·æ±‚å¤„ç†ã€å“åº”æ•°æ®ï¼šè´Ÿè´£ï¼Œæ¥æ”¶é¡µé¢çš„è¯·æ±‚ï¼Œç»™é¡µé¢å“åº”æ•°æ®ã€‚</li></ul><p>æŒ‰ç…§ä¸Šè¿°çš„ä¸‰ä¸ªç»„æˆéƒ¨åˆ†ï¼Œåœ¨æˆ‘ä»¬é¡¹ç›®å¼€å‘ä¸­å‘¢ï¼Œå¯ä»¥å°†ä»£ç åˆ†ä¸ºä¸‰å±‚ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204193837678.png"></p><ul><li>Controllerï¼šæ§åˆ¶å±‚ã€‚æ¥æ”¶å‰ç«¯å‘é€çš„è¯·æ±‚ï¼Œå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œå¹¶å“åº”æ•°æ®ã€‚</li><li>Serviceï¼šä¸šåŠ¡é€»è¾‘å±‚ã€‚å¤„ç†å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ã€‚</li><li>Daoï¼šæ•°æ®è®¿é—®å±‚(Data Access Object)ï¼Œä¹Ÿç§°ä¸ºæŒä¹…å±‚ã€‚è´Ÿè´£æ•°æ®è®¿é—®æ“ä½œï¼ŒåŒ…æ‹¬æ•°æ®çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥ã€‚</li></ul><p>åŸºäºä¸‰å±‚æ¶æ„çš„ç¨‹åºæ‰§è¡Œæµç¨‹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204194207812.png"></p><ul><li>å‰ç«¯å‘èµ·çš„è¯·æ±‚ï¼Œç”±Controllerå±‚æ¥æ”¶ï¼ˆControllerå“åº”æ•°æ®ç»™å‰ç«¯ï¼‰</li><li>Controllerå±‚è°ƒç”¨Serviceå±‚æ¥è¿›è¡Œé€»è¾‘å¤„ç†ï¼ˆServiceå±‚å¤„ç†å®Œåï¼ŒæŠŠå¤„ç†ç»“æœè¿”å›ç»™Controllerå±‚ï¼‰</li><li>Serivceå±‚è°ƒç”¨Daoå±‚ï¼ˆé€»è¾‘å¤„ç†è¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°çš„ä¸€äº›æ•°æ®è¦ä»Daoå±‚è·å–ï¼‰</li><li>Daoå±‚æ“ä½œæ–‡ä»¶ä¸­çš„æ•°æ®ï¼ˆDaoæ‹¿åˆ°çš„æ•°æ®ä¼šè¿”å›ç»™Serviceå±‚ï¼‰</li></ul><blockquote><p>æ€è€ƒï¼šæŒ‰ç…§ä¸‰å±‚æ¶æ„çš„æ€æƒ³ï¼Œå¦‚ä½•è¦å¯¹ä¸šåŠ¡é€»è¾‘(Serviceå±‚)è¿›è¡Œå˜æ›´ï¼Œä¼šå½±å“åˆ°Controllerå±‚å’ŒDaoå±‚å—ï¼Ÿ </p><p>ç­”æ¡ˆï¼šä¸ä¼šå½±å“ã€‚ ï¼ˆç¨‹åºçš„æ‰©å±•æ€§ã€ç»´æŠ¤æ€§å˜å¾—æ›´å¥½äº†ï¼‰</p></blockquote><h4 id="3-1-2-ä»£ç æ‹†åˆ†"><a href="#3-1-2-ä»£ç æ‹†åˆ†" class="headerlink" title="3.1.2 ä»£ç æ‹†åˆ†"></a>3.1.2 ä»£ç æ‹†åˆ†</h4><p>æˆ‘ä»¬ä½¿ç”¨ä¸‰å±‚æ¶æ„æ€æƒ³ï¼Œæ¥æ”¹é€ ä¸‹ä¹‹å‰çš„ç¨‹åºï¼š</p><ul><li>æ§åˆ¶å±‚åŒ…åï¼šxxxx.controller</li><li>ä¸šåŠ¡é€»è¾‘å±‚åŒ…åï¼šxxxx.service</li><li>æ•°æ®è®¿é—®å±‚åŒ…åï¼šxxxx.dao</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204195812200.png"></p><p><strong>æ§åˆ¶å±‚ï¼š</strong>æ¥æ”¶å‰ç«¯å‘é€çš„è¯·æ±‚ï¼Œå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œå¹¶å“åº”æ•°æ®</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpController</span> <span class="token punctuation">{</span>    <span class="token comment">//ä¸šåŠ¡å±‚å¯¹è±¡</span>    <span class="token keyword">private</span> <span class="token class-name">EmpService</span> empService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmpServiceA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/listEmp"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//1. è°ƒç”¨serviceå±‚, è·å–æ•°æ®</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empList <span class="token operator">=</span> empService<span class="token punctuation">.</span><span class="token function">listEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//3. å“åº”æ•°æ®</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>empList<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ä¸šåŠ¡é€»è¾‘å±‚ï¼š</strong>å¤„ç†å…·ä½“çš„ä¸šåŠ¡é€»è¾‘</p><ul><li>ä¸šåŠ¡æ¥å£</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//ä¸šåŠ¡é€»è¾‘æ¥å£ï¼ˆåˆ¶å®šä¸šåŠ¡æ ‡å‡†ï¼‰</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token comment">//è·å–å‘˜å·¥åˆ—è¡¨</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">listEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ä¸šåŠ¡å®ç°ç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//ä¸šåŠ¡é€»è¾‘å®ç°ç±»ï¼ˆæŒ‰ç…§ä¸šåŠ¡æ ‡å‡†å®ç°ï¼‰</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServiceA</span> <span class="token keyword">implements</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token comment">//daoå±‚å¯¹è±¡</span>    <span class="token keyword">private</span> <span class="token class-name">EmpDao</span> empDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmpDaoA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">listEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//1. è°ƒç”¨dao, è·å–æ•°æ®</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empList <span class="token operator">=</span> empDao<span class="token punctuation">.</span><span class="token function">listEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2. å¯¹æ•°æ®è¿›è¡Œè½¬æ¢å¤„ç† - gender, job</span>        empList<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>emp <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>            <span class="token comment">//å¤„ç† gender 1: ç”·, 2: å¥³</span>            <span class="token class-name">String</span> gender <span class="token operator">=</span> emp<span class="token punctuation">.</span><span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>gender<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token string">"ç”·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>gender<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token string">"å¥³"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">//å¤„ç†job - 1: è®²å¸ˆ, 2: ç­ä¸»ä»» , 3: å°±ä¸šæŒ‡å¯¼</span>            <span class="token class-name">String</span> job <span class="token operator">=</span> emp<span class="token punctuation">.</span><span class="token function">getJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token string">"è®²å¸ˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token string">"ç­ä¸»ä»»"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"3"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token string">"å°±ä¸šæŒ‡å¯¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> empList<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ•°æ®è®¿é—®å±‚ï¼š</strong>è´Ÿè´£æ•°æ®çš„è®¿é—®æ“ä½œï¼ŒåŒ…å«æ•°æ®çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥</p><ul><li>æ•°æ®è®¿é—®æ¥å£</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//æ•°æ®è®¿é—®å±‚æ¥å£ï¼ˆåˆ¶å®šæ ‡å‡†ï¼‰</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpDao</span> <span class="token punctuation">{</span>    <span class="token comment">//è·å–å‘˜å·¥åˆ—è¡¨æ•°æ®</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">listEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ•°æ®è®¿é—®å®ç°ç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//æ•°æ®è®¿é—®å®ç°ç±»</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpDaoA</span> <span class="token keyword">implements</span> <span class="token class-name">EmpDao</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">listEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//1. åŠ è½½å¹¶è§£æemp.xml</span>        <span class="token class-name">String</span> file <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">"emp.xml"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empList <span class="token operator">=</span> <span class="token class-name">XmlParserUtils</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token class-name">Emp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> empList<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204201342490.png"></p><p>ä¸‰å±‚æ¶æ„çš„å¥½å¤„ï¼š</p><ol><li>å¤ç”¨æ€§å¼º</li><li>ä¾¿äºç»´æŠ¤</li><li>åˆ©ç”¨æ‰©å±•</li></ol><h3 id="3-2-åˆ†å±‚è§£è€¦"><a href="#3-2-åˆ†å±‚è§£è€¦" class="headerlink" title="3.2 åˆ†å±‚è§£è€¦"></a>3.2 åˆ†å±‚è§£è€¦</h3><p>åˆšæ‰æˆ‘ä»¬å­¦ä¹ è¿‡ç¨‹åºåˆ†å±‚æ€æƒ³äº†ï¼Œæ¥ä¸‹æ¥å‘¢ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ ä¸‹ç¨‹åºçš„è§£è€¦æ€æƒ³ã€‚</p><p>è§£è€¦ï¼šè§£é™¤è€¦åˆã€‚</p><h4 id="3-2-1-è€¦åˆé—®é¢˜"><a href="#3-2-1-è€¦åˆé—®é¢˜" class="headerlink" title="3.2.1 è€¦åˆé—®é¢˜"></a>3.2.1 è€¦åˆé—®é¢˜</h4><p>é¦–å…ˆéœ€è¦äº†è§£è½¯ä»¶å¼€å‘æ¶‰åŠåˆ°çš„ä¸¤ä¸ªæ¦‚å¿µï¼šå†…èšå’Œè€¦åˆã€‚</p><ul><li><p>å†…èšï¼šè½¯ä»¶ä¸­å„ä¸ªåŠŸèƒ½æ¨¡å—å†…éƒ¨çš„åŠŸèƒ½è”ç³»ã€‚</p></li><li><p>è€¦åˆï¼šè¡¡é‡è½¯ä»¶ä¸­å„ä¸ªå±‚/æ¨¡å—ä¹‹é—´çš„ä¾èµ–ã€å…³è”çš„ç¨‹åº¦ã€‚</p></li></ul><p><strong>è½¯ä»¶è®¾è®¡åŸåˆ™ï¼šé«˜å†…èšä½è€¦åˆã€‚</strong></p><blockquote><p>é«˜å†…èšæŒ‡çš„æ˜¯ï¼šä¸€ä¸ªæ¨¡å—ä¸­å„ä¸ªå…ƒç´ ä¹‹é—´çš„è”ç³»çš„ç´§å¯†ç¨‹åº¦ï¼Œå¦‚æœå„ä¸ªå…ƒç´ (è¯­å¥ã€ç¨‹åºæ®µ)ä¹‹é—´çš„è”ç³»ç¨‹åº¦è¶Šé«˜ï¼Œåˆ™å†…èšæ€§è¶Šé«˜ï¼Œå³ â€œé«˜å†…èšâ€ã€‚</p><p>ä½è€¦åˆæŒ‡çš„æ˜¯ï¼šè½¯ä»¶ä¸­å„ä¸ªå±‚ã€æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³è”ç¨‹åºè¶Šä½è¶Šå¥½ã€‚</p></blockquote><p>ç¨‹åºä¸­é«˜å†…èšçš„ä½“ç°ï¼š</p><ul><li>EmpServiceAç±»ä¸­åªç¼–å†™äº†å’Œå‘˜å·¥ç›¸å…³çš„é€»è¾‘å¤„ç†ä»£ç </li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204202531571.png"> </p><p>ç¨‹åºä¸­è€¦åˆä»£ç çš„ä½“ç°ï¼š</p><ul><li>æŠŠä¸šåŠ¡ç±»å˜ä¸ºEmpServiceBæ—¶ï¼Œéœ€è¦ä¿®æ”¹controllerå±‚ä¸­çš„ä»£ç </li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241128171846369.png"></p><p><strong>é«˜å†…èšã€ä½è€¦åˆçš„ç›®çš„æ˜¯ä½¿ç¨‹åºæ¨¡å—çš„å¯é‡ç”¨æ€§ã€ç§»æ¤æ€§å¤§å¤§å¢å¼ºã€‚</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220828215549593.png"></p><h4 id="3-2-2-è§£è€¦æ€è·¯"><a href="#3-2-2-è§£è€¦æ€è·¯" class="headerlink" title="3.2.2  è§£è€¦æ€è·¯"></a>3.2.2  è§£è€¦æ€è·¯</h4><p>ä¹‹å‰æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œéœ€è¦ä»€ä¹ˆå¯¹è±¡ï¼Œå°±ç›´æ¥newä¸€ä¸ªå°±å¯ä»¥äº†ã€‚ è¿™ç§åšæ³•å‘¢ï¼Œå±‚ä¸å±‚ä¹‹é—´ä»£ç å°±è€¦åˆäº†ï¼Œå½“serviceå±‚çš„å®ç°å˜äº†ä¹‹åï¼Œ æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹controllerå±‚çš„ä»£ç ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204204916033.png"></p><p> é‚£åº”è¯¥æ€ä¹ˆè§£è€¦å‘¢ï¼Ÿ</p><ul><li>é¦–å…ˆä¸èƒ½åœ¨EmpControllerä¸­ä½¿ç”¨newå¯¹è±¡ã€‚ä»£ç å¦‚ä¸‹ï¼š</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204205328069.png"></p><ul><li>æ­¤æ—¶ï¼Œå°±å­˜åœ¨å¦ä¸€ä¸ªé—®é¢˜äº†ï¼Œä¸èƒ½newï¼Œå°±æ„å‘³ç€æ²¡æœ‰ä¸šåŠ¡å±‚å¯¹è±¡ï¼ˆç¨‹åºè¿è¡Œå°±æŠ¥é”™ï¼‰ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ<ul><li>æˆ‘ä»¬çš„è§£å†³æ€è·¯æ˜¯ï¼š<ul><li>æä¾›ä¸€ä¸ªå®¹å™¨ï¼Œå®¹å™¨ä¸­å­˜å‚¨ä¸€äº›å¯¹è±¡(ä¾‹ï¼šEmpServiceå¯¹è±¡)</li><li>controllerç¨‹åºä»å®¹å™¨ä¸­è·å–EmpServiceç±»å‹çš„å¯¹è±¡</li></ul></li></ul></li></ul><p>æˆ‘ä»¬æƒ³è¦å®ç°ä¸Šè¿°è§£è€¦æ“ä½œï¼Œå°±æ¶‰åŠåˆ°Springä¸­çš„ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</p><ul><li><p><strong>æ§åˆ¶åè½¬ï¼š</strong> Inversion Of Controlï¼Œç®€ç§°IOCã€‚å¯¹è±¡çš„åˆ›å»ºæ§åˆ¶æƒç”±ç¨‹åºè‡ªèº«è½¬ç§»åˆ°å¤–éƒ¨ï¼ˆå®¹å™¨ï¼‰ï¼Œè¿™ç§æ€æƒ³ç§°ä¸ºæ§åˆ¶åè½¬ã€‚</p><blockquote><p>å¯¹è±¡çš„åˆ›å»ºæƒç”±ç¨‹åºå‘˜ä¸»åŠ¨åˆ›å»ºè½¬ç§»åˆ°å®¹å™¨(ç”±å®¹å™¨åˆ›å»ºã€ç®¡ç†å¯¹è±¡)ã€‚è¿™ä¸ªå®¹å™¨ç§°ä¸ºï¼šIOCå®¹å™¨æˆ–Springå®¹å™¨</p></blockquote></li><li><p><strong>ä¾èµ–æ³¨å…¥ï¼š</strong> Dependency Injectionï¼Œç®€ç§°DIã€‚å®¹å™¨ä¸ºåº”ç”¨ç¨‹åºæä¾›è¿è¡Œæ—¶ï¼Œæ‰€ä¾èµ–çš„èµ„æºï¼Œç§°ä¹‹ä¸ºä¾èµ–æ³¨å…¥ã€‚</p><blockquote><p>ç¨‹åºè¿è¡Œæ—¶éœ€è¦æŸä¸ªèµ„æºï¼Œæ­¤æ—¶å®¹å™¨å°±ä¸ºå…¶æä¾›è¿™ä¸ªèµ„æºã€‚</p><p>ä¾‹ï¼šEmpControllerç¨‹åºè¿è¡Œæ—¶éœ€è¦EmpServiceå¯¹è±¡ï¼ŒSpringå®¹å™¨å°±ä¸ºå…¶æä¾›å¹¶æ³¨å…¥EmpServiceå¯¹è±¡</p></blockquote></li></ul><p>IOCå®¹å™¨ä¸­åˆ›å»ºã€ç®¡ç†çš„å¯¹è±¡ï¼Œç§°ä¹‹ä¸ºï¼šbeanå¯¹è±¡</p><h3 id="3-3-IOC-DI"><a href="#3-3-IOC-DI" class="headerlink" title="3.3 IOC&amp;DI"></a>3.3 IOC&amp;DI</h3><p>ä¸Šé¢æˆ‘ä»¬å¼•å‡ºäº†Springä¸­IOCå’ŒDIçš„åŸºæœ¬æ¦‚å¿µï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥å…·ä½“å­¦ä¹ ä¸‹IOCå’ŒDIçš„ä»£ç å®ç°ã€‚</p><h4 id="3-3-1-IOC-DIå…¥é—¨"><a href="#3-3-1-IOC-DIå…¥é—¨" class="headerlink" title="3.3.1 IOC&amp;DIå…¥é—¨"></a>3.3.1 IOC&amp;DIå…¥é—¨</h4><p>ä»»åŠ¡ï¼šå®ŒæˆControllerå±‚ã€Serviceå±‚ã€Daoå±‚çš„ä»£ç è§£è€¦</p><ul><li>æ€è·¯ï¼š<ol><li>åˆ é™¤Controllerå±‚ã€Serviceå±‚ä¸­newå¯¹è±¡çš„ä»£ç </li><li>Serviceå±‚åŠDaoå±‚çš„å®ç°ç±»ï¼Œäº¤ç»™IOCå®¹å™¨ç®¡ç†</li><li>ä¸ºControlleråŠServiceæ³¨å…¥è¿è¡Œæ—¶ä¾èµ–çš„å¯¹è±¡<ul><li>Controllerç¨‹åºä¸­æ³¨å…¥ä¾èµ–çš„Serviceå±‚å¯¹è±¡</li><li>Serviceç¨‹åºä¸­æ³¨å…¥ä¾èµ–çš„Daoå±‚å¯¹è±¡</li></ul></li></ol></li></ul><p>ç¬¬1æ­¥ï¼šåˆ é™¤Controllerå±‚ã€Serviceå±‚ä¸­newå¯¹è±¡çš„ä»£ç </p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204212807207.png"></p><p>ç¬¬2æ­¥ï¼šServiceå±‚åŠDaoå±‚çš„å®ç°ç±»ï¼Œäº¤ç»™IOCå®¹å™¨ç®¡ç†</p><ul><li>ä½¿ç”¨Springæä¾›çš„æ³¨è§£ï¼š@Component ï¼Œå°±å¯ä»¥å®ç°ç±»äº¤ç»™IOCå®¹å™¨ç®¡ç†</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204213328034.png"></p><p>ç¬¬3æ­¥ï¼šä¸ºControlleråŠServiceæ³¨å…¥è¿è¡Œæ—¶ä¾èµ–çš„å¯¹è±¡</p><ul><li>ä½¿ç”¨Springæä¾›çš„æ³¨è§£ï¼š@Autowired ï¼Œå°±å¯ä»¥å®ç°ç¨‹åºè¿è¡Œæ—¶IOCå®¹å™¨è‡ªåŠ¨æ³¨å…¥éœ€è¦çš„ä¾èµ–å¯¹è±¡</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204213859112.png"></p><p>å®Œæ•´çš„ä¸‰å±‚ä»£ç ï¼š</p><ul><li><strong>Controllerå±‚ï¼š</strong></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span> <span class="token comment">//è¿è¡Œæ—¶,ä»IOCå®¹å™¨ä¸­è·å–è¯¥ç±»å‹å¯¹è±¡,èµ‹å€¼ç»™è¯¥å˜é‡</span>    <span class="token keyword">private</span> <span class="token class-name">EmpService</span> empService <span class="token punctuation">;</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/listEmp"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//1. è°ƒç”¨service, è·å–æ•°æ®</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empList <span class="token operator">=</span> empService<span class="token punctuation">.</span><span class="token function">listEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//3. å“åº”æ•°æ®</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>empList<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>Serviceå±‚ï¼š</strong></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span> <span class="token comment">//å°†å½“å‰å¯¹è±¡äº¤ç»™IOCå®¹å™¨ç®¡ç†,æˆä¸ºIOCå®¹å™¨çš„bean</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServiceA</span> <span class="token keyword">implements</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span> <span class="token comment">//è¿è¡Œæ—¶,ä»IOCå®¹å™¨ä¸­è·å–è¯¥ç±»å‹å¯¹è±¡,èµ‹å€¼ç»™è¯¥å˜é‡</span>    <span class="token keyword">private</span> <span class="token class-name">EmpDao</span> empDao <span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">listEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//1. è°ƒç”¨dao, è·å–æ•°æ®</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empList <span class="token operator">=</span> empDao<span class="token punctuation">.</span><span class="token function">listEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2. å¯¹æ•°æ®è¿›è¡Œè½¬æ¢å¤„ç† - gender, job</span>        empList<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>emp <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>            <span class="token comment">//å¤„ç† gender 1: ç”·, 2: å¥³</span>            <span class="token class-name">String</span> gender <span class="token operator">=</span> emp<span class="token punctuation">.</span><span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>gender<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token string">"ç”·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>gender<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token string">"å¥³"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">//å¤„ç†job - 1: è®²å¸ˆ, 2: ç­ä¸»ä»» , 3: å°±ä¸šæŒ‡å¯¼</span>            <span class="token class-name">String</span> job <span class="token operator">=</span> emp<span class="token punctuation">.</span><span class="token function">getJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token string">"è®²å¸ˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token string">"ç­ä¸»ä»»"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"3"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token string">"å°±ä¸šæŒ‡å¯¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> empList<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Daoå±‚ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span> <span class="token comment">//å°†å½“å‰å¯¹è±¡äº¤ç»™IOCå®¹å™¨ç®¡ç†,æˆä¸ºIOCå®¹å™¨çš„bean</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpDaoA</span> <span class="token keyword">implements</span> <span class="token class-name">EmpDao</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">listEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//1. åŠ è½½å¹¶è§£æemp.xml</span>        <span class="token class-name">String</span> file <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">"emp.xml"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empList <span class="token operator">=</span> <span class="token class-name">XmlParserUtils</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token class-name">Emp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> empList<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œæµ‹è¯•ï¼š</p><ul><li>å¯åŠ¨SpringBootå¼•å¯¼ç±»ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ï¼š<a href="http://localhost:8080/emp.html">http://localhost:8080/emp.html</a></li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241128172715751.png"></p><h4 id="3-3-2-IOCè¯¦è§£"><a href="#3-3-2-IOCè¯¦è§£" class="headerlink" title="3.3.2 IOCè¯¦è§£"></a>3.3.2 IOCè¯¦è§£</h4><p>é€šè¿‡IOCå’ŒDIçš„å…¥é—¨ç¨‹åºå‘¢ï¼Œæˆ‘ä»¬å·²ç»åŸºæœ¬äº†è§£äº†IOCå’ŒDIçš„åŸºç¡€æ“ä½œã€‚æ¥ä¸‹æ¥å‘¢ï¼Œæˆ‘ä»¬å­¦ä¹ ä¸‹IOCæ§åˆ¶åè½¬å’ŒDIä¾èµ–æ³¨å…¥çš„ç»†èŠ‚ã€‚</p><h5 id="3-3-2-1-beançš„å£°æ˜"><a href="#3-3-2-1-beançš„å£°æ˜" class="headerlink" title="3.3.2.1 beançš„å£°æ˜"></a>3.3.2.1 beançš„å£°æ˜</h5><p>å‰é¢æˆ‘ä»¬æåˆ°IOCæ§åˆ¶åè½¬ï¼Œå°±æ˜¯å°†å¯¹è±¡çš„æ§åˆ¶æƒäº¤ç»™Springçš„IOCå®¹å™¨ï¼Œç”±IOCå®¹å™¨åˆ›å»ºåŠç®¡ç†å¯¹è±¡ã€‚IOCå®¹å™¨åˆ›å»ºçš„å¯¹è±¡ç§°ä¸ºbeanå¯¹è±¡ã€‚</p><p>åœ¨ä¹‹å‰çš„å…¥é—¨æ¡ˆä¾‹ä¸­ï¼Œè¦æŠŠæŸä¸ªå¯¹è±¡äº¤ç»™IOCå®¹å™¨ç®¡ç†ï¼Œéœ€è¦åœ¨ç±»ä¸Šæ·»åŠ ä¸€ä¸ªæ³¨è§£ï¼š@Component </p><p>è€ŒSpringæ¡†æ¶ä¸ºäº†æ›´å¥½çš„æ ‡è¯†webåº”ç”¨ç¨‹åºå¼€å‘å½“ä¸­ï¼Œbeanå¯¹è±¡åˆ°åº•å½’å±äºå“ªä¸€å±‚ï¼Œåˆæä¾›äº†@Componentçš„è¡ç”Ÿæ³¨è§£ï¼š</p><ul><li>@Controller    ï¼ˆæ ‡æ³¨åœ¨æ§åˆ¶å±‚ç±»ä¸Šï¼‰</li><li>@Service          ï¼ˆæ ‡æ³¨åœ¨ä¸šåŠ¡å±‚ç±»ä¸Šï¼‰</li><li>@Repository    ï¼ˆæ ‡æ³¨åœ¨æ•°æ®è®¿é—®å±‚ç±»ä¸Šï¼‰</li></ul><p>ä¿®æ”¹å…¥é—¨æ¡ˆä¾‹ä»£ç ï¼š</p><ul><li><strong>Controllerå±‚ï¼š</strong></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span>  <span class="token comment">//@RestController = @Controller + @ResponseBody</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span> <span class="token comment">//è¿è¡Œæ—¶,ä»IOCå®¹å™¨ä¸­è·å–è¯¥ç±»å‹å¯¹è±¡,èµ‹å€¼ç»™è¯¥å˜é‡</span>    <span class="token keyword">private</span> <span class="token class-name">EmpService</span> empService <span class="token punctuation">;</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/listEmp"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//1. è°ƒç”¨service, è·å–æ•°æ®</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empList <span class="token operator">=</span> empService<span class="token punctuation">.</span><span class="token function">listEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//3. å“åº”æ•°æ®</span>        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>empList<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>Serviceå±‚ï¼š</strong></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServiceA</span> <span class="token keyword">implements</span> <span class="token class-name">EmpService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span> <span class="token comment">//è¿è¡Œæ—¶,ä»IOCå®¹å™¨ä¸­è·å–è¯¥ç±»å‹å¯¹è±¡,èµ‹å€¼ç»™è¯¥å˜é‡</span>    <span class="token keyword">private</span> <span class="token class-name">EmpDao</span> empDao <span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">listEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//1. è°ƒç”¨dao, è·å–æ•°æ®</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empList <span class="token operator">=</span> empDao<span class="token punctuation">.</span><span class="token function">listEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2. å¯¹æ•°æ®è¿›è¡Œè½¬æ¢å¤„ç† - gender, job</span>        empList<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>emp <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>            <span class="token comment">//å¤„ç† gender 1: ç”·, 2: å¥³</span>            <span class="token class-name">String</span> gender <span class="token operator">=</span> emp<span class="token punctuation">.</span><span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>gender<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token string">"ç”·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>gender<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token string">"å¥³"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">//å¤„ç†job - 1: è®²å¸ˆ, 2: ç­ä¸»ä»» , 3: å°±ä¸šæŒ‡å¯¼</span>            <span class="token class-name">String</span> job <span class="token operator">=</span> emp<span class="token punctuation">.</span><span class="token function">getJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token string">"è®²å¸ˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token string">"ç­ä¸»ä»»"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"3"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                emp<span class="token punctuation">.</span><span class="token function">setJob</span><span class="token punctuation">(</span><span class="token string">"å°±ä¸šæŒ‡å¯¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> empList<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Daoå±‚ï¼š</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpDaoA</span> <span class="token keyword">implements</span> <span class="token class-name">EmpDao</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">listEmp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//1. åŠ è½½å¹¶è§£æemp.xml</span>        <span class="token class-name">String</span> file <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">"emp.xml"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> empList <span class="token operator">=</span> <span class="token class-name">XmlParserUtils</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token class-name">Emp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> empList<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¦æŠŠæŸä¸ªå¯¹è±¡äº¤ç»™IOCå®¹å™¨ç®¡ç†ï¼Œéœ€è¦åœ¨å¯¹åº”çš„ç±»ä¸ŠåŠ ä¸Šå¦‚ä¸‹æ³¨è§£ä¹‹ä¸€ï¼š</p><table><thead><tr><th align="left">æ³¨è§£</th><th>è¯´æ˜</th><th>ä½ç½®</th></tr></thead><tbody><tr><td align="left">@Controller</td><td>@Componentçš„è¡ç”Ÿæ³¨è§£</td><td>æ ‡æ³¨åœ¨æ§åˆ¶å™¨ç±»ä¸Š</td></tr><tr><td align="left">@Service</td><td>@Componentçš„è¡ç”Ÿæ³¨è§£</td><td>æ ‡æ³¨åœ¨ä¸šåŠ¡ç±»ä¸Š</td></tr><tr><td align="left">@Repository</td><td>@Componentçš„è¡ç”Ÿæ³¨è§£</td><td>æ ‡æ³¨åœ¨æ•°æ®è®¿é—®ç±»ä¸Šï¼ˆç”±äºä¸mybatisæ•´åˆï¼Œç”¨çš„å°‘ï¼‰</td></tr><tr><td align="left">@Component</td><td>å£°æ˜beançš„åŸºç¡€æ³¨è§£</td><td>ä¸å±äºä»¥ä¸Šä¸‰ç±»æ—¶ï¼Œç”¨æ­¤æ³¨è§£</td></tr></tbody></table><blockquote><p>æŸ¥çœ‹æºç ï¼š<img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204221320230.png"></p></blockquote><p>åœ¨IOCå®¹å™¨ä¸­ï¼Œæ¯ä¸€ä¸ªBeanéƒ½æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„åå­—ï¼Œå¯ä»¥é€šè¿‡æ³¨è§£çš„valueå±æ€§æŒ‡å®šbeançš„åå­—ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤ä¸ºç±»åé¦–å­—æ¯å°å†™ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204222650873.png"></p><blockquote><p>æ³¨æ„äº‹é¡¹: </p><ul><li>å£°æ˜beançš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡valueå±æ€§æŒ‡å®šbeançš„åå­—ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤ä¸ºç±»åé¦–å­—æ¯å°å†™ã€‚</li><li>ä½¿ç”¨ä»¥ä¸Šå››ä¸ªæ³¨è§£éƒ½å¯ä»¥å£°æ˜beanï¼Œä½†æ˜¯åœ¨springbooté›†æˆwebå¼€å‘ä¸­ï¼Œå£°æ˜æ§åˆ¶å™¨beanåªèƒ½ç”¨@Controllerã€‚</li></ul></blockquote><h5 id="3-3-2-2-ç»„ä»¶æ‰«æ"><a href="#3-3-2-2-ç»„ä»¶æ‰«æ" class="headerlink" title="3.3.2.2 ç»„ä»¶æ‰«æ"></a>3.3.2.2 ç»„ä»¶æ‰«æ</h5><p>é—®é¢˜ï¼šä½¿ç”¨å‰é¢å­¦ä¹ çš„å››ä¸ªæ³¨è§£å£°æ˜çš„beanï¼Œä¸€å®šä¼šç”Ÿæ•ˆå—ï¼Ÿ</p><p>ç­”æ¡ˆï¼šä¸ä¸€å®šã€‚ï¼ˆåŸå› ï¼šbeanæƒ³è¦ç”Ÿæ•ˆï¼Œè¿˜éœ€è¦è¢«ç»„ä»¶æ‰«æï¼‰</p><p> ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¿®æ”¹é¡¹ç›®å·¥ç¨‹çš„ç›®å½•ç»“æ„ï¼Œæ¥æµ‹è¯•beanå¯¹è±¡æ˜¯å¦ç”Ÿæ•ˆï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204223602694.png"></p><p>è¿è¡Œç¨‹åºåï¼ŒæŠ¥é”™ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204223815554.png"></p><p>ä¸ºä»€ä¹ˆæ²¡æœ‰æ‰¾åˆ°beanå¯¹è±¡å‘¢ï¼Ÿ</p><ul><li>ä½¿ç”¨å››å¤§æ³¨è§£å£°æ˜çš„beanï¼Œè¦æƒ³ç”Ÿæ•ˆï¼Œè¿˜éœ€è¦è¢«ç»„ä»¶æ‰«ææ³¨è§£@ComponentScanæ‰«æ</li></ul><blockquote><p>@ComponentScanæ³¨è§£è™½ç„¶æ²¡æœ‰æ˜¾å¼é…ç½®ï¼Œä½†æ˜¯å®é™…ä¸Šå·²ç»åŒ…å«åœ¨äº†å¼•å¯¼ç±»å£°æ˜æ³¨è§£ @SpringBootApplication ä¸­ï¼Œ==<strong>é»˜è®¤æ‰«æçš„èŒƒå›´æ˜¯SpringBootå¯åŠ¨ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…</strong>==ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204224643683.png"></p></blockquote><ul><li>è§£å†³æ–¹æ¡ˆï¼šæ‰‹åŠ¨æ·»åŠ @ComponentScanæ³¨è§£ï¼ŒæŒ‡å®šè¦æ‰«æçš„åŒ…   ï¼ˆ==ä»…åšäº†è§£ï¼Œä¸æ¨è==ï¼‰</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204225437297.png"></p><p>æ¨èåšæ³•ï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼š</p><ul><li>å°†æˆ‘ä»¬å®šä¹‰çš„controllerï¼Œserviceï¼Œdaoè¿™äº›åŒ…å‘¢ï¼Œéƒ½æ”¾åœ¨å¼•å¯¼ç±»æ‰€åœ¨åŒ…com.itheimaçš„å­åŒ…ä¸‹ï¼Œè¿™æ ·æˆ‘ä»¬å®šä¹‰çš„beanå°±ä¼šè¢«è‡ªåŠ¨çš„æ‰«æåˆ°</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204225815624.png"></p><h4 id="3-3-3-DIè¯¦è§£"><a href="#3-3-3-DIè¯¦è§£" class="headerlink" title="3.3.3 DIè¯¦è§£"></a>3.3.3 DIè¯¦è§£</h4><p>ä¸Šä¸€å°èŠ‚æˆ‘ä»¬è®²è§£äº†æ§åˆ¶åè½¬IOCçš„ç»†èŠ‚ï¼Œæ¥ä¸‹æ¥å‘¢ï¼Œæˆ‘ä»¬å­¦ä¹ ä¾èµ–æ³¨è§£DIçš„ç»†èŠ‚ã€‚</p><p>ä¾èµ–æ³¨å…¥ï¼Œæ˜¯æŒ‡IOCå®¹å™¨è¦ä¸ºåº”ç”¨ç¨‹åºå»æä¾›è¿è¡Œæ—¶æ‰€ä¾èµ–çš„èµ„æºï¼Œè€Œèµ„æºæŒ‡çš„å°±æ˜¯å¯¹è±¡ã€‚</p><p>åœ¨å…¥é—¨ç¨‹åºæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†@Autowiredè¿™ä¸ªæ³¨è§£ï¼Œå®Œæˆäº†ä¾èµ–æ³¨å…¥çš„æ“ä½œï¼Œè€Œè¿™ä¸ªAutowiredç¿»è¯‘è¿‡æ¥å«ï¼šè‡ªåŠ¨è£…é…ã€‚</p><p>@Autowiredæ³¨è§£ï¼Œé»˜è®¤æ˜¯æŒ‰ç…§<strong>ç±»å‹</strong>è¿›è¡Œè‡ªåŠ¨è£…é…çš„ï¼ˆå»IOCå®¹å™¨ä¸­æ‰¾æŸä¸ªç±»å‹çš„å¯¹è±¡ï¼Œç„¶åå®Œæˆæ³¨å…¥æ“ä½œï¼‰</p><blockquote><p>å…¥é—¨ç¨‹åºä¸¾ä¾‹ï¼šåœ¨EmpControllerè¿è¡Œçš„æ—¶å€™ï¼Œå°±è¦åˆ°IOCå®¹å™¨å½“ä¸­å»æŸ¥æ‰¾EmpServiceè¿™ä¸ªç±»å‹çš„å¯¹è±¡ï¼Œè€Œæˆ‘ä»¬çš„IOCå®¹å™¨ä¸­åˆšå¥½æœ‰ä¸€ä¸ªEmpServiceè¿™ä¸ªç±»å‹çš„å¯¹è±¡ï¼Œæ‰€ä»¥å°±æ‰¾åˆ°äº†è¿™ä¸ªç±»å‹çš„å¯¹è±¡å®Œæˆæ³¨å…¥æ“ä½œã€‚</p></blockquote><p>é‚£å¦‚æœåœ¨IOCå®¹å™¨ä¸­ï¼Œå­˜åœ¨å¤šä¸ªç›¸åŒç±»å‹çš„beanå¯¹è±¡ï¼Œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿ</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204232154445.png"></p><ul><li>ç¨‹åºè¿è¡Œä¼šæŠ¥é”™</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204231616724.png"></p><p>å¦‚ä½•è§£å†³ä¸Šè¿°é—®é¢˜å‘¢ï¼ŸSpringæä¾›äº†ä»¥ä¸‹å‡ ç§è§£å†³æ–¹æ¡ˆï¼š</p><ul><li><p>@Primary</p></li><li><p>@Qualifier</p></li><li><p>@Resource</p></li></ul><p>ä½¿ç”¨@Primaryæ³¨è§£ï¼šå½“å­˜åœ¨å¤šä¸ªç›¸åŒç±»å‹çš„Beanæ³¨å…¥æ—¶ï¼ŒåŠ ä¸Š@Primaryæ³¨è§£ï¼Œæ¥ç¡®å®šé»˜è®¤çš„å®ç°ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204232501679.png"> </p><p>ä½¿ç”¨@Qualifieræ³¨è§£ï¼šæŒ‡å®šå½“å‰è¦æ³¨å…¥çš„beanå¯¹è±¡ã€‚ åœ¨@Qualifierçš„valueå±æ€§ä¸­ï¼ŒæŒ‡å®šæ³¨å…¥çš„beançš„åç§°ã€‚</p><ul><li>@Qualifieræ³¨è§£ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»é…åˆ@Autowiredä½¿ç”¨</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204233333606.png"></p><p>ä½¿ç”¨@Resourceæ³¨è§£ï¼šæ˜¯æŒ‰ç…§beançš„åç§°è¿›è¡Œæ³¨å…¥ã€‚é€šè¿‡nameå±æ€§æŒ‡å®šè¦æ³¨å…¥çš„beançš„åç§°ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221204233637735.png"></p><blockquote><p>é¢è¯•é¢˜ ï¼š @Autowird ä¸ @Resourceçš„åŒºåˆ«</p><ul><li>@Autowired æ˜¯springæ¡†æ¶æä¾›çš„æ³¨è§£ï¼Œè€Œ@Resourceæ˜¯JDKæä¾›çš„æ³¨è§£</li><li>@Autowired é»˜è®¤æ˜¯æŒ‰ç…§ç±»å‹æ³¨å…¥ï¼Œè€Œ@Resourceæ˜¯æŒ‰ç…§åç§°æ³¨å…¥</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Postman </tag>
            
            <tag> è¯·æ±‚å’Œå“åº” </tag>
            
            <tag> è§£è€¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootWebå…¥é—¨</title>
      <link href="/2024/11/28/springbootweb-ru-men/"/>
      <url>/2024/11/28/springbootweb-ru-men/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringBootåŸºç¡€"><a href="#SpringBootåŸºç¡€" class="headerlink" title="SpringBootåŸºç¡€"></a>SpringBootåŸºç¡€</h1><h2 id="è¯¾ç¨‹å†…å®¹"><a href="#è¯¾ç¨‹å†…å®¹" class="headerlink" title="è¯¾ç¨‹å†…å®¹"></a>è¯¾ç¨‹å†…å®¹</h2><blockquote><ol><li><p>SpringBootWebå…¥é—¨</p></li><li><p>HTTPåè®®</p></li><li><p>WebæœåŠ¡å™¨-Tomcat</p></li></ol></blockquote><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241128144215431.png"></p><p>ä¸‹é¢æˆ‘ä»¬å°†è¿›å…¥SpringBootåŸºç¡€é˜¶æ®µçš„å­¦ä¹ ã€‚</p><p>åœ¨æ²¡æœ‰æ­£å¼çš„å­¦ä¹ SpringBootä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆæ¥äº†è§£ä¸‹ä»€ä¹ˆæ˜¯Springã€‚</p><p>æˆ‘ä»¬å¯ä»¥æ‰“å¼€Springçš„å®˜ç½‘(<a href="https://spring.io)ï¼Œå»çœ‹ä¸€ä¸‹Springçš„ç®€ä»‹ï¼šSpring">https://spring.io)ï¼Œå»çœ‹ä¸€ä¸‹Springçš„ç®€ä»‹ï¼šSpring</a> makes Java simpleã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220617222738668.png"></p><p>Springçš„å®˜æ–¹æä¾›å¾ˆå¤šå¼€æºçš„é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹å‡»ä¸Šé¢çš„projectsï¼Œçœ‹åˆ°springå®¶æ—æ——ä¸‹çš„é¡¹ç›®ï¼ŒæŒ‰ç…§æµè¡Œç¨‹åº¦æ’åºä¸ºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220617222925923.png"></p><p>Springå‘å±•åˆ°ä»Šå¤©å·²ç»å½¢æˆäº†ä¸€ç§å¼€å‘ç”Ÿæ€åœˆï¼ŒSpringæä¾›äº†è‹¥å¹²ä¸ªå­é¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®ç”¨äºå®Œæˆç‰¹å®šçš„åŠŸèƒ½ã€‚è€Œæˆ‘ä»¬åœ¨é¡¹ç›®å¼€å‘æ—¶ï¼Œä¸€èˆ¬ä¼šåå‘äºé€‰æ‹©è¿™ä¸€å¥—springå®¶æ—çš„æŠ€æœ¯ï¼Œæ¥è§£å†³å¯¹åº”é¢†åŸŸçš„é—®é¢˜ï¼Œé‚£æˆ‘ä»¬ç§°è¿™ä¸€å¥—æŠ€æœ¯ä¸º<strong>springå…¨å®¶æ¡¶</strong>ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220617222609699.png"></p><p>è€ŒSpringå®¶æ—æ——ä¸‹è¿™ä¹ˆå¤šçš„æŠ€æœ¯ï¼Œæœ€åŸºç¡€ã€æœ€æ ¸å¿ƒçš„æ˜¯ SpringFrameworkã€‚å…¶ä»–çš„springå®¶æ—çš„æŠ€æœ¯ï¼Œéƒ½æ˜¯åŸºäºSpringFrameworkçš„ï¼ŒSpringFrameworkä¸­æä¾›å¾ˆå¤šå®ç”¨åŠŸèƒ½ï¼Œå¦‚ï¼šä¾èµ–æ³¨å…¥ã€äº‹åŠ¡ç®¡ç†ã€webå¼€å‘æ”¯æŒã€æ•°æ®è®¿é—®ã€æ¶ˆæ¯æœåŠ¡ç­‰ç­‰ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220617224427947.png"></p><p>è€Œå¦‚æœæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ï¼Œç›´æ¥åŸºäºSpringFrameworkè¿›è¡Œå¼€å‘ï¼Œå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼šé…ç½®ç¹çã€å…¥é—¨éš¾åº¦å¤§ã€‚ </p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220823185227296.png"></p><p>æ‰€ä»¥åŸºäºæ­¤å‘¢ï¼Œspringå®˜æ–¹æ¨èæˆ‘ä»¬ä»å¦å¤–ä¸€ä¸ªé¡¹ç›®å¼€å§‹å­¦ä¹ ï¼Œé‚£å°±æ˜¯ç›®å‰æœ€ç«çˆ†çš„SpringBootã€‚ </p><p>é€šè¿‡springbootå°±å¯ä»¥å¿«é€Ÿçš„å¸®æˆ‘ä»¬æ„å»ºåº”ç”¨ç¨‹åºï¼Œæ‰€ä»¥springbootå‘¢ï¼Œæœ€å¤§çš„ç‰¹ç‚¹æœ‰ä¸¤ä¸ª ï¼š</p><ul><li>ç®€åŒ–é…ç½®</li><li>å¿«é€Ÿå¼€å‘</li></ul><p><strong>Spring Boot å¯ä»¥å¸®åŠ©æˆ‘ä»¬éå¸¸å¿«é€Ÿçš„æ„å»ºåº”ç”¨ç¨‹åºã€ç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡ ã€‚</strong></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ç›´æ¥é€šè¿‡ä¸€ä¸ªSpringBootçš„webå…¥é—¨ç¨‹åºï¼Œè®©å¤§å®¶å¿«é€Ÿæ„Ÿå—ä¸€ä¸‹ï¼ŒåŸºäºSpringBootè¿›è¡ŒWebå¼€å‘çš„ä¾¿æ·æ€§ã€‚</p><h2 id="1-SpringBootWebå¿«é€Ÿå…¥é—¨"><a href="#1-SpringBootWebå¿«é€Ÿå…¥é—¨" class="headerlink" title="1. SpringBootWebå¿«é€Ÿå…¥é—¨"></a>1. SpringBootWebå¿«é€Ÿå…¥é—¨</h2><h3 id="1-1-éœ€æ±‚"><a href="#1-1-éœ€æ±‚" class="headerlink" title="1.1 éœ€æ±‚"></a>1.1 éœ€æ±‚</h3><p>éœ€æ±‚ï¼šåŸºäºSpringBootçš„æ–¹å¼å¼€å‘ä¸€ä¸ªwebåº”ç”¨ï¼Œæµè§ˆå™¨å‘èµ·è¯·æ±‚/helloåï¼Œç»™æµè§ˆå™¨è¿”å›å­—ç¬¦ä¸² â€œHello World ~â€ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220823191003444.png"></p><h3 id="1-2-å¼€å‘æ­¥éª¤"><a href="#1-2-å¼€å‘æ­¥éª¤" class="headerlink" title="1.2 å¼€å‘æ­¥éª¤"></a>1.2 å¼€å‘æ­¥éª¤</h3><p>ç¬¬1æ­¥ï¼šåˆ›å»ºSpringBootå·¥ç¨‹é¡¹ç›®</p><p>ç¬¬2æ­¥ï¼šå®šä¹‰HelloControllerç±»ï¼Œæ·»åŠ æ–¹æ³•helloï¼Œå¹¶æ·»åŠ æ³¨è§£</p><p>ç¬¬3æ­¥ï¼šæµ‹è¯•è¿è¡Œ</p><h4 id="1-2-1-åˆ›å»ºSpringBootå·¥ç¨‹ï¼ˆéœ€è¦è”ç½‘ï¼‰"><a href="#1-2-1-åˆ›å»ºSpringBootå·¥ç¨‹ï¼ˆéœ€è¦è”ç½‘ï¼‰" class="headerlink" title="1.2.1 åˆ›å»ºSpringBootå·¥ç¨‹ï¼ˆéœ€è¦è”ç½‘ï¼‰"></a>1.2.1 åˆ›å»ºSpringBootå·¥ç¨‹ï¼ˆéœ€è¦è”ç½‘ï¼‰</h4><p>åŸºäºSpringå®˜æ–¹éª¨æ¶ï¼Œåˆ›å»ºSpringBootå·¥ç¨‹ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201184702136.png" alt="image-20221201184702136" style="zoom:80%;"><p>åŸºæœ¬ä¿¡æ¯æè¿°å®Œæ¯•ä¹‹åï¼Œå‹¾é€‰webå¼€å‘ç›¸å…³ä¾èµ–ã€‚</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201184850248.png" alt="image-20221201184850248" style="zoom:80%;"><p>ç‚¹å‡»Finishä¹‹åï¼Œå°±ä¼šè”ç½‘åˆ›å»ºè¿™ä¸ªSpringBootå·¥ç¨‹ï¼Œåˆ›å»ºå¥½ä¹‹åï¼Œç»“æ„å¦‚ä¸‹ï¼š</p><ul><li>==æ³¨æ„ï¼šåœ¨è”ç½‘åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œä¼šä¸‹è½½ç›¸å…³èµ„æº(è¯·è€å¿ƒç­‰å¾…)==</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201185910596.png"> </p><h4 id="1-2-2-å®šä¹‰è¯·æ±‚å¤„ç†ç±»"><a href="#1-2-2-å®šä¹‰è¯·æ±‚å¤„ç†ç±»" class="headerlink" title="1.2.2 å®šä¹‰è¯·æ±‚å¤„ç†ç±»"></a>1.2.2 å®šä¹‰è¯·æ±‚å¤„ç†ç±»</h4><p>åœ¨com.itheimaè¿™ä¸ªåŒ…ä¸‹åˆ›å»ºä¸€ä¸ªå­åŒ…controller</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201190541295.png" alt="image-20221201190541295" style="zoom:80%;"><p>ç„¶ååœ¨controlleråŒ…ä¸‹æ–°å»ºä¸€ä¸ªç±»ï¼šHelloController</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201190825439.png" alt="image-20221201190825439" style="zoom:80%;"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello World ~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"Hello World ~"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="SpringBooté¡¹ç›®-æ‰‹åŠ¨æ„å»º"><a href="#SpringBooté¡¹ç›®-æ‰‹åŠ¨æ„å»º" class="headerlink" title="SpringBooté¡¹ç›®-æ‰‹åŠ¨æ„å»º"></a>SpringBooté¡¹ç›®-æ‰‹åŠ¨æ„å»º</h5><h6 id="1-åˆ›å»ºmavené¡¹ç›®"><a href="#1-åˆ›å»ºmavené¡¹ç›®" class="headerlink" title="1. åˆ›å»ºmavené¡¹ç›®"></a>1. åˆ›å»ºmavené¡¹ç›®</h6><p>åœ¨ideaä¸­åˆ›å»ºä¸€ä¸ªmavené¡¹ç›®ï¼Œæ­£å¸¸å¡«å†™é¡¹ç›®çš„åæ ‡ä¿¡æ¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221017094402319.png"> </p><p>è¾“å…¥é¡¹ç›®çš„åŸºæœ¬ä¿¡æ¯ä¹‹åï¼Œç‚¹å‡»finishï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªmavené¡¹ç›®ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221017094510482.png"> </p><p>ä½†æ˜¯è¿™ä¸ªmavené¡¹ç›®ç›®å‰å¹¶ä¸æ˜¯springbooté¡¹ç›®ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšå¦‚ä¸‹ä¸¤æ­¥æ“ä½œã€‚</p><h6 id="2-pom-xmlé…ç½®"><a href="#2-pom-xmlé…ç½®" class="headerlink" title="2. pom.xmlé…ç½®"></a>2. pom.xmlé…ç½®</h6><p>1). åœ¨pom.xmlä¸­æŒ‡å®šspringbootçš„çˆ¶å·¥ç¨‹</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- springbootçˆ¶å·¥ç¨‹--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2). æ·»åŠ springbooté¡¹ç›®çš„èµ·æ­¥ä¾èµ–ä»¥åŠmavenæ’ä»¶</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h6 id="3-åŸºæœ¬ç»“æ„"><a href="#3-åŸºæœ¬ç»“æ„" class="headerlink" title="3. åŸºæœ¬ç»“æ„"></a>3. åŸºæœ¬ç»“æ„</h6><p>1). åˆ›å»ºåŸºæœ¬çš„åŒ…ç»“æ„ com.itheimaï¼Œå¹¶åˆ›å»ºå¯åŠ¨ç±» SpringBootDemoApplication</p><p>2). å¹¶åœ¨resourcesç›®å½•ä¸‹å‡†å¤‡ä¸€ä»½é…ç½®æ–‡ä»¶ï¼Œapplication.properties (åˆ›å»ºä¸€ä¸ªæ–°çš„fileæ–‡ä»¶ï¼Œå‘½åä¸ºapplication.properties)</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221017095239911.png"> </p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- springbootçˆ¶å·¥ç¨‹--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springboot-web-quickstart<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>springboot-web-quickstart<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Demo project for Spring Boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="1-2-3-è¿è¡Œæµ‹è¯•"><a href="#1-2-3-è¿è¡Œæµ‹è¯•" class="headerlink" title="1.2.3 è¿è¡Œæµ‹è¯•"></a>1.2.3 è¿è¡Œæµ‹è¯•</h4><p>è¿è¡ŒSpringBootè‡ªåŠ¨ç”Ÿæˆçš„å¼•å¯¼ç±»</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201191028124.png"> </p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201191348924.png"> </p><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ <code>http://localhost:8080/hello</code></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220823195048415.png" style="zoom:80%;"><h3 id="1-3-Webåˆ†æ"><a href="#1-3-Webåˆ†æ" class="headerlink" title="1.3 Webåˆ†æ"></a>1.3 Webåˆ†æ</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201224603497.png"></p><p>æµè§ˆå™¨ï¼š</p><ul><li><p>è¾“å…¥ç½‘å€ï¼š<code>http://192.168.100.11:8080/hello</code></p><ul><li><p>é€šè¿‡IPåœ°å€192.168.100.11å®šä½åˆ°ç½‘ç»œä¸Šçš„ä¸€å°è®¡ç®—æœº</p><blockquote><p>æˆ‘ä»¬ä¹‹å‰åœ¨æµè§ˆå™¨ä¸­è¾“å…¥çš„localhostï¼Œå°±æ˜¯127.0.0.1ï¼ˆæœ¬æœºï¼‰</p></blockquote></li><li><p>é€šè¿‡ç«¯å£å·8080æ‰¾åˆ°è®¡ç®—æœºä¸Šè¿è¡Œçš„ç¨‹åº</p><blockquote><p><code>localhost:8080</code>  , æ„æ€æ˜¯åœ¨æœ¬åœ°è®¡ç®—æœºä¸­æ‰¾åˆ°æ­£åœ¨è¿è¡Œçš„8080ç«¯å£çš„ç¨‹åº</p></blockquote></li><li><p>/helloæ˜¯è¯·æ±‚èµ„æºä½ç½®</p><ul><li>èµ„æºï¼šå¯¹è®¡ç®—æœºè€Œè¨€èµ„æºå°±æ˜¯æ•°æ®<ul><li>webèµ„æºï¼šé€šè¿‡ç½‘ç»œå¯ä»¥è®¿é—®åˆ°çš„èµ„æºï¼ˆé€šå¸¸æ˜¯æŒ‡å­˜æ”¾åœ¨æœåŠ¡å™¨ä¸Šçš„æ•°æ®ï¼‰</li></ul></li></ul><blockquote><p><code>localhost:8080/hello</code> ï¼Œæ„æ€æ˜¯å‘æœ¬åœ°è®¡ç®—æœºä¸­çš„8080ç«¯å£ç¨‹åºï¼Œè·å–èµ„æºä½ç½®æ˜¯/helloçš„æ•°æ®</p><ul><li>8080ç«¯å£ç¨‹åºï¼Œåœ¨æœåŠ¡å™¨æ‰¾/helloä½ç½®çš„èµ„æºæ•°æ®ï¼Œå‘ç»™æµè§ˆå™¨</li></ul></blockquote></li></ul></li></ul><p>æœåŠ¡å™¨ï¼šï¼ˆå¯ä»¥ç†è§£ä¸ºServerSocketï¼‰</p><ul><li>æ¥æ”¶åˆ°æµè§ˆå™¨å‘é€çš„ä¿¡æ¯ï¼ˆå¦‚ï¼š/helloï¼‰</li><li>åœ¨æœåŠ¡å™¨ä¸Šæ‰¾åˆ°/helloçš„èµ„æº</li><li>æŠŠèµ„æºå‘é€ç»™æµè§ˆå™¨</li></ul><blockquote><p>æˆ‘ä»¬åœ¨JavaSEé˜¶æ®µå­¦ä¹ ç½‘ç»œç¼–ç¨‹æ—¶ï¼Œæœ‰è®²è¿‡ç½‘ç»œä¸‰è¦ç´ ï¼š</p><ul><li>IP  ï¼šç½‘ç»œä¸­è®¡ç®—æœºçš„å”¯ä¸€æ ‡è¯†</li><li>ç«¯å£ ï¼šè®¡ç®—æœºä¸­è¿è¡Œç¨‹åºçš„å”¯ä¸€æ ‡è¯†</li><li>åè®® ï¼šç½‘ç»œä¸­è®¡ç®—æœºä¹‹é—´äº¤äº’çš„è§„åˆ™</li></ul><p><strong>é—®é¢˜ï¼šæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¸¤ç«¯è¿›è¡Œæ•°æ®äº¤äº’ï¼Œä½¿ç”¨ä»€ä¹ˆåè®®ï¼Ÿ</strong></p><p><strong>ç­”æ¡ˆï¼šhttpåè®®</strong></p></blockquote><h2 id="2-HTTPåè®®"><a href="#2-HTTPåè®®" class="headerlink" title="2. HTTPåè®®"></a>2. HTTPåè®®</h2><h3 id="2-1-HTTP-æ¦‚è¿°"><a href="#2-1-HTTP-æ¦‚è¿°" class="headerlink" title="2.1 HTTP-æ¦‚è¿°"></a>2.1 HTTP-æ¦‚è¿°</h3><h4 id="2-1-1-ä»‹ç»"><a href="#2-1-1-ä»‹ç»" class="headerlink" title="2.1.1 ä»‹ç»"></a>2.1.1 ä»‹ç»</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220823200024507.png"></p><p>HTTPï¼šHyper Text Transfer Protocol(è¶…æ–‡æœ¬ä¼ è¾“åè®®)ï¼Œè§„å®šäº†æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´æ•°æ®ä¼ è¾“çš„è§„åˆ™ã€‚</p><ul><li>httpæ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œåè®® </li><li>httpåè®®è¦æ±‚ï¼šæµè§ˆå™¨åœ¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ•°æ®æ—¶ï¼Œæˆ–æ˜¯æœåŠ¡å™¨åœ¨å‘æµè§ˆå™¨å‘é€å“åº”æ•°æ®æ—¶ï¼Œéƒ½å¿…é¡»æŒ‰ç…§å›ºå®šçš„æ ¼å¼è¿›è¡Œæ•°æ®ä¼ è¾“</li></ul><p>å¦‚æœæƒ³çŸ¥é“httpåè®®çš„æ•°æ®ä¼ è¾“æ ¼å¼æœ‰å“ªäº›ï¼Œå¯ä»¥æ‰“å¼€æµè§ˆå™¨ï¼Œç‚¹å‡»<code>F12</code>æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œç‚¹å‡»<code>Network</code>æ¥æŸ¥çœ‹</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202105735230.png"></p><p>æµè§ˆå™¨å‘æœåŠ¡å™¨è¿›è¡Œè¯·æ±‚æ—¶ï¼š</p><ul><li>æœåŠ¡å™¨æŒ‰ç…§å›ºå®šçš„æ ¼å¼è¿›è¡Œè§£æ</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202111044434.png"></p><p>æœåŠ¡å™¨å‘æµè§ˆå™¨è¿›è¡Œå“åº”æ—¶ï¼š</p><ul><li>æµè§ˆå™¨æŒ‰ç…§å›ºå®šçš„æ ¼å¼è¿›è¡Œè§£æ</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202111307819.png"></p><p><strong>æ‰€ä»¥ï¼Œæˆ‘ä»¬å­¦ä¹ HTTPä¸»è¦å°±æ˜¯å­¦ä¹ è¯·æ±‚å’Œå“åº”æ•°æ®çš„å…·ä½“æ ¼å¼å†…å®¹ã€‚</strong></p><h4 id="2-2-2-ç‰¹ç‚¹"><a href="#2-2-2-ç‰¹ç‚¹" class="headerlink" title="2.2.2 ç‰¹ç‚¹"></a>2.2.2 ç‰¹ç‚¹</h4><p>æˆ‘ä»¬åˆšæ‰åˆæ­¥è®¤è¯†äº†HTTPåè®®ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨çœ‹çœ‹HTTPåè®®æœ‰å“ªäº›ç‰¹ç‚¹ï¼š</p><ul><li><p>**åŸºäºTCPåè®®: **   é¢å‘è¿æ¥ï¼Œå®‰å…¨</p><blockquote><p>TCPæ˜¯ä¸€ç§é¢å‘è¿æ¥çš„(å»ºç«‹è¿æ¥ä¹‹å‰æ˜¯éœ€è¦ç»è¿‡ä¸‰æ¬¡æ¡æ‰‹)ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ï¼Œåœ¨æ•°æ®ä¼ è¾“æ–¹é¢æ›´å®‰å…¨</p></blockquote></li><li><p><strong>åŸºäºè¯·æ±‚-å“åº”æ¨¡å‹:</strong>   ä¸€æ¬¡è¯·æ±‚å¯¹åº”ä¸€æ¬¡å“åº”ï¼ˆå…ˆè¯·æ±‚åå“åº”ï¼‰</p><blockquote><p>è¯·æ±‚å’Œå“åº”æ˜¯ä¸€ä¸€å¯¹åº”å…³ç³»ï¼Œæ²¡æœ‰è¯·æ±‚ï¼Œå°±æ²¡æœ‰å“åº”</p></blockquote></li><li><p><strong>HTTPåè®®æ˜¯æ— çŠ¶æ€åè®®:</strong>  å¯¹äºæ•°æ®æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚æ¯æ¬¡è¯·æ±‚-å“åº”éƒ½æ˜¯ç‹¬ç«‹çš„</p><blockquote><p>æ— çŠ¶æ€æŒ‡çš„æ˜¯å®¢æˆ·ç«¯å‘é€HTTPè¯·æ±‚ç»™æœåŠ¡ç«¯ä¹‹åï¼ŒæœåŠ¡ç«¯æ ¹æ®è¯·æ±‚å“åº”æ•°æ®ï¼Œå“åº”å®Œåï¼Œä¸ä¼šè®°å½•ä»»ä½•ä¿¡æ¯ã€‚</p><ul><li>ç¼ºç‚¹:  å¤šæ¬¡è¯·æ±‚é—´ä¸èƒ½å…±äº«æ•°æ®</li><li>ä¼˜ç‚¹:  é€Ÿåº¦å¿«</li></ul><p>è¯·æ±‚ä¹‹é—´æ— æ³•å…±äº«æ•°æ®ä¼šå¼•å‘çš„é—®é¢˜ï¼š</p><ul><li>å¦‚ï¼šäº¬ä¸œè´­ç‰©ã€‚åŠ å…¥è´­ç‰©è½¦å’Œå»è´­ç‰©è½¦ç»“ç®—æ˜¯ä¸¤æ¬¡è¯·æ±‚</li><li>ç”±äºHTTPåè®®çš„æ— çŠ¶æ€ç‰¹æ€§ï¼ŒåŠ å…¥è´­ç‰©è½¦è¯·æ±‚å“åº”ç»“æŸåï¼Œå¹¶æœªè®°å½•åŠ å…¥è´­ç‰©è½¦æ˜¯ä½•å•†å“</li><li>å‘èµ·å»è´­ç‰©è½¦ç»“ç®—çš„è¯·æ±‚åï¼Œå› ä¸ºæ— æ³•è·å–å“ªäº›å•†å“åŠ å…¥äº†è´­ç‰©è½¦ï¼Œä¼šå¯¼è‡´æ­¤æ¬¡è¯·æ±‚æ— æ³•æ­£ç¡®å±•ç¤ºæ•°æ®</li></ul><p>å…·ä½“ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘ç°äº¬ä¸œæ˜¯å¯ä»¥æ­£å¸¸å±•ç¤ºæ•°æ®çš„ï¼ŒåŸå› æ˜¯Javaæ—©å·²è€ƒè™‘åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå¹¶æå‡ºäº†ä½¿ç”¨ä¼šè¯æŠ€æœ¯(Cookieã€Session)æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å…·ä½“å¦‚ä½•æ¥åšï¼Œæˆ‘ä»¬åé¢è¯¾ç¨‹ä¸­ä¼šè®²åˆ°ã€‚</p></blockquote><p>åˆšæ‰æåˆ°HTTPåè®®æ˜¯è§„å®šäº†è¯·æ±‚å’Œå“åº”æ•°æ®çš„æ ¼å¼ï¼Œé‚£å…·ä½“çš„æ ¼å¼æ˜¯ä»€ä¹ˆå‘¢?</p></li></ul><h3 id="2-2-HTTP-è¯·æ±‚åè®®"><a href="#2-2-HTTP-è¯·æ±‚åè®®" class="headerlink" title="2.2 HTTP-è¯·æ±‚åè®®"></a>2.2 HTTP-è¯·æ±‚åè®®</h3><p>æµè§ˆå™¨å’ŒæœåŠ¡å™¨æ˜¯æŒ‰ç…§HTTPåè®®è¿›è¡Œæ•°æ®é€šä¿¡çš„ã€‚</p><p>HTTPåè®®åˆåˆ†ä¸ºï¼šè¯·æ±‚åè®®å’Œå“åº”åè®®</p><ul><li>è¯·æ±‚åè®®ï¼šæµè§ˆå™¨å°†æ•°æ®ä»¥è¯·æ±‚æ ¼å¼å‘é€åˆ°æœåŠ¡å™¨<ul><li>åŒ…æ‹¬ï¼š<strong>è¯·æ±‚è¡Œ</strong>ã€<strong>è¯·æ±‚å¤´</strong> ã€<strong>è¯·æ±‚ä½“</strong></li></ul></li><li>å“åº”åè®®ï¼šæœåŠ¡å™¨å°†æ•°æ®ä»¥å“åº”æ ¼å¼è¿”å›ç»™æµè§ˆå™¨<ul><li>åŒ…æ‹¬ï¼š<strong>å“åº”è¡Œ</strong> ã€<strong>å“åº”å¤´</strong> ã€<strong>å“åº”ä½“</strong></li></ul></li></ul><p>åœ¨HTTP1.1ç‰ˆæœ¬ä¸­ï¼Œæµè§ˆå™¨è®¿é—®æœåŠ¡å™¨çš„å‡ ç§æ–¹å¼ï¼š </p><table><thead><tr><th align="center">è¯·æ±‚æ–¹å¼</th><th align="left">è¯·æ±‚è¯´æ˜</th></tr></thead><tbody><tr><td align="center"><strong>GET</strong></td><td align="left">è·å–èµ„æºã€‚<br>å‘ç‰¹å®šçš„èµ„æºå‘å‡ºè¯·æ±‚ã€‚ä¾‹ï¼š<a href="http://www.baidu.com/s?wd=itheima">http://www.baidu.com/s?wd=itheima</a></td></tr><tr><td align="center"><strong>POST</strong></td><td align="left">ä¼ è¾“å®ä½“ä¸»ä½“ã€‚<br>å‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼ˆä¾‹ï¼šä¸Šä¼ æ–‡ä»¶ï¼‰ï¼Œæ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚</td></tr><tr><td align="center">OPTIONS</td><td align="left">è¿”å›æœåŠ¡å™¨é’ˆå¯¹ç‰¹å®šèµ„æºæ‰€æ”¯æŒçš„HTTPè¯·æ±‚æ–¹å¼ã€‚<br>å› ä¸ºå¹¶ä¸æ˜¯æ‰€æœ‰çš„æœåŠ¡å™¨éƒ½æ”¯æŒè§„å®šçš„æ–¹æ³•ï¼Œä¸ºäº†å®‰å…¨æœ‰äº›æœåŠ¡å™¨å¯èƒ½ä¼šç¦æ­¢æ‰ä¸€äº›æ–¹æ³•ï¼Œä¾‹å¦‚ï¼šDELETEã€PUTç­‰ã€‚é‚£ä¹ˆOPTIONSå°±æ˜¯ç”¨æ¥è¯¢é—®æœåŠ¡å™¨æ”¯æŒçš„æ–¹æ³•ã€‚</td></tr><tr><td align="center">HEAD</td><td align="left">è·å¾—æŠ¥æ–‡é¦–éƒ¨ã€‚<br>HEADæ–¹æ³•ç±»ä¼¼GETæ–¹æ³•ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯HEADæ–¹æ³•ä¸è¦æ±‚è¿”å›æ•°æ®ã€‚é€šå¸¸ç”¨äºç¡®è®¤URIçš„æœ‰æ•ˆæ€§åŠèµ„æºæ›´æ–°æ—¶é—´ç­‰ã€‚</td></tr><tr><td align="center">PUT</td><td align="left">ä¼ è¾“æ–‡ä»¶ã€‚<br>PUTæ–¹æ³•ç”¨æ¥ä¼ è¾“æ–‡ä»¶ã€‚ç±»ä¼¼FTPåè®®ï¼Œæ–‡ä»¶å†…å®¹åŒ…å«åœ¨è¯·æ±‚æŠ¥æ–‡çš„å®ä½“ä¸­ï¼Œç„¶åè¯·æ±‚ä¿å­˜åˆ°URLæŒ‡å®šçš„æœåŠ¡å™¨ä½ç½®ã€‚</td></tr><tr><td align="center">DELETE</td><td align="left">åˆ é™¤æ–‡ä»¶ã€‚<br>è¯·æ±‚æœåŠ¡å™¨åˆ é™¤Request-URIæ‰€æ ‡è¯†çš„èµ„æº</td></tr><tr><td align="center">TRACE</td><td align="left">è¿½è¸ªè·¯å¾„ã€‚<br>å›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­</td></tr><tr><td align="center">CONNECT</td><td align="left">è¦æ±‚ç”¨éš§é“åè®®è¿æ¥ä»£ç†ã€‚<br>HTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨</td></tr></tbody></table><p>åœ¨æˆ‘ä»¬å®é™…åº”ç”¨ä¸­å¸¸ç”¨çš„ä¹Ÿå°±æ˜¯ ï¼š<strong>GETã€POST</strong></p><p><strong>GETæ–¹å¼çš„è¯·æ±‚åè®®ï¼š</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220823200708026.png"> </p><ul><li><p>è¯·æ±‚è¡Œ ï¼šHTTPè¯·æ±‚ä¸­çš„ç¬¬ä¸€è¡Œæ•°æ®ã€‚ç”±ï¼š<code>è¯·æ±‚æ–¹å¼</code>ã€<code>èµ„æºè·¯å¾„</code>ã€<code>åè®®/ç‰ˆæœ¬</code>ç»„æˆï¼ˆä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”ï¼‰</p><ul><li>è¯·æ±‚æ–¹å¼ï¼šGET  </li><li>èµ„æºè·¯å¾„ï¼š/brand/findAll?name=OPPO&amp;status=1<ul><li>è¯·æ±‚è·¯å¾„ï¼š/brand/findAll</li><li>è¯·æ±‚å‚æ•°ï¼šname=OPPO&amp;status=1<ul><li>è¯·æ±‚å‚æ•°æ˜¯ä»¥key=valueå½¢å¼å‡ºç°</li><li>å¤šä¸ªè¯·æ±‚å‚æ•°ä¹‹é—´ä½¿ç”¨<code>&amp;</code>è¿æ¥</li></ul></li><li>è¯·æ±‚è·¯å¾„å’Œè¯·æ±‚å‚æ•°ä¹‹é—´ä½¿ç”¨<code>?</code>è¿æ¥</li></ul><p>  </p></li><li>åè®®/ç‰ˆæœ¬ï¼šHTTP/1.1</li></ul></li><li><p>è¯·æ±‚å¤´ ï¼šç¬¬äºŒè¡Œå¼€å§‹ï¼Œä¸Šå›¾é»„è‰²éƒ¨åˆ†å†…å®¹å°±æ˜¯è¯·æ±‚å¤´ã€‚æ ¼å¼ä¸ºkey: valueå½¢å¼ </p><ul><li>httpæ˜¯ä¸ªæ— çŠ¶æ€çš„åè®®ï¼Œæ‰€ä»¥åœ¨è¯·æ±‚å¤´è®¾ç½®æµè§ˆå™¨çš„ä¸€äº›è‡ªèº«ä¿¡æ¯å’Œæƒ³è¦å“åº”çš„å½¢å¼ã€‚è¿™æ ·æœåŠ¡å™¨åœ¨æ”¶åˆ°ä¿¡æ¯åï¼Œå°±å¯ä»¥çŸ¥é“æ˜¯è°ï¼Œæƒ³å¹²ä»€ä¹ˆäº†</li></ul><p>å¸¸è§çš„HTTPè¯·æ±‚å¤´æœ‰:</p><pre class="line-numbers language-none"><code class="language-none">Host: è¡¨ç¤ºè¯·æ±‚çš„ä¸»æœºåUser-Agent: æµè§ˆå™¨ç‰ˆæœ¬ã€‚ ä¾‹å¦‚ï¼šChromeæµè§ˆå™¨çš„æ ‡è¯†ç±»ä¼¼Mozilla/5.0 ...Chrome/79 ï¼ŒIEæµè§ˆå™¨çš„æ ‡è¯†ç±»ä¼¼Mozilla/5.0 (Windows NT ...)like GeckoAcceptï¼šè¡¨ç¤ºæµè§ˆå™¨èƒ½æ¥æ”¶çš„èµ„æºç±»å‹ï¼Œå¦‚text/*ï¼Œimage/*æˆ–è€…*/*è¡¨ç¤ºæ‰€æœ‰ï¼›Accept-Languageï¼šè¡¨ç¤ºæµè§ˆå™¨åå¥½çš„è¯­è¨€ï¼ŒæœåŠ¡å™¨å¯ä»¥æ®æ­¤è¿”å›ä¸åŒè¯­è¨€çš„ç½‘é¡µï¼›Accept-Encodingï¼šè¡¨ç¤ºæµè§ˆå™¨å¯ä»¥æ”¯æŒçš„å‹ç¼©ç±»å‹ï¼Œä¾‹å¦‚gzip, deflateç­‰ã€‚Content-Typeï¼šè¯·æ±‚ä¸»ä½“çš„æ•°æ®ç±»å‹Content-Lengthï¼šæ•°æ®ä¸»ä½“çš„å¤§å°ï¼ˆå•ä½ï¼šå­—èŠ‚ï¼‰<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><blockquote><p>ä¸¾ä¾‹è¯´æ˜ï¼šæœåŠ¡ç«¯å¯ä»¥æ ¹æ®è¯·æ±‚å¤´ä¸­çš„å†…å®¹æ¥è·å–å®¢æˆ·ç«¯çš„ç›¸å…³ä¿¡æ¯ï¼Œæœ‰äº†è¿™äº›ä¿¡æ¯æœåŠ¡ç«¯å°±å¯ä»¥å¤„ç†ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚ã€‚</p><p>æ¯”å¦‚:</p><ul><li>ä¸åŒæµè§ˆå™¨è§£æHTMLå’ŒCSSæ ‡ç­¾çš„ç»“æœä¼šæœ‰ä¸ä¸€è‡´ï¼Œæ‰€ä»¥å°±ä¼šå¯¼è‡´ç›¸åŒçš„ä»£ç åœ¨ä¸åŒçš„æµè§ˆå™¨ä¼šå‡ºç°ä¸åŒçš„æ•ˆæœ</li><li>æœåŠ¡ç«¯æ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚å¤´ä¸­çš„æ•°æ®è·å–åˆ°å®¢æˆ·ç«¯çš„æµè§ˆå™¨ç±»å‹ï¼Œå°±å¯ä»¥æ ¹æ®ä¸åŒçš„æµè§ˆå™¨è®¾ç½®ä¸åŒçš„ä»£ç æ¥è¾¾åˆ°ä¸€è‡´çš„æ•ˆæœï¼ˆè¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼‰</li></ul></blockquote><ul><li>è¯·æ±‚ä½“ ï¼šå­˜å‚¨è¯·æ±‚å‚æ•°<ul><li>GETè¯·æ±‚çš„è¯·æ±‚å‚æ•°åœ¨è¯·æ±‚è¡Œä¸­ï¼Œæ•…ä¸éœ€è¦è®¾ç½®è¯·æ±‚ä½“</li></ul></li></ul><p><strong>POSTæ–¹å¼çš„è¯·æ±‚åè®®ï¼š</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220823201303601.png"></p><ul><li>è¯·æ±‚è¡Œ(ä»¥ä¸Šå›¾ä¸­çº¢è‰²éƒ¨åˆ†)ï¼šåŒ…å«è¯·æ±‚æ–¹å¼ã€èµ„æºè·¯å¾„ã€åè®®/ç‰ˆæœ¬<ul><li>è¯·æ±‚æ–¹å¼ï¼šPOST</li><li>èµ„æºè·¯å¾„ï¼š/brand</li><li>åè®®/ç‰ˆæœ¬ï¼šHTTP/1.1</li></ul></li><li>è¯·æ±‚å¤´(ä»¥ä¸Šå›¾ä¸­é»„è‰²éƒ¨åˆ†)   </li><li>è¯·æ±‚ä½“(ä»¥ä¸Šå›¾ä¸­ç»¿è‰²éƒ¨åˆ†) ï¼šå­˜å‚¨è¯·æ±‚å‚æ•° <ul><li>è¯·æ±‚ä½“å’Œè¯·æ±‚å¤´ä¹‹é—´æ˜¯æœ‰ä¸€ä¸ªç©ºè¡Œéš”å¼€ï¼ˆä½œç”¨ï¼šç”¨äºæ ‡è®°è¯·æ±‚å¤´ç»“æŸï¼‰</li></ul></li></ul><p>GETè¯·æ±‚å’ŒPOSTè¯·æ±‚çš„åŒºåˆ«ï¼š</p><table><thead><tr><th>åŒºåˆ«æ–¹å¼</th><th>GETè¯·æ±‚</th><th>POSTè¯·æ±‚</th></tr></thead><tbody><tr><td>è¯·æ±‚å‚æ•°</td><td>è¯·æ±‚å‚æ•°åœ¨è¯·æ±‚è¡Œä¸­ã€‚<br>ä¾‹ï¼š/brand/findAll?name=OPPO&amp;status=1</td><td>è¯·æ±‚å‚æ•°åœ¨è¯·æ±‚ä½“ä¸­</td></tr><tr><td>è¯·æ±‚å‚æ•°é•¿åº¦</td><td>è¯·æ±‚å‚æ•°é•¿åº¦æœ‰é™åˆ¶(æµè§ˆå™¨ä¸åŒé™åˆ¶ä¹Ÿä¸åŒ)</td><td>è¯·æ±‚å‚æ•°é•¿åº¦æ²¡æœ‰é™åˆ¶</td></tr><tr><td>å®‰å…¨æ€§</td><td>å®‰å…¨æ€§ä½ã€‚åŸå› ï¼šè¯·æ±‚å‚æ•°æš´éœ²åœ¨æµè§ˆå™¨åœ°å€æ ä¸­ã€‚</td><td>å®‰å…¨æ€§ç›¸å¯¹é«˜</td></tr></tbody></table><h3 id="2-3-HTTP-å“åº”åè®®"><a href="#2-3-HTTP-å“åº”åè®®" class="headerlink" title="2.3 HTTP-å“åº”åè®®"></a>2.3 HTTP-å“åº”åè®®</h3><h4 id="2-3-1-æ ¼å¼ä»‹ç»"><a href="#2-3-1-æ ¼å¼ä»‹ç»" class="headerlink" title="2.3.1 æ ¼å¼ä»‹ç»"></a>2.3.1 æ ¼å¼ä»‹ç»</h4><p>ä¸HTTPçš„è¯·æ±‚ä¸€æ ·ï¼ŒHTTPå“åº”çš„æ•°æ®ä¹Ÿåˆ†ä¸º3éƒ¨åˆ†ï¼š<strong>å“åº”è¡Œ</strong>ã€<strong>å“åº”å¤´</strong> ã€<strong>å“åº”ä½“</strong> </p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220823202344149.png"> </p><ul><li><p>å“åº”è¡Œ(ä»¥ä¸Šå›¾ä¸­çº¢è‰²éƒ¨åˆ†)ï¼šå“åº”æ•°æ®çš„ç¬¬ä¸€è¡Œã€‚å“åº”è¡Œç”±<code>åè®®åŠç‰ˆæœ¬</code>ã€<code>å“åº”çŠ¶æ€ç </code>ã€<code>çŠ¶æ€ç æè¿°</code>ç»„æˆ</p><ul><li>åè®®/ç‰ˆæœ¬ï¼šHTTP/1.1</li><li>å“åº”çŠ¶æ€ç ï¼š200</li><li>çŠ¶æ€ç æè¿°ï¼šOK</li></ul></li><li><p>å“åº”å¤´(ä»¥ä¸Šå›¾ä¸­é»„è‰²éƒ¨åˆ†)ï¼šå“åº”æ•°æ®çš„ç¬¬äºŒè¡Œå¼€å§‹ã€‚æ ¼å¼ä¸ºkeyï¼švalueå½¢å¼</p><ul><li>httpæ˜¯ä¸ªæ— çŠ¶æ€çš„åè®®ï¼Œæ‰€ä»¥å¯ä»¥åœ¨è¯·æ±‚å¤´å’Œå“åº”å¤´ä¸­è®¾ç½®ä¸€äº›ä¿¡æ¯å’Œæƒ³è¦æ‰§è¡Œçš„åŠ¨ä½œï¼Œè¿™æ ·ï¼Œå¯¹æ–¹åœ¨æ”¶åˆ°ä¿¡æ¯åï¼Œå°±å¯ä»¥çŸ¥é“ä½ æ˜¯è°ï¼Œä½ æƒ³å¹²ä»€ä¹ˆ</li></ul><p>å¸¸è§çš„HTTPå“åº”å¤´æœ‰:</p><pre class="line-numbers language-none"><code class="language-none">Content-Typeï¼šè¡¨ç¤ºè¯¥å“åº”å†…å®¹çš„ç±»å‹ï¼Œä¾‹å¦‚text/htmlï¼Œimage/jpeg ï¼›Content-Lengthï¼šè¡¨ç¤ºè¯¥å“åº”å†…å®¹çš„é•¿åº¦ï¼ˆå­—èŠ‚æ•°ï¼‰ï¼›Content-Encodingï¼šè¡¨ç¤ºè¯¥å“åº”å‹ç¼©ç®—æ³•ï¼Œä¾‹å¦‚gzip ï¼›Cache-Controlï¼šæŒ‡ç¤ºå®¢æˆ·ç«¯åº”å¦‚ä½•ç¼“å­˜ï¼Œä¾‹å¦‚max-age=300è¡¨ç¤ºå¯ä»¥æœ€å¤šç¼“å­˜300ç§’ ;Set-Cookie: å‘Šè¯‰æµè§ˆå™¨ä¸ºå½“å‰é¡µé¢æ‰€åœ¨çš„åŸŸè®¾ç½®cookie ;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ul><li>å“åº”ä½“(ä»¥ä¸Šå›¾ä¸­ç»¿è‰²éƒ¨åˆ†)ï¼š å“åº”æ•°æ®çš„æœ€åä¸€éƒ¨åˆ†ã€‚å­˜å‚¨å“åº”çš„æ•°æ®<ul><li>å“åº”ä½“å’Œå“åº”å¤´ä¹‹é—´æœ‰ä¸€ä¸ªç©ºè¡Œéš”å¼€ï¼ˆä½œç”¨ï¼šç”¨äºæ ‡è®°å“åº”å¤´ç»“æŸï¼‰</li></ul></li></ul><h4 id="2-3-2-å“åº”çŠ¶æ€ç "><a href="#2-3-2-å“åº”çŠ¶æ€ç " class="headerlink" title="2.3.2 å“åº”çŠ¶æ€ç "></a>2.3.2 å“åº”çŠ¶æ€ç </h4><table><thead><tr><th>çŠ¶æ€ç åˆ†ç±»</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1xx</td><td><strong>å“åº”ä¸­</strong> â€” ä¸´æ—¶çŠ¶æ€ç ã€‚è¡¨ç¤ºè¯·æ±‚å·²ç»æ¥å—ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯åº”è¯¥ç»§ç»­è¯·æ±‚æˆ–è€…å¦‚æœå·²ç»å®Œæˆåˆ™å¿½ç•¥</td></tr><tr><td>2xx</td><td><strong>æˆåŠŸ</strong> â€” è¡¨ç¤ºè¯·æ±‚å·²ç»è¢«æˆåŠŸæ¥æ”¶ï¼Œå¤„ç†å·²å®Œæˆ</td></tr><tr><td>3xx</td><td><strong>é‡å®šå‘</strong> â€” é‡å®šå‘åˆ°å…¶å®ƒåœ°æ–¹ï¼Œè®©å®¢æˆ·ç«¯å†å‘èµ·ä¸€ä¸ªè¯·æ±‚ä»¥å®Œæˆæ•´ä¸ªå¤„ç†</td></tr><tr><td>4xx</td><td><strong>å®¢æˆ·ç«¯é”™è¯¯</strong> â€” å¤„ç†å‘ç”Ÿé”™è¯¯ï¼Œè´£ä»»åœ¨å®¢æˆ·ç«¯ï¼Œå¦‚ï¼šå®¢æˆ·ç«¯çš„è¯·æ±‚ä¸€ä¸ªä¸å­˜åœ¨çš„èµ„æºï¼Œå®¢æˆ·ç«¯æœªè¢«æˆæƒï¼Œç¦æ­¢è®¿é—®ç­‰</td></tr><tr><td>5xx</td><td><strong>æœåŠ¡å™¨ç«¯é”™è¯¯</strong> â€” å¤„ç†å‘ç”Ÿé”™è¯¯ï¼Œè´£ä»»åœ¨æœåŠ¡ç«¯ï¼Œå¦‚ï¼šæœåŠ¡ç«¯æŠ›å‡ºå¼‚å¸¸ï¼Œè·¯ç”±å‡ºé”™ï¼ŒHTTPç‰ˆæœ¬ä¸æ”¯æŒç­‰</td></tr></tbody></table><p>å‚è€ƒ: èµ„æ–™/SpringbootWeb/å“åº”çŠ¶æ€ç .md</p><p>å…³äºå“åº”çŠ¶æ€ç ï¼Œæˆ‘ä»¬å…ˆä¸»è¦è®¤è¯†ä¸‰ä¸ªçŠ¶æ€ç ï¼Œå…¶ä½™çš„ç­‰åæœŸç”¨åˆ°äº†å†å»æŒæ¡ï¼š</p><ul><li>200    ok   å®¢æˆ·ç«¯è¯·æ±‚æˆåŠŸ</li><li>404  Not Found  è¯·æ±‚èµ„æºä¸å­˜åœ¨</li><li>500  Internal Server Error  æœåŠ¡ç«¯å‘ç”Ÿä¸å¯é¢„æœŸçš„é”™è¯¯</li></ul><h4 id="2-3-3-å¸¸è§å“åº”ç "><a href="#2-3-3-å¸¸è§å“åº”ç " class="headerlink" title="2.3.3 å¸¸è§å“åº”ç "></a>2.3.3 å¸¸è§å“åº”ç </h4><h5 id="ä¸€ã€çŠ¶æ€ç å¤§ç±»"><a href="#ä¸€ã€çŠ¶æ€ç å¤§ç±»" class="headerlink" title="ä¸€ã€çŠ¶æ€ç å¤§ç±»"></a>ä¸€ã€çŠ¶æ€ç å¤§ç±»</h5><table><thead><tr><th>çŠ¶æ€ç åˆ†ç±»</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1xx</td><td><strong>å“åº”ä¸­</strong>â€”â€”ä¸´æ—¶çŠ¶æ€ç ï¼Œè¡¨ç¤ºè¯·æ±‚å·²ç»æ¥å—ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯åº”è¯¥ç»§ç»­è¯·æ±‚æˆ–è€…å¦‚æœå®ƒå·²ç»å®Œæˆåˆ™å¿½ç•¥å®ƒ</td></tr><tr><td>2xx</td><td><strong>æˆåŠŸ</strong>â€”â€”è¡¨ç¤ºè¯·æ±‚å·²ç»è¢«æˆåŠŸæ¥æ”¶ï¼Œå¤„ç†å·²å®Œæˆ</td></tr><tr><td>3xx</td><td><strong>é‡å®šå‘</strong>â€”â€”é‡å®šå‘åˆ°å…¶å®ƒåœ°æ–¹ï¼šå®ƒè®©å®¢æˆ·ç«¯å†å‘èµ·ä¸€ä¸ªè¯·æ±‚ä»¥å®Œæˆæ•´ä¸ªå¤„ç†ã€‚</td></tr><tr><td>4xx</td><td><strong>å®¢æˆ·ç«¯é”™è¯¯</strong>â€”â€”å¤„ç†å‘ç”Ÿé”™è¯¯ï¼Œè´£ä»»åœ¨å®¢æˆ·ç«¯ï¼Œå¦‚ï¼šå®¢æˆ·ç«¯çš„è¯·æ±‚ä¸€ä¸ªä¸å­˜åœ¨çš„èµ„æºï¼Œå®¢æˆ·ç«¯æœªè¢«æˆæƒï¼Œç¦æ­¢è®¿é—®ç­‰</td></tr><tr><td>5xx</td><td><strong>æœåŠ¡å™¨ç«¯é”™è¯¯</strong>â€”â€”å¤„ç†å‘ç”Ÿé”™è¯¯ï¼Œè´£ä»»åœ¨æœåŠ¡ç«¯ï¼Œå¦‚ï¼šæœåŠ¡ç«¯æŠ›å‡ºå¼‚å¸¸ï¼Œè·¯ç”±å‡ºé”™ï¼ŒHTTPç‰ˆæœ¬ä¸æ”¯æŒç­‰</td></tr></tbody></table><h5 id="äºŒã€å¸¸è§çš„å“åº”çŠ¶æ€ç "><a href="#äºŒã€å¸¸è§çš„å“åº”çŠ¶æ€ç " class="headerlink" title="äºŒã€å¸¸è§çš„å“åº”çŠ¶æ€ç "></a>äºŒã€å¸¸è§çš„å“åº”çŠ¶æ€ç </h5><table><thead><tr><th>çŠ¶æ€ç </th><th>è‹±æ–‡æè¿°</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>==200==</td><td><strong><code>OK</code></strong></td><td>å®¢æˆ·ç«¯è¯·æ±‚æˆåŠŸï¼Œå³<strong>å¤„ç†æˆåŠŸ</strong>ï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€æƒ³çœ‹åˆ°çš„çŠ¶æ€ç </td></tr><tr><td>302</td><td><strong><code>Found</code></strong></td><td>æŒ‡ç¤ºæ‰€è¯·æ±‚çš„èµ„æºå·²ç§»åŠ¨åˆ°ç”±<code>Location</code>å“åº”å¤´ç»™å®šçš„ URLï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨é‡æ–°è®¿é—®åˆ°è¿™ä¸ªé¡µé¢</td></tr><tr><td>304</td><td><strong><code>Not Modified</code></strong></td><td>å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œä½ è¯·æ±‚çš„èµ„æºè‡³ä¸Šæ¬¡å–å¾—åï¼ŒæœåŠ¡ç«¯å¹¶æœªæ›´æ”¹ï¼Œä½ ç›´æ¥ç”¨ä½ æœ¬åœ°ç¼“å­˜å§ã€‚éšå¼é‡å®šå‘</td></tr><tr><td>400</td><td><strong><code>Bad Request</code></strong></td><td>å®¢æˆ·ç«¯è¯·æ±‚æœ‰<strong>è¯­æ³•é”™è¯¯</strong>ï¼Œä¸èƒ½è¢«æœåŠ¡å™¨æ‰€ç†è§£</td></tr><tr><td>403</td><td><strong><code>Forbidden</code></strong></td><td>æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯<strong>æ‹’ç»æä¾›æœåŠ¡</strong>ï¼Œæ¯”å¦‚ï¼šæ²¡æœ‰æƒé™è®¿é—®ç›¸å…³èµ„æº</td></tr><tr><td>==404==</td><td><strong><code>Not Found</code></strong></td><td><strong>è¯·æ±‚èµ„æºä¸å­˜åœ¨</strong>ï¼Œä¸€èˆ¬æ˜¯URLè¾“å…¥æœ‰è¯¯ï¼Œæˆ–è€…ç½‘ç«™èµ„æºè¢«åˆ é™¤äº†</td></tr><tr><td>405</td><td><strong><code>Method Not Allowed</code></strong></td><td>è¯·æ±‚æ–¹å¼æœ‰è¯¯ï¼Œæ¯”å¦‚åº”è¯¥ç”¨GETè¯·æ±‚æ–¹å¼çš„èµ„æºï¼Œç”¨äº†POST</td></tr><tr><td>428</td><td><strong><code>Precondition Required</code></strong></td><td><strong>æœåŠ¡å™¨è¦æ±‚æœ‰æ¡ä»¶çš„è¯·æ±‚</strong>ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯è¦æƒ³è®¿é—®è¯¥èµ„æºï¼Œå¿…é¡»æºå¸¦ç‰¹å®šçš„è¯·æ±‚å¤´</td></tr><tr><td>429</td><td><strong><code>Too Many Requests</code></strong></td><td>æŒ‡ç¤ºç”¨æˆ·åœ¨ç»™å®šæ—¶é—´å†…å‘é€äº†<strong>å¤ªå¤šè¯·æ±‚</strong>ï¼ˆâ€œé™é€Ÿâ€ï¼‰ï¼Œé…åˆ Retry-After(å¤šé•¿æ—¶é—´åå¯ä»¥è¯·æ±‚)å“åº”å¤´ä¸€èµ·ä½¿ç”¨</td></tr><tr><td>431</td><td><strong><code> Request Header Fields Too Large</code></strong></td><td><strong>è¯·æ±‚å¤´å¤ªå¤§</strong>ï¼ŒæœåŠ¡å™¨ä¸æ„¿æ„å¤„ç†è¯·æ±‚ï¼Œå› ä¸ºå®ƒçš„å¤´éƒ¨å­—æ®µå¤ªå¤§ã€‚è¯·æ±‚å¯ä»¥åœ¨å‡å°‘è¯·æ±‚å¤´åŸŸçš„å¤§å°åé‡æ–°æäº¤ã€‚</td></tr><tr><td>==500==</td><td><strong><code>Internal Server Error</code></strong></td><td><strong>æœåŠ¡å™¨å‘ç”Ÿä¸å¯é¢„æœŸçš„é”™è¯¯</strong>ã€‚æœåŠ¡å™¨å‡ºå¼‚å¸¸äº†ï¼Œèµ¶ç´§çœ‹æ—¥å¿—å»å§</td></tr><tr><td>503</td><td><strong><code>Service Unavailable</code></strong></td><td><strong>æœåŠ¡å™¨å°šæœªå‡†å¤‡å¥½å¤„ç†è¯·æ±‚</strong>ï¼ŒæœåŠ¡å™¨åˆšåˆšå¯åŠ¨ï¼Œè¿˜æœªåˆå§‹åŒ–å¥½</td></tr></tbody></table><p>çŠ¶æ€ç å¤§å…¨ï¼š<a href="https://cloud.tencent.com/developer/chapter/13553">https://cloud.tencent.com/developer/chapter/13553</a> </p><h3 id="2-4-HTTP-åè®®è§£æ"><a href="#2-4-HTTP-åè®®è§£æ" class="headerlink" title="2.4 HTTP-åè®®è§£æ"></a>2.4 HTTP-åè®®è§£æ</h3><p>å°†èµ„æ–™ä¸­å‡†å¤‡å¥½çš„Demoå·¥ç¨‹ï¼Œå¯¼å…¥åˆ°æˆ‘ä»¬çš„IDEAä¸­ï¼Œæœ‰ä¸€ä¸ªServer.javaç±»ï¼Œè¿™é‡Œé¢å°±æ˜¯è‡ªå®šä¹‰çš„ä¸€ä¸ªæœåŠ¡å™¨ä»£ç ï¼Œä¸»è¦ä½¿ç”¨åˆ°çš„æ˜¯<code>ServerSocket</code>å’Œ<code>Socket</code></p><blockquote><p>==è¯´æ˜ï¼šä»¥ä¸‹ä»£ç å¤§å®¶ä¸éœ€è¦è‡ªå·±å†™ï¼Œæˆ‘ä»¬ä¸»è¦æ˜¯é€šè¿‡ä»£ç ï¼Œè®©å¤§å®¶äº†è§£åˆ°æœåŠ¡å™¨é’ˆå¯¹HTTPåè®®çš„è§£ææœºåˆ¶==</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">ServerSocket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">StandardCharsets</span></span><span class="token punctuation">;</span><span class="token comment">/* * è‡ªå®šä¹‰webæœåŠ¡å™¨ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Server</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        <span class="token class-name">ServerSocket</span> ss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç›‘å¬æŒ‡å®šç«¯å£</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"server is running..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token class-name">Socket</span> sock <span class="token operator">=</span> ss<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"connected from "</span> <span class="token operator">+</span> sock<span class="token punctuation">.</span><span class="token function">getRemoteSocketAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span>sock<span class="token punctuation">)</span><span class="token punctuation">;</span>            t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Handler</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>    <span class="token class-name">Socket</span> sock<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token class-name">Socket</span> sock<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>sock <span class="token operator">=</span> sock<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">InputStream</span> input <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sock<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token class-name">OutputStream</span> output <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sock<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">handle</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> output<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>sock<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> ioe<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token punctuation">}</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"client disconnected."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">InputStream</span> input<span class="token punctuation">,</span> <span class="token class-name">OutputStream</span> output<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        <span class="token class-name">BufferedReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">BufferedWriter</span> writer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è¯»å–HTTPè¯·æ±‚:</span>        <span class="token keyword">boolean</span> requestOk <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> first <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>first<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"GET / HTTP/1."</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            requestOk <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">String</span> header <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>header<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// è¯»å–åˆ°ç©ºè¡Œæ—¶, HTTP Headerè¯»å–å®Œæ¯•</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>requestOk <span class="token operator">?</span> <span class="token string">"Response OK"</span> <span class="token operator">:</span> <span class="token string">"Response Error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>requestOk<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// å‘é€é”™è¯¯å“åº”:</span>            writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"HTTP/1.0 404 Not Found\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Content-Length: 0\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            writer<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment">// å‘é€æˆåŠŸå“åº”:</span>            <span class="token comment">//è¯»å–htmlæ–‡ä»¶ï¼Œè½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>            <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Server</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"html/a.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">StringBuilder</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> line <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            br<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> length <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>            writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"HTTP/1.1 200 OK\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Connection: keep-alive\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Content-Type: text/html\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Content-Length: "</span> <span class="token operator">+</span> length <span class="token operator">+</span> <span class="token string">"\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç©ºè¡Œæ ‡è¯†Headerå’ŒBodyçš„åˆ†éš”</span>            writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            writer<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯åŠ¨ServerSocketç¨‹åºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202170430928.png"></p><p>æµè§ˆå™¨è¾“å…¥ï¼š<code>http://localhost:8080</code>  å°±ä¼šè®¿é—®åˆ°ServerSocketç¨‹åº </p><ul><li>ServerSocketç¨‹åºï¼Œä¼šè¯»å–æœåŠ¡å™¨ä¸Š<code>html/a.html</code>æ–‡ä»¶ï¼Œå¹¶æŠŠæ–‡ä»¶æ•°æ®å‘é€ç»™æµè§ˆå™¨</li><li>æµè§ˆå™¨æ¥æ”¶åˆ°a.htmlæ–‡ä»¶ä¸­çš„æ•°æ®åè¿›è¡Œè§£æï¼Œæ˜¾ç¤ºä»¥ä¸‹å†…å®¹</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202171204705.png"> </p><p>ç°åœ¨å¤§å®¶çŸ¥é“äº†æœåŠ¡å™¨æ˜¯å¯ä»¥ä½¿ç”¨javaå®Œæˆç¼–å†™ï¼Œæ˜¯å¯ä»¥æ¥å—é¡µé¢å‘é€çš„è¯·æ±‚å’Œå“åº”æ•°æ®ç»™å‰ç«¯æµè§ˆå™¨çš„ï¼Œè€Œåœ¨å¼€å‘ä¸­çœŸæ­£ç”¨åˆ°çš„WebæœåŠ¡å™¨ï¼Œæˆ‘ä»¬ä¸ä¼šè‡ªå·±å†™çš„ï¼Œéƒ½æ˜¯ä½¿ç”¨ç›®å‰æ¯”è¾ƒæµè¡Œçš„webæœåŠ¡å™¨ã€‚å¦‚ï¼š<strong>Tomcat</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220824233452167.png"> </p><h2 id="3-WEBæœåŠ¡å™¨-Tomcat"><a href="#3-WEBæœåŠ¡å™¨-Tomcat" class="headerlink" title="3. WEBæœåŠ¡å™¨-Tomcat"></a>3. WEBæœåŠ¡å™¨-Tomcat</h2><h3 id="3-1-ç®€ä»‹"><a href="#3-1-ç®€ä»‹" class="headerlink" title="3.1 ç®€ä»‹"></a>3.1 ç®€ä»‹</h3><h4 id="3-1-1-æœåŠ¡å™¨æ¦‚è¿°"><a href="#3-1-1-æœåŠ¡å™¨æ¦‚è¿°" class="headerlink" title="3.1.1 æœåŠ¡å™¨æ¦‚è¿°"></a>3.1.1 æœåŠ¡å™¨æ¦‚è¿°</h4><p><strong>æœåŠ¡å™¨ç¡¬ä»¶</strong></p><ul><li>æŒ‡çš„ä¹Ÿæ˜¯è®¡ç®—æœºï¼Œåªä¸è¿‡æœåŠ¡å™¨è¦æ¯”æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„è®¡ç®—æœºå¤§å¾ˆå¤šã€‚</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202173148317.png"> </p><p>æœåŠ¡å™¨ï¼Œä¹Ÿç§°ä¼ºæœå™¨ã€‚æ˜¯æä¾›è®¡ç®—æœåŠ¡çš„è®¾å¤‡ã€‚ç”±äºæœåŠ¡å™¨éœ€è¦å“åº”æœåŠ¡è¯·æ±‚ï¼Œå¹¶è¿›è¡Œå¤„ç†ï¼Œå› æ­¤ä¸€èˆ¬æ¥è¯´æœåŠ¡å™¨åº”å…·å¤‡æ‰¿æ‹…æœåŠ¡å¹¶ä¸”ä¿éšœæœåŠ¡çš„èƒ½åŠ›ã€‚</p><p>æœåŠ¡å™¨çš„æ„æˆåŒ…æ‹¬å¤„ç†å™¨ã€ç¡¬ç›˜ã€å†…å­˜ã€ç³»ç»Ÿæ€»çº¿ç­‰ï¼Œå’Œé€šç”¨çš„è®¡ç®—æœºæ¶æ„ç±»ä¼¼ï¼Œä½†æ˜¯ç”±äºéœ€è¦æä¾›é«˜å¯é çš„æœåŠ¡ï¼Œå› æ­¤åœ¨å¤„ç†èƒ½åŠ›ã€ç¨³å®šæ€§ã€å¯é æ€§ã€å®‰å…¨æ€§ã€å¯æ‰©å±•æ€§ã€å¯ç®¡ç†æ€§ç­‰æ–¹é¢è¦æ±‚è¾ƒé«˜ã€‚</p><p>åœ¨ç½‘ç»œç¯å¢ƒä¸‹ï¼Œæ ¹æ®æœåŠ¡å™¨æä¾›çš„æœåŠ¡ç±»å‹ä¸åŒï¼Œå¯åˆ†ä¸ºï¼šæ–‡ä»¶æœåŠ¡å™¨ï¼Œæ•°æ®åº“æœåŠ¡å™¨ï¼Œåº”ç”¨ç¨‹åºæœåŠ¡å™¨ï¼ŒWEBæœåŠ¡å™¨ç­‰ã€‚</p><p>æœåŠ¡å™¨åªæ˜¯ä¸€å°è®¾å¤‡ï¼Œå¿…é¡»å®‰è£…æœåŠ¡å™¨è½¯ä»¶æ‰èƒ½æä¾›ç›¸åº”çš„æœåŠ¡ã€‚</p><p><strong>æœåŠ¡å™¨è½¯ä»¶</strong></p><p>æœåŠ¡å™¨è½¯ä»¶ï¼šåŸºäºServerSocketç¼–å†™çš„ç¨‹åº</p><ul><li>æœåŠ¡å™¨è½¯ä»¶æœ¬è´¨æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨æœåŠ¡å™¨è®¾å¤‡ä¸Šçš„åº”ç”¨ç¨‹åº</li><li>èƒ½å¤Ÿæ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¹¶æ ¹æ®è¯·æ±‚ç»™å®¢æˆ·ç«¯å“åº”æ•°æ®</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1530625192392.png"></p><h4 id="3-1-2-WebæœåŠ¡å™¨"><a href="#3-1-2-WebæœåŠ¡å™¨" class="headerlink" title="3.1.2 WebæœåŠ¡å™¨"></a>3.1.2 WebæœåŠ¡å™¨</h4><p>WebæœåŠ¡å™¨æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åº(è½¯ä»¶)ï¼Œå¯¹HTTPåè®®çš„æ“ä½œè¿›è¡Œå°è£…ï¼Œä½¿å¾—ç¨‹åºå‘˜ä¸å¿…ç›´æ¥å¯¹åè®®è¿›è¡Œæ“ä½œ(ä¸ç”¨ç¨‹åºå‘˜è‡ªå·±å†™ä»£ç å»è§£æhttpåè®®è§„åˆ™)ï¼Œè®©Webå¼€å‘æ›´åŠ ä¾¿æ·ã€‚ä¸»è¦åŠŸèƒ½æ˜¯â€æä¾›ç½‘ä¸Šä¿¡æ¯æµè§ˆæœåŠ¡â€ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220824233614686.png"></p><p>WebæœåŠ¡å™¨æ˜¯å®‰è£…åœ¨æœåŠ¡å™¨ç«¯çš„ä¸€æ¬¾è½¯ä»¶ï¼Œå°†æ¥æˆ‘ä»¬æŠŠè‡ªå·±å†™çš„Webé¡¹ç›®éƒ¨ç½²åˆ°TomcatæœåŠ¡å™¨è½¯ä»¶ä¸­ï¼Œå½“WebæœåŠ¡å™¨è½¯ä»¶å¯åŠ¨åï¼Œéƒ¨ç½²åœ¨WebæœåŠ¡å™¨è½¯ä»¶ä¸­çš„é¡µé¢å°±å¯ä»¥ç›´æ¥é€šè¿‡æµè§ˆå™¨æ¥è®¿é—®äº†ã€‚</p><p><strong>WebæœåŠ¡å™¨è½¯ä»¶ä½¿ç”¨æ­¥éª¤</strong></p><ul><li>å‡†å¤‡é™æ€èµ„æº</li><li>ä¸‹è½½å®‰è£…WebæœåŠ¡å™¨è½¯ä»¶</li><li>å°†é™æ€èµ„æºéƒ¨ç½²åˆ°WebæœåŠ¡å™¨ä¸Š</li><li>å¯åŠ¨WebæœåŠ¡å™¨ä½¿ç”¨æµè§ˆå™¨è®¿é—®å¯¹åº”çš„èµ„æº</li></ul><p>ç¬¬1æ­¥ï¼šå‡†å¤‡é™æ€èµ„æº</p><ul><li>åœ¨æä¾›çš„èµ„æ–™ä¸­æ‰¾åˆ°é™æ€èµ„æºæ–‡ä»¶</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202180119859.png"> </p><p>ç¬¬2æ­¥ï¼šä¸‹è½½å®‰è£…WebæœåŠ¡å™¨è½¯ä»¶</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202181110555.png"></p><p>ç¬¬3æ­¥ï¼šå°†é™æ€èµ„æºéƒ¨ç½²åˆ°WebæœåŠ¡å™¨ä¸Š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202180805686.png"></p><p>ç¬¬4æ­¥ï¼šå¯åŠ¨WebæœåŠ¡å™¨ä½¿ç”¨æµè§ˆå™¨è®¿é—®å¯¹åº”çš„èµ„æº</p><p><img src="/" alt="image-20221202181346327"></p><p>æµè§ˆå™¨è¾“å…¥ï¼š<code>http://localhost:8080/demo/index.html</code></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202181651469.png"></p><p>ä¸Šè¿°å†…å®¹åœ¨æ¼”ç¤ºçš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯Apacheä¸‹çš„Tomcatè½¯ä»¶ï¼Œè‡³äºTomcatè½¯ä»¶å¦‚ä½•ä½¿ç”¨ï¼Œåé¢ä¼šè¯¦ç»†çš„è®²åˆ°ã€‚è€Œå¯¹äºWebæœåŠ¡å™¨æ¥è¯´ï¼Œå®ç°çš„æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼ŒTomcatåªæ˜¯å…¶ä¸­çš„ä¸€ç§ï¼Œè€Œé™¤äº†Tomcatä»¥å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šä¼˜ç§€çš„WebæœåŠ¡å™¨ï¼Œæ¯”å¦‚:</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220824233728524.png"> </p><p>Tomcatå°±æ˜¯ä¸€æ¬¾è½¯ä»¶ï¼Œæˆ‘ä»¬ä¸»è¦æ˜¯ä»¥å­¦ä¹ å¦‚ä½•å»ä½¿ç”¨ä¸ºä¸»ã€‚å…·ä½“æˆ‘ä»¬ä¼šä»ä»¥ä¸‹è¿™äº›æ–¹å‘å»å­¦ä¹ :</p><ol><li><p>ç®€ä»‹ï¼šåˆæ­¥è®¤è¯†ä¸‹Tomcat</p></li><li><p>åŸºæœ¬ä½¿ç”¨: å®‰è£…ã€å¸è½½ã€å¯åŠ¨ã€å…³é—­ã€é…ç½®å’Œé¡¹ç›®éƒ¨ç½²ï¼Œè¿™äº›éƒ½æ˜¯å¯¹Tomcatçš„åŸºæœ¬æ“ä½œ</p></li><li><p>IDEAä¸­å¦‚ä½•åˆ›å»ºMaven Webé¡¹ç›®</p></li><li><p>IDEAä¸­å¦‚ä½•ä½¿ç”¨Tomcat,åé¢è¿™ä¸¤ä¸ªéƒ½æ˜¯æˆ‘ä»¬ä»¥åå¼€å‘ç»å¸¸ä¼šç”¨åˆ°çš„æ–¹å¼</p></li></ol><p>é¦–é€‰æˆ‘ä»¬æ¥è®¤è¯†ä¸‹Tomcatã€‚</p><h4 id="3-1-3-Tomcat"><a href="#3-1-3-Tomcat" class="headerlink" title="3.1.3 Tomcat"></a>3.1.3 Tomcat</h4><p>TomcatæœåŠ¡å™¨è½¯ä»¶æ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æºçš„webåº”ç”¨æœåŠ¡å™¨ã€‚æ˜¯Apacheè½¯ä»¶åŸºé‡‘ä¼šçš„ä¸€ä¸ªæ ¸å¿ƒé¡¹ç›®ã€‚ç”±Apacheï¼ŒSunå’Œå…¶ä»–ä¸€äº›å…¬å¸åŠä¸ªäººå…±åŒå¼€å‘è€Œæˆã€‚</p><p>ç”±äºTomcatåªæ”¯æŒServlet/JSPå°‘é‡JavaEEè§„èŒƒï¼Œæ‰€ä»¥æ˜¯ä¸€ä¸ªå¼€æºå…è´¹çš„è½»é‡çº§WebæœåŠ¡å™¨ã€‚</p><blockquote><p>JavaEEè§„èŒƒï¼š   JavaEE =&gt; Java Enterprise Edition(Javaä¼ä¸šç‰ˆ)</p><p>avaEEè§„èŒƒå°±æ˜¯æŒ‡Javaä¼ä¸šçº§å¼€å‘çš„æŠ€æœ¯è§„èŒƒæ€»å’Œã€‚åŒ…å«13é¡¹æŠ€æœ¯è§„èŒƒï¼šJDBCã€JNDIã€EJBã€RMIã€JSPã€Servletã€XMLã€JMSã€Java IDLã€JTSã€JTAã€JavaMailã€JAF</p></blockquote><p>å› ä¸ºTomcatæ”¯æŒServlet/JSPè§„èŒƒï¼Œæ‰€ä»¥Tomcatä¹Ÿè¢«ç§°ä¸ºWebå®¹å™¨ã€Servletå®¹å™¨ã€‚JavaWebç¨‹åºéœ€è¦ä¾èµ–Tomcatæ‰èƒ½è¿è¡Œã€‚</p><p>Tomcatçš„å®˜ç½‘: <a href="https://tomcat.apache.org/">https://tomcat.apache.org/</a> </p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220824233903517.png"> </p><h3 id="3-2-åŸºæœ¬ä½¿ç”¨"><a href="#3-2-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="3.2 åŸºæœ¬ä½¿ç”¨"></a>3.2 åŸºæœ¬ä½¿ç”¨</h3><h4 id="3-2-1-ä¸‹è½½"><a href="#3-2-1-ä¸‹è½½" class="headerlink" title="3.2.1 ä¸‹è½½"></a>3.2.1 ä¸‹è½½</h4><p>ç›´æ¥ä»å®˜æ–¹ç½‘ç«™ä¸‹è½½ï¼š<a href="https://tomcat.apache.org/download-90.cgi">https://tomcat.apache.org/download-90.cgi</a></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220824234407828.png"></p><blockquote><p>Tomcatè½¯ä»¶ç±»å‹è¯´æ˜ï¼š</p><ul><li>tar.gzæ–‡ä»¶ï¼Œæ˜¯linuxå’Œmacæ“ä½œç³»ç»Ÿä¸‹çš„å‹ç¼©ç‰ˆæœ¬</li><li>zipæ–‡ä»¶ï¼Œæ˜¯windowæ“ä½œç³»ç»Ÿä¸‹å‹ç¼©ç‰ˆæœ¬ï¼ˆæˆ‘ä»¬é€‰æ‹©zipæ–‡ä»¶ï¼‰</li></ul></blockquote><p>å¤§å®¶å¯ä»¥è‡ªè¡Œä¸‹è½½ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨èµ„æ–™ä¸­å·²ç»ä¸‹è½½å¥½çš„èµ„æºï¼Œ</p><p>Tomcatçš„è½¯ä»¶ç¨‹åº  ï¼š/èµ„æ–™/SpringbootWeb/apache-tomcat-9.0.27-windows-x64.zip</p><p><img src="/assets/image-20220824234527743.png"> </p><h4 id="3-2-2-å®‰è£…ä¸å¸è½½"><a href="#3-2-2-å®‰è£…ä¸å¸è½½" class="headerlink" title="3.2.2 å®‰è£…ä¸å¸è½½"></a>3.2.2 å®‰è£…ä¸å¸è½½</h4><p><strong>å®‰è£…:</strong> Tomcatæ˜¯ç»¿è‰²ç‰ˆï¼Œç›´æ¥è§£å‹å³å®‰è£…</p><blockquote><p>åœ¨Eç›˜çš„developç›®å½•ä¸‹ï¼Œå°†<code>apache-tomcat-9.0.27-windows-x64.zip</code>è¿›è¡Œè§£å‹ç¼©ï¼Œä¼šå¾—åˆ°ä¸€ä¸ª<code>apache-tomcat-9.0.27</code>çš„ç›®å½•ï¼ŒTomcatå°±å·²ç»å®‰è£…æˆåŠŸã€‚</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202184545321.png"></p><p>==æ³¨æ„ï¼ŒTomcatåœ¨è§£å‹ç¼©çš„æ—¶å€™ï¼Œè§£å‹æ‰€åœ¨çš„ç›®å½•å¯ä»¥ä»»æ„ï¼Œä½†æœ€å¥½è§£å‹åˆ°ä¸€ä¸ªä¸åŒ…å«ä¸­æ–‡å’Œç©ºæ ¼çš„ç›®å½•ï¼Œå› ä¸ºåæœŸåœ¨éƒ¨ç½²é¡¹ç›®çš„æ—¶å€™ï¼Œå¦‚æœè·¯å¾„æœ‰ä¸­æ–‡æˆ–è€…ç©ºæ ¼å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºéƒ¨ç½²å¤±è´¥ã€‚==</p><p>æ‰“å¼€<code>apache-tomcat-9.0.27</code>ç›®å½•å°±èƒ½çœ‹åˆ°å¦‚ä¸‹ç›®å½•ç»“æ„ï¼Œæ¯ä¸ªç›®å½•ä¸­åŒ…å«çš„å†…å®¹éœ€è¦è®¤è¯†ä¸‹</p><p><img src="/assets/image-20220824234652173.png">  </p><p>binï¼šç›®å½•ä¸‹æœ‰ä¸¤ç±»æ–‡ä»¶ï¼Œä¸€ç§æ˜¯ä»¥<code>.bat</code>ç»“å°¾çš„ï¼Œæ˜¯Windowsç³»ç»Ÿçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸€ç§æ˜¯ä»¥<code>.sh</code>ç»“å°¾çš„ï¼Œæ˜¯Linuxç³»ç»Ÿçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><p>webappsï¼šå°±æ˜¯ä»¥åé¡¹ç›®éƒ¨ç½²çš„ç›®å½•</p><p><strong>å¸è½½ï¼š</strong>å¸è½½æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥ç›´æ¥åˆ é™¤ç›®å½•å³å¯</p><h4 id="3-2-3-å¯åŠ¨ä¸å…³é—­"><a href="#3-2-3-å¯åŠ¨ä¸å…³é—­" class="headerlink" title="3.2.3 å¯åŠ¨ä¸å…³é—­"></a>3.2.3 å¯åŠ¨ä¸å…³é—­</h4><p><strong>å¯åŠ¨Tomcat</strong> </p><ul><li>åŒå‡»tomcatè§£å‹ç›®å½•/bin/<strong>startup.bat</strong>æ–‡ä»¶å³å¯å¯åŠ¨tomcat</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202183201663.png"></p><p>==æ³¨æ„: tomcatæœåŠ¡å™¨å¯åŠ¨å,é»‘çª—å£ä¸ä¼šå…³é—­,åªè¦é»‘çª—å£ä¸å…³é—­,å°±è¯æ˜tomcatæœåŠ¡å™¨æ­£åœ¨è¿è¡Œ==</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202183409304.png"></p><p>Tomcatçš„é»˜è®¤ç«¯å£ä¸º8080ï¼Œæ‰€ä»¥åœ¨æµè§ˆå™¨çš„åœ°å€æ è¾“å…¥ï¼š<code>http://127.0.0.1:8080</code> å³å¯è®¿é—®tomcatæœåŠ¡å™¨</p><blockquote><p>127.0.0.1 ä¹Ÿå¯ä»¥ä½¿ç”¨localhostä»£æ›¿ã€‚å¦‚ï¼š<code>http://localhost:8080</code></p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202183550682.png"></p><ul><li>èƒ½çœ‹åˆ°ä»¥ä¸Šå›¾ç‰‡ä¸­Apache Tomcatçš„å†…å®¹å°±è¯´æ˜Tomcatå·²ç»å¯åŠ¨æˆåŠŸ</li></ul><p>==æ³¨æ„äº‹é¡¹== ï¼šTomcatå¯åŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°æ§åˆ¶å°æœ‰ä¸­æ–‡ä¹±ç æ—¶ï¼Œå¯ä»¥é€šå¸¸ä¿®æ”¹conf/logging.proopertiesæ–‡ä»¶è§£å†³</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220825083848086.png"> </p><p><strong>å…³é—­:</strong>  å…³é—­æœ‰ä¸‰ç§æ–¹å¼ </p><p>1ã€å¼ºåˆ¶å…³é—­ï¼šç›´æ¥xæ‰Tomcatçª—å£ï¼ˆä¸å»ºè®®ï¼‰</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202184753808.png"></p><p>2ã€æ­£å¸¸å…³é—­ï¼šbin\shutdown.bat</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202185103941.png"></p><p>3ã€æ­£å¸¸å…³é—­ï¼šåœ¨Tomcatå¯åŠ¨çª—å£ä¸­æŒ‰ä¸‹ Ctrl+C</p><ul><li>è¯´æ˜ï¼šå¦‚æœæŒ‰ä¸‹Ctrl+Cæ²¡æœ‰åæ˜ ï¼Œå¯ä»¥å¤šæŒ‰å‡ æ¬¡</li></ul><h4 id="3-2-4-å¸¸è§é—®é¢˜"><a href="#3-2-4-å¸¸è§é—®é¢˜" class="headerlink" title="3.2.4 å¸¸è§é—®é¢˜"></a>3.2.4 å¸¸è§é—®é¢˜</h4><p><strong>é—®é¢˜1ï¼šTomcatå¯åŠ¨æ—¶ï¼Œçª—å£ä¸€é—ªè€Œè¿‡</strong></p><ul><li>æ£€æŸ¥JAVA_HOMEç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®é…ç½®</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202190033167.png"></p><p><strong>é—®é¢˜2ï¼šç«¯å£å·å†²çª</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220825084104447.png"></p><ul><li><p>å‘ç”Ÿé—®é¢˜çš„åŸå› ï¼šTomcatä½¿ç”¨çš„ç«¯å£è¢«å ç”¨äº†ã€‚</p></li><li><p>è§£å†³æ–¹æ¡ˆï¼šæ¢Tomcatç«¯å£å·</p><ul><li>è¦æƒ³ä¿®æ”¹Tomcatå¯åŠ¨çš„ç«¯å£å·ï¼Œéœ€è¦ä¿®æ”¹ conf/server.xmlæ–‡ä»¶</li></ul></li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241128145450955.png"></p><blockquote><p>æ³¨: HTTPåè®®é»˜è®¤ç«¯å£å·ä¸º80ï¼Œå¦‚æœå°†Tomcatç«¯å£å·æ”¹ä¸º80ï¼Œåˆ™å°†æ¥è®¿é—®Tomcatæ—¶ï¼Œå°†ä¸ç”¨è¾“å…¥ç«¯å£å·ã€‚</p></blockquote><h3 id="3-3-å…¥é—¨ç¨‹åºè§£æ"><a href="#3-3-å…¥é—¨ç¨‹åºè§£æ" class="headerlink" title="3.3 å…¥é—¨ç¨‹åºè§£æ"></a>3.3 å…¥é—¨ç¨‹åºè§£æ</h3><p>å…³äºwebå¼€å‘çš„åŸºç¡€çŸ¥è¯†ï¼Œæˆ‘ä»¬å¯ä»¥å‘Šä¸€æ®µè½äº†ã€‚ä¸‹é¢å‘¢ï¼Œæˆ‘ä»¬åœ¨åŸºäºä»Šå¤©çš„æ ¸å¿ƒæŠ€æœ¯ç‚¹SpringBootå¿«é€Ÿå…¥é—¨æ¡ˆä¾‹è¿›è¡Œåˆ†æã€‚</p><h4 id="3-3-1-Springå®˜æ–¹éª¨æ¶"><a href="#3-3-1-Springå®˜æ–¹éª¨æ¶" class="headerlink" title="3.3.1 Springå®˜æ–¹éª¨æ¶"></a>3.3.1 Springå®˜æ–¹éª¨æ¶</h4><p>ä¹‹å‰æˆ‘ä»¬åˆ›å»ºçš„SpringBootå…¥é—¨æ¡ˆä¾‹ï¼Œæ˜¯åŸºäºSpringå®˜æ–¹æä¾›çš„éª¨æ¶å®ç°çš„ã€‚</p><p>Springå®˜æ–¹éª¨æ¶ï¼Œå¯ä»¥ç†è§£ä¸ºSpringå®˜æ–¹ä¸ºç¨‹åºå‘˜æä¾›ä¸€ä¸ªæ­å»ºé¡¹ç›®çš„æ¨¡æ¿ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202195646621.png"></p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¿é—®ï¼š<a href="https://start.spring.io/">https://start.spring.io/</a> ï¼Œè¿›å…¥åˆ°å®˜æ–¹éª¨æ¶é¡µé¢</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202201623424.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202200356398.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202200547676.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202200708988.png"></p><p>Springå®˜æ–¹ç”Ÿæˆçš„SpringBooté¡¹ç›®ï¼Œæ€ä¹ˆä½¿ç”¨å‘¢ï¼Ÿ</p><ul><li>è§£å‹ç¼©åï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªSpringBooté¡¹ç›®å·¥ç¨‹</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202201042109.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202201221136.png"></p><p>æ‰“å¼€pom.xmlæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°springbooté¡¹ç›®ä¸­å¼•å…¥äº†webä¾èµ–å’Œtestä¾èµ–</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202201826364.png"></p><blockquote><p><strong>ç»“è®ºï¼šä¸è®ºä½¿ç”¨IDEAåˆ›å»ºSpringBooté¡¹ç›®ï¼Œè¿˜æ˜¯ç›´æ¥åœ¨å®˜æ–¹ç½‘ç«™åˆ©ç”¨éª¨æ¶ç”ŸæˆSpringBooté¡¹ç›®ï¼Œé¡¹ç›®çš„ç»“æ„å’Œpom.xmlæ–‡ä»¶ä¸­å†…å®¹æ˜¯ç›¸ä¼¼çš„ã€‚</strong></p></blockquote><h4 id="3-3-2-èµ·æ­¥ä¾èµ–"><a href="#3-3-2-èµ·æ­¥ä¾èµ–" class="headerlink" title="3.3.2 èµ·æ­¥ä¾èµ–"></a>3.3.2 èµ·æ­¥ä¾èµ–</h4><p>åœ¨æˆ‘ä»¬ä¹‹å‰è®²è§£çš„SpringBootå¿«é€Ÿå…¥é—¨æ¡ˆä¾‹ä¸­ï¼ŒåŒæ ·ä¹Ÿå¼•ç”¨äº†ï¼šwebä¾èµ–å’Œtestä¾èµ–</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202202305118.png"></p><p>spring-boot-starter-webå’Œspring-boot-starter-testï¼Œåœ¨SpringBootä¸­åˆç§°ä¸ºï¼šèµ·æ­¥ä¾èµ–</p><p>è€Œåœ¨SpringBootçš„é¡¹ç›®ä¸­ï¼Œæœ‰å¾ˆå¤šçš„èµ·æ­¥ä¾èµ–ï¼Œä»–ä»¬æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹å¾ï¼šå°±æ˜¯ä»¥<code>spring-boot-starter-</code>ä½œä¸ºå¼€å¤´ã€‚åœ¨ä»¥åå¤§å®¶é‡åˆ°spring-boot-starter-xxxè¿™ç±»çš„ä¾èµ–ï¼Œéƒ½ä¸ºèµ·æ­¥ä¾èµ–ã€‚</p><p>èµ·æ­¥ä¾èµ–æœ‰ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„å‘¢ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥å…¥é—¨æ¡ˆä¾‹ä¸­å¼•å…¥çš„èµ·æ­¥ä¾èµ–åšä¸ºè®²è§£ï¼š</p><ul><li>spring-boot-starter-webï¼šåŒ…å«äº†webåº”ç”¨å¼€å‘æ‰€éœ€è¦çš„å¸¸è§ä¾èµ–</li><li>spring-boot-starter-testï¼šåŒ…å«äº†å•å…ƒæµ‹è¯•æ‰€éœ€è¦çš„å¸¸è§ä¾èµ–</li></ul><blockquote><p><strong>spring-boot-starter-web</strong>å†…éƒ¨æŠŠå…³äºWebå¼€å‘æ‰€æœ‰çš„ä¾èµ–éƒ½å·²ç»å¯¼å…¥å¹¶ä¸”æŒ‡å®šäº†ç‰ˆæœ¬ï¼Œåªéœ€å¼•å…¥ <code>spring-boot-starter-web</code> ä¾èµ–å°±å¯ä»¥å®ç°Webå¼€å‘çš„éœ€è¦çš„åŠŸèƒ½</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202204013113.png"></p></blockquote><p>Springçš„å®˜æ–¹æä¾›äº†å¾ˆå¤šç°æˆçš„starter(èµ·æ­¥ä¾èµ–)ï¼Œæˆ‘ä»¬åœ¨å¼€å‘ç›¸å…³åº”ç”¨æ—¶ï¼Œåªéœ€è¦å¼•å…¥å¯¹åº”çš„starterå³å¯ã€‚</p><p>å®˜æ–¹åœ°å€ï¼š<a href="https://docs.spring.io/spring-boot/docs/2.7.2/reference/htmlsingle/#using.build-systems.starters">https://docs.spring.io/spring-boot/docs/2.7.2/reference/htmlsingle/#using.build-systems.starters</a></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202204536647.png"></p><p>æ¯ä¸€ä¸ªèµ·æ­¥ä¾èµ–ï¼Œéƒ½ç”¨äºå¼€å‘ä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½ã€‚</p><blockquote><p>ä¸¾ä¾‹ï¼šå½“æˆ‘ä»¬å¼€å‘ä¸­éœ€è¦ä½¿ç”¨redisæ•°æ®åº“æ—¶ï¼Œåªéœ€è¦åœ¨SpringBooté¡¹ç›®ä¸­ï¼Œå¼•å…¥ï¼šspring-boot-starter-redis ï¼Œå³å¯å¯¼å…¥rediså¼€å‘æ‰€éœ€è¦çš„ä¾èµ–ã€‚</p></blockquote><h4 id="3-3-2-SpringBootçˆ¶å·¥ç¨‹"><a href="#3-3-2-SpringBootçˆ¶å·¥ç¨‹" class="headerlink" title="3.3.2 SpringBootçˆ¶å·¥ç¨‹"></a>3.3.2 SpringBootçˆ¶å·¥ç¨‹</h4><p>åœ¨æˆ‘ä»¬ä¹‹å‰å¼€å‘çš„SpringBootå…¥é—¨æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡mavenå¼•å…¥çš„ä¾èµ–ï¼Œæ˜¯æ²¡æœ‰æŒ‡å®šå…·ä½“çš„ä¾èµ–ç‰ˆæœ¬å·çš„ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202205103486.png"></p><p>ä¸ºä»€ä¹ˆæ²¡æœ‰æŒ‡å®š<version>ç‰ˆæœ¬å·ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨å‘¢ï¼Ÿ</version></p><ul><li>å› ä¸ºæ¯ä¸€ä¸ªSpringBootå·¥ç¨‹ï¼Œéƒ½æœ‰ä¸€ä¸ªçˆ¶å·¥ç¨‹ã€‚ä¾èµ–çš„ç‰ˆæœ¬å·ï¼Œåœ¨çˆ¶å·¥ç¨‹ä¸­ç»Ÿä¸€ç®¡ç†ã€‚</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221202205318778.png"></p><h4 id="3-3-3-å†…åµŒTomcat"><a href="#3-3-3-å†…åµŒTomcat" class="headerlink" title="3.3.3 å†…åµŒTomcat"></a>3.3.3 å†…åµŒTomcat</h4><p>é—®é¢˜ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬ä¹‹å‰ä¹¦å†™çš„SpringBootå…¥é—¨ç¨‹åºä¸­ï¼Œå¹¶æ²¡æœ‰æŠŠç¨‹åºéƒ¨ç½²åˆ°Tomcatçš„webappsç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥è¿è¡Œå‘¢ï¼Ÿ</p><p>åŸå› å‘¢ï¼Œæ˜¯å› ä¸ºåœ¨æˆ‘ä»¬çš„SpringBootä¸­ï¼Œå¼•å…¥äº†webè¿è¡Œç¯å¢ƒ(ä¹Ÿå°±æ˜¯å¼•å…¥spring-boot-starter-webèµ·æ­¥ä¾èµ–)ï¼Œå…¶å†…éƒ¨å·²ç»é›†æˆäº†å†…ç½®çš„TomcatæœåŠ¡å™¨ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡IDEAå¼€å‘å·¥å…·å³ä¾§çš„mavené¢æ¿ä¸­ï¼Œå°±å¯ä»¥çœ‹åˆ°å½“å‰å·¥ç¨‹å¼•å…¥çš„ä¾èµ–ã€‚å…¶ä¸­å·²ç»å°†Tomcatçš„ç›¸å…³ä¾èµ–ä¼ é€’ä¸‹æ¥äº†ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨SpringBootä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨TomcatæœåŠ¡å™¨ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220825194553137.png"> </p><p>å½“æˆ‘ä»¬è¿è¡ŒSpringBootçš„å¼•å¯¼ç±»æ—¶(è¿è¡Œmainæ–¹æ³•)ï¼Œå°±ä¼šçœ‹åˆ°å‘½ä»¤è¡Œè¾“å‡ºçš„æ—¥å¿—ï¼Œå…¶ä¸­å ç”¨8080ç«¯å£çš„å°±æ˜¯Tomcatã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220825195359993.png"></p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBootå…¥é—¨ </tag>
            
            <tag> Httpåè®® </tag>
            
            <tag> Tomcat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven</title>
      <link href="/2024/11/28/maven/"/>
      <url>/2024/11/28/maven/</url>
      
        <content type="html"><![CDATA[<h1 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h1><h2 id="è¯¾ç¨‹å†…å®¹"><a href="#è¯¾ç¨‹å†…å®¹" class="headerlink" title="è¯¾ç¨‹å†…å®¹"></a>è¯¾ç¨‹å†…å®¹</h2><blockquote><ol><li>åˆè¯†Maven</li><li>Mavenæ¦‚è¿°<ul><li>Mavenæ¨¡å‹ä»‹ç»</li><li>Mavenä»“åº“ä»‹ç»</li><li>Mavenå®‰è£…ä¸é…ç½®</li></ul></li><li>IDEAé›†æˆMaven</li><li>ä¾èµ–ç®¡ç†</li></ol></blockquote><h2 id="01-Mavenè¯¾ç¨‹ä»‹ç»"><a href="#01-Mavenè¯¾ç¨‹ä»‹ç»" class="headerlink" title="01. Mavenè¯¾ç¨‹ä»‹ç»"></a>01. Mavenè¯¾ç¨‹ä»‹ç»</h2><h3 id="1-1-è¯¾ç¨‹å®‰æ’"><a href="#1-1-è¯¾ç¨‹å®‰æ’" class="headerlink" title="1.1 è¯¾ç¨‹å®‰æ’"></a>1.1 è¯¾ç¨‹å®‰æ’</h3><p>å­¦ä¹ å®Œå‰ç«¯Webå¼€å‘æŠ€æœ¯åï¼Œæˆ‘ä»¬å³å°†å¼€å§‹å­¦ä¹ åç«¯Webå¼€å‘æŠ€æœ¯ã€‚åšä¸ºä¸€åJavaå¼€å‘å·¥ç¨‹å¸ˆï¼Œ<strong>åç«¯Webå¼€å‘æŠ€æœ¯æ˜¯æˆ‘ä»¬å­¦ä¹ çš„é‡ç‚¹</strong>ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221130095316032.png" alt="image-20221130095316032"></p><p>åç«¯Webå¼€å‘æŠ€æœ¯çš„å­¦ä¹ ï¼Œæˆ‘ä»¬ä¼šå…ˆå­¦ä¹ Javaé¡¹ç›®çš„æ„å»ºå·¥å…·ï¼šMaven</p><h3 id="1-2-åˆè¯†Maven"><a href="#1-2-åˆè¯†Maven" class="headerlink" title="1.2 åˆè¯†Maven"></a>1.2 åˆè¯†Maven</h3><h4 id="1-2-1-ä»€ä¹ˆæ˜¯Maven"><a href="#1-2-1-ä»€ä¹ˆæ˜¯Maven" class="headerlink" title="1.2.1 ä»€ä¹ˆæ˜¯Maven"></a>1.2.1 ä»€ä¹ˆæ˜¯Maven</h4><p>Mavenæ˜¯Apacheæ——ä¸‹çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ˜¯ä¸€æ¬¾ç”¨äºç®¡ç†å’Œæ„å»ºjavaé¡¹ç›®çš„å·¥å…·ã€‚</p><p>å®˜ç½‘ï¼š<a href="https://maven.apache.org/">https://maven.apache.org/</a></p><blockquote><p>Apache è½¯ä»¶åŸºé‡‘ä¼šï¼Œæˆç«‹äº1999å¹´7æœˆï¼Œæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å¤§çš„æœ€å—æ¬¢è¿çš„å¼€æºè½¯ä»¶åŸºé‡‘ä¼šï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºæ”¯æŒå¼€æºé¡¹ç›®è€Œç”Ÿçš„éç›ˆåˆ©æ€§ç»„ç»‡ã€‚</p><p>å¼€æºé¡¹ç›®ï¼š<a href="https://www.apache.org/index.html#projects-list">https://www.apache.org/index.html#projects-list</a></p></blockquote><h4 id="1-2-2-Mavençš„ä½œç”¨"><a href="#1-2-2-Mavençš„ä½œç”¨" class="headerlink" title="1.2.2 Mavençš„ä½œç”¨"></a>1.2.2 Mavençš„ä½œç”¨</h4><p>ä½¿ç”¨Mavenèƒ½å¤Ÿåšä»€ä¹ˆå‘¢ï¼Ÿ</p><ol><li>ä¾èµ–ç®¡ç†</li><li>ç»Ÿä¸€é¡¹ç›®ç»“æ„</li><li>é¡¹ç›®æ„å»º</li></ol><p><strong>ä¾èµ–ç®¡ç†</strong>ï¼š</p><ul><li>æ–¹ä¾¿å¿«æ·çš„ç®¡ç†é¡¹ç›®ä¾èµ–çš„èµ„æº(jaråŒ…)ï¼Œé¿å…ç‰ˆæœ¬å†²çªé—®é¢˜</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221130104014162.png" alt="image-20221130104014162"></p><p>å½“ä½¿ç”¨mavenè¿›è¡Œé¡¹ç›®ä¾èµ–(jaråŒ…)ç®¡ç†ï¼Œåˆ™å¾ˆæ–¹ä¾¿çš„å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ æˆ‘ä»¬åªéœ€è¦åœ¨mavené¡¹ç›®çš„pom.xmlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä¸€æ®µå¦‚ä¸‹å›¾æ‰€ç¤ºçš„é…ç½®å³å¯å®ç°ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220616001159531.png" alt="image-20220616001159531">  </p><p>**ç»Ÿä¸€é¡¹ç›®ç»“æ„ : **</p><ul><li>æä¾›æ ‡å‡†ã€ç»Ÿä¸€çš„é¡¹ç›®ç»“æ„</li></ul><p>åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œå½“ä½ ä½¿ç”¨ä¸åŒçš„å¼€å‘å·¥å…· (å¦‚ï¼šEclipseã€Idea)ï¼Œåˆ›å»ºé¡¹ç›®å·¥ç¨‹æ—¶ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221130212841973.png" alt="image-20221130212841973"> </p><p>è‹¥æˆ‘ä»¬åˆ›å»ºçš„æ˜¯ä¸€ä¸ªmavenå·¥ç¨‹ï¼Œæ˜¯å¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆç»Ÿä¸€ã€æ ‡å‡†çš„é¡¹ç›®ç›®å½•ç»“æ„ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221130220539444.png" alt="image-20221130220539444"></p><p>å…·ä½“çš„ç»Ÿä¸€ç»“æ„å¦‚ä¸‹ï¼š</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221130140132209.png" alt="image-20221130140132209" style="zoom:80%;"><blockquote><p>ç›®å½•è¯´æ˜ï¼š </p><ul><li>src/main/java: javaæºä»£ç ç›®å½•</li><li>src/main/resources:  é…ç½®æ–‡ä»¶ä¿¡æ¯</li><li>src/test/java: æµ‹è¯•ä»£ç </li><li>src/test/resources: æµ‹è¯•é…ç½®æ–‡ä»¶ä¿¡æ¯</li></ul></blockquote><p><strong>é¡¹ç›®æ„å»º :</strong> </p><ul><li>mavenæä¾›äº†æ ‡å‡†çš„ã€è·¨å¹³å°(Linuxã€Windowsã€MacOS) çš„è‡ªåŠ¨åŒ–é¡¹ç›®æ„å»ºæ–¹å¼</li></ul><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221130140247524.png" alt="image-20221130140247524" style="zoom:67%;"><p>å¦‚ä¸Šå›¾æ‰€ç¤ºæˆ‘ä»¬å¼€å‘äº†ä¸€å¥—ç³»ç»Ÿï¼Œä»£ç éœ€è¦è¿›è¡Œç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€å‘å¸ƒï¼Œè¿™äº›æ“ä½œå¦‚æœéœ€è¦åå¤è¿›è¡Œå°±æ˜¾å¾—ç‰¹åˆ«éº»çƒ¦ï¼Œè€ŒMavenæä¾›äº†ä¸€å¥—ç®€å•çš„å‘½ä»¤æ¥å®Œæˆé¡¹ç›®æ„å»ºã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221130222907628.png" alt="image-20221130222907628"></p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼š<strong>Mavenæ˜¯ä¸€æ¬¾ç®¡ç†å’Œæ„å»ºjavaé¡¹ç›®çš„å·¥å…·</strong></p><h2 id="02-Mavenæ¦‚è¿°"><a href="#02-Mavenæ¦‚è¿°" class="headerlink" title="02. Mavenæ¦‚è¿°"></a>02. Mavenæ¦‚è¿°</h2><h3 id="2-1-Mavenä»‹ç»"><a href="#2-1-Mavenä»‹ç»" class="headerlink" title="2.1 Mavenä»‹ç»"></a>2.1 Mavenä»‹ç»</h3><p>Apache Mavenæ˜¯ä¸€ä¸ªé¡¹ç›®ç®¡ç†å’Œæ„å»ºå·¥å…·ï¼Œå®ƒåŸºäºé¡¹ç›®å¯¹è±¡æ¨¡å‹(Project Object Model , ç®€ç§°: POM)çš„æ¦‚å¿µï¼Œé€šè¿‡ä¸€å°æ®µæè¿°ä¿¡æ¯æ¥ç®¡ç†é¡¹ç›®çš„æ„å»ºã€æŠ¥å‘Šå’Œæ–‡æ¡£ã€‚</p><p>å®˜ç½‘ï¼š<a href="https://maven.apache.org/">https://maven.apache.org/</a></p><p>Mavençš„ä½œç”¨ï¼š </p><ol><li>æ–¹ä¾¿çš„ä¾èµ–ç®¡ç†</li><li>ç»Ÿä¸€çš„é¡¹ç›®ç»“æ„</li><li>æ ‡å‡†çš„é¡¹ç›®æ„å»ºæµç¨‹</li></ol><h3 id="2-2-Mavenæ¨¡å‹"><a href="#2-2-Mavenæ¨¡å‹" class="headerlink" title="2.2 Mavenæ¨¡å‹"></a>2.2 Mavenæ¨¡å‹</h3><ul><li>é¡¹ç›®å¯¹è±¡æ¨¡å‹ (Project Object Model)</li><li>ä¾èµ–ç®¡ç†æ¨¡å‹(Dependency)</li><li>æ„å»ºç”Ÿå‘½å‘¨æœŸ/é˜¶æ®µ(Build lifecycle &amp; phases)</li></ul><p>1). æ„å»ºç”Ÿå‘½å‘¨æœŸ/é˜¶æ®µ(Build lifecycle &amp; phases)</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221130142100703.png" alt="image-20221130142100703"></p><p>ä»¥ä¸Šå›¾ä¸­ç´«è‰²æ¡†èµ·æ¥çš„éƒ¨åˆ†ï¼Œå°±æ˜¯ç”¨æ¥å®Œæˆæ ‡å‡†åŒ–æ„å»ºæµç¨‹ ã€‚å½“æˆ‘ä»¬éœ€è¦ç¼–è¯‘ï¼ŒMavenæä¾›äº†ä¸€ä¸ªç¼–è¯‘æ’ä»¶ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼›å½“æˆ‘ä»¬éœ€è¦æ‰“åŒ…ï¼ŒMavenå°±æä¾›äº†ä¸€ä¸ªæ‰“åŒ…æ’ä»¶ä¾›æˆ‘ä»¬ä½¿ç”¨ç­‰ã€‚ </p><p>2). é¡¹ç›®å¯¹è±¡æ¨¡å‹ (Project Object Model)</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221130142643255.png" alt="image-20221130142643255"></p><p>ä»¥ä¸Šå›¾ä¸­ç´«è‰²æ¡†èµ·æ¥çš„éƒ¨åˆ†å±äºé¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼Œå°±æ˜¯å°†æˆ‘ä»¬è‡ªå·±çš„é¡¹ç›®æŠ½è±¡æˆä¸€ä¸ªå¯¹è±¡æ¨¡å‹ï¼Œæœ‰è‡ªå·±ä¸“å±çš„åæ ‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºæ˜¯ä¸€ä¸ªMavené¡¹ç›®ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220616094113852.png" alt="image-20220616094113852"></p><blockquote><p>åæ ‡ï¼Œå°±æ˜¯èµ„æº(jaråŒ…)çš„å”¯ä¸€æ ‡è¯†ï¼Œé€šè¿‡åæ ‡å¯ä»¥å®šä½åˆ°æ‰€éœ€èµ„æº(jaråŒ…)ä½ç½®</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221130230134757.png" alt="image-20221130230134757"></p></blockquote><p>3). ä¾èµ–ç®¡ç†æ¨¡å‹(Dependency)</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221130143139644.png" alt="image-20221130143139644"></p><p>ä»¥ä¸Šå›¾ä¸­ç´«è‰²æ¡†èµ·æ¥çš„éƒ¨åˆ†å±äºä¾èµ–ç®¡ç†æ¨¡å‹ï¼Œæ˜¯ä½¿ç”¨åæ ‡æ¥æè¿°å½“å‰é¡¹ç›®ä¾èµ–å“ªäº›ç¬¬ä¸‰æ–¹jaråŒ…</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221130174805973.png" alt="image-20221130174805973"></p><p>ä¹‹å‰æˆ‘ä»¬é¡¹ç›®ä¸­éœ€è¦jaråŒ…æ—¶ï¼Œç›´æ¥å°±æŠŠjaråŒ…å¤åˆ¶åˆ°é¡¹ç›®ä¸‹çš„libç›®å½•ï¼Œè€Œç°åœ¨ä¹¦å†™åœ¨pom.xmlæ–‡ä»¶ä¸­çš„åæ ‡åˆæ˜¯æ€ä¹ˆèƒ½æ‰¾åˆ°æ‰€è¦çš„jaråŒ…æ–‡ä»¶çš„å‘¢ï¼Ÿ</p><blockquote><p>ç­”æ¡ˆï¼šMavenä»“åº“</p></blockquote><h3 id="2-3-Mavenä»“åº“"><a href="#2-3-Mavenä»“åº“" class="headerlink" title="2.3 Mavenä»“åº“"></a>2.3 Mavenä»“åº“</h3><p>ä»“åº“ï¼šç”¨äºå­˜å‚¨èµ„æºï¼Œç®¡ç†å„ç§jaråŒ…</p><blockquote><p>ä»“åº“çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªç›®å½•(æ–‡ä»¶å¤¹)ï¼Œè¿™ä¸ªç›®å½•è¢«ç”¨æ¥å­˜å‚¨å¼€å‘ä¸­æ‰€æœ‰ä¾èµ–(å°±æ˜¯jaråŒ…)å’Œæ’ä»¶</p></blockquote><p>Mavenä»“åº“åˆ†ä¸ºï¼š</p><ul><li>æœ¬åœ°ä»“åº“ï¼šè‡ªå·±è®¡ç®—æœºä¸Šçš„ä¸€ä¸ªç›®å½•(ç”¨æ¥å­˜å‚¨jaråŒ…)</li><li>ä¸­å¤®ä»“åº“ï¼šç”±Mavenå›¢é˜Ÿç»´æŠ¤çš„å…¨çƒå”¯ä¸€çš„ã€‚ä»“åº“åœ°å€ï¼š<a href="https://repo1.maven.org/maven2/">https://repo1.maven.org/maven2/</a></li><li>è¿œç¨‹ä»“åº“(ç§æœ)ï¼šä¸€èˆ¬ç”±å…¬å¸å›¢é˜Ÿæ­å»ºçš„ç§æœ‰ä»“åº“</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220616095633552.png" alt="image-20220616095633552"></p><p>å½“é¡¹ç›®ä¸­ä½¿ç”¨åæ ‡å¼•å…¥å¯¹åº”ä¾èµ–jaråŒ…åï¼Œé¦–å…ˆä¼šæŸ¥æ‰¾æœ¬åœ°ä»“åº“ä¸­æ˜¯å¦æœ‰å¯¹åº”çš„jaråŒ…</p><ul><li><p>å¦‚æœæœ‰ï¼Œåˆ™åœ¨é¡¹ç›®ç›´æ¥å¼•ç”¨</p></li><li><p>å¦‚æœæ²¡æœ‰ï¼Œåˆ™å»ä¸­å¤®ä»“åº“ä¸­ä¸‹è½½å¯¹åº”çš„jaråŒ…åˆ°æœ¬åœ°ä»“åº“</p></li></ul><p>å¦‚æœè¿˜å¯ä»¥æ­å»ºè¿œç¨‹ä»“åº“(ç§æœ)ï¼Œå°†æ¥jaråŒ…çš„æŸ¥æ‰¾é¡ºåºåˆ™å˜ä¸ºï¼š æœ¬åœ°ä»“åº“ â€“&gt; è¿œç¨‹ä»“åº“â€“&gt; ä¸­å¤®ä»“åº“</p><h3 id="2-4-Mavenå®‰è£…"><a href="#2-4-Mavenå®‰è£…" class="headerlink" title="2.4 Mavenå®‰è£…"></a>2.4 Mavenå®‰è£…</h3><p>è®¤è¯†äº†Mavenåï¼Œæˆ‘ä»¬å°±è¦å¼€å§‹ä½¿ç”¨Mavenäº†ï¼Œé‚£ä¹ˆé¦–å…ˆæˆ‘ä»¬è¦è¿›è¡ŒMavençš„ä¸‹è½½ä¸å®‰è£…ã€‚</p><h4 id="2-4-1-ä¸‹è½½"><a href="#2-4-1-ä¸‹è½½" class="headerlink" title="2.4.1 ä¸‹è½½"></a>2.4.1 ä¸‹è½½</h4><p>ä¸‹è½½åœ°å€ï¼š<a href="https://maven.apache.org/download.cgi">https://maven.apache.org/download.cgi</a></p><p>åœ¨æä¾›çš„èµ„æ–™ä¸­ï¼Œå·²ç»æä¾›äº†ä¸‹è½½å¥½çš„å®‰è£…åŒ…ã€‚å¦‚ä¸‹ï¼š </p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220616100211209.png" alt="image-20220616100211209"> </p><h4 id="2-4-2-å®‰è£…æ­¥éª¤"><a href="#2-4-2-å®‰è£…æ­¥éª¤" class="headerlink" title="2.4.2 å®‰è£…æ­¥éª¤"></a>2.4.2 å®‰è£…æ­¥éª¤</h4><p>Mavenå®‰è£…é…ç½®æ­¥éª¤ï¼š</p><ol><li>è§£å‹å®‰è£…</li><li>é…ç½®ä»“åº“</li><li>é…ç½®Mavenç¯å¢ƒå˜é‡</li></ol><p><strong>1ã€è§£å‹ apache-maven-3.6.1-bin.zipï¼ˆè§£å‹å³å®‰è£…ï¼‰</strong></p><blockquote><p>å»ºè®®è§£å‹åˆ°æ²¡æœ‰ä¸­æ–‡ã€ç‰¹æ®Šå­—ç¬¦çš„è·¯å¾„ä¸‹ã€‚å¦‚è¯¾ç¨‹ä¸­è§£å‹åˆ° <code>E:\develop</code> ä¸‹ã€‚</p></blockquote><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1-1669821012006.gif"> </p><p>è§£å‹ç¼©åçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220616100529868-1669794069698.png" alt="image-20220616100529868"> </p><ul><li>binç›®å½• ï¼š å­˜æ”¾çš„æ˜¯å¯æ‰§è¡Œå‘½ä»¤ã€‚ï¼ˆmvn å‘½ä»¤é‡ç‚¹å…³æ³¨ï¼‰</li><li>confç›®å½• ï¼šå­˜æ”¾Mavençš„é…ç½®æ–‡ä»¶ã€‚ï¼ˆsettings.xmlé…ç½®æ–‡ä»¶åæœŸéœ€è¦ä¿®æ”¹ï¼‰</li><li>libç›®å½• ï¼šå­˜æ”¾Mavenä¾èµ–çš„jaråŒ…ã€‚ï¼ˆMavenä¹Ÿæ˜¯ä½¿ç”¨javaå¼€å‘çš„ï¼Œæ‰€ä»¥å®ƒä¹Ÿä¾èµ–å…¶ä»–çš„jaråŒ…ï¼‰</li></ul><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/SETTINGS/1.2.0<span class="token punctuation">"</span></span>          <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>          <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/SETTINGS/1.2.0 https://maven.apache.org/xsd/settings-1.2.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>localRepository</span><span class="token punctuation">&gt;</span></span>D:\AppByMyselfDownload\Work\Maven\apache-maven-3.9.6-bin\apache-maven-3.9.6\mvn_repo  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>localRepository</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginGroups</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- pluginGroup     | Specifies a further group identifier to use for plugin lookup.    &lt;pluginGroup&gt;com.your.plugins&lt;/pluginGroup&gt;    --&gt;</span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginGroups</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>proxies</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>proxies</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servers</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servers</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrors</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>aliyunmaven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>é˜¿é‡Œäº‘å…¬å…±ä»“åº“<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://maven.aliyun.com/repository/public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>maven-default-http-blocker<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>external:http:*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Pseudo repository to mirror external repositories initially using HTTP.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://0.0.0.0/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrors</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>2ã€é…ç½®æœ¬åœ°ä»“åº“</strong></p><p>2.1ã€åœ¨è‡ªå·±è®¡ç®—æœºä¸Šæ–°ä¸€ä¸ªç›®å½•ï¼ˆæœ¬åœ°ä»“åº“ï¼Œç”¨æ¥å­˜å‚¨jaråŒ…ï¼‰</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221130231857537.png" alt="image-20221130231857537"> </p><p>2.2ã€è¿›å…¥åˆ°confç›®å½•ä¸‹ä¿®æ”¹settings.xmlé…ç½®æ–‡ä»¶ </p><p>1). ä½¿ç”¨è¶…çº§è®°äº‹æœ¬è½¯ä»¶ï¼Œæ‰“å¼€settings.xmlæ–‡ä»¶ï¼Œå®šä½åˆ°53è¡Œ</p><p>2). å¤åˆ¶<localrepository>æ ‡ç­¾ï¼Œç²˜è´´åˆ°æ³¨é‡Šçš„å¤–é¢ï¼ˆ55è¡Œï¼‰</localrepository></p><p>3). å¤åˆ¶ä¹‹å‰æ–°å»ºçš„ç”¨æ¥å­˜å‚¨jaråŒ…çš„è·¯å¾„ï¼Œæ›¿æ¢æ‰<localrepository>æ ‡ç­¾ä½“å†…å®¹</localrepository></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2.gif" style="zoom:80%;"><p><strong>3ã€é…ç½®é˜¿é‡Œäº‘ç§æœ</strong></p><p>ç”±äºä¸­å¤®ä»“åº“åœ¨å›½å¤–ï¼Œæ‰€ä»¥ä¸‹è½½jaråŒ…é€Ÿåº¦å¯èƒ½æ¯”è¾ƒæ…¢ï¼Œè€Œé˜¿é‡Œå…¬å¸æä¾›äº†ä¸€ä¸ªè¿œç¨‹ä»“åº“ï¼Œé‡Œé¢åŸºæœ¬ä¹Ÿéƒ½æœ‰å¼€æºé¡¹ç›®çš„jaråŒ…ã€‚</p><p>è¿›å…¥åˆ°confç›®å½•ä¸‹ä¿®æ”¹settings.xmlé…ç½®æ–‡ä»¶ï¼š</p><p>1). ä½¿ç”¨è¶…çº§è®°äº‹æœ¬è½¯ä»¶ï¼Œæ‰“å¼€settings.xmlæ–‡ä»¶ï¼Œå®šä½åˆ°160è¡Œå·¦å³</p><p>2). åœ¨<mirrors>æ ‡ç­¾ä¸‹ä¸ºå…¶æ·»åŠ å­æ ‡ç­¾<mirror>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</mirror></mirrors></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>alimaven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>aliyun maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://maven.aliyun.com/nexus/content/groups/public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/3.gif"></p><p>æ³¨æ„é…ç½®çš„ä½ç½®ï¼Œåœ¨<mirrors> â€¦ </mirrors> ä¸­é—´æ·»åŠ é…ç½®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221130161346565.png" alt="image-20221130161346565"></p><p>==æ³¨:  åªå¯é…ç½®ä¸€ä¸ª<mirror>(å¦ä¸€ä¸ªè¦æ³¨é‡Š!) ï¼Œä¸ç„¶ä¸¤ä¸ªå¯èƒ½å‘ç”Ÿå†²çªï¼Œå¯¼è‡´jaråŒ…æ— æ³•ä¸‹è½½!!!!!!!==</mirror></p><p><strong>4ã€é…ç½®ç¯å¢ƒå˜é‡</strong></p><blockquote><p>Mavenç¯å¢ƒå˜é‡çš„é…ç½®ç±»ä¼¼äºJDKç¯å¢ƒå˜é‡é…ç½®ä¸€æ ·</p></blockquote><p>1). åœ¨ç³»ç»Ÿå˜é‡å¤„æ–°å»ºä¸€ä¸ªå˜é‡MAVEN_HOME</p><ul><li>MAVEN_HOMEç¯å¢ƒå˜é‡çš„å€¼ï¼Œè®¾ç½®ä¸ºmavençš„è§£å‹å®‰è£…ç›®å½•</li></ul><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220616102344350.png" style="zoom:80%;"><p>2). åœ¨Pathä¸­è¿›è¡Œé…ç½®</p><ul><li>PATHç¯å¢ƒå˜é‡çš„å€¼ï¼Œè®¾ç½®ä¸ºï¼š%MAVEN_HOME%\bin</li></ul><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220616102435856.png" style="zoom:80%;"> <p>3). æ‰“å¼€DOSå‘½ä»¤æç¤ºç¬¦è¿›è¡ŒéªŒè¯ï¼Œå‡ºç°å¦‚å›¾æ‰€ç¤ºè¡¨ç¤ºå®‰è£…æˆåŠŸ</p><pre class="line-numbers language-none"><code class="language-none">mvn -v<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220616102554143.png" alt="image-20220616102554143"> </p><h2 id="03-IDEAé›†æˆMaven"><a href="#03-IDEAé›†æˆMaven" class="headerlink" title="03. IDEAé›†æˆMaven"></a>03. IDEAé›†æˆMaven</h2><p>æˆ‘ä»¬è¦æƒ³åœ¨IDEAä¸­ä½¿ç”¨Mavenè¿›è¡Œé¡¹ç›®æ„å»ºï¼Œå°±éœ€è¦åœ¨IDEAä¸­é›†æˆMaven</p><h3 id="3-1-é…ç½®Mavenç¯å¢ƒ"><a href="#3-1-é…ç½®Mavenç¯å¢ƒ" class="headerlink" title="3.1 é…ç½®Mavenç¯å¢ƒ"></a>3.1 é…ç½®Mavenç¯å¢ƒ</h3><h4 id="3-1-1-å½“å‰å·¥ç¨‹è®¾ç½®"><a href="#3-1-1-å½“å‰å·¥ç¨‹è®¾ç½®" class="headerlink" title="3.1.1 å½“å‰å·¥ç¨‹è®¾ç½®"></a>3.1.1 å½“å‰å·¥ç¨‹è®¾ç½®</h4><p>1ã€é€‰æ‹© IDEAä¸­ File  =&gt;  Settings  =&gt;  Build,Execution,Deployment  =&gt;  Build Tools  =&gt;  Maven</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220616103219646.png" alt="image-20220616103219646"> </p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221130234731629.png" alt="image-20221130234731629"></p><p>2ã€è®¾ç½®IDEAä½¿ç”¨æœ¬åœ°å®‰è£…çš„Mavenï¼Œå¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶åŠæœ¬åœ°ä»“åº“è·¯å¾„</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220616103302386.png"></p><blockquote><p>Maven home path ï¼šæŒ‡å®šå½“å‰Mavençš„å®‰è£…ç›®å½•</p><p>User settings file ï¼šæŒ‡å®šå½“å‰Mavençš„settings.xmlé…ç½®æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„</p><p>Local repository ï¼šæŒ‡å®šMavençš„æœ¬åœ°ä»“åº“çš„è·¯å¾„ (å¦‚æœæŒ‡å®šäº†settings.xml, è¿™ä¸ªç›®å½•ä¼šè‡ªåŠ¨è¯»å–å‡ºæ¥, å¯ä»¥ä¸ç”¨æ‰‹åŠ¨æŒ‡å®š)</p></blockquote><p>3ã€é…ç½®å·¥ç¨‹çš„ç¼–è¯‘ç‰ˆæœ¬ä¸º11</p><ul><li>Mavené»˜è®¤ä½¿ç”¨çš„ç¼–è¯‘ç‰ˆæœ¬ä¸º5ï¼ˆç‰ˆæœ¬è¿‡ä½ï¼‰</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201093737128.png" alt="image-20221201093737128"> </p><p>ä¸Šè¿°é…ç½®çš„mavenç¯å¢ƒï¼Œåªæ˜¯é’ˆå¯¹äºå½“å‰å·¥ç¨‹çš„ï¼Œå¦‚æœæˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªprojectï¼Œåˆæ¢å¤æˆé»˜è®¤çš„é…ç½®äº†ã€‚ è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ æˆ‘ä»¬å°±éœ€è¦é…ç½®å…¨å±€çš„mavenç¯å¢ƒã€‚</p><h4 id="3-1-2-å…¨å±€è®¾ç½®"><a href="#3-1-2-å…¨å±€è®¾ç½®" class="headerlink" title="3.1.2 å…¨å±€è®¾ç½®"></a>3.1.2 å…¨å±€è®¾ç½®</h4><p>1ã€è¿›å…¥åˆ°IDEAæ¬¢è¿é¡µé¢</p><ul><li>é€‰æ‹© IDEAä¸­ File  =&gt;  close project</li></ul><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/4.gif" style="zoom:80%;"><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220616104338612.png" style="zoom:80%;"><p>2ã€æ‰“å¼€ All settings , é€‰æ‹© Build,Execution,Deployment  =&gt;  Build Tools  =&gt;  Maven</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220616104517726.png" style="zoom:80%;"><p>3ã€é…ç½®å·¥ç¨‹çš„ç¼–è¯‘ç‰ˆæœ¬ä¸º11</p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281239456.png" alt="image-20221201093737128" style="zoom:80%;"><p>è¿™é‡Œæ‰€è®¾ç½®çš„mavençš„ç¯å¢ƒä¿¡æ¯ï¼Œå¹¶æœªæŒ‡å®šä»»ä½•ä¸€ä¸ªprojectï¼Œæ­¤æ—¶è®¾ç½®çš„ä¿¡æ¯å°±å±äºå…¨å±€é…ç½®ä¿¡æ¯ã€‚ ä»¥åï¼Œæˆ‘ä»¬å†åˆ›å»ºprojectï¼Œé»˜è®¤å°±æ˜¯ä½¿ç”¨æˆ‘ä»¬å…¨å±€é…ç½®çš„ä¿¡æ¯ã€‚</p><h3 id="3-2-Mavené¡¹ç›®"><a href="#3-2-Mavené¡¹ç›®" class="headerlink" title="3.2 Mavené¡¹ç›®"></a>3.2 Mavené¡¹ç›®</h3><h4 id="3-2-1-åˆ›å»ºMavené¡¹ç›®"><a href="#3-2-1-åˆ›å»ºMavené¡¹ç›®" class="headerlink" title="3.2.1 åˆ›å»ºMavené¡¹ç›®"></a>3.2.1 åˆ›å»ºMavené¡¹ç›®</h4><p>1ã€åˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›® </p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201095621738.png" alt="image-20221201095621738" style="zoom:80%;"><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201095600057.png" alt="image-20221201095600057" style="zoom:80%;"><p>2ã€åˆ›å»ºæ¨¡å—ï¼Œé€‰æ‹©Mavenï¼Œç‚¹å‡»Next</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201095831320.png" alt="image-20221201095831320" style="zoom:80%;"><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201100011799.png" alt="image-20221201100011799" style="zoom:80%;"><p>3ã€å¡«å†™æ¨¡å—åç§°ï¼Œåæ ‡ä¿¡æ¯ï¼Œç‚¹å‡»finishï¼Œåˆ›å»ºå®Œæˆ</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201100502234.png" alt="image-20221201100502234" style="zoom:80%;"> <p>4ã€åœ¨Mavenå·¥ç¨‹ä¸‹ï¼Œåˆ›å»ºHelloWorldç±»</p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201101603397.png" alt="image-20221201101603397" style="zoom:80%;"><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201101643427.png" alt="image-20221201101643427" style="zoom:80%;"><blockquote><ul><li><p>Mavené¡¹ç›®çš„ç›®å½•ç»“æ„:</p><p>maven-project01<br>|â€”  src  (æºä»£ç ç›®å½•å’Œæµ‹è¯•ä»£ç ç›®å½•)<br>        |â€”  main (æºä»£ç ç›®å½•)<br>                   |â€” java (æºä»£ç javaæ–‡ä»¶ç›®å½•)<br>                   |â€” resources (æºä»£ç é…ç½®æ–‡ä»¶ç›®å½•)<br>        |â€”  test (æµ‹è¯•ä»£ç ç›®å½•)<br>                   |â€” java (æµ‹è¯•ä»£ç javaç›®å½•)<br>                   |â€” resources (æµ‹è¯•ä»£ç é…ç½®æ–‡ä»¶ç›®å½•)<br>|â€” target (ç¼–è¯‘ã€æ‰“åŒ…ç”Ÿæˆæ–‡ä»¶å­˜æ”¾ç›®å½•)</p></li></ul></blockquote><p>5ã€ç¼–å†™ HelloWorldï¼Œå¹¶è¿è¡Œ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello Maven ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-2-2-POMé…ç½®è¯¦è§£"><a href="#3-2-2-POMé…ç½®è¯¦è§£" class="headerlink" title="3.2.2 POMé…ç½®è¯¦è§£"></a>3.2.2 POMé…ç½®è¯¦è§£</h4><p>POM (Project Object Model) ï¼šæŒ‡çš„æ˜¯é¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼Œç”¨æ¥æè¿°å½“å‰çš„mavené¡¹ç›®ã€‚</p><ul><li>ä½¿ç”¨pom.xmlæ–‡ä»¶æ¥å®ç°</li></ul><p>pom.xmlæ–‡ä»¶ï¼š</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- POMæ¨¡å‹ç‰ˆæœ¬ --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- å½“å‰é¡¹ç›®åæ ‡ --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven_project1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- æ‰“åŒ…æ–¹å¼ --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>pomæ–‡ä»¶è¯¦è§£ï¼š</p><ul><li><project> ï¼špomæ–‡ä»¶çš„æ ¹æ ‡ç­¾ï¼Œè¡¨ç¤ºå½“å‰mavené¡¹ç›®</project></li><li><modelversion> ï¼šå£°æ˜é¡¹ç›®æè¿°éµå¾ªå“ªä¸€ä¸ªPOMæ¨¡å‹ç‰ˆæœ¬<ul><li>è™½ç„¶æ¨¡å‹æœ¬èº«çš„ç‰ˆæœ¬å¾ˆå°‘æ”¹å˜ï¼Œä½†å®ƒä»ç„¶æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ç›®å‰POMæ¨¡å‹ç‰ˆæœ¬æ˜¯4.0.0</li></ul></modelversion></li><li>åæ ‡ ï¼š<groupid>ã€<artifactid>ã€<version><ul><li>å®šä½é¡¹ç›®åœ¨æœ¬åœ°ä»“åº“ä¸­çš„ä½ç½®ï¼Œç”±ä»¥ä¸Šä¸‰ä¸ªæ ‡ç­¾ç»„æˆä¸€ä¸ªåæ ‡</li></ul></version></artifactid></groupid></li><li><packaging> ï¼šmavené¡¹ç›®çš„æ‰“åŒ…æ–¹å¼ï¼Œé€šå¸¸è®¾ç½®ä¸ºjaræˆ–warï¼ˆé»˜è®¤å€¼ï¼šjarï¼‰</packaging></li></ul><h4 id="3-2-3-Mavenåæ ‡è¯¦è§£"><a href="#3-2-3-Mavenåæ ‡è¯¦è§£" class="headerlink" title="3.2.3 Mavenåæ ‡è¯¦è§£"></a>3.2.3 Mavenåæ ‡è¯¦è§£</h4><p>ä»€ä¹ˆæ˜¯åæ ‡ï¼Ÿ</p><ul><li>Mavenä¸­çš„åæ ‡æ˜¯==èµ„æºçš„å”¯ä¸€æ ‡è¯†== , é€šè¿‡è¯¥åæ ‡å¯ä»¥å”¯ä¸€å®šä½èµ„æºä½ç½®</li><li>ä½¿ç”¨åæ ‡æ¥å®šä¹‰é¡¹ç›®æˆ–å¼•å…¥é¡¹ç›®ä¸­éœ€è¦çš„ä¾èµ–</li></ul><p>Mavenåæ ‡ä¸»è¦ç»„æˆ</p><ul><li>groupIdï¼šå®šä¹‰å½“å‰Mavené¡¹ç›®éš¶å±ç»„ç»‡åç§°ï¼ˆé€šå¸¸æ˜¯åŸŸååå†™ï¼Œä¾‹å¦‚ï¼šcom.itheimaï¼‰</li><li>artifactIdï¼šå®šä¹‰å½“å‰Mavené¡¹ç›®åç§°ï¼ˆé€šå¸¸æ˜¯æ¨¡å—åç§°ï¼Œä¾‹å¦‚ order-serviceã€goods-serviceï¼‰</li><li>versionï¼šå®šä¹‰å½“å‰é¡¹ç›®ç‰ˆæœ¬å·</li></ul><p>å¦‚ä¸‹å›¾å°±æ˜¯ä½¿ç”¨åæ ‡è¡¨ç¤ºä¸€ä¸ªé¡¹ç›®ï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220616111031057.png" alt="image-20220616111031057"> </p><blockquote><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>ä¸Šé¢æ‰€è¯´çš„èµ„æºå¯ä»¥æ˜¯æ’ä»¶ã€ä¾èµ–ã€å½“å‰é¡¹ç›®ã€‚</li><li>æˆ‘ä»¬çš„é¡¹ç›®å¦‚æœè¢«å…¶ä»–çš„é¡¹ç›®ä¾èµ–æ—¶ï¼Œä¹Ÿæ˜¯éœ€è¦åæ ‡æ¥å¼•å…¥çš„ã€‚</li></ul></blockquote><h3 id="3-3-å¯¼å…¥Mavené¡¹ç›®"><a href="#3-3-å¯¼å…¥Mavené¡¹ç›®" class="headerlink" title="3.3 å¯¼å…¥Mavené¡¹ç›®"></a>3.3 å¯¼å…¥Mavené¡¹ç›®</h3><ul><li><strong>æ–¹å¼1ï¼šä½¿ç”¨Mavené¢æ¿ï¼Œå¿«é€Ÿå¯¼å…¥é¡¹ç›®</strong></li></ul><p>æ‰“å¼€IDEAï¼Œé€‰æ‹©å³ä¾§Mavené¢æ¿ï¼Œç‚¹å‡» + å·ï¼Œé€‰ä¸­å¯¹åº”é¡¹ç›®çš„pom.xmlæ–‡ä»¶ï¼ŒåŒå‡»å³å¯</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201104320521.png" alt="image-20221201104320521"></p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20221201104906754.png" alt="image-20221201104906754" style="zoom:80%;"> <blockquote><p>è¯´æ˜ï¼šå¦‚æœæ²¡æœ‰Mavené¢æ¿ï¼Œé€‰æ‹© View  =&gt;  Appearance  =&gt;  Tool Window Bars</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20220616111937679.png" alt="image-20220616111937679"> </p></blockquote><ul><li><strong>æ–¹å¼2ï¼šä½¿ç”¨ideaå¯¼å…¥æ¨¡å—é¡¹ç›®</strong></li></ul><p>File  =&gt;  Project Structure  =&gt;  Modules  =&gt;  +  =&gt;  Import Module</p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281241922.png" style="zoom:80%;"><p>æ‰¾åˆ°è¦å¯¼å…¥å·¥ç¨‹çš„pom.xml</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281241363.png" alt="image-20221201105532909"></p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281228351.png" alt="image-20221201105845872" style="zoom:80%;"><h2 id="04-ä¾èµ–ç®¡ç†"><a href="#04-ä¾èµ–ç®¡ç†" class="headerlink" title="04. ä¾èµ–ç®¡ç†"></a>04. ä¾èµ–ç®¡ç†</h2><h3 id="4-1-ä¾èµ–é…ç½®"><a href="#4-1-ä¾èµ–é…ç½®" class="headerlink" title="4.1 ä¾èµ–é…ç½®"></a>4.1 ä¾èµ–é…ç½®</h3><p>ä¾èµ–ï¼šæŒ‡å½“å‰é¡¹ç›®è¿è¡Œæ‰€éœ€è¦çš„jaråŒ…ã€‚ä¸€ä¸ªé¡¹ç›®ä¸­å¯ä»¥å¼•å…¥å¤šä¸ªä¾èµ–ï¼š</p><p>ä¾‹å¦‚ï¼šåœ¨å½“å‰å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°logbackæ¥è®°å½•æ—¥å¿—ï¼Œæ­¤æ—¶å°±å¯ä»¥åœ¨mavenå·¥ç¨‹çš„pom.xmlæ–‡ä»¶ä¸­ï¼Œå¼•å…¥logbackçš„ä¾èµ–ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>åœ¨pom.xmlä¸­ç¼–å†™<dependencies>æ ‡ç­¾</dependencies></p></li><li><p>åœ¨<dependencies>æ ‡ç­¾ä¸­ä½¿ç”¨<dependency>å¼•å…¥åæ ‡</dependency></dependencies></p></li><li><p>å®šä¹‰åæ ‡çš„ groupIdã€artifactIdã€version</p></li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- ç¬¬1ä¸ªä¾èµ– : logback --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-classic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- ç¬¬2ä¸ªä¾èµ– : junit --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li>ç‚¹å‡»åˆ·æ–°æŒ‰é’®ï¼Œå¼•å…¥æœ€æ–°åŠ å…¥çš„åæ ‡<ul><li>åˆ·æ–°ä¾èµ–ï¼šä¿è¯æ¯ä¸€æ¬¡å¼•å…¥æ–°çš„ä¾èµ–ï¼Œæˆ–è€…ä¿®æ”¹ç°æœ‰çš„ä¾èµ–é…ç½®ï¼Œéƒ½å¯ä»¥åŠ å…¥æœ€æ–°çš„åæ ‡</li></ul></li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281228421.png" alt="image-20221130184402805">  </p><blockquote><p>æ³¨æ„äº‹é¡¹ï¼š</p><ol><li>å¦‚æœå¼•å…¥çš„ä¾èµ–ï¼Œåœ¨æœ¬åœ°ä»“åº“ä¸­ä¸å­˜åœ¨ï¼Œå°†ä¼šè¿æ¥è¿œç¨‹ä»“åº“ / ä¸­å¤®ä»“åº“ï¼Œç„¶åä¸‹è½½ä¾èµ–ï¼ˆè¿™ä¸ªè¿‡ç¨‹ä¼šæ¯”è¾ƒè€—æ—¶ï¼Œè€å¿ƒç­‰å¾…ï¼‰</li><li>å¦‚æœä¸çŸ¥é“ä¾èµ–çš„åæ ‡ä¿¡æ¯ï¼Œå¯ä»¥åˆ°mvnçš„ä¸­å¤®ä»“åº“ï¼ˆ<a href="https://mvnrepository.com/%EF%BC%89%E4%B8%AD%E6%90%9C%E7%B4%A2">https://mvnrepository.com/ï¼‰ä¸­æœç´¢</a></li></ol></blockquote><p><strong>æ·»åŠ ä¾èµ–çš„å‡ ç§æ–¹å¼ï¼š</strong></p><ol><li><p>åˆ©ç”¨ä¸­å¤®ä»“åº“æœç´¢çš„ä¾èµ–åæ ‡</p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281228062.gif" style="zoom:80%;"></li><li><p>åˆ©ç”¨IDEAå·¥å…·æœç´¢ä¾èµ–</p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281228539.gif" style="zoom:80%;"></li><li><p>ç†Ÿç»ƒä¸Šæ‰‹mavenåï¼Œå¿«é€Ÿå¯¼å…¥ä¾èµ–</p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281228987.gif" style="zoom:80%;"></li></ol><h3 id="4-2-ä¾èµ–ä¼ é€’"><a href="#4-2-ä¾èµ–ä¼ é€’" class="headerlink" title="4.2 ä¾èµ–ä¼ é€’"></a>4.2 ä¾èµ–ä¼ é€’</h3><h4 id="4-2-1-ä¾èµ–å…·æœ‰ä¼ é€’æ€§"><a href="#4-2-1-ä¾èµ–å…·æœ‰ä¼ é€’æ€§" class="headerlink" title="4.2.1 ä¾èµ–å…·æœ‰ä¼ é€’æ€§"></a>4.2.1 ä¾èµ–å…·æœ‰ä¼ é€’æ€§</h4><p>æ—©æœŸæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨mavenæ—¶ï¼Œå‘é¡¹ç›®ä¸­æ·»åŠ ä¾èµ–çš„jaråŒ…ï¼Œéœ€è¦æŠŠæ‰€æœ‰çš„jaråŒ…éƒ½å¤åˆ¶åˆ°é¡¹ç›®å·¥ç¨‹ä¸‹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œéœ€è¦logback-classicæ—¶ï¼Œç”±äºlogback-classicåˆä¾èµ–äº†logback-coreå’Œslf4jï¼Œæ‰€ä»¥å¿…é¡»æŠŠè¿™3ä¸ªjaråŒ…å…¨éƒ¨å¤åˆ¶åˆ°é¡¹ç›®å·¥ç¨‹ä¸‹</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281241841.png" alt="image-20221201120514644"></p><p>æˆ‘ä»¬ç°åœ¨ä½¿ç”¨äº†mavenï¼Œå½“é¡¹ç›®ä¸­éœ€è¦ä½¿ç”¨logback-classicæ—¶ï¼Œåªéœ€è¦åœ¨pom.xmlé…ç½®æ–‡ä»¶ä¸­ï¼Œæ·»åŠ logback-classicçš„ä¾èµ–åæ ‡å³å¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281242674.png" alt="image-20221201113659400"></p><p>åœ¨pom.xmlæ–‡ä»¶ä¸­åªæ·»åŠ äº†logback-classicä¾èµ–ï¼Œä½†ç”±äºmavençš„ä¾èµ–å…·æœ‰ä¼ é€’æ€§ï¼Œæ‰€ä»¥ä¼šè‡ªåŠ¨æŠŠæ‰€ä¾èµ–çš„å…¶ä»–jaråŒ…ä¹Ÿä¸€èµ·å¯¼å…¥ã€‚</p><p>ä¾èµ–ä¼ é€’å¯ä»¥åˆ†ä¸ºï¼š</p><ol><li><p>ç›´æ¥ä¾èµ–ï¼šåœ¨å½“å‰é¡¹ç›®ä¸­é€šè¿‡ä¾èµ–é…ç½®å»ºç«‹çš„ä¾èµ–å…³ç³»</p></li><li><p>é—´æ¥ä¾èµ–ï¼šè¢«ä¾èµ–çš„èµ„æºå¦‚æœä¾èµ–å…¶ä»–èµ„æºï¼Œå½“å‰é¡¹ç›®é—´æ¥ä¾èµ–å…¶ä»–èµ„æº</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281242995.png" alt="image-20220616115445812"> </p><p>æ¯”å¦‚ä»¥ä¸Šå›¾ä¸­ï¼š</p><ul><li>projectAä¾èµ–äº†projectBã€‚å¯¹äºprojectA æ¥è¯´ï¼ŒprojectB å°±æ˜¯ç›´æ¥ä¾èµ–ã€‚</li><li>è€ŒprojectBä¾èµ–äº†projectCåŠå…¶ä»–jaråŒ…ã€‚ é‚£ä¹ˆæ­¤æ—¶ï¼Œåœ¨projectAä¸­ä¹Ÿä¼šå°†projectCçš„ä¾èµ–ä¼ é€’ä¸‹æ¥ã€‚å¯¹äºprojectA æ¥è¯´ï¼ŒprojectCå°±æ˜¯é—´æ¥ä¾èµ–ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281242362.png" alt="image-20221201115801806"></p><h4 id="4-2-2-æ’é™¤ä¾èµ–"><a href="#4-2-2-æ’é™¤ä¾èµ–" class="headerlink" title="4.2.2 æ’é™¤ä¾èµ–"></a>4.2.2 æ’é™¤ä¾èµ–</h4><p>é—®é¢˜ï¼šä¹‹å‰æˆ‘ä»¬è®²äº†ä¾èµ–å…·æœ‰ä¼ é€’æ€§ã€‚é‚£ä¹ˆAä¾èµ–Bï¼ŒBä¾èµ–Cï¼Œå¦‚æœAä¸æƒ³å°†Cä¾èµ–è¿›æ¥ï¼Œæ˜¯å¦å¯ä»¥åšåˆ°ï¼Ÿ </p><p>ç­”æ¡ˆï¼šåœ¨mavené¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ’é™¤ä¾èµ–æ¥å®ç°ã€‚</p><p>ä»€ä¹ˆæ˜¯æ’é™¤ä¾èµ–ï¼Ÿ</p><ul><li>æ’é™¤ä¾èµ–ï¼šæŒ‡ä¸»åŠ¨æ–­å¼€ä¾èµ–çš„èµ„æºã€‚ï¼ˆè¢«æ’é™¤çš„èµ„æºæ— éœ€æŒ‡å®šç‰ˆæœ¬ï¼‰</li></ul><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-projectB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>       <span class="token comment">&lt;!--æ’é™¤ä¾èµ–, ä¸»åŠ¨æ–­å¼€ä¾èµ–çš„èµ„æº--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¾èµ–æ’é™¤ç¤ºä¾‹ï¼š</p><ul><li>maven-projectAä¾èµ–äº†maven-projectBï¼Œmaven-projectBä¾èµ–äº†Junitã€‚åŸºäºä¾èµ–çš„ä¼ é€’æ€§ï¼Œæ‰€ä»¥maven-projectAä¹Ÿä¾èµ–äº†Junit</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281242942.png" alt="image-20221201141929240"></p><ul><li>ä½¿ç”¨æ’é™¤ä¾èµ–å</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281242510.png" alt="image-20221201142501556"></p><h3 id="4-3-ä¾èµ–èŒƒå›´"><a href="#4-3-ä¾èµ–èŒƒå›´" class="headerlink" title="4.3 ä¾èµ–èŒƒå›´"></a>4.3 ä¾èµ–èŒƒå›´</h3><p>åœ¨é¡¹ç›®ä¸­å¯¼å…¥ä¾èµ–çš„jaråŒ…åï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281242948.png" alt="image-20221201135142706"></p><p>å¦‚æœå¸Œæœ›é™åˆ¶ä¾èµ–çš„ä½¿ç”¨èŒƒå›´ï¼Œå¯ä»¥é€šè¿‡<scope>æ ‡ç­¾è®¾ç½®å…¶ä½œç”¨èŒƒå›´ã€‚</scope></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281242449.png" alt="image-20220616123806894"> </p><p>ä½œç”¨èŒƒå›´ï¼š</p><ol><li><p>ä¸»ç¨‹åºèŒƒå›´æœ‰æ•ˆï¼ˆmainæ–‡ä»¶å¤¹èŒƒå›´å†…ï¼‰</p></li><li><p>æµ‹è¯•ç¨‹åºèŒƒå›´æœ‰æ•ˆï¼ˆtestæ–‡ä»¶å¤¹èŒƒå›´å†…ï¼‰</p></li><li><p>æ˜¯å¦å‚ä¸æ‰“åŒ…è¿è¡Œï¼ˆpackageæŒ‡ä»¤èŒƒå›´å†…ï¼‰</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281242629.png" alt="image-20221201140140947"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç»™junitä¾èµ–é€šè¿‡scopeæ ‡ç­¾æŒ‡å®šä¾èµ–çš„ä½œç”¨èŒƒå›´ã€‚ é‚£ä¹ˆè¿™ä¸ªä¾èµ–å°±åªèƒ½ä½œç”¨åœ¨æµ‹è¯•ç¯å¢ƒï¼Œå…¶ä»–ç¯å¢ƒä¸‹ä¸èƒ½ä½¿ç”¨ã€‚</p><p>scopeæ ‡ç­¾çš„å–å€¼èŒƒå›´ï¼š</p><table><thead><tr><th><strong>scope</strong>å€¼</th><th><strong>ä¸»ç¨‹åº</strong></th><th><strong>æµ‹è¯•ç¨‹åº</strong></th><th><strong>æ‰“åŒ…ï¼ˆè¿è¡Œï¼‰</strong></th><th><strong>èŒƒä¾‹</strong></th></tr></thead><tbody><tr><td>compileï¼ˆé»˜è®¤ï¼‰</td><td>Y</td><td>Y</td><td>Y</td><td>log4j</td></tr><tr><td>test</td><td>-</td><td>Y</td><td>-</td><td>junit</td></tr><tr><td>provided</td><td>Y</td><td>Y</td><td>-</td><td>servlet-api</td></tr><tr><td>runtime</td><td>-</td><td>Y</td><td>Y</td><td>jdbcé©±åŠ¨</td></tr></tbody></table><h3 id="4-4-ç”Ÿå‘½å‘¨æœŸ"><a href="#4-4-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="4.4 ç”Ÿå‘½å‘¨æœŸ"></a>4.4 ç”Ÿå‘½å‘¨æœŸ</h3><h4 id="4-4-1-ä»‹ç»"><a href="#4-4-1-ä»‹ç»" class="headerlink" title="4.4.1 ä»‹ç»"></a>4.4.1 ä»‹ç»</h4><p>Mavençš„ç”Ÿå‘½å‘¨æœŸå°±æ˜¯ä¸ºäº†å¯¹æ‰€æœ‰çš„æ„å»ºè¿‡ç¨‹è¿›è¡ŒæŠ½è±¡å’Œç»Ÿä¸€ã€‚ æè¿°äº†ä¸€æ¬¡é¡¹ç›®æ„å»ºï¼Œç»å†å“ªäº›é˜¶æ®µã€‚</p><p>åœ¨Mavenå‡ºç°ä¹‹å‰ï¼Œé¡¹ç›®æ„å»ºçš„ç”Ÿå‘½å‘¨æœŸå°±å·²ç»å­˜åœ¨ï¼Œè½¯ä»¶å¼€å‘äººå‘˜æ¯å¤©éƒ½åœ¨å¯¹é¡¹ç›®è¿›è¡Œæ¸…ç†ï¼Œç¼–è¯‘ï¼Œæµ‹è¯•åŠéƒ¨ç½²ã€‚è™½ç„¶å¤§å®¶éƒ½åœ¨ä¸åœåœ°åšæ„å»ºå·¥ä½œï¼Œä½†å…¬å¸å’Œå…¬å¸é—´ã€é¡¹ç›®å’Œé¡¹ç›®é—´ï¼Œå¾€å¾€ä½¿ç”¨ä¸åŒçš„æ–¹å¼åšç±»ä¼¼çš„å·¥ä½œã€‚</p><p>Mavenä»å¤§é‡é¡¹ç›®å’Œæ„å»ºå·¥å…·ä¸­å­¦ä¹ å’Œåæ€ï¼Œç„¶åæ€»ç»“äº†ä¸€å¥—é«˜åº¦å®Œç¾çš„ï¼Œæ˜“æ‰©å±•çš„é¡¹ç›®æ„å»ºç”Ÿå‘½å‘¨æœŸã€‚è¿™ä¸ªç”Ÿå‘½å‘¨æœŸåŒ…å«äº†é¡¹ç›®çš„æ¸…ç†ï¼Œåˆå§‹åŒ–ï¼Œç¼–è¯‘ï¼Œæµ‹è¯•ï¼Œæ‰“åŒ…ï¼Œé›†æˆæµ‹è¯•ï¼ŒéªŒè¯ï¼Œéƒ¨ç½²å’Œç«™ç‚¹ç”Ÿæˆç­‰å‡ ä¹æ‰€æœ‰æ„å»ºæ­¥éª¤ã€‚</p><p>Mavenå¯¹é¡¹ç›®æ„å»ºçš„ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†ä¸º3å¥—ï¼ˆç›¸äº’ç‹¬ç«‹ï¼‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281242100.png"></p><ul><li><p>cleanï¼šæ¸…ç†å·¥ä½œã€‚</p></li><li><p>defaultï¼šæ ¸å¿ƒå·¥ä½œã€‚å¦‚ï¼šç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€å®‰è£…ã€éƒ¨ç½²ç­‰ã€‚</p></li><li><p>siteï¼šç”ŸæˆæŠ¥å‘Šã€å‘å¸ƒç«™ç‚¹ç­‰ã€‚</p></li></ul><p>ä¸‰å¥—ç”Ÿå‘½å‘¨æœŸåˆåŒ…å«å“ªäº›å…·ä½“çš„é˜¶æ®µå‘¢, æˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™å¹…å›¾:</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281242719.png" alt="image-20220616124348972"> </p><p>æˆ‘ä»¬çœ‹åˆ°è¿™ä¸‰å¥—ç”Ÿå‘½å‘¨æœŸï¼Œé‡Œé¢æœ‰å¾ˆå¤šå¾ˆå¤šçš„é˜¶æ®µï¼Œè¿™ä¹ˆå¤šç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼Œå…¶å®æˆ‘ä»¬å¸¸ç”¨çš„å¹¶ä¸å¤šï¼Œä¸»è¦å…³æ³¨ä»¥ä¸‹å‡ ä¸ªï¼š</p><p>â€¢ cleanï¼šç§»é™¤ä¸Šä¸€æ¬¡æ„å»ºç”Ÿæˆçš„æ–‡ä»¶</p><p>â€¢ compileï¼šç¼–è¯‘é¡¹ç›®æºä»£ç </p><p>â€¢ testï¼šä½¿ç”¨åˆé€‚çš„å•å…ƒæµ‹è¯•æ¡†æ¶è¿è¡Œæµ‹è¯•(junit)</p><p>â€¢ packageï¼šå°†ç¼–è¯‘åçš„æ–‡ä»¶æ‰“åŒ…ï¼Œå¦‚ï¼šjarã€warç­‰</p><p>â€¢ installï¼šå®‰è£…é¡¹ç›®åˆ°æœ¬åœ°ä»“åº“</p><p>Mavençš„ç”Ÿå‘½å‘¨æœŸæ˜¯æŠ½è±¡çš„ï¼Œè¿™æ„å‘³ç€ç”Ÿå‘½å‘¨æœŸæœ¬èº«ä¸åšä»»ä½•å®é™…å·¥ä½œã€‚<strong>åœ¨Mavençš„è®¾è®¡ä¸­ï¼Œå®é™…ä»»åŠ¡ï¼ˆå¦‚æºä»£ç ç¼–è¯‘ï¼‰éƒ½äº¤ç”±æ’ä»¶æ¥å®Œæˆã€‚</strong></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281243187.png" alt="image-20221130142100703"></p><p>IDEAå·¥å…·ä¸ºäº†æ–¹ä¾¿ç¨‹åºå‘˜ä½¿ç”¨mavenç”Ÿå‘½å‘¨æœŸï¼Œåœ¨å³ä¾§çš„mavenå·¥å…·æ ä¸­ï¼Œå·²ç»™å‡ºå¿«é€Ÿè®¿é—®é€šé“</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281243898.png" alt="image-20221201151340340"></p><p>ç”Ÿå‘½å‘¨æœŸçš„é¡ºåºæ˜¯ï¼šclean â€“&gt; validate â€“&gt; compile â€“&gt; test â€“&gt; package â€“&gt; verify â€“&gt; install â€“&gt; site â€“&gt; deploy </p><p>æˆ‘ä»¬éœ€è¦å…³æ³¨çš„å°±æ˜¯ï¼šclean â€“&gt;  compile â€“&gt; test â€“&gt; package  â€“&gt; install </p><blockquote><p>è¯´æ˜ï¼šåœ¨åŒä¸€å¥—ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œåé¢çš„ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œå‰é¢çš„ç”Ÿå‘½å‘¨æœŸéƒ½ä¼šæ‰§è¡Œã€‚</p></blockquote><blockquote><p> æ€è€ƒï¼šå½“è¿è¡Œpackageç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œcleanã€compileç”Ÿå‘½å‘¨æœŸä¼šä¸ä¼šè¿è¡Œï¼Ÿ</p><p> â€‹cleanä¸ä¼šè¿è¡Œï¼Œcompileä¼šè¿è¡Œã€‚  å› ä¸ºcompileä¸packageå±äºåŒä¸€å¥—ç”Ÿå‘½å‘¨æœŸï¼Œè€Œcleanä¸packageä¸å±äºåŒä¸€å¥—ç”Ÿå‘½å‘¨æœŸã€‚</p></blockquote><h4 id="4-4-2-æ‰§è¡Œ"><a href="#4-4-2-æ‰§è¡Œ" class="headerlink" title="4.4.2 æ‰§è¡Œ"></a>4.4.2 æ‰§è¡Œ</h4><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå½“æˆ‘ä»¬è¦æ‰§è¡ŒæŒ‡å®šçš„ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œæœ‰ä¸¤ç§æ‰§è¡Œæ–¹å¼ï¼š</p><ol><li>åœ¨ideaå·¥å…·å³ä¾§çš„mavenå·¥å…·æ ä¸­ï¼Œé€‰æ‹©å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒå‡»æ‰§è¡Œ</li><li>åœ¨DOSå‘½ä»¤è¡Œä¸­ï¼Œé€šè¿‡mavenå‘½ä»¤æ‰§è¡Œ</li></ol><p><strong>æ–¹å¼ä¸€ï¼šåœ¨ideaä¸­æ‰§è¡Œç”Ÿå‘½å‘¨æœŸ</strong></p><ul><li>é€‰æ‹©å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒå‡»æ‰§è¡Œ</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281243812.png" alt="image-20221201161957301"> </p><p>compileï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281243382.png" alt="image-20221201163711835"></p><p>testï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281244949.png" alt="image-20221201164627403"></p><p>packageï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281244122.png" alt="image-20221201165801341"></p><p>installï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281244944.png" alt="image-20221201170830837"></p><p>cleanï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281244606.png" alt="image-20221201171529382"></p><p><strong>æ–¹å¼äºŒï¼šåœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œç”Ÿå‘½å‘¨æœŸ</strong></p><ol><li>è¿›å…¥åˆ°DOSå‘½ä»¤è¡Œ</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281244078.png" alt="image-20221201172210253"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281244442.png" alt="image-20221201172914648"> </p><h2 id="05-é™„å½•"><a href="#05-é™„å½•" class="headerlink" title="05. é™„å½•"></a>05. é™„å½•</h2><h3 id="5-1-æ›´æ–°ä¾èµ–ç´¢å¼•"><a href="#5-1-æ›´æ–°ä¾èµ–ç´¢å¼•" class="headerlink" title="5.1 æ›´æ–°ä¾èµ–ç´¢å¼•"></a>5.1 æ›´æ–°ä¾èµ–ç´¢å¼•</h3><p>æœ‰æ—¶å€™ç»™ideaé…ç½®å®Œmavenä»“åº“ä¿¡æ¯åï¼Œåœ¨ideaä¸­ä¾ç„¶æœç´¢ä¸åˆ°ä»“åº“ä¸­çš„jaråŒ…ã€‚è¿™æ˜¯å› ä¸ºä»“åº“ä¸­çš„jaråŒ…ç´¢å¼•å°šæœªæ›´æ–°åˆ°ideaä¸­ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦æ›´æ–°ideaä¸­mavençš„ç´¢å¼•äº†ï¼Œå…·ä½“åšæ³•å¦‚ä¸‹ï¼š</p><p> æ‰“å¼€è®¾ç½®â€”-æœç´¢mavenâ€”-Repositoriesâ€”-é€‰ä¸­æœ¬åœ°ä»“åº“â€”â€“ç‚¹å‡»Update</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281244837.png" alt="1537786634456"></p><h3 id="5-2-æ¸…ç†mavenä»“åº“"><a href="#5-2-æ¸…ç†mavenä»“åº“" class="headerlink" title="5.2 æ¸…ç†mavenä»“åº“"></a>5.2 æ¸…ç†mavenä»“åº“</h3><p>åˆå§‹æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„æœ¬åœ°ä»“åº“æ˜¯æ²¡æœ‰ä»»ä½•jaråŒ…çš„ï¼Œæ­¤æ—¶ä¼šä»ç§æœå»ä¸‹è½½ï¼ˆå¦‚æœæ²¡æœ‰é…ç½®ï¼Œå°±ç›´æ¥ä»ä¸­å¤®ä»“åº“å»ä¸‹è½½ï¼‰ï¼Œå¯èƒ½ç”±äºç½‘ç»œçš„åŸå› ï¼ŒjaråŒ…ä¸‹è½½ä¸å®Œå…¨ï¼Œè¿™äº›ä¸å®Œæ•´çš„jaråŒ…éƒ½æ˜¯ä»¥lastUpdatedç»“å°¾ã€‚æ­¤æ—¶ï¼Œmavenä¸ä¼šå†é‡æ–°å¸®ä½ ä¸‹è½½ï¼Œéœ€è¦ä½ åˆ é™¤è¿™äº›ä»¥lastUpdatedç»“å°¾çš„æ–‡ä»¶ï¼Œç„¶åmavenæ‰ä¼šå†æ¬¡è‡ªåŠ¨ä¸‹è½½è¿™äº›jaråŒ…ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281245155.png" alt="lastUpdate"></p><p>å¦‚æœæœ¬åœ°ä»“åº“ä¸­æœ‰å¾ˆå¤šè¿™æ ·çš„ä»¥lastUpadtedç»“å°¾çš„æ–‡ä»¶ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªæ‰¹å¤„ç†æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­ç¼–å†™å¦‚ä¸‹è„šæœ¬æ¥åˆ é™¤ï¼š </p><pre class="line-numbers language-none"><code class="language-none">set REPOSITORY_PATH=E:\develop\apache-maven-3.6.1\mvn_reporem æ­£åœ¨æœç´¢...del /s /q %REPOSITORY_PATH%\*.lastUpdatedrem æœç´¢å®Œæ¯•pause<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p><p>1). å®šä¹‰æ‰¹å¤„ç†æ–‡ä»¶del_lastUpdated.bat  (ç›´æ¥åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå‘½åä¸ºdel_lastUpdatedï¼Œåç¼€åç›´æ¥æ”¹ä¸ºbatå³å¯ )</p><p><img src="/assets/image-20221214154949482.png" alt="image-20221214154949482"> </p><p>2). åœ¨ä¸Šé¢çš„batæ–‡ä»¶ä¸Š<strong>å³é”®â€”ã€‹ç¼–è¾‘</strong> ã€‚ä¿®æ”¹æ–‡ä»¶ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411281229215.png" alt="image-20221214154559817"> </p><p>ä¿®æ”¹å®Œæ¯•åï¼ŒåŒå‡»è¿è¡Œå³å¯åˆ é™¤mavenä»“åº“ä¸­çš„æ®‹ç•™æ–‡ä»¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webå¼€å‘</title>
      <link href="/2024/11/27/web-kai-fa/"/>
      <url>/2024/11/27/web-kai-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="Webå¼€å‘"><a href="#Webå¼€å‘" class="headerlink" title="Webå¼€å‘"></a>Webå¼€å‘</h1><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127141150073.png" alt="è·¯çº¿"></p><h2 id="1ã€Vue2"><a href="#1ã€Vue2" class="headerlink" title="1ã€Vue2"></a>1ã€Vue2</h2><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">npm install -g @vue/cli<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">vue create my-projectvue ui<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="1-1-å¸¸è§æŒ‡ä»¤"><a href="#1-1-å¸¸è§æŒ‡ä»¤" class="headerlink" title="1. 1 å¸¸è§æŒ‡ä»¤"></a>1. 1 å¸¸è§æŒ‡ä»¤</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127151927105.png" alt="æŒ‡ä»¤"></p><h4 id="1-1v-bind-å’Œ-v-model"><a href="#1-1v-bind-å’Œ-v-model" class="headerlink" title="1.1v-bind å’Œ v-model"></a>1.1v-bind å’Œ v-model</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127153207955.png" alt="v-bind å’Œ v-model"></p><ul><li>é€šè¿‡v-bindæˆ–è€…v-modelç»‘å®šçš„å˜é‡ï¼Œå¿…é¡»åœ¨æ•°æ®æ¨¡å‹ä¸­å£°æ˜ã€‚</li></ul><h4 id="1-2-v-on"><a href="#1-2-v-on" class="headerlink" title="1.2 v-on"></a>1.2 v-on</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127153921083.png" alt="v-on"></p><h4 id="1-3-v-if-å’Œ-v-show"><a href="#1-3-v-if-å’Œ-v-show" class="headerlink" title="1.3 v-if å’Œ v-show"></a>1.3 v-if å’Œ v-show</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127154540159.png" alt="v-if å’Œ v-show"></p><h4 id="1-4-v-for"><a href="#1-4-v-for" class="headerlink" title="1.4 v-for"></a>1.4 v-for</h4><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127155027731.png" alt="v-for"></p><h3 id="1-2-ç”Ÿå‘½å‘¨æœŸ"><a href="#1-2-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="1.2 ç”Ÿå‘½å‘¨æœŸ"></a>1.2 ç”Ÿå‘½å‘¨æœŸ</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127155600290.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127155707239.png" alt="ç”Ÿå‘½å‘¨æœŸ"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127155809768.png" alt="é’©å­"></p><ul><li>mounted:æŒ‚è½½å®Œæˆï¼ŒVueåˆå§‹åŒ–æˆåŠŸï¼ŒHTMLé¡µé¢æ¸²æŸ“æˆåŠŸã€‚ (å‘é€è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼ŒåŠ è½½æ•°æ®ï¼‰</li></ul><h3 id="1-3-Axios"><a href="#1-3-Axios" class="headerlink" title="1.3 Axios"></a>1.3 Axios</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127160923348.png" alt="Axios"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127161223387.png" alt="Axiosè¯·æ±‚ç®€åŒ–"></p><h3 id="1-4-å·¥ç¨‹åŒ–"><a href="#1-4-å·¥ç¨‹åŒ–" class="headerlink" title="1.4 å·¥ç¨‹åŒ–"></a>1.4 å·¥ç¨‹åŒ–</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127164256373.png" alt="ç›®å½•ç»“æ„"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127165419599.png" alt="é»˜è®¤é¦–é¡µæŒ‚åœ¨åœ¨æ ¹ç›®å½•ä¸‹"></p><p>vue.config.jsæ–‡ä»¶ä¸­ï¼Œä¿®æ”¹å‰ç«¯é»˜è®¤ç«¯å£ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@vue/cli-service'</span><span class="token punctuation">)</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token literal-property property">transpileDependencies</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// ä¿®æ”¹ç«¯å£å·é…ç½®</span>  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">7000</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;  &lt;div&gt;    {{ message }}  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default {  data() {    return {      message: "hello world"    }  },      methods: {  }}&lt;/script&gt;&lt;style&gt;&lt;/style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-5-è·¯ç”±"><a href="#1-5-è·¯ç”±" class="headerlink" title="1.5 è·¯ç”±"></a>1.5 è·¯ç”±</h3><p>å‰ç«¯è·¯ç”±:URLä¸­çš„hash(#å·)ä¸ç»„ä»¶ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127223026096.png" alt="è·¯ç”±"></p><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">npm install vue-router@3.5.1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127223628375.png" alt="main.js"></p><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">import Vue from 'vue'import VueRouter from 'vue-router'import HomeView from '../views/HomeView.vue'Vue.use(VueRouter)const routes = [  // é…ç½®è·¯ç”±æ–¹å¼1  {    path: '/',    name: 'home',    component: HomeView  },  // é‡å®šå‘  {    path: '/',    redirect: '/home'  },  // é…ç½®è·¯ç”±æ–¹å¼2  {    path: '/about',    name: 'about',    component: () =&gt; import('../views/AboutView.vue')  }]// å“ˆå¸Œæ¨¡å¼// const router = new VueRouter({//   mode: 'hash',//   routes// })const router = new VueRouter({  mode: 'history',  routes})export default router<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;router-link to="/..."&gt;&lt;/router-link&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;router-view&gt;&lt;/router-view&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="2ã€Ellementç»„ä»¶åº“"><a href="#2ã€Ellementç»„ä»¶åº“" class="headerlink" title="2ã€Ellementç»„ä»¶åº“"></a>2ã€Ellementç»„ä»¶åº“</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127190007991.png" alt="å…¥é—¨"></p><h3 id="2-1-ä½¿ç”¨element"><a href="#2-1-ä½¿ç”¨element" class="headerlink" title="2.1 ä½¿ç”¨element"></a>2.1 ä½¿ç”¨element</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127193550571.png" alt="ä½¿ç”¨æ­¥éª¤"></p><p>main.jsï¼š</p><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">import Vue from 'vue'import App from './App.vue'import router from './router'// å¼•å…¥element-uiimport ElementUI from 'element-ui'import 'element-ui/lib/theme-chalk/index.css'Vue.use(ElementUI)Vue.config.productionTip = falsenew Vue({  router,  render: h =&gt; h(App)  // é€šè¿‡renderå‡½æ•°å°†Appç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Š}).$mount('#app')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ElementView.vueï¼š</p><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;    &lt;div&gt;        &lt;el-row&gt;            &lt;el-button&gt;é»˜è®¤æŒ‰é’®&lt;/el-button&gt;            &lt;el-button type="primary"&gt;ä¸»è¦æŒ‰é’®&lt;/el-button&gt;            &lt;el-button type="success"&gt;æˆåŠŸæŒ‰é’®&lt;/el-button&gt;            &lt;el-button type="info"&gt;ä¿¡æ¯æŒ‰é’®&lt;/el-button&gt;            &lt;el-button type="warning"&gt;è­¦å‘ŠæŒ‰é’®&lt;/el-button&gt;            &lt;el-button type="danger"&gt;å±é™©æŒ‰é’®&lt;/el-button&gt;        &lt;/el-row&gt;    &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default {    data() {        return {            // data        }    },    methods: {        // methods    },}&lt;/script&gt;&lt;style&gt;&lt;/style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>App.vueï¼š</p><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;  &lt;div&gt;    &lt;!-- 3. ä½¿ç”¨ElementViewç»„ä»¶ --&gt;    &lt;ElementView&gt;&lt;/ElementView&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;// 1. å¯¼å…¥ElementViewç»„ä»¶import ElementView from './views/Element/ElementView.vue'export default {  // 2. æ³¨å†ŒElementViewç»„ä»¶  components: { ElementView },  data() {    return {      message: "hello world"    }  },  methods: {  }}&lt;/script&gt;&lt;style&gt;&lt;/style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3ã€éƒ¨ç½²"><a href="#3ã€éƒ¨ç½²" class="headerlink" title="3ã€éƒ¨ç½²"></a>3ã€éƒ¨ç½²</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127225049731.png" alt="nginxéƒ¨ç½²"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127225135907.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">netstat</span> <span class="token parameter variable">-ano</span> <span class="token operator">|</span> findStr <span class="token number">80</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç«¯å£è¢«å ç”¨ï¼š</p><p>Nginxé»˜è®¤å ç”¨80ç«¯å£å·ï¼Œå¦‚æœ80ç«¯å£å·è¢«å ç”¨ï¼Œå¯ä»¥åœ¨nginx.confä¸­ä¿®æ”¹ç«¯å£å·ã€‚(netstat-ano | findStr 80)</p>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> Vue2 </tag>
            
            <tag> Element </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ³¨è§£</title>
      <link href="/2024/11/26/zhu-jie/"/>
      <url>/2024/11/26/zhu-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="Javaé«˜çº§"><a href="#Javaé«˜çº§" class="headerlink" title="Javaé«˜çº§"></a>Javaé«˜çº§</h1><h2 id="1ã€æµ‹è¯•"><a href="#1ã€æµ‹è¯•" class="headerlink" title="1ã€æµ‹è¯•"></a>1ã€æµ‹è¯•</h2><h3 id="1-1-Junitå•å…ƒæµ‹è¯•æ¼”ç¤º"><a href="#1-1-Junitå•å…ƒæµ‹è¯•æ¼”ç¤º" class="headerlink" title="1. 1 Junitå•å…ƒæµ‹è¯•æ¼”ç¤º"></a>1. 1 Junitå•å…ƒæµ‹è¯•æ¼”ç¤º</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126191659212.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126191718924.png" alt="éœ€æ±‚"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126195423691.png" alt="æ‰§è¡Œç»“æœ"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token class-name">Junit</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringUtil</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printNumber</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯"</span> <span class="token operator">+</span> name<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getMaxIndex</span><span class="token punctuation">(</span><span class="token class-name">String</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token class-name">Junit</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Assert</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringUtilTest</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testPrintNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">printNumber</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGetMaxIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">getMaxIndex</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ–­è¨€æœºåˆ¶ï¼Œé¢„æµ‹å€¼å’Œå®é™…å€¼è¿›è¡Œæ¯”è¾ƒã€‚</span>        <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•å†…éƒ¨æœ‰bug"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-2-å¸¸ç”¨æ³¨è§£"><a href="#1-2-å¸¸ç”¨æ³¨è§£" class="headerlink" title="1.2 å¸¸ç”¨æ³¨è§£"></a>1.2 å¸¸ç”¨æ³¨è§£</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126195823218.png" alt="Junit4"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126200211017.png" alt="Junit5"></p><h2 id="2ã€åå°„"><a href="#2ã€åå°„" class="headerlink" title="2ã€åå°„"></a>2ã€åå°„</h2><ul><li>åŸºæœ¬ä½œç”¨ï¼šå¯ä»¥å¾—åˆ°ä¸€ä¸ªç±»çš„å…¨éƒ¨æˆåˆ†è¿›è¡Œæ“ä½œã€‚</li><li>å¯ä»¥ç ´åå°è£…æ€§ã€‚</li><li>æœ€é‡è¦çš„ç”¨é€”æ˜¯:é€‚åˆåšjavaçš„æ¡†æ¶ï¼ŒåŸºæœ¬ä¸Šï¼Œä¸»æµçš„æ¡†æ¶éƒ½ä¼šåŸºäºåå°„è®¾è®¡å‡ºä¸€äº›é€šç”¨çš„åŠŸèƒ½ã€‚</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126202133951.png" alt="è®¤è¯†åå°„"></p><h3 id="2-1-ç¬¬ä¸€æ­¥-ï¼šClasså¯¹è±¡"><a href="#2-1-ç¬¬ä¸€æ­¥-ï¼šClasså¯¹è±¡" class="headerlink" title="2.1 ç¬¬ä¸€æ­¥:ï¼šClasså¯¹è±¡"></a>2.1 ç¬¬ä¸€æ­¥:ï¼šClasså¯¹è±¡</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126202320154.png" alt="è·å–Classå¯¹è±¡çš„ä¸‰ç§æ–¹å¼"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> testStudent <span class="token punctuation">{</span>    <span class="token comment">/**     * ç¨‹åºçš„å…¥å£ç‚¹     * è¯¥æ–¹æ³•æ¼”ç¤ºäº†å¦‚ä½•è·å–ç±»çš„ä¿¡æ¯å¹¶é€šè¿‡ç±»ååå°„åˆ›å»ºç±»çš„Classå¯¹è±¡     * @param args å‘½ä»¤è¡Œå‚æ•°     * @throws Exception å¦‚æœå‘ç”Ÿä»»ä½•å¼‚å¸¸ï¼Œä¾‹å¦‚ç±»åŠ è½½å¤±è´¥     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">// è·å–Studentç±»çš„Classå¯¹è±¡</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> c1 <span class="token operator">=</span> <span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>        <span class="token comment">// è¾“å‡ºç±»çš„å…¨é™å®šå</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è¾“å‡ºç±»çš„ç®€å•å</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c1<span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// é€šè¿‡ç±»çš„å…¨é™å®šåè·å–Classå¯¹è±¡</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> c2 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.dapixiu.Student"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è¾“å‡ºç±»çš„ç®€å•å</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c2<span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// æ¯”è¾ƒä¸¤ä¸ªClasså¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œå³æ˜¯å¦è¡¨ç¤ºåŒä¸€ä¸ªç±»</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c1<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-2-ç¬¬äºŒæ­¥ï¼šæ“ä½œç±»çš„æ„é€ å™¨"><a href="#2-2-ç¬¬äºŒæ­¥ï¼šæ“ä½œç±»çš„æ„é€ å™¨" class="headerlink" title="2.2 ç¬¬äºŒæ­¥ï¼šæ“ä½œç±»çš„æ„é€ å™¨"></a>2.2 ç¬¬äºŒæ­¥ï¼šæ“ä½œç±»çš„æ„é€ å™¨</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126203434804.png" alt="æ“ä½œæ„é€ å™¨"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Constructor</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentTest</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGetConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">// è·å–Studentç±»çš„Classå¯¹è±¡</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> c <span class="token operator">=</span> <span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–Studentç±»çš„æ‰€æœ‰å…¬å…±æ„é€ å‡½æ•°</span>        <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> constructors <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ‰“å°æ‰€æœ‰å…¬å…±æ„é€ å‡½æ•°çš„ä¿¡æ¯</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>constructors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–Studentç±»çš„æ‰€æœ‰å£°æ˜çš„æ„é€ å‡½æ•°ï¼ŒåŒ…æ‹¬å…¬å…±çš„ã€å—ä¿æŠ¤çš„ã€é»˜è®¤çš„å’Œç§æœ‰çš„</span>        <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredConstructors <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// éå†å¹¶æ‰“å°æ¯ä¸ªæ„é€ å‡½æ•°çš„åç§°å’Œå‚æ•°æ•°é‡</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> dc <span class="token operator">:</span> declaredConstructors<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dc<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"---------&gt;"</span> <span class="token operator">+</span> dc<span class="token punctuation">.</span><span class="token function">getParameterCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">// è·å–Studentç±»çš„æŒ‡å®šæ„é€ å‡½æ•°ï¼Œè¿™é‡ŒæŒ‡å®šä¸ºStringå’ŒIntegerå‚æ•°çš„æ„é€ å‡½æ•°</span>        <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> d <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ‰“å°è¯¥æ„é€ å‡½æ•°çš„ä¿¡æ¯</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126205738468.png"></p><h3 id="2-3-ç¬¬ä¸‰æ­¥ï¼šè·å–æˆå‘˜å˜é‡"><a href="#2-3-ç¬¬ä¸‰æ­¥ï¼šè·å–æˆå‘˜å˜é‡" class="headerlink" title="2.3 ç¬¬ä¸‰æ­¥ï¼šè·å–æˆå‘˜å˜é‡"></a>2.3 ç¬¬ä¸‰æ­¥ï¼šè·å–æˆå‘˜å˜é‡</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126211926952.png"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// è·å–Studentç±»çš„Classå¯¹è±¡</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> c <span class="token operator">=</span> <span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span><span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredFields <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>declaredFields<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> f <span class="token operator">:</span> declaredFields<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> type <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126212802044.png"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">        <span class="token comment">// è·å–Studentç±»çš„Classå¯¹è±¡</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> c <span class="token operator">=</span> <span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>        <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredFields <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>declaredFields<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> f <span class="token operator">:</span> declaredFields<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> type <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token comment">//        å®šä½æŸä¸ªæˆå‘˜å˜é‡</span>        <span class="token class-name">Field</span> name <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"------&gt;"</span> <span class="token operator">+</span> name<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        èµ‹å€¼</span>        <span class="token class-name">Student</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        name<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        name<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span><span class="token string">"å°ç±³"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        å–å€¼</span>        <span class="token class-name">String</span> o <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>name<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-4-ç¬¬å››æ­¥ï¼šè·å–ç±»çš„æˆå‘˜æ–¹æ³•"><a href="#2-4-ç¬¬å››æ­¥ï¼šè·å–ç±»çš„æˆå‘˜æ–¹æ³•" class="headerlink" title="2.4 ç¬¬å››æ­¥ï¼šè·å–ç±»çš„æˆå‘˜æ–¹æ³•"></a>2.4 ç¬¬å››æ­¥ï¼šè·å–ç±»çš„æˆå‘˜æ–¹æ³•</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126220226548.png"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// è·å–Studentç±»çš„Classå¯¹è±¡</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> c <span class="token operator">=</span> <span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span><span class="token comment">// è·å–å…¨éƒ¨çš„æˆå‘˜æ–¹æ³•</span><span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">String</span> name <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> count <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getParameterCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> type <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getReturnType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">"------&gt;"</span> <span class="token operator">+</span> count <span class="token operator">+</span> <span class="token string">"----&gt;"</span> <span class="token operator">+</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3ã€æ³¨è§£Annotation"><a href="#3ã€æ³¨è§£Annotation" class="headerlink" title="3ã€æ³¨è§£Annotation"></a>3ã€æ³¨è§£Annotation</h2><ul><li>å°±æ˜¯Javaä»£ç é‡Œçš„ç‰¹æ®Šæ ‡è®°ï¼Œæ¯”å¦‚:@Overrideã€@Testç­‰ï¼Œä½œç”¨æ˜¯:è®©å…¶ä»–ç¨‹åºæ ¹æ®æ³¨è§£ä¿¡æ¯æ¥å†³å®šæ€ä¹ˆæ‰§è¡Œè¯¥ç¨‹åº</li><li>æ³¨æ„:æ³¨è§£å¯ä»¥ç”¨åœ¨ç±»ä¸Šã€æ„é€ å™¨ä¸Šã€æ–¹æ³•ä¸Šã€æˆå‘˜å˜é‡ä¸Šã€å‚æ•°ä¸Šã€ç­‰ä½ç½®å¤„ã€‚</li></ul><h3 id="3-1-è‡ªå®šä¹‰æ³¨è§£"><a href="#3-1-è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="3.1 è‡ªå®šä¹‰æ³¨è§£"></a>3.1 è‡ªå®šä¹‰æ³¨è§£</h3><ul><li>å°±æ˜¯è‡ªå·±å®šä¹‰æ³¨è§£ã€‚</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126224421598.png" alt="è‡ªå®šä¹‰æ³¨è§£"></p><ul><li>ç‰¹æ®Šå±æ€§åï¼š<code>value</code></li><li>å¦‚æœæ³¨è§£ä¸­åªæœ‰ä¸€ä¸ªvalueå±æ€§ï¼Œä½¿ç”¨æ³¨è§£æ—¶ï¼Œvalueåç§°å¯ä»¥ä¸å†™!!</li></ul><h3 id="3-2-æ³¨è§£åŸç†"><a href="#3-2-æ³¨è§£åŸç†" class="headerlink" title="3.2 æ³¨è§£åŸç†"></a>3.2 æ³¨è§£åŸç†</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126225701693.png" alt="åŸç†"></p><ul><li>æ³¨è§£çš„æœ¬è´¨æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ‰€æœ‰çš„æ³¨è§£éƒ½ç»§æ‰¿äº†Annotationæ¥å£ã€‚</li><li>@æ³¨è§£(â€¦â€¦ï¼‰ï¼šå…¶å®å°±æ˜¯ä¸€ä¸ªå®ç°ç±»å¯¹è±¡ï¼Œå®ç°äº†è¯¥æ³¨è§£ä»¥åŠAnnotationæ¥å£ã€‚</li></ul><h3 id="3-3-å…ƒæ³¨è§£"><a href="#3-3-å…ƒæ³¨è§£" class="headerlink" title="3.3 å…ƒæ³¨è§£"></a>3.3 å…ƒæ³¨è§£</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126230534587.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126230416489.png" alt="å…ƒæ³¨è§£"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127124324379.png" alt="å¦‚ä½•æ³¨è§£è§£æ"></p><h3 id="3-4-æ³¨è§£çš„åº”ç”¨åœºæ™¯"><a href="#3-4-æ³¨è§£çš„åº”ç”¨åœºæ™¯" class="headerlink" title="3.4 æ³¨è§£çš„åº”ç”¨åœºæ™¯"></a>3.4 æ³¨è§£çš„åº”ç”¨åœºæ™¯</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127130808267.png" alt="éœ€æ±‚"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ElementType</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Retention</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RetentionPolicy</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Target</span></span><span class="token punctuation">;</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">)</span> <span class="token comment">// æ³¨è§£åªèƒ½åœ¨æ–¹æ³•ä¸­ä½¿ç”¨</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span> <span class="token comment">// æ³¨è§£å¯ä»¥ä¸€ç›´å­˜æ´»</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MYTest</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationTargetException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@MYTest</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"======test1==========="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@MYTest</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"======test2==========="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"======test3==========="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InvocationTargetException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span> <span class="token punctuation">{</span>        <span class="token comment">//1.å¾—åˆ°ç±»å¯¹è±¡</span>        <span class="token class-name">Class</span> c <span class="token operator">=</span> <span class="token class-name">Main</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>        <span class="token comment">//2.å¾—åˆ°ç±»ä¸­çš„å…¨éƒ¨æˆå‘˜æ–¹æ³•</span>        <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//3.éå†æ–¹æ³•ï¼Œçœ‹æ˜¯å¦å­˜åœ¨@MYTestæ³¨è§£</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">MYTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//                å­˜åœ¨ã€‚è§¦å‘æ–¹æ³•æ‰§è¡Œ</span>                method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4ã€åŠ¨æ€ä»£ç†"><a href="#4ã€åŠ¨æ€ä»£ç†" class="headerlink" title="4ã€åŠ¨æ€ä»£ç†"></a>4ã€åŠ¨æ€ä»£ç†</h2><h3 id="4-1-ä»‹ç»"><a href="#4-1-ä»‹ç»" class="headerlink" title="4.1 ä»‹ç»"></a>4.1 ä»‹ç»</h3><ul><li><p>å¯¹è±¡å¦‚æœå«Œèº«ä¸Šå¹²çš„äº‹å¤ªå¤šçš„è¯ï¼Œå¯ä»¥é€šè¿‡ä»£ç†æ¥è½¬ç§»éƒ¨åˆ†èŒè´£ã€‚</p></li><li><p>å¯¹è±¡æœ‰ä»€ä¹ˆæ–¹æ³•æƒ³è¢«ä»£ç†ï¼Œä»£ç†å°±ä¸€å®šè¦æœ‰å¯¹åº”çš„æ–¹æ³•</p></li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127132142381.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241127134908428.png" alt="code"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> <span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token class-name">ClassLoader</span> loader<span class="token punctuation">,</span>                                      <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> interfaces<span class="token punctuation">,</span>                                      <span class="token class-name">InvocationHandler</span> h<span class="token punctuation">)</span> å‚æ•°<span class="token number">1</span><span class="token operator">:</span>ç”¨äºæŒ‡å®šä¸€ä¸ªç±»åŠ è½½å™¨å‚æ•°<span class="token number">2</span><span class="token operator">:</span>æŒ‡å®šç”Ÿæˆçš„ä»£ç†é•¿ä»€ä¹ˆæ ·å­ï¼Œä¹Ÿå°±æ˜¯æœ‰å“ªäº›æ–¹æ³•å‚æ•°<span class="token number">3</span><span class="token operator">:</span>ç”¨æ¥æŒ‡å®šç”Ÿæˆçš„ä»£ç†å¯¹è±¡è¦å¹²ä»€ä¹ˆäº‹æƒ…                                      <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>interface Starï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token class-name">Proxy</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Star</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sing</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token class-name">Proxy</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BigStar</span> <span class="token keyword">implements</span> <span class="token class-name">Star</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">BigStar</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sing</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">"æ­£åœ¨å”±"</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"è°¢è°¢~"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">"æ­£åœ¨è·³èˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token class-name">Proxy</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyUtils</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Star</span> <span class="token function">createStar</span><span class="token punctuation">(</span><span class="token class-name">BigStar</span> bigStar<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">/*        * Star starProxy = ProxyUtil.createProxy(s);        * starProxy.sing("åŠä½ å¤ªç¾");        * starProxy.dance;        * */</span>        <span class="token class-name">Star</span> <span class="token class-name">StarProxy</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Star</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>                <span class="token class-name">ProxyUtils</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token class-name">Star</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token annotation punctuation">@Override</span>                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>                        <span class="token comment">// ä»£ç†è¦åšçš„äº‹æƒ…ï¼Œåœ¨è¿™é‡Œå†™ä»£ç ã€‚</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"sing"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‡†å¤‡è¯ç­’ï¼Œæ”¶é’±20W"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            <span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>bigStar<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"dance"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‡†å¤‡åœºåœ°è·³èˆï¼Œæ”¶é’±50w"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            <span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>bigStar<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>                            <span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>bigStar<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">StarProxy</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token class-name">Proxy</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ç¨‹åºçš„å…¥å£ç‚¹     * æœ¬æ–¹æ³•æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ä»£ç†ç±»æ¥æ‰©å±•æˆ–ä¿®æ”¹ä¸€ä¸ªç±»çš„è¡Œä¸º     * åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªBigStarå¯¹è±¡ï¼Œç„¶åä½¿ç”¨ProxyUtilsä¸ºå…¶åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡     * é€šè¿‡è¿™ä¸ªä»£ç†å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é—´æ¥è°ƒç”¨BigStarå¯¹è±¡çš„æ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥åœ¨è°ƒç”¨å‰åæ·»åŠ é¢å¤–çš„æ“ä½œ     *     * @param args å‘½ä»¤è¡Œå‚æ•°ï¼Œæœ¬ä¾‹ä¸­æœªä½¿ç”¨     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ªBigStarå¯¹è±¡ï¼Œåä¸º"æ¨è¶…è¶Š"</span>        <span class="token class-name">BigStar</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigStar</span><span class="token punctuation">(</span><span class="token string">"æ¨è¶…è¶Š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä½¿ç”¨ProxyUtilsåˆ›å»ºBigStarå¯¹è±¡çš„ä»£ç†å¯¹è±¡</span>        <span class="token comment">// è¿™é‡Œçš„ä»£ç†å¯¹è±¡å¯ä»¥çœ‹ä½œæ˜¯BigStarå¯¹è±¡çš„ä¸€ä¸ªåŒ…è£…ï¼Œé€šè¿‡å®ƒå¯ä»¥é—´æ¥æ“ä½œBigStarå¯¹è±¡</span>        <span class="token class-name">Star</span> starProxy <span class="token operator">=</span> <span class="token class-name">ProxyUtils</span><span class="token punctuation">.</span><span class="token function">createStar</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨singæ–¹æ³•ï¼Œå¹¶æ‰“å°è¿”å›çš„ç»“æœ</span>        <span class="token comment">// è¿™é‡Œå±•ç¤ºäº†å¦‚ä½•é€šè¿‡ä»£ç†é—´æ¥æ‰§è¡ŒBigStarçš„singæ–¹æ³•</span>        <span class="token class-name">String</span> rs <span class="token operator">=</span> starProxy<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token string">"åŠä½ å¤ªç¾"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨danceæ–¹æ³•</span>        <span class="token comment">// è¿™é‡Œå±•ç¤ºäº†å¦‚ä½•é€šè¿‡ä»£ç†é—´æ¥æ‰§è¡ŒBigStarçš„danceæ–¹æ³•</span>        starProxy<span class="token punctuation">.</span><span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-2-åº”ç”¨"><a href="#4-2-åº”ç”¨" class="headerlink" title="4.2 åº”ç”¨"></a>4.2 åº”ç”¨</h3><p>aop</p><h2 id="é»‘é©¬çš„åŸæ•™ç¨‹"><a href="#é»‘é©¬çš„åŸæ•™ç¨‹" class="headerlink" title="é»‘é©¬çš„åŸæ•™ç¨‹"></a>é»‘é©¬çš„åŸæ•™ç¨‹</h2><h1 id="day14-å•å…ƒæµ‹è¯•ã€åå°„"><a href="#day14-å•å…ƒæµ‹è¯•ã€åå°„" class="headerlink" title="day14-å•å…ƒæµ‹è¯•ã€åå°„"></a>day14-å•å…ƒæµ‹è¯•ã€åå°„</h1><p>æ­å–œåŒå­¦ä»¬ï¼ŒJavaä¸»è¦çš„çŸ¥è¯†æˆ‘ä»¬å…¶å®å·²ç»å­¦ä¹ å¾—å·®ä¸å¤šäº†ã€‚ä»Šå¤©åŒå­¦ä»¬å†æŠŠå•å…ƒæµ‹è¯•ã€åå°„ã€æ³¨è§£ã€åŠ¨æ€ä»£ç†å­¦ä¹ å®Œã€‚Javaçš„åŸºç¡€çŸ¥è¯†å°±ç®—å…¨é½æ´»äº†ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¿›å…¥å•å…ƒæµ‹è¯•çš„å­¦ä¹ ã€‚</p><h2 id="ä¸€ã€å•å…ƒæµ‹è¯•"><a href="#ä¸€ã€å•å…ƒæµ‹è¯•" class="headerlink" title="ä¸€ã€å•å…ƒæµ‹è¯•"></a>ä¸€ã€å•å…ƒæµ‹è¯•</h2><h3 id="1-1-å•å…ƒæµ‹è¯•å¿«é€Ÿå…¥é—¨"><a href="#1-1-å•å…ƒæµ‹è¯•å¿«é€Ÿå…¥é—¨" class="headerlink" title="1.1 å•å…ƒæµ‹è¯•å¿«é€Ÿå…¥é—¨"></a>1.1 å•å…ƒæµ‹è¯•å¿«é€Ÿå…¥é—¨</h3><p>æ‰€è°“å•å…ƒæµ‹è¯•ï¼Œå°±æ˜¯é’ˆå¯¹æœ€å°çš„åŠŸèƒ½å•å…ƒï¼Œç¼–å†™æµ‹è¯•ä»£ç å¯¹å…¶è¿›è¡Œæ­£ç¡®æ€§æµ‹è¯•ã€‚</p><p>æˆ‘ä»¬æƒ³æƒ³ï¼Œå’±ä»¬ä¹‹å‰æ˜¯æ€ä¹ˆè¿›è¡Œæµ‹è¯•çš„å‘¢ï¼Ÿ</p><p>æ¯”å¦‚è¯´æˆ‘ä»¬å†™äº†ä¸€ä¸ªå­¦ç”Ÿç®¡ç†ç³»ç»Ÿï¼Œæœ‰æ·»åŠ å­¦ç”Ÿã€ä¿®æ”¹å­¦ç”Ÿã€åˆ é™¤å­¦ç”Ÿã€æŸ¥è¯¢å­¦ç”Ÿç­‰è¿™äº›åŠŸèƒ½ã€‚è¦å¯¹è¿™äº›åŠŸèƒ½è¿™å‡ ä¸ªåŠŸèƒ½è¿›è¡Œæµ‹è¯•ï¼Œæˆ‘ä»¬æ˜¯åœ¨mainæ–¹æ³•ä¸­ç¼–å†™ä»£ç æ¥æµ‹è¯•çš„ã€‚</p><p>ä½†æ˜¯åœ¨mainæ–¹æ³•ä¸­å†™æµ‹è¯•ä»£ç æœ‰å¦‚ä¸‹çš„å‡ ä¸ªé—®é¢˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668506399372.png" alt="1668506399372"></p><p>ä¸ºäº†æµ‹è¯•æ›´åŠ æ–¹ä¾¿ï¼Œæœ‰ä¸€äº›ç¬¬ä¸‰æ–¹çš„å…¬å¸æˆ–è€…ç»„ç»‡æä¾›äº†å¾ˆå¥½ç”¨çš„æµ‹è¯•æ¡†æ¶ï¼Œç»™å¼€å‘è€…ä½¿ç”¨ã€‚è¿™é‡Œç»™åŒå­¦ä»¬ä»‹ç»ä¸€ç§Junitæµ‹è¯•æ¡†æ¶ã€‚</p><p>Junitæ˜¯ç¬¬ä¸‰æ–¹å…¬å¸å¼€æºå‡ºæ¥çš„ï¼Œç”¨äºå¯¹ä»£ç è¿›è¡Œå•å…ƒæµ‹è¯•çš„å·¥å…·ï¼ˆIDEAå·²ç»é›†æˆäº†junitæ¡†æ¶ï¼‰ã€‚ç›¸æ¯”äºåœ¨mainæ–¹æ³•ä¸­æµ‹è¯•æœ‰å¦‚ä¸‹å‡ ä¸ªä¼˜ç‚¹ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668506713783.png" alt="1668506713783"></p><hr><p>æˆ‘ä»¬çŸ¥é“å•å…ƒæµ‹è¯•æ˜¯ä»€ä¹ˆä¹‹åï¼Œæ¥ä¸‹æ¥å¸¦é¢†åŒå­¦ä»¬ä½¿ç”¨ä¸€ä¸‹ã€‚ç”±äºJunitæ˜¯ç¬¬ä¸‰æ–¹æä¾›çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠjaråŒ…å¯¼å…¥åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œæ‰èƒ½ä½¿ç”¨ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668507051101.png" alt="1668507051101"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤ï¼Œæ¥ä½¿ç”¨ä¸€ä¸‹.</p><p>å…ˆå‡†å¤‡ä¸€ä¸ªç±»ï¼Œå‡è®¾å†™äº†ä¸€ä¸ªStringUtilå·¥å…·ç±»ï¼Œä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringUtil</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printNumber</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åå­—é•¿åº¦ï¼š"</span><span class="token operator">+</span>name<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥ï¼Œå†™ä¸€ä¸ªæµ‹è¯•ç±»ï¼Œæµ‹è¯•StringUtilå·¥å…·ç±»ä¸­çš„æ–¹æ³•èƒ½å¦æ­£å¸¸ä½¿ç”¨ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringUtilTest</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testPrintNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">printNumber</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">printNumber</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†™å®Œä»£ç ä¹‹åï¼Œæˆ‘ä»¬ä¼šå‘ç°æµ‹è¯•æ–¹æ³•å·¦è¾¹ï¼Œä¼šæœ‰ä¸€ä¸ªç»¿è‰²çš„ä¸‰è§’å½¢æŒ‰é’®ã€‚ç‚¹å‡»è¿™ä¸ªæŒ‰é’®ï¼Œå°±å¯ä»¥è¿è¡Œæµ‹è¯•æ–¹æ³•ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668507501024.png" alt="1668507501024"></p><h3 id="1-2-å•å…ƒæµ‹è¯•æ–­è¨€"><a href="#1-2-å•å…ƒæµ‹è¯•æ–­è¨€" class="headerlink" title="1.2 å•å…ƒæµ‹è¯•æ–­è¨€"></a>1.2 å•å…ƒæµ‹è¯•æ–­è¨€</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å­¦ä¹ ä¸€ä¸ªå•å…ƒæµ‹è¯•çš„æ–­è¨€æœºåˆ¶ã€‚<strong>æ‰€è°“æ–­è¨€ï¼šæ„æ€æ˜¯ç¨‹åºå‘˜å¯ä»¥é¢„æµ‹ç¨‹åºçš„è¿è¡Œç»“æœï¼Œæ£€æŸ¥ç¨‹åºçš„è¿è¡Œç»“æœæ˜¯å¦ä¸é¢„æœŸä¸€è‡´ã€‚</strong></p><p>æˆ‘ä»¬åœ¨StringUtilç±»ä¸­æ–°å¢ä¸€ä¸ªæµ‹è¯•æ–¹æ³•</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getMaxIndex</span><span class="token punctuation">(</span><span class="token class-name">String</span> data<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>data <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨StringUtilTestç±»ä¸­å†™ä¸€ä¸ªæµ‹è¯•æ–¹æ³•</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringUtilTest</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGetMaxIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token keyword">int</span> index1 <span class="token operator">=</span> <span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">getMaxIndex</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>index1<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">int</span> index2 <span class="token operator">=</span> <span class="token class-name">StringUtil</span><span class="token punctuation">.</span><span class="token function">getMaxIndex</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>index2<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//æ–­è¨€æœºåˆ¶ï¼šé¢„æµ‹index2çš„ç»“æœ</span>        <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•å†…éƒ¨æœ‰Bug"</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span>index2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¡¨ç¤ºæˆ‘ä»¬é¢„æœŸå€¼ä¸å®é™…å€¼ä¸ä¸€è‡´</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668508226111.png" alt="1668508226111"></p><h3 id="1-3-Junitæ¡†æ¶çš„å¸¸ç”¨æ³¨è§£"><a href="#1-3-Junitæ¡†æ¶çš„å¸¸ç”¨æ³¨è§£" class="headerlink" title="1.3 Junitæ¡†æ¶çš„å¸¸ç”¨æ³¨è§£"></a>1.3 Junitæ¡†æ¶çš„å¸¸ç”¨æ³¨è§£</h3><p>åŒå­¦ä»¬ï¼Œåˆšæ‰æˆ‘ä»¬ä»¥åŠå­¦ä¹ äº†@Testæ³¨è§£ï¼Œå¯ä»¥ç”¨æ¥æ ‡è®°ä¸€ä¸ªæ–¹æ³•ä¸ºæµ‹è¯•æ–¹æ³•ï¼Œæµ‹è¯•æ‰èƒ½å¯åŠ¨æ‰§è¡Œã€‚</p><p>é™¤äº†@Testæ³¨è§£ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ³¨è§£ï¼Œæˆ‘ä»¬è¦çŸ¥é“å…¶ä»–æ³¨è§£æ ‡è®°çš„æ–¹æ³•ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Œä»¥åŠå…¶ä»–æ³¨è§£åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹å¯ä»¥ä½¿ç”¨ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668508373865.png" alt="1668508373865"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¼”ç¤ºä¸€ä¸‹å…¶ä»–æ³¨è§£çš„ä½¿ç”¨ã€‚æˆ‘ä»¬åœ¨StringUtilTestæµ‹è¯•ç±»ä¸­ï¼Œå†æ–°å¢å‡ ä¸ªæµ‹è¯•æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringUtilTest</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Before</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--&gt; test1 Before æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@BeforeClass</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test11</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--&gt; test11 BeforeClass æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@After</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--&gt; test2 After æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@AfterCalss</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test22</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--&gt; test22 AfterCalss æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œä¸Šé¢çš„æµ‹è¯•ç±»ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè§‚å¯Ÿæ‰§è¡Œç»“æœç‰¹ç‚¹å¦‚ä¸‹</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token number">1.</span>è¢«<span class="token annotation punctuation">@BeforeClass</span>æ ‡è®°çš„æ–¹æ³•<span class="token punctuation">,</span>æ‰§è¡Œåœ¨æ‰€æœ‰æ–¹æ³•ä¹‹å‰<span class="token number">2.</span>è¢«<span class="token annotation punctuation">@AfterCalss</span>æ ‡è®°çš„æ–¹æ³•ï¼Œæ‰§è¡Œåœ¨æ‰€æœ‰æ–¹æ³•ä¹‹å<span class="token number">3.</span>è¢«<span class="token annotation punctuation">@Before</span>æ ‡è®°çš„æ–¹æ³•ï¼Œæ‰§è¡Œåœ¨æ¯ä¸€ä¸ª<span class="token annotation punctuation">@Test</span>æ–¹æ³•ä¹‹å‰<span class="token number">4.</span>è¢«<span class="token annotation punctuation">@After</span>æ ‡è®°çš„æ–¹æ³•ï¼Œæ‰§è¡Œåœ¨æ¯ä¸€ä¸ª<span class="token annotation punctuation">@Test</span>æ–¹æ³•ä¹‹å<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668508793279.png" alt="1668508793279"></p><p>æˆ‘ä»¬ç°åœ¨å·²ç»çŸ¥é“æ¯ä¸€ä¸ªæ³¨è§£çš„ä½œç”¨äº†ï¼Œé‚£ä»–ä»¬æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿåº”ç”¨åœºæ™¯åœ¨å“ªé‡Œ?</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘æƒ³åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•ä¸­ä½¿ç”¨Socketå¯¹è±¡ï¼Œå¹¶ä¸”ç”¨å®Œä¹‹åï¼Œéœ€è¦æŠŠSocketå…³é—­ã€‚ä»£ç å°±å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„ç»“æ„æ¥è®¾è®¡</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringUtilTest</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Socket</span> socket<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Before</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--&gt; test1 Before æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@BeforeClass</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test11</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--&gt; test11 BeforeClass æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//åˆå§‹åŒ–Socketå¯¹è±¡</span>        socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@After</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--&gt; test2 After æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@AfterCalss</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test22</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--&gt; test22 AfterCalss æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">//å…³é—­Socket</span>        socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åï¼Œæˆ‘ä»¬å†è¡¥å……ä¸€ç‚¹ã€‚å‰é¢çš„æ³¨è§£æ˜¯åŸºäºJunit4ç‰ˆæœ¬çš„ï¼Œå†Junit5ç‰ˆæœ¬ä¸­å¯¹æ³¨è§£ä½œäº†æ›´æ–°ï¼Œä½†æ˜¯ä½œç”¨æ˜¯ä¸€æ ·çš„ã€‚æ‰€ä»¥è¿™é‡Œå°±ä¸åšæ¼”ç¤ºäº†</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668509275659.png" alt="1668509275659"></p><h2 id="äºŒã€åå°„"><a href="#äºŒã€åå°„" class="headerlink" title="äºŒã€åå°„"></a>äºŒã€åå°„</h2><p>å„ä½å°ä¼™ä¼´ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦å­¦ä¹ åå°„æŠ€æœ¯ã€‚åœ¨å­¦ä¹ åå°„ä¹‹å‰ï¼Œæœ‰å‡ ä¸ªç‚¹éœ€è¦ç»™åŒå­¦ä»¬æå‰äº¤ä»£ä¸€ä¸‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ çš„åå°„ã€åŠ¨æ€ä»£ç†ã€æ³¨è§£ç­‰çŸ¥è¯†ç‚¹ï¼Œåœ¨ä»¥åå¼€å‘ä¸­æå°‘ç”¨åˆ°ï¼Œè¿™äº›æŠ€æœ¯éƒ½æ˜¯ä»¥åå­¦ä¹ æ¡†æ¶ã€æˆ–è€…åšæ¡†æ¶çš„åº•å±‚æºç ã€‚ç»™åŒå­¦ä»¬è®²è¿™äº›æŠ€æœ¯çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†ä»¥åæˆ‘ä»¬ç†è§£æ¡†æ¶ã€æˆ–è€…è‡ªå·±å¼€å‘æ¡†æ¶ç»™åˆ«äººç”¨ä½œé“ºå«çš„ã€‚åŒæ—¶ç”±äºè¿™äº›æŠ€æœ¯éå¸¸æŠ½è±¡ï¼Œæ‰€ä»¥æŒ‰ç…§å›½é™…æƒ¯ä¾‹ï¼Œæˆ‘ä»¬éƒ½ä¼šé‡‡ç”¨å…ˆå¸¦ç€å¤§å®¶å……åˆ†çš„è®¤è¯†å®ƒä»¬ï¼Œç„¶åå†äº†è§£å…¶ä½œç”¨å’Œåº”ç”¨åœºæ™¯ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±éœ€è¦å¸¦ç€åŒå­¦ä»¬è®¤è¯†ä¸€ä¸‹ä»€ä¹ˆæ˜¯åå°„ã€‚å…¶å®APIæ–‡æ¡£ä¸­å¯¹åå°„æœ‰è¯¦ç»†çš„è¯´æ˜ï¼Œæˆ‘ä»¬å»äº†è§£ä¸€ä¸‹ã€‚åœ¨java.lang.reflectåŒ…ä¸­å¯¹åå°„çš„è§£é‡Šå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668575265599.png" alt="1668575265599"></p><p>ç¿»è¯‘æˆäººè¯å°±æ˜¯ï¼š<strong>åå°„æŠ€æœ¯ï¼ŒæŒ‡çš„æ˜¯åŠ è½½ç±»çš„å­—èŠ‚ç åˆ°å†…å­˜ï¼Œå¹¶ä»¥ç¼–ç¨‹çš„æ–¹æ³•è§£åˆ¨å‡ºç±»ä¸­çš„å„ä¸ªæˆåˆ†ï¼ˆæˆå‘˜å˜é‡ã€æ–¹æ³•ã€æ„é€ å™¨ç­‰ï¼‰ã€‚</strong></p><p>åå°„æœ‰å•¥ç”¨å‘¢ï¼Ÿå…¶å®åå°„æ˜¯ç”¨æ¥å†™æ¡†æ¶ç”¨çš„ï¼Œä½†æ˜¯ç°é˜¶æ®µåŒå­¦ä»¬å¯¹æ¡†æ¶è¿˜æ²¡æœ‰å¤ªå¤šæ„Ÿè§‰ã€‚ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ç»™åŒå­¦ä»¬çœ‹ä¸€ä¸ªæˆ‘ä»¬è§è¿‡çš„ä¾‹å­ï¼šå¹³æ—¶æˆ‘ä»¬ç”¨IDEAå¼€å‘ç¨‹åºæ—¶ï¼Œç”¨å¯¹è±¡è°ƒç”¨æ–¹æ³•ï¼ŒIDEAä¼šæœ‰ä»£ç æç¤ºï¼Œideaä¼šå°†è¿™ä¸ªå¯¹è±¡èƒ½è°ƒç”¨çš„æ–¹æ³•éƒ½ç»™ä½ åˆ—ä¸¾å‡ºæ¥ï¼Œä¾›ä½ é€‰æ‹©ï¼Œå¦‚æœä¸‹å›¾æ‰€ç¤º</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668575796295.png" alt="1668575796295"></p><p>é—®é¢˜æ˜¯IDEAæ€ä¹ˆçŸ¥é“è¿™ä¸ªå¯¹è±¡æœ‰è¿™äº›æ–¹æ³•å¯ä»¥è°ƒç”¨å‘¢? åŸå› æ˜¯å¯¹è±¡èƒ½è°ƒç”¨çš„æ–¹æ³•å…¨éƒ½æ¥è‡ªäºç±»ï¼ŒIDEAé€šè¿‡åå°„æŠ€æœ¯å°±å¯ä»¥è·å–åˆ°ç±»ä¸­æœ‰å“ªäº›æ–¹æ³•ï¼Œå¹¶ä¸”æŠŠæ–¹æ³•çš„åç§°ä»¥æç¤ºæ¡†çš„å½¢å¼æ˜¾ç¤ºå‡ºæ¥ï¼Œæ‰€ä»¥ä½ èƒ½çœ‹åˆ°è¿™äº›æç¤ºäº†ã€‚</p><p>é‚£è®°äº‹æœ¬å†™ä»£ç ä¸ºä»€ä¹ˆæ²¡æœ‰æç¤ºå‘¢? å› ä¸ºæŠ€æœ¯æœ¬è½¯ä»¶æ²¡æœ‰åˆ©ç”¨åå°„æŠ€æœ¯å¼€å‘è¿™ç§ä»£ç æç¤ºçš„åŠŸèƒ½ï¼Œå“ˆå“ˆï¼ï¼</p><p>å¥½äº†ï¼Œè®¤è¯†äº†åå°„æ˜¯ä»€ä¹ˆä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘è¿˜æƒ³ç»™åŒå­¦ä»¬ä»‹ç»ä¸€ä¸‹åå°„å…·ä½“å­¦ä»€ä¹ˆï¼Ÿ</p><p>å› ä¸ºåå°„è·å–çš„æ˜¯ç±»çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆåå°„çš„ç¬¬ä¸€æ­¥é¦–å…ˆè·å–åˆ°ç±»æ‰è¡Œã€‚ç”±äºJavaçš„è®¾è®¡åŸåˆ™æ˜¯ä¸‡ç‰©çš†å¯¹è±¡ï¼Œè·å–åˆ°çš„ç±»å…¶å®ä¹Ÿæ˜¯ä»¥å¯¹è±¡çš„å½¢å¼ä½“ç°çš„ï¼Œ<strong>å«å­—èŠ‚ç å¯¹è±¡</strong>ï¼Œç”¨Classç±»æ¥è¡¨ç¤ºã€‚è·å–åˆ°å­—èŠ‚ç å¯¹è±¡ä¹‹åï¼Œå†é€šè¿‡å­—èŠ‚ç å¯¹è±¡å°±å¯ä»¥è·å–åˆ°ç±»çš„ç»„æˆæˆåˆ†äº†ï¼Œè¿™äº›ç»„æˆæˆåˆ†å…¶å®ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå…¶ä¸­<strong>æ¯ä¸€ä¸ªæˆå‘˜å˜é‡ç”¨Fieldç±»çš„å¯¹è±¡æ¥è¡¨ç¤º</strong>ã€<strong>æ¯ä¸€ä¸ªæˆå‘˜æ–¹æ³•ç”¨Methodç±»çš„å¯¹è±¡æ¥è¡¨ç¤º</strong>ï¼Œ<strong>æ¯ä¸€ä¸ªæ„é€ å™¨ç”¨Constructorç±»çš„å¯¹è±¡æ¥è¡¨ç¤º</strong>ã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668576426355.png" alt="1668576426355"></p><h3 id="1-1-è·å–ç±»çš„å­—èŠ‚ç "><a href="#1-1-è·å–ç±»çš„å­—èŠ‚ç " class="headerlink" title="1.1 è·å–ç±»çš„å­—èŠ‚ç "></a>1.1 è·å–ç±»çš„å­—èŠ‚ç </h3><p>åå°„çš„ç¬¬ä¸€æ­¥ï¼šæ˜¯å°†å­—èŠ‚ç åŠ è½½åˆ°å†…å­˜ï¼Œæˆ‘ä»¬éœ€è¦è·å–åˆ°çš„å­—èŠ‚ç å¯¹è±¡ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668576691591.png" alt="1668576691591"></p><p>æ¯”å¦‚æœ‰ä¸€ä¸ªStudentç±»ï¼Œè·å–Studentç±»çš„å­—èŠ‚ç ä»£ç æœ‰ä¸‰ç§å†™æ³•ã€‚ä¸ç®¡ç”¨å“ªä¸€ç§æ–¹å¼ï¼Œè·å–åˆ°çš„å­—èŠ‚ç å¯¹è±¡å…¶å®æ˜¯åŒä¸€ä¸ªã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test1Class</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">Class</span> c1 <span class="token operator">=</span> <span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è·å–å…¨ç±»å</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c1<span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è·å–ç®€å•ç±»å</span>                <span class="token class-name">Class</span> c2 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.itheima.d2_reflect.Student"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c1 <span class="token operator">==</span> c2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>                <span class="token class-name">Student</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Class</span> c3 <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c2 <span class="token operator">==</span> c3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-2-è·å–ç±»çš„æ„é€ å™¨"><a href="#1-2-è·å–ç±»çš„æ„é€ å™¨" class="headerlink" title="1.2 è·å–ç±»çš„æ„é€ å™¨"></a>1.2 è·å–ç±»çš„æ„é€ å™¨</h3><p>åŒå­¦ä»¬ï¼Œä¸Šä¸€èŠ‚æˆ‘ä»¬å·²ç»å¯ä»¥è·å–åˆ°ç±»çš„å­—èŠ‚ç å¯¹è±¡äº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹é€šè¿‡å­—èŠ‚ç å¯¹è±¡è·å–æ„é€ å™¨ï¼Œå¹¶ä½¿ç”¨æ„é€ å™¨åˆ›å»ºå¯¹è±¡ã€‚</p><p>è·å–æ„é€ å™¨ï¼Œéœ€è¦ç”¨åˆ°Classç±»æä¾›çš„å‡ ä¸ªæ–¹æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668577010983.png" alt="1668577010983"></p><p>æƒ³è¦å¿«é€Ÿè®°ä½è¿™ä¸ªæ–¹æ³•çš„åŒºåˆ«ï¼Œç»™åŒå­¦ä»¬è¯´ä¸€ä¸‹è¿™äº›æ–¹æ³•çš„å‘½åè§„å¾‹ï¼ŒæŒ‰ç…§è§„å¾‹æ¥è®°å°±å¾ˆæ–¹ä¾¿äº†ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">get<span class="token operator">:</span>è·å–<span class="token class-name">Declared</span><span class="token operator">:</span> æœ‰è¿™ä¸ªå•è¯è¡¨ç¤ºå¯ä»¥è·å–ä»»æ„ä¸€ä¸ªï¼Œæ²¡æœ‰è¿™ä¸ªå•è¯è¡¨ç¤ºåªèƒ½è·å–ä¸€ä¸ª<span class="token keyword">public</span>ä¿®é¥°çš„<span class="token class-name">Constructor</span><span class="token operator">:</span> æ„é€ æ–¹æ³•çš„æ„æ€åç¼€s<span class="token operator">:</span> è¡¨ç¤ºå¯ä»¥è·å–å¤šä¸ªï¼Œæ²¡æœ‰åç¼€såªèƒ½è·å–ä¸€ä¸ª<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¯ä¸å¤šå°‘ï¼Œä¸Šä»£ç ã€‚å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªCatç±»ï¼Œé‡Œé¢æœ‰å‡ ä¸ªæ„é€ æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><ol><li>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œæ¥æµ‹è¯•è·å–ç±»ä¸­æ‰€æœ‰çš„æ„é€ å™¨</li></ol></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test2Constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGetConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//1ã€åå°„ç¬¬ä¸€æ­¥ï¼šå¿…é¡»å…ˆå¾—åˆ°è¿™ä¸ªç±»çš„Classå¯¹è±¡</span>        <span class="token class-name">Class</span> c <span class="token operator">=</span> <span class="token class-name">Cat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>                <span class="token comment">//2ã€è·å–ç±»çš„å…¨éƒ¨æ„é€ å™¨</span>        <span class="token class-name">Constructor</span><span class="token punctuation">[</span><span class="token punctuation">]</span> constructors <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//3ã€éå†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ„é€ å™¨å¯¹è±¡ã€‚</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Constructor</span> constructor<span class="token operator">:</span> constructors<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>constructor<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"---&gt; å‚æ•°ä¸ªæ•°ï¼š"</span><span class="token operator">+</span>constructor<span class="token punctuation">.</span><span class="token function">getParameterCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œæµ‹è¯•æ–¹æ³•æ‰“å°ç»“æœå¦‚ä¸‹</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668578112815.png" alt="1668578112815"></p><ul><li><ol start="2"><li>åˆšæ‰æ¼”ç¤ºçš„æ˜¯è·å–Catç±»ä¸­æ‰€æœ‰çš„æ„é€ å™¨ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¼”ç¤ºå•ä¸ªæ„é€ å™¨è¯•ä¸€è¯•</li></ol></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test2Constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGetConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//1ã€åå°„ç¬¬ä¸€æ­¥ï¼šå¿…é¡»å…ˆå¾—åˆ°è¿™ä¸ªç±»çš„Classå¯¹è±¡</span>        <span class="token class-name">Class</span> c <span class="token operator">=</span> <span class="token class-name">Cat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>                <span class="token comment">//2ã€è·å–ç±»publicä¿®é¥°çš„ç©ºå‚æ•°æ„é€ å™¨</span>        <span class="token class-name">Constructor</span> constructor1 <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>constructor1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"---&gt; å‚æ•°ä¸ªæ•°ï¼š"</span><span class="token operator">+</span>constructor1<span class="token punctuation">.</span><span class="token function">getParameterCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//3ã€è·å–privateä¿®é¥°çš„æœ‰ä¸¤ä¸ªå‚æ•°çš„æ„é€ å™¨ï¼Œç¬¬ä¸€ä¸ªå‚æ•°Stringç±»å‹ï¼Œç¬¬äºŒä¸ªå‚æ•°intç±»å‹</span>        <span class="token class-name">Constructor</span> constructor2 <span class="token operator">=</span>             c<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>constructor2<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"---&gt; å‚æ•°ä¸ªæ•°ï¼š"</span><span class="token operator">+</span>constructor1<span class="token punctuation">.</span><span class="token function">getParameterCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰“å°ç»“æœå¦‚ä¸‹</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668578397467.png" alt="1668578397467"></p><h3 id="1-3-åå°„è·å–æ„é€ å™¨çš„ä½œç”¨"><a href="#1-3-åå°„è·å–æ„é€ å™¨çš„ä½œç”¨" class="headerlink" title="1.3 åå°„è·å–æ„é€ å™¨çš„ä½œç”¨"></a>1.3 åå°„è·å–æ„é€ å™¨çš„ä½œç”¨</h3><p>åŒå­¦ä»¬ï¼Œåˆšæ‰ä¸Šä¸€èŠ‚æˆ‘ä»¬å·²ç»è·å–åˆ°äº†Catç±»ä¸­çš„æ„é€ å™¨ã€‚è·å–åˆ°æ„é€ å™¨åï¼Œæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ</p><p>å…¶å®æ„é€ å™¨çš„ä½œç”¨ï¼š<strong>åˆå§‹åŒ–å¯¹è±¡å¹¶è¿”å›</strong>ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°å¦‚ä¸‹çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œæ³¨æ„ï¼šè¿™ä¸¤ä¸ªæ–¹æ³•æ—¶å±äºConstructorçš„ï¼Œéœ€è¦ç”¨Constructorå¯¹è±¡æ¥è°ƒç”¨ã€‚ </p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668578639149.png" alt="1668578639149"></p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œconstructor1å’Œconstructor2åˆ†åˆ«è¡¨ç¤ºCatç±»ä¸­çš„ä¸¤ä¸ªæ„é€ å™¨ã€‚ç°åœ¨æˆ‘è¦æŠŠè¿™ä¸¤ä¸ªæ„é€ å™¨æ‰§è¡Œèµ·æ¥</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668578807439.png" alt="1668578807439"></p><p>ç”±äºæ„é€ å™¨æ˜¯privateä¿®é¥°çš„ï¼Œå…ˆéœ€è¦è°ƒç”¨<code>setAccessible(true)</code> è¡¨ç¤ºç¦æ­¢æ£€æŸ¥è®¿é—®æ§åˆ¶ï¼Œç„¶åå†è°ƒç”¨<code>newInstance(å®å‚åˆ—è¡¨)</code> å°±å¯ä»¥æ‰§è¡Œæ„é€ å™¨ï¼Œå®Œæˆå¯¹è±¡çš„åˆå§‹åŒ–äº†ã€‚</p><p>ä»£ç å¦‚ä¸‹ï¼šä¸ºäº†çœ‹åˆ°æ„é€ å™¨çœŸçš„æ‰§è¡Œï¼Œ æ•…æ„åœ¨ä¸¤ä¸ªæ„é€ å™¨ä¸­åˆ†åˆ«åŠ äº†ä¸¤ä¸ªæ‰“å°è¯­å¥</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668579315586.png" alt="1668579315586"></p><p>ä»£ç çš„æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668579177901.png" alt="1668579177901"></p><h3 id="1-4-åå°„è·å–æˆå‘˜å˜é‡-ä½¿ç”¨"><a href="#1-4-åå°„è·å–æˆå‘˜å˜é‡-ä½¿ç”¨" class="headerlink" title="1.4 åå°„è·å–æˆå‘˜å˜é‡&amp;ä½¿ç”¨"></a>1.4 åå°„è·å–æˆå‘˜å˜é‡&amp;ä½¿ç”¨</h3><p>åŒå­¦ä»¬ï¼Œä¸Šä¸€èŠ‚æˆ‘ä»¬å·²ç»å­¦ä¹ äº†è·å–ç±»çš„æ„é€ æ–¹æ³•å¹¶ä½¿ç”¨ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†å­¦ä¹ è·å–ç±»çš„æˆå‘˜å˜é‡ï¼Œå¹¶ä½¿ç”¨ã€‚</p><p>å…¶å®å¥—è·¯æ˜¯ä¸€æ ·çš„ï¼Œåœ¨Classç±»ä¸­æä¾›äº†è·å–æˆå‘˜å˜é‡çš„æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668579517323.png" alt="1668579517323"></p><p>è¿™äº›æ–¹æ³•çš„è®°å¿†è§„åˆ™ï¼Œå¦‚ä¸‹</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">get<span class="token operator">:</span>è·å–<span class="token class-name">Declared</span><span class="token operator">:</span> æœ‰è¿™ä¸ªå•è¯è¡¨ç¤ºå¯ä»¥è·å–ä»»æ„ä¸€ä¸ªï¼Œæ²¡æœ‰è¿™ä¸ªå•è¯è¡¨ç¤ºåªèƒ½è·å–ä¸€ä¸ª<span class="token keyword">public</span>ä¿®é¥°çš„<span class="token class-name">Field</span><span class="token operator">:</span> æˆå‘˜å˜é‡çš„æ„æ€åç¼€s<span class="token operator">:</span> è¡¨ç¤ºå¯ä»¥è·å–å¤šä¸ªï¼Œæ²¡æœ‰åç¼€såªèƒ½è·å–ä¸€ä¸ª<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å‡è®¾æœ‰ä¸€ä¸ªCatç±»å®ƒæœ‰è‹¥å¹²ä¸ªæˆå‘˜å˜é‡ï¼Œç”¨Classç±»æä¾› çš„æ–¹æ³•å°†æˆå‘˜å˜é‡çš„å¯¹è±¡è·å–å‡ºæ¥ã€‚</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668579681294.png" alt="1668579681294"></p><p>æ‰§è¡Œå®Œä¸Šé¢çš„ä»£ç ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ§åˆ¶å°ä¸Šæ‰“å°è¾“å‡ºäº†ï¼Œæ¯ä¸€ä¸ªæˆå‘˜å˜é‡çš„åç§°å’Œå®ƒçš„ç±»å‹ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668579804732.png" alt="1668579804732"></p><ul><li>è·å–åˆ°æˆå‘˜å˜é‡çš„å¯¹è±¡ä¹‹åè¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ</li></ul><p>åœ¨Filedç±»ä¸­æä¾›ç»™ç»™æˆå‘˜å˜é‡èµ‹å€¼å’Œè·å–å€¼çš„æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668580075962.png" alt="1668580075962"></p><p>å†æ¬¡å¼ºè°ƒä¸€ä¸‹è®¾ç½®å€¼ã€è·å–å€¼çš„æ–¹æ³•æ—¶Filedç±»çš„éœ€è¦ç”¨Filedç±»çš„å¯¹è±¡æ¥è°ƒç”¨ï¼Œè€Œä¸”ä¸ç®¡æ˜¯è®¾ç½®å€¼ã€è¿˜æ˜¯è·å–å€¼ï¼Œéƒ½éœ€è¦ä¾èµ–äºè¯¥å˜é‡æ‰€å±çš„å¯¹è±¡ã€‚ä»£ç å¦‚ä¸‹</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668580288930.png" alt="1668580288930"></p><p>æ‰§è¡Œä»£ç ï¼Œæ§åˆ¶å°ä¼šæœ‰å¦‚ä¸‹çš„æ‰“å°</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668580517173.png" alt="1668580517173"></p><h3 id="1-5-åå°„è·å–æˆå‘˜æ–¹æ³•"><a href="#1-5-åå°„è·å–æˆå‘˜æ–¹æ³•" class="headerlink" title="1.5 åå°„è·å–æˆå‘˜æ–¹æ³•"></a>1.5 åå°„è·å–æˆå‘˜æ–¹æ³•</h3><p>å„ä½åŒå­¦ï¼Œä¸Šé¢å‡ èŠ‚æˆ‘ä»¬å·²ç»å­¦ä¹ äº†åå°„è·å–æ„é€ æ–¹æ³•ã€åå°„è·å–æˆå‘˜å˜é‡ï¼Œè¿˜å‰©ä¸‹æœ€åä¸€ä¸ªå°±æ˜¯åå°„è·å–æˆå‘˜æ–¹æ³•å¹¶ä½¿ç”¨äº†ã€‚</p><p>åœ¨Javaä¸­åå°„åŒ…ä¸­ï¼Œæ¯ä¸€ä¸ªæˆå‘˜æ–¹æ³•ç”¨Methodå¯¹è±¡æ¥è¡¨ç¤ºï¼Œé€šè¿‡Classç±»æä¾›çš„æ–¹æ³•å¯ä»¥è·å–ç±»ä¸­çš„æˆå‘˜æ–¹æ³•å¯¹è±¡ã€‚å¦‚ä¸‹ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668580761089.png" alt="1668580761089"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜æ˜¯ç”¨ä»£ç æ¼”ç¤ºä¸€ä¸‹ï¼šå‡è®¾æœ‰ä¸€ä¸ªCatç±»ï¼Œåœ¨Catç±»ä¸­çº¢æœ‰è‹¥å¹²ä¸ªæˆå‘˜æ–¹æ³•</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç©ºå‚æ•°æ„é€ æ–¹æ³•æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœ‰å‚æ•°æ„é€ æ–¹æ³•æ‰§è¡Œäº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"(&gt;^Ï‰^&lt;)å–µè·‘å¾—è´¼å¿«~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"(&gt;^Ï‰^&lt;)å–µçˆ±åƒçŒ«ç²®~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"(&gt;^Ï‰^&lt;)å–µçˆ±åƒ:"</span><span class="token operator">+</span>name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>     <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥ï¼Œé€šè¿‡åå°„è·å–Catç±»ä¸­æ‰€æœ‰çš„æˆå‘˜æ–¹æ³•ï¼Œæ¯ä¸€ä¸ªæˆå‘˜æ–¹æ³•éƒ½æ˜¯ä¸€ä¸ªMethodå¯¹è±¡</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test3Method</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//1ã€åå°„ç¬¬ä¸€æ­¥ï¼šå…ˆè·å–åˆ°Classå¯¹è±¡</span>        <span class="token class-name">Class</span> c <span class="token operator">=</span> <span class="token class-name">Cat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>                <span class="token comment">//2ã€è·å–ç±»ä¸­çš„å…¨éƒ¨æˆå‘˜æ–¹æ³•</span>        <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDecalaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//3ã€éå†è¿™ä¸ªæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ–¹æ³•å¯¹è±¡</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"--&gt;"</span><span class="token operator">+</span>method<span class="token punctuation">.</span><span class="token function">getParameterCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"--&gt;"</span><span class="token operator">+</span>method<span class="token punctuation">.</span><span class="token function">getReturnType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œè¿è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<strong>æ‰“å°è¾“å‡ºæ¯ä¸€ä¸ªæˆå‘˜æ–¹æ³•çš„åç§°ã€å‚æ•°æ ¼å¼ã€è¿”å›å€¼ç±»å‹</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668581537215.png" alt="1668581537215"></p><p>ä¹Ÿèƒ½è·å–å•ä¸ªæŒ‡å®šçš„æˆå‘˜æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668581678388.png" alt="1668581678388"></p><hr><p><strong>è·å–åˆ°æˆå‘˜æ–¹æ³•ä¹‹åï¼Œæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ</strong></p><p>åœ¨Methodç±»ä¸­æä¾›äº†æ–¹æ³•ï¼Œå¯ä»¥å°†æ–¹æ³•è‡ªå·±æ‰§è¡Œèµ·æ¥ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668581800777.png" alt="1668581800777"></p><p>ä¸‹é¢æˆ‘ä»¬æ¼”ç¤ºä¸€ä¸‹ï¼ŒæŠŠ<code>run()</code>æ–¹æ³•å’Œ<code>eat(String name)</code>æ–¹æ³•æ‰§è¡Œèµ·æ¥ã€‚çœ‹åˆ†å‰²çº¿ä¹‹ä¸‹çš„ä»£ç </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test3Method</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//1ã€åå°„ç¬¬ä¸€æ­¥ï¼šå…ˆè·å–åˆ°Classå¯¹è±¡</span>        <span class="token class-name">Class</span> c <span class="token operator">=</span> <span class="token class-name">Cat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>                <span class="token comment">//2ã€è·å–ç±»ä¸­çš„å…¨éƒ¨æˆå‘˜æ–¹æ³•</span>        <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDecalaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//3ã€éå†è¿™ä¸ªæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ–¹æ³•å¯¹è±¡</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"--&gt;"</span><span class="token operator">+</span>method<span class="token punctuation">.</span><span class="token function">getParameterCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"--&gt;"</span><span class="token operator">+</span>method<span class="token punctuation">.</span><span class="token function">getReturnType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-----------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//4ã€è·å–privateä¿®é¥°çš„runæ–¹æ³•ï¼Œå¾—åˆ°Methodå¯¹è±¡</span>        <span class="token class-name">Method</span> run <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDecalaredMethod</span><span class="token punctuation">(</span><span class="token string">"run"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ‰§è¡Œrunæ–¹æ³•,åœ¨æ‰§è¡Œå‰éœ€è¦å–æ¶ˆæƒé™æ£€æŸ¥</span>        <span class="token class-name">Cat</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        run<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span> rs1 <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>cat<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs1<span class="token punctuation">)</span>                <span class="token comment">//5ã€è·å–private ä¿®é¥°çš„eat(String name)æ–¹æ³•ï¼Œå¾—åˆ°Methodå¯¹è±¡</span>        <span class="token class-name">Method</span> eat <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">"eat"</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        eat<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span> rs2 <span class="token operator">=</span> eat<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>cat<span class="token punctuation">,</span><span class="token string">"é±¼å„¿"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs2<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰“å°ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šrun()æ–¹æ³•æ‰§è¡Œåæ‰“å°<code>çŒ«è·‘å¾—è´¼å¿«~~</code>ï¼Œè¿”å›<code>null</code>ï¼› eat()æ–¹æ³•æ‰§è¡Œå®Œï¼Œç›´æ¥è¿”å›<code>çŒ«æœ€çˆ±åƒ:é±¼å„¿</code></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668582519455.png" alt="1668582519455"></p><h3 id="1-6-åå°„çš„åº”ç”¨"><a href="#1-6-åå°„çš„åº”ç”¨" class="headerlink" title="1.6 åå°„çš„åº”ç”¨"></a>1.6 åå°„çš„åº”ç”¨</h3><p>å„ä½å°ä¼™ä¼´ï¼ŒæŒ‰ç…§å‰é¢æˆ‘ä»¬å­¦ä¹ åå°„çš„å¥—è·¯ï¼Œæˆ‘ä»¬å·²ç»å……åˆ†è®¤è¯†äº†ä»€ä¹ˆæ˜¯åå°„ï¼Œä»¥åŠåå°„çš„æ ¸å¿ƒä½œç”¨æ˜¯ç”¨æ¥è·å–ç±»çš„å„ä¸ªç»„æˆéƒ¨åˆ†å¹¶æ‰§è¡Œä»–ä»¬ã€‚ä½†æ˜¯ç”±äºåŒå­¦ä»¬çš„ç»éªŒæœ‰é™ï¼Œå¯¹äºåå°„çš„å…·ä½“åº”ç”¨åœºæ™¯è¿˜æ˜¯å¾ˆéš¾æ„Ÿå—åˆ°çš„ï¼ˆè¿™ä¸ªç›®å‰æ²¡æœ‰å¤ªå¥½çš„åŠæ³•ï¼Œåªèƒ½æ…¢æ…¢ç§¯ç´¯ï¼Œç­‰ç»éªŒç§¯ç´¯åˆ°ä¸€å®šç¨‹åº¦ï¼Œå°±ä¼šè±ç„¶å¼€æœ—äº†ï¼‰ã€‚</p><p>æˆ‘ä»¬ä¸€ç›´è¯´åå°„ä½¿ç”¨æ¥å†™æ¡†æ¶çš„ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å†™ä¸€ä¸ªç®€æ˜“çš„æ¡†æ¶ï¼Œç®€å•çª¥æ¢ä¸€ä¸‹åå°„çš„åº”ç”¨ã€‚åå°„å…¶å®æ˜¯éå¸¸å¼ºå¤§çš„ï¼Œè¿™ä¸ªæ¡ˆä¾‹ä¹Ÿä»…ä»…å€¼å°è¯•ç‰›åˆ€ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668583255686.png" alt="1668583255686"></p><p>éœ€æ±‚æ˜¯è®©æˆ‘ä»¬å†™ä¸€ä¸ªæ¡†æ¶ï¼Œèƒ½å¤Ÿå°†ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„å±æ€§åå’Œå±æ€§å€¼å†™åˆ°æ–‡ä»¶ä¸­å»ã€‚ä¸ç®¡è¿™ä¸ªå¯¹è±¡æœ‰å¤šå°‘ä¸ªå±æ€§ï¼Œä¹Ÿä¸ç®¡è¿™ä¸ªå¯¹è±¡çš„å±æ€§åæ˜¯å¦ç›¸åŒã€‚</p><p>åˆ†æä¸€ä¸‹è¯¥æ€ä¹ˆåš</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token number">1.</span>å…ˆå†™å¥½ä¸¤ä¸ªç±»ï¼Œä¸€ä¸ª<span class="token class-name">Student</span>ç±»å’Œ<span class="token class-name">Teacher</span>ç±»<span class="token number">2.</span>å†™ä¸€ä¸ª<span class="token class-name">ObjectFrame</span>ç±»ä»£è¡¨æ¡†æœ¬æ¶åœ¨<span class="token class-name">ObjectFrame</span>ç±»ä¸­å®šä¹‰ä¸€ä¸ª<span class="token function">saveObject</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span>æ–¹æ³•ï¼Œç”¨äºå°†ä»»æ„å¯¹è±¡å­˜åˆ°æ–‡ä»¶ä¸­å»å‚æ•°ï¼š<span class="token class-name">Object</span> obj<span class="token operator">:</span> å°±è¡¨ç¤ºè¦å­˜å…¥æ–‡ä»¶ä¸­çš„å¯¹è±¡<span class="token number">3.</span>ç¼–å†™æ–¹æ³•å†…éƒ¨çš„ä»£ç ï¼Œå¾€æ–‡ä»¶ä¸­å­˜å‚¨å¯¹è±¡çš„å±æ€§åå’Œå±æ€§å€¼<span class="token number">1</span><span class="token punctuation">)</span>å‚æ•°objå¯¹è±¡ä¸­æœ‰å“ªäº›å±æ€§ï¼Œå±æ€§åæ˜¯ä»€ä¹ˆå®ç°å€¼æ˜¯ä»€ä¹ˆï¼Œä¸­æœ‰å¯¹è±¡è‡ªå·±æœ€æ¸…æ¥šã€‚<span class="token number">2</span><span class="token punctuation">)</span>æ¥ç€å°±é€šè¿‡åå°„è·å–ç±»çš„æˆå‘˜å˜é‡ä¿¡æ¯äº†ï¼ˆå˜é‡åã€å˜é‡å€¼ï¼‰<span class="token number">3</span><span class="token punctuation">)</span>æŠŠå˜é‡åå’Œå˜é‡å€¼å†™åˆ°æ–‡ä»¶ä¸­å»<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†™ä¸€ä¸ªObjectFrameè¡¨ç¤ºè‡ªå·±è®¾è®¡çš„æ¡†æ¶ï¼Œä»£ç å¦‚ä¸‹å›¾æ‰€ç¤º</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ObjectFrame</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">saveObject</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>        <span class="token class-name">PrintStream</span> ps <span class="token operator">=</span>             <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"æ¨¡å—å\\src\\data.txt"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//1)å‚æ•°objå¯¹è±¡ä¸­æœ‰å“ªäº›å±æ€§ï¼Œå±æ€§åæ˜¯ä»€ä¹ˆå®ç°å€¼æ˜¯ä»€ä¹ˆï¼Œä¸­æœ‰å¯¹è±¡è‡ªå·±æœ€æ¸…æ¥šã€‚</span><span class="token comment">//2)æ¥ç€å°±é€šè¿‡åå°„è·å–ç±»çš„æˆå‘˜å˜é‡ä¿¡æ¯äº†ï¼ˆå˜é‡åã€å˜é‡å€¼ï¼‰</span>        <span class="token class-name">Class</span> c <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è·å–å­—èŠ‚ç </span>        ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"---------"</span><span class="token operator">+</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"---------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è·å–æ‰€æœ‰æˆå‘˜å˜é‡</span><span class="token comment">//3)æŠŠå˜é‡åå’Œå˜é‡å€¼å†™åˆ°æ–‡ä»¶ä¸­å»</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token class-name">String</span> name <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Object</span> value <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">;</span>            ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        ps<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨è‡ªå·±è®¾è®¡çš„æ¡†æ¶ï¼Œå¾€æ–‡ä»¶ä¸­å†™å…¥Studentå¯¹è±¡çš„ä¿¡æ¯å’ŒTeacherå¯¹è±¡çš„ä¿¡æ¯ã€‚</p><p>å…ˆå‡†å¤‡å¥½Studentç±»å’ŒTeacherç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">char</span> sex<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">double</span> height<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> hobby<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Teacher</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">double</span> salary<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±»ï¼Œåœ¨æµ‹è¯•ä¸­ç±»åˆ›å»ºä¸€ä¸ªStudentå¯¹è±¡ï¼Œåˆ›å»ºä¸€ä¸ªTeacherå¯¹è±¡ï¼Œç”¨ObjectFrameçš„æ–¹æ³•æŠŠè¿™ä¸¤ä¸ªå¯¹è±¡æ‰€æœ‰çš„å±æ€§åå’Œå±æ€§å€¼å†™åˆ°æ–‡ä»¶ä¸­å»ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test5Frame</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>        <span class="token class-name">Student</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"é»‘é©¬å´å½¦ç¥–"</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span> <span class="token char">'ç”·'</span><span class="token punctuation">,</span> <span class="token number">185.3</span><span class="token punctuation">,</span> <span class="token string">"ç¯®çƒï¼Œå†°çƒï¼Œé˜…è¯»"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Teacher</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">"æ’­å¦"</span><span class="token punctuation">,</span><span class="token number">999.9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">ObjectFrame</span><span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ObjectFrame</span><span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰“å¼€data.txtæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå°±è¯´æ˜æˆ‘ä»¬è¿™ä¸ªæ¡†æ¶çš„åŠŸèƒ½å·²ç»å®ç°äº†</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1668584556229.png" alt="1668584556229"></p><p>å¥½äº†ï¼ŒåŒå­¦ä»¬ï¼Œæ­å–œå¤§å®¶ï¼å­¦ä¹ åˆ°è¿™é‡Œï¼Œåå°„æŠ€æœ¯å·²ç»å­¦ä¹ å®Œæ¯•äº†ã€‚</p><hr><h2 id="ä¸‰ã€æ³¨è§£"><a href="#ä¸‰ã€æ³¨è§£" class="headerlink" title="ä¸‰ã€æ³¨è§£"></a>ä¸‰ã€æ³¨è§£</h2><h3 id="3-1-è®¤è¯†æ³¨è§£-å®šä¹‰æ³¨è§£"><a href="#3-1-è®¤è¯†æ³¨è§£-å®šä¹‰æ³¨è§£" class="headerlink" title="3.1 è®¤è¯†æ³¨è§£&amp;å®šä¹‰æ³¨è§£"></a>3.1 è®¤è¯†æ³¨è§£&amp;å®šä¹‰æ³¨è§£</h3><p>å„ä½å°ä¼™ä¼´ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ æ³¨è§£ã€‚æ³¨è§£å’Œåå°„ä¸€æ ·ï¼Œéƒ½æ˜¯ç”¨æ¥åšæ¡†æ¶çš„ï¼Œæˆ‘ä»¬è¿™é‡Œå­¦ä¹ æ³¨è§£çš„ç›®çš„å…¶å®æ˜¯ä¸ºäº†ä»¥åå­¦ä¹ æ¡†æ¶æˆ–è€…åšæ¡†æ¶åšé“ºå«çš„ã€‚</p><p>é‚£æ³¨è§£è¯¥æ€ä¹ˆå­¦å‘¢ï¼Ÿå’Œåå°„çš„å­¦ä¹ å¥—è·¯ä¸€æ ·ï¼Œæˆ‘ä»¬å…ˆå……åˆ†çš„è®¤è¯†æ³¨è§£ï¼ŒæŒæ¡æ³¨è§£çš„å®šä¹‰å’Œä½¿ç”¨æ ¼å¼ï¼Œç„¶åå†å­¦ä¹ å®ƒçš„åº”ç”¨åœºæ™¯ã€‚</p><blockquote><p><strong>å…ˆæ¥è®¤è¯†ä¸€ä¸‹ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ</strong></p></blockquote><p><strong>Javaæ³¨è§£æ˜¯ä»£ç ä¸­çš„ç‰¹æ®Šæ ‡è®°ï¼Œæ¯”å¦‚@Overrideã€@Testç­‰ï¼Œä½œç”¨æ˜¯ï¼šè®©å…¶ä»–ç¨‹åºæ ¹æ®æ³¨è§£ä¿¡æ¯å†³å®šæ€ä¹ˆæ‰§è¡Œè¯¥ç¨‹åºã€‚</strong></p><p>æ¯”å¦‚ï¼šJunitæ¡†æ¶çš„@Testæ³¨è§£å¯ä»¥ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œç”¨æ¥æ ‡è®°è¿™ä¸ªæ–¹æ³•æ˜¯æµ‹è¯•æ–¹æ³•ï¼Œè¢«@Testæ ‡è®°çš„æ–¹æ³•èƒ½å¤Ÿè¢«Junitæ¡†æ¶æ‰§è¡Œã€‚</p><p>å†æ¯”å¦‚ï¼š@Overrideæ³¨è§£å¯ä»¥ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œç”¨æ¥æ ‡è®°è¿™ä¸ªæ–¹æ³•æ˜¯é‡å†™æ–¹æ³•ï¼Œè¢«@Overrideæ³¨è§£æ ‡è®°çš„æ–¹æ³•èƒ½å¤Ÿè¢«IDEAè¯†åˆ«è¿›è¡Œè¯­æ³•æ£€æŸ¥ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669603664584.png" alt="1669603664584"></p><ul><li><strong>æ³¨è§£ä¸å…‰å¯ä»¥ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œè¿˜å¯ä»¥ç”¨åœ¨ç±»ä¸Šã€å˜é‡ä¸Šã€æ„é€ å™¨ä¸Šç­‰ä½ç½®ã€‚</strong></li></ul><p>ä¸Šé¢æˆ‘ä»¬è¯´çš„@Testæ³¨è§£ã€@Overideæ³¨è§£æ˜¯åˆ«äººå®šä¹‰å¥½ç»™æˆ‘ä»¬ç”¨çš„ï¼Œå°†æ¥å¦‚æœéœ€è¦è‡ªå·±å»å¼€å‘æ¡†æ¶ï¼Œå°±éœ€è¦æˆ‘ä»¬è‡ªå·±å®šä¹‰æ³¨è§£ã€‚</p><blockquote><p><strong>æ¥ç€æˆ‘ä»¬å­¦ä¹ è‡ªå®šä¹‰æ³¨è§£</strong></p></blockquote><p>è‡ªå®šä¹‰æ³¨è§£çš„æ ¼å¼å¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669604102185.png" alt="1669604102185"></p><p>æ¯”å¦‚ï¼šç°åœ¨æˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªMyTestæ³¨è§£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyTest</span><span class="token punctuation">{</span>    <span class="token class-name">String</span> <span class="token function">aaa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">boolean</span> <span class="token function">bbb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">//default true è¡¨ç¤ºé»˜è®¤å€¼ä¸ºtrue,ä½¿ç”¨æ—¶å¯ä»¥ä¸èµ‹å€¼ã€‚</span>    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">ccc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®šä¹‰å¥½MyTestæ³¨è§£ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨MyTestæ³¨è§£åœ¨ç±»ä¸Šã€æ–¹æ³•ä¸Šç­‰ä½ç½®åšæ ‡è®°ã€‚æ³¨æ„ä½¿ç”¨æ³¨è§£æ—¶éœ€è¦åŠ @ç¬¦å·ï¼Œå¦‚ä¸‹</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@MyTest1</span><span class="token punctuation">(</span>aaa<span class="token operator">=</span><span class="token string">"ç‰›é­”ç‹"</span><span class="token punctuation">,</span>ccc<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"HTML"</span><span class="token punctuation">,</span><span class="token string">"Java"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnnotationTest1</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@MyTest</span><span class="token punctuation">(</span>aaa<span class="token operator">=</span><span class="token string">"é“æ‰‡å…¬ä¸»"</span><span class="token punctuation">,</span>bbb<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">,</span> ccc<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"Python"</span><span class="token punctuation">,</span><span class="token string">"å‰ç«¯"</span><span class="token punctuation">,</span><span class="token string">"Java"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ï¼šæ³¨è§£çš„å±æ€§åå¦‚ä½•æ˜¯valueçš„è¯ï¼Œå¹¶ä¸”åªæœ‰valueæ²¡æœ‰é»˜è®¤å€¼ï¼Œä½¿ç”¨æ³¨è§£æ—¶valueåç§°å¯ä»¥çœç•¥ã€‚æ¯”å¦‚ç°åœ¨é‡æ–°å®šä¹‰ä¸€ä¸ªMyTest2æ³¨è§£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyTest2</span><span class="token punctuation">{</span>    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ç‰¹æ®Šå±æ€§</span>    <span class="token keyword">int</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å®šä¹‰å¥½MyTest2æ³¨è§£åï¼Œå†å°†@MyTest2æ ‡è®°åœ¨ç±»ä¸Šï¼Œæ­¤æ—¶valueå±æ€§åå¯ä»¥çœç•¥ï¼Œä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@MyTest2</span><span class="token punctuation">(</span><span class="token string">"å­™æ‚Ÿç©º"</span><span class="token punctuation">)</span> <span class="token comment">//ç­‰ä»·äº @MyTest2(value="å­™æ‚Ÿç©º")</span><span class="token annotation punctuation">@MyTest1</span><span class="token punctuation">(</span>aaa<span class="token operator">=</span><span class="token string">"ç‰›é­”ç‹"</span><span class="token punctuation">,</span>ccc<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"HTML"</span><span class="token punctuation">,</span><span class="token string">"Java"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnnotationTest1</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@MyTest</span><span class="token punctuation">(</span>aaa<span class="token operator">=</span><span class="token string">"é“æ‰‡å…¬ä¸»"</span><span class="token punctuation">,</span>bbb<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">,</span> ccc<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"Python"</span><span class="token punctuation">,</span><span class="token string">"å‰ç«¯"</span><span class="token punctuation">,</span><span class="token string">"Java"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ°è¿™é‡Œå…³äºå®šä¹‰æ³¨è§£çš„æ ¼å¼ã€ä»¥åŠä½¿ç”¨æ³¨è§£çš„æ ¼å¼å°±å­¦ä¹ å®Œäº†ã€‚</p><blockquote><p><strong>æ³¨è§£æœ¬è´¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</strong></p></blockquote><p>æƒ³è¦ææ¸…æ¥šæ³¨è§£æœ¬è´¨æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ³¨è§£çš„å­—èŠ‚ç è¿›è¡Œåç¼–è¯‘ï¼Œä½¿ç”¨XJadå·¥å…·è¿›è¡Œåç¼–è¯‘ã€‚ç»è¿‡å¯¹MyTest1æ³¨è§£å­—èŠ‚ç åç¼–è¯‘æˆ‘ä»¬ä¼šå‘ç°ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token number">1.</span>MyTest1æ³¨è§£æœ¬è´¨ä¸Šæ˜¯æ¥å£ï¼Œæ¯ä¸€ä¸ªæ³¨è§£æ¥å£éƒ½ç»§æ‰¿å­<span class="token class-name">Annotation</span>æ¥å£<span class="token number">2.</span>MyTest1æ³¨è§£ä¸­çš„å±æ€§æœ¬è´¨ä¸Šæ˜¯æŠ½è±¡æ–¹æ³•<span class="token number">3.</span>@<span class="token class-name">MyTest1</span>å®é™…ä¸Šæ˜¯ä½œä¸º<span class="token class-name">MyTest</span>æ¥å£çš„å®ç°ç±»å¯¹è±¡<span class="token number">4.</span>@<span class="token class-name">MyTest1</span><span class="token punctuation">(</span>aaa<span class="token operator">=</span><span class="token string">"å­™æ‚Ÿç©º"</span><span class="token punctuation">,</span>bbb<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">,</span>ccc<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"Python"</span><span class="token punctuation">,</span><span class="token string">"å‰ç«¯"</span><span class="token punctuation">,</span><span class="token string">"Java"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>é‡Œé¢çš„å±æ€§å€¼ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨<span class="token function">aaa</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ã€<span class="token function">bbb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>ã€<span class="token function">ccc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>æ–¹æ³•è·å–åˆ°ã€‚ ã€åˆ«ç€æ€¥ï¼Œç»§ç»­å¾€ä¸‹çœ‹ï¼Œå†è§£ææ³¨è§£æ—¶ä¼šç”¨åˆ°ã€‘<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669604928912.png" alt="1669604928912"></p><h3 id="3-2-å…ƒæ³¨è§£"><a href="#3-2-å…ƒæ³¨è§£" class="headerlink" title="3.2 å…ƒæ³¨è§£"></a>3.2 å…ƒæ³¨è§£</h3><p>å„ä½å°ä¼™ä¼´ï¼Œåˆšæ‰æˆ‘ä»¬å·²ç»è®¤è¯†äº†æ³¨è§£ä»¥åŠæ³¨è§£çš„åŸºæœ¬ä½¿ç”¨ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦å­¦ä¹ å‡ ç§ç‰¹æ®Šçš„æ³¨è§£ï¼Œå«åšå…ƒæ³¨è§£ã€‚</p><blockquote><p><strong>ä»€ä¹ˆæ˜¯å…ƒæ³¨è§£ï¼Ÿ</strong></p></blockquote><p><strong>å…ƒæ³¨è§£æ˜¯ä¿®é¥°æ³¨è§£çš„æ³¨è§£</strong>ã€‚è¿™å¥è¯è™½ç„¶æœ‰ä¸€ç‚¹é¥¶ï¼Œä½†æ˜¯éå¸¸å‡†ç¡®ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669605746113.png" alt="1669605746113"></p><p>æ¥ä¸‹æ¥åˆ†åˆ«çœ‹ä¸€ä¸‹@Targetæ³¨è§£å’Œ@Retentionæ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Target</span>æ˜¯ç”¨æ¥å£°æ˜æ³¨è§£åªèƒ½ç”¨åœ¨é‚£äº›ä½ç½®ï¼Œæ¯”å¦‚ï¼šç±»ä¸Šã€æ–¹æ³•ä¸Šã€æˆå‘˜å˜é‡ä¸Šç­‰<span class="token annotation punctuation">@Retetion</span>æ˜¯ç”¨æ¥å£°æ˜æ³¨è§£ä¿ç•™å‘¨æœŸï¼Œæ¯”å¦‚ï¼šæºä»£ç æ—¶æœŸã€å­—èŠ‚ç æ—¶æœŸã€è¿è¡Œæ—¶æœŸ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669605786028.png" alt="1669605786028"></p><ul><li>@Targetå…ƒæ³¨è§£çš„ä½¿ç”¨ï¼šæ¯”å¦‚å®šä¹‰ä¸€ä¸ªMyTest3æ³¨è§£ï¼Œå¹¶æ·»åŠ @Targetæ³¨è§£ç”¨æ¥å£°æ˜MyTest3çš„ä½¿ç”¨ä½ç½®</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">)</span><span class="token comment">//å£°æ˜@MyTest3æ³¨è§£åªèƒ½ç”¨åœ¨ç±»ä¸Š</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyTest3</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŠŠ@MyTest3ç”¨æ¥ç±»ä¸Šè§‚å¯Ÿæ˜¯å¦æœ‰é”™ï¼Œå†æŠŠ@MyTest3ç”¨åœ¨æ–¹æ³•ä¸Šã€å˜é‡ä¸Šå†è§‚å¯Ÿæ˜¯å¦æœ‰é”™</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669606261919.png" alt="1669606261919"></p><p>å¦‚æœæˆ‘ä»¬å®šä¹‰MyTest3æ³¨è§£æ—¶ï¼Œä½¿ç”¨@Targetæ³¨è§£å±æ€§å€¼å†™æˆä¸‹é¢æ ·å­</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//å£°æ˜@MyTest3æ³¨è§£åªèƒ½ç”¨åœ¨ç±»ä¸Šå’Œæ–¹æ³•ä¸Š</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">,</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyTest3</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­¤æ—¶å†è§‚å¯Ÿï¼Œ@MyTestç”¨åœ¨ç±»ä¸Šã€æ–¹æ³•ä¸Šã€å˜é‡ä¸Šæ˜¯å¦æœ‰é”™</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669606451308.png" alt="1669606451308"></p><p>åˆ°è¿™é‡Œ@Targetå…ƒæ³¨è§£çš„ä½¿ç”¨å°±æ¼”ç¤ºå®Œæ¯•äº†ã€‚</p><ul><li>@Retetionå…ƒæ³¨è§£çš„ä½¿ç”¨ï¼šå®šä¹‰MyTest3æ³¨è§£æ—¶ï¼Œç»™MyTest3æ³¨è§£æ·»åŠ @Retetionæ³¨è§£æ¥å£°æ˜MyTest3æ³¨è§£ä¿ç•™çš„æ—¶æœŸ</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Retetion</span>æ˜¯ç”¨æ¥å£°æ˜æ³¨è§£ä¿ç•™å‘¨æœŸï¼Œæ¯”å¦‚ï¼šæºä»£ç æ—¶æœŸã€å­—èŠ‚ç æ—¶æœŸã€è¿è¡Œæ—¶æœŸ<span class="token annotation punctuation">@Retetion</span><span class="token punctuation">(</span><span class="token class-name">RetetionPloicy</span><span class="token punctuation">.</span><span class="token constant">SOURCE</span><span class="token punctuation">)</span><span class="token operator">:</span> æ³¨è§£ä¿ç•™åˆ°æºä»£ç æ—¶æœŸã€å­—èŠ‚ç ä¸­å°±æ²¡æœ‰äº†<span class="token annotation punctuation">@Retetion</span><span class="token punctuation">(</span><span class="token class-name">RetetionPloicy</span><span class="token punctuation">.</span><span class="token constant">CLASS</span><span class="token punctuation">)</span><span class="token operator">:</span> æ³¨è§£ä¿ç•™åˆ°å­—èŠ‚ç ä¸­ã€è¿è¡Œæ—¶æ³¨è§£å°±æ²¡æœ‰äº†<span class="token annotation punctuation">@Retetion</span><span class="token punctuation">(</span><span class="token class-name">RetetionPloicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>ï¼šæ³¨è§£ä¿ç•™åˆ°è¿è¡Œæ—¶æœŸã€è‡ªå·±å†™ä»£ç æ—¶ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ä¿ç•™åˆ°è¿è¡Œæ—¶æœŸã€‘<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//å£°æ˜@MyTest3æ³¨è§£åªèƒ½ç”¨åœ¨ç±»ä¸Šå’Œæ–¹æ³•ä¸Š</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">,</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">//æ§åˆ¶ä½¿ç”¨äº†@MyTest3æ³¨è§£çš„ä»£ç ä¸­ï¼Œ@MyTest3ä¿ç•™åˆ°è¿è¡Œæ—¶æœŸ</span><span class="token annotation punctuation">@Retetion</span><span class="token punctuation">(</span><span class="token class-name">RetetionPloicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyTest3</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-3-è§£ææ³¨è§£"><a href="#3-3-è§£ææ³¨è§£" class="headerlink" title="3.3 è§£ææ³¨è§£"></a>3.3 è§£ææ³¨è§£</h3><p>å„ä½å°ä¼™ä¼´ï¼Œé€šè¿‡å‰é¢çš„å­¦ä¹ æˆ‘ä»¬èƒ½å¤Ÿè‡ªå·±å®šä¹‰æ³¨è§£ï¼Œä¹Ÿèƒ½å¤ŸæŠŠè‡ªå·±å®šä¹‰çš„æ³¨è§£æ ‡è®°åœ¨ç±»ä¸Šæˆ–è€…æ–¹æ³•ä¸Šç­‰ä½ç½®ï¼Œä½†æ˜¯æ€»æ„Ÿè§‰æœ‰ç‚¹åˆ«æ‰­ï¼Œç»™ç±»ã€æ–¹æ³•ã€å˜é‡ç­‰åŠ ä¸Šæ³¨è§£åï¼Œæˆ‘ä»¬ä¹Ÿæ²¡æœ‰å¹²ä»€ä¹ˆå‘€ï¼ï¼ï¼</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¦åšç‚¹ä»€ä¹ˆã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åå°„æŠ€æœ¯æŠŠç±»ä¸Šã€æ–¹æ³•ä¸Šã€å˜é‡ä¸Šçš„æ³¨è§£å¯¹è±¡è·å–å‡ºæ¥ï¼Œç„¶åé€šè¿‡è°ƒç”¨æ–¹æ³•å°±å¯ä»¥è·å–æ³¨è§£ä¸Šçš„å±æ€§å€¼äº†ã€‚<strong>æˆ‘ä»¬æŠŠè·å–ç±»ä¸Šã€æ–¹æ³•ä¸Šã€å˜é‡ä¸Šç­‰ä½ç½®æ³¨è§£åŠæ³¨è§£å±æ€§å€¼çš„è¿‡ç¨‹ç§°ä¸ºè§£ææ³¨è§£ã€‚</strong></p><p>è§£ææ³¨è§£å¥—è·¯å¦‚ä¸‹</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token number">1.</span>å¦‚æœæ³¨è§£åœ¨ç±»ä¸Šï¼Œå…ˆè·å–ç±»çš„å­—èŠ‚ç å¯¹è±¡ï¼Œå†è·å–ç±»ä¸Šçš„æ³¨è§£<span class="token number">2.</span>å¦‚æœæ³¨è§£åœ¨æ–¹æ³•ä¸Šï¼Œå…ˆè·å–æ–¹æ³•å¯¹è±¡ï¼Œå†è·å–æ–¹æ³•ä¸Šçš„æ³¨è§£<span class="token number">3.</span>å¦‚æœæ³¨è§£åœ¨æˆå‘˜å˜é‡ä¸Šï¼Œå…ˆè·å–æˆå‘˜å˜é‡å¯¹è±¡ï¼Œå†è·å–å˜é‡ä¸Šçš„æ³¨è§£æ€»ä¹‹ï¼šæ³¨è§£åœ¨è°èº«ä¸Šï¼Œå°±å…ˆè·å–è°ï¼Œå†ç”¨è°è·å–è°èº«ä¸Šçš„æ³¨è§£<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669607820853.png" alt="1669607820853"></p><p>è§£ææ¥çœ‹ä¸€ä¸ªæ¡ˆä¾‹ï¼Œæ¥æ¼”ç¤ºè§£ææ³¨è§£çš„ä»£ç ç¼–å†™</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669607882128.png" alt="1669607882128"></p><p>æŒ‰ç…§éœ€æ±‚è¦æ±‚ä¸€æ­¥ä¸€æ­¥å®Œæˆ</p><p>â‘  å…ˆå®šä¹‰ä¸€ä¸ªMyTest4æ³¨è§£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//å£°æ˜@MyTest4æ³¨è§£åªèƒ½ç”¨åœ¨ç±»ä¸Šå’Œæ–¹æ³•ä¸Š</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">,</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">//æ§åˆ¶ä½¿ç”¨äº†@MyTest4æ³¨è§£çš„ä»£ç ä¸­ï¼Œ@MyTest4ä¿ç•™åˆ°è¿è¡Œæ—¶æœŸ</span><span class="token annotation punctuation">@Retetion</span><span class="token punctuation">(</span><span class="token class-name">RetetionPloicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyTest4</span><span class="token punctuation">{</span>    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> <span class="token function">aaa</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">100</span><span class="token punctuation">;</span>    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">bbb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â‘¡ å®šä¹‰æœ‰ä¸€ä¸ªç±»Demo</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@MyTest4</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"èœ˜è››ä¾ "</span><span class="token punctuation">,</span>aaa<span class="token operator">=</span><span class="token number">99.9</span><span class="token punctuation">,</span> bbb<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"è‡³å°Šå®"</span><span class="token punctuation">,</span><span class="token string">"é»‘é©¬"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@MyTest4</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"å­™æ‚Ÿç©º"</span><span class="token punctuation">,</span>aaa<span class="token operator">=</span><span class="token number">199.9</span><span class="token punctuation">,</span> bbb<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"ç´«éœ"</span><span class="token punctuation">,</span><span class="token string">"ç‰›å¤«äºº"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â‘¢ å†™ä¸€ä¸ªæµ‹è¯•ç±»AnnotationTest3è§£æDemoç±»ä¸Šçš„MyTest4æ³¨è§£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnnotationTest3</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parseClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//1.å…ˆè·å–Classå¯¹è±¡</span>        <span class="token class-name">Class</span> c <span class="token operator">=</span> <span class="token class-name">Demo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>                <span class="token comment">//2.è§£æDemoç±»ä¸Šçš„æ³¨è§£</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">MyTest4</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">//è·å–ç±»ä¸Šçš„MyTest4æ³¨è§£</span>            <span class="token class-name">MyTest4</span> myTest4 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MyTest4</span><span class="token punctuation">)</span>c<span class="token punctuation">.</span><span class="token function">getDeclaredAnnotation</span><span class="token punctuation">(</span><span class="token class-name">MyTest4</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//è·å–MyTests4æ³¨è§£çš„å±æ€§å€¼</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myTest4<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myTest4<span class="token punctuation">.</span><span class="token function">aaa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myTest4<span class="token punctuation">.</span><span class="token function">bbb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>        <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parseMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//1.å…ˆè·å–Classå¯¹è±¡</span>        <span class="token class-name">Class</span> c <span class="token operator">=</span> <span class="token class-name">Demo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>                <span class="token comment">//2.è§£æDemoç±»ä¸­test1æ–¹æ³•ä¸Šçš„æ³¨è§£MyTest4æ³¨è§£</span>        <span class="token class-name">Method</span> m <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">"test1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">MyTest4</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">//è·å–æ–¹æ³•ä¸Šçš„MyTest4æ³¨è§£</span>            <span class="token class-name">MyTest4</span> myTest4 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MyTest4</span><span class="token punctuation">)</span>m<span class="token punctuation">.</span><span class="token function">getDeclaredAnnotation</span><span class="token punctuation">(</span><span class="token class-name">MyTest4</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//è·å–MyTests4æ³¨è§£çš„å±æ€§å€¼</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myTest4<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myTest4<span class="token punctuation">.</span><span class="token function">aaa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myTest4<span class="token punctuation">.</span><span class="token function">bbb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-4-æ³¨è§£çš„åº”ç”¨åœºæ™¯-1"><a href="#3-4-æ³¨è§£çš„åº”ç”¨åœºæ™¯-1" class="headerlink" title="3.4 æ³¨è§£çš„åº”ç”¨åœºæ™¯"></a>3.4 æ³¨è§£çš„åº”ç”¨åœºæ™¯</h3><p>å„ä½åŒå­¦ï¼Œå…³äºæ³¨è§£çš„å®šä¹‰ã€ä½¿ç”¨ã€è§£ææ³¨è§£å°±å·²ç»å­¦ä¹ å®Œäº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†å­¦ä¹ ä¸€ä¸‹æ³¨è§£çš„åº”ç”¨åœºæ™¯ï¼Œæ³¨è§£æ˜¯ç”¨æ¥å†™æ¡†æ¶çš„ï¼Œæ¯”å¦‚ç°åœ¨æˆ‘ä»¬è¦æ¨¡æ‹ŸJunitå†™ä¸€ä¸ªæµ‹è¯•æ¡†æ¶ï¼Œè¦æ±‚æœ‰@MyTestæ³¨è§£çš„æ–¹æ³•å¯ä»¥è¢«æ¡†æ¶æ‰§è¡Œï¼Œæ²¡æœ‰@MyTestæ³¨è§£çš„æ–¹æ³•ä¸èƒ½è¢«æ¡†æ¶æ‰§è¡Œã€‚</p><p>ç¬¬ä¸€æ­¥ï¼šå…ˆå®šä¹‰ä¸€ä¸ªMyTestæ³¨è§£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Retetion</span><span class="token punctuation">(</span><span class="token class-name">RetetionPloicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyTest</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¬¬äºŒæ­¥ï¼šå†™ä¸€ä¸ªæµ‹è¯•ç±»AnnotationTest4ï¼Œåœ¨ç±»ä¸­å®šä¹‰å‡ ä¸ªè¢«@MyTestæ³¨è§£æ ‡è®°çš„æ–¹æ³•</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnnotationTest4</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@MyTest</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=====test1===="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token annotation punctuation">@MyTest</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=====test2===="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=====test2===="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">AnnotationTest4</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationTest4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//1.å…ˆè·å–Classå¯¹è±¡</span>        <span class="token class-name">Class</span> c <span class="token operator">=</span> <span class="token class-name">AnnotationTest4</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>                <span class="token comment">//2.è§£æAnnotationTest4ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•å¯¹è±¡</span>        <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Method</span> m<span class="token operator">:</span> methods<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">//3.åˆ¤æ–­æ–¹æ³•ä¸Šæ˜¯å¦æœ‰MyTestæ³¨è§£ï¼Œæœ‰å°±æ‰§è¡Œè¯¥æ–¹æ³•</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">isAnnotationPresent</span><span class="token punctuation">(</span><span class="token class-name">MyTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            m<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­å–œå°ä¼™ä¼´ä»¬ï¼Œå­¦ä¹ åˆ°è¿™é‡Œï¼Œå…³äºæ³¨è§£çš„ä½¿ç”¨å°±å­¦ä¼šäº†(<em>^â–½^</em>)</p><h2 id="å››ã€åŠ¨æ€ä»£ç†"><a href="#å››ã€åŠ¨æ€ä»£ç†" class="headerlink" title="å››ã€åŠ¨æ€ä»£ç†"></a>å››ã€åŠ¨æ€ä»£ç†</h2><h3 id="4-1-åŠ¨æ€ä»£ç†ä»‹ç»ã€å‡†å¤‡åŠŸèƒ½"><a href="#4-1-åŠ¨æ€ä»£ç†ä»‹ç»ã€å‡†å¤‡åŠŸèƒ½" class="headerlink" title="4.1 åŠ¨æ€ä»£ç†ä»‹ç»ã€å‡†å¤‡åŠŸèƒ½"></a>4.1 åŠ¨æ€ä»£ç†ä»‹ç»ã€å‡†å¤‡åŠŸèƒ½</h3><p>å„ä½åŒå­¦ï¼Œè¿™èŠ‚è¯¾æˆ‘ä»¬å­¦ä¹ ä¸€ä¸ªJavaçš„é«˜çº§æŠ€æœ¯å«åšåŠ¨æ€ä»£ç†ã€‚é¦–å…ˆæˆ‘ä»¬è®¤è¯†ä¸€ä¸‹ä»£ç†é•¿ä»€ä¹ˆæ ·ï¼Ÿæˆ‘ä»¬ä»¥å¤§æ˜æ˜Ÿâ€œæ¨è¶…è¶Šâ€ä¾‹ã€‚</p><p>å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªå¤§æ˜æ˜Ÿå«æ¨è¶…è¶Šï¼Œå®ƒæœ‰å”±æ­Œå’Œè·³èˆçš„æœ¬é¢†ï¼Œä½œä¸ºå¤§æ˜æ˜Ÿæ˜¯è¦ç”¨å”±æ­Œå’Œè·³èˆæ¥èµšé’±çš„ï¼Œä½†æ˜¯æ¯æ¬¡åšèŠ‚ç›®ï¼Œå”±æ­Œçš„æ—¶å€™è¦å‡†å¤‡è¯ç­’ã€æ”¶é’±ï¼Œå†å”±æ­Œï¼›è·³èˆçš„æ—¶å€™ä¹Ÿè¦å‡†å¤‡åœºåœ°ã€æ”¶é’±ã€å†å”±æ­Œã€‚æ¨è¶…è¶Šè¶Šè§‰å¾—æˆ‘æ“…é•¿çš„åšçš„äº‹æƒ…æ˜¯å”±æ­Œï¼Œå’Œè·³èˆï¼Œä½†æ˜¯æ¯æ¬¡å”±æ­Œå’Œè·³èˆä¹‹å‰æˆ–è€…ä¹‹åéƒ½è¦åšä¸€äº›ç¹ççš„äº‹æƒ…ï¼Œæœ‰ç‚¹çƒ¦ã€‚äºæ˜¯æ¨è¶…è¶Šå°±æ‰¾ä¸ªä¸€ä¸ªç»æµå…¬å¸ï¼Œè¯·äº†ä¸€ä¸ªä»£ç†äººï¼Œä»£ç†æ¨è¶…è¶Šå¤„ç†è¿™äº›äº‹æƒ…ï¼Œå¦‚æœæœ‰äººæƒ³è¯·æ¨è¶…è¶Šæ¼”å‡ºï¼Œç›´æ¥æ‰¾ä»£ç†äººå°±å¯ä»¥äº†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669619673533.png" alt="1669619673533"></p><p>æˆ‘ä»¬è¯´æ¨è¶…è¶Šçš„ä»£ç†æ˜¯ä¸­ä»‹å…¬å¸æ´¾çš„ï¼Œé‚£ä¸­ä»‹å…¬å¸æ€ä¹ˆçŸ¥é“ï¼Œè¦æ´¾ä¸€ä¸ªæœ‰å”±æ­Œå’Œè·³èˆåŠŸèƒ½çš„ä»£ç†å‘¢ï¼Ÿ</p><p>è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJavaä½¿ç”¨çš„æ˜¯æ¥å£ï¼Œæ¨è¶…è¶Šæƒ³æ‰¾ä»£ç†ï¼Œåœ¨Javaä¸­éœ€è¦æ¨è¶…è¶Šå®ç°äº†ä¸€ä¸ªæ¥å£ï¼Œæ¥å£ä¸­è§„å®šè¦å”±æ­Œå’Œè·³èˆçš„æ–¹æ³•ã€‚Javaå°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ¥å£ä¸ºæ¨è¶…è¶Šç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œåªè¦æ¥å£ä¸­æœ‰çš„æ–¹æ³•ä»£ç†å¯¹è±¡ä¹Ÿä¼šæœ‰ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669619922161.png" alt="1669619922161"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å…ˆæŠŠæœ‰å”±æ­Œå’Œè·³èˆåŠŸèƒ½çš„æ¥å£ï¼Œå’Œå®ç°æ¥å£çš„å¤§æ˜æ˜Ÿç±»å®šä¹‰å‡ºæ¥ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669620054411.png" alt="1669620054411"></p><h3 id="4-2-ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡"><a href="#4-2-ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡" class="headerlink" title="4.2 ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡"></a>4.2 ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡</h3><p>ä¸‹é¢æˆ‘ä»¬å†™ä¸€ä¸ªä¸ºBigStarç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡çš„å·¥å…·ç±»ã€‚è¿™é‡Œéœ€è¦ç”¨Javaä¸ºå¼€å‘è€…æä¾›çš„ä¸€ä¸ªç”Ÿæˆä»£ç†å¯¹è±¡çš„ç±»å«Proxyç±»ã€‚</p><p>é€šè¿‡Proxyç±»çš„newInstance(â€¦)æ–¹æ³•å¯ä»¥ä¸ºå®ç°äº†åŒä¸€æ¥å£çš„ç±»ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚ è°ƒç”¨æ–¹æ³•æ—¶éœ€è¦ä¼ é€’ä¸‰ä¸ªå‚æ•°ï¼Œè¯¥æ–¹æ³•çš„å‚æ•°è§£é‡Šå¯ä»¥æŸ¥é˜…APIæ–‡æ¡£ï¼Œå¦‚ä¸‹ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669620794550.png" alt="1669620794550"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyUtil</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Star</span> <span class="token function">createProxy</span><span class="token punctuation">(</span><span class="token class-name">BigStar</span> bigStar<span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token comment">/* newProxyInstance(ClassLoader loader,                Class&lt;?&gt;[] interfaces,                InvocationHandler h)                å‚æ•°1ï¼šç”¨äºæŒ‡å®šä¸€ä¸ªç±»åŠ è½½å™¨                å‚æ•°2ï¼šæŒ‡å®šç”Ÿæˆçš„ä»£ç†é•¿ä»€ä¹ˆæ ·å­ï¼Œä¹Ÿå°±æ˜¯æœ‰å“ªäº›æ–¹æ³•                å‚æ•°3ï¼šç”¨æ¥æŒ‡å®šç”Ÿæˆçš„ä»£ç†å¯¹è±¡è¦å¹²ä»€ä¹ˆäº‹æƒ…                */</span>        <span class="token comment">// Star starProxy = ProxyUtil.createProxy(s);</span>        <span class="token comment">// starProxy.sing("å¥½æ—¥å­") starProxy.dance()</span>        <span class="token class-name">Star</span> starProxy <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Star</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token class-name">ProxyUtil</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token class-name">Star</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token annotation punctuation">@Override</span> <span class="token comment">// å›è°ƒæ–¹æ³•</span>                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>                        <span class="token comment">// ä»£ç†å¯¹è±¡è¦åšçš„äº‹æƒ…ï¼Œä¼šåœ¨è¿™é‡Œå†™ä»£ç </span>                        <span class="token keyword">if</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"sing"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‡†å¤‡è¯ç­’ï¼Œæ”¶é’±20ä¸‡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"dance"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‡†å¤‡åœºåœ°ï¼Œæ”¶é’±1000ä¸‡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>                        <span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>bigStar<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> starProxy<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è°ƒç”¨æˆ‘ä»¬å†™å¥½çš„ProxyUtilå·¥å…·ç±»ï¼Œä¸ºBigStarå¯¹è±¡ç”Ÿæˆä»£ç†å¯¹è±¡</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">BigStar</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigStar</span><span class="token punctuation">(</span><span class="token string">"æ¨è¶…è¶Š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Star</span> starProxy <span class="token operator">=</span> <span class="token class-name">ProxyUtil</span><span class="token punctuation">.</span><span class="token function">createProxy</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> rs <span class="token operator">=</span> starProxy<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token string">"å¥½æ—¥å­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>        starProxy<span class="token punctuation">.</span><span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œæµ‹è¯•ç±»ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669621045622.png" alt="1669621045622"></p><p>æ­å–œåŒå­¦ä»¬ï¼Œå½“ä½ æŠŠä¸Šé¢çš„æ¡ˆä¾‹å†™å‡ºæ¥ï¼Œå¹¶ä¸”ç†è§£ï¼Œé‚£ä¹ˆåŠ¨æ€ä»£ç†çš„åŸºæœ¬ä½¿ç”¨å°±å­¦ä¼šäº†ã€‚</p><h3 id="4-3-åŠ¨æ€ä»£ç†åº”ç”¨"><a href="#4-3-åŠ¨æ€ä»£ç†åº”ç”¨" class="headerlink" title="4.3 åŠ¨æ€ä»£ç†åº”ç”¨"></a>4.3 åŠ¨æ€ä»£ç†åº”ç”¨</h3><p>å­¦ä¹ å®ŒåŠ¨æ€ä»£ç†çš„åŸºæœ¬ä½¿ç”¨ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†åšä¸€ä¸ªåº”ç”¨æ¡ˆä¾‹ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669621165245.png" alt="1669621165245"></p><p>ç°æœ‰å¦‚ä¸‹ä»£ç </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** *  ç”¨æˆ·ä¸šåŠ¡æ¥å£ */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token comment">// ç™»å½•åŠŸèƒ½</span>    <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> loginName<span class="token punctuation">,</span><span class="token class-name">String</span> passWord<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>    <span class="token comment">// åˆ é™¤ç”¨æˆ·</span>    <span class="token keyword">void</span> <span class="token function">deleteUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>    <span class="token comment">// æŸ¥è¯¢ç”¨æˆ·ï¼Œè¿”å›æ•°ç»„çš„å½¢å¼ã€‚</span>    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‹é¢æœ‰ä¸€ä¸ªUserServiceæ¥å£çš„å®ç°ç±»ï¼Œä¸‹é¢æ¯ä¸€ä¸ªæ–¹æ³•ä¸­éƒ½æœ‰è®¡ç®—æ–¹æ³•è¿è¡Œæ—¶é—´çš„ä»£ç ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ç”¨æˆ·ä¸šåŠ¡å®ç°ç±»ï¼ˆé¢å‘æ¥å£ç¼–ç¨‹ï¼‰ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> loginName<span class="token punctuation">,</span> <span class="token class-name">String</span> passWord<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token keyword">long</span> time1 <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>loginName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"123456"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>passWord<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‚¨ç™»å½•æˆåŠŸï¼Œæ¬¢è¿å…‰ä¸´æœ¬ç³»ç»Ÿ~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‚¨ç™»å½•å¤±è´¥ï¼Œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> time2 <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"loginæ–¹æ³•è€—æ—¶ï¼š"</span><span class="token operator">+</span><span class="token punctuation">(</span>time2<span class="token operator">-</span>time1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>        <span class="token keyword">long</span> time1 <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æˆåŠŸåˆ é™¤äº†1ä¸‡ä¸ªç”¨æˆ·~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> time2 <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"deleteUsersæ–¹æ³•è€—æ—¶ï¼š"</span><span class="token operator">+</span><span class="token punctuation">(</span>time2<span class="token operator">-</span>time1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span><span class="token keyword">long</span> time1 <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æŸ¥è¯¢å‡ºäº†3ä¸ªç”¨æˆ·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"å¼ å…¨è›‹"</span><span class="token punctuation">,</span> <span class="token string">"æäºŒç‹—"</span><span class="token punctuation">,</span> <span class="token string">"ç‰›çˆ±èŠ±"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">long</span> time2 <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"selectUsersæ–¹æ³•è€—æ—¶ï¼š"</span><span class="token operator">+</span><span class="token punctuation">(</span>time2<span class="token operator">-</span>time1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> names<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è§‚å¯Ÿä¸Šé¢ä»£ç å‘ç°æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</p><p>æˆ‘ä»¬ä¼šå‘ç°æ¯ä¸€ä¸ªæ–¹æ³•ä¸­è®¡ç®—è€—æ—¶çš„ä»£ç éƒ½æ˜¯é‡å¤çš„ï¼Œæˆ‘ä»¬å¯æ˜¯å­¦ä¹ äº†åŠ¨æ€ä»£ç†çš„é«˜çº§ç¨‹åºå‘˜ï¼Œæ€ä¹ˆèƒ½å¿å—åœ¨æ¯ä¸ªæ–¹æ³•ä¸­å†™é‡å¤ä»£ç å‘¢ï¼å†µä¸”è¿™äº›é‡å¤çš„ä»£ç å¹¶ä¸å±äºUserSerivceçš„ä¸»è¦ä¸šåŠ¡ä»£ç ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669621335888.png" alt="1669621335888"></p><p>æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬æ‰“ç®—ï¼ŒæŠŠè®¡ç®—æ¯ä¸€ä¸ªæ–¹æ³•çš„è€—æ—¶æ“ä½œï¼Œäº¤ç»™ä»£ç†å¯¹è±¡æ¥åšã€‚</p><p>å…ˆåœ¨UserServiceç±»ä¸­æŠŠè®¡ç®—è€—æ—¶çš„ä»£ç åˆ é™¤ï¼Œä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ç”¨æˆ·ä¸šåŠ¡å®ç°ç±»ï¼ˆé¢å‘æ¥å£ç¼–ç¨‹ï¼‰ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> loginName<span class="token punctuation">,</span> <span class="token class-name">String</span> passWord<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>loginName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"123456"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>passWord<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‚¨ç™»å½•æˆåŠŸï¼Œæ¬¢è¿å…‰ä¸´æœ¬ç³»ç»Ÿ~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‚¨ç™»å½•å¤±è´¥ï¼Œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æˆåŠŸåˆ é™¤äº†1ä¸‡ä¸ªç”¨æˆ·~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æŸ¥è¯¢å‡ºäº†3ä¸ªç”¨æˆ·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"å¼ å…¨è›‹"</span><span class="token punctuation">,</span> <span class="token string">"æäºŒç‹—"</span><span class="token punctuation">,</span> <span class="token string">"ç‰›çˆ±èŠ±"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> names<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åä¸ºUserServiceç”Ÿæˆä¸€ä¸ªåŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œåœ¨åŠ¨æ€ä»£ç†ä¸­è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼Œåœ¨è°ƒç”¨ç›®æ ‡æ–¹æ³•ä¹‹å‰å’Œä¹‹åè®°å½•æ¯«ç§’å€¼ï¼Œå¹¶è®¡ç®—æ–¹æ³•è¿è¡Œçš„æ—¶é—´ã€‚ä»£ç å¦‚ä¸‹</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyUtil</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">UserService</span> <span class="token function">createProxy</span><span class="token punctuation">(</span><span class="token class-name">UserService</span> userService<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">UserService</span> userServiceProxy            <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>            <span class="token class-name">ProxyUtil</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token class-name">UserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">,</span>             <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                                                                            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span>                                                                             <span class="token class-name">Object</span> proxy<span class="token punctuation">,</span>                               <span class="token class-name">Method</span> method<span class="token punctuation">,</span>                                   <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>                             <span class="token keyword">if</span><span class="token punctuation">(</span>                    method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"login"</span><span class="token punctuation">)</span> <span class="token operator">||</span>                                             method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"deleteUsers"</span><span class="token punctuation">)</span><span class="token operator">||</span>                    method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"selectUsers"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token comment">//æ–¹æ³•è¿è¡Œå‰è®°å½•æ¯«ç§’å€¼         </span>                    <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//æ‰§è¡Œæ–¹æ³•</span>                    <span class="token class-name">Object</span> rs <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userService<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//æ‰§è¡Œæ–¹æ³•åè®°å½•æ¯«ç§’å€¼</span>                    <span class="token keyword">long</span> endTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"æ–¹æ³•æ‰§è¡Œè€—æ—¶ï¼š"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token operator">/</span> <span class="token number">1000.0</span> <span class="token operator">+</span> <span class="token string">"s"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">return</span> rs<span class="token punctuation">;</span>               <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>                    <span class="token class-name">Object</span> rs <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userService<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">return</span> rs<span class="token punctuation">;</span>                                                                <span class="token punctuation">}</span>           <span class="token punctuation">}</span>                                                                 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//è¿”å›ä»£ç†å¯¹è±¡</span>        <span class="token keyword">return</span> userServiceProxy<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨æµ‹è¯•ç±»ä¸­ä¸ºUserServiceåˆ›å»ºä»£ç†å¯¹è±¡</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * ç›®æ ‡ï¼šä½¿ç”¨åŠ¨æ€ä»£ç†è§£å†³å®é™…é—®é¢˜ï¼Œå¹¶æŒæ¡ä½¿ç”¨ä»£ç†çš„å¥½å¤„ã€‚ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>        <span class="token comment">// 1ã€åˆ›å»ºç”¨æˆ·ä¸šåŠ¡å¯¹è±¡ã€‚</span>        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> <span class="token class-name">ProxyUtil</span><span class="token punctuation">.</span><span class="token function">createProxy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 2ã€è°ƒç”¨ç”¨æˆ·ä¸šåŠ¡çš„åŠŸèƒ½ã€‚</span>        userService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userService<span class="token punctuation">.</span><span class="token function">deleteUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">selectUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æŸ¥è¯¢åˆ°çš„ç”¨æˆ·æ˜¯ï¼š"</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>names<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----------------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669622545712.png" alt="1669622545712"></p><p>åŠ¨æ€ä»£ç†å¯¹è±¡çš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ¯æ¬¡ç”¨ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•æ—¶ï¼Œéƒ½ä¼šæ‰§è¡ŒInvocationHandlerä¸­çš„invokeæ–¹æ³•ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/1669622605490.png" alt="1669622605490"></p><p>æ­å–œåŒå­¦ä»¬ï¼ŒåŠ¨æ€ä»£ç†æˆ‘ä»¬å·²ç»å­¦ä¹ å®Œäº†ã€‚åˆ°æ­¤æ•´ä¸ªJavaSEçš„è¯¾ç¨‹ä¹Ÿå­¦ä¹ å®Œäº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ³¨è§£ </tag>
            
            <tag> åå°„ </tag>
            
            <tag> junitæµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œé€šä¿¡</title>
      <link href="/2024/11/26/wang-luo-tong-xin/"/>
      <url>/2024/11/26/wang-luo-tong-xin/</url>
      
        <content type="html"><![CDATA[<h1 id="ç½‘ç»œé€šä¿¡"><a href="#ç½‘ç»œé€šä¿¡" class="headerlink" title="ç½‘ç»œé€šä¿¡"></a>ç½‘ç»œé€šä¿¡</h1><h2 id="1ã€ä¸‰è¦ç´ "><a href="#1ã€ä¸‰è¦ç´ " class="headerlink" title="1ã€ä¸‰è¦ç´ "></a>1ã€ä¸‰è¦ç´ </h2><ul><li>IP</li><li>ç«¯å£</li><li>åè®®</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241124132659165.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241124132930538.png"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">InetAddress</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ä¸»å‡½æ•°ï¼Œç”¨äºæ¼”ç¤ºå¦‚ä½•è·å–å’Œæ‰“å°ä¸»æœºä¿¡æ¯     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">// è·å–æœ¬åœ°ä¸»æœºçš„InetAddresså¯¹è±¡</span>        <span class="token class-name">InetAddress</span> localHost <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getLocalHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>localHost<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–å¹¶æ‰“å°æœ¬åœ°ä¸»æœºçš„ä¸»æœºå</span>        <span class="token class-name">String</span> hostName <span class="token operator">=</span> localHost<span class="token punctuation">.</span><span class="token function">getHostName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hostName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–å¹¶æ‰“å°æœ¬åœ°ä¸»æœºçš„IPåœ°å€</span>        <span class="token class-name">String</span> address <span class="token operator">=</span> localHost<span class="token punctuation">.</span><span class="token function">getHostAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é€šè¿‡åŸŸåè·å–InetAddresså¯¹è±¡</span>        <span class="token class-name">InetAddress</span> ip2 <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">"www.bilibili.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–å¹¶æ‰“å°æŒ‡å®šåŸŸåçš„ä¸»æœºå</span>        <span class="token class-name">String</span> ip2HostName <span class="token operator">=</span> ip2<span class="token punctuation">.</span><span class="token function">getHostName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ip2HostName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–å¹¶æ‰“å°æŒ‡å®šåŸŸåçš„IPåœ°å€</span>        <span class="token class-name">String</span> address1 <span class="token operator">=</span> ip2<span class="token punctuation">.</span><span class="token function">getHostAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>address1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ¤æ–­æ˜¯å¦è”é€š</span>        <span class="token keyword">boolean</span> ip2Reachable <span class="token operator">=</span> ip2<span class="token punctuation">.</span><span class="token function">isReachable</span><span class="token punctuation">(</span><span class="token number">6000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ip2Reachable<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241124141358242.png" alt="è¿è¡Œç»“æœ"></p><h2 id="2ã€2ä¸ªé€šä¿¡åè®®"><a href="#2ã€2ä¸ªé€šä¿¡åè®®" class="headerlink" title="2ã€2ä¸ªé€šä¿¡åè®®"></a>2ã€2ä¸ªé€šä¿¡åè®®</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241124141952837.png" alt="UDP å’Œ TCP"></p><h3 id="2-1-TCPåè®®çš„ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥"><a href="#2-1-TCPåè®®çš„ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥" class="headerlink" title="2.1 TCPåè®®çš„ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥"></a>2.1 TCPåè®®çš„ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241124142051566.png" alt="ä¸‰æ¬¡æ¡æ‰‹"></p><ul><li>TCPåè®®ä¸‹ï¼Œæ•°æ®ä¼ è¾“ä¼šè¿›è¡Œç¡®è®¤ï¼Œä»¥ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ã€‚</li></ul><h3 id="2-2-TCPåè®®çš„å››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿æ¥"><a href="#2-2-TCPåè®®çš„å››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿æ¥" class="headerlink" title="2.2 TCPåè®®çš„å››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿æ¥"></a>2.2 TCPåè®®çš„å››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿æ¥</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241124142554060.png" alt="å››æ¬¡æŒ¥æ‰‹"></p><h2 id="3ã€UDPå¿«é€Ÿå…¥é—¨"><a href="#3ã€UDPå¿«é€Ÿå…¥é—¨" class="headerlink" title="3ã€UDPå¿«é€Ÿå…¥é—¨"></a>3ã€UDPå¿«é€Ÿå…¥é—¨</h2><p><strong>UDPé€šä¿¡</strong>ï¼š</p><ul><li>ç‰¹ç‚¹ï¼šæ— è¿æ¥ï¼Œä¸å¯é é€šä¿¡</li><li>ä¸äº‹å…ˆå»ºç«‹è¿æ¥ï¼›å‘é€ç«¯æ¯æ¬¡æŠŠè¦å‘é€çš„æ•°æ®(é™åˆ¶åœ¨64KBå†…)ã€æ¥æ”¶ç«¯IPã€ç­‰ä¿¡æ¯å°è£…æˆä¸€ä¸ªæ•°æ®åŒ…ï¼Œå‘å‡ºå»å°±ä¸ç®¡äº†ã€‚</li><li>Javaæä¾›äº†ä¸€ä¸ªjava.net.Datagramsocketç±»æ¥å®ç°UDPé€šä¿¡:</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241124143441053.png"></p><p>æ¨¡æ‹Ÿå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ä¸€å¯¹ä¸€å•å‘ä¼ è¾“ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">DatagramPacket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">DatagramSocket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">InetAddress</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ä¸»å‡½æ•°ï¼Œç”¨äºåˆ›å»ºå®¢æˆ·ç«¯ DatagramSocketï¼Œå‘é€æ•°æ®åŒ…åˆ°æŒ‡å®šæœåŠ¡å™¨ç«¯å£     * @param args å‘½ä»¤è¡Œå‚æ•°     * @throws Exception å¦‚æœç½‘ç»œæ“ä½œå¤±è´¥     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆ›å»º DatagramSocket å®ä¾‹ï¼Œç”¨äºå‘é€å’Œæ¥æ”¶æ•°æ®åŒ…</span>        <span class="token class-name">DatagramSocket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å‡†å¤‡è¦å‘é€çš„æ•°æ®</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token string">"æˆ‘æ˜¯å®¢æˆ·ç«¯ï¼Œabs"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»º DatagramPacketï¼ŒæŒ‡å®šæ•°æ®ã€æ•°æ®é•¿åº¦ã€ç›®æ ‡æœåŠ¡å™¨åœ°å€å’Œç«¯å£</span>        <span class="token class-name">DatagramPacket</span> packet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> bytes<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getLocalHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">6666</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é€šè¿‡ socket å‘é€æ•°æ®åŒ…åˆ°æŒ‡å®šæœåŠ¡å™¨</span>        socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ‰“å°å‘é€å®Œæˆçš„æ¶ˆæ¯</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å®¢æˆ·ç«¯å‘é€å®Œæ¯•~~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å…³é—­ socket ä»¥é‡Šæ”¾èµ„æº</span>        socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">DatagramPacket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">DatagramSocket</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Server</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ä¸»å‡½æ•°ï¼Œç”¨äºæ¥æ”¶å¹¶æ‰“å°é€šè¿‡UDPåè®®å‘é€åˆ°ç«¯å£6666çš„æ•°æ®åŒ…     *     * @param args å‘½ä»¤è¡Œå‚æ•°ï¼Œæœªä½¿ç”¨     * @throws Exception å¦‚æœåœ¨åˆ›å»ºDatagramSocketæˆ–æ¥æ”¶æ•°æ®åŒ…æ—¶å‘ç”Ÿé”™è¯¯     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ª DatagramSocket å®ä¾‹ï¼Œç»‘å®šåˆ°ç«¯å£ 6666 ä»¥ç›‘å¬UDPæ•°æ®åŒ…</span>        <span class="token class-name">DatagramSocket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span><span class="token number">6666</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ªç¼“å†²åŒºï¼Œç”¨äºå­˜å‚¨æ¥æ”¶åˆ°çš„æ•°æ®</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">64</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ª DatagramPacket å®ä¾‹ï¼Œç”¨äºæ¥æ”¶æ•°æ®åˆ°ç¼“å†²åŒº</span>        <span class="token class-name">DatagramPacket</span> packet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> buffer<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç­‰å¾…å¹¶æ¥æ”¶ä¸€ä¸ªUDPæ•°æ®åŒ…</span>        socket<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> address <span class="token operator">=</span> packet<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHostAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> port <span class="token operator">=</span> packet<span class="token punctuation">.</span><span class="token function">getPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç«¯å£æ˜¯ï¼š"</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å®¢æˆ·ç«¯çš„IPæ˜¯"</span> <span class="token operator">+</span> address<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–æ¥æ”¶åˆ°çš„æ•°æ®åŒ…çš„å®é™…é•¿åº¦</span>        <span class="token keyword">int</span> len <span class="token operator">=</span> packet<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ ¹æ®æ¥æ”¶åˆ°çš„æ•°æ®åŒ…å†…å®¹åˆ›å»ºå­—ç¬¦ä¸²ï¼Œå¹¶æ‰“å°</span>        <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4ã€TCPå¿«é€Ÿå…¥é—¨"><a href="#4ã€TCPå¿«é€Ÿå…¥é—¨" class="headerlink" title="4ã€TCPå¿«é€Ÿå…¥é—¨"></a>4ã€TCPå¿«é€Ÿå…¥é—¨</h2><h3 id="4-1-ä»‹ç»TCP"><a href="#4-1-ä»‹ç»TCP" class="headerlink" title="4.1 ä»‹ç»TCP"></a>4.1 ä»‹ç»TCP</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241125143925923.png" alt="1"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241125144218598.png" alt="2"></p><h3 id="4-2-å¼€å‘å®¢æˆ·ç«¯"><a href="#4-2-å¼€å‘å®¢æˆ·ç«¯" class="headerlink" title="4.2 å¼€å‘å®¢æˆ·ç«¯"></a>4.2 å¼€å‘å®¢æˆ·ç«¯</h3><p>æœåŠ¡ç«¯ç°åœ¨åªæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œåªèƒ½å¤„ç†ä¸€ä¸ªå®¢æˆ·ç«¯çš„æ¶ˆæ¯ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241125143543612.png" alt="å®¢æˆ·ç«¯"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126151453013.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126154416172.png"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">DataOutputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">OutputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ä¸»å‡½æ•°ï¼Œç”¨äºå‘é€ä¿¡æ¯åˆ°æŒ‡å®šæœåŠ¡å™¨     * è¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªSocketè¿æ¥åˆ°æœ¬åœ°ä¸»æœºçš„æŒ‡å®šç«¯å£ï¼Œå¹¶å‘é€ä¸€æ¡æ¶ˆæ¯     * @param args å‘½ä»¤è¡Œå‚æ•°ï¼Œæœ¬ä¾‹ä¸­æœªä½¿ç”¨     * @throws Exception å¦‚æœSocketè¿æ¥æˆ–æ•°æ®å‘é€è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å®¢æˆ·ç«¯å¯åŠ¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºSocketè¿æ¥åˆ°æœ¬åœ°ä¸»æœºçš„8888ç«¯å£</span>        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–Socketçš„è¾“å‡ºæµï¼Œç”¨äºå‘é€æ•°æ®</span>        <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åŒ…è£…è¾“å‡ºæµï¼Œä»¥ä¾¿äºå‘é€UTF-8ç¼–ç çš„å­—ç¬¦ä¸²</span>        <span class="token class-name">DataOutputStream</span> dos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataOutputStream</span><span class="token punctuation">(</span>os<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å‘é€æ¶ˆæ¯åˆ°æœåŠ¡å™¨</span>        dos<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span><span class="token string">"åœ¨ä¸€èµ·ï¼Ÿä¸è¦ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å…³é—­æ•°æ®è¾“å‡ºæµï¼Œè¡¨æ˜å‘é€å®Œæ¯•</span>        dos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">DataInputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">ServerSocket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">SocketAddress</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Server</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ä¸»å‡½æ•°ï¼Œç”¨äºå¯åŠ¨ä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨ï¼Œæ¥æ”¶å®¢æˆ·ç«¯çš„æ¶ˆæ¯å¹¶æ‰“å°å‡ºæ¥     * è¯¥å‡½æ•°ä½¿ç”¨ServerSocketåœ¨æŒ‡å®šç«¯å£ç›‘å¬å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œæ¥æ”¶åˆ°å®¢æˆ·ç«¯è¿æ¥å     * è¯»å–å®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯å¹¶æ‰“å°åˆ°æ§åˆ¶å°ï¼ŒåŒæ—¶æ‰“å°å‡ºå®¢æˆ·ç«¯çš„IPåœ°å€     *     * @param args å‘½ä»¤è¡Œå‚æ•°ï¼Œæœ¬ä¾‹ä¸­æœªä½¿ç”¨     * @throws Exception å¦‚æœç½‘ç»œé€šä¿¡å‡ºç°å¼‚å¸¸ï¼Œå°†æŠ›å‡ºæ­¤å¼‚å¸¸     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœåŠ¡ç«¯å¯åŠ¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºServerSocketï¼Œç›‘å¬8888ç«¯å£</span>        <span class="token class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥</span>        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–å®¢æˆ·ç«¯å‘é€çš„æ•°æ®æµ</span>        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä½¿ç”¨DataInputStreamè¯»å–æ•°æ®æµä¸­çš„æ•°æ®</span>        <span class="token class-name">DataInputStream</span> dis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è¯»å–å®¢æˆ·ç«¯å‘é€çš„UTFæ ¼å¼å­—ç¬¦ä¸²å¹¶æ‰“å°åˆ°æ§åˆ¶å°</span>        <span class="token class-name">String</span> rs <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–å¹¶æ‰“å°å®¢æˆ·ç«¯çš„IPåœ°å€</span>        <span class="token class-name">SocketAddress</span> ip <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getRemoteSocketAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å…³é—­DataInputStreamå’ŒSocketè¿æ¥ï¼Œé‡Šæ”¾èµ„æº</span>        dis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-3-å¤šå‘å¤šå—"><a href="#4-3-å¤šå‘å¤šå—" class="headerlink" title="4.3 å¤šå‘å¤šå—"></a>4.3 å¤šå‘å¤šå—</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">DataOutputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">OutputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ä¸»å‡½æ•°ï¼Œç”¨äºå‘é€ä¿¡æ¯åˆ°æŒ‡å®šæœåŠ¡å™¨     * è¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªSocketè¿æ¥åˆ°æœ¬åœ°ä¸»æœºçš„æŒ‡å®šç«¯å£ï¼Œå¹¶å‘é€ä¸€æ¡æ¶ˆæ¯     *     * @param args å‘½ä»¤è¡Œå‚æ•°ï¼Œæœ¬ä¾‹ä¸­æœªä½¿ç”¨     * @throws Exception å¦‚æœSocketè¿æ¥æˆ–æ•°æ®å‘é€è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å®¢æˆ·ç«¯å¯åŠ¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºSocketè¿æ¥åˆ°æœ¬åœ°ä¸»æœºçš„8888ç«¯å£</span>        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–Socketçš„è¾“å‡ºæµï¼Œç”¨äºå‘é€æ•°æ®</span>        <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åŒ…è£…è¾“å‡ºæµï¼Œä»¥ä¾¿äºå‘é€UTF-8ç¼–ç çš„å­—ç¬¦ä¸²</span>        <span class="token class-name">DataOutputStream</span> dos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataOutputStream</span><span class="token punctuation">(</span>os<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Scanner</span> sc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// å‘é€æ¶ˆæ¯åˆ°æœåŠ¡å™¨</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯·è¯´ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> msg <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"exit"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ¬¢è¿ä¸‹æ¬¡å…‰ä¸´ï¼Œé€€å‡ºæˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                dos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            dos<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>            dos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">DataInputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">ServerSocket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">SocketAddress</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Server</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ä¸»å‡½æ•°ï¼Œç”¨äºå¯åŠ¨ä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨ï¼Œæ¥æ”¶å®¢æˆ·ç«¯çš„æ¶ˆæ¯å¹¶æ‰“å°å‡ºæ¥     * è¯¥å‡½æ•°ä½¿ç”¨ServerSocketåœ¨æŒ‡å®šç«¯å£ç›‘å¬å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œæ¥æ”¶åˆ°å®¢æˆ·ç«¯è¿æ¥å     * è¯»å–å®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯å¹¶æ‰“å°åˆ°æ§åˆ¶å°ï¼ŒåŒæ—¶æ‰“å°å‡ºå®¢æˆ·ç«¯çš„IPåœ°å€     *     * @param args å‘½ä»¤è¡Œå‚æ•°ï¼Œæœ¬ä¾‹ä¸­æœªä½¿ç”¨     * @throws Exception å¦‚æœç½‘ç»œé€šä¿¡å‡ºç°å¼‚å¸¸ï¼Œå°†æŠ›å‡ºæ­¤å¼‚å¸¸     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœåŠ¡ç«¯å¯åŠ¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºServerSocketï¼Œç›‘å¬8888ç«¯å£</span>        <span class="token class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥</span>        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–å®¢æˆ·ç«¯å‘é€çš„æ•°æ®æµ</span>        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä½¿ç”¨DataInputStreamè¯»å–æ•°æ®æµä¸­çš„æ•°æ®</span>        <span class="token class-name">DataInputStream</span> dis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è·å–å¹¶æ‰“å°å®¢æˆ·ç«¯çš„IPåœ°å€</span>        <span class="token class-name">SocketAddress</span> ip <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getRemoteSocketAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token comment">// è¯»å–å®¢æˆ·ç«¯å‘é€çš„UTFæ ¼å¼å­—ç¬¦ä¸²å¹¶æ‰“å°åˆ°æ§åˆ¶å°</span>                <span class="token class-name">String</span> rs <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">String</span> s <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getRemoteSocketAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"ç¦»çº¿äº†"</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>                dis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-4-TCPé€šä¿¡-å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶é€šä¿¡"><a href="#4-4-TCPé€šä¿¡-å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶é€šä¿¡" class="headerlink" title="4.4 TCPé€šä¿¡-å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶é€šä¿¡"></a>4.4 TCPé€šä¿¡-å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶é€šä¿¡</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126170118801.png" alt="æ¶æ„"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">DataOutputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">OutputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å®¢æˆ·ç«¯å¯åŠ¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 1ã€åˆ›å»ºSocketå¯¹è±¡ï¼Œå¹¶åŒæ—¶è¯·æ±‚ä¸æœåŠ¡ç«¯ç¨‹åºçš„è¿æ¥ã€‚</span>        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 2ã€ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµï¼Œç”¨æ¥å‘æ•°æ®ç»™æœåŠ¡ç«¯ç¨‹åºã€‚</span>        <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 3ã€æŠŠä½çº§çš„å­—èŠ‚è¾“å‡ºæµåŒ…è£…æˆæ•°æ®è¾“å‡ºæµ</span>        <span class="token class-name">DataOutputStream</span> dos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataOutputStream</span><span class="token punctuation">(</span>os<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Scanner</span> sc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// å‘é€æ¶ˆæ¯åˆ°æœåŠ¡å™¨</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"è¯·è¯´ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> msg <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"exit"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ¬¢è¿ä¸‹æ¬¡å…‰ä¸´ï¼Œé€€å‡ºæˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                dos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            dos<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>            dos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">ServerSocket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Server</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------æœåŠ¡ç«¯å¯åŠ¨---------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//            1.åˆ›å»ºServerSocketçš„å¯¹è±¡ï¼ŒåŒæ—¶ä¸ºæœåŠ¡ç«¯æ³¨å†Œç«¯å£ã€‚</span>        <span class="token class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//            2.ä½¿ç”¨serverSocketå¯¹è±¡ï¼Œè°ƒç”¨ä¸€ä¸ªacceptæ–¹æ³•ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</span>            <span class="token class-name">Socket</span> socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//            3. æŠŠè¿™ä¸ªå®¢æˆ·ç«¯å¯¹åº”çš„socketé€šä¿¡ç®¡é“ï¼Œäº¤ç»™ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹è´Ÿè´£å¤„ç†</span>            <span class="token keyword">new</span> <span class="token class-name">ServerReaderThread</span><span class="token punctuation">(</span>socket<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">DataInputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerReaderThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Socket</span> socket<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">ServerReaderThread</span><span class="token punctuation">(</span><span class="token class-name">Socket</span> socket<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>socket <span class="token operator">=</span> socket<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token class-name">InputStream</span> is <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">DataInputStream</span> dis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    <span class="token class-name">String</span> msg <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token class-name">String</span> s <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getRemoteSocketAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"ä¸‹çº¿äº†"</span><span class="token punctuation">;</span>                    dis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-5-ç¾¤èŠï¼ˆC-Sæ¶æ„ï¼‰"><a href="#4-5-ç¾¤èŠï¼ˆC-Sæ¶æ„ï¼‰" class="headerlink" title="4.5 ç¾¤èŠï¼ˆC/Sæ¶æ„ï¼‰"></a>4.5 ç¾¤èŠï¼ˆC/Sæ¶æ„ï¼‰</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126174730574.png" alt="ç¾¤èŠæ¶æ„"></p><p>Clientï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">DataOutputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">OutputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å®¢æˆ·ç«¯å¯åŠ¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 1ã€åˆ›å»ºSocketå¯¹è±¡ï¼Œå¹¶åŒæ—¶è¯·æ±‚ä¸æœåŠ¡ç«¯ç¨‹åºçš„è¿æ¥ã€‚</span>        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">ClientReaderThread</span><span class="token punctuation">(</span>socket<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 2ã€ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµï¼Œç”¨æ¥å‘æ•°æ®ç»™æœåŠ¡ç«¯ç¨‹åºã€‚</span>        <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 3ã€æŠŠä½çº§çš„å­—èŠ‚è¾“å‡ºæµåŒ…è£…æˆæ•°æ®è¾“å‡ºæµ</span>        <span class="token class-name">DataOutputStream</span> dos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataOutputStream</span><span class="token punctuation">(</span>os<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Scanner</span> sc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// å‘é€æ¶ˆæ¯åˆ°æœåŠ¡å™¨</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"è¯·è¯´ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> msg <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"exit"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ¬¢è¿ä¸‹æ¬¡å…‰ä¸´ï¼Œé€€å‡ºæˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                dos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            dos<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>            dos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ClientReaderThread:</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">DataInputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClientReaderThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Socket</span> socket<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">ClientReaderThread</span><span class="token punctuation">(</span><span class="token class-name">Socket</span> socket<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>socket <span class="token operator">=</span> socket<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token class-name">InputStream</span> is <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">DataInputStream</span> dis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    <span class="token class-name">String</span> msg <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token class-name">String</span> s <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getRemoteSocketAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"ä¸‹çº¿äº†"</span><span class="token punctuation">;</span>                    dis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Serverï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">ServerSocket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Server</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Socket</span><span class="token punctuation">&gt;</span></span> onLineSockets <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------æœåŠ¡ç«¯å¯åŠ¨---------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//            1.åˆ›å»ºServerSocketçš„å¯¹è±¡ï¼ŒåŒæ—¶ä¸ºæœåŠ¡ç«¯æ³¨å†Œç«¯å£ã€‚</span>        <span class="token class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//            2.ä½¿ç”¨serverSocketå¯¹è±¡ï¼Œè°ƒç”¨ä¸€ä¸ªacceptæ–¹æ³•ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</span>            <span class="token class-name">Socket</span> socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            onLineSockets<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>socket<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//            3. æŠŠè¿™ä¸ªå®¢æˆ·ç«¯å¯¹åº”çš„socketé€šä¿¡ç®¡é“ï¼Œäº¤ç»™ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹è´Ÿè´£å¤„ç†</span>            <span class="token keyword">new</span> <span class="token class-name">ServerReaderThread</span><span class="token punctuation">(</span>socket<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ServerReaderThread:</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">DataInputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">DataOutputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">OutputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerReaderThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Socket</span> socket<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">ServerReaderThread</span><span class="token punctuation">(</span><span class="token class-name">Socket</span> socket<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>socket <span class="token operator">=</span> socket<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token class-name">InputStream</span> is <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">DataInputStream</span> dis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    <span class="token class-name">String</span> msg <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// æŠŠè¿™ä¸ªæ¶ˆæ¯å‘ç»™å…¨éƒ¨çš„åœ¨çº¿å®¢æˆ·ç«¯è¿›è¡Œæ¥æ”¶ã€‚</span>                    <span class="token function">sendMsgToAll</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token class-name">String</span> s <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getRemoteSocketAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"ä¸‹çº¿äº†"</span><span class="token punctuation">;</span>                    <span class="token comment">//æœ‰äººç¦»çº¿å°±æ¸…é™¤</span>                    <span class="token class-name">Server</span><span class="token punctuation">.</span>onLineSockets<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>socket<span class="token punctuation">)</span><span class="token punctuation">;</span>                    dis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">sendMsgToAll</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span><span class="token comment">//        å‘ç»™å…¨éƒ¨çš„åœ¨çº¿Socketç®¡é“æ¥æ”¶</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Socket</span> onLineSocket <span class="token operator">:</span> <span class="token class-name">Server</span><span class="token punctuation">.</span>onLineSockets<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> onLineSocket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">DataOutputStream</span> dos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataOutputStream</span><span class="token punctuation">(</span>os<span class="token punctuation">)</span><span class="token punctuation">;</span>            dos<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>            dos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-6-å®ç°ä¸€ä¸ªç®€æ˜“çš„BSæ¶æ„"><a href="#4-6-å®ç°ä¸€ä¸ªç®€æ˜“çš„BSæ¶æ„" class="headerlink" title="4.6 å®ç°ä¸€ä¸ªç®€æ˜“çš„BSæ¶æ„"></a>4.6 å®ç°ä¸€ä¸ªç®€æ˜“çš„BSæ¶æ„</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126184504746.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126184530958.png" alt="æ ¼å¼"></p><p>è¦æ±‚ä»æµè§ˆå™¨ä¸­è®¿é—®æœåŠ¡å™¨å¹¶ç«‹å³è®©æœåŠ¡å™¨å“åº”ä¸€ä¸ªå¾ˆç®€å•çš„ç½‘é¡µç»™æµè§ˆå™¨å±•ç¤ºï¼Œç½‘é¡µå†…å®¹å°±æ˜¯â€œé»‘é©¬ç¨‹åºå‘˜666â€</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">ServerSocket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Server</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ä¸»å‡½æ•°å…¥å£     * è¯¥å‡½æ•°è´Ÿè´£å¯åŠ¨æœåŠ¡å™¨ï¼Œå¹¶ç›‘å¬å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚     * @param args å‘½ä»¤è¡Œå‚æ•°ï¼Œæœ¬ä¾‹ä¸­æœªä½¿ç”¨     * @throws IOException å¦‚æœæœåŠ¡å™¨å¯åŠ¨è¿‡ç¨‹ä¸­å‡ºç°I/Oé”™è¯¯     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        <span class="token comment">// é€šçŸ¥æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-----æœåŠ¡ç«¯å¯åŠ¨æˆåŠŸ------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºServerSocketå®ä¾‹ï¼Œç»‘å®šåˆ°æŒ‡å®šç«¯å£</span>        <span class="token class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æœåŠ¡å™¨å¾ªç¯ç›‘å¬ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿æ¥</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// æ¥å—å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚</span>            <span class="token class-name">Socket</span> socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// è·å–å¹¶æ‰“å°å®¢æˆ·ç«¯åœ°å€ä¿¡æ¯</span>            <span class="token class-name">String</span> s <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getRemoteSocketAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"ä¸Šçº¿äº†"</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹å¤„ç†å®¢æˆ·ç«¯çš„è¯»å–æ“ä½œ</span>            <span class="token keyword">new</span> <span class="token class-name">ServerReaderThread</span><span class="token punctuation">(</span>socket<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">OutputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerReaderThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Socket</span> socket<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">ServerReaderThread</span><span class="token punctuation">(</span><span class="token class-name">Socket</span> socket<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>socket <span class="token operator">=</span> socket<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**     * é‡å†™runæ–¹æ³•ä»¥å¤„ç†å®¢æˆ·ç«¯è¿æ¥     * è¯¥æ–¹æ³•é€šè¿‡socketå‘å®¢æˆ·ç«¯å‘é€HTTPå“åº”     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment">// è·å–socketçš„è¾“å‡ºæµï¼Œç”¨äºå‘å®¢æˆ·ç«¯å‘é€æ•°æ®</span>            os <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">PrintStream</span> ps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span>os<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// å‘é€HTTPå“åº”å¤´ï¼ŒåŒ…æ‹¬çŠ¶æ€ç å’Œå†…å®¹ç±»å‹</span>            ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"HTTP/1.1 200 OK"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Content-Type:text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// ç»“æŸHTTPå¤´çš„å‘é€</span>            ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// å‘é€HTTPå“åº”ä½“ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²</span>            ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é»‘é©¬ç¨‹åºå‘˜666"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// å…³é—­socketè¿æ¥</span>            socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// å¼‚å¸¸å¤„ç†ç•™ç©ºï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ æ—¥å¿—è®°å½•æˆ–å¼‚å¸¸å¤„ç†é€»è¾‘</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-7-BSç®€æ˜“ä¼˜åŒ–"><a href="#4-7-BSç®€æ˜“ä¼˜åŒ–" class="headerlink" title="4.7 BSç®€æ˜“ä¼˜åŒ–"></a>4.7 BSç®€æ˜“ä¼˜åŒ–</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241126185434819.png" alt="ä¼˜åŒ–æ¶æ„"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">ServerSocket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ArrayBlockingQueue</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ThreadPoolExecutor</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Server</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ä¸»å‡½æ•°å…¥å£     * è¯¥å‡½æ•°è´Ÿè´£å¯åŠ¨æœåŠ¡å™¨ï¼Œå¹¶ç›‘å¬å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚     *     * @param args å‘½ä»¤è¡Œå‚æ•°ï¼Œæœ¬ä¾‹ä¸­æœªä½¿ç”¨     * @throws IOException å¦‚æœæœåŠ¡å™¨å¯åŠ¨è¿‡ç¨‹ä¸­å‡ºç°I/Oé”™è¯¯     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        <span class="token comment">// é€šçŸ¥æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-----æœåŠ¡ç«¯å¯åŠ¨æˆåŠŸ------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºServerSocketå®ä¾‹ï¼Œç»‘å®šåˆ°æŒ‡å®šç«¯å£</span>        <span class="token class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºå‡ºä¸€ä¸ªçº¿ç¨‹æ± ï¼Œè´Ÿè´£å¤„ç†é€šä¿¡ç®¡é“çš„ä»»åŠ¡ã€‚</span>        <span class="token class-name">ThreadPoolExecutor</span> pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token number">16</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">ArrayBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">defaultThreadFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor<span class="token punctuation">.</span>AbortPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æœåŠ¡å™¨å¾ªç¯ç›‘å¬ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿æ¥</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// æ¥å—å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚</span>            <span class="token class-name">Socket</span> socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// è·å–å¹¶æ‰“å°å®¢æˆ·ç«¯åœ°å€ä¿¡æ¯</span>            <span class="token class-name">String</span> s <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getRemoteSocketAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"ä¸Šçº¿äº†"</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹å¤„ç†å®¢æˆ·ç«¯çš„è¯»å–æ“ä½œ</span>            <span class="token class-name">ServerReaderRunnable</span> runnable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerReaderRunnable</span><span class="token punctuation">(</span>socket<span class="token punctuation">)</span><span class="token punctuation">;</span>            pool<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>runnable<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">OutputStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintStream</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerReaderRunnable</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span>  <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Socket</span> socket<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">ServerReaderRunnable</span><span class="token punctuation">(</span><span class="token class-name">Socket</span> socket<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>socket <span class="token operator">=</span> socket<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**     * é‡å†™runæ–¹æ³•ä»¥å¤„ç†å®¢æˆ·ç«¯è¿æ¥     * è¯¥æ–¹æ³•é€šè¿‡socketå‘å®¢æˆ·ç«¯å‘é€HTTPå“åº”     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment">// è·å–socketçš„è¾“å‡ºæµï¼Œç”¨äºå‘å®¢æˆ·ç«¯å‘é€æ•°æ®</span>            os <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">PrintStream</span> ps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span>os<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// å‘é€HTTPå“åº”å¤´ï¼ŒåŒ…æ‹¬çŠ¶æ€ç å’Œå†…å®¹ç±»å‹</span>            ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"HTTP/1.1 200 OK"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Content-Type:text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// ç»“æŸHTTPå¤´çš„å‘é€</span>            ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// å‘é€HTTPå“åº”ä½“ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²</span>            ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"é»‘é©¬ç¨‹åºå‘˜666"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// å…³é—­socketè¿æ¥</span>            socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// å¼‚å¸¸å¤„ç†ç•™ç©ºï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ æ—¥å¿—è®°å½•æˆ–å¼‚å¸¸å¤„ç†é€»è¾‘</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€çŸ¥è¯† </tag>
            
            <tag> UDPå’ŒTCP </tag>
            
            <tag> BSå’ŒCSæ¶æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤šçº¿ç¨‹</title>
      <link href="/2024/11/24/duo-xian-cheng/"/>
      <url>/2024/11/24/duo-xian-cheng/</url>
      
        <content type="html"><![CDATA[<h1 id="çº¿ç¨‹"><a href="#çº¿ç¨‹" class="headerlink" title="çº¿ç¨‹"></a>çº¿ç¨‹</h1><h2 id="1ã€ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹ï¼Ÿ"><a href="#1ã€ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹ï¼Ÿ" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹ï¼Ÿ"></a>1ã€ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹ï¼Ÿ</h2><ul><li>å¤šçº¿ç¨‹æ˜¯æŒ‡ä»è½¯ç¡¬ä»¶ä¸Šå®ç°çš„å¤šæ¡æ‰§è¡Œæµç¨‹çš„æŠ€æœ¯(å¤šæ¡çº¿ç¨‹ç”±CPUè´Ÿè´£è°ƒåº¦æ‰§è¡Œ)ã€‚</li></ul><h2 id="2ã€åˆ›å»ºæ–¹æ³•ä¸€ï¼šé›†æˆThreadç±»"><a href="#2ã€åˆ›å»ºæ–¹æ³•ä¸€ï¼šé›†æˆThreadç±»" class="headerlink" title="2ã€åˆ›å»ºæ–¹æ³•ä¸€ï¼šé›†æˆThreadç±»"></a>2ã€åˆ›å»ºæ–¹æ³•ä¸€ï¼šé›†æˆThreadç±»</h2><p>æ–¹æ³•ä¸€ï¼š</p><ol><li>å­ç±»é›†æˆThreadç±»</li><li>å¿…é¡»é‡å†™Threadç±»çš„runæ–¹æ³•</li><li>åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œåˆ›å»ºMyThreadçº¿ç¨‹ç±»çš„å¯¹è±¡ä»£è¡¨ä¸€ä¸ªçº¿ç¨‹</li><li>è°ƒç”¨start( )æ–¹æ³•ï¼Œå¯åŠ¨çº¿ç¨‹</li></ol><p>æ³¨æ„äº‹é¡¹ï¼š</p><ol><li>å¯åŠ¨çº¿ç¨‹å¿…é¡»è°ƒç”¨startæ–¹æ³•ï¼Œè€Œä¸æ˜¯runæ–¹æ³•ã€‚</li><li>ä¸è¦æŠŠä¸»çº¿ç¨‹ä»»åŠ¡æ”¾åˆ°å¯åŠ¨å­çº¿ç¨‹ä»»åŠ¡ä¹‹å‰ã€‚</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ç¨‹åºçš„å…¥å£ç‚¹     * åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªè‡ªå®šä¹‰çº¿ç¨‹ï¼ŒåŒæ—¶åœ¨ä¸»çº¿ç¨‹ä¸­è¾“å‡ºè®¡æ•°     * @param args å‘½ä»¤è¡Œå‚æ•°ï¼Œæœ¬ç¨‹åºæœªä½¿ç”¨     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//3. åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œåˆ›å»ºMyThreadçº¿ç¨‹ç±»çš„å¯¹è±¡ä»£è¡¨ä¸€ä¸ªçº¿ç¨‹    </span>        <span class="token comment">// åˆ›å»ºè‡ªå®šä¹‰çº¿ç¨‹å®ä¾‹</span>        <span class="token class-name">MyThread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4. å¯åŠ¨    </span>        <span class="token comment">// å¯åŠ¨è‡ªå®šä¹‰çº¿ç¨‹</span>        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// ä¸»çº¿ç¨‹è¾“å‡ºå¾ªç¯</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸»çº¿ç¨‹è¾“å‡ºï¼š"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token comment">// 1. å­ç±»ç»§æ‰¿Threadæ–¹æ³•</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * é‡å†™runæ–¹æ³•ä»¥å®šä¹‰çº¿ç¨‹çš„æ‰§è¡Œé€»è¾‘     * æ­¤æ–¹æ³•æ²¡æœ‰è¾“å…¥å‚æ•°å’Œè¿”å›å€¼ï¼Œé€šè¿‡æ‰“å°ä¿¡æ¯æ¥æ‰§è¡Œå…¶ä»»åŠ¡     */</span><span class="token comment">//2. é‡å†™runæ–¹æ³•    </span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// ä½¿ç”¨forå¾ªç¯æ‰“å°5æ¬¡ä¿¡æ¯ï¼Œä»¥å±•ç¤ºçº¿ç¨‹çš„æ‰§è¡Œè¿‡ç¨‹</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å­çº¿ç¨‹MyThreadè¾“å‡º:"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-1-æ–¹æ³•ä¸€çš„ä¼˜ç¼ºç‚¹"><a href="#2-1-æ–¹æ³•ä¸€çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="2.1 æ–¹æ³•ä¸€çš„ä¼˜ç¼ºç‚¹"></a>2.1 æ–¹æ³•ä¸€çš„ä¼˜ç¼ºç‚¹</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123152815391.png"></p><h2 id="3ã€åˆ›å»ºæ–¹æ³•äºŒï¼šå®ç°Runnableæ¥å£"><a href="#3ã€åˆ›å»ºæ–¹æ³•äºŒï¼šå®ç°Runnableæ¥å£" class="headerlink" title="3ã€åˆ›å»ºæ–¹æ³•äºŒï¼šå®ç°Runnableæ¥å£"></a>3ã€åˆ›å»ºæ–¹æ³•äºŒï¼šå®ç°Runnableæ¥å£</h2><p>æ–¹æ³•äºŒï¼š</p><ol><li>å®šä¹‰ä¸€ä¸ªä»»åŠ¡ç±»ï¼Œå®ç°Runnableæ¥å£</li><li>é‡å†™Runnableçš„runæ–¹æ³•</li><li>åœ¨ä¸»çº¿ç¨‹ä¸­<code>new</code>ä¸€ä¸ªä»»åŠ¡ç±»å¯¹è±¡</li><li>æŠŠä»»åŠ¡ç±»å¯¹è±¡äº¤ç»™ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡å¤„ç†ï¼Œå¹¶è°ƒç”¨start( )æ–¹æ³•</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ç¨‹åºçš„å…¥å£ç‚¹     * è¯¥æ–¹æ³•åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥æ‰§è¡ŒMyRunnableä»»åŠ¡ï¼ŒåŒæ—¶åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œä¸€ä¸ªç®€å•çš„å¾ªç¯è¾“å‡º     * @param args å‘½ä»¤è¡Œå‚æ•°ï¼Œæœ¬ç¨‹åºæœªä½¿ç”¨     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆ›å»ºMyRunnableå®ä¾‹ï¼Œå‡†å¤‡åœ¨çº¿ç¨‹ä¸­æ‰§è¡Œ</span>        <span class="token class-name">MyRunnable</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œå°†MyRunnableå®ä¾‹ä½œä¸ºç›®æ ‡ä¼ é€’ç»™å®ƒï¼Œç„¶åå¯åŠ¨çº¿ç¨‹</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// ä¸»çº¿ç¨‹æ‰§è¡Œçš„å¾ªç¯ï¼Œè¾“å‡º5æ¬¡ï¼Œæ¯æ¬¡è¾“å‡ºä¸€ä¸ªæ•°å­—ï¼Œä»0åˆ°4</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸»çº¿ç¨‹è¾“å‡ºï¼š"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRunnable</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token comment">/**     * é‡å†™runæ–¹æ³•ä»¥å®šä¹‰çº¿ç¨‹çš„æ‰§è¡Œé€»è¾‘     * æ­¤æ–¹æ³•ä¸­åŒ…å«äº†çº¿ç¨‹ä¸€æ—¦å¯åŠ¨å°±éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡     * åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œçº¿ç¨‹çš„ä»»åŠ¡æ˜¯å¾ªç¯äº”æ¬¡ï¼Œæ¯æ¬¡æ‰“å°ä¸€ä¸ªæ•°å­—     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// å¾ªç¯äº”æ¬¡ï¼Œæ¯æ¬¡æ‰“å°ä¸€ä¸ªæ•°å­—</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å­çº¿ç¨‹MyThreadè¾“å‡º:"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-2-æ–¹æ³•äºŒçš„ä¼˜ç¼ºç‚¹"><a href="#3-2-æ–¹æ³•äºŒçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="3.2 æ–¹æ³•äºŒçš„ä¼˜ç¼ºç‚¹"></a>3.2 æ–¹æ³•äºŒçš„ä¼˜ç¼ºç‚¹</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123154650373.png"></p><h3 id="3-3-åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•"><a href="#3-3-åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•" class="headerlink" title="3.3 åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•"></a>3.3 åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123154854335.png" alt="åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ç¨‹åºçš„å…¥å£ç‚¹     * åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼ŒåŒæ—¶ä¸»çº¿ç¨‹ä¹Ÿæ‰§è¡Œè‡ªå·±çš„ä»»åŠ¡     * @param args å‘½ä»¤è¡Œå‚æ•°ï¼Œæœ¬ç¨‹åºä¸ä½¿ç”¨æ­¤å‚æ•°     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ªRunnableå¯¹è±¡ï¼Œå®šä¹‰æ–°çº¿ç¨‹è¦æ‰§è¡Œçš„ä»»åŠ¡</span>        <span class="token class-name">Runnable</span> runnable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment">// æ–°çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡ï¼šå¾ªç¯5æ¬¡ï¼Œæ¯æ¬¡æ‰“å°ä¸€ä¸ªä¿¡æ¯</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å­çº¿ç¨‹MyThreadè¾“å‡º:"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>                <span class="token comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œå¹¶å°†ä¹‹å‰åˆ›å»ºçš„Runnableå¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒï¼Œç„¶åå¯åŠ¨çº¿ç¨‹</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>runnable<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// ä¸»çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡ï¼šå¾ªç¯5æ¬¡ï¼Œæ¯æ¬¡æ‰“å°ä¸€ä¸ªä¿¡æ¯</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸»çº¿ç¨‹Threadè¾“å‡º:"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŒ¿åå†…éƒ¨ç±»çš„ç®€åŒ–å†™æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œå¹¶å°†Runnableå¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒï¼Œç„¶åå¯åŠ¨çº¿ç¨‹</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>            <span class="token comment">// æ–°çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡ï¼šå¾ªç¯5æ¬¡ï¼Œæ¯æ¬¡æ‰“å°ä¸€ä¸ªä¿¡æ¯</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å­çº¿ç¨‹MyThreadè¾“å‡º:"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¸»çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡ï¼šå¾ªç¯5æ¬¡ï¼Œæ¯æ¬¡æ‰“å°ä¸€ä¸ªä¿¡æ¯</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¸»çº¿ç¨‹Threadè¾“å‡º:"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4ã€åˆ›å»ºæ–¹æ³•ä¸‰ï¼šå®ç°Callableæ¥å£"><a href="#4ã€åˆ›å»ºæ–¹æ³•ä¸‰ï¼šå®ç°Callableæ¥å£" class="headerlink" title="4ã€åˆ›å»ºæ–¹æ³•ä¸‰ï¼šå®ç°Callableæ¥å£"></a>4ã€åˆ›å»ºæ–¹æ³•ä¸‰ï¼šå®ç°Callableæ¥å£</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123160002778.png" alt="èƒŒæ™¯"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123160050702.png" alt="åˆ›å»ºæ–¹æ³•"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Callable</span></span><span class="token punctuation">;</span><span class="token comment">//1ã€è®©è¿™ä¸ªç±»å®ç°Callableæ¥å£</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCallable</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>n <span class="token operator">=</span> n<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// 2.é‡å†™callæ–¹æ³•ä»¥å®šä¹‰çº¿ç¨‹çš„ä»»åŠ¡</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// åˆå§‹åŒ–ç´¯åŠ å’Œå˜é‡ä¸º0</span>        <span class="token comment">// ä½¿ç”¨å¾ªç¯æ¥è®¡ç®—ä»1åˆ°nçš„ç´¯åŠ å’Œ</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            sum <span class="token operator">+=</span> i<span class="token punctuation">;</span> <span class="token comment">// å°†å½“å‰æ•°å­—iåŠ åˆ°ç´¯åŠ å’Œsumä¸Š</span>        <span class="token punctuation">}</span>        <span class="token comment">// è¿”å›è®¡ç®—ç»“æœçš„å­—ç¬¦ä¸²è¡¨ç¤º</span>        <span class="token keyword">return</span> <span class="token string">"çº¿ç¨‹æ±‚å¾—1åˆ°"</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token string">"çš„å’Œæ˜¯:"</span> <span class="token operator">+</span> sum<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Callable</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutionException</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">FutureTask</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span><span class="token comment">//3.åˆ›å»ºä¸€ä¸ªCallableå¯¹è±¡</span>        <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> call <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4.æŠŠCallableå¯¹è±¡å°è£…æˆä¸ºä¸€ä¸ªFutureTaskå¯¹è±¡ï¼ˆä»»åŠ¡å¯¹è±¡ï¼‰</span>        <span class="token comment">/*æœªæ¥ä»»åŠ¡å¯¹è±¡æœ‰ä»€ä¹ˆç”¨ï¼Ÿ        * 1ã€æ˜¯ä¸€ä¸ªä»»åŠ¡å¯¹è±¡ï¼Œå®ç°äº†Runnableå¯¹è±¡        * 2ã€å¯ä»¥åœ¨çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œç”¨æœªæ¥ä»»åŠ¡å¯¹è±¡æ¥è°ƒç”¨getæ–¹æ³•ï¼Œè·å–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åçš„ç»“æœ*/</span>        <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> f1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>call<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">MyCallable</span> call2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> f2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>call2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//5.æŠŠä»»åŠ¡å¯¹è±¡äº¤ç»™ä¸€ä¸ªThreadå¯¹è±¡</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>f1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>f2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//6.è·å–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åè¿”å›çš„ç»“æœ.</span>        <span class="token class-name">String</span> s <span class="token operator">=</span> f1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> s2 <span class="token operator">=</span> f2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-1-æ–¹æ³•ä¸‰çš„ä¼˜ç¼ºç‚¹"><a href="#4-1-æ–¹æ³•ä¸‰çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="4.1 æ–¹æ³•ä¸‰çš„ä¼˜ç¼ºç‚¹"></a>4.1 æ–¹æ³•ä¸‰çš„ä¼˜ç¼ºç‚¹</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123162502813.png"></p><h2 id="5ã€Threadçš„å¸¸ç”¨æ–¹æ³•"><a href="#5ã€Threadçš„å¸¸ç”¨æ–¹æ³•" class="headerlink" title="5ã€Threadçš„å¸¸ç”¨æ–¹æ³•"></a>5ã€Threadçš„å¸¸ç”¨æ–¹æ³•</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123163218629.png"></p><h2 id="6ã€çº¿ç¨‹å®‰å…¨-ä¸‰ç§æ–¹æ³•"><a href="#6ã€çº¿ç¨‹å®‰å…¨-ä¸‰ç§æ–¹æ³•" class="headerlink" title="6ã€çº¿ç¨‹å®‰å…¨(ä¸‰ç§æ–¹æ³•)"></a>6ã€çº¿ç¨‹å®‰å…¨(ä¸‰ç§æ–¹æ³•)</h2><ul><li>å¤šä¸ªçº¿ç¨‹ï¼ŒåŒæ—¶å¤„ç†ä¸€ä¸ªå…±äº«èµ„æºï¼Œå¯èƒ½ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</li><li>åŠ é”ã€‚æ¯æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹åŠ é”ï¼ŒåŠ é”åæ‰èƒ½è¿›å…¥è®¿é—®ï¼Œè®¿é—®å®Œæ¯•åè‡ªåŠ¨è§£é”ï¼Œç„¶åå…¶ä»–çº¿ç¨‹æ‰èƒ½å†åŠ é”è¿›æ¥ã€‚</li></ul><p>åŠ é”çš„å¸¸è§æ–¹å¼æœ‰ä¸‰ç§ï¼š</p><ol><li>åŒæ­¥ä»£ç å—</li><li>åŒæ­¥æ–¹æ³•</li><li>Locké”</li></ol><h3 id="6-1-åŒæ­¥ä»£ç å—"><a href="#6-1-åŒæ­¥ä»£ç å—" class="headerlink" title="6.1 åŒæ­¥ä»£ç å—"></a>6.1 åŒæ­¥ä»£ç å—</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123165050511.png" alt="åŒæ­¥ä»£ç å—"></p><p>é”å¯¹è±¡çš„ä½¿ç”¨è§„èŒƒï¼š</p><ul><li>å»ºè®®ä½¿ç”¨å…±äº«èµ„æºä½œä¸ºé”å¯¹è±¡ï¼Œå¯¹äºå®ä¾‹æ–¹æ³•å»ºè®®ä½¿ç”¨<code>this</code>ä½œä¸ºé”å¯¹è±¡ã€‚</li><li>å¯¹äºé™æ€æ–¹æ³•å»ºè®®ä½¿ç”¨å­—èŠ‚ç <code>(ç±»å.class)</code>å¯¹è±¡ä½œä¸ºé”å¯¹è±¡ã€‚</li></ul><h3 id="6-2-åŒæ­¥æ–¹æ³•"><a href="#6-2-åŒæ­¥æ–¹æ³•" class="headerlink" title="6.2 åŒæ­¥æ–¹æ³•"></a>6.2 åŒæ­¥æ–¹æ³•</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123195523823.png" alt="åŒæ­¥æ–¹æ³•"></p><p>åŒæ­¥ä»£ç å—ä¸åŒæ­¥æ–¹æ³•ï¼š</p><ul><li>èŒƒå›´ä¸Š:åŒæ­¥ä»£ç å—é”çš„èŒƒå›´æ›´å°ï¼ŒåŒæ­¥æ–¹æ³•é”çš„èŒƒå›´æ›´å¤§ã€‚</li><li>åŒæ­¥æ–¹æ³•åœ¨å¯è¯»æ€§ä¸Šä¼šæ›´å¥½ä¸€äº›</li></ul><h3 id="6-3-Locké”"><a href="#6-3-Locké”" class="headerlink" title="6.3 Locké”"></a>6.3 Locké”</h3><ul><li>éœ€è¦è‡ªå·±åˆ›å»ºé”å¯¹è±¡ï¼Œæ‰‹åŠ¨åŠ é”å’Œè§£é”ï¼Œæ¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</li><li>Lockæ˜¯æ¥å£ï¼Œä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œå¯ä»¥é‡‡ç”¨å®ƒçš„å®ç°ç±»<code>ReentrantLock</code>æ¥æ„å»ºLocké”å¯¹è±¡ã€‚</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123201854134.png" alt="æ–¹æ³•"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123201757248.png" alt="æ–‡æ¡£1"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123200223793.png" alt="æ–‡æ¡£2"></p><h2 id="7ã€çº¿ç¨‹é€šä¿¡"><a href="#7ã€çº¿ç¨‹é€šä¿¡" class="headerlink" title="7ã€çº¿ç¨‹é€šä¿¡"></a>7ã€çº¿ç¨‹é€šä¿¡</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123202925108.png" alt="çº¿ç¨‹é€šä¿¡"></p><ul><li>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ï¼š</li><li>å…ˆå”¤é†’ï¼Œå†ç­‰å¾…ã€‚</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123203732366.png"></p><h2 id="8ã€åˆ›å»ºå¹¶ä½¿ç”¨çº¿ç¨‹æ± "><a href="#8ã€åˆ›å»ºå¹¶ä½¿ç”¨çº¿ç¨‹æ± " class="headerlink" title="8ã€åˆ›å»ºå¹¶ä½¿ç”¨çº¿ç¨‹æ± "></a>8ã€åˆ›å»ºå¹¶ä½¿ç”¨çº¿ç¨‹æ± </h2><h3 id="8-1-ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± "><a href="#8-1-ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± " class="headerlink" title="8.1 ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± "></a>8.1 ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± </h3><p>çº¿ç¨‹æ± å°±æ˜¯ä¸€ä¸ªå¯ä»¥å¤ç”¨çº¿ç¨‹çš„æŠ€æœ¯ã€‚</p><h3 id="8-2-ä¸ä½¿ç”¨çº¿ç¨‹æ± çš„é—®é¢˜"><a href="#8-2-ä¸ä½¿ç”¨çº¿ç¨‹æ± çš„é—®é¢˜" class="headerlink" title="8.2 ä¸ä½¿ç”¨çº¿ç¨‹æ± çš„é—®é¢˜"></a>8.2 ä¸ä½¿ç”¨çº¿ç¨‹æ± çš„é—®é¢˜</h3><p>ç”¨æˆ·æ¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œåå°å°±éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹æ¥å¤„ç†ï¼Œä¸‹æ¬¡æ–°ä»»åŠ¡æ¥äº†è‚¯å®šåˆè¦åˆ›å»ºæ–°çº¿ç¨‹å¤„ç†çš„è€Œ<strong>åˆ›å»ºæ–°çº¿ç¨‹çš„å¼€é”€æ˜¯å¾ˆå¤§çš„ï¼Œå¹¶ä¸”è¯·æ±‚è¿‡å¤šæ—¶ï¼Œè‚¯å®šä¼šäº§ç”Ÿå¤§é‡çš„çº¿ç¨‹å‡ºæ¥ï¼Œè¿™æ ·ä¼šä¸¥é‡å½±å“ç³»ç»Ÿçš„æ€§èƒ½</strong></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123205624142.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123210210519.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123215836574.png" alt="ç¬¬ä¸ƒä¸ªå‚æ•°-æ‹’ç»ç­–ç•¥"></p><ul><li>çº¿ç¨‹å·¥å‚ï¼šæ˜¯ç”¨æ¥åˆ›å»ºçº¿ç¨‹çš„</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token comment">/*     public ThreadPoolExecutor(int corePoolSize,                              int maximumPoolSize,                              long keepAliveTime,                              TimeUnit unit,                              BlockingQueue&lt;Runnable&gt; workQueue,                              ThreadFactory threadFactory,                              RejectedExecutionHandler handler)     * è¯¥æ–¹æ³•æ¼”ç¤ºäº†å¦‚ä½•é…ç½®å’Œä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹æ±      * @param args å‘½ä»¤è¡Œå‚æ•°ï¼Œæœ¬ä¾‹ä¸­æœªä½¿ç”¨     * @throws Exception å¦‚æœå‘ç”Ÿä»»ä½•å¼‚å¸¸ï¼Œå°†è¢«ç›´æ¥æŠ›å‡º     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">// é…ç½®çº¿ç¨‹æ± çš„å‚æ•°</span>        <span class="token keyword">int</span> corePoolSize <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// æ ¸å¿ƒçº¿ç¨‹æ•°</span>        <span class="token keyword">int</span> maximumPoolSize <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// æœ€å¤§çº¿ç¨‹æ•°</span>        <span class="token keyword">long</span> keepAliveTime <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">// ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´</span>        <span class="token class-name">TimeUnit</span> unit <span class="token operator">=</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">;</span> <span class="token comment">// æ—¶é—´å•ä½</span>        <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span> workQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å·¥ä½œé˜Ÿåˆ—</span>        <span class="token class-name">ThreadFactory</span> threadFactory <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">defaultThreadFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// çº¿ç¨‹å·¥å‚</span>        <span class="token class-name">RejectedExecutionHandler</span> handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor<span class="token punctuation">.</span>AbortPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹’ç»ç­–ç•¥</span>            <span class="token comment">// åˆ›å»ºçº¿ç¨‹æ± </span>        <span class="token comment">// è§£é‡Šï¼šè¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°ä¸º3ï¼Œæœ€å¤§çº¿ç¨‹æ•°ä¸º5ï¼Œç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´ä¸º8ç§’</span>        <span class="token comment">// ä½¿ç”¨ArrayBlockingQueueä½œä¸ºå·¥ä½œé˜Ÿåˆ—ï¼Œé˜Ÿåˆ—å¤§å°ä¸º5ï¼Œä½¿ç”¨é»˜è®¤çš„çº¿ç¨‹å·¥å‚</span>        <span class="token comment">// å½“ä»»åŠ¡æ— æ³•æäº¤åˆ°çº¿ç¨‹æ± æ—¶é‡‡ç”¨AbortPolicyç­–ç•¥ï¼Œç›´æ¥æŠ›å‡ºå¼‚å¸¸</span>        <span class="token class-name">ThreadPoolExecutor</span> pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span>                corePoolSize<span class="token punctuation">,</span> maximumPoolSize<span class="token punctuation">,</span> keepAliveTime<span class="token punctuation">,</span>                unit<span class="token punctuation">,</span> workQueue<span class="token punctuation">,</span> threadFactory<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-3-ä¸´æ—¶çº¿ç¨‹ä»€ä¹ˆæ—¶å€™åˆ›å»º"><a href="#8-3-ä¸´æ—¶çº¿ç¨‹ä»€ä¹ˆæ—¶å€™åˆ›å»º" class="headerlink" title="8.3 ä¸´æ—¶çº¿ç¨‹ä»€ä¹ˆæ—¶å€™åˆ›å»º"></a>8.3 ä¸´æ—¶çº¿ç¨‹ä»€ä¹ˆæ—¶å€™åˆ›å»º</h3><ul><li>æ–°ä»»åŠ¡æäº¤æ—¶å‘ç°æ ¸å¿ƒçº¿ç¨‹éƒ½åœ¨å¿™ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¹Ÿæ»¡äº†ï¼Œå¹¶ä¸”è¿˜å¯ä»¥åˆ›å»ºä¸´æ—¶çº¿ç¨‹ï¼Œæ­¤æ—¶æ‰ä¼šåˆ›å»ºä¸´æ—¶çº¿ç¨‹ã€‚</li></ul><h3 id="8-4-ä»€ä¹ˆæ—¶å€™å¼€å§‹ä¼šæ‹’ç»ä¿¡ä»»åŠ¡"><a href="#8-4-ä»€ä¹ˆæ—¶å€™å¼€å§‹ä¼šæ‹’ç»ä¿¡ä»»åŠ¡" class="headerlink" title="8.4 ä»€ä¹ˆæ—¶å€™å¼€å§‹ä¼šæ‹’ç»ä¿¡ä»»åŠ¡"></a>8.4 ä»€ä¹ˆæ—¶å€™å¼€å§‹ä¼šæ‹’ç»ä¿¡ä»»åŠ¡</h3><ul><li>æ ¸å¿ƒçº¿ç¨‹å’Œä¸´æ—¶çº¿ç¨‹éƒ½åœ¨å¿™ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¹Ÿæ»¡äº†ï¼Œæ–°çš„ä»»åŠ¡è¿‡æ¥çš„æ—¶å€™æ‰ä¼šå¼€å§‹æ‹’ç»ä»»åŠ¡ã€‚</li></ul><h3 id="8-5-ThreadPoolExecutoråˆ›å»ºRunnable"><a href="#8-5-ThreadPoolExecutoråˆ›å»ºRunnable" class="headerlink" title="8.5 ThreadPoolExecutoråˆ›å»ºRunnable"></a>8.5 ThreadPoolExecutoråˆ›å»ºRunnable</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123213710013.png"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> corePoolSize <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// æ ¸å¿ƒçº¿ç¨‹æ•°</span>        <span class="token keyword">int</span> maximumPoolSize <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// æœ€å¤§çº¿ç¨‹æ•°</span>        <span class="token keyword">long</span> keepAliveTime <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">// ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´</span>        <span class="token class-name">TimeUnit</span> unit <span class="token operator">=</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">;</span> <span class="token comment">// æ—¶é—´å•ä½</span>        <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span> workQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å·¥ä½œé˜Ÿåˆ—</span>        <span class="token class-name">ThreadFactory</span> threadFactory <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">defaultThreadFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// çº¿ç¨‹å·¥å‚</span>        <span class="token class-name">RejectedExecutionHandler</span> handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor<span class="token punctuation">.</span>AbortPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹’ç»ç­–ç•¥</span>        <span class="token class-name">ThreadPoolExecutor</span> pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span>                corePoolSize<span class="token punctuation">,</span> maximumPoolSize<span class="token punctuation">,</span> keepAliveTime<span class="token punctuation">,</span>                unit<span class="token punctuation">,</span> workQueue<span class="token punctuation">,</span> threadFactory<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">MyRunnable</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyRunnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pool<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//çº¿ç¨‹æ± è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªä¿¡çº¿ç¨‹ï¼Œè‡ªåŠ¨å¤„ç†è¿™ä¸ªä»»åŠ¡ï¼Œè‡ªåŠ¨æ‰§è¡Œã€‚</span>        pool<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//çº¿ç¨‹æ± è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªä¿¡çº¿ç¨‹ï¼Œè‡ªåŠ¨å¤„ç†è¿™ä¸ªä»»åŠ¡ï¼Œè‡ªåŠ¨æ‰§è¡Œã€‚</span>        pool<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//çº¿ç¨‹æ± è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªä¿¡çº¿ç¨‹ï¼Œè‡ªåŠ¨å¤„ç†è¿™ä¸ªä»»åŠ¡ï¼Œè‡ªåŠ¨æ‰§è¡Œã€‚</span>        pool<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¤ç”¨å‰é¢çš„ æ ¸å¿ƒçº¿ç¨‹ã€‚</span>        pool<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¤ç”¨å‰é¢çš„ æ ¸å¿ƒçº¿ç¨‹ã€‚</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRunnable</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * é‡å†™runæ–¹æ³•ä»¥å®šä¹‰çº¿ç¨‹çš„æ‰§è¡Œé€»è¾‘     * è¿™ä¸ªæ–¹æ³•é¦–å…ˆæ‰“å°å½“å‰çº¿ç¨‹çš„åç§°å’Œä¸€ä¸ªå›ºå®šæ¶ˆæ¯     * ç„¶åçº¿ç¨‹æš‚åœ1ç§’ä»¥æ¨¡æ‹Ÿè€—æ—¶æ“ä½œæˆ–çº¿ç¨‹æ´»åŠ¨     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// æ‰“å°å½“å‰çº¿ç¨‹çš„åç§°ï¼Œç”¨äºæ ‡è¯†çº¿ç¨‹</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"====&gt; è¾“å‡º666"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment">// çº¿ç¨‹æš‚åœ1ç§’ï¼Œæ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// å¼‚å¸¸å¤„ç†ï¼šå¦‚æœçº¿ç¨‹è¢«ä¸­æ–­ï¼Œæ‰“å°å¼‚å¸¸ä¿¡æ¯</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-6-ThreadPoolExecutorå¤„ç†Callable"><a href="#8-6-ThreadPoolExecutorå¤„ç†Callable" class="headerlink" title="8.6 ThreadPoolExecutorå¤„ç†Callable"></a>8.6 ThreadPoolExecutorå¤„ç†Callable</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123220244863.png"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> corePoolSize <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// æ ¸å¿ƒçº¿ç¨‹æ•°</span>        <span class="token keyword">int</span> maximumPoolSize <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// æœ€å¤§çº¿ç¨‹æ•°</span>        <span class="token keyword">long</span> keepAliveTime <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">// ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´</span>        <span class="token class-name">TimeUnit</span> unit <span class="token operator">=</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">;</span> <span class="token comment">// æ—¶é—´å•ä½</span>        <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span> workQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å·¥ä½œé˜Ÿåˆ—</span>        <span class="token class-name">ThreadFactory</span> threadFactory <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">defaultThreadFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// çº¿ç¨‹å·¥å‚</span>        <span class="token class-name">RejectedExecutionHandler</span> handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor<span class="token punctuation">.</span>AbortPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹’ç»ç­–ç•¥</span>        <span class="token class-name">ThreadPoolExecutor</span> pool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span>                corePoolSize<span class="token punctuation">,</span> maximumPoolSize<span class="token punctuation">,</span> keepAliveTime<span class="token punctuation">,</span>                unit<span class="token punctuation">,</span> workQueue<span class="token punctuation">,</span> threadFactory<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> f1 <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> f2 <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> f3 <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> f4 <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> f5 <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> f6 <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> f7 <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f3<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f4<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f5<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f6<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f7<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Callable</span></span><span class="token punctuation">;</span><span class="token comment">//1ã€è®©è¿™ä¸ªç±»å®ç°Callableæ¥å£</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCallable</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>n <span class="token operator">=</span> n<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// 2.é‡å†™callæ–¹æ³•ä»¥å®šä¹‰çº¿ç¨‹çš„ä»»åŠ¡</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// åˆå§‹åŒ–ç´¯åŠ å’Œå˜é‡ä¸º0</span>        <span class="token comment">// ä½¿ç”¨å¾ªç¯æ¥è®¡ç®—ä»1åˆ°nçš„ç´¯åŠ å’Œ</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            sum <span class="token operator">+=</span> i<span class="token punctuation">;</span> <span class="token comment">// å°†å½“å‰æ•°å­—iåŠ åˆ°ç´¯åŠ å’Œsumä¸Š</span>        <span class="token punctuation">}</span>        <span class="token comment">// è¿”å›è®¡ç®—ç»“æœçš„å­—ç¬¦ä¸²è¡¨ç¤º</span>        <span class="token keyword">return</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"çº¿ç¨‹æ±‚å¾—1åˆ°"</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token string">"çš„å’Œæ˜¯:"</span> <span class="token operator">+</span> sum<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241124082721072.png" alt="æ‰§è¡Œç»“æœ"></p><h2 id="9ã€Executors"><a href="#9ã€Executors" class="headerlink" title="9ã€Executors"></a>9ã€Executors</h2><p>æ˜¯ä¸€ä¸ªçº¿ç¨‹æ± çš„<code>å·¥å…·ç±»</code>ï¼Œæä¾›äº†å¾ˆå¤šé™æ€æ–¹æ³•ç”¨äºè¿”å›ä¸åŒç‰¹ç‚¹çš„çº¿ç¨‹æ± å¯¹è±¡ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241124103116434.png"></p><p>è¿™äº›æ–¹æ³•çš„åº•å±‚ï¼Œéƒ½æ˜¯é€šè¿‡çº¿ç¨‹æ± çš„å®ç°ç±»<code>ThreadPoolExecutor</code>åˆ›å»ºçš„çº¿ç¨‹æ± å¯¹è±¡ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Future</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ç¨‹åºçš„å…¥å£ç‚¹     * åˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ï¼Œå¹¶æäº¤å››ä¸ªä»»åŠ¡     * @param args å‘½ä»¤è¡Œå‚æ•°     * @throws Exception å¦‚æœæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ï¼ŒåŒ…å«3ä¸ªçº¿ç¨‹</span>        <span class="token class-name">ExecutorService</span> pool <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// æäº¤å››ä¸ªä»»åŠ¡åˆ°çº¿ç¨‹æ± </span>        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> f1 <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> f2 <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> f3 <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> f4 <span class="token operator">=</span> pool<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyCallable</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// è·å–æ¯ä¸ªä»»åŠ¡çš„æ‰§è¡Œç»“æœ</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f3<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f4<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ ¸å¿ƒçº¿ç¨‹æ•°é‡åˆ°åº•é…ç½®å¤šå°‘å‘¢"><a href="#æ ¸å¿ƒçº¿ç¨‹æ•°é‡åˆ°åº•é…ç½®å¤šå°‘å‘¢" class="headerlink" title="æ ¸å¿ƒçº¿ç¨‹æ•°é‡åˆ°åº•é…ç½®å¤šå°‘å‘¢???"></a>æ ¸å¿ƒçº¿ç¨‹æ•°é‡åˆ°åº•é…ç½®å¤šå°‘å‘¢???</h2><ul><li><p>è®¡ç®—é›·é›†å‹çš„11æ ¸å¿ƒçº¿ç¨‹æ•°é‡=CPUçš„æ ¸æ•°+1</p></li><li><p>IOå¯†é›†å‹çš„ä»»åŠ¡:æ ¸å¿ƒçº¿ç¨‹æ•°é‡=CPUæ ¸æ•°*2</p><p>PS: å¤§å‹å¹¶å‘ç³»ç»Ÿç¯å¢ƒä¸­ä½¿ç”¨Executorså¦‚æœä¸æ³¨æ„<strong>å¯èƒ½ä¼šå‡ºç°ç³»ç»Ÿé£é™©</strong>ã€‚</p></li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241124105213792.png" alt="alibabaè§„åˆ™"></p><h2 id="10ã€å…¶ä»–"><a href="#10ã€å…¶ä»–" class="headerlink" title="10ã€å…¶ä»–"></a>10ã€å…¶ä»–</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241124110218469.png" alt="å¹¶å‘"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241124111402433.png" alt="å¹¶è¡Œ"></p><p>å¤šçº¿ç¨‹ï¼Œå³å¹¶å‘å’Œå¹¶è¡ŒåŒæ—¶è¿›è¡Œçš„ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241124110729794.png" alt="çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241124111240301.png" alt="çŠ¶æ€è½¬æ¢"></p>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€çŸ¥è¯† </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç‰¹æ®Šæ–‡æœ¬æ–‡ä»¶ã€æ—¥å¿—æŠ€æœ¯</title>
      <link href="/2024/11/23/te-shu-wen-ben-wen-jian-ri-zhi-ji-zhu/"/>
      <url>/2024/11/23/te-shu-wen-ben-wen-jian-ri-zhi-ji-zhu/</url>
      
        <content type="html"><![CDATA[<h1 id="ç‰¹æ®Šæ–‡æœ¬æ–‡ä»¶ã€æ—¥å¿—æŠ€æœ¯"><a href="#ç‰¹æ®Šæ–‡æœ¬æ–‡ä»¶ã€æ—¥å¿—æŠ€æœ¯" class="headerlink" title="ç‰¹æ®Šæ–‡æœ¬æ–‡ä»¶ã€æ—¥å¿—æŠ€æœ¯"></a>ç‰¹æ®Šæ–‡æœ¬æ–‡ä»¶ã€æ—¥å¿—æŠ€æœ¯</h1><h2 id="1ã€æ–‡ä»¶"><a href="#1ã€æ–‡ä»¶" class="headerlink" title="1ã€æ–‡ä»¶"></a>1ã€æ–‡ä»¶</h2><h3 id="1-1-propertiesæ–‡ä»¶"><a href="#1-1-propertiesæ–‡ä»¶" class="headerlink" title="1.1 propertiesæ–‡ä»¶"></a>1.1 propertiesæ–‡ä»¶</h3><h3 id="1-2-ä»‹ç»"><a href="#1-2-ä»‹ç»" class="headerlink" title="1.2 ä»‹ç»"></a>1.2 ä»‹ç»</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122205605561.png" alt="Propertiesæ–¹æ³•åŠ è½½"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">    <span class="token comment">// å±æ€§æ–‡ä»¶çš„è·¯å¾„</span>    <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"demo1/src/main/java/com/dapixiu/file.propertoes"</span><span class="token punctuation">;</span>    <span class="token comment">// åˆ›å»ºPropertieså¯¹è±¡ï¼Œç”¨äºå­˜å‚¨å’Œè®¿é—®å±æ€§</span>    <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ä»æŒ‡å®šè·¯å¾„åŠ è½½å±æ€§æ–‡ä»¶</span>    properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è·å–åä¸º"name"çš„å±æ€§å€¼</span>    <span class="token class-name">String</span> name <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è·å–å±æ€§æ–‡ä»¶ä¸­æ‰€æœ‰é”®çš„é›†åˆ</span>    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strings <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">stringPropertyNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ‰“å°å±æ€§æ–‡ä»¶ä¸­çš„æ‰€æœ‰é”®</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>strings<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// éå†å±æ€§æ–‡ä»¶ä¸­çš„æ‰€æœ‰é”®</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> string <span class="token operator">:</span> strings<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// è·å–å½“å‰é”®å¯¹åº”çš„å€¼</span>        <span class="token class-name">String</span> v <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ‰“å°é”®å€¼å¯¹</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>string <span class="token operator">+</span> <span class="token string">" : "</span> <span class="token operator">+</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    properties<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>            <span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token string">" : "</span> <span class="token operator">+</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122212638711.png" alt="å†™é“å±æ€§æ–‡ä»¶ä¸­"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// å±æ€§æ–‡ä»¶çš„è·¯å¾„</span><span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"demo1/src/main/java/com/dapixiu/file.propertoes"</span><span class="token punctuation">;</span><span class="token comment">// åˆ›å»ºPropertieså¯¹è±¡ï¼Œç”¨äºå­˜å‚¨å’Œè®¿é—®å±æ€§</span><span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"DB"</span><span class="token punctuation">,</span><span class="token string">"mysql"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>properties<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"æ·»åŠ æ•°æ®åº“"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-XMLæ–‡ä»¶"><a href="#2-XMLæ–‡ä»¶" class="headerlink" title="2. XMLæ–‡ä»¶"></a>2. XMLæ–‡ä»¶</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122223737936.png" alt="XML"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122224108658.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122224138805.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122224246147.png"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// å±æ€§æ–‡ä»¶çš„è·¯å¾„</span>   <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"demo1/src/main/java/com/dapixiu/file.xml"</span><span class="token punctuation">;</span>      <span class="token comment">// åˆ›å»ºSAXReaderå¯¹è±¡ï¼Œç”¨äºè¯»å–XMLæ–‡ä»¶</span>   <span class="token class-name">SAXReader</span> saxReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SAXReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// è¯»å–å¹¶è§£æXMLæ–‡ä»¶ï¼Œè¿”å›Documentå¯¹è±¡</span>   <span class="token class-name">Document</span> doc <span class="token operator">=</span> saxReader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// è·å–XMLæ–‡ä»¶çš„æ ¹å…ƒç´ </span>   <span class="token class-name">Element</span> root <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">getRootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// æ‰“å°æ ¹å…ƒç´ çš„åç§°ï¼Œæ­¤å¤„å·²æ³¨é‡Šæ‰</span>   <span class="token comment">// System.out.println(root.getName());  // users</span>      <span class="token comment">// è·å–æ ¹å…ƒç´ ä¸‹çš„æ‰€æœ‰å­å…ƒç´ </span>   <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">&gt;</span></span> elements <span class="token operator">=</span> root<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// éå†å¹¶æ‰“å°æ¯ä¸ªå­å…ƒç´ çš„åç§°</span>   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element <span class="token operator">:</span> elements<span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token class-name">String</span> name <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2ã€æ—¥å¿—"><a href="#2ã€æ—¥å¿—" class="headerlink" title="2ã€æ—¥å¿—"></a>2ã€æ—¥å¿—</h2><h3 id="2-1-ä½“ç³»ç»“æ„"><a href="#2-1-ä½“ç³»ç»“æ„" class="headerlink" title="2.1 ä½“ç³»ç»“æ„"></a>2.1 ä½“ç³»ç»“æ„</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122232118775.png" alt="ä½“ç³»ç»“æ„"></p><h3 id="2-2-æ¨¡å—"><a href="#2-2-æ¨¡å—" class="headerlink" title="2.2 æ¨¡å—"></a>2.2 æ¨¡å—</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122232339975.png" alt="æ¨¡å—"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122234107120.png" alt="ä½¿ç”¨"></p><p>2.3 æ—¥å¿—çº§åˆ«</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241123005854385.png"></p><ul><li><p>åªæœ‰æ—¥å¿—çš„çº§åˆ«æ˜¯å¤§äºæˆ–ç­‰äºæ ¸å¿ƒé…ç½®æ–‡ä»¶é…ç½®çš„æ—¥å¿—çº§åˆ«ï¼Œæ‰ä¼šè¢«è®°å½•ï¼Œå¦åˆ™ä¸è®°å½•</p></li><li><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œæ—¥å¿—ä¿å­˜è·¯å¾„æœ€å¥½ä¿®æ”¹ä¸‹ï¼š</p></li></ul><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--        CONSOLE ï¼šè¡¨ç¤ºå½“å‰çš„æ—¥å¿—ä¿¡æ¯æ˜¯å¯ä»¥è¾“å‡ºåˆ°æ§åˆ¶å°çš„ã€‚    --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CONSOLE<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--è¾“å‡ºæµå¯¹è±¡ é»˜è®¤ System.out æ”¹ä¸º System.err--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">&gt;</span></span>System.out<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>            <span class="token comment">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºæ—¥æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦                %msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢è¡Œç¬¦--&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%-5level]  %c [%thread] : %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>     <span class="token comment">&lt;!-- Fileæ˜¯è¾“å‡ºçš„æ–¹å‘é€šå‘æ–‡ä»¶çš„ --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>FILE<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">&gt;</span></span>utf-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--æ—¥å¿—è¾“å‡ºè·¯å¾„--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">&gt;</span></span>D:\development_tools\logback\log/data.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--æŒ‡å®šæ—¥å¿—æ–‡ä»¶æ‹†åˆ†å’Œå‹ç¼©è§„åˆ™--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span>                <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            <span class="token comment">&lt;!--é€šè¿‡æŒ‡å®šå‹ç¼©æ–‡ä»¶åç§°ï¼Œæ¥ç¡®å®šåˆ†å‰²æ–‡ä»¶æ–¹å¼--&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>D:\development_tools\logback\log\log-%d{yyyy-MM-dd}.log%i.gz<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>            <span class="token comment">&lt;!--æ–‡ä»¶æ‹†åˆ†å¤§å°--&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxFileSize</span><span class="token punctuation">&gt;</span></span>1MB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxFileSize</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>     <span class="token comment">&lt;!--    level:ç”¨æ¥è®¾ç½®æ‰“å°çº§åˆ«ï¼Œå¤§å°å†™æ— å…³ï¼šTRACE, DEBUG, INFO, WARN, ERROR    |    ALL å’Œ OFF   ï¼Œ é»˜è®¤debug    &lt;root&gt;å¯ä»¥åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ª&lt;appender-ref&gt;å…ƒç´ ï¼Œæ ‡è¯†è¿™ä¸ªè¾“å‡ºä½ç½®å°†ä¼šè¢«æœ¬æ—¥å¿—çº§åˆ«æ§åˆ¶ã€‚    --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ALL<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- æ³¨æ„ï¼šå¦‚æœè¿™é‡Œä¸é…ç½®å…³è”æ‰“å°ä½ç½®ï¼Œè¯¥ä½ç½®å°†ä¸ä¼šè®°å½•æ—¥å¿—--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>CONSOLE<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>FILE<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> <span class="token constant">LOGGER</span> <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">"Main"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"chuæ–¹æ³•å¼€å§‹æ‰§è¡Œ~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">chu</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"chuæ–¹æ³•æ‰§è¡ŒæˆåŠŸ~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"chuæ–¹æ³•æ‰§è¡Œå¤±è´¥äº†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">chu</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"å‚æ•°a:"</span> <span class="token operator">+</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"å‚æ•°b:"</span> <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> c <span class="token operator">=</span> a <span class="token operator">/</span> b<span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¾“å‡ºç»“æœæ˜¯: "</span> <span class="token operator">+</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"è¾“å‡ºç»“æœæ˜¯:"</span> <span class="token operator">+</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€çŸ¥è¯† </tag>
            
            <tag> é…ç½®æ–‡ä»¶ </tag>
            
            <tag> æ—¥å¿— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>win10æ ¹æ®ç«¯å£æ€æ­»è¿›ç¨‹</title>
      <link href="/2024/11/18/win10-gen-ju-duan-kou-sha-si-jin-cheng/"/>
      <url>/2024/11/18/win10-gen-ju-duan-kou-sha-si-jin-cheng/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­ï¼ŒVmwearå’ŒStram++æ€»æ˜¯ä¼šå‡ºç°ç«¯å£å†²çªçš„é—®é¢˜ï¼Œæ¯æ¬¡ä¸€æ­¥æ­¥æŸ¥å¤ªæ…¢äº†ï¼Œæƒ³åˆ°ç”¨è„šæœ¬è§£å†³ï¼Œä¸€é”®æ€æ­»ç«¯å£è¿›ç¨‹ã€‚</p><p>è¯¥è„šæœ¬éœ€è¦<strong>ç®¡ç†å‘˜æƒé™</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">@echo offchcp <span class="token number">65001</span><span class="token builtin class-name">set</span> /p <span class="token assign-left variable">port</span><span class="token operator">=</span>è¯·è¾“å…¥ç«¯å£å·:<span class="token keyword">for</span> /f <span class="token string">"tokens=5"</span> %%a <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">'netstat -ano ^| findstr "%port%"'</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token punctuation">(</span>    taskkill /PID %%a /F<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241118191133183.png" alt=".batæ–‡ä»¶"></p>]]></content>
      
      
      <categories>
          
          <category> win10 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> win10 </tag>
            
            <tag> ç«¯å£å ç”¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/11/15/stream-liu-he-io-liu/"/>
      <url>/2024/11/15/stream-liu-he-io-liu/</url>
      
        <content type="html"><![CDATA[<h1 id="Streamæµå’ŒIOæµ"><a href="#Streamæµå’ŒIOæµ" class="headerlink" title="Streamæµå’ŒIOæµ"></a>Streamæµå’ŒIOæµ</h1><h2 id="1ã€Streamæµ"><a href="#1ã€Streamæµ" class="headerlink" title="1ã€Streamæµ"></a>1ã€Streamæµ</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯Streamæµï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯Streamæµï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯Streamæµï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯Streamæµï¼Ÿ</h3><ul><li>ä¹Ÿå«Streamæµï¼Œæ˜¯Jdk8å¼€å§‹æ–°å¢çš„ä¸€å¥—API(java.util.stream.*)ï¼Œå¯ä»¥ç”¨äºæ“ä½œé›†åˆæˆ–è€…æ•°ç»„çš„æ•°æ®ã€‚</li><li>ä¼˜åŠ¿:Streamæµå¤§é‡çš„ç»“åˆäº†Lambdaçš„è¯­æ³•é£æ ¼æ¥ç¼–ç¨‹ï¼Œæä¾›äº†ä¸€ç§æ›´åŠ å¼ºå¤§ï¼Œæ›´åŠ ç®€å•çš„æ–¹å¼æ“ä½œé›†åˆæˆ–è€…æ•°ç»„ä¸­çš„æ•°æ®ï¼Œä»£ç æ›´ç®€æ´ï¼Œå¯è¯»æ€§æ›´å¥½</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411222042871.png" alt="streamæµçš„ä½¿ç”¨æ­¥éª¤"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">        <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> names <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>names<span class="token punctuation">,</span><span class="token string">"é™†æ—è½©"</span><span class="token punctuation">,</span><span class="token string">"ææ˜Ÿäº‘"</span><span class="token punctuation">,</span><span class="token string">"å§¬å¦‚é›ª"</span><span class="token punctuation">,</span><span class="token string">"å¼ å­å‡¡"</span><span class="token punctuation">,</span><span class="token string">"å¥³å¸"</span><span class="token punctuation">,</span><span class="token string">"å¼ è°ä¹‹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        æ‰¾å‡º å¼ è°ä¹‹</span>        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        Streamæµå†™æ³•ï¼Œæ‰¾å‡º å¼ è°ä¹‹</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> zhangList <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"å¼ "</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"ä¹‹"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>zhangList<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-2-è·å–Streamæµ"><a href="#1-2-è·å–Streamæµ" class="headerlink" title="1.2 è·å–Streamæµ"></a>1.2 è·å–Streamæµ</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411142224903.png" alt="è·å–Streamæµ"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//        Listé›†åˆè·å–Streamæµ</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> names <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>names<span class="token punctuation">,</span> <span class="token string">"é™†æ—è½©"</span><span class="token punctuation">,</span> <span class="token string">"ææ˜Ÿäº‘"</span><span class="token punctuation">,</span> <span class="token string">"å§¬å¦‚é›ª"</span><span class="token punctuation">,</span> <span class="token string">"å¼ å­å‡¡"</span><span class="token punctuation">,</span> <span class="token string">"å¥³å¸"</span><span class="token punctuation">,</span> <span class="token string">"å¼ è°ä¹‹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">ListStream</span> <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ListStream</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        Seté›†åˆè·å–Streamæµ</span>        <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>set<span class="token punctuation">,</span> <span class="token string">"é™†æ—è½©"</span><span class="token punctuation">,</span> <span class="token string">"ææ˜Ÿäº‘"</span><span class="token punctuation">,</span> <span class="token string">"å§¬å¦‚é›ª"</span><span class="token punctuation">,</span> <span class="token string">"å¼ å­å‡¡"</span><span class="token punctuation">,</span> <span class="token string">"å¥³å¸"</span><span class="token punctuation">,</span> <span class="token string">"å¼ è°ä¹‹"</span><span class="token punctuation">,</span> <span class="token string">"å›å­å‰‘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">SetStream</span> <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> zi <span class="token operator">=</span> <span class="token class-name">SetStream</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"å­"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>zi<span class="token punctuation">)</span><span class="token punctuation">;</span>        zi<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        Mapé›†åˆå¦‚ä½•è·å–Streamæµ</span>        <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"é™†æ—è½©"</span><span class="token punctuation">,</span> <span class="token number">8.6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"å§¬å¦‚é›ª"</span><span class="token punctuation">,</span> <span class="token number">9.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"ææ˜Ÿäº‘"</span><span class="token punctuation">,</span> <span class="token number">9.6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"å¼ å­å‡¡"</span><span class="token punctuation">,</span> <span class="token number">9.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//1. çœ‹ä½œä¸€ä¸ªæ•´ä½“å†™æ³•</span>        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entries <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> kvs <span class="token operator">=</span> entries<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        kvs<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>e<span class="token operator">-&gt;</span>e<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"å¼ "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>e <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" : "</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//2. æ‹†åˆ†å¼€å†™æ³•</span>        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ks <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> vs <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        æ•°ç»„å¦‚ä½•è·å–Streamæµ</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">"å§¬å¦‚é›ª"</span><span class="token punctuation">,</span> <span class="token string">"å¼ å­å‡¡"</span><span class="token punctuation">,</span> <span class="token string">"ææ˜Ÿäº‘"</span><span class="token punctuation">,</span> <span class="token string">"é™†æ—è½©"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token comment">//æ–¹æ³•ä¸€</span>        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> arrStream1 <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//æ–¹æ³•äºŒ</span>        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> arrStream2 <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-3-Streamæµå¸¸è§çš„ä¸­é—´æ–¹æ³•"><a href="#1-3-Streamæµå¸¸è§çš„ä¸­é—´æ–¹æ³•" class="headerlink" title="1.3 Streamæµå¸¸è§çš„ä¸­é—´æ–¹æ³•"></a>1.3 Streamæµå¸¸è§çš„ä¸­é—´æ–¹æ³•</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411222042916.png" alt="å¸¸è§çš„ä¸­é—´æ–¹æ³•"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Collectors</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> scores <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>scores<span class="token punctuation">,</span> <span class="token number">83.2</span><span class="token punctuation">,</span> <span class="token number">12.2</span><span class="token punctuation">,</span> <span class="token number">34.5</span><span class="token punctuation">,</span> <span class="token number">67.1</span><span class="token punctuation">,</span> <span class="token number">58.5</span><span class="token punctuation">,</span> <span class="token number">78.4</span><span class="token punctuation">,</span> <span class="token number">99.8</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        1.æ‰¾å‡ºæˆç»©å¤§äºç­‰äº60ï¼Œå‡åºæ’åˆ—ï¼Œå¹¶è¾“å‡ºã€‚</span>        scores<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s <span class="token operator">&gt;=</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        2.æ“ä½œå¯¹è±¡</span>        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> students <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Student</span> ss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"ææ˜Ÿäº‘"</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">175.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Student</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"ææ˜Ÿäº‘"</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">175.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Student</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å§¬å¦‚é›ª"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">165.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Student</span> s3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å¼ å­å‡¡"</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">174.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Student</span> s4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"é™†æ—è½©"</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">170.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Student</span> s5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"æ—±é­ƒ"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">180.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>students<span class="token punctuation">,</span> s1<span class="token punctuation">,</span> s2<span class="token punctuation">,</span> s3<span class="token punctuation">,</span> s4<span class="token punctuation">,</span> s5<span class="token punctuation">,</span> ss<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ‰¾å‡ºå¹´é¾„åœ¨[23,30],é™åºæ’åˆ—</span>        students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">23</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> o2<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> o1<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é€‰å–èº«é«˜æœ€é«˜çš„ä¸‰ä½ï¼Œè¾“å‡º</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> collect <span class="token operator">=</span> students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>o2<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> o1<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token comment">// æˆªå–å‰ä¸‰ä¸ª</span>                <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>collect<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å–å‡ºèº«é«˜å€’æ•°2åçš„ï¼Œè¾“å‡º</span>        students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>o2<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> o1<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token comment">// è·³è¿‡å‰ä¸‰ä¸ª</span>                <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ‰¾å‡ºèº«é«˜è¶…è¿‡168çš„äººçš„åå­—ï¼Œå¹¶å»é‡</span>        students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">173</span><span class="token punctuation">)</span>                <span class="token comment">//è·å–åå­—  å»é‡</span>                <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Student</span><span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-4-Streamæµå¸¸è§çš„ç»ˆç»“æ–¹æ³•"><a href="#1-4-Streamæµå¸¸è§çš„ç»ˆç»“æ–¹æ³•" class="headerlink" title="1.4 Streamæµå¸¸è§çš„ç»ˆç»“æ–¹æ³•"></a>1.4 Streamæµå¸¸è§çš„ç»ˆç»“æ–¹æ³•</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411222042807.png" alt="å¸¸è§çš„ç»ˆç»“æ–¹æ³•"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411222042049.png" alt="å¸¸è§çš„ç»ˆç»“æ–¹æ³•"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// æ“ä½œå¯¹è±¡</span><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> students <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Student</span> ss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"ææ˜Ÿäº‘"</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">175.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Student</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"ææ˜Ÿäº‘"</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">175.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Student</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å§¬å¦‚é›ª"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">165.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Student</span> s3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"å¼ å­å‡¡"</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">174.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Student</span> s4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"é™†æ—è½©"</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">170.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Student</span> s5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"æ—±é­ƒ"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">180.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>students<span class="token punctuation">,</span> s1<span class="token punctuation">,</span> s2<span class="token punctuation">,</span> s3<span class="token punctuation">,</span> s4<span class="token punctuation">,</span> s5<span class="token punctuation">,</span> ss<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 1.è®¡ç®—è¶…è¿‡170çš„æœ‰å‡ äºº</span><span class="token keyword">long</span> num <span class="token operator">=</span> students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">170</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2. æ‰¾å‡ºèº«é«˜æœ€é«˜çš„å­¦ç”Ÿå¯¹è±¡ï¼Œå¹¶è¾“å‡º</span><span class="token class-name">Student</span> student <span class="token operator">=</span> students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>o1<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> o2<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment">// .get()å¾—åˆ°å¯¹è±¡</span>        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 3. æ‰¾å‡ºèº«é«˜æœ€ä½çš„å­¦ç”Ÿå¯¹è±¡ï¼Œå¹¶è¾“å‡º</span><span class="token class-name">Student</span> student1 <span class="token operator">=</span> students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>o1<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> o2<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>student1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 4. æ‰¾å‡ºèº«é«˜è¶…è¿‡170çš„ï¼Œæ”¾åˆ°ä¸€ä¸ªé›†åˆä¸­è¾“å‡º</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> studentList <span class="token operator">=</span> students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">170</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>studentList<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 5. æ‰¾å‡ºèº«é«˜è¶…è¿‡170çš„å­¦ç”Ÿå¯¹è±¡ï¼Œå¹¶æŠŠå­¦ç”Ÿå¯¹è±¡çš„åå­—å’Œèº«é«˜ï¼Œå­˜å…¥åˆ°ä¸€ä¸ªMapé›†åˆè¿”å›</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">170</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span>                body <span class="token operator">-&gt;</span> body<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> body <span class="token operator">-&gt;</span> body<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>           <span class="token comment">// åˆ†åˆ«ä»¥åå­—å’Œèº«é«˜ä½œä¸ºé”®å’Œå€¼</span>                <span class="token punctuation">(</span>existing<span class="token punctuation">,</span> replacement<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>existing<span class="token punctuation">,</span> replacement<span class="token punctuation">)</span>  <span class="token comment">// åˆå¹¶å‡½æ•°ï¼šå–èº«é«˜è¾ƒé«˜çš„å€¼</span>        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 5.ç®€åŒ–:</span><span class="token comment">// PS:  å¦‚æœè¦ç”¨.distinct()å»é‡çš„è¯ï¼Œéœ€è¦é‡å†™   equals()å’ŒhashCode()</span>        <span class="token comment">// 5. æ‰¾å‡ºèº«é«˜è¶…è¿‡170çš„å­¦ç”Ÿå¯¹è±¡ï¼Œå¹¶æŠŠå­¦ç”Ÿå¯¹è±¡çš„åå­—å’Œèº«é«˜ï¼Œå­˜å…¥åˆ°ä¸€ä¸ªMapé›†åˆè¿”å›</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> students<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">170</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span>                        <span class="token class-name">Student</span><span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">,</span> <span class="token class-name">Student</span><span class="token operator">::</span><span class="token function">getHeight</span><span class="token punctuation">,</span>           <span class="token comment">// åˆ†åˆ«ä»¥åå­—å’Œèº«é«˜ä½œä¸ºé”®å’Œå€¼</span>                        <span class="token class-name">Math</span><span class="token operator">::</span><span class="token function">max</span>  <span class="token comment">// åˆå¹¶å‡½æ•°ï¼šå–èº«é«˜è¾ƒé«˜çš„å€¼</span>                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2ã€File-æ“ä½œæ–‡ä»¶"><a href="#2ã€File-æ“ä½œæ–‡ä»¶" class="headerlink" title="2ã€File-æ“ä½œæ–‡ä»¶"></a>2ã€File-æ“ä½œæ–‡ä»¶</h2><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411151725289.png" alt="Fileä»‹ç»"></p><h3 id="2-1-åˆ¤æ–­æ–‡ä»¶ç±»å‹-è·å–æ–‡ä»¶ä¿¡æ¯"><a href="#2-1-åˆ¤æ–­æ–‡ä»¶ç±»å‹-è·å–æ–‡ä»¶ä¿¡æ¯" class="headerlink" title="2.1 åˆ¤æ–­æ–‡ä»¶ç±»å‹ è·å–æ–‡ä»¶ä¿¡æ¯"></a>2.1 åˆ¤æ–­æ–‡ä»¶ç±»å‹ è·å–æ–‡ä»¶ä¿¡æ¯</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411151740910.png" alt="å¸¸è§æ–¹æ³•"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411151745613.png" alt="å¸¸è§æ–¹æ³•"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1ã€åˆ›å»ºFileå¯¹è±¡ï¼ŒæŒ‡å‘æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶</span>        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"D:\\Users\\ZhangYao\\Desktop\\å¸¸ç”¨æ–¹æ³•.md"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2ã€public boolean exists():åˆ¤æ–­å½“å‰æ–‡ä»¶å¯¹è±¡ï¼Œå¯¹åº”çš„æ–‡ä»¶è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨è¿”å›true.System.out.println(f1.exists());</span>        <span class="token keyword">boolean</span> exists <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>exists<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3ã€public boolean isFile():åˆ¤æ–­å½“å‰æ–‡ä»¶å¯¹è±¡æŒ‡ä»£çš„æ˜¯å¦æ˜¯æ–‡ä»¶ï¼Œæ˜¯æ–‡ä»¶è¿”å›trueï¼Œåä¹‹ã€‚</span>        <span class="token keyword">boolean</span> isFile <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>isFile<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4ã€public boolean isDirectory() :åˆ¤æ–­å½“å‰æ–‡ä»¶å¯¹è±¡æŒ‡ä»£çš„æ˜¯å¦æ˜¯æ–‡ä»¶å¤¹ï¼Œæ˜¯æ–‡ä»¶å¤¹è¿”å›trueï¼Œåä¹‹ã€‚</span>        <span class="token keyword">boolean</span> isDirectory <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>isDirectory<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//5.public string getName():è·å–æ–‡ä»¶çš„åç§°(åŒ…å«åç¼€)</span>        <span class="token class-name">String</span> name <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//6.public long length():è·å–æ–‡ä»¶çš„å¤§å°ï¼Œè¿”å›å­—èŠ‚ä¸ªæ•°</span>        <span class="token keyword">long</span> size <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 8.public String getPath():è·å–åˆ›å»ºæ–‡ä»¶å¯¹è±¡æ—¶ï¼Œä½¿ç”¨çš„è·¯å¾„</span>        <span class="token class-name">String</span> path <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 9.public string getAbsolutePath():è·å–ç»å¯¹è·¯å¾„</span>        <span class="token class-name">File</span> absoluteFile <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getAbsoluteFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>absoluteFile<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//7.public long lastModified():è·å–æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´</span>        <span class="token keyword">long</span> lastModified <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">lastModified</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å°† long ç±»å‹çš„æ—¶é—´æˆ³è½¬æ¢ä¸º LocalDateTime å¯¹è±¡</span>        <span class="token class-name">LocalDateTime</span> dateTime <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">ofEpochSecond</span><span class="token punctuation">(</span>lastModified <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">,</span>                <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>lastModified <span class="token operator">%</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span>ZoneOffset</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"+8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">DateTimeFormatter</span> formatter <span class="token operator">=</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> formattedDate <span class="token operator">=</span> formatter<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>dateTime<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>formattedDate<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-2-åˆ›å»ºæ–‡ä»¶-åˆ é™¤æ–‡ä»¶"><a href="#2-2-åˆ›å»ºæ–‡ä»¶-åˆ é™¤æ–‡ä»¶" class="headerlink" title="2.2 åˆ›å»ºæ–‡ä»¶ åˆ é™¤æ–‡ä»¶"></a>2.2 åˆ›å»ºæ–‡ä»¶ åˆ é™¤æ–‡ä»¶</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411151817721.png" alt="åˆ›å»ºã€åˆ é™¤æ–‡ä»¶å¤¹"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1ã€public boolean createNewFile():åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶(æ–‡ä»¶å†…å®¹ä¸ºç©º)ï¼Œåˆ›å»ºæˆåŠŸè¿”å›true,åä¹‹ã€‚</span>        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"D:\\Users\\ZhangYao\\Desktop\\æµ‹è¯•.md"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span> newFile <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>newFile<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2ã€public boolean mkdir():ç”¨äºåˆ›å»ºæ–‡ä»¶å¤¹ï¼Œæ³¨æ„:åªèƒ½åˆ›å»ºä¸€çº§æ–‡ä»¶å¤¹</span>        <span class="token class-name">File</span> filePackage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"D:\\Users\\ZhangYao\\Desktop\\æµ‹è¯•æ–‡ä»¶å¤¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span> mkdir <span class="token operator">=</span> filePackage<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mkdir<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 3ã€public boolean mkdirs():ç”¨äºåˆ›å»ºæ–‡ä»¶å¤¹ï¼Œæ³¨æ„:å¯ä»¥åˆ›å»ºå¤šçº§æ–‡ä»¶å¤¹,è¿”å›åˆ›å»ºçš„æ–‡ä»¶å¤¹åç§°</span>        <span class="token class-name">File</span> filePackages <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"D:\\Users\\ZhangYao\\Desktop\\æµ‹è¯•æ–‡ä»¶å¤¹\\aaa\\bbb\\ccc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        filePackages<span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>filePackages<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 3ã€public boolean delete():åˆ é™¤æ–‡ä»¶ï¼Œæˆ–è€…ç©ºæ–‡ä»¶ï¼Œæ³¨æ„:ä¸èƒ½åˆ é™¤éç©ºæ–‡ä»¶å¤¹ã€‚</span>        <span class="token keyword">boolean</span> delete <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>delete<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-3-éå†æ–‡ä»¶å¤¹"><a href="#2-3-éå†æ–‡ä»¶å¤¹" class="headerlink" title="2.3 éå†æ–‡ä»¶å¤¹"></a>2.3 éå†æ–‡ä»¶å¤¹</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411151945856.png" alt="éå†"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 1ã€public String[] list():è·å–å½“å‰ç›®å½•ä¸‹æ‰€æœ‰çš„"ä¸€çº§æ–‡ä»¶åç§°"åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ä¸­å»è¿”å›ã€‚</span>        <span class="token class-name">File</span> f1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡ä»¶å¤¹/q/w/e/r/t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> list <span class="token operator">=</span> f1<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token comment">//2ã€public File[] listFiles():(é‡ç‚¹)è·å–å½“å‰ç›®å½•ä¸‹æ‰€æœ‰çš„"ä¸€çº§æ–‡ä»¶å¯¹è±¡"åˆ°ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡æ•°ç»„ä¸­å»è¿”å›(é‡ç‚¹)</span>        <span class="token class-name">File</span><span class="token punctuation">[</span><span class="token punctuation">]</span> files <span class="token operator">=</span> f1<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">File</span> file <span class="token operator">:</span> files<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411160846359.png" alt="éœ€æ±‚"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// æ–¹æ³•è°ƒç”¨</span><span class="token function">searchFile</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"D:/"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"QQ.exe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/** * åœ¨æŒ‡å®šç›®å½•ä¸­æœç´¢å…·æœ‰ç»™å®šåç§°çš„æ–‡ä»¶ * å¦‚æœæ‰¾åˆ°åŒ¹é…åç§°çš„æ–‡ä»¶ï¼Œå°†æ‰“å°å‡ºæ–‡ä»¶çš„ç»å¯¹è·¯å¾„ * å¦‚æœç›®å½•ä¸ºnullï¼Œä¸å­˜åœ¨æˆ–æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå‡½æ•°å°†ç›´æ¥è¿”å›ï¼Œä¸åšä»»ä½•æ“ä½œ * * @param dir è¦æœç´¢çš„ç›®å½• * @param fileName è¦æœç´¢çš„æ–‡ä»¶åç§° */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">searchFile</span><span class="token punctuation">(</span><span class="token class-name">File</span> dir<span class="token punctuation">,</span> <span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// æ£€æŸ¥ç›®å½•å‚æ•°æ˜¯å¦æœ‰æ•ˆï¼Œæ— æ•ˆåˆ™ç›´æ¥è¿”å›</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>dir <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>dir<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> dir<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token comment">// è·å–ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•</span>    <span class="token class-name">File</span><span class="token punctuation">[</span><span class="token punctuation">]</span> files <span class="token operator">=</span> dir<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¦‚æœæ–‡ä»¶æ•°ç»„ä¸ä¸ºç©ºï¼Œåˆ™éå†æ¯ä¸ªæ–‡ä»¶æˆ–å­ç›®å½•</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>files <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">File</span> f <span class="token operator">:</span> files<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// å¦‚æœæ˜¯æ–‡ä»¶ï¼Œåˆ™æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦åŒ…å«ç›®æ ‡åç§°</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment">// å¦‚æœæ–‡ä»¶ååŒ…å«ç›®æ ‡åç§°ï¼Œåˆ™æ‰“å°æ–‡ä»¶çš„ç»å¯¹è·¯å¾„</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‰¾åˆ°äº†"</span> <span class="token operator">+</span> f<span class="token punctuation">.</span><span class="token function">getAbsoluteFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token comment">// å¦‚æœæ˜¯å­ç›®å½•ï¼Œåˆ™é€’å½’è°ƒç”¨searchFileå‡½æ•°ç»§ç»­æœç´¢</span>                <span class="token function">searchFile</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">// æ‰¾åˆ°åå¯åŠ¨</span><span class="token class-name">Runtime</span> runtime <span class="token operator">=</span> <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>runtime<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-4-åˆ é™¤éç©ºæ–‡ä»¶å¤¹"><a href="#2-4-åˆ é™¤éç©ºæ–‡ä»¶å¤¹" class="headerlink" title="2.4 åˆ é™¤éç©ºæ–‡ä»¶å¤¹"></a>2.4 åˆ é™¤éç©ºæ–‡ä»¶å¤¹</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//       æ–¹æ³•ä¸€</span>        <span class="token class-name">Path</span> dir <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"path/to/your/directory"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ›¿æ¢ä¸ºä½ è¦åˆ é™¤çš„ç›®å½•è·¯å¾„</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token function">deleteDirectory</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç›®å½•å·²æˆåŠŸåˆ é™¤"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤ç›®å½•æ—¶å‘ç”Ÿé”™è¯¯: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">//è‡ªå®šä¹‰æ–¹æ³•        </span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">deleteDirectory</span><span class="token punctuation">(</span><span class="token class-name">Path</span> directory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>directory<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">walkFileTree</span><span class="token punctuation">(</span>directory<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SimpleFileVisitor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Path</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token annotation punctuation">@Override</span>                <span class="token keyword">public</span> <span class="token class-name">FileVisitResult</span> <span class="token function">visitFile</span><span class="token punctuation">(</span><span class="token class-name">Path</span> file<span class="token punctuation">,</span> <span class="token class-name">BasicFileAttributes</span> attrs<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>                    <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">return</span> <span class="token class-name">FileVisitResult</span><span class="token punctuation">.</span><span class="token constant">CONTINUE</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token annotation punctuation">@Override</span>                <span class="token keyword">public</span> <span class="token class-name">FileVisitResult</span> <span class="token function">postVisitDirectory</span><span class="token punctuation">(</span><span class="token class-name">Path</span> dir<span class="token punctuation">,</span> <span class="token class-name">IOException</span> exc<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>                    <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">return</span> <span class="token class-name">FileVisitResult</span><span class="token punctuation">.</span><span class="token constant">CONTINUE</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æŒ‡å®šçš„ç›®å½•ä¸å­˜åœ¨"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// æ–¹æ³•äºŒ</span><span class="token function">deleteDir</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"D:\\Users\\ZhangYao\\Desktop\\æµ‹è¯•.md"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">deleteDir</span><span class="token punctuation">(</span><span class="token class-name">File</span> dir<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>dir <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>dir<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>dir<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        dir<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//dirå­˜åœ¨ï¼Œä¸”æ˜¯æ–‡ä»¶å¤¹ã€‚æ‹¿åˆ°é‡Œè¾¹çš„ä¸€çº§æ–‡ä»¶å¯¹è±¡ã€‚</span>    <span class="token class-name">File</span><span class="token punctuation">[</span><span class="token punctuation">]</span> files <span class="token operator">=</span> dir<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>files <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token comment">//è¿™æ˜¯ä¸€ä¸ªæœ‰å†…å®¹çš„æ–‡ä»¶å¤¹ï¼Œå¹²æ‰é‡Œè¾¹çš„å†…å®¹ï¼Œå†å¹²æ‰è‡ªå·±ã€‚</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">File</span> file <span class="token operator">:</span> files<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            file<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token function">deleteDir</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        dir<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤å·²å®Œæˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3ã€IOæµ-å­—èŠ‚æµ"><a href="#3ã€IOæµ-å­—èŠ‚æµ" class="headerlink" title="3ã€IOæµ-å­—èŠ‚æµ"></a>3ã€IOæµ-å­—èŠ‚æµ</h2><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411152124594.png" alt="å­—ç¬¦çš„ç¼–ç å’Œè§£ç "></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//        ç¼–ç </span>        <span class="token class-name">String</span> data <span class="token operator">=</span> <span class="token string">"ä¼ å›½ç‰çº"</span><span class="token punctuation">;</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        è§£ç </span>        <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411222043461.png" alt="ä»¥å†…å­˜ä¸ºå‚ç…§çš„è¾“å…¥è¾“å‡º"></p><ul><li>å­—èŠ‚æµâ€”&gt;é€‚åˆæ“ä½œæ‰€æœ‰ç±»å‹çš„æ–‡ä»¶</li><li>å­—ç¬¦æµâ€”&gt;åªé€‚åˆæ“ä½œçº¯æ–‡æœ¬æ–‡ä»¶</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411222043747.png" alt="åˆ†ç±»"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411222043670.png" alt="IOæµä½“ç³»"></p><h3 id="3-1-æ–‡ä»¶å­—èŠ‚è¾“å…¥æµ"><a href="#3-1-æ–‡ä»¶å­—èŠ‚è¾“å…¥æµ" class="headerlink" title="3.1 æ–‡ä»¶å­—èŠ‚è¾“å…¥æµ"></a>3.1 æ–‡ä»¶å­—èŠ‚è¾“å…¥æµ</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411222043194.png" alt="å¯ä»¥æ“ä½œæ‰€æœ‰æ–‡ä»¶"></p><p>è¯»å–æ–‡æœ¬å†…å®¹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// åˆ›å»ºæ–‡ä»¶è¾“å…¥æµï¼ŒæŒ‡å‘å¾…è¯»å–çš„æ–‡æœ¬æ–‡ä»¶</span><span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"D:\\Users\\ZhangYao\\Desktop\\æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è¯»å–æ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶è½¬æ¢ä¸ºå­—ç¬¦æ‰“å°å‡ºæ¥</span><span class="token keyword">int</span> read <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> read<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆå§‹åŒ–å˜é‡bç”¨äºå­˜å‚¨ä»æ–‡ä»¶ä¸­è¯»å–çš„å­—èŠ‚</span><span class="token keyword">int</span> b<span class="token punctuation">;</span><span class="token comment">// å¾ªç¯è¯»å–æ–‡ä»¶ä¸­çš„å­—èŠ‚ï¼Œç›´åˆ°æ–‡ä»¶ç»“æŸï¼ˆè¿”å›-1ï¼‰</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>b <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// å°†è¯»å–çš„å­—èŠ‚è½¬æ¢ä¸ºå­—ç¬¦ï¼Œå¹¶æ‰“å°å‡ºæ¥</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// æ–‡ä»¶è¯»å–å®Œæ¯•åï¼Œå…³é—­è¾“å…¥æµé‡Šæ”¾èµ„æº</span>is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java">        <span class="token comment">// åˆ›å»ºæ–‡ä»¶è¾“å…¥æµï¼ŒæŒ‡å‘å¾…è¯»å–çš„æ–‡æœ¬æ–‡ä»¶</span>        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> len <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> rs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½“å‰è¯»å–çš„å­—èŠ‚æ•°é‡: "</span> <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> len2 <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> rs2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½“å‰è¯»å–çš„å­—èŠ‚æ•°é‡: "</span> <span class="token operator">+</span> len2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        æ–‡æ¡£å†…å®¹æ˜¯Scs, ç¬¬ä¸€æ¬¡è¯»å–ç»“æœæ˜¯Sc,è¯»å–çš„å­—èŠ‚æ•°é‡æ˜¯2.   ç¬¬äºŒæ¬¡è¯»å–ç»“æœæ˜¯Sc,è¯»å–çš„å­—èŠ‚æ•°é‡æ˜¯1</span><span class="token comment">//        æ˜¾ç„¶ç¬¬äºŒæ¬¡è¯»å–å¤šäº†ä¸ªc,æ¥è‡ªä¸Šä¸€æ¬¡è¯»å–ç»“æœçš„æœ€åä½</span><span class="token comment">//        éƒ½å¤šå°‘ï¼Œå€’å‡ºå¤šå°‘</span>        <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        æ¯æ¬¡è¯»å–å¤šä¸ªå­—èŠ‚åˆ°å­—èŠ‚æ•°ç»„ä¸­å»ï¼Œè¿”å›è¯»å–çš„å­—èŠ‚æ•°é‡ï¼Œè¯»å–å®Œæ¯•ä¼šè¿”å›-1.</span>        <span class="token keyword">int</span> len3 <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len3<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è¯»å–å®Œæ¯•ï¼Œ -1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// æ”¹è¿›:</span><span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> len<span class="token punctuation">;</span> <span class="token comment">// è®°å½•æ¯æ¬¡è¯»å–çš„æ•°é‡</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411162036757.png" alt="æ³¨æ„äº‹é¡¹"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// åˆ›å»ºæ–‡ä»¶è¾“å…¥æµï¼ŒæŒ‡å‘å¾…è¯»å–çš„æ–‡æœ¬æ–‡ä»¶</span><span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> f<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">int</span> len <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>size <span class="token operator">==</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411162055218.png" alt="ä¸€æ¬¡è¯»å…¨æ–‡ä»¶"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// æ–¹æ³•ä¸€:</span><span class="token comment">// åˆ›å»ºæ–‡ä»¶è¾“å…¥æµï¼ŒæŒ‡å‘å¾…è¯»å–çš„æ–‡æœ¬æ–‡ä»¶</span><span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–æ–‡ä»¶å¯¹è±¡ï¼Œç”¨äºè·å–æ–‡ä»¶é•¿åº¦</span><span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–æ–‡ä»¶é•¿åº¦ï¼Œç”¨äºåˆå§‹åŒ–å­—èŠ‚æ•°ç»„</span><span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> f<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ ¹æ®æ–‡ä»¶é•¿åº¦åˆ›å»ºå­—èŠ‚æ•°ç»„ï¼Œç”¨äºå­˜å‚¨æ–‡ä»¶å†…å®¹</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// ä»æ–‡ä»¶ä¸­è¯»å–å†…å®¹åˆ°å­—èŠ‚æ•°ç»„ä¸­</span><span class="token keyword">int</span> len <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å°†å­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span><span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è¾“å‡ºè¯»å–åˆ°çš„å­—ç¬¦ä¸²å†…å®¹</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ£€æŸ¥è¯»å–çš„å­—èŠ‚æ•°æ˜¯å¦ä¸æ–‡ä»¶é•¿åº¦ä¸€è‡´ï¼Œä»¥éªŒè¯æ˜¯å¦å®Œæ•´è¯»å–äº†æ–‡ä»¶å†…å®¹</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>size <span class="token operator">==</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// æ–¹æ³•äºŒ:</span><span class="token comment">// åˆ›å»ºæ–‡ä»¶è¾“å…¥æµï¼ŒæŒ‡å‘å¾…è¯»å–çš„æ–‡æœ¬æ–‡ä»¶</span><span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è¯»å–æ–‡ä»¶æ‰€æœ‰å­—èŠ‚åˆ°å­—èŠ‚æ•°ç»„bufferä¸­</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">readAllBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å°†å­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span><span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è¾“å‡ºå­—ç¬¦ä¸²åˆ°æ§åˆ¶å°</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411162103699.png"></p><h3 id="3-2-æ–‡ä»¶å­—èŠ‚è¾“å‡ºæµ"><a href="#3-2-æ–‡ä»¶å­—èŠ‚è¾“å‡ºæµ" class="headerlink" title="3.2 æ–‡ä»¶å­—èŠ‚è¾“å‡ºæµ"></a>3.2 æ–‡ä»¶å­—èŠ‚è¾“å‡ºæµ</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411162106337.png" alt="æ–‡ä»¶å­—èŠ‚è¾“å‡ºæµ"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411162107320.png" alt="æ–¹æ³•"></p><ul><li>å†™å…¥ä¼šè¦†ç›–åŸæ–‡ä»¶å†…å®¹ã€‚å¼±æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå¯è‡ªåŠ¨äº§ç”Ÿæ–‡ä»¶ã€‚</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 1ã€åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµï¼ŒæŒ‡å‘å¾…å†™å…¥çš„æ–‡æœ¬æ–‡ä»¶</span>        <span class="token class-name">FileOutputStream</span> os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 2. å†™å­—èŠ‚å‡ºå»åˆ°æ–‡ä»¶</span><span class="token comment">//        å†™å…¥ä¸€ä¸ªå­—èŠ‚</span>        os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        å†™å…¥ä¸€ä¸ªå­—èŠ‚æ•°ç»„</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token string">"æ®‹å°¸è´¥èœ•ï¼ˆé™è‡£ï¼‰ã€è¡€æŸ“æ²³å±±ï¼ˆä¾¯å¿ï¼‰ã€èµ¤åœ°åƒé‡Œï¼ˆç„Šé­ƒï¼‰ã€å†¥æµ·æ— å²¸ï¼ˆè¤å‹¾ï¼‰"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        å†™å…¥å­—èŠ‚æ•°ç»„çš„ä¸€éƒ¨åˆ†</span>        os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ–‡ä»¶è¾“å‡ºæµè¿½åŠ å‚æ•°<code>true</code>,åˆ™ä¸å†è¦†ç›–åŸæ–‡ä»¶å†…å®¹</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>æ¢è¡Œï¼š<code>os.write(bytes);</code></li></ul><h2 id="4ã€IOæµ-å­—ç¬¦æµ"><a href="#4ã€IOæµ-å­—ç¬¦æµ" class="headerlink" title="4ã€IOæµ-å­—ç¬¦æµ"></a>4ã€IOæµ-å­—ç¬¦æµ</h2><ul><li>å­—èŠ‚æµï¼Œé€‚åˆæ–‡æœ¬å¤åˆ¶ï¼Œä¸é€‚åˆè¯»å†™æ–‡æœ¬æ–‡ä»¶ã€‚</li><li>å­—ç¬¦æµï¼Œéå¸¸é€‚åˆè¯»å†™æ–‡æœ¬æ–‡ä»¶å†…å®¹ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411162208874.png" alt="å­—ç¬¦æµ"></p><h3 id="4-1-æ–‡ä»¶å­—ç¬¦è¾“å…¥æµ"><a href="#4-1-æ–‡ä»¶å­—ç¬¦è¾“å…¥æµ" class="headerlink" title="4.1 æ–‡ä»¶å­—ç¬¦è¾“å…¥æµ"></a>4.1 æ–‡ä»¶å­—ç¬¦è¾“å…¥æµ</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411162208955.png" alt="æ–¹æ³•"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//        åˆ›å»ºä¸€ä¸ªå­—èŠ‚è¾“å…¥æµï¼Œä¸æºæ–‡ä»¶è¿æ¥</span>        <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Reader</span> fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//            è¯»å–æ–‡ä»¶å†…å®¹,æ¯æ¬¡è¯»å–ä¸€ä¸ªå­—ç¬¦ï¼Œæ€§èƒ½æ˜¯æ¯”è¾ƒå·®çš„ã€‚</span>            <span class="token keyword">int</span> c<span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>c <span class="token operator">=</span> fr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//        åˆ›å»ºä¸€ä¸ªå­—èŠ‚è¾“å…¥æµï¼Œä¸æºæ–‡ä»¶è¿æ¥</span>        <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Reader</span> fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//          æ”¹è¿›å:  è¯»å–æ–‡ä»¶å†…å®¹</span>            <span class="token keyword">int</span> len<span class="token punctuation">;</span>            <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> fr<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-2-æ–‡ä»¶å­—ç¬¦è¾“å‡ºæµ"><a href="#4-2-æ–‡ä»¶å­—ç¬¦è¾“å‡ºæµ" class="headerlink" title="4.2 æ–‡ä»¶å­—ç¬¦è¾“å‡ºæµ"></a>4.2 æ–‡ä»¶å­—ç¬¦è¾“å‡ºæµ</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411222043392.png" alt="æ–¹æ³•"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">(</span>                <span class="token comment">//        åˆ›å»ºä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµï¼Œä¸æºæ–‡ä»¶è¿æ¥</span>                <span class="token class-name">FileWriter</span> fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>        <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//            è¯»å–æ–‡ä»¶å†…å®¹</span>            fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token char">'f'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"å›è‰ºå¿ƒ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token char">'1'</span><span class="token punctuation">,</span> <span class="token char">'2'</span><span class="token punctuation">,</span> <span class="token char">'3'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"å›æœ‰äº‘"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token char">'1'</span><span class="token punctuation">,</span> <span class="token char">'3'</span><span class="token punctuation">,</span> <span class="token char">'4'</span><span class="token punctuation">,</span> <span class="token char">'6'</span><span class="token punctuation">,</span> <span class="token char">'7'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            fw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// åˆ·æ–°</span>            fw<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­—ç¬¦æµã€å­—èŠ‚æµâ€“-å°ç»“"><a href="#å­—ç¬¦æµã€å­—èŠ‚æµâ€“-å°ç»“" class="headerlink" title="å­—ç¬¦æµã€å­—èŠ‚æµâ€“>å°ç»“"></a>å­—ç¬¦æµã€å­—èŠ‚æµâ€“&gt;å°ç»“</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241118095443405.png" alt="æ³¨æ„"></p><hr><h2 id="5ã€ç¼“å†²æµ"><a href="#5ã€ç¼“å†²æµ" class="headerlink" title="5ã€ç¼“å†²æµ"></a>5ã€ç¼“å†²æµ</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241118100012625.png" alt="ä½“ç³»"></p><h3 id="5-1-å­—ç¬¦ç¼“å†²è¾“å…¥æµ"><a href="#5-1-å­—ç¬¦ç¼“å†²è¾“å…¥æµ" class="headerlink" title="5.1 å­—ç¬¦ç¼“å†²è¾“å…¥æµ"></a>5.1 å­—ç¬¦ç¼“å†²è¾“å…¥æµ</h3><p>åŸç†:</p><ul><li>å­—èŠ‚ç¼“å†²è¾“å…¥æµè‡ªå¸¦äº†8KBç¼“å†²æ± ;</li><li>å­—èŠ‚ç¼“å†²è¾“å‡ºæµä¹Ÿè‡ªå¸¦äº†8KBç¼“å†²æ± ;</li></ul><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411222044003.png"></p><p>åŸå§‹æµçš„æ–‡ä»¶å¤åˆ¶ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// åŸå§‹æ–‡ä»¶è·¯å¾„</span><span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">;</span><span class="token comment">// ç›®æ ‡å¤åˆ¶æ–‡ä»¶è·¯å¾„</span><span class="token class-name">String</span> copy <span class="token operator">=</span> <span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬copy.txt"</span><span class="token punctuation">;</span><span class="token comment">// ä½¿ç”¨try-with-resourcesç¡®ä¿æ–‡ä»¶æµåœ¨æ“ä½œåèƒ½è‡ªåŠ¨å…³é—­</span><span class="token keyword">try</span> <span class="token punctuation">(</span>        <span class="token comment">// åˆ›å»ºæ–‡ä»¶è¾“å…¥æµï¼Œç”¨äºè¯»å–åŸå§‹æ–‡ä»¶</span>        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµï¼Œç”¨äºå†™å…¥ç›®æ ‡å¤åˆ¶æ–‡ä»¶</span>        <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>copy<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// åˆ›å»ºä¸€ä¸ªç¼“å†²åŒºï¼Œç”¨äºä¸´æ—¶å­˜å‚¨ä»åŸå§‹æ–‡ä»¶è¯»å–çš„æ•°æ®</span>    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> len<span class="token punctuation">;</span>    <span class="token comment">// å¾ªç¯è¯»å–åŸå§‹æ–‡ä»¶æ•°æ®ï¼Œç›´åˆ°æ–‡ä»¶ç»“æŸ</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// å°†è¯»å–çš„æ•°æ®å†™å…¥ç›®æ ‡å¤åˆ¶æ–‡ä»¶</span>        os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// æ‰“å°å¤åˆ¶å®Œæˆçš„æ¶ˆæ¯</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"copyå®Œæˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// æ‰“å°å¼‚å¸¸ä¿¡æ¯ï¼Œä¾¿äºè°ƒè¯•å’Œé”™è¯¯è¿½è¸ª</span>    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼“å†²æµçš„æ–‡ä»¶å¤åˆ¶ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// åŸå§‹æ–‡ä»¶è·¯å¾„</span><span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">;</span><span class="token comment">// ç›®æ ‡å¤åˆ¶æ–‡ä»¶è·¯å¾„</span><span class="token class-name">String</span> copy <span class="token operator">=</span> <span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬copy.txt"</span><span class="token punctuation">;</span><span class="token comment">// ä½¿ç”¨try-with-resourcesç¡®ä¿æ–‡ä»¶æµåœ¨æ“ä½œåèƒ½è‡ªåŠ¨å…³é—­</span><span class="token keyword">try</span> <span class="token punctuation">(</span>        <span class="token comment">// åˆ›å»ºæ–‡ä»¶è¾“å…¥æµï¼Œç”¨äºè¯»å–åŸå§‹æ–‡ä»¶</span>        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">InputStream</span> bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµï¼Œç”¨äºå†™å…¥ç›®æ ‡å¤åˆ¶æ–‡ä»¶</span>        <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>copy<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">OutputStream</span> bos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span>os<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// åˆ›å»ºä¸€ä¸ªç¼“å†²åŒºï¼Œç”¨äºä¸´æ—¶å­˜å‚¨ä»åŸå§‹æ–‡ä»¶è¯»å–çš„æ•°æ®</span>    <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> len<span class="token punctuation">;</span>    <span class="token comment">// å¾ªç¯è¯»å–åŸå§‹æ–‡ä»¶æ•°æ®ï¼Œç›´åˆ°æ–‡ä»¶ç»“æŸ</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> bis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// å°†è¯»å–çš„æ•°æ®å†™å…¥ç›®æ ‡å¤åˆ¶æ–‡ä»¶</span>        bos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// æ‰“å°å¤åˆ¶å®Œæˆçš„æ¶ˆæ¯</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"copyå®Œæˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// æ‰“å°å¼‚å¸¸ä¿¡æ¯ï¼Œä¾¿äºè°ƒè¯•å’Œé”™è¯¯è¿½è¸ª</span>    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241118224536488.png"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// åŸå§‹æ–‡ä»¶è·¯å¾„</span><span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">;</span><span class="token class-name">FileReader</span> fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">BufferedReader</span> bfr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>fr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> line<span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> bfr<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-2-å­—ç¬¦ç¼“å†²è¾“å‡ºæµ"><a href="#5-2-å­—ç¬¦ç¼“å†²è¾“å‡ºæµ" class="headerlink" title="5.2 å­—ç¬¦ç¼“å†²è¾“å‡ºæµ"></a>5.2 å­—ç¬¦ç¼“å†²è¾“å‡ºæµ</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122164914978.png"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// åŸå§‹æ–‡ä»¶è·¯å¾„</span><span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">;</span><span class="token class-name">FileWriter</span> fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">BufferedWriter</span> bfw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span>fw<span class="token punctuation">)</span><span class="token punctuation">;</span>bfw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"æš´å¯Œ æš´å¯Œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>bfw<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>bfw<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="6ã€è½¬æ¢æµ"><a href="#6ã€è½¬æ¢æµ" class="headerlink" title="6ã€è½¬æ¢æµ"></a>6ã€è½¬æ¢æµ</h2><h3 id="6-1-å­—ç¬¦è¾“å…¥è½¬æ¢æµ"><a href="#6-1-å­—ç¬¦è¾“å…¥è½¬æ¢æµ" class="headerlink" title="6.1 å­—ç¬¦è¾“å…¥è½¬æ¢æµ"></a>6.1 å­—ç¬¦è¾“å…¥è½¬æ¢æµ</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122190620529.png"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122190654878.png"></p><h3 id="6-2-å­—ç¬¦è¾“å‡ºè½¬æ¢æµ"><a href="#6-2-å­—ç¬¦è¾“å‡ºè½¬æ¢æµ" class="headerlink" title="6.2 å­—ç¬¦è¾“å‡ºè½¬æ¢æµ"></a>6.2 å­—ç¬¦è¾“å‡ºè½¬æ¢æµ</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122190822058.png"></p><h2 id="7ã€æ‰“å°æµ"><a href="#7ã€æ‰“å°æµ" class="headerlink" title="7ã€æ‰“å°æµ"></a>7ã€æ‰“å°æµ</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122190923768.png" alt="æ‰“å°æµ"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122191019269.png" alt="æ–¹æ³•"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">;</span><span class="token class-name">PrintStream</span> ps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¤©å®˜èµç¦"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ps<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ç™¾æ— ç¦å¿Œ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>é«˜çº§æµæ˜¯ä¸æ”¯æŒæ•°æ®çš„è¿½åŠ çš„</li><li>è¦æƒ³æ•°æ®è¿½åŠ ï¼Œéœ€è¦ç”¨ä½çº§æµ</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">;</span><span class="token class-name">PrintStream</span> ps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="8ã€æ•°æ®æµ"><a href="#8ã€æ•°æ®æµ" class="headerlink" title="8ã€æ•°æ®æµ"></a>8ã€æ•°æ®æµ</h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122193438446.png" alt="æ•°æ®æµ"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122193543079.png" alt="æ•°æ®è¾“å‡ºæµ"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">;</span><span class="token class-name">DataOutputStream</span> dos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>dos<span class="token punctuation">.</span><span class="token function">writeInt</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>dos<span class="token punctuation">.</span><span class="token function">writeDouble</span><span class="token punctuation">(</span><span class="token number">66.7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>dos<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span><span class="token string">"å“ˆå£«å¥‡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122194032615.png" alt="æ•°æ®è¾“å…¥æµ"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">;</span><span class="token class-name">DataInputStream</span> dis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> i <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">readInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">double</span> v <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">readDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> s <span class="token operator">=</span> dis<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>è¯»å–çš„é¡ºåºè¦æ±‚å¯å†™å…¥çš„é¡ºåºä¿æŒä¸€è‡´</li></ul><p>9ã€åºåˆ—åŒ–æµ</p><ul><li>å¯¹è±¡åºåˆ—åŒ–ï¼šæŠŠjavaå¯¹è±¡å†™å…¥åˆ°æ–‡ä»¶ä¸­å»ã€‚</li><li>å¯¹è±¡ååºåˆ—åŒ–ï¼š æŠŠæ–‡ä»¶é‡Œçš„javaå¯¹è±¡è¯»å–å‡ºæ¥ã€‚</li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122194651692.png" alt="åºåˆ—åŒ–å¯¹è±¡"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122200243568.png" alt="åºåˆ—åŒ–"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122200344013.png" alt="ååºåˆ—åŒ–"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">Charset</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ç¨‹åºçš„å…¥å£ç‚¹     * æœ¬ç¨‹åºæ¼”ç¤ºäº†å¦‚ä½•å°†ä¸€ä¸ªUserå¯¹è±¡åºåˆ—åŒ–åˆ°æ–‡ä»¶ä¸­ï¼Œç„¶åä»è¯¥æ–‡ä»¶ä¸­ååºåˆ—åŒ–å‡ºæ¥     * @param args å‘½ä»¤è¡Œå‚æ•°ï¼Œæœªä½¿ç”¨     * @throws Exception å¦‚æœæ–‡ä»¶è¾“å…¥è¾“å‡ºå‘ç”Ÿé”™è¯¯ï¼Œå°†æŠ›å‡ºå¼‚å¸¸     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token comment">// å®šä¹‰æ–‡ä»¶è·¯å¾„</span>        <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"D:/Users/ZhangYao/Desktop/æµ‹è¯•æ–‡æœ¬.txt"</span><span class="token punctuation">;</span>            <span class="token comment">// åˆ›å»ºä¸€ä¸ªUserå¯¹è±¡</span>        <span class="token class-name">User</span> u1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// åˆ›å»ºä¸€ä¸ªå¯¹è±¡è¾“å‡ºæµï¼Œç”¨äºå°†Userå¯¹è±¡åºåˆ—åŒ–åˆ°æ–‡ä»¶</span>        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å°†Userå¯¹è±¡å†™å…¥æ–‡ä»¶</span>        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>u1<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// åˆ›å»ºä¸€ä¸ªå¯¹è±¡è¾“å…¥æµï¼Œç”¨äºä»æ–‡ä»¶ä¸­ååºåˆ—åŒ–Userå¯¹è±¡</span>        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä»æ–‡ä»¶ä¸­è¯»å–Userå¯¹è±¡</span>        <span class="token class-name">User</span> u <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è¾“å‡ºååºåˆ—åŒ–çš„Userå¯¹è±¡</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ•æ„Ÿä¿¡æ¯å‰åŠ <code>transient</code>,ä¸å‚ä¸åºåˆ—åŒ–</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> loginName<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">transient</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>    Â·Â·Â·Â·Â·Â·<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="9ã€IOæ¡†æ¶"><a href="#9ã€IOæ¡†æ¶" class="headerlink" title="9ã€IOæ¡†æ¶"></a>9ã€IOæ¡†æ¶</h2><h3 id="9-1-ä»€ä¹ˆæ˜¯IOæ¡†æ¶"><a href="#9-1-ä»€ä¹ˆæ˜¯IOæ¡†æ¶" class="headerlink" title="9.1 ä»€ä¹ˆæ˜¯IOæ¡†æ¶"></a>9.1 ä»€ä¹ˆæ˜¯IOæ¡†æ¶</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122202337810.png" alt="ä»‹ç»"></p><h3 id="9-2-ä½¿ç”¨IOæ¡†æ¶"><a href="#9-2-ä½¿ç”¨IOæ¡†æ¶" class="headerlink" title="9.2 ä½¿ç”¨IOæ¡†æ¶"></a>9.2 ä½¿ç”¨IOæ¡†æ¶</h3><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241122202548259.png"></p>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€çŸ¥è¯† </tag>
            
            <tag> æ–‡ä»¶ </tag>
            
            <tag> Streamæµ </tag>
            
            <tag> IOæµ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Video Download</title>
      <link href="/2024/11/15/video-download/"/>
      <url>/2024/11/15/video-download/</url>
      
        <content type="html"><![CDATA[<h1 id="é€›GitHubçš„æ—¶å€™çœ‹åˆ°ä¸€æ¬¾è§†é¢‘ä¸‹è½½å·¥å…·ï¼ŒæŒºå¥½ç”¨çš„ï¼Œè®°å½•ä¸‹ä½¿ç”¨è¿‡ç¨‹ã€‚"><a href="#é€›GitHubçš„æ—¶å€™çœ‹åˆ°ä¸€æ¬¾è§†é¢‘ä¸‹è½½å·¥å…·ï¼ŒæŒºå¥½ç”¨çš„ï¼Œè®°å½•ä¸‹ä½¿ç”¨è¿‡ç¨‹ã€‚" class="headerlink" title="é€›GitHubçš„æ—¶å€™çœ‹åˆ°ä¸€æ¬¾è§†é¢‘ä¸‹è½½å·¥å…·ï¼ŒæŒºå¥½ç”¨çš„ï¼Œè®°å½•ä¸‹ä½¿ç”¨è¿‡ç¨‹ã€‚"></a>é€›GitHubçš„æ—¶å€™çœ‹åˆ°ä¸€æ¬¾è§†é¢‘ä¸‹è½½å·¥å…·ï¼ŒæŒºå¥½ç”¨çš„ï¼Œè®°å½•ä¸‹ä½¿ç”¨è¿‡ç¨‹ã€‚</h1><p>æ•™ç¨‹ç¯å¢ƒï¼š</p><ul><li>win10</li><li>pythin 3</li><li>è°·æ­Œæµè§ˆå™¨</li><li>é“¾æ¥ <a href="https://www.youtube.com/watch?v=0eVpXgGuTHg">https://www.youtube.com/watch?v=0eVpXgGuTHg</a> ä¸ºæ¼”ç¤ºé“¾æ¥ï¼Œä½¿ç”¨å¯æ›¿æ¢ä¸ºè‡ªå·±éœ€è¦ä¸‹è½½çš„è§†é¢‘çš„é“¾æ¥</li></ul><h2 id="1ã€èµ„æºä¸‹è½½"><a href="#1ã€èµ„æºä¸‹è½½" class="headerlink" title="1ã€èµ„æºä¸‹è½½"></a>1ã€èµ„æºä¸‹è½½</h2><p><a href="https://github.com/yt-dlp/yt-dlp/releases" title="é€‰æ‹©é€‚åˆè‡ªå·±æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬">Githubå·¥å…·ä¸‹è½½</a> <a href="https://www.gyan.dev/ffmpeg/builds/" title="ffmpeg-git-full.7z">FFMPéŸ³è§†é¢‘å¤„ç†å·¥å…·ä¸‹è½½</a> </p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411151107789.png" alt="æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©å¯¹åº”ç‰ˆæœ¬"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411151009006.png" alt="ä¸‹è½½å…¨ç‰ˆæœ¬"></p><p>ä¸¤æ¬¾å·¥å…·ä¸‹è½½å®Œæˆåï¼Œå°†<strong>yt-dlp.exe</strong>æ‹–è¿›<strong>FFMPçš„binç›®å½•ä¸‹</strong>ï¼Œç„¶åé…ç½®<strong>binç›®å½•çš„</strong>ç¯å¢ƒå˜é‡ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411151012229.png" alt="yt-dlp.exeæ‹–è¿›binç›®å½•"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411151014625.png" alt="è®¾ç½®ç¯å¢ƒå˜é‡"></p><p>å¦ï¼šå·²ç»å•ç‹¬æ•´ç†æ–‡ä»¶å¤‡ä»½å¯ç›´æ¥ä¸‹è½½ï¼š</p><p><a href="https://pan.baidu.com/s/1IfEJLelOOGnMOeYm8pJtOg?pwd=top0">ç™¾åº¦ç½‘ç›˜ä¸‹è½½VideoDownload.7z</a></p><p>æå–ç : top0</p><h2 id="2ã€åº”ç”¨ä½¿ç”¨"><a href="#2ã€åº”ç”¨ä½¿ç”¨" class="headerlink" title="2ã€åº”ç”¨ä½¿ç”¨"></a>2ã€åº”ç”¨ä½¿ç”¨</h2><h3 id="1ã€ç«ç‹æµè§ˆå™¨ä½¿ç”¨"><a href="#1ã€ç«ç‹æµè§ˆå™¨ä½¿ç”¨" class="headerlink" title="1ã€ç«ç‹æµè§ˆå™¨ä½¿ç”¨"></a>1ã€ç«ç‹æµè§ˆå™¨ä½¿ç”¨</h3><p>å…ˆæ–°å»ºä¸ªæ–‡ä»¶å¤¹ç”¨äºä¿å­˜è§†é¢‘ï¼Œå¹¶åœ¨æ–‡ä»¶å¤¹ä¸­æ‰“å¼€<strong>cmdç»ˆç«¯</strong>ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411151036072.png" alt="ä¿å­˜è§†é¢‘çš„æ–‡ä»¶å¤¹"></p><p>å›½å†…ç«ç‹æµè§ˆå™¨ï¼Œæ²¡ç”¨cookieåŠ å¯†é™åˆ¶ï¼Œå¯ä»¥ç›´æ¥åœ¨<strong>cmdç»ˆç«¯</strong>ä¸­ä½¿ç”¨ï¼š</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">yt-dlp <span class="token operator">--</span>cookies-<span class="token keyword">from</span><span class="token operator">-</span>browser firefox https:<span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>youtube<span class="token punctuation">.</span>com/watch?v=0eVpXgGuTHg<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœé“¾æ¥å¤ªé•¿æŠ¥é”™ï¼Œå¯ä»¥ä½¿ç”¨**-o**å‘½ä»¤æˆªå–ä¸€å®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼š</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">yt-dlp <span class="token operator">-</span>o <span class="token string">'%(title).200B.%(ext)s'</span> <span class="token string">'https://www.youtube.com/watch?v=0eVpXgGuTHg'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™æ ·è§†é¢‘å°±å¯ä»¥ä¸‹è½½åˆ°æ‰“å¼€cmdå‘½ä»¤çš„æ–‡ä»¶å¤¹äº†ã€‚</p><h3 id="2ã€Edgeã€è°·æ­Œæµè§ˆå™¨ä½¿ç”¨"><a href="#2ã€Edgeã€è°·æ­Œæµè§ˆå™¨ä½¿ç”¨" class="headerlink" title="2ã€Edgeã€è°·æ­Œæµè§ˆå™¨ä½¿ç”¨"></a>2ã€Edgeã€è°·æ­Œæµè§ˆå™¨ä½¿ç”¨</h3><p>Edgeã€è°·æ­Œæµè§ˆå™¨æ˜¯æœ‰cookieåŠ å¯†çš„ï¼Œå¯ä»¥å€ŸåŠ©å·®ä»·å°†æµè§ˆå™¨ä¿å­˜çš„cookieä¸‹è½½ä¸‹æ¥ï¼Œ<strong>æ”¾è¿›éœ€è¦ä¿å­˜è§†é¢‘çš„æ–‡ä»¶å¤¹ä¸­</strong>è¾…åŠ©ä½¿ç”¨ã€‚</p><p><a href="https://chromewebstore.google.com/detail/get-cookiestxt-locally/cclelndahbckbenkjhflpdbgdldlbecc?utm_source=ext_app_menu" title="Get cookies.txt LOCALLY">æ’ä»¶åœ°å€</a> ä»¥**.txt**æ ¼å¼çš„ä¿å­˜ã€‚(<strong>å³ä¸Šå›¾ä¸­çš„cookies.txtæ–‡æœ¬</strong>)</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411151106562.png" alt="ä¸‹è½½cookie"></p><p>åœ¨cmdç»ˆç«¯ä¸­ä½¿ç”¨ï¼š</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">yt-dlp <span class="token operator">--</span>cookies cookies<span class="token punctuation">.</span>txt https:<span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>youtube<span class="token punctuation">.</span>com/watch?v=0eVpXgGuTHg<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3ã€pythonè°ƒç”¨"><a href="#3ã€pythonè°ƒç”¨" class="headerlink" title="3ã€pythonè°ƒç”¨"></a>3ã€pythonè°ƒç”¨</h3><p>å…ˆå®‰è£…ä¾èµ–ï¼šyt_dlp</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">pip install yt_dlp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶åè‡ªå®šä¹‰ä¿®æ”¹ç¨‹åºï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> yt_dlp <span class="token keyword">import</span> YoutubeDLURLS <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'https://www.youtube.com/watch?v=0eVpXgGuTHg'</span><span class="token punctuation">,</span>        <span class="token string">'https://www.youtube.com/watch?v=6YyC6sc1YdM'</span><span class="token punctuation">,</span>        <span class="token string">'https://www.bilibili.com/video/BV1RND5YYE1S/?spm_id_from=333.788.recommend_more_video.18'</span>        <span class="token punctuation">]</span><span class="token keyword">with</span> YoutubeDL<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ydl<span class="token punctuation">:</span>    ydl<span class="token punctuation">.</span>download<span class="token punctuation">(</span>URLS<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ–‡æ¡£</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yt-dlp <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> <span class="token punctuation">[</span>--<span class="token punctuation">]</span> URL <span class="token punctuation">[</span>URL<span class="token punctuation">..</span>.<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">-h, <span class="token parameter variable">--help</span>                      Print this <span class="token builtin class-name">help</span> text and <span class="token builtin class-name">exit</span><span class="token parameter variable">--version</span>                       Print program version and <span class="token builtin class-name">exit</span>-U, <span class="token parameter variable">--update</span>                    Update this program to the latest version--no-update                     Do not check <span class="token keyword">for</span> updates <span class="token punctuation">(</span>default<span class="token punctuation">)</span>--update-to <span class="token punctuation">[</span>CHANNEL<span class="token punctuation">]</span>@<span class="token punctuation">[</span>TAG<span class="token punctuation">]</span>     Upgrade/downgrade to a specific version.                                CHANNEL can be a repository as well. CHANNEL                                and TAG default to <span class="token string">"stable"</span> and <span class="token string">"latest"</span>                                respectively <span class="token keyword">if</span> omitted<span class="token punctuation">;</span> See <span class="token string">"UPDATE"</span> <span class="token keyword">for</span>                                details. Supported channels: stable,                                nightly, master-i, --ignore-errors             Ignore download and postprocessing errors.                                The download will be considered successful                                even <span class="token keyword">if</span> the postprocessing fails--no-abort-on-error             Continue with next video on download errors<span class="token punctuation">;</span>                                e.g. to skip unavailable videos <span class="token keyword">in</span> a                                playlist <span class="token punctuation">(</span>default<span class="token punctuation">)</span>--abort-on-error                Abort downloading of further videos <span class="token keyword">if</span> an                                error occurs <span class="token punctuation">(</span>Alias: --no-ignore-errors<span class="token punctuation">)</span>--dump-user-agent               Display the current user-agent and <span class="token builtin class-name">exit</span>--list-extractors               List all supported extractors and <span class="token builtin class-name">exit</span>--extractor-descriptions        Output descriptions of all supported                                extractors and <span class="token builtin class-name">exit</span>--use-extractors NAMES          Extractor names to use separated by commas.                                You can also use regexes, <span class="token string">"all"</span>, <span class="token string">"default"</span>                                and <span class="token string">"end"</span> <span class="token punctuation">(</span>end URL matching<span class="token punctuation">)</span><span class="token punctuation">;</span> e.g. <span class="token parameter variable">--ies</span>                                <span class="token string">"holodex.*,end,youtube"</span><span class="token builtin class-name">.</span> Prefix the name                                with a <span class="token string">"-"</span> to exclude it, e.g. <span class="token parameter variable">--ies</span>                                default,-generic. Use --list-extractors <span class="token keyword">for</span>                                a list of extractor names. <span class="token punctuation">(</span>Alias: --ies<span class="token punctuation">)</span>--default-search PREFIX         Use this prefix <span class="token keyword">for</span> unqualified URLs. E.g.                                <span class="token string">"gvsearch2:python"</span> downloads two videos from                                google videos <span class="token keyword">for</span> the search term <span class="token string">"python"</span><span class="token builtin class-name">.</span>                                Use the value <span class="token string">"auto"</span> to <span class="token builtin class-name">let</span> yt-dlp guess                                <span class="token punctuation">(</span><span class="token string">"auto_warning"</span> to emit a warning when                                guessing<span class="token punctuation">)</span>. <span class="token string">"error"</span> just throws an error. The                                default value <span class="token string">"fixup_error"</span> repairs broken                                URLs, but emits an error <span class="token keyword">if</span> this is not                                possible instead of searching--ignore-config                 Don't load any <span class="token function">more</span> configuration files                                except those given to --config-locations.                                For backward compatibility, <span class="token keyword">if</span> this option                                is found inside the system configuration                                file, the user configuration is not loaded.                                <span class="token punctuation">(</span>Alias: --no-config<span class="token punctuation">)</span>--no-config-locations           Do not load any custom configuration files                                <span class="token punctuation">(</span>default<span class="token punctuation">)</span>. When given inside a configuration                                file, ignore all previous --config-locations                                defined <span class="token keyword">in</span> the current <span class="token function">file</span>--config-locations <span class="token environment constant">PATH</span>         Location of the main configuration <span class="token function">file</span><span class="token punctuation">;</span>                                either the path to the config or its                                containing directory <span class="token punctuation">(</span><span class="token string">"-"</span> <span class="token keyword">for</span> stdin<span class="token punctuation">)</span>. Can be                                used multiple <span class="token builtin class-name">times</span> and inside other                                configuration files--plugin-dirs <span class="token environment constant">PATH</span>              Path to an additional directory to search                                <span class="token keyword">for</span> plugins. This option can be used                                multiple <span class="token builtin class-name">times</span> to <span class="token function">add</span> multiple directories.                                Note that this currently only works <span class="token keyword">for</span>                                extractor plugins<span class="token punctuation">;</span> postprocessor plugins can                                only be loaded from the default plugin                                directories--flat-playlist                 Do not extract the videos of a playlist,                                only list them--no-flat-playlist              Fully extract the videos of a playlist                                <span class="token punctuation">(</span>default<span class="token punctuation">)</span>--live-from-start               Download livestreams from the start.                                Currently only supported <span class="token keyword">for</span> YouTube                                <span class="token punctuation">(</span>Experimental<span class="token punctuation">)</span>--no-live-from-start            Download livestreams from the current <span class="token function">time</span>                                <span class="token punctuation">(</span>default<span class="token punctuation">)</span>--wait-for-video MIN<span class="token punctuation">[</span>-MAX<span class="token punctuation">]</span>      Wait <span class="token keyword">for</span> scheduled streams to become                                available. Pass the minimum number of                                seconds <span class="token punctuation">(</span>or range<span class="token punctuation">)</span> to <span class="token function">wait</span> between retries--no-wait-for-video             Do not <span class="token function">wait</span> <span class="token keyword">for</span> scheduled streams <span class="token punctuation">(</span>default<span class="token punctuation">)</span>--mark-watched                  Mark videos watched <span class="token punctuation">(</span>even with --simulate<span class="token punctuation">)</span>--no-mark-watched               Do not mark videos watched <span class="token punctuation">(</span>default<span class="token punctuation">)</span><span class="token parameter variable">--color</span> <span class="token punctuation">[</span>STREAM:<span class="token punctuation">]</span>POLICY         Whether to emit color codes <span class="token keyword">in</span> output,                                optionally prefixed by the STREAM <span class="token punctuation">(</span>stdout or                                stderr<span class="token punctuation">)</span> to apply the setting to. Can be one                                of <span class="token string">"always"</span>, <span class="token string">"auto"</span> <span class="token punctuation">(</span>default<span class="token punctuation">)</span>, <span class="token string">"never"</span>, or                                <span class="token string">"no_color"</span> <span class="token punctuation">(</span>use non color terminal                                sequences<span class="token punctuation">)</span>. Use <span class="token string">"auto-tty"</span> or <span class="token string">"no_color-tty"</span>                                to decide based on terminal support only.                                Can be used multiple <span class="token builtin class-name">times</span>--compat-options OPTS           Options that can <span class="token builtin class-name">help</span> keep compatibility                                with youtube-dl or youtube-dlc                                configurations by reverting some of the                                changes made <span class="token keyword">in</span> yt-dlp. See <span class="token string">"Differences in                                default behavior"</span> <span class="token keyword">for</span> details<span class="token parameter variable">--alias</span> ALIASES OPTIONS         Create aliases <span class="token keyword">for</span> an option string. Unless                                an <span class="token builtin class-name">alias</span> starts with a dash <span class="token string">"-"</span>, it is                                prefixed with <span class="token string">"--"</span><span class="token builtin class-name">.</span> Arguments are parsed                                according to the Python string formatting                                mini-language. E.g. <span class="token parameter variable">--alias</span> get-audio,-X                                <span class="token string">"-S=aext:{0},abr -x --audio-format {0}"</span>                                creates options <span class="token string">"--get-audio"</span> and <span class="token string">"-X"</span> that                                takes an argument <span class="token punctuation">(</span>ARG0<span class="token punctuation">)</span> and expands to                                <span class="token string">"-S=aext:ARG0,abr -x --audio-format ARG0"</span><span class="token builtin class-name">.</span>                                All defined aliases are listed <span class="token keyword">in</span> the <span class="token parameter variable">--help</span>                                output. Alias options can trigger <span class="token function">more</span>                                aliases<span class="token punctuation">;</span> so be careful to avoid defining                                recursive options. As a safety measure, each                                <span class="token builtin class-name">alias</span> may be triggered a maximum of <span class="token number">100</span>                                times. This option can be used multiple <span class="token builtin class-name">times</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Video </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Youtube Video </tag>
            
            <tag> Bilibili </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaSEä¹‹æ—¥æœŸé›†åˆæ“ä½œ</title>
      <link href="/2024/11/14/javase-zhi-ri-qi-ji-he-cao-zuo/"/>
      <url>/2024/11/14/javase-zhi-ri-qi-ji-he-cao-zuo/</url>
      
        <content type="html"><![CDATA[<h1 id="æ—¥æœŸã€æ­£åˆ™è¡¨è¾¾å¼ã€å•åˆ—é›†åˆ"><a href="#æ—¥æœŸã€æ­£åˆ™è¡¨è¾¾å¼ã€å•åˆ—é›†åˆ" class="headerlink" title="æ—¥æœŸã€æ­£åˆ™è¡¨è¾¾å¼ã€å•åˆ—é›†åˆ"></a>æ—¥æœŸã€æ­£åˆ™è¡¨è¾¾å¼ã€å•åˆ—é›†åˆ</h1><h2 id="1ã€æ—¥æœŸ"><a href="#1ã€æ—¥æœŸ" class="headerlink" title="1ã€æ—¥æœŸ"></a>1ã€æ—¥æœŸ</h2><h3 id="JDK8ä¹‹å‰"><a href="#JDK8ä¹‹å‰" class="headerlink" title="JDK8ä¹‹å‰"></a>JDK8ä¹‹å‰</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// è·å–æ—¶é—´æˆ³</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token class-name">Runtime</span> r <span class="token operator">=</span> <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// è·å–è™šæ‹Ÿæœºå¯ä»¥å¤„ç†çš„å¤„ç†å™¨æ•°é‡</span>      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">availableProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// è·å–Javaè™šæ‹Ÿæœºä¸­çš„å†…å­˜æ€»é‡  å•ä½ï¼šå­—èŠ‚</span>      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">totalMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">+</span> <span class="token string">" MB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// è·å–Javaè™šæ‹Ÿæœºä¸­çš„å¯ç”¨å†…å­˜é‡ å•ä½ï¼šå­—èŠ‚</span>      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">freeMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">+</span> <span class="token string">" MB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// å¯åŠ¨æŸä¸ªç¨‹åºï¼Œå¹¶è¿”å›è¯¥ç¨‹åºçš„å¯¹è±¡</span>      <span class="token class-name">Process</span> p <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">"D:\\AppByMyselfDownload\\Lives\\QQ\\QQ.exe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æš‚åœ10så é”€æ¯</span>      p<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åœæ­¢å·²è¿è¡Œçš„å¯¹è±¡</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ—¥æœŸç±»çš„ä½¿ç”¨-Date</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å½“å‰æ—¶é—´ Wed Nov 13 20:53:16 CST 2024</span>   date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æ‹¿åˆ°å½“å‰æ—¶é—´çš„æ¯«ç§’å€¼ï¼ˆæ—¶é—´æˆ³ï¼‰</span>   <span class="token keyword">long</span> <span class="token class-name">T</span> <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// æŠŠæ—¶é—´æ¯«ç§’å€¼(æ—¶é—´æˆ³)è½¬åŒ–æˆæ—¥æœŸå¯¹è±¡</span>   <span class="token class-name">T</span> <span class="token operator">+=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>  <span class="token comment">// 2Såçš„æ—¶é—´æˆ³</span>   <span class="token class-name">Date</span> date1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date1<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ ¼å¼åŒ–è§£ææ—¶é—´ç±»-SimpleDateFormat</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*æ ¼å¼åŒ–æ—¶é—´*/</span><span class="token comment">// 1.è·å–å½“å‰æ—¶é—´</span><span class="token class-name">Date</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2.åˆ›å»ºæ—¥æœŸæ ¼å¼åŒ–å¯¹è±¡</span><span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss EEE a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ ¼å¼åŒ–æ—¶é—´æˆ³</span><span class="token class-name">String</span> format <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>format<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ ¼å¼åŒ–å½“å‰æ—¶é—´</span><span class="token class-name">String</span> format1 <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>format1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/*æŠŠå­—ç¬¦ä¸²æ—¶é—´ è§£æä¸ºæ—¥æœŸå¯¹è±¡*/</span><span class="token class-name">String</span> strTime <span class="token operator">=</span> <span class="token string">"2024-1-13 21:22:14"</span><span class="token punctuation">;</span><span class="token class-name">SimpleDateFormat</span> sdf2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Date</span> parse <span class="token operator">=</span> sdf2<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>strTime<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>parse<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ—¥å†ç±»-calender  å¯å˜å¯¹è±¡ï¼Œä¸€æ—¦ä¿®æ”¹æˆåŠŸï¼Œå¯¹è±¡æœ¬èº«è¡¨ç¤ºçš„æ—¶é—´å°†ä¼šå‘ç”Ÿå˜åŒ–</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 1.å¾—åˆ°æ­¤åˆ»ç³»ç»Ÿæ—¶é—´çš„æ—¥å†å¯¹è±¡</span><span class="token class-name">Calendar</span> now <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2.è·å–æ—¥å†ä¸­çš„ä¿¡æ¯</span><span class="token keyword">int</span> year <span class="token operator">=</span> now<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token constant">YEAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 3.æ‹¿åˆ°æ—¥å†ä¸­è®°å½•çš„æ—¥æœŸå¯¹è±¡</span><span class="token class-name">Date</span> date <span class="token operator">=</span> now<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 4.æ‹¿åˆ°æ—¶é—´æ¯«ç§’å€¼</span><span class="token keyword">long</span> timeInMillis <span class="token operator">=</span> now<span class="token punctuation">.</span><span class="token function">getTimeInMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>timeInMillis<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 5.ä¿®æ”¹æ—¥å†ä¸­çš„ä¿¡æ¯</span><span class="token keyword">int</span> value <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>  <span class="token comment">// 10æœˆ</span>now<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token constant">MONTH</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 6.ä¸ºæŸä¸ªä¿¡æ¯å¢åŠ æˆ–å‡å°‘æŒ‡å®šå€¼</span>now<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token constant">MONTH</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="JDK8æ–°å¢"><a href="#JDK8æ–°å¢" class="headerlink" title="JDK8æ–°å¢"></a>JDK8æ–°å¢</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411132155774.png" alt="image-20241113215522615"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">        <span class="token class-name">LocalDate</span> ld <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ld<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">LocalTime</span> lt <span class="token operator">=</span> <span class="token class-name">LocalTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>lt<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">LocalDateTime</span> ldt <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ldt<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ˜¾ç„¶LocalDateTimeæ›´ä¸ºå¼ºå¤§ï¼Œæ‰€ä»¥æ¯”è¾ƒå¸¸ç”¨</span><span class="token comment">//        1. è·å–ä¿¡æ¯</span>        <span class="token keyword">int</span> year <span class="token operator">=</span> ldt<span class="token punctuation">.</span><span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Month</span> month <span class="token operator">=</span> ldt<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> monthValue <span class="token operator">=</span> ldt<span class="token punctuation">.</span><span class="token function">getMonthValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>monthValue<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> day <span class="token operator">=</span> ldt<span class="token punctuation">.</span><span class="token function">getDayOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        2. ä¿®æ”¹ä¿¡æ¯</span>        <span class="token class-name">LocalDateTime</span> withYear <span class="token operator">=</span> ldt<span class="token punctuation">.</span><span class="token function">withYear</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>withYear<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        3. åŠ å¤šå°‘</span>        <span class="token class-name">LocalDateTime</span> plussedYears <span class="token operator">=</span> ldt<span class="token punctuation">.</span><span class="token function">plusYears</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>plussedYears<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        4. å‡å¤šå°‘</span>        <span class="token class-name">LocalDateTime</span> minusedYears <span class="token operator">=</span> ldt<span class="token punctuation">.</span><span class="token function">minusYears</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>minusedYears<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        5. è·å–æŒ‡å®šçš„æ—¥æœŸæ—¶é—´å¯¹è±¡</span>        <span class="token class-name">LocalDateTime</span> time <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        6. æ¯”è¾ƒä¸¤ä¸ªæ—¥æœŸ</span>        <span class="token keyword">boolean</span> equals <span class="token operator">=</span> ldt<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>plussedYears<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>equals<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span> before <span class="token operator">=</span> ldt<span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>plussedYears<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>before<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141347761.png" alt="image-20241114134723688"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">        <span class="token class-name">Instant</span> now <span class="token operator">=</span> <span class="token class-name">Instant</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        ä¸åˆ°1ç§’çš„çº³ç§’æ•°</span>        <span class="token keyword">int</span> nano <span class="token operator">=</span> now<span class="token punctuation">.</span><span class="token function">getNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>nano<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        è·å–æ€»ç§’æ•°</span>        <span class="token keyword">long</span> epochSecond <span class="token operator">=</span> now<span class="token punctuation">.</span><span class="token function">getEpochSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>epochSecond<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141417858.png" alt="image-20241114135057897"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">        <span class="token class-name">DateTimeFormatter</span> formatter <span class="token operator">=</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">LocalDateTime</span> now <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/*æ­£å‘æ ¼å¼åŒ–*/</span>        <span class="token class-name">String</span> format <span class="token operator">=</span> formatter<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>format<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/*é€†å‘æ ¼å¼åŒ–*/</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>formatter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/*è§£æå­—ç¬¦ä¸²æ—¶é—´*/</span>        <span class="token class-name">String</span> time <span class="token operator">=</span> <span class="token string">"2024-12-14 14:03:52"</span><span class="token punctuation">;</span><span class="token comment">// PS:</span>        <span class="token class-name">LocalDateTime</span> parse <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> formatter<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>parse<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2ã€Lambdaè¡¨è¾¾å¼"><a href="#2ã€Lambdaè¡¨è¾¾å¼" class="headerlink" title="2ã€Lambdaè¡¨è¾¾å¼"></a>2ã€Lambdaè¡¨è¾¾å¼</h2><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141431586.png" alt="image-20241114143151797"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141440064.png" alt="image-20241114144010214"></p><h2 id="3ã€æ­£åˆ™è¡¨è¾¾å¼"><a href="#3ã€æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="3ã€æ­£åˆ™è¡¨è¾¾å¼"></a>3ã€æ­£åˆ™è¡¨è¾¾å¼</h2><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141501494.png" alt="image-20241114150141464"></p><h2 id="4ã€é›†åˆæ“ä½œ"><a href="#4ã€é›†åˆæ“ä½œ" class="headerlink" title="4ã€é›†åˆæ“ä½œ"></a>4ã€é›†åˆæ“ä½œ</h2><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141506389.png" alt="image-20241114150648713"></p><h2 id="5ã€å•åˆ—é›†åˆ"><a href="#5ã€å•åˆ—é›†åˆ" class="headerlink" title="5ã€å•åˆ—é›†åˆ"></a>5ã€å•åˆ—é›†åˆ</h2><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141719415.png" alt="image-20241114150839209"></p><h2 id="6ã€Collectioné›†åˆ"><a href="#6ã€Collectioné›†åˆ" class="headerlink" title="6ã€Collectioné›†åˆ"></a>6ã€Collectioné›†åˆ</h2><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141529156.png" alt="image-20241114152947345"></p><h3 id="ArrayListé›†åˆ"><a href="#ArrayListé›†åˆ" class="headerlink" title="ArrayListé›†åˆ"></a>ArrayListé›†åˆ</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1.public boolean add(E e):æ·»åŠ å…ƒç´ ï¼Œæ·»åŠ æˆåŠŸè¿”å›true</span>c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"java"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"C++"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"python"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//[java, C++, python]</span><span class="token comment">//2.public void clear():æ¸…ç©ºé›†åˆçš„å…ƒç´ </span>c<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//[]</span><span class="token comment">//3.public boolean isEmpty():åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º æ˜¯ç©ºè¿”å›true,åä¹‹</span><span class="token keyword">boolean</span> isEmpty <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>isEmpty<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4.public int size():è·å–é›†åˆçš„å¤§å°</span><span class="token keyword">int</span> size <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//5.public boolean contains(object obj):åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ </span><span class="token keyword">boolean</span> havaJava <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"java"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>havaJava<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 6.public boolean remove(E e):åˆ é™¤æŸä¸ªå…ƒç´ :å¦‚æœæœ‰å¤šä¸ªé‡å¤å…ƒç´ é»˜è®¤åˆ é™¤å‰é¢çš„ç¬¬ä¸€ä¸ª</span><span class="token keyword">boolean</span> delPython <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"python"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>delPython<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 7.public Object[] toArray():æŠŠé›†åˆè½¬æ¢æˆæ•°ç»„</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> string <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é›†åˆéå†â€”-è¿­ä»£å™¨-å¢å¼ºfor-Lambdaè¡¨è¾¾å¼"><a href="#é›†åˆéå†â€”-è¿­ä»£å™¨-å¢å¼ºfor-Lambdaè¡¨è¾¾å¼" class="headerlink" title="é›†åˆéå†â€”>è¿­ä»£å™¨-å¢å¼ºfor-Lambdaè¡¨è¾¾å¼"></a>é›†åˆéå†â€”&gt;è¿­ä»£å™¨-å¢å¼ºfor-Lambdaè¡¨è¾¾å¼</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141540559.png" alt="image-20241114154046564"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">    <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        name<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"ææ˜Ÿäº‘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        name<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"å¼ å­å‡¡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        name<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"å§¬å¦‚é›ª"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        name<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"é™†æ—è½©"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> iterator <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è¿­ä»£å™¨éå†        </span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token class-name">String</span> it <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>  <span class="token comment">// å¢å¼ºforéå†é›†åˆæˆ–æ•°ç»„</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token comment">// Lambdaè¡¨è¾¾å¼</span>       name<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//---&gt; ç®€åŒ–1</span>    name<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>                s <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//---&gt; ç®€åŒ–2</span>name<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Listæ¥å£"><a href="#Listæ¥å£" class="headerlink" title="Listæ¥å£"></a>Listæ¥å£</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141632597.png" alt="image-20241114163152774"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141632879.png" alt="image-20241114163254529"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1.åˆ›å»ºä¸€ä¸ªArrayListé›†åˆå¯¹è±¡(æœ‰åºã€å¯é‡å¤ã€æœ‰ç´¢å¼•)</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        name<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"ææ˜Ÿäº‘"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        name<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"å¼ å­å‡¡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        name<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"å§¬å¦‚é›ª"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        name<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"é™†æ—è½©"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2.public void add(int indexï¼ŒE element):åœ¨æŸä¸ªç´¢å¼•ä½ç½®æ’å…¥å…ƒç´ ã€‚</span>        name<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"è¢å¤©ç½¡"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3.publicE remove(int index):æ ¹æ®ç´¢å¼•åˆ é™¤å…ƒç´ ,è¿”å›è¢«åˆ é™¤å…ƒç´ </span>        <span class="token class-name">String</span> remove <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>remove<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4.public E get(int index): è¿”å›é›†åˆä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚</span>        <span class="token class-name">String</span> s <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 5.public E set(int indexï¼ŒE element): ä¿®æ”¹ç´¢å¼•ä½ç½®å¤„çš„å…ƒç´ ,ä¿®æ”¹æˆåŠŸåï¼Œä¼šè¿”å›åŸæ¥çš„æ•°æ®</span>        <span class="token class-name">String</span> set <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"é™†æ—è½©"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="ArrayListåŸç†"><a href="#ArrayListåŸç†" class="headerlink" title="ArrayListåŸç†"></a>ArrayListåŸç†</h4><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141642387.png" alt="image-20241114164158954"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141643572.png" alt="image-20241114164300715"></p><h4 id="LinkedListåŸç†"><a href="#LinkedListåŸç†" class="headerlink" title="LinkedListåŸç†"></a>LinkedListåŸç†</h4><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141644255.png" alt="image-20241114164444167"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141645236.png" alt="image-20241114164542153"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141646684.png" alt="image-20241114164625414"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141647181.png" alt="image-20241114164718775"></p><h3 id="Setæ¥å£"><a href="#Setæ¥å£" class="headerlink" title="Setæ¥å£"></a>Setæ¥å£</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141650434.png" alt="image-20241114165051652"></p><h4 id="å“ˆå¸Œå€¼"><a href="#å“ˆå¸Œå€¼" class="headerlink" title="å“ˆå¸Œå€¼"></a>å“ˆå¸Œå€¼</h4><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141719116.png" alt="image-20241114165359102"></p><h4 id="HashSetåº•å±‚åŸç†"><a href="#HashSetåº•å±‚åŸç†" class="headerlink" title="HashSetåº•å±‚åŸç†"></a>HashSetåº•å±‚åŸç†</h4><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141656428.png" alt="image-20241114165624767"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141658230.png" alt="image-20241114165848716"></p><p>å¦‚æœéœ€è¦å»é‡ï¼Œéœ€è¦é‡å†™hashCode()  å’Œ  equals() æ–¹æ³•ã€‚</p><h4 id="LinkedHashSetåº•å±‚åŸç†"><a href="#LinkedHashSetåº•å±‚åŸç†" class="headerlink" title="LinkedHashSetåº•å±‚åŸç†"></a>LinkedHashSetåº•å±‚åŸç†</h4><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141719477.png" alt="image-20241114170200466"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141728933.png" alt="image-20241114172609700"></p><h4 id="TreeSetåº•å±‚åŸç†"><a href="#TreeSetåº•å±‚åŸç†" class="headerlink" title="TreeSetåº•å±‚åŸç†"></a>TreeSetåº•å±‚åŸç†</h4><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141800704.png" alt="image-20241114180028939"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141802105.png" alt="image-20241114180240406"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dapixiu</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> students <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Student</span> o1<span class="token punctuation">,</span> <span class="token class-name">Student</span> o2<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>o1<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> o2<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç®€åŒ– Set&lt;Student&gt; students = new TreeSet&lt;&gt;(( o1,  o2) -&gt; Double.compare(o1.getHeight(), o2.getHeight()) );</span>        students<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">165.6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        students<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">165.7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        students<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">165.8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array <span class="token operator">=</span> students<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">double</span> height<span class="token punctuation">;</span>    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> names <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token keyword">double</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Student{"</span> <span class="token operator">+</span>                <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>                <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span>                <span class="token string">", height="</span> <span class="token operator">+</span> height <span class="token operator">+</span>                <span class="token string">", names="</span> <span class="token operator">+</span> names <span class="token operator">+</span>                <span class="token char">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> height<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHeight</span><span class="token punctuation">(</span><span class="token keyword">double</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å•åˆ—é›†åˆæ€»ç»“"><a href="#å•åˆ—é›†åˆæ€»ç»“" class="headerlink" title="å•åˆ—é›†åˆæ€»ç»“"></a>å•åˆ—é›†åˆæ€»ç»“</h2><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141824299.png" alt="image-20241114182451438"></p><h2 id="é›†åˆçš„å¹¶å‘ä¿®æ”¹å¼‚å¸¸é—®é¢˜-ConcurrentModificationException"><a href="#é›†åˆçš„å¹¶å‘ä¿®æ”¹å¼‚å¸¸é—®é¢˜-ConcurrentModificationException" class="headerlink" title="é›†åˆçš„å¹¶å‘ä¿®æ”¹å¼‚å¸¸é—®é¢˜-ConcurrentModificationException"></a>é›†åˆçš„å¹¶å‘ä¿®æ”¹å¼‚å¸¸é—®é¢˜-ConcurrentModificationException</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"ç‹éº»å­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"å°æå­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"æçˆ±å"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"æç‰åˆš"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">String</span> name <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"æ"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">// è¿­ä»£å™¨æ–¹æ¡ˆä¿®æ­£ï¼Œåˆ é™¤è¿­ä»£å™¨å½“å‰éå†åˆ°çš„æ•°æ®ï¼Œæ¯åˆ é™¤ä¸€ä¸ªæ•°æ®åï¼Œç›¸å½“äºåœ¨åº•å±‚ä¹Ÿåšäº† i--</span><span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">String</span> name <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"æ"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                it<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token comment">// æˆ–è€…å€’å™å¤„ç†</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"æ"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141854388.png" alt="image-20241114185442295"></p><h2 id="å¯å˜å‚æ•°"><a href="#å¯å˜å‚æ•°" class="headerlink" title="å¯å˜å‚æ•°"></a>å¯å˜å‚æ•°</h2><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141901564.png" alt="image-20241114190140429"></p><ul><li>å¯å˜å‚æ•°åœ¨æ–¹æ³•å†…éƒ¨ï¼Œå…¶æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚</li><li>ä¸€ä¸ªå½¢å‚åˆ—è¡¨ä¸­ï¼Œåªå¯ä»¥æœ‰ä¸€ä¸ªå¯å˜å‚æ•°</li></ul><h2 id="Collectionsâ€”-æ“ä½œé›†åˆçš„å·¥å…·ç±»"><a href="#Collectionsâ€”-æ“ä½œé›†åˆçš„å·¥å…·ç±»" class="headerlink" title="Collectionsâ€”>æ“ä½œé›†åˆçš„å·¥å…·ç±»"></a>Collectionsâ€”&gt;æ“ä½œé›†åˆçš„å·¥å…·ç±»</h2><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141904217.png" alt="image-20241114190413385"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> names <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1ã€public static &lt;T&gt; boolean addAll(Collection&lt;? super T&gt;cï¼ŒT...elements):ä¸ºé›†åˆæ‰¹é‡æ·»åŠ æ•°æ®</span>        <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>names<span class="token punctuation">,</span> <span class="token string">"ææ˜Ÿäº‘"</span><span class="token punctuation">,</span> <span class="token string">"å¼ å­å‡¡"</span><span class="token punctuation">,</span> <span class="token string">"å§¬å¦‚é›ª"</span><span class="token punctuation">,</span> <span class="token string">"é™†æ—è½©"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>names<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2ã€public static void shuffle(List&lt;?&gt;list):æ‰“ä¹±Listé›†åˆä¸­çš„å…ƒç´ é¡ºåºã€‚</span>        <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">shuffle</span><span class="token punctuation">(</span>names<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>names<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3ã€public static &lt;T&gt;void sort(List&lt;T&gt;list):å¯¹ List é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œå‡åºæ’åº</span>        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> nums <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4ã€public static &lt;T&gt; void sort(List&lt;T&gt; list,Comparator&lt;?superT&gt;c):å¯¹Listé›†åˆä¸­å…ƒç´ ï¼ŒæŒ‰ç…§æ¯”è¾ƒå™¨å¯¹è±¡æŒ‡å®šçš„è§„åˆ™è¿›è¡Œæ’åº</span>        <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> o2 <span class="token operator">-</span> o1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="7ã€åŒåˆ—é›†åˆ"><a href="#7ã€åŒåˆ—é›†åˆ" class="headerlink" title="7ã€åŒåˆ—é›†åˆ"></a>7ã€åŒåˆ—é›†åˆ</h2><h3 id="Mapé›†åˆ"><a href="#Mapé›†åˆ" class="headerlink" title="Mapé›†åˆ"></a>Mapé›†åˆ</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141927557.png" alt="image-20241114192712342"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141931263.png" alt="image-20241114193126087"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        1.æ— éœ€ ä¸é‡å¤ æ— ç´¢å¼•</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Vivo"</span><span class="token punctuation">,</span> <span class="token number">3999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Iqoo"</span><span class="token punctuation">,</span> <span class="token number">1999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Oppo"</span><span class="token punctuation">,</span> <span class="token number">5999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Realme"</span><span class="token punctuation">,</span> <span class="token number">2699</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        2.è·å–é›†åˆçš„å¤§å°</span>        <span class="token keyword">int</span> size <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        3.æ¸…ç©ºé›†åˆ</span>        map<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        4.åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span>        <span class="token keyword">boolean</span> empty <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//5.public V get(object key):æ ¹æ®é”®è·å–å¯¹åº”å€¼</span>        <span class="token class-name">Integer</span> vioo <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"Vivo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>vioo<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//6.publicV remove(object key):æ ¹æ®é”®åˆ é™¤æ•´ä¸ªå…ƒç´ (åˆ é™¤é”®ä¼šè¿”å›é”®çš„å€¼):</span>        <span class="token class-name">Integer</span> vivo <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"Vivo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//7.public boolean containsKey(0bject key):åˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸ªé”® ï¼ŒåŒ…å«è¿”å›true,åä¹‹</span>        <span class="token keyword">boolean</span> b <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token string">"Vivo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//8.public boolean containsValue(object value): åˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸ªå€¼ã€‚</span>        <span class="token keyword">boolean</span> b1 <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">containsValue</span><span class="token punctuation">(</span><span class="token number">1999</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//9.public Set&lt;K&gt; keySet():è·å–Mapé›†åˆçš„å…¨éƒ¨é”®ã€‚</span>        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ks <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//10.public Collection&lt;V&gt; values();è·å–Mapé›†åˆçš„å…¨éƒ¨å€¼ã€‚</span>        <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> values <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Mapéå†"><a href="#Mapéå†" class="headerlink" title="Mapéå†"></a>Mapéå†</h3><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411142002150.png" alt="image-20241114200219135"></p><h4 id="é”®æ‰¾å€¼"><a href="#é”®æ‰¾å€¼" class="headerlink" title="é”®æ‰¾å€¼"></a>é”®æ‰¾å€¼</h4><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411141956080.png" alt="image-20241114195632562"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        1.æ— åº ä¸é‡å¤ æ— ç´¢å¼•</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Vivo"</span><span class="token punctuation">,</span> <span class="token number">3999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Iqoo"</span><span class="token punctuation">,</span> <span class="token number">1999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Oppo"</span><span class="token punctuation">,</span> <span class="token number">5999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Realme"</span><span class="token punctuation">,</span> <span class="token number">2699</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è·å–å…¨éƒ¨é”®å€¼</span>        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ks <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æ ¹æ®é”®æŸ¥æ‰¾å€¼</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> k <span class="token operator">:</span> ks<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">Integer</span> y <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="é”®å€¼å¯¹"><a href="#é”®å€¼å¯¹" class="headerlink" title="é”®å€¼å¯¹"></a>é”®å€¼å¯¹</h4><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411142018263.png" alt="image-20241114200550517"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Vivo"</span><span class="token punctuation">,</span> <span class="token number">3999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Iqoo"</span><span class="token punctuation">,</span> <span class="token number">1999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Oppo"</span><span class="token punctuation">,</span> <span class="token number">5999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Realme"</span><span class="token punctuation">,</span> <span class="token number">2699</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entries <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> entry <span class="token operator">:</span> entries<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">String</span> key <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Integer</span> value <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">" : "</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="Lambdaè¡¨è¾¾å¼"><a href="#Lambdaè¡¨è¾¾å¼" class="headerlink" title="Lambdaè¡¨è¾¾å¼"></a>Lambdaè¡¨è¾¾å¼</h4><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411142017592.png" alt="image-20241114201055548"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Vivo"</span><span class="token punctuation">,</span> <span class="token number">3999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Iqoo"</span><span class="token punctuation">,</span> <span class="token number">1999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Oppo"</span><span class="token punctuation">,</span> <span class="token number">5999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"Realme"</span><span class="token punctuation">,</span> <span class="token number">2699</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token string">" : "</span> <span class="token operator">+</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="HashMapåº•å±‚åŸç†"><a href="#HashMapåº•å±‚åŸç†" class="headerlink" title="HashMapåº•å±‚åŸç†"></a>HashMapåº•å±‚åŸç†</h4><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411142030020.png" alt="image-20241114202953186"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411142058169.png" alt="image-20241114205840157"></p><p>LinkedHashMapåº•å±‚åŸç†</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411142107885.png" alt="image-20241114210716811"></p><p>TreeMapåº•å±‚åŸç†</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202411142109921.png" alt="image-20241114210934300"></p><h2 id="é›†åˆåµŒå¥—"><a href="#é›†åˆåµŒå¥—" class="headerlink" title="é›†åˆåµŒå¥—"></a>é›†åˆåµŒå¥—</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> cities <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"æ±Ÿè‹çœ"</span><span class="token punctuation">,</span> cities<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>cities<span class="token punctuation">,</span> <span class="token string">"è‹å·"</span><span class="token punctuation">,</span> <span class="token string">"å—äº¬"</span><span class="token punctuation">,</span> <span class="token string">"é©¬éå±±"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaSE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€çŸ¥è¯† </tag>
            
            <tag> æ—¥æœŸæ“ä½œ </tag>
            
            <tag> é›†åˆæ“ä½œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockeré•œåƒ</title>
      <link href="/2024/10/08/docker-jing-xiang/"/>
      <url>/2024/10/08/docker-jing-xiang/</url>
      
        <content type="html"><![CDATA[<p>bash -c â€œ$(curl -sSL <a href="https://resource.fit2cloud.com/1panel/package/v2/quick_start.sh">https://resource.fit2cloud.com/1panel/package/v2/quick_start.sh</a>)â€</p><h1 id="åˆ›å»ºç›®å½•"><a href="#åˆ›å»ºç›®å½•" class="headerlink" title="åˆ›å»ºç›®å½•"></a>åˆ›å»ºç›®å½•</h1><p>mkdir -p /etc/docker</p><h1 id="å¤åˆ¶å†…å®¹"><a href="#å¤åˆ¶å†…å®¹" class="headerlink" title="å¤åˆ¶å†…å®¹"></a>å¤åˆ¶å†…å®¹</h1><p>tee /etc/docker/daemon.json &lt;&lt;-â€˜EOFâ€™<br>{<br>    â€œregistry-mirrorsâ€: [<br>        â€œ<a href="http://hub-mirror.c.163.com/">http://hub-mirror.c.163.com</a>â€œ,<br>        â€œ<a href="https://mirrors.tuna.tsinghua.edu.cn/">https://mirrors.tuna.tsinghua.edu.cn</a>â€œ,<br>        â€œ<a href="http://mirrors.sohu.com/">http://mirrors.sohu.com</a>â€œ,<br>        â€œ<a href="https://ustc-edu-cn.mirror.aliyuncs.com/">https://ustc-edu-cn.mirror.aliyuncs.com</a>â€œ,<br>        â€œ<a href="https://ccr.ccs.tencentyun.com/">https://ccr.ccs.tencentyun.com</a>â€œ,<br>        â€œ<a href="https://docker.m.daocloud.io/">https://docker.m.daocloud.io</a>â€œ,<br>        â€œ<a href="https://docker.awsl9527.cn/">https://docker.awsl9527.cn</a>â€œ<br>    ]<br>}<br>EOF</p><h1 id="é‡æ–°åŠ è½½é…ç½®"><a href="#é‡æ–°åŠ è½½é…ç½®" class="headerlink" title="é‡æ–°åŠ è½½é…ç½®"></a>é‡æ–°åŠ è½½é…ç½®</h1><p>systemctl daemon-reload</p><h1 id="é‡å¯Docker"><a href="#é‡å¯Docker" class="headerlink" title="é‡å¯Docker"></a>é‡å¯Docker</h1><p>systemctl restart docker</p>]]></content>
      
      
      <categories>
          
          <category> é•œåƒæº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­å»ºä¸€ä¸ªå›¾åºŠ</title>
      <link href="/2024/09/01/da-jian-yi-ge-tu-chuang/"/>
      <url>/2024/09/01/da-jian-yi-ge-tu-chuang/</url>
      
        <content type="html"><![CDATA[<h1 id="GitHub-PicGo-JsDelivr-æ‰“é€ é«˜æ•ˆå…è´¹å›¾åºŠè¯¦ç»†æ•™ç¨‹"><a href="#GitHub-PicGo-JsDelivr-æ‰“é€ é«˜æ•ˆå…è´¹å›¾åºŠè¯¦ç»†æ•™ç¨‹" class="headerlink" title="GitHub+PicGo+JsDelivr æ‰“é€ é«˜æ•ˆå…è´¹å›¾åºŠè¯¦ç»†æ•™ç¨‹"></a>GitHub+PicGo+JsDelivr æ‰“é€ é«˜æ•ˆå…è´¹å›¾åºŠè¯¦ç»†æ•™ç¨‹</h1><h2 id="1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å›¾åºŠå‘¢ï¼Ÿä»€ä¹ˆæ˜¯å›¾åºŠï¼Ÿ"><a href="#1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å›¾åºŠå‘¢ï¼Ÿä»€ä¹ˆæ˜¯å›¾åºŠï¼Ÿ" class="headerlink" title="1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å›¾åºŠå‘¢ï¼Ÿä»€ä¹ˆæ˜¯å›¾åºŠï¼Ÿ"></a>1ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å›¾åºŠå‘¢ï¼Ÿä»€ä¹ˆæ˜¯å›¾åºŠï¼Ÿ</h2><p><a href="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412082020533.jpg">https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202412082020533.jpg</a><br>å›¾åºŠæ˜¯æŒ‡ä¸“é—¨ç”¨äºå­˜å‚¨å›¾ç‰‡çš„ç½‘ç»œæœåŠ¡å™¨ã€‚ä½¿ç”¨å›¾åºŠçš„ä¸»è¦åŸå› æœ‰å‡ ç‚¹ï¼š</p><ol><li><strong>èŠ‚çœç©ºé—´</strong>: åœ¨ç½‘ç«™æˆ–åšå®¢ä¸Šç›´æ¥å­˜å‚¨å¤§é‡å›¾ç‰‡ä¼šå ç”¨å¤§é‡æœåŠ¡å™¨ç©ºé—´ï¼Œè€Œä½¿ç”¨å›¾åºŠå¯ä»¥å°†å›¾ç‰‡å­˜å‚¨åœ¨ä¸“é—¨çš„æœåŠ¡å™¨ä¸Šï¼ŒèŠ‚çœè‡ªå·±æœåŠ¡å™¨çš„ç©ºé—´ã€‚</li><li><strong>åŠ é€Ÿè®¿é—®</strong>: å›¾åºŠé€šå¸¸ä¼šæœ‰ä¸“é—¨çš„å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆCDNï¼‰æ¥åŠ é€Ÿå›¾ç‰‡çš„åŠ è½½é€Ÿåº¦ï¼Œä»è€Œæé«˜ç½‘ç«™çš„è®¿é—®é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚</li><li><strong>ç¨³å®šæ€§</strong>: å›¾åºŠæœåŠ¡æä¾›å•†é€šå¸¸ä¼šæä¾›ç¨³å®šçš„æœåŠ¡å™¨å’Œæ•°æ®å¤‡ä»½ï¼Œç¡®ä¿å›¾ç‰‡çš„å®‰å…¨æ€§å’Œå¯é æ€§ã€‚</li><li><strong>æ–¹ä¾¿åˆ†äº«</strong>: å›¾åºŠé€šå¸¸ä¼šæä¾›å›¾ç‰‡é“¾æ¥ï¼Œæ–¹ä¾¿ç”¨æˆ·åˆ†äº«å›¾ç‰‡åˆ°ç¤¾äº¤åª’ä½“ã€è®ºå›ç­‰å¹³å°ï¼Œè€Œä¸å¿…ä¸Šä¼ åˆ°å„ä¸ªå¹³å°ã€‚</li></ol><h2 id="2ã€å›¾åºŠçš„é€‰æ‹©"><a href="#2ã€å›¾åºŠçš„é€‰æ‹©" class="headerlink" title="2ã€å›¾åºŠçš„é€‰æ‹©"></a>2ã€å›¾åºŠçš„é€‰æ‹©</h2><p>æ¨èä½¿ç”¨GitHubä½œä¸ºå›¾åºŠï¼Œç‰¹ç‚¹æ˜¯å…è´¹ã€ç¨³å®šï¼Œæœ‰ä¸€ä¸ªå°ç¼ºç‚¹æ˜¯å›½å†…è®¿é—®é€Ÿåº¦æ…¢ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œå¯ä»¥ä½¿ç”¨jsDelivrå…è´¹CDNåŠ é€Ÿã€‚ä½†æ˜¯æœ‰æ—¶å€™cdnåŠ é€Ÿæ•ˆæœå¹¶ä¸æ˜¾è‘—ã€‚</p><h2 id="3ã€å…³äºjsDelivr"><a href="#3ã€å…³äºjsDelivr" class="headerlink" title="3ã€å…³äºjsDelivr"></a>3ã€å…³äºjsDelivr</h2><p>jsDelivræ˜¯å›½å¤–çš„ä¸€å®¶ä¼˜ç§€çš„å…¬å…± CDN æœåŠ¡æä¾›å•†ï¼Œæ— é¡»æ‹…å¿ƒä¸­å›½é˜²ç«å¢™é—®é¢˜è€Œå½±å“ä½¿ç”¨ã€‚å®˜ç½‘ï¼š<a href="http://www.jsdelivr.com/">http://www.jsdelivr.com/</a></p><hr><h2 id="4ã€æ•™ç¨‹å¼€å§‹ï¼š"><a href="#4ã€æ•™ç¨‹å¼€å§‹ï¼š" class="headerlink" title="4ã€æ•™ç¨‹å¼€å§‹ï¼š"></a>4ã€æ•™ç¨‹å¼€å§‹ï¼š</h2><ol><li>æ³¨å†ŒGitHubè´¦å·ï¼Œå¹¶åˆ›å»ºä»“åº“ã€‚</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202405131759001.png" alt="1"></p><ol start="2"><li>ä»“åº“ä¸€å®šè¦è®¾ç½®<strong>å…¬å¼€</strong>ï¼Œä¸€å®šï¼ä¸€å®šï¼ä¸€å®šï¼</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202405131759272.png" alt="2"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202405131800850.png" alt="3"></p><ol start="3"><li>åœ¨ github ä¸Šç‚¹å¤´åƒè¿›å…¥<code>settings</code> é€‰é¡¹ã€‚</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202405131801105.png" alt="4"></p><ol start="4"><li>ç‚¹å·¦ä¾§æœ€ä¸‹é¢èœå• <code>Developer settings</code></li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202405131801004.png" alt="5"></p><ol start="5"><li>ç‚¹å‡» Tokens (classic) ç”Ÿæˆå¯†é’¥</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202405131802706.png" alt="6"></p><ol start="6"><li>è¾“å…¥githubå¯†ç åè¿›å…¥è¿™ä¸ªé¡µé¢</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202405131802391.png" alt="7"></p><ol start="7"><li>åœ¨åˆ›å»ºé¡µé¢ä¸­ï¼Œå¡«å†™ Note ä¸ºâ€œ<strong>å›¾åºŠ-blo</strong>gâ€ï¼ŒExpirationï¼ˆè¿‡æœŸæ—¶é—´ï¼‰ä¸º <strong>No expiration</strong>ï¼ˆæ°¸ä¹…ï¼‰,ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è¿‡æœŸæ—¶é—´ï¼Œåœ¨ä¸‹é¢çš„Select scopesï¼ˆé€‰æ‹©æƒé™èŒƒå›´ï¼‰å¦‚ä¸‹å›¾å‹¾é€‰ <strong>repo</strong>ã€‚</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202405131803743.png" alt="8"></p><ol start="8"><li>æœ€åä¸‹æ»‘åˆ°æœ€åº•éƒ¨ï¼Œç‚¹å‡» <strong>generate token</strong> ç”Ÿæˆä»¤ç‰Œå³å¯ï¼ˆä¸€å®šè¦è®°ä½ï¼Œä¸è¦æ³„éœ²ï¼‰</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202405131803589.png" alt="9"></p><ol start="9"><li>ç”Ÿæˆå¯†é’¥</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202405131803464.png" alt="10"></p><hr><h3 id="4-1-åœ¨è‡ªå·±ç”µè„‘ä¸Šé…ç½®å›¾åºŠ"><a href="#4-1-åœ¨è‡ªå·±ç”µè„‘ä¸Šé…ç½®å›¾åºŠ" class="headerlink" title="4.1 åœ¨è‡ªå·±ç”µè„‘ä¸Šé…ç½®å›¾åºŠ"></a>4.1 åœ¨è‡ªå·±ç”µè„‘ä¸Šé…ç½®å›¾åºŠ</h3><ol><li><p>ä¸‹è½½PicGoï¼Œåœ°å€ï¼š<a href="https://github.com/Molunerfinn/PicGo">https://github.com/Molunerfinn/PicGo</a></p></li><li><p>å®‰è£…å’Œé…ç½®PicGoå›¾åºŠè½¯ä»¶ï¼ˆä¸€ç›´ä¸‹ä¸€æ­¥å®‰è£…å°±å¯ä»¥äº†ï¼‰</p><p>è®¾å®šä»“åº“å â€“ æ·»å†™ github çš„ è´¦æˆ·/ä»“åº“å<br>è®¾å®šåˆ†æ”¯å â€“ å¡«å†™ä½¿ç”¨çš„åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯ main<br>è®¾å®š Token â€“ å³å°†ä¸Šé¢ç”Ÿæˆçš„ token å¡«å†™ä¸Š<br>è®¾å®šå‚¨å­˜è·¯å¾„ â€“ ä»“åº“ä¸‹çš„å­ç›®å½•ï¼ŒæŒ‰è‡ªå·±è§„åˆ’å¡«å†™<br>è®¾å®šè‡ªå®šä¹‰åŸŸå â€“ é€‰å¡«ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨äº† jsdelivr cdn åŠ é€Ÿäº†ä¸€ä¸‹ï¼Œcdn é“¾æ¥æ ¼å¼å¦‚ä¸‹:</p><pre class="line-numbers language-none"><code class="language-none">https://cdn.jsdelivr.net/gh/è´¦æˆ·å/ä»“åº“å<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202405131806864.png" alt="11"></p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202405131806601.png" alt="12"></p><h2 id="5ã€Minioæ­å»ºå›¾åºŠ"><a href="#5ã€Minioæ­å»ºå›¾åºŠ" class="headerlink" title="5ã€Minioæ­å»ºå›¾åºŠ"></a>5ã€Minioæ­å»ºå›¾åºŠ</h2><p>æœ€ç®€å•çš„åŠæ³•è¿˜æ˜¯ä½¿ç”¨minioæ­å»ºå›¾åºŠ:</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202410081530510.png"></p><hr><p>ä»¥ä¸Šæ–¹æ¡ˆåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¾ˆå®¹æ˜“é€ æˆå¡é¡¿ï¼Œæ¯”è¾ƒå½±å“ä½¿ç”¨ä½“éªŒã€‚</p><h2 id="6ã€typora-PicGo-Coreå®ç°å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ "><a href="#6ã€typora-PicGo-Coreå®ç°å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ " class="headerlink" title="6ã€typora+PicGo-Coreå®ç°å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ "></a>6ã€typora+PicGo-Coreå®ç°å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ </h2><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/image-20241117092800812.png" alt="æ“ä½œæ­¥éª¤"></p><p>é¼ æ ‡å³é”®ï¼Œç‚¹å‡»<code>ä¸Šä¼ å›¾ç‰‡</code>ï¼Œç„¶åå›¾ç‰‡ä¼šè¢«ä¸Šä¼ åˆ°å›¾åºŠã€‚ç›´æ¥ä½¿ç”¨picGoå†…æ ¸ï¼Œè€Œä¸æ˜¯picGoåº”ç”¨ç¨‹åºï¼Œå¡é¡¿çš„å¯èƒ½æ€§ä¼šæ›´å°ä¸€äº›ã€‚</p><p>æ­¥éª¤6çš„é…ç½®æ–‡ä»¶ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"picBed"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"current"</span><span class="token operator">:</span> <span class="token string">"github"</span><span class="token punctuation">,</span>    <span class="token property">"github"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"repo"</span><span class="token operator">:</span> <span class="token string">"zhangyao0329/tuchuang-blog"</span><span class="token punctuation">,</span> <span class="token comment">//è‡ªå·±çš„ä»“åº“å</span>      <span class="token property">"branch"</span><span class="token operator">:</span> <span class="token string">"main"</span><span class="token punctuation">,</span> <span class="token comment">//é»˜è®¤</span>      <span class="token property">"token"</span><span class="token operator">:</span> <span class="token string">"ã€Šã€‹ã€Šã€‹ã€Šã€‹ã€Šã€‹ã€Šã€‹"</span><span class="token punctuation">,</span> <span class="token comment">//githubçš„token</span>      <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"img/"</span><span class="token punctuation">,</span> <span class="token comment">//åœ¨ä»“åº“ä¸‹å†å»ºä¸€ä¸ªimgæ–‡ä»¶å¤¹ï¼Œå¯ä»¥ä¸ºç©º</span>      <span class="token property">"customUrl"</span><span class="token operator">:</span> <span class="token string">"https://github.com/zhangyao0329/tuchuang-blog/raw/main"</span> <span class="token comment">//æŒ‰è‡ªå·±çš„æ¥</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token property">"uploader"</span><span class="token operator">:</span> <span class="token string">"github"</span><span class="token punctuation">,</span>    <span class="token property">"transformer"</span><span class="token operator">:</span> <span class="token string">"path"</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token property">"picgoPlugins"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"picgo-plugin-github-plus"</span><span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="CFçš„cdnä¸ºå›¾åºŠåŠ é€Ÿ"><a href="#CFçš„cdnä¸ºå›¾åºŠåŠ é€Ÿ" class="headerlink" title="CFçš„cdnä¸ºå›¾åºŠåŠ é€Ÿ"></a>CFçš„cdnä¸ºå›¾åºŠåŠ é€Ÿ</h2><p>æ–°å»ºä»“åº“<code>pinkfufu-img</code>,è®¾ç½®å…¬å…±ä»“åº“ã€‚å³ï¼š<a href="https://github.com/pinkfufu/pinkfufu-img">pinkfufu/pinkfufu-img</a></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/05/04-6f74d17150b8b7acb54a224c23b2c621-image-20250504191755252.png" alt="æ–°å»ºä»“åº“"></p><ul><li><p>ç‚¹å‡»å³ä¸Šè§’ç”¨æˆ·å¤´åƒï¼Œé€‰æ‹©<code> Settingsï¼ˆè®¾ç½®ï¼‰</code></p></li><li><p>åœ¨é¡µé¢å·¦ä¾§èœå•æ æœ€åï¼Œé€‰æ‹© <code>Developer settingsï¼ˆå¼€å‘äººå‘˜è®¾ç½®ï¼‰</code></p></li><li><p>ç„¶åç‚¹å‡» <code>Personal access tokensï¼ˆä¸ªäºº[è®¿é—®ä»¤ç‰Œï¼‰</code>,é€‰æ‹©<code> Token(classic)</code></p></li><li><p>ç‚¹å‡» <code>Generate new token </code>å¼€å§‹åˆ›å»ºä¸€ä¸ªæ–°çš„ä»¤ç‰Œï¼Œæ³¨æ„ä¸€å®šè¦é€‰æ‹© classic æ–¹å¼ã€‚</p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/05/04-070c15250e12906bab73415cc6ec9a52-image-20241123170701295.png"></p></li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/05/04-409ed55abb438ee85fb87526c7ab5610-image-20250504191949301.png" alt="token"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/05/04-0e949487474e60ec91218d09acc2d427-image-20241123171129480.png"></p><h3 id="PicGo-é…ç½®"><a href="#PicGo-é…ç½®" class="headerlink" title="PicGo é…ç½®"></a>PicGo é…ç½®</h3><ul><li>æ‰“å¼€<code>PicGo</code>,ç‚¹å‡»<code>å›¾åºŠè®¾ç½®</code>,æ‰¾åˆ°<code>GitHub</code></li><li>å›¾åºŠè®¾ç½®<code>GitHub</code><ul><li>å›¾åºŠé…ç½®å:<code>è‡ªå®šä¹‰</code>,</li><li>ä»“åº“å:<code>GitHubè´¦å·å/ä»“åº“åç§°</code></li><li>è®¾å®šToken:<code>å¡«å†™GitHubä¸ªäººä»¤ç‰Œ</code>;</li><li>è‡ªå®šä¹‰åŸŸ:<code>https://+Workersç»‘å®šçš„äºŒçº§åŸŸå</code>;</li></ul></li></ul><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/05/04-0a715e98a34e41102d0a441fe7f89815-image-20241123201201930.png" alt="picgo"></p><p><img src="https://github.com/zhangyao0329/tuchuang-blog/raw/main/tuchuang-blog/2025/05/04-692a5ce6d0357fd99f1a2f6c722a9a01-image-20250504192722469.png" alt="image-20250504192722469"></p>]]></content>
      
      
      <categories>
          
          <category> å›¾åºŠæ­å»ºæ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åšå®¢ </tag>
            
            <tag> å›¾åºŠæ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºæ­¤åšå®¢å¹³å°</title>
      <link href="/2024/09/01/guan-yu-ci-bo-ke-ping-tai/"/>
      <url>/2024/09/01/guan-yu-ci-bo-ke-ping-tai/</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€å…³äº"><a href="#1ã€å…³äº" class="headerlink" title="1ã€å…³äº"></a>1ã€å…³äº</h2><p>ç°åœ¨ä¸ªäººåšå®¢å·²ç»éå¸¸å¸¸è§äº†ï¼ŒçŸ¥ä¹ï¼Œ csdnï¼Œ ç¨€åœŸæ˜é‡‘ï¼Œç”šè‡³ä¸å¯è§çš„æœ‹å‹åœˆç­‰ç­‰æ—©å·²å¯ä»¥æ›¿ä»£ä¸ªäººåšå®¢ï¼Œæ»¡è¶³æ—¥å¸¸ç¬”è®°çš„éœ€æ±‚ï¼Œä½†æ˜¯ä½œä¸ºç‹¬ç«‹æ€è€ƒçš„ä¸ªä½“ï¼Œè‡ªç”±æ„å¿—æœªå¿…å…è®¸å‡ºç°åœ¨å…¬å…±å¹³å°ï¼Œæˆ‘çš„åšå®¢ç”±æ­¤è¯ç”Ÿã€‚</p><p>ä¸€ä¸ªä¸ªäººåšå®¢æ— ç–‘æœ‰äº›ä¼˜ç‚¹çš„ï¼š</p><ul><li>è®°å½•æˆé•¿ä¸åæ€</li><li>æŒç»­å­¦ä¹ çš„åŠ¨åŠ›</li><li>ä¸ªäººçš„ç²¾ç¥å®¶å›­</li></ul><p><strong>ä¸è¯„æ”¿æ²» ä¸è°ˆå®—æ•™ ä¸ç¢°é»„èµŒæ¯’</strong><br>        <strong>é¾™çš„ä¼ äººéœ€è‡ªå¾‹</strong></p><h2 id="2ã€è‡ªåŠ¨åŒ–éƒ¨ç½²"><a href="#2ã€è‡ªåŠ¨åŒ–éƒ¨ç½²" class="headerlink" title="2ã€è‡ªåŠ¨åŒ–éƒ¨ç½²"></a>2ã€è‡ªåŠ¨åŒ–éƒ¨ç½²</h2><ol><li>éœ€è¦åœ¨ GitHub å»ºå¥½ä¸¤ä¸ªä»“åº“ï¼Œä¸ºä»€ä¹ˆæ˜¯ä¸¤ä¸ªï¼Ÿ</li></ol><ul><li><p>ä¸€ä¸ªç”¨äºæºç å¤‡ä»½ï¼Œä¸Šä¼ åˆ°è¯¥å¤‡ä»½ä»“åº“ï¼Œè‡ªåŠ¨åŒ–éƒ¨ç½²å‘å¸ƒåˆ°å¦ä¸€ä¸ªä»“åº“ã€‚</p></li><li><p>é€šå¸¸æ˜¯ä¸€ä¸ªç§æœ‰ä»“åº“ï¼Œä¸€ä¸ªå…±æœ‰ä»“åº“ã€‚ç§æœ‰åº“ç”¨äºæºç å¤‡ä»½ï¼Œå…¬å…±åº“ç”¨äºå‘å¸ƒåšå®¢ã€‚</p><p>å³ï¼š</p><ul><li>Hexo-main</li><li>username.github.io ä»“åº“</li></ul><p>PS:</p><ul><li>username ä¸º github çš„è´¦å·åå­—ã€‚å…¶ä»–å‘½åä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯è®¿é—®è·¯å¾„ä¼šå˜æˆ username.github.io/&lt;ä»“åº“å&gt;</li><li>zhangyao0329.github.io</li></ul></li></ul><ol start="2"><li>åˆ›å»ºä¸ªäººè®¿é—®ä»¤ç‰Œï¼ˆPersonal Access Tokenï¼‰</li></ol><p>å› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨ <strong>Hexo é¡¹ç›®ä»“åº“</strong> æ‰§è¡Œ <strong>Github Actions</strong> å‘ <strong>username.github.io ä»“åº“</strong>æ¨é€ä»£ç ï¼Œç”±äº Github æƒé™é™åˆ¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ GitHub è´¦æˆ·ä¸­åˆ›å»ºä¸€ä¸ªå…·æœ‰è¶³å¤Ÿæƒé™çš„<strong>ä¸ªäººè®¿é—®ä»¤ç‰Œï¼ˆPersonal Access Tokenï¼Œç®€ç§° PATï¼‰</strong>ã€‚è¿™ä¸ªä»¤ç‰Œéœ€è¦æœ‰è¶³å¤Ÿçš„æƒé™æ¥ä¿®æ”¹ä»“åº“ã€‚</p><ol><li>ç‚¹å‡»å³ä¸Šè§’å¤´åƒ -&gt; æ‰“å¼€ <strong>Settings</strong> -&gt; å·¦è¾¹æ æ»šåˆ°æœ€åæ‰¾åˆ° <strong>Develop Setting</strong> æ‰“å¼€ï¼Œå¦‚å›¾:</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202409011231632.png" alt="1"></p><ol start="2"><li>æ‰¾åˆ° <strong>Personal Access Token</strong> ç‚¹å‡» <strong>Tokensï¼ˆclassicï¼‰</strong> -&gt; é€‰æ‹© <strong>Generate new token (classic)</strong> ï¼Œå¦‚å›¾:</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202409011232388.png" alt="2"></p><ol start="3"><li><p>ç»™ä»¤ç‰Œèµ·ä¸ªåå­—å¹¶ä¸”å‹¾é€‰çº¢æ¡†ä¸­çš„ <strong>repo</strong>ã€<strong>workflow</strong> çš„è®¿é—®æƒé™ï¼Œç„¶åç‚¹å‡»ç”Ÿæˆ <strong>token</strong>ï¼ˆ<strong>æ³¨æ„ï¼š</strong> ç¡®ä¿å¤åˆ¶å¹¶å®‰å…¨åœ°ä¿å­˜è¿™ä¸ªä»¤ç‰Œã€‚GitHub ä¸ä¼šå†æ¬¡æ˜¾ç¤ºè¿™ä¸ªä»¤ç‰Œï¼Œæ‰€ä»¥è¿™æ˜¯ä½ å”¯ä¸€çš„æœºä¼šå¤åˆ¶å®ƒï¼‰ï¼Œå¦‚å›¾:</p><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202409011238009.png" alt="3"></p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202409011238886.png" alt="4"></p><ol start="4"><li>å°†ç”Ÿæˆçš„ <strong>PAT</strong> æ·»åŠ åˆ°ä½ çš„åšå®¢æºä»£ç ä»“åº“çš„ <strong>Secrets</strong>ï¼Œåå­—å¡«å…¥ <strong>PERSONAL_TOKEN</strong> åé¢ä¼šç”¨åˆ°è¿™ä¸ªå˜é‡åï¼Œå¦‚å›¾</li></ol><p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202409011238535.png" alt="5"></p><ol start="3"><li><p>åˆ›å»º Github Actions è„šæœ¬</p></li><li><p>åœ¨ä½ çš„ Hexo é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <strong>.github/workflows</strong> æ–‡ä»¶å¤¹ï¼ˆå¦‚æœå°šæœªå­˜åœ¨ï¼‰ã€‚</p></li><li><p>åœ¨è¯¥æ–‡ä»¶å¤¹å†…åˆ›å»ºä¸€ä¸ªæ–°çš„ <strong>YAML</strong> æ–‡ä»¶ï¼ˆä¾‹å¦‚ hexo-deploy.ymlï¼‰ï¼Œç”¨äºå®šä¹‰ <strong>GitHub Actions</strong> å·¥ä½œæµã€‚</p></li><li><p>å¤åˆ¶å¦‚ä¸‹é…ç½®åˆ° <strong>YAML</strong> æ–‡ä»¶</p></li></ol><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy Hexo to GitHub Pages<span class="token key atrule">on</span><span class="token punctuation">:</span>  <span class="token key atrule">push</span><span class="token punctuation">:</span>    <span class="token key atrule">branches</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> main <span class="token comment"># æˆ–ä½ ä½¿ç”¨çš„é»˜è®¤åˆ†æ”¯åç§°</span><span class="token key atrule">jobs</span><span class="token punctuation">:</span>  <span class="token key atrule">deploy</span><span class="token punctuation">:</span>    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest    <span class="token key atrule">steps</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout blog source        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2        <span class="token key atrule">with</span><span class="token punctuation">:</span>          <span class="token key atrule">path</span><span class="token punctuation">:</span> blog      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Set up Node.js        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v1        <span class="token key atrule">with</span><span class="token punctuation">:</span>          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token string">"18"</span> <span class="token comment"># è®¾ç½® Node.js ç‰ˆæœ¬</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Cache dependencies        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/cache@v2        <span class="token key atrule">with</span><span class="token punctuation">:</span>          <span class="token key atrule">path</span><span class="token punctuation">:</span> node_modules          <span class="token key atrule">key</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> runner.os <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">-</span>node<span class="token punctuation">-</span>$<span class="token punctuation">{</span><span class="token punctuation">{</span> hashFiles('<span class="token important">**/package-lock.json')</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>          <span class="token key atrule">restore-keys</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">            ${{ runner.os }}-node-</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install dependencies        <span class="token key atrule">run</span><span class="token punctuation">:</span> npm install        <span class="token key atrule">working-directory</span><span class="token punctuation">:</span> ./blog      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install Hexo CLI        <span class="token key atrule">run</span><span class="token punctuation">:</span> npm install <span class="token punctuation">-</span>g hexo<span class="token punctuation">-</span>cli        <span class="token key atrule">working-directory</span><span class="token punctuation">:</span> ./blog      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Generate static pages        <span class="token key atrule">run</span><span class="token punctuation">:</span> hexo generate        <span class="token key atrule">working-directory</span><span class="token punctuation">:</span> ./blog      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy to GitHub Pages        <span class="token key atrule">uses</span><span class="token punctuation">:</span> peaceiris/actions<span class="token punctuation">-</span>gh<span class="token punctuation">-</span>pages@v3        <span class="token key atrule">with</span><span class="token punctuation">:</span>          <span class="token key atrule">personal_token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.PERSONAL_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>          <span class="token key atrule">publish_dir</span><span class="token punctuation">:</span> ./blog/public          <span class="token key atrule">external_repository</span><span class="token punctuation">:</span> zhangyao0329/zhangyao0329.github.io <span class="token comment"># æ›´æ”¹ä¸ºä½ çš„ GitHub Pages ä»“åº“, username æ˜¯ä½ çš„ç”¨æˆ·å</span>          <span class="token key atrule">publish_branch</span><span class="token punctuation">:</span> main <span class="token comment"># GitHub Pages åˆ†æ”¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>end: æ­¤å¤–ï¼šHexoçš„<code>_config.yml</code>ä¹Ÿéœ€è¦åšå‡ºæ›´æ”¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> git  <span class="token key atrule">repository</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/zhangyao0329/Hexo<span class="token punctuation">-</span>main.git  <span class="token comment"># repository: https://github.com/zhangyao0329/zhangyao0329.github.io.git</span>  <span class="token key atrule">branch</span><span class="token punctuation">:</span> main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åšå®¢æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åšå®¢ </tag>
            
            <tag> åˆè¡· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¿€æ´»Windows10 ä¸“ä¸šç‰ˆ</title>
      <link href="/2024/06/26/ji-huo-windows10-zhuan-ye-ban/"/>
      <url>/2024/06/26/ji-huo-windows10-zhuan-ye-ban/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/zhangyao0329/tuchuang-blog/tuchuang-blog/202406262234395.png" alt="image-20240626223424058"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">slmgr /ipk W269N-WFGWX-YVC9B-4J6C9-T83GXslmgr /skms kms.03k.orgslmgr /ato<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> win10 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> winç¯å¢ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS7åŸç”Ÿå®‰è£…ä¸€äº›å·¥å…·</title>
      <link href="/2024/05/17/centos7-zhong-yuan-sheng-an-zhuang-yi-xie-gong-ju/"/>
      <url>/2024/05/17/centos7-zhong-yuan-sheng-an-zhuang-yi-xie-gong-ju/</url>
      
        <content type="html"><![CDATA[<h1 id="CentOS7åŸç”Ÿå®‰è£…ä¸€äº›å·¥å…·"><a href="#CentOS7åŸç”Ÿå®‰è£…ä¸€äº›å·¥å…·" class="headerlink" title="CentOS7åŸç”Ÿå®‰è£…ä¸€äº›å·¥å…·"></a>CentOS7åŸç”Ÿå®‰è£…ä¸€äº›å·¥å…·</h1><h2 id="1ã€å®‰è£…JDK17"><a href="#1ã€å®‰è£…JDK17" class="headerlink" title="1ã€å®‰è£…JDK17"></a>1ã€å®‰è£…JDK17</h2><p>å¦‚æœæ‚¨å¸Œæœ›åœ¨çº¿å®‰è£… JDK 17 åˆ° <code>/usr/local</code> ç›®å½•ä¸‹ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li><p><strong>ä¸‹è½½ JDK 17 å­˜æ¡£</strong>ï¼šæ‚¨å¯ä»¥ä» AdoptOpenJDK ç½‘ç«™ä¸‹è½½ JDK 17 å­˜æ¡£ã€‚åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ <code>wget</code> å‘½ä»¤ä¸‹è½½å­˜æ¡£æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">wget</span> https://download.java.net/java/GA/jdk17/0d483333a00540d886896bac774ff48b/35/GPL/openjdk-17_linux-x64_bin.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™å°†ä¸‹è½½ JDK 17 å­˜æ¡£æ–‡ä»¶åˆ°å½“å‰ç›®å½•ã€‚</p></li><li><p><strong>è§£å‹å­˜æ¡£å¹¶ç§»åŠ¨åˆ° <code>/usr/local</code> ç›®å½•</strong>ï¼šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†å­˜æ¡£è§£å‹å¹¶ç§»åŠ¨åˆ° <code>/usr/local</code> ç›®å½•ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">tar</span> <span class="token parameter variable">-xzf</span> openjdk-17_linux-x64_bin.tar.gz <span class="token parameter variable">-C</span> /usr/local<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™å°†åœ¨ <code>/usr/local</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º <code>jdk-17</code> çš„ç›®å½•ï¼Œå¹¶å°† JDK 17 æ–‡ä»¶è§£å‹ç¼©åˆ°å…¶ä¸­ã€‚</p></li><li><p><strong>è®¾ç½®ç¯å¢ƒå˜é‡</strong>ï¼šç¼–è¾‘ <code>~/.bashrc</code> æˆ– <code>/etc/profile</code> æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹è¡Œï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/jdk-17<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¿å­˜å¹¶å…³é—­æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ–è€…å¦‚æœæ‚¨ä¿®æ”¹äº† <code>/etc/profile</code>ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> /etc/profile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><strong>éªŒè¯å®‰è£…</strong>ï¼šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ JDK æ˜¯å¦å·²æˆåŠŸå®‰è£…ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">java</span> <span class="token parameter variable">-version</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™å°†æ˜¾ç¤º Java çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œä»¥ç¡®ä¿ JDK 17 å·²æˆåŠŸå®‰è£…å¹¶é…ç½®ã€‚</p></li></ol><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæ‚¨åº”è¯¥å¯ä»¥åœ¨çº¿å°† JDK 17 å®‰è£…åˆ° <code>/usr/local</code> ç›®å½•ä¸‹ï¼Œå¹¶åœ¨ç³»ç»Ÿä¸­æ­£ç¡®é…ç½®ã€‚</p><h2 id="2ã€å®‰è£…redis"><a href="#2ã€å®‰è£…redis" class="headerlink" title="2ã€å®‰è£…redis"></a>2ã€å®‰è£…redis</h2><pre class="line-numbers language-none"><code class="language-none">#ä¸‹è½½rediså‹ç¼©åŒ…wget https://download.redis.io/releases/redis-7.0.0.tar.gz #å¦‚æœwgetå‘½ä»¤æ— æ•ˆï¼Œå…ˆæ‰§è¡Œä¸‹é¢è¿™ä¸ªå‘½ä»¤å®‰è£…wgetyum -y install wget<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">tar -zxvf redis-7.0.0.tar.gz -C /usr/local<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">#å®‰è£…Cè¯­è¨€ä¾èµ–yum install gcc-c++<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">cd /usr/localls<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">cd redis-7.0.0/make<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">cd src./redis-server<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">cd ..ll<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">#æ‰“å¼€redisé…ç½®æ–‡ä»¶vi redis.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¿®æ”¹è¿™å‡ ä¸ªå€¼</p><pre class="line-numbers language-none"><code class="language-none"># å®ˆæŠ¤è¿›ç¨‹daemonize yesport 6379requirepass 123456bind 0.0.0.0# noå€¼ï¼Œå…è®¸å¤–éƒ¨è¿æ¥protected-mode no<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">#ä»¥æŒ‡å®šçš„redis-xxxä¸‹çš„redisé…ç½®æ–‡ä»¶å¯åŠ¨redisæœåŠ¡./redis-server /usr/local/redis-7.0.0/redis.conf#æŸ¥çœ‹redisç›¸å…³è¿›ç¨‹ps -ef | grep redis<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">#åœ¨/etc/systemd/systemè·¯å¾„ä¸‹åˆ›å»ºredis.serviceæ–‡ä»¶vi /etc/systemd/system/redis.service<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">[Unit]Description=redis-serverAfter=network.target [Service]Type=forking#å‰é¢æ˜¯redis-serverçš„è·¯å¾„ï¼Œåé¢æ˜¯redis.confçš„è·¯å¾„ï¼Œå¡«é”™äº†ä¼šæ— æ•ˆExecStart=/usr/local/redis-7.0.0/src/redis-server /usr/local/redis-7.0.0/redis.confPrivateTmp=true [Install]WantedBy=multi-user.target<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">systemctl start redisps -ef|grep redis<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="3ã€å®‰è£…Mysql"><a href="#3ã€å®‰è£…Mysql" class="headerlink" title="3ã€å®‰è£…Mysql"></a>3ã€å®‰è£…Mysql</h2><h3 id="3-1-ä¸‹è½½å®‰è£…åŒ…"><a href="#3-1-ä¸‹è½½å®‰è£…åŒ…" class="headerlink" title="3.1. ä¸‹è½½å®‰è£…åŒ…"></a>3.1. ä¸‹è½½å®‰è£…åŒ…</h3><p>é€šè¿‡ç½‘ç›˜åˆ†äº«çš„æ–‡ä»¶ï¼šmysql-8.4.0-1.el7.x86_64.rpm-bundle.tar<br>é“¾æ¥: <a href="https://pan.baidu.com/s/1MJ4D35ROxV2ZYeQTpzWq8g?pwd=6666">https://pan.baidu.com/s/1MJ4D35ROxV2ZYeQTpzWq8g?pwd=6666</a> æå–ç : 6666</p><h3 id="3-2-ä¸Šä¼ åˆ°æ ¹ç›®å½•å¹¶è§£å‹"><a href="#3-2-ä¸Šä¼ åˆ°æ ¹ç›®å½•å¹¶è§£å‹" class="headerlink" title="3.2. ä¸Šä¼ åˆ°æ ¹ç›®å½•å¹¶è§£å‹"></a>3.2. ä¸Šä¼ åˆ°æ ¹ç›®å½•å¹¶è§£å‹</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">tar</span> <span class="token parameter variable">-xvf</span> mysql-8.4.0-1.el7.x86_64.rpm-bundle.tar<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">rpm -qa | grep mariadb<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">rpm -e --nodeps mariadb-libs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">rpm -ivh mysql-community-common-8.4.0-1.el7.x86_64.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">rpm -ivh mysql-community-client-plugins-8.4.0-1.el7.x86_64.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">rpm -ivh mysql-community-libs-8.4.0-1.el7.x86_64.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">rpm -ivh mysql-community-client-8.4.0-1.el7.x86_64.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">rpm -ivh mysql-community-icu-data-files-8.4.0-1.el7.x86_64.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">sudo yum install libaio<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">yum install net-tools<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">rpm -ivh mysql-community-server-8.4.0-1.el7.x86_64.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">mysqld --initialize<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">chown mysql:mysql -R /var/lib/mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">mysqld --initialize<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">systemctl start mysqld<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">systemctl status mysqld<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">mysqladmin --version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">grep 'temporary password' /var/log/mysqld.log<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">mysql -u root -p<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">ALTER USER 'root'@'localhost' IDENTIFIED BY '123456';exit;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">mysql -u root -p123456<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="3-3-è¿œç¨‹è¿æ¥ï¼ˆä»æ­¤å‘Šåˆ«æœ¬åœ°ç¯å¢ƒï¼‰"><a href="#3-3-è¿œç¨‹è¿æ¥ï¼ˆä»æ­¤å‘Šåˆ«æœ¬åœ°ç¯å¢ƒï¼‰" class="headerlink" title="3.3  è¿œç¨‹è¿æ¥ï¼ˆä»æ­¤å‘Šåˆ«æœ¬åœ°ç¯å¢ƒï¼‰"></a>3.3  è¿œç¨‹è¿æ¥ï¼ˆä»æ­¤å‘Šåˆ«æœ¬åœ°ç¯å¢ƒï¼‰</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p<span class="token number">123456</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'zhang_aliyun'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'forever0329'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'zhang_aliyun'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">user</span><span class="token punctuation">,</span> host <span class="token keyword">FROM</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="4ã€å®‰è£…Nginx"><a href="#4ã€å®‰è£…Nginx" class="headerlink" title="4ã€å®‰è£…Nginx"></a>4ã€å®‰è£…Nginx</h2><ol><li><p>æŸ¥çœ‹nginxè¿›ç¨‹ï¼Œæœ‰åˆ™æ€æ‰</p><pre class="line-numbers language-none"><code class="language-none">ps -ef|grep nginx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>æŸ¥æ‰¾nginxç›¸å…³æ–‡ä»¶ï¼Œå¹¶å…¨éƒ¨åˆ é™¤</p><pre class="line-numbers language-none"><code class="language-none">find / -name nginxrm -rf file /usr/local/nginx*yum remove nginx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>å¼€å§‹å®‰è£…nginxæ‰€éœ€ç¯å¢ƒ</p><pre class="line-numbers language-none"><code class="language-none">gcc -vcat /usr/lib64/pkgconfig/zlib.pcpcre-config --version<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>é…ç½® nginx å®‰è£…æ‰€éœ€çš„ç¯å¢ƒ</p><pre class="line-numbers language-none"><code class="language-none">#ä¸€æ¬¡å®‰è£…4ä¸ªæ’ä»¶yum -y install gcc pcre pcre-devel zlib zlib-devel openssl openssl-devel#ä¸€æ¬¡å®‰è£…å¦‚æœæœ‰é—®é¢˜ï¼Œå¯ä»¥è¯•ä¸€ä¸‹åˆ†å¼€å®‰è£…ï¼ˆä¸Šé¢å‘½ä»¤æ‰§è¡ŒæˆåŠŸäº†å°±æ— éœ€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤äº†ï¼‰ #å®‰è£… nginx éœ€è¦å…ˆå°†å®˜ç½‘ä¸‹è½½çš„æºç è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘ä¾èµ– gcc ç¯å¢ƒyum install gcc-c++ #pcreæ˜¯ä¸€ä¸ªperlåº“ï¼ŒåŒ…æ‹¬perlå…¼å®¹çš„æ­£åˆ™è¡¨è¾¾å¼åº“ï¼Œnginxçš„httpæ¨¡å—ä½¿ç”¨pcreæ¥è§£ææ­£åˆ™è¡¨è¾¾å¼ï¼Œæ‰€ä»¥éœ€è¦å®‰è£…pcreåº“yum install -y pcre pcre-devel #zlibåº“æä¾›äº†å¾ˆå¤šç§å‹ç¼©å’Œè§£å‹ç¼©æ–¹å¼nginxä½¿ç”¨zlibå¯¹httpåŒ…çš„å†…å®¹è¿›è¡Œgzipï¼Œæ‰€ä»¥éœ€è¦å®‰è£…yum install -y zlib zlib-devel #nginx ä¸ä»…æ”¯æŒ http åè®®ï¼Œè¿˜æ”¯æŒ httpsï¼ˆå³åœ¨sslåè®®ä¸Šä¼ è¾“httpï¼‰ï¼Œæ‰€ä»¥éœ€è¦åœ¨ Centos å®‰è£… OpenSSL åº“yum install -y openssl openssl-devel<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>åœ¨çº¿å®‰è£…nginx</p><pre class="line-numbers language-none"><code class="language-none">cd usr/localmkdir nginxcd nginx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>é€šè¿‡ wget ä¸‹è½½ nginx å®‰è£…åŒ…</p><pre class="line-numbers language-none"><code class="language-none">wget https://nginx.org/download/nginx-1.21.6.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>è§£å‹ å¹¶è¿›å…¥è§£å‹åçš„ç›®å½•</p><pre class="line-numbers language-none"><code class="language-none">tar xvf nginx-1.21.6.tar.gzcd nginx-1.21.6./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ç¼–è¯‘å’Œå®‰è£…</p><pre class="line-numbers language-none"><code class="language-none">make<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">make install<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>å¯åŠ¨ã€å…³é—­ nginx æœåŠ¡</p><pre class="line-numbers language-none"><code class="language-none">###å¯åŠ¨æœåŠ¡#éœ€è¦å…ˆè¿›å…¥sbinç›®å½•ä¸‹cd /usr/local/nginx/sbin#å¯åŠ¨nginxæœåŠ¡./nginx###å…³é—­æœåŠ¡#éœ€è¦å…ˆè¿›å…¥sbinç›®å½•ä¸‹cd /usr/local/nginx/sbin#å…³é—­nginxæœåŠ¡./nginx -s stop<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>10.ç³»ç»Ÿæ§åˆ¶</p><ol><li><p>è¿›å…¥ <code>/etc/systemd/system/</code> ç›®å½•ï¼š</p><pre class="line-numbers language-none"><code class="language-none">cd /etc/systemd/system/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>åˆ›å»ºä¸€ä¸ªæ–°çš„ systemd æœåŠ¡å•å…ƒæ–‡ä»¶ï¼Œä¾‹å¦‚ <code>nginx.service</code>ï¼š</p><pre class="line-numbers language-none"><code class="language-none">sudo vi nginx.service<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>åœ¨ vi ç¼–è¾‘å™¨ä¸­ï¼ŒæŒ‰ <code>i</code> è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œç„¶åç²˜è´´ä»¥ä¸‹æœåŠ¡å•å…ƒæ–‡ä»¶å†…å®¹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">[Unit]Description=The NGINX HTTP and reverse proxy serverAfter=network.target remote-fs.target nss-lookup.target[Service]Type=forkingPIDFile=/usr/local/nginx/logs/nginx.pidExecStartPre=/usr/local/nginx/sbin/nginx -tExecStart=/usr/local/nginx/sbin/nginxExecReload=/bin/kill -s HUP $MAINPIDExecStop=/bin/kill -s QUIT $MAINPIDPrivateTmp=true[Install]WantedBy=multi-user.target<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æŒ‰ <code>Esc</code> é”®é€€å‡ºæ’å…¥æ¨¡å¼ï¼Œç„¶åè¾“å…¥ <code>:wq</code> ä¿å­˜å¹¶é€€å‡º vi ç¼–è¾‘å™¨ã€‚</p></li><li><p>é‡æ–°åŠ è½½ systemd é…ç½®ï¼š</p><pre class="line-numbers language-none"><code class="language-none">sudo systemctl daemon-reload<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>å¯åŠ¨ Nginx æœåŠ¡ï¼š</p><pre class="line-numbers language-none"><code class="language-none">sudo systemctl start nginx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol></li><li><p>è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</p></li><li><p><strong>ç¡®ä¿å·²åˆ›å»º systemd æœåŠ¡å•å…ƒæ–‡ä»¶</strong>ï¼š<br>å¦‚æœä¹‹å‰å·²ç»æŒ‰ç…§ä¸Šè¿°æ­¥éª¤åˆ›å»ºäº† <code>nginx.service</code> æ–‡ä»¶ï¼Œè¯·ç¡®ä¿æ–‡ä»¶å†…å®¹æ­£ç¡®ä¸”ç¬¦åˆä½ çš„ç³»ç»Ÿé…ç½®ã€‚</p></li><li><p><strong>å¯ç”¨å¼€æœºè‡ªå¯åŠ¨</strong>ï¼š<br>ä½¿ç”¨ <code>systemctl</code> å‘½ä»¤å¯ç”¨ Nginx æœåŠ¡çš„å¼€æœºè‡ªå¯åŠ¨ï¼š</p><pre class="line-numbers language-none"><code class="language-none">sudo systemctl enable nginx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™æ¡å‘½ä»¤ä¼šåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å°† Nginx åŠ å…¥åˆ°å¯åŠ¨é¡¹ä¸­ã€‚</p></li><li><p><strong>éªŒè¯è®¾ç½®æ˜¯å¦ç”Ÿæ•ˆ</strong>ï¼š<br>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ Nginx æœåŠ¡çš„å¼€æœºå¯åŠ¨çŠ¶æ€ï¼š</p><pre class="line-numbers language-none"><code class="language-none">sudo systemctl is-enabled nginx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœè¾“å‡ºä¸º <code>enabled</code>ï¼Œåˆ™è¡¨ç¤ºå·²æˆåŠŸè®¾ç½® Nginx å¼€æœºè‡ªå¯åŠ¨ã€‚</p></li></ol><p>ç°åœ¨ï¼Œæ¯æ¬¡ç³»ç»Ÿå¯åŠ¨æ—¶ï¼ŒNginx å°†ä¼šè‡ªåŠ¨å¯åŠ¨å¹¶æŒ‰ç…§ä½ åœ¨ <code>nginx.service</code> æ–‡ä»¶ä¸­å®šä¹‰çš„é…ç½®è¿è¡Œã€‚</p><h2 id="5ã€å®‰è£…-rabbitmq"><a href="#5ã€å®‰è£…-rabbitmq" class="headerlink" title="5ã€å®‰è£… rabbitmq"></a>5ã€å®‰è£… rabbitmq</h2><p>å‰ç½®æ¡ä»¶ï¼š</p><ol><li>JDK</li><li>Erlan</li></ol><h3 id="1ã€å‰ç½®ï¼š"><a href="#1ã€å‰ç½®ï¼š" class="headerlink" title="1ã€å‰ç½®ï¼š"></a>1ã€å‰ç½®ï¼š</h3><p>1ã€å®‰è£…å‰çº¿å®Œæˆæ¡ä»¶</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-s</span> https://packagecloud.io/install/repositories/rabbitmq/erlang/script.rpm.sh <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">bash</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2ã€ç¬¬äºŒæ­¥å®‰è£…Erlang</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> <span class="token parameter variable">-y</span> erlang<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>3ã€æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦å®‰è£…æˆåŠŸ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">erl<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2ã€å¼€å§‹å®‰è£…MQ"><a href="#2ã€å¼€å§‹å®‰è£…MQ" class="headerlink" title="2ã€å¼€å§‹å®‰è£…MQ"></a>2ã€å¼€å§‹å®‰è£…MQ</h3><ol><li>å’Œä¹‹å‰ä¸€æ ·,éœ€è¦å¯¼å…¥ä¸€äº›ä¾èµ–</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">rpm</span> <span class="token parameter variable">--import</span> https://packagecloud.io/rabbitmq/rabbitmq-server/gpgkey<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">rpm</span> <span class="token parameter variable">--import</span> https://packagecloud.io/gpg.key<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-s</span> https://packagecloud.io/install/repositories/rabbitmq/rabbitmq-server/script.rpm.sh <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">bash</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>æ¥ä¸‹æ¥å»ä¸‹è½½RabbitMQçš„å®‰è£…åŒ…(æœ‰ç‚¹æ…¢ï¼Œæ‘¸é±¼~)</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">wget</span> https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.8.5/rabbitmq-server-3.8.5-1.el7.noarch.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="3"><li>ä¸‹è½½å®Œæˆè¿˜éœ€è¦ä¸€äº›é…ç½®</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">rpm</span> <span class="token parameter variable">--import</span> https://www.rabbitmq.com/rabbitmq-release-signing-key.asc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token parameter variable">-y</span> <span class="token function">install</span> epel-release<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token parameter variable">-y</span> <span class="token function">install</span> socat<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="4"><li>å®‰è£…æˆ‘ä»¬çš„MQåŒ…</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> rabbitmq-server-3.8.5-1.el7.noarch.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="5"><li>å¯ç”¨ç®¡ç†å¹³å°æ’ä»¶ï¼Œï¼Œå¯ä»¥å¯è§†åŒ–ç®¡ç†RabbitMQ</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rabbitmq-plugins <span class="token builtin class-name">enable</span> rabbitmq_management<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3ã€å®‰è£…å®Œæˆï¼Œå¯åŠ¨å®ƒ"><a href="#3ã€å®‰è£…å®Œæˆï¼Œå¯åŠ¨å®ƒ" class="headerlink" title="3ã€å®‰è£…å®Œæˆï¼Œå¯åŠ¨å®ƒ"></a>3ã€å®‰è£…å®Œæˆï¼Œå¯åŠ¨å®ƒ</h3><ol><li>å¯åŠ¨</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl start rabbitmq-server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>å¼€æœºè‡ªå¯</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl <span class="token builtin class-name">enable</span> rabbitmq-server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="3"><li>æŸ¥çœ‹çŠ¶æ€</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl status rabbitmq-server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="4"><li>åœæ­¢</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl stop rabbitmq-server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="4ã€å¼€å§‹é…ç½®webç®¡ç†ç«¯ï¼Œé¦–å…ˆåœæ‰mq"><a href="#4ã€å¼€å§‹é…ç½®webç®¡ç†ç«¯ï¼Œé¦–å…ˆåœæ‰mq" class="headerlink" title="4ã€å¼€å§‹é…ç½®webç®¡ç†ç«¯ï¼Œé¦–å…ˆåœæ‰mq"></a>4ã€å¼€å§‹é…ç½®webç®¡ç†ç«¯ï¼Œé¦–å…ˆåœæ‰mq</h3><ol><li>åœæ­¢</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl stop rabbitmq-server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>å¯ç”¨ç®¡ç†å¹³å°æ’ä»¶ï¼Œï¼Œå¯ä»¥å¯è§†åŒ–ç®¡ç†RabbitMQ</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rabbitmq-plugins <span class="token builtin class-name">enable</span> rabbitmq_management<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="3"><li>å¯åŠ¨èµ·æ¥ï¼Œæµ‹è¯•ä¸€ä¸‹</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl start rabbitmq-server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="4"><li>æŸ¥çœ‹çŠ¶æ€</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl status rabbitmq-server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="5"><li>è¿™é‡Œåˆ›å»ºä¸€ä¸ªç”¨æˆ·åå’Œå¯†ç éƒ½æ˜¯adminçš„ç”¨æˆ·</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rabbitmqctl add_user admin admin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="6"><li>è®¾ç½®adminä¸ºè¶…çº§ç®¡ç†å‘˜</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rabbitmqctl set_user_tags admin administrator<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="7"><li>æˆæƒè¿œç¨‹è®¿é—®</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rabbitmqctl set_permissions <span class="token parameter variable">-p</span> / admin <span class="token string">"."</span> <span class="token string">"."</span> <span class="token string">".*"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="8"><li>é‡å¯</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl restart rabbitmq-server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦ï¼š</p><p>é˜²ç«å¢™å¼€æ”¾5672å’Œ15672ç«¯å£ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">5672</span>/tcp <span class="token parameter variable">--permanent</span><span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">15672</span>/tcp <span class="token parameter variable">--permanent</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>é‡æ–°åŠ è½½é˜²ç«å¢™ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--reload</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æŸ¥çœ‹ç«¯å£æ˜¯å¦å¼€æ”¾ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --list-ports<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
            <tag> mysql </tag>
            
            <tag> Nginx </tag>
            
            <tag> rebbitmq </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
